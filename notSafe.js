//	SportGO

var pljssglobal = [];
var pljssglobalid;
if (window['PlayerjsAsync']) {
    setTimeout(PlayerjsAsync, 1)
};

function SportGo(options) {
    var o = {
        play: false,
        audiosrc: [],
        audioctx: [],
        playerid: 'tm4eq6yqtffb',
        default_w: 640,
        default_h: 360,
        version: '14.4.8',
        compilation: ['HLS', ''],
        compilations: '',
        fullscreen: false,
        realfullscreen: false,
        nativecontrols: false,
        fullwheel: false,
        fullscreen_start: false,
        airplay: false,
        pipwebkit: false,
        ispipkit: false,
        u: '#1fZxnM3xmaK5kc2YWdjw6wkoXAroXAqwTwOFWc2YjMLwjCOTjM29Tc3wjCjxNaNaNaNMjzqxPbKFmwkPYzqxUMLxObK4jCjwXwrohAqoXwjXja3xiaummcOEjCkoTwNtVbK1ieumWcjw6wN5WcNIjzqxiwkPYzqxPwkP0BL0TwNBWcOFZc2Ygeum0cuIjCOTjc3xlaLwjCksTwN9VwkPYzqxiM3FQc24jCjx0bLFTaGwTwOF5duIjCjx0aLi0wjXjdu9nbLFQc24jCjx0c3oUdNmObvEjzqxkcumkbZw6AqXjbutVaqw6AqXjeuJ4eqw6wjwTwOaidjw6wOFQeuYmwjXjbumlaGw6AGXjbumlaK9VduYifGw6AGXjMK5QcKt0bK9VwkPjdu9nbLFQc24jzqxjaZw6AGXjMNeiwkPjAq41wjXjMNeXMKFlbK5OwkPjBjo2wrMhBjwTwOFQeuYmwkPjwjXjMNekc2YWdjw6wkJiBKs1MGx9zqxkc250dN9TL2YQcNIjCOTjc3xlaLwjCkdTwN9VwkPYzqx0fLpmwkPjd2iiduIjzqxiM3FQc24jCjxTbK5mwjXjbqw6BqXjdN91cNFQcNdjCjwYwjXjeZw6AHoXzqxiwkPYzqxiMNdjCjwXzkIjzqxicu9iaqw6wksjzqxic3amdjw6wkojzqxkc2YWdjw6wkxjCrBNMZwTwNBWcu9ZMNdjCjxlMKFiausjzqxkc2YWdNYWMKEjCjxlMKFiausjzqxkc2YWdN92aLwjCjxNaNaNaNMjzqxjeKaNaLwjCOTjc24jCkoTwNBWcu9ZwkPjaNaNaNaNwjXjMGw6Aq41gGXjdu9nbLFQc24jCjxkc250dN9TdZwTwN1idNeQcjw6wkohAHohAqoZAqwTwNiicNFTaGw6AGXjMNeXMKFlbK5OwkPjBGoXwrIhAqwTwOFQdqw6AGXjbumlaGw6AGXjbumlaK9Vcum2aGw6AGXjbutVauYmM29Tc3wjCjwUAGwTwNiicNFTaLBkMKYmwkPjAG41wjXjeu9XeumXwkPYzqxTbK5meumXcKtZa2mVMN90eu9UwkPYBGXjbutVauYmbKBWcjw6wkYODkYmcuYQdvBmwvx5DGd1xZpZfr0OBGdhM3l9xnsXxZpkfr0OAHoOwuaQcuX9xZAZMkhnaNAOzn48z2d#wjXjbutVauYmbKBWcOBWeNJZwkPYzqxPMK5lcuJQM29Vc3amdjw6wkYODkYmcuYQdvBmwvx5DGdYAqdhdOh9xnsXxZpkfH0OAHoOwuB4DGdYAqdhaNmTcr0OwnxjCrBNMZdhwvB0fKYmDGeNbKYTzK9XMKBQevl6wroVAkTOzn48aKYTbLpnaGpZfH0OBGdhdOh9xnIOwuB5DGdYAqdhM3h9xnsXxZpNbKYTDGdkANw4A2akxZ8#Dq9ODjwTwOFQduxOdN91cNFQcNdjCkx9zqxkc250dN9TL3pTMLljCOTjc3xlaLwjCkwTwN9VwkPYzqxQM29VwkPjDvB2aZp3bKF0br0OAkoOwuimbKePer0OAkoODkYOwvFZMK5naN9ZcH0OevxicOBTMLFmyrITwrAQxn48du9TfKYQcNIhdu9QcOFnDGdXzkI5And1wroVBrh0AnhhAq41Bkw1wrsnzkIYBHMnwrsYzkEnBnIhBZoXzkI5And1wroVBrh0AnhOwuaQcuX9xZBNaNaNaNMOzn48z2d#Dq9neNd#wjXjbKBWckwjCjw8d3aOwveQavFPDGdZAqdhbuJQa2i0DGdZAqd#DudhaNmTcq1ZeKYmDGeVc256aLxWxZp0dNtVd2aWdN09x3FZMK5ncut0aGh1zqo0yGd#DvxmM3Ehfr0OAqdhfH0OAqdhe2mleuh9xnAVBGdhbuJQa2i0DGdYAjdhaNmTcr0Ow2aNaNaNajdWDkYZaKB0wvh9xnMVBGdhfH0OAqdhe2mleuh9xnAVBGdhbuJQa2i0DGdYAjdhaNmTcr0Ow2aNaNaNajdWDkXWan48z3B2an4jzqxQM29VAZw6wkYneNdhe2mleuh9xnwXxZpPaKmObvE9xnwXxn48aZp0dNtVd2aWdN09x3FZMK5ncut0aGhZzqonyGd#Dvpieuhhar0OHHs2zrdVAHA2BksYAnwhHrs2zrdVAHo5AHM5BrIhHrs1zkwXCrs3CrITBZ4YArlYBkl0BGpAAHEVAkd1ArlnzrdVAHo5AHM5BrIhEns0zkw3BHo5AZXnzks5CHsZBkw1wrsYzko2Ans5BZXXwrdVAHA3BHE2BrITAqprAZ4ZAHs4CHI5AGXXwroTAZ4YCHlYAkMZBGoXzrdVAHo5AHM5BrIhEnoTAHsVArs5AksZBjonzkwYAHh5BHlYzrs0zkwYCrAnCrlhBZ4YAnd1BrM0BGXYBq4ZAHhnAnh5wsX3zksnBnI0BkE1zrsZzkE0AHo0BkIhEnEVAHlnAno4BHITAHwVBrEYArE2BGoYzkd4BrA4BkMZzrsXzko0AHdXAHhhAG43CrEnCrM2AjX3zksXCHs2CHE1wsAYzkd4BrA4BkMZzrEVAHd2BkA3ArIhBq4YCHAnArh1BGXYzkd3Bnw5AkA2wrdVAHA3BHE2BrITAG43BndZCHwnBjprAHoVArhYBnh0BqXYzkd3Bnw5AkA2wrsZzkE5ArdXBkATBq4YBnM2AndXBGoYAj40CHo3ArMnzrdVAHo5AHM5BrIhHrsXzkM0BrIYBkdTBZ4YArlYBkl0BGpAAHAVAnhZCrl5BjXYAG41BHw0Aro0wsXYBjX3zksnBkMYAHAZwtPOwuaQcuX9xZBNaNaNaNMODkXWdut0br48z2d#Dq9neNd#wjXjMKB0bK9VwkPjduYifGwTwNtkeumWckwjCjxXMLJnaGwTwOF5duIjCjxneNdjzqxnM2tTaGw6wksVBGwTwOBkMKYmc3amdjw6AG41zqxUMLxObK4jCjwXwrohAqoZAqwTwOpWd2m0bK9VwkPjM29VevxWcvAjzqxQM29Vd2BWcu9ZwkPjBKs1MHJiwjXjbKBWcOBkc2YWdN92aLwjCjwnAnAnAnAjgGXjM29VevxWct9UeLFmwkQ7wN9ZauJZwkPYAGXjc24jCksTwNmkc24jCjw8d3aOwveQavFPDGdZAqdhbuJQa2i0DGdZAqd#DudhevxicOBNc3xUDGe0dNtVd2YieuIPAGXhAGlODkYXc2Y5a29VwvpWbK50dn0OzHsVAHA2CrM4AnimzHsnwrIVBnE1BHI2BkEhzHsVAHA2CrM4AnimzHsnwrsYzkd0CHM4AkMhBq4XArw0BkI4AjoYAG43Brl2Crw2wrlVAroZBrM1CrwhAHMVBnE5BkhZBjo5zkoXAkE2BHhZwroVBnE4CHoYAnM3wrEVAroZBrM1CrwhBG43BrI1BHM2BqdhaNmTcr0Ow2aNaNaNajdWDkYXMLFPwuE9x00YAG4XArw0BkI4zrEVBnE5BkhZBkwhHrsYzkoXAkE2BHhTAHwVBnE5BkhZBjprAHsVAroZBrM1CqXYAj43Brl2Crw2wrsnzkInBrM5AkETAHsVBrwYCHE4AjoYAZ41AnE2CHw0zrhVBnE5BkhZBkwhEnsnzkInBrM5AkETBj4XBnd0AHM5CGoYAG4XArw0BkI4zrEVBnE5BkhZBkwhAHsVAroZBrM1CqX0zkd0CHM4AkMZwtPOwumlDGeXbOBgeN9TeK1mL2JTaK1mcOEYxZpNbKYTDGdkaNaNaNaNxZ8#Dvpieuhhar0OHHsXzkl5BnAXBnwTAj4XCHsZCrEYCqprAHsVBHo5Crh3BZXZzkwnBrA1ArI5wrsZzkM4Akw5AHsTAj44BrMXArI2BZoYAZ4ZCrh5Crw1zrAVAkl3CrsXBHhhEns0zkl5Bro2AHlTBq41Bkd1CrhnAjoYBG45CHM3BHIZzrMVAnA0AkdnArMhAHIVCHlnAHh5BjX4zkd2AHoXBkw3wsAYBG45Crl2Ano1zrsYzks4Anw0CrwhAHEVCHlXAkI5BqXYAj45Akl1BnAhAHAVAkl1AnlTAHEVAHdXCrhnwsAYAj42CHoZBrIZzrs0zkMYBro4BkMhAHsVBrA1BnlYzrs1zkw1BnM2BjoYAq45CHdnArdZzrs1zkA2ArwZCHIhHrsXzkl5BnAXBnwTAHdVBrA4Anw5CqprAHsVCrl3AHE3CGXYBZ4ZAndnBrA5wrsnzks4And5BrlTAHMVBnAYBkE1BZoYBq40BndYAnoZzrs1zkd4BrEYBkEhEns2zkM1Crl2BnMTAHEVAHh2BrI0BjoYBZ45Crh2AnETAHsVCrMZCHM0AGoYBZ45CHAYCrd0zrhVBnMnCHE0CGprAHdVCHl3BnE0BjX1zkM2AkA0BkM2wrs2zkM2CHo4AHsTAZ4nAksnAkwYAZoYBq40CrA1And2zrsVBklnBnEYAnhhEnsnzks5Akd5BnlTAq43Anw1AkA2AnAhAHsVCrl1AHAXCqXXzkwYAnAZAko0BGoYAq45CHdnArdZzrohHrsXzkl5BnAXBnwTAj4XCHsZCrEYCqpbxZpQar0OduQnL3aWcvJUaJ9mcuJUaK50AjdhaNmTcq1ZeKYmDGeVc256aLxWxZpNbKYTDGdkaNaNaNaNxZ8#Dq9ODkXWd3aODjwTwNmkc24ZwkPjDvB2aZp3bKF0br0OAkoOwuimbKePer0OAkoODkYOwuaQcuX9xZAXAroXAroOwvFZMK5naN9ZcH0OevxicOBTMLFmyrsTwrsQxn48du9TfKeWcjpXc2mVevA9xZ0YzksnBkh2CrA4aG0YAZo1zkd0BHI1BkM0wq0YzksnBkh2CrA4aG0YAZoYAG43Brl2Crw2wrEVAroZBrM1CrwhAHsVBnE5BkhZBjo5zkoXAkE2BHhZwrs2zkd0CHM4AkMhCG4XArw0BkI4AjoXzkd0CrlXAHA2BZo0zkoXAkE2BHhZwrIVBnE1BHI2BkEOwuaQcuX9xZBNaNaNaNMOzn48dut0bqplDGeBAHAVBGX3zkd5Akh5AnwZwsXYAG44BHA1BHA0zrMVAHE2BrE2BkshHrsYzks0BkE0BkMTBj44BHA1BHAnCGpAAHwVBnlZCrlnAjX4zkIhHrsYzks0BkE0BkMTAHoVAHE2BrE2BjpAAHsVCrInBHInBqXYAq44BHA1BHA0wsXYAZ41zrlVAko3AHo2BnhhHrs1zks0BkE0BkMTAHoVCrInBHInBqpAAHIVCrInBHInBqXYAq4YBrM0BrM2wsXYBq4ZArdYArM4zrhVBGpAAHIVCrInBHInBqX2zkh1AnI1AnA5wsXYBG4YBrM0BrM2zrMVAHE2BrE2BkshHrsnzkITBZ43CHw4CHAZAjpbxZpNbKYTDGdkaNaNaNaNxZ8#Dq9ODkXWd3aODjwTwNtkeumWcjw6wN11euIjzqxiM3FQc24ZwkPjeK5UeLFmwjXjevmXaGw6wOB2aZwTwNmkc25nM29Tc3wjCjw1MHJiBKsjzqxQM29Vd2BWcu9Zc3amdjw6wkAnAnAnAZwTwN1idNeQcjw6wkohAqoXwrwXwjXjaumnduYifLaWcvJUaGw6AL0TwNBWcOFZc2YgeN9TeK1mwkQ7wN9ZauJZwkPYAjXjc24jCksTwOF5duIjCjxnbutXaGwTwNtkeumWcjw6wOaWcvJUaGwTwNhjCkETwOxWeK5lbK5OwkPjAGwTwNB1d3FWcLeQavFPwkPYzqx3wkPYAroTwNsjCksTwNtjaZw6wksjzqxic3amdjw6wkojzqxkc2YWdjw6wkxjCrBNMZwTwNBWcu9ZMNdjCjxlMKFiausjzqxkc2YWdN92aLwjCjxNaNaNaNMjzqxPbKFmwkPYzqxPbKFmc3J0cLJ0aGw6AGXjdN90MLFQc24jCjwZBnojzqxja3piauFQcNdjCjw1wrohBGoXwjXjMNdjCkoTwNiicNFTaGw6AGXjcKtZa2mVwkPjAqoYAqoYArohAqwTwNiicNFTaKBWcu9ZwkPjANw4A2akwjXjbutVauYmd2BicuIjCjwYzkIjzqxPMK5lcuJQM29Vd292aLwjCksTwNiicNFTaKmkc24jCjw8an48aKYTbLpnaGpZfH0OBGdhdOh9xnIOwuB5DGdYAqdhM3h9xnsXxZpNbKYTDGdkANw4A2akxZ8#Dq9ODjwTwNiicNFTaKmkc25WeNJZwkPjDud#DuJTcumXd2IhdOl9xnsXxZpZfr0OAHoOwuB5DGdYAqdhM3h9xnsXxZpNbKYTDGdkANw4A2akxZohd3F5cuI9x2aQcuXUc3piM2m0fHPhAq4ZCZdWDkYmcuYQdvBmwvx5DGd1xZpZfr0OBGdhM3l9xnsXxZpkfr0OAHoOwuaQcuX9xZAZMkhnaNAOzn48z2d#wjXjdu9nbLFQc24jCjxjc3F0c20UdNmObvEjgGXjM29VevxWct90bK1mwkQ7wN9ZauJZwkP2zqxWcjw6AGXjMKB0bK9VwkPjeumUaGwTwOF5duIjCjx0aLi0wjXjeuJ4eqw6wko6ArojzqxNc250d2m6aGw6AHoTwN1idNeQcjw6wkohAqoXwrs1wjXjM2YQM2TjCkoTwOBmdutZMLFWdjw6wj8jzqxkc2YWdjw6wkAnAnAnAZx9zqxkc250dN9TL2F1dNt0bK9VwkQ7wN9ZauJZwkP4zqxWcjw6AGXjMKB0bK9VwkPjavJZMLFQc24jzqx0fLpmwkPjeuJ4eqwTwOFmfvEjCjwXCkoXwjXjaN9VevBQfNIjCksXzqxUMLxObK4jCjwXwrohAqoXwjXjM2YQM2TjCkoTwNBWcu9ZwkPjAnAnAnAnwO0TwNBWcOFZc2YgMOJNaNJZwkQ7wN9ZauJZwkPYAZXjc24jCksTwNmkc24jCjw8aum2wuBTMLBnDGeTc2tlaLwPdNtVaqlODkYneNdhM2Yid3A9x2BQdNB1cutZyvxicNEQxZp2bKJ3EN94DGdZBGoZBGo1Aqo1Aqd#DuBQdNBTaGpkcutndn0Odut0bqiZMK5lyGdhd3FZc2UmDGdPM29Tc3wQxZpkfr0OBHoOwuB5DGd1Aqdhdk0OAkoOwuaQcuX9x25WcNIOwvB0dN9SaG13bKF0br0OAjdhd3FZc2UmzK1QeuJZcumUbLE9xnsXxZ8#Dq9neNd#Dq9lbLM#gvY8zNYWMKFmdjiZMK5lyGp7du9nbLFQc246wvxmcut0bLamC21idNeQckPhAqpieLFWC3eQavFPCjo1Avp4C30Vcu9iauJZyvxicNEQCNxmaN9ZaGp7M29VeuJVerPhxZd7aumnduYifHPhMNYWM2T7dutlaumVaZ10c3o6wrsXAqI7gG5kbLxkeKYidjiZMK5lyGp7zLemMNUQeq1icNmUMLFQc246wvxWeut0aGoZdZpTbK5mMLwhbK5NbK5QeuI7MK5QcKt0bK9VCjpZc3FieuIhAOAhcumVaKtZwumVaNmVbLFmC2imbKePerPhAHoXxHTUe2Jjb2m0zLFZMK5naN9ZcG1WdNmObK46wuBmcOFmdjpkaK50aLw7evxicOBNc3xUzK9ZbKeQckPhM2JVeuJZwuBmcOFmdkU3bKF0brPhAHoXxHUXc3BQeumWckPhMKxnc2Y1euI7eu9XCjoXC2xWevFWcHPhArUTaKa0CjoXC3xQa2i0CjoXC21idNeQckPhMLJ0cnU9zOpieuhPdNtVaqlhf3B0dN9SaG1lMLBPMLxZMLl6wrsTwrwXArUnevxWb2IUautnbu9NaOBmerPhArTUe2Jjb2m0zKtVbK1ieumWckPhautnbqoYzkJnwuJid2IUbK4Uc3J0wumVaNmVbLFmC2tVbK1ieumWckPhautnbqoYzkJnwuJid2IUbK4Uc3J0wumVaNmVbLFmC31ozLemMNUQeq1SaLmNdNtUaLAhdN90MLFmwvTYAromwvTUe2Jjb2m0zLFZMK5naN9ZcHPhdN90MLFmyrA2AuFmaZl7evxicOBNc3xUCjpZc3FieuIPAnMXauJOyHU9gIpSaLmNdNtUaLAhdN90MLFmwvTYAromwvTUe2Jjb2m0zLFZMK5naN9ZcHPhdN90MLFmyrA2AuFmaZl7evxicOBNc3xUCjpZc3FieuIPAnMXauJOyHU9gIoUe2Jjb2m0zKUmfKaZMK1mdZplMLBPwvTXxGp7d3FZc2UmzKFid2iidOxifHPhAGXhAkoXC3B0dN9SaG1lMLBPc2aNd2J0CjoXC301AqIhf3B0dN9SaG1lMLBPMLxZMLl6wrh5zqoZAro7d3FZc2UmzKFid2iWaNanaLE6wq0nBLp4C30YAromwvUnevxWb2IUautnbutZdNt5Cjo4CGXhAkoXC3B0dN9SaG1lMLBPc2aNd2J0CjoUAHw0dvh7gL1ob2J5aOxicKJnwuFid2hhfnomwvUnevxWb2IUautnbutZdNt5CjoYzqoZAro7d3FZc2UmzKFid2iWaNanaLE6wro7gHIXxGp7d3FZc2UmzKFid2iidOxifHPhCrlTwrwXArUnevxWb2IUautnbu9NaOBmerPhzHA1dvh7gHsXAqIhf3B0dN9SaG1lMLBPMLxZMLl6wrh5zqoZAro7d3FZc2UmzKFid2iWaNanaLE6wq0YAkFXfrU9gGwTwNtkeumWcjw6wNx1aNamdjwTwOF5duIjCjxkd3AjzqxXc3BQeumWcjw6wNBmcOFmdjwTwOBkMKYmwkPYzqxkcumkbZw6AqXjbumlaGw6AGXjcKtZa2mVwkPjAqoXwrs1wrojgGXjM29VevxWct9naLF0bK5OdZw6fZxWdNFmdjw6CGXjc24jCksTwNmkc24jCjw8d3aOwveQavFPDGdZAqdhbuJQa2i0DGdZAqd#DudhaNmTcq1ZeKYmDGeVc256aLxWxZp0dNtVd2aWdN09x3FZMK5ncut0aGhYzqoYyGd#Dvpieuhhar0OHHs1zkI0ArM2BHMTBj40Bkd2CHhYAZpAAHIVBHEXBkM1BjXXzkIXArM2BrEXBjpAAHEVArE1BnIYAjXXzkIXArM2BrEXBjpAAHEVArE1BnIYAjX2zkE2BnM5CrsnwsXYAZ4nBrl5BHs2zrMVBrM3Bkl4AHAhEnsZzkI2ArE3ArhTBj40Bkd2CHhYAZoYAG45Ako0CrsnzrMVCHl3Crl0BrwhAHsVCHwXBrhYAZX3zkM1AkoXAkIhEnsYzklZArE4AHATCq4nArMZBnM2CGoYAj41Bko0Bno4zrhVCrA2BrdZCHhhAHAVAnE5CHIYBjX4zkhnBkE3Akl4wsXYBj4XBno1Akl3zrhVCrA2BrdZCHhhEns2zkh2AroYArMTCq44AnM0Bnw5CqoYBZ41zrhVAno2Akd2BklhAHdVBGX3zkM1AkoXAkIhEns3zkITBj45CHd4CHE0AjoYBj44BkoXAHo2zrMVBrM3Bkl4AHAhAHMVArdXBHw5BZX2zkE2BnM5CrsnwsXYBG41Bro2BkI2zrMVBrM3Bkl4AHAhKjpBCG43BHE4Brh3zrsZzkA0BnonArwhHrlVBnI0CrE4BZXXzkIhHrhVAkI5CHA0AnETAq41wsX4zkw1CHlnBrA0zrsZzkA0BnonArwhHrdVBHMnCHM4BkMTAHwVAnE3ArAXAjprBj43BnE0Crd3BZXYAj4nBrdXAnoZwrMVAHA0Brl4AnwTAHwVCrd3AnlZBjo2zksnBrE5CrAZzrsnzkInAHIXArdhEnMVAHA0Brl4AnwTAHEVAHh1Bko4Cqo2zkd3BrE4Bnd3zrs0zkdYBHl3AHwhBZ41BkA5Bkh2BjXYBq43AHI5BnsZwsXYAq4ZCrE1BrM3zrs0zkdYBHl3AHwhEnsYzko3BroZBnMTAHEVBns1CHdYAjoYAG43AHEXAHdTAHEVAHh1Bko4CqoYAG43AHEXAHdTAHAVBHAYBHoXBZprAHsVBns0Ars3zrsZzkh3BnA5AkMhAHsVArd0Arw3BjXYAj4nBrdXAnoZwrsXzkw4BrI0BkdTAHwVAnE3ArAXAjpACG43BHE4Brh3zrsZzkA0BnonArwhKjpBBq4YAHsZAHE3CGXZzkwZAkhXBHd1wsX0zksYAHwYBrd5zroVBHoXBkM0Bro2wsXZzkMYBkAXArEnzroVBHoXBkM0Bro2wsXZzkMYBkAXArEnzrwVAkwZCro1BnIhHrsVCHw5BrdXAnATAj4ZAkw4ArI3BGprAG4YAnl5Crl0BGXZzkwZAkhXBHd1wroVBGXZzkd1Ans2Crs0wroVBGXnzkEXBnw3BkwnwsAXzkITBq4XBksnCrEnAGoYzksnCHl4CHE1zrEVBHlYBnE2BZoYzklZCHE3ArAnzrEVBHlYBnE2BZpABq42BHoZAHE0BZX0zkI5AHd0BkdhEnIVBrA5Bkl1AnITBq41CHs3BrM3wrMVArd5Bkh0CqX0zko2AHA4BrAYwrMVArd5Bkh0CqXnzkEXBnw3BkwnwsA2zko3CHM4BrhTAj43BHAYBkhYBqo1zkEnCHM5BHA1zrwVAkwZCro1BnIhBq42BHoZAHE0BZXZzkwZAkhXBHd1wsX0zksYAHwYBrd5zrwVAkwZCro1BnIhKjpBAj42AHMnAro0AZX1zkMYBrMXArAnwsX0zksYAHwYBrd5zrIVBks0BkoXAnAhHrEVAHsYAks0BnlTAHdVBrAXCHoYBZpAAj42AHMnAro0AZXYBZ40Ano5Ars3wsXZzkMYBkAXArEnzrIVBks0BkoXAnAhKjpBCq4ZBHl5AnEnBqXYBG43BHA2Ard4wsX5zkd1Brh0CrdTAHIVBnInBko3CqpACG43BHE4Brh3zrs3zkEnArwnBnAhHrhVAkI5CHA0AnETAHdVBrAXAkA3AZpACq4ZBHl5AnEnBqXYBG43BHA2Ard4wtPhHHs0zko0BHd1AHwTCG44AnhZAns3wsXYBG41Bro2BkI2zrlVCrA4AkAYBZpAAHIVBHEXBkM1BjXYBZ40Ano5Ars3wsXYBq4XBrI3BHsZzrs3zkEnArlXAHdhHrs0zko0BHd1AHwTCG44AnhZAns3wtPOwuaQcuX9xZBNaNaNaNMOzn48z2d#Dq9neNd#wjXjMKB0bK9VwkPjd2J0eumVa3AjzqxXc3BQeumWcjw6wNBWcOFZc2YnzLxQa2i0wjXjcKtZa2mVwkPjAqoXwrohAHIjzqx0fLpmwkPjd3aOwjXjbKBWcOBkc2YWdjw6wkJiBKs1MGwTwNmkc25nM29Tc3xWeNJZwkPjAnAnAnAnwO0TwNBWcOFZc2YgduYifKYQd3EjCOTjc3xlaLwjCks0zqxWcjw6AGXjbKBWcjw6wkYneNdhe2mleuh9xnwXxZpPaKmObvE9xnwXxn48aZp0dNtVd2aWdN09x3FZMK5ncut0aGhZzqonyGd#Dvpieuhhar0OHHoTAqpAAHMTAqpAAHMTAjpAAqXZwsXXzrohKjpBAqX2wsXYBjX2wsXYBjX4wsXXzrhhHroTBjpbws0XzrsZwsXYBjXYAjpAAHMTAHEhHroTAHEhHroTAHwhKjdhaNmTcr0Ow2aNaNaNajdWDkXWan48z3B2an4jzqxiM3FQc24jCjxXcut5cumneqwTwOpWd2m0bK9VwkPjcuJNeqwTwN1idNeQcjw6wkohAqoXwrMjzqxjaZw6AGXjd2BicuIjCksVBGXjevmXaGw6wOB2aZwTwNtVbK1ieumWcjw6wOpWd2m0bK9VwjXjMNeXMKFlbK5OwkPjAZonwrAhAZwTwNxOMGw6Aq40zqxja2tWeNJZwkPXzkhTwOFQdqw6Av0TwNBWcOFZc2YgaOJTcqw6fZxWdNFmdjw6AHITwN9VwkPYzqxQM29VwkPjDvB2aZp3bKF0br0OAkoOwuimbKePer0OAkoODkYOwuaQcuXUdOJTaH0OcN9VfNJZcZdhevxicOBNc3xUDGe0dNtVd2YieuIPAGXhAGlODkYXMLFPwuE9x002zkM3BrEXBHsYzrohHrMVBkd0Bro1AHsTAG43Brs5AnI0CqpAAG43BrsYBrlYBjXYzkd0AHlnBHE4wsXYzkd0AHs0CHs2zrMVBkd3Brs5AnIhHroTBj42Bnd0AHlnBGpAAqXXwsX2zkM3BrEXBHsYzrohKjpBAHhTAqpAAHhTBj42Bnd0AHlnBGpAAHMVAkI4CrIXCqX2zkM3BnEYCHA1wsXYBj4ZBHh4BHo4zrsVBnEYCHA1BrhhHrsYzkAZBHI5BrlTAG43Brs5AnI0CqpAAHsVAnw1BHl0CGXXwsXYCqXXwtPhHHsVBnEYAHE5AHMTAHsVAnwZBHhXBjpAAG43BrsYBrlYBjXYBj4ZBHhXBkE1wsX2zkM3BrEXBHsYzrs2zkw1Cro2BrIhHrMVBkd0Bro1AHsTAHhhHroTAHhhHroTAHsVAnwZBHhXBjpAAG43BrsYBrlYBjXYAG4nAkw1Cro2wtPhHHs4zrsYzkAZAkI4ArMhHrs4zrs4wsXYAG4nAkI1CHE5zrs4wsXYAG4nAkI1CHE5zrs2zkw1Cro2BrIhHrs2zkw1Crh1ArhTAHMVAkI4ArM0BGpAAHMVAkI4CrIXCqXYAG4nAkw1Cro2wsXYCqXYAG4nAkw1Cro2wtPOwuaQcuX9xZBNaNaNaNMOzn48z2d#Dq9neNd#wjXjbKBWckwjCjw8d3aOwveQavFPDGdZAqdhbuJQa2i0DGdZAqd#DudhaNmTcq1ZeKYmDGeVc256aLxWxZp0dNtVd2aWdN09x3FZMK5ncut0aGhYzqoYyGd#Dvpieuhhar0OHHoTBj42Bnd0AHlnBGpAAqX0zklnBHE4Anh3wsX0zklnAnw1BHl1zrEVCHA1BrhnCrdhHrEVCHAnAkI1CHITzHhVCrhYBnh0ANIUAHMhHrMVBkd0Bro1AHsTzHhVCrhYBnh0ANIUAHMhHrMVBkd0Bro1AHsTBj42Bnd0AHlnBGpAAqX2zkM3BnEYCHA1wtPhHHsYzkAZBHI5BrlTBj42Bnd0AHlnBGpAAHsVAnw1BHl0CGXXwsXYAZ4XBkM3BrEYzrohHrsnzko2Bkd0BrsTBq45AnI0CrA4BZpAAHhTBq45AnI0CrA4BZpAAHhTBj42Bnd0AHlnBGpAAHsVAnw1BHl0CGX2zkM3BnEYCHA1wtPhHHEVCHAnAkI1CHITAHhhHrEVCHAnAkI1CHITAHAVArM0BHs2AGpAzHhVCrhYBnh0ANIUAHMTAHAVArM0BHs2AGpAzHhVCrhYBnh0ANIUAHMTAHsVAnwZBHhXBjpABj42BnE0ArIYAGXYAG4nAkw1Cro2wsX2zkM3BrEXBHsYzrs4wsX0zklnAnw1BHl1zrs4wtPhHHsYzkAZBHI5BrlTAHhhHrsYzkAZBHI5BrlTAHsVAnwZBHhXBjpAAHhTAHsVAnwZBHhXBjpAAHhTAHAVArM0BHs2AGpAAHAVArM2BnE0AGXYAZ4XBkE1AHMYwsXYAZ4XBkM3BrEYzrs4wsXYAG4nAkI1CHE5zrs4wtPOwuaQcuX9xZBNaNaNaNMOzn48z2d#Dq9neNd#wjXjMKB0bK9VwkPjaOJTcvBkdNJmcjwTwNtkeumWckwjCjxVc3xUMKYnM3xmaK4jzqx0fLpmwkPjd3aOwjXjdu9nbLFQc24jCjxkc250dN9TdZ1ZbKePeqwTwN1idNeQcjw6wkohAHohAqoYBGwTwNmkc25nM29Tc3wjCjw1MHJiBKsjzqxQM29Vd2BWcu9Zc3amdjw6wkAnAnAnAZx9zqxkc250dN9TL3B0MLx0wkQ7wN9ZauJZwkPYBjXjdu9nbLFQc24jCjxkaK50aLwjzqxnM2tTaGw6AjXjc24jCksTwNmkc24jCjw8d3aOwveQavFPDGdZAqdhbuJQa2i0DGdZAqd#DudhevxicOBNc3xUDGe0dNtVd2YieuIPBGXhAZlODkYXc2Y5cumVaGpXc2mVevA9xnoVBHlnBnIhAq40CrEnCqoXzkI2AkIhAHAVBHs1BkAhAHsVBrA3BGo3wroVBHlnBnIhAq40CrEnCqdhaNmTcr0Ow2aNaNaNajdWDkXWan48z3B2an4jzqxQM29VAZw6wkYneNdhe2mleuh9xnwXxZpPaKmObvE9xnwXxn48aZp0dNtVd2aWdN09x3FZMK5ncut0aGhZzqonyGd#Dvpieuhhar0OHHs2zrdVAHA2BksYAnwhHrs2zrdVAHo5AHM5BrIhHrs1zkwXCrs3CrITBZ4YArlYBkl0BGpAAHEVAkd1ArlnzrdVAHo5AHM5BrIhEns0zkw3BHo5AZXnzks5CHsZBkw1wrsYzko2Ans5BZXXwrdVAHA3BHE2BrITAqprAZ4ZAHs4CHI5AGXXwroTAZ4YCHlYAkMZBGoXzrdVAHo5AHM5BrIhEnoTAHsVArs5AksZBjonzkwYAHh5BHlYzrs0zkwYCrAnCrlhBZ4YAnd1BrM0BGXYBq4ZAHhnAnh5wsX3zksnBnI0BkE1zrsZzkE0AHo0BkIhEnEVAHlnAno4BHITAHwVBrEYArE2BGoYzkd4BrA4BkMZzrsXzko0AHdXAHhhAG43CrEnCrM2AjX3zksXCHs2CHE1wsAYzkd4BrA4BkMZzrEVAHd2BkA3ArIhBq4YCHAnArh1BGXYzkd3Bnw5AkA2wrdVAHA3BHE2BrITAG43BndZCHwnBjprAHoVArhYBnh0BqXYzkd3Bnw5AkA2wrsZzkE5ArdXBkATBq4YBnM2AndXBGoYAj40CHo3ArMnzrdVAHo5AHM5BrIhHrsXzkM0BrIYBkdTBZ4YArlYBkl0BGpAAHAVAnhZCrl5BjXYAG41BHw0Aro0wsXYBjX3zksnBkMYAHAZwtPOwuaQcuX9xZBNaNaNaNMODkXWdut0br48z2d#Dq9neNd#wjXjMKB0bK9VwkPjduYifGwTwOF5duIjCjxneNdjzqxjaZw6AGXjMNekc2YWdjw6wkxjCrBNMZwTwNxOcZw6AGXjMNeXMKFlbK5OwkPjBZo3wrdhBZwTwNmkc25UMLxObK4jCjwXwrohAqo0wjXjMNeiwkPjAq41wjXjMNeic3amdjw6wksjzqxnM2tTaK92aLwjCkwVAGXjbumlaGw6AGXjbumlaK9VduYifGw6AGXjbumlaK9VfK91evJjaGw6AGXjcKtZa2mVwkPjAqoXwrs1wrojgGXjM29VevxWct9TbLamwkQ7wN9ZauJZwkPYBZXjc24jCksTwOFmfvEjCjxTbLamwjXjcuJ0euJZd3piM2mVaZw6AjXjMKB0bK9VwkPjcum2aGwTwOF5duIjCjx0aLi0wjXjbutVaqw6AqXjM2YQM2TjCkoTwNaWcOFnbLQmwkPYAqXjcKtZa2mVwkPjAqoXwrohAHIjzqxiwkPXzkITwNiQauIjCksTwNiQauJWcOaWaqw6AL0TwNBWcOFZc2Ygd3FWdqw6fZxWdNFmdjw6AHhTwN9VwkPXzqxQM29VwkPjDvB2aZp3bKF0br0OAkoOwuimbKePer0OAkoODkYOwvFZMK5naN9ZcH0OevxicOBTMLFmyrETwrEQxn48dNJkeqp4DGdXxZp5DGdXxZp3bKF0br0OAHwOwuimbKePer0OAHwOwuaQcuX9xZBNaNaNaNMOzn48z2d#Dq9neNd#wjXjMKB0bK9VwkPjd3FWdqwTwOF5duIjCjxneNdjzqxjaZw6Av0TwNBWcOFZc2Ygdvxmejw6fZxWdNFmdjw6BqXjc24jCkoTwNmkc24jCjw8d3aOwveQavFPDGdZAqdhbuJQa2i0DGdZAqd#DudhaNmTcq1ZeKYmDGeVc256aLxWxZpNbKYTDGdkAroXAroXxZp0dNtVd2aWdN09x3FZMK5ncut0aGh1zkITwrIQxn48dut0bqplDGeBCq45CHl5CGXYAq40And0CGpACq45CHl5CGXYAq40And1wsXZzrIVAks4BnIhHrhVCHl5CHlTAqpACq45CHl5CGXYAq40And0CGpbws0XzrohHrwTAqpAAjXYAq4ZBrl4AZpAAqXYAq4ZBrl4AZpAAqXXwtPOwuaQcuX9xZBNaNaNaNMOzn48z2d#Dq9neNd#wjXjMKB0bK9VwkPjdvxmejwTwOF5duIjCjxneNdjzqxnM2tTaGw6wksVAjwTwOpWd2m0bK9VwkPjM29VevxWcvAjzqxUMLxObK4jCjwXwrohAqoYBGwTwNaTbLp4wkPYzqxQM29Vd2BWcu9ZwkPjBKs1MHJiwjXjdN90MLFQc24jCjwYCrojgGXjM29VevxWct9VaLi0wkQ7wN9ZauJZwkP1zqxWcjw6AGXjbKBWcjw6wkYneNdhe2mleuh9xnwXxZpPaKmObvE9xnwXxn48aZpNbKYTzLx1cuI9x25WcOQmdN8OwuaQcuX9xZAXAroXAroOwvFZMK5naN9ZcH0OevxicOBTMLFmyrITwrIQxn48dut0bqplDGeBAq40Bkl0CqXYaG0XBGpAAq40Bkl0CqXYaG0XBGpAAq40Bkl0CqXXwsX3zkE2CHE3zrIVAks4BnIhHroVBrM5BrhTAHoVBrA3BGpAAq40Bkl0CqXYaG0XBGpbws03zkInArIZzrohHrlVBHAXBHwTAqpACG41Ano1AjXYAq42AkE4AjpABZ41Ano1AjXYAq42AkE4AjpABZ41Ano1AjXXwtPOwuaQcuX9xZBNaNaNaNMOzn48z2d#Dq9neNd#wjXjMKB0bK9VwkPjcNJ4eqwTwOF5duIjCjxneNdjzqxnM2tTaGw6wksVAjwTwOpWd2m0bK9VwkPjM29VevxWcvAjzqxUMLxObK4jCjwXwrohAqoYBGwTwNmkc25nM29Tc3wjCjw1MHJiBKsjzqxQM29Vd2BWcu9Zc3amdjw6wkAnAnAnAZx9zqxkc250dN9TL3BPMLxmwkQ7wN9ZauJZwkPYAqXjc24jCksTwNmkc24jCjw8d3aOwveQavFPDGdZAqdhbuJQa2i0DGdZAqd#DudhaNmTcr0OwnoXAroXAqdhevxicOBNc3xUDGe0dNtVd2YieuIPAjXhAjlODkYXMLFPwuE9x001zkI2Bkw4BrITCq4ZBkw0CrA2BjprBG41BkMZCrE1zrhVAns3Brw1AnwhBG41BHEYAroYBZX4zkA2CHs1BksYwrIVBHIXCHM3ArITCq40AkA3BrshHrsYzks2Anl0ArwTAHsVAkl5ArhXAZprAHsVBkE0BHw1AGXYAq44CrwXAkAZwrsZzkw1CHAYAHMTAHoVBkwYBnMnCqoYAj45Anh1ArsTAHoVBkwYBnMnCqprAHEVBrM1BHE1CqXYAq42AkwZCHlhAHIVBnoZCHIYBZXYAG44CHo0AHM2wrs1zkdXAkl1AHdTAHAVBrI1Aro1wsAYBG43Arw5BHs3zrs1zkoZAHI1BHMhAHEVBrM1BHE1CqXYBj4ZCrl2BnAZwrsZzklnCrIXAGXYBj4ZCrl2BnAZwsAYAG40AHoZAnd4zrs2zkw4CHM3AnwhAHoVAHd0ArIXBqXYBG4XAks1BHI2wrsXzks3Bro1ArETAHAVBrI1Aro1wsAYAq4YBnEXBHo0zrsnzkA5CrMnBkAhAHoVAHh2AkA0BZXYAZ4nBrhYBHEZwrsXzks4CHA2BnlTAHAVAklnBHM5AZpABq41BnMnCHE2AZXYAq40AHhZAZprBq4XCHE0AHdnzrsXzkhnAnM4AHMhAZ40CrsXAkAZBZXYAG4XCHA5BrshAj44Ars4AnA4BqXYAG4XCHA5BrshEnsVAkd0CHMnArlTAHsVArlnCHEYwroVArA3AnhnAHd3BjX5zkhZBno3Ako4wroVArA3AnhnAHd3BjX4zkw2AkE4AnM2wsAXzkonBnA4Ans3BnMTBj42CHMZCrl3CGoYzkw3Brl2Ano5zrIVBrw3Crs1BrMhAj44Ars4AnA4BqX1zkEZBnhYBHE2wsAnzkE4AHoZAnw3zrIVBrw3Crs1BrMhBq4XCHE1CHsnBZX1zkM4CHM4ArwZwrEVBHd2Anl0BkATBj4YArIYAns4CqpAAHoVAHh5AnM3CGXnzkwZCHd5AkI4wsAYAq4YCrMZAnE3zrAVAHd0CrIXCHAhAHoVAHd0ArIXBqXnzksZAnsZArs1wrsXzks3Bro1ArETAZ4XBkM3BHs0BqprAHoVAHd0ArIXBqXYzkIXAnI5Aro3wrsYzkEYArwnBnhTAq4ZAnIZCHEYAHhhAHwVCHA4BHoYzroVAkA1Akl0AHs4wsAYBq40BkI1BrI4zroVAkA1Akl0AHs4wrs1zkdXAkl1AHdTAG41ArA1CHoXBZoYBG43Arw5BHs3zrAVArM2BnIYBrEhEns1zkdXAkl1AHdTBq42Anw5BrInAGoYBq40BkI1BrI4zrIVCHoYBrs5BkEhAHwVCHA4BHoYzrIVCHoYBrs5BkEhEnsZzkw1Bnd0BHsTBG45Ars0AHl2BqoYAG42BrEXArw5zrIVBkA5BHI0CrhhAHsVAHMnCHEXAjX1zkwZAkE5Bnd5wsX1zkI1Arl2Bno1zrhVArl5BrEZBHwhEnIVBHInCHw2AHsTCq4YBHEnCrEYCqo1zkI2Bkw4BrITCq4ZArMYAHE5CGo1zkI2Bkw4BrITCq4ZBkw0CrA2BjdhaNmTcr0Ow2aNaNaNajdWDkXWan48z3B2an4jzqxiM3FQc24jCjxnbutZaGwTwOF5duIjCjxneNdjzqxXc3BQeumWcjw6wOFWdq1ZbKePeqwTwN1idNeQcjw6wks1wrs1wrohAqwTwNxOwkPXzqxja28jCksTwOBkMKYmwkPYzqxja3piauFQcNdjCjw2wrMhBjo2wjXjMNeiwkPXzkATwNxOMK92aLwjCkoVBjXjMK5QcKt0bK9VwkPjdu9nbLFQc24jzqxmMLBmwkPjaKYid3FQMZwTwNmkc25nM29Tc3wjCjwUAGwTwNsjCjwYwjXjMK92aLwjCjwYwjXjbKBWcOBkc2YWdN92aLwjCjwUAGx9zqxTMK5OwkPjaK4jzqxid3pmM3EjCjwYBOh5wjXjduYifKJZbuJQa2i0wkPZAroTwNiQauJ2bKFmcZw6AqXjduYifKYQd3EjCOTjMKY3MLmnwkPXzqxXc3BQeumWcjw6wNYmaOEjzqxja2BWcu9ZwkPjaNaNaNaNwjXjM29Tc3wjCjwnAnAnAnAjzqxPbLB0c3x5MNekc2YWdjw6wNJmaKJmaGwTwNxOM29Tc3xWeNJZwkPjaKJmaKJmwjXjduYifKYQd3FZaLeQcNEjCkoTwOaicvJmM29Tc3wjCjwZMkhnaNAjzqxjc3xlaLxkc2YWdjw6wNFlauFlaqwTwNiQd3FWdOmkc2YWdjw6wNtiMKtiMGwTwOBkdN9TcutZdN93a3xiaummcOEjCkoTwOBkdN9TcutZdN93M29Tc3wjCjwnAnAnAnAjzqxja2sjCjwYwjXjbuJiauxWdNFmdNBWcu9ZwkPjMKtiMKtiwjXjMLJ0c3pTMLmTbLB0wkPYgGXjduYifKJZe2mleuhjCkIXAqXjd2iiau93wkPYzqxjc3xlaLwjCkoTwNxWdNFmdOBQfNIjCksTwNxWdNFmdNBWcu9ZwkPjaKJmaKJmwjXjdu9neuJZbumlaGw6AGXjM29VevxWct9xBriqajw6fZxWcjw6AGXjc3xlaLwjCkATwNtkeumWcjw6wNB1d3FWcGwTwNmkc24jCjw8d3aOwveQavFPDGdZAqdhbuJQa2i0DGdZAqd#DudhevxicOBNc3xUDGe0dNtVd2YieuIPAG41zqoXyGd#Dvpieuhhar0OHHsVBkh4AksZBrwTBj42BkEnBHlnBjprAq45AHInAnE5ArsTBZ45AkdXArA4wroVBGX5zkA4Aro3AkM3wroVBGXYAq44CHs5CHh3wsAXzkITAHIVAnM5CHw0Ajo0zksnAro3BHh0zrs5wrhVBko4AroYAnwTAHlhEnsnzko4BHlZBkhTAHlhAHMVBns2AroZBjXYBG4nBkl5AkEZwrs2zkdYBkoXAkMTAHoVCrlYCHl4BZprAHMVBns2AroZBjX2zkEYBro3AnwhAHAVArh1CHw2CqXZzkd4Anl5BnA3wrhVBko4AroYAnwTAj43CrA5CHdnBZpACq42ArhXArsnAjXXwsXZzkAXAHd3Cro3zrAVBnEZAHM5BrlhHrhVBko4AroYAnwTBZ4nCrI2Arh3BqpACq42ArhXArsnAjX0zkI4BHd3BHE0wsAYAj4XCHo4AnwZzrEVBHh1Bnd1BrEhAHEVCHs0Akw0BjX3zkEXCHs2Bnd1wrs0zklYBrwZBrMTAHoVCrlYCHl4BZprAHEVCHs0Akw0BjXYBq4nBnE4Akl2wrsZzko5ArhnAkwTAHdVAHl4AkwYCGo4zkMXCroXAHAZzrs3zks5CrwZAHlhEnIVAHw1AHdXAnlTAHdVAHl4AkwYCGoZzkAXAHd3Cro3zrs0zkA3BrhZCHMhAj4nArs3BnhXBZXYAq44CHs5CHh3wsAZzkAXAHd3Cro3zrlVBns0BrA1CHshAj42AkEYCrwZAZX4zkI4BkE4CHM2wrAVAkw0CHInAnhTBZ42ArIXAHEYBGpAAG42CrhZAHw0AjX2zkM2BrA1CHA2wtPhHHMVBkAnBnh3BrITAHEVBrl1BHI0CqpABG42AroXBHw0CqXYBq40CHI1BHE4wsX1zkMXAro1AkE4zrsXzkA0AnoYCHEhEnIVBkoXArIZBrhTCG44Brd0AHo2Cqo1zkMYAHd4AkM5zrlVBrI0BrE4BklhBG42AnIZBrA0BjX5zks2BrsZAHM3wsA1zkI2Bnd5And0zrlVAkA0BHonCHdhBG40CrE5BrlYBGX5zkAYAkwYBkMYwrIVAnh2Bno3AHdTCG4nCHdZBks4CGprBG4ZCrh0BkIZzrlVBrhZAno3AHhhBq45BHlZCrMZAjX5zkd1AksXAHl4wrEVAnl5AHMXAnMTAHoVAko2BkI0BqpAAZ44CroXCHA0AZX5zkI1AHwZAkEZwsX1zkd3AHMXCrITCq4XBkE0ArA2AGpABj42AnA3Crd0BGX4zko2BrEXAnMYwsX2zkMnAnd4BnE1zrs0zkE5BHI1BrhhKjpBAHwVBHI5BHl2AjXYAG4ZBnl5BnlZwsAYAj41BHl1CHMZzrsZzkA5Bnw5CrEhAHwVAnd5CHd3BqXYAZ4ZAkdZAHo2wrsZzkoZArdnBrETAHAVBnM5BnEXCGprAHsVBkMYBrlYAZXYBq4nAHwZBnsZwrsYzksYAkA3ArlTAHEVBHhnBHAZAZoYAq4nBnAnBHM3zrs0zkI4AnInAkAhEnlVBkI3CronAkETAHEVBHhnBHAZAZo5zksYBHw4AHo5zrs0zkAXAnE3AnIhCq43BrI3BnA5BZXYAZ43BrAnBrd3wsA4zkA3Bkw2Bkh2zrsnzks4AnwZAHhhCq4YCHs1AHMXBZXYAj4nBkwYArdZwrhVAHlYBHs2ArdTAHsVAkd5CHd5AjprCq4YCHs1AHMXBZXYAq4YBrIXBkE1wrhVAndYAHA0CrlTCG4nArh1BHEhCq43AnonBnd5AjX4zkd3ArEZAkMhEnlVArh5BkwXCHITCq4ZAnwZCHsZAGo5zkMnBnw3BHo3zrdVCHMnAkw5BHEhAHoVAndnAnI2BZX3zkl2AnwZCHI0wsAYAG4XCHs4Brw4zrdVCHMnAkw5BHEhAHsVBkA1CrAYAjX4zkw0Brd1BrI1wrsZzkoXBHAnCrATCq44Ard4AHAXAGprAHwVAnd0CrE1BqX5zkA3Arh3AHE4wrsZzkI1CHI5BkwTAHoVAHl0CHs4BjoYAj41BHl1CHMZzrsYzkw3CHl3CHwhKjpBCG4ZAnh0Brd2BZXYAG4ZBnl5BnlZwsA5zkwnCrE0BnM3zrsZzks1BkhZBHIhCG4nAkh2AkA2BqXYAj43Crw5AkI0wrlVBHo4CHd4AnsTAHAVAHI4Akl3BZprCG42CrlnAnw5BZXYAZ41AnA2BZo5zkl3BnE1BkwZzrsnzkdZAHA1AnAhAHoVAndnAnI2BZXYAZ43AksnBHAnwsAYAq43BklZBHdZzrsnzkdZAHA1AnAhAHsVArI4CrE2BZXYAZ41Ano3And0wrsYzkw0AksnBqXYAZ4YBrl0CHl5wsAYAG40AkI0AksZzrsZzkd2Crw2AkEhAHsVBHs3ArMnBGXYAj4YBrIXCHIYwrsYzkIYBno2AnITAHsVAkd5CHd5AjprAHsVBHs3ArMnBGXYAq40AHd3CHI5wrsYzkEZBHEZAHwTCG43CHA4CHI0BZoYAG4ZBrwYAnETCG40ArhZBHlXCqprAHsVArI4CrE2BZX5zkoZAkMZAkM4wrsXzkd2CHw1BnwTCq44Akl4ArdnCqoYAq4nBnAnBHM3zrhVCrw5Cro3AnhhEnlVCHd3BrI2AkwTCq44Akl4ArdnCqo5zkM4CHAnAkl3zrlVArs4CHI2CHlhCG41Arh5BnhnAGX5zkA5Bnw2AHh5wsA5zkAZCrMZAnM0zrlVBnd1BHM2Cqo5zkwnCrE0BnM3zrsXzkEXAnsnAZo5zkwnCrE0BnM3zrsYzkw3CHl3CHwhKjdhaNmTcr0Ow2aNaNaNajd#Dq9XMLFPDkXWan48z3B2an4jzqx0fLpmwkPjd3aOwjXjdu9nbLFQc24jCjxkc250dN9TdZwTwN1idNeQcjw6wkohAqoXwrs1wjXjMGw6wksjzqxQM29Vd2BWcu9ZwkPjBKs1MHJiwjXjMK92aLwjCjwYwjXjcumVbZw6AGXjcumVb3JZcqw6wNtXbHQnaKJSzq0YAqwTwOBkMKYmwkPjAGwTwNmkc25nM29Tc3xWeNJZwkPjAnAnAnAnwjXjcumVb3pieLBmwkPXgGXjd2iidNJ0bLFTaGw6AqXjd2iidNJ0c3ojCjwXzkAjzqxnbutZaKmkc25nM2tTaGw6wkwVBGwTwOBPMLxmbKBWcOBkMKYmc3amdjw6wkAjzqxnbutZaHAjCjxOc29OcuIjzqxTc2djCkoTwOBmevFQcNenwkQ7wOBmevFQcNenBqw6AGXjd2J0eumVa3A0MKB0bK9VwkPjd3pmaKEjgGXjMKYmdOFnwkPYgE==',
        u2: '',
        u3: '',
        u4: '',
        u5: '',
        u6: '',
        u7: '',
        u8: '',
        u9: '',
        y: 'xx??x?=xx????=',
        p: '{partners}',
        isflash: -1,
        brand: "playerjs",
        brandurl: "//playerjs.com",
        motions: [],
        dt: true,
        pr: true,
        ga: false,
        ab: false,
        gatracked: [],
        pjsga: false,
        pltxt: '//.txt//',
        files_quality: [],
        files_audiotrack: [],
        files_quality_ag: [],
        files_subtitle: [],
        files_channel: [],
        plhistory: [],
        rightclick: 0,
        vastclick: false,
        focus: false,
        start: false,
        start2: false,
        metadata: false,
        ni: '<noindex>',
        ni2: '</noindex>',
        small: window.screen.width < 1000 && window.screen.height < 1000,
        moving: [],
        moved: [],
        piped: 0,
        subtitle_on: false,
        starttimeout: false,
        thumbs_on: false,
        thumbs_img: [],
        noads: false,
        clicks: 0,
        airplayed: false,
        timerInterval: undefined,
        toolbarInterval: undefined,
        toolbarhidden: false,
        BsryAFir: function (x) {
            var a;
            return a
        },
        reloaderTimer: 0,
        timerTime: 200,
        tagvideo: false,
        controlover: false,
        doctype: document.doctype,
        d: location.hostname,
        domain: location.hostname,
        href: location.href,
        https: location.href.indexOf("https") == 0,
        logos: {},
        gaurl: 'google-analytics.com/analytics.js',
        fd: ["BsryAFir", "ezhBHSZk"],
        files_speed: [],
        files_scale: [],
        files_sleep: [],
        custom_speed: 1,
        gifed: [],
        ezhBHSZk: function (x) {
            var a;
            return a
        },
        time: 0,
        timeld: 0,
        casting: false,
        dk: -1,
        current_speed: 3,
        current_sleep: 0,
        vastgo: 0,
        reloadTimer: 0,
        mediascale: {
            x: 1,
            y: 1,
            x0: 1,
            y0: 1
        },
        sub_options: ["sub_sizeproc", "sub_color", "sub_color2", "sub_bgcolor", "sub_bga", "sub_shadow", "sub_weight", "sub_bottom", "sub_shift", "sub_reset"],
        vast_impressions: 0,
        vast_impressions_all: 0,
        vast_starts: 0,
        vast_longtimeout: 0,
        midrollimprsd: [],
        vsts: ['preroll', 'pauseroll', 'postroll', 'midroll'],
        vast_remove: [],
        adsfirst: true,
        overlays: [],
        stuck: 0,
        ws: "w" + "s",
        acted: false,
        quartile: [false, false, false]
    };
    var default_style = {
        but: {
            w: 20,
            h: 20,
            action: "-",
            action_back: "-",
            a: 1,
            aover: -1,
            color: "ffffff",
            type: "",
            scale: 1,
            scaleover: -1,
            rotation: 0,
            tip: 1,
            icon: "",
            text: "",
            font: "Verdana",
            fontsize: 12,
            letterspacing: 0,
            position: "controls",
            margin: "0 3 0 3",
            marginproc: "0 0 0 0",
            click: 1,
            clickmargin: "0 0 0 0",
            normalonclick: 0,
            hand: 1,
            bg: 0,
            bgo: 0,
            bgstretch: 0,
            bga: 1,
            bgaover: -1,
            bgcolor: "000000",
            bgcolorover: -1,
            bgpadding: "0 0 0 0",
            bgborder: -1,
            bgbordercolor: "ffffff",
            iconscolor: -1,
            iconscolorover: -1,
            animation: "none",
            target: "_blank",
            tip: 0,
            tipbgcolor: "000000",
            tipbga: 0.7,
            tipbgrounding: 0,
            tipcolor: "ffffff",
            tippadding: "3 5 3 5",
            tippmargin: "0 0 0 0",
            tipa: 1,
            tipfont: "sans-serif",
            tipfontsize: 11,
            tipletterspacing: 0,
            tiptext: "",
            linetipmarginbottom: 5,
            toptip: 0,
            hidden: 0,
            stripsw: 2,
            stripsspace: 2,
            linespeed1: 0.2,
            linespeed2: 0,
            linespeed3: 0.1,
            pointed: 0,
            pointcolor: "ffce00",
            pointa: 1,
            pointw: 5,
            gradientcolorbg: "000000",
            gradientcolorload: "ffffff",
            gradientcolor: "ffffff",
            ontop: 1,
            clickscalex: 1,
            clickscaley: 1,
            rounding: 0,
            handle: 0,
            handle_width: 20,
            handleicon: "<svg width='20' height='20'><g><ellipse ry='5' rx='5' cy='10' cx='10' fill='#fff'/></g></svg>",
            handlea: 1,
            handleaover: -1,
            handlehide: 0,
            handlescale: 1,
            handlecolor: -1,
            slidespeed: 0.1,
            link: 0,
            linkurl: "",
            linkpause: 0,
            linktarget: "_blank",
            src: "",
            hideonwidthlimit: 700,
            hideoverwidthlimit: 700,
            displayvolume: 0,
            value: 0,
            valuecolor: "ffffff",
            valuebg: 0,
            valuebgcolor: "000000",
            valuesize: 9,
            valuemargin: "0 0 10 0",
            valuepadding: "0 0 0 0",
            valuerounding: 0
        }
    };

    function prtObj() {
        return true;
        o.prted = true
    }

    function fd0(s) {
        if (s.indexOf('.') == -1) {
            s = s.substr(1);
            s2 = '';
            for (i = 0; i < s.length; i += 3) {
                s2 += '%u0' + s.slice(i, i + 3)
            }
            s = unescape(s2)
        }
        return s
    };

    function optStr() {
        if (o.u != '') {
            v = UpdateObject(v, JSON.parse(decode(o.u)))
        }
        if (options.indexOf("#" + v.enc2) == 0) {
            try {
                options = JSON.parse(o[o.fd[0]](options))
            } catch (e) { }
        } else {
            if (options.indexOf("#" + v.enc3) == 0) {
                try {
                    options = JSON.parse(o[o.fd[1]](options))
                } catch (e) { }
            }
        }
    }

    function SettingsTimers(x) { }

    function Touch(y, event) { }
    var Alert = function () {
        var xbg = createElement("div");
        o.frame.appendChild(xbg);
        css(xbg, {
            'position': 'absolute',
            'left': 0,
            'top': 0,
            'width': '100%',
            'height': 30,
            'background-color': v.alertsbgcolor,
            'opacity': v.alertsbga,
            'display': 'none'
        });
        var x = createElement("div");
        o.frame.appendChild(x);
        css(x, {
            'position': 'absolute',
            'left': 0,
            'top': 0,
            'width': '100%',
            'color': v.alertscolor,
            'font-size': v.alertsfontsize,
            'padding': (v.alertspaddingv + 'px ' + v.alertspaddingh + 'px'),
            'display': 'none'
        });
        this.txt = function (text, n) {
            x.innerHTML = text;
            show2(x);
            css(xbg, {
                'height': x.offsetHeight,
                'display': 'block'
            });
            xbg.style.zIndex = "1005";
            for (var i = 0; i < x.getElementsByTagName('a').length; i++) {
                x.getElementsByTagName('a')[i].style.color = '#fff'
            }
            if (n) {
                setTimeout(this.close, 1000 * n)
            }
            x.style.zIndex = "1006"
        };
        this.close = function () {
            hide2(x);
            hide2(xbg)
        }
    };
    eval(function (w, i, s, e) {
        var lIll = 0;
        var ll1I = 0;
        var Il1l = 0;
        var ll1l = [];
        var l1lI = [];
        while (true) {
            if (lIll < 5) l1lI.push(w.charAt(lIll));
            else if (lIll < w.length) ll1l.push(w.charAt(lIll));
            lIll++;
            if (ll1I < 5) l1lI.push(i.charAt(ll1I));
            else if (ll1I < i.length) ll1l.push(i.charAt(ll1I));
            ll1I++;
            if (Il1l < 5) l1lI.push(s.charAt(Il1l));
            else if (Il1l < s.length) ll1l.push(s.charAt(Il1l));
            Il1l++;
            if (w.length + i.length + s.length + e.length == ll1l.length + l1lI.length + e.length) break
        }
        var lI1l = ll1l.join('');
        var I1lI = l1lI.join('');
        ll1I = 0;
        var l1ll = [];
        for (lIll = 0; lIll < ll1l.length; lIll += 2) {
            var ll11 = -1;
            if (I1lI.charCodeAt(ll1I) % 2) ll11 = 1;
            l1ll.push(String.fromCharCode(parseInt(lI1l.substr(lIll, 2), 36) - ll11));
            ll1I++;
            if (ll1I >= l1lI.length) ll1I = 0
        }
        return l1ll.join('')
    }('b4ab91s212829333718243q012z1o25212q193x3c1d3q0z112k3q01202m3v2u37242v302p11203a231s27332114212x23211a2u291z1138251s25352z1632261y1z12161z153v2b2q1721241u3u2t212n113w242e133x2b2o193z2611101o232e1i2c2b36182x3s121z1o380w121z3b233v213938182v3u10111o2c182t3b233v2b213x3b213x29233x1z113s2911202u271u3u271r2o1i27202q3c1z23121b3v111120243316312o1b3v111k1t352z1d322n2e1z3w2o2z1q1e27311o1o23111s253t172126142e1c2e3b361c3w2b341v3w2s3q3u3722393r3720291716311411101o252c1q1z113w242e1b373a3v111x23141g1d1j1a3f1i1g1h1f1j3c181c1v3e1a1g193f143e1m3e1m1e1u1g101f172c1t2c122e1s2e1x2e1t2d1u2c1u1e132e1r2g1y2c1u2c172e1r3g1s2e1u2c1k2c1w1e1x2e1s1e1x2c1s2d1y2e1r2e1r2e1s2d172c1v2e1s2e1q2e1e2c1u2e1v2e1s2f1p2e1s3e1x2c1u2g122e1s2g1y2c1t2e112e1q1e1q2e1s2e1v2c1v2e1t2e1r2e1v2c1s3d1y2e1s2e1o2e1s3e1h2c1u2f172e1q3f102c1s2d1a2e1q3f1f2e1s1d172c1u3g1y2e1q3f172c1u3d1w2e1q3f172e1s3d1t2c1u2f152e1s3f1v2c1s3d1b2e1r3e1a2e1s3d182c1w3f1w2e1q3f192c1u3d1a2e1q1f172e1u3d1e2c1u3f152e1q3g1r2c1s2d1b2e1q3f1a2e1s3d192c1u3g1u2e1q1f172c1s3d1b2e1q3f152e1s3d1b2c1u2e1s2e1q1e1f1c1b1d1g3g1a1e1g1f1m3e1r3b1e3f1d3f1g2f123d1l2d1e2f1k1e193e1f3e1c3d1r1g1d1g1o3g1f1c1f1d1e3e1b1f141g1s1d1b1d1e3f1d3g1e3f1g2c1f1c1f3e1d1g1k3e1f1c183d153g1f2e191f1k1e1d3c1i3g1h3g1h3g1j1e143d1g3f1k1g1k1g1i1e1b2c1e1g1f3d1b2f1c1c1s2e1e3f1d3f103e1f3d1f3c1r3f1j3e1b3g181e1d3c143e191f171f1f1d1d1d1l1g1d2e1j2e1f1c1f1c1f3f1d1e161d1f1e1h1c1v2e1r1e1h2e1u1e1k2c1u3e1t2e1r1g1x2c1t1c1y2e1s2f162e1t2e152c1u3e1q2e1r1e1u2c1u1c122e1r2e1f2e1s2e1t2c1u3g1q2e1r1e102c1u3c1z2e123e1r3f101c192f2r163e1f2d183g1p3e183e1w3e1a1e1i3e1h1e1j1e1j2c181b1g3f122e1s2g1v2c1u2d1r2e1q3g1v2e1u2e142c1u2g1w2e1r2g112c1s1c1s2e1q2g1t2e1v2c1v2c1t2e1t2e1q3f1y2c1u3c1q2e1q3g1f2e1u2c1z2c1s2e1c2e1q1e1k2c1s3c1z2e1s2e1t2e1w1d1r2c1t1e1e2e1q1f1z2c1t2c1m2e1s1g1t2e1v2c152c1u2e1w2e1q3e1g2c1u2c1r2e1q1f142e1w3c1g2c1s3f172e1s3g182c1s3d172e1q3f1c2e1u1d192c1s3f1t2e1q3f1b2c1s3c182e1q3f172e1w3e1b2c1s3f162e1q3f1a2c1s3d192e1s3f1t2e1u3d182c1s3e1a2e1q3f1b2c1t3e1d2e1q3f172e1u3e1k2c1s1f152e1s3g1e2c1s3d192e1s3e1o2e1u1d172c1t3e1g2e1q3f192c1s3d1e2e1q3f152e1u2c1z2c1s1e1i1e163f1m1e1j1e1f3e1g1f1k3g1t3b1f3e1f1f193g1f3g153e1l1c1i1f1f1f1e3e1a1c1f1d161g1d1f1h3e1f1c1g3d141g1f3g173f1e3d1s1e1m3e1d1e1b3f1u2e1m1c1b3e1d3f1a1e1r1e1f1e1j3g1b1e1q1f1r1e1m1e1m1g1k1g1d3g1m3e181c181e122f1b3g1f1c1m3c1f1f1e1f121g1e2c1g3c1d3g1d3f1d3e1k3c121c161g1i1f1f2e1u1e1q3d1f3g163g1i1g171e1k1c1f1e1b3f1q3e1e3d1s2e1l3e1b1e1u2f162c1u2e1j2e1s2e1r2e1u2d1j2c1t1e1t2e1q1e1m2c1t3d102e1r2g1f2e1w2e1t2c1s2g1r2e1s1e1a2c1u2d1v2e1s2g1w2e1u1e102c1s2f1d2e1q1f172c1v2d1r3e1x141g2k1r1e1e1c1k2g141g1e3g1j1d1g3e141f1i1g1j1g1v2c1k2e1w2e1r1g1g2e1w1c1w2c1t3e1k2e1u2e182c1u2e1m2e1s1f192e1w2e1r2c1u2g1x2e1s2g102c1u3d102e1s2e1w2e1u1d1m2c1r2g1v2e1t3g1i2c1u2c1u2e1s1f1r2e1v2e1v2c1s3e1w2e1s2g1g2c1w1c1z2e1s3e1r2e1w2c162c1s2g1p2e1u1e1m2c1w3c1h2e1u2f1z2e1u3c112c1t1f1u2e1s1f192c1v3c162e1s1f182e1w3d1a2c1s1f172e1s3e1d2c1u3d172e1u3g1t2e1u1d1b2c1s3f1b2e1s3f192c1u3e162e1s1f192e1u3d1i2c1s3f172e1u3f162c1u3d192e1s3f1z2e1u3d1b2c1s3f1w2e1s3f1b2c1v3d1e2e1s3f172e1u3c1d2c1s3f182e1t3f1b2c1u1d172e1t3e192e1u3d192c1s3f192e1s2e1w2c1u2c1w1e1f1e123e181c1m3e1b1e141e121f161e1u3c1b1e1q1e183e1e1c1i3e141f1h3g191f1e3d1u1e1m3e1d1e1c3f1u2d1r1c1b3e1d3f1c1e1r1e1e2e1c3g1c1e1s1f1e3c1f2d161g1s1f1b1f1l3d1e1e1g3f1g2e1c1e1s3d1e3d1j3f183f142e1c1c1e3d1f3f183g1c1f1r3c141d141e1e1e1d3f1u3d1k1e1f1f1p1g1d1e163c1u3d1m3e181e1t1e1e3e1i1e1i3f171g1e1e1q1c1e1c1f2e1s1f1c3f1r1e1e3c1k1f1p3e121f1v2c122c1s3e1w2e1t1g1u2c1w1d152e1s3g1f1f1y1c1l2c1u2g1w2e1u2e1w2c1u2c1f2e1s2e1j1e1y2e122c1s2g1h2e1t2e192c1w1e1q2e1s1e1z1e1y2c1z3c143e171e121j2h1i1q1p1i1f1s2e1k141o', '81f15m3o1v3q241a271u393x2z1b3q0z121m25212o1b3v3c1k193x1z1i1c2z193s3w112z161z133x392q1730361s3u2t303p1z3w243c153v3b2o173224113z1m252c1i3c29381w2x3s1z121m380w1z1229233v3z3b361y2v3s11101o3c162v2z3p1z303a231s25333e14212v233e163u271z1138251q25352c162z361y1a3u271w3u27183s271u2s291o3c113u281z1z3w26113u243u2m3q0z1z31293y121m272c2q1z1x231211101m272c3q2m35322o113z3z3b213x3036163o011c1c2v2c2b2o122u1z121d3z1q1z313823373u273u253t1338211z1138391z3z161h111c1m3e162v3z2p3e29233v3z2q1g29313c3b3w141m121f1c1f1d1c1e1f1e122d1k1c1c2e1k1e183g181e151e1k1c1i1f1d2e1s1d1r2c1t2e1r2e1q2e1w2c1s2e1e2c1s1e1x2e1s3c1r2c1u2c122e1q2g1p2c1u1c1k2c1s3e1f2e1u2d1z2c1s3c1x2e1r1f1u2c1s1d1u2c1q2e1s2e1t3e1v2c1u2c1t2e1s2g192c1u1d1y2c1r2g1o2e1s2d1y2c1t2e1j2e1r1e1u2c1t2c1s2c1q3e1w2e1s3c192c1u2e1y2e1q3e172c1t3e1t2c1q2f152e1s3d1x2c1s3d152e1q3f1b2c1s2d192c1q3f182e1s1d192c1t3e142e1q3f182c1s3d1v2c1q2f152e1t3d1c2c1s3d162e1q3f142c1s3d192c1s3f182e1s3d182c1s3d1f2e1q3f192c1s3d1d2c1q3f152e1s3d1t2c1s2d172e1q3f162c1s3d172c1r3e1g2e1s2d172c1s3d172e1q3f172c1u2c1u2c1q2e1c1e1f1c1m1e1c1c1i2f1b3e1b2c141c121d123f1q3f1c1e1u1d1w2d1h2f163f121b1f3e1e3d1k1e193e1c3d1j3d133d1j1e1g1f1h3d1g2c181c1d2f141g1s1d1j3c1f1c1e3g121f1h3e193d1f3d1q1g1k3e1c1c1f3d1f3d1d3f1d3f1c3d1f1d1b2d1c3f1c3f1b1e1s3c1f1c121g1q1g1f3d1r3b1f3d1d1e1d3e181c1f2e1b2c1a1g193f1g2c1f2c1f1e1i1e1b3e1g1d1g2c1j1d1r2e1q1f1j3c1d3d181c1b3g1g3f1f1c1g3c1t2e1j2e1s2e1k2c1s1e152c1r3g1i2e1u1c1f3c1u2e1p2e1s2e1s2c1t2e152c1r2g1j2e1s2e1d1c1u2e1q2e1r1g1o2c1u2d152c1r1e1i2e1s2e1a1c1v2c132e162e1f321q2r3g173d1q1c191c133g103e121e1i3d171e1e2g1i1e1v3e1i3e152c1t3g1t2e1s2c1v2c1u2e192e1s1f1w2c1t2e1q2c1s2f1w2e1r2e1l2c1t1c1u2e1r2e1q2c1s2c1y2c1s3e172e1s2e102c1s3c172e1r3g1x2c1s2c1w2c1u1e1j2e1r2c152c1s1c1o2e1q3g1d2c1u2c1e2c1s3g1e2e1s1d1x2c1t2e1j2e1s2g1r2c1u3e1z2c1s2e1a2e1s1c1x2c1u2c1h2e1q1f162c1u3d1a2c1s3f172e1q3d1a2c1s3d192e1s3f1j2c1s3d192c1t3e1b2e1q1d182c1u3e152e1q3f152c1t3d1d2c1s3f162e1s3e102c1s3d182e1q3f172c1s3d182c1s3e152e1q3d172c1s3c1d2e1q3f152c1s3d1l2c1s3f172e1s3e1f2c1s3d172e1q3f1h2c1s2d182c1u3f1c2e1q3d172c1s3d1b2e1q2e1x2c1s2c1k1c1h3e1d1f1c1c1h3b1f3d1c3e192e123c103b1d3e181f171g1d1e1g3d1g3c1c3f1d2g1i3c1l1c1i1d1h1g1a3e1f3c1b2d1k3d183f1d3e181e1g3d141e1h3e101g1u2d1j1d181c121d1b3g1c3e1m1c1b3c1c3g1h3g1c3d1e3e1e3d1e3e1d3f1d1e1k3d1k3d1w1g122e1c1c1b1c1d1e1h3f1k3e1w3e1f2d132c1a3f122f1d3c1g1c1i3c1c1e1q2g1k1c1c2e1b3d143g1b1g1g1e1k1d1h3c121g123e181e1r1e1b3c1e1e1v3e1s1c1x2c1t3c1s2e1q1e1y2c1u1d1l2c1u2g1d2e1r1e152c1t2c1p2e1q1e1v2c1s1e1y2c1u1g1i2e1s2c1u2c1u1e1q2e1q3f1f2c1t2e1v2c1s1e1i2e1w2c1t2d193d1h141o1f1e1e1i3e1w1e1j1f1b1e1h1d1b1d1h1d1d1e1j1e1s1e1q3c1u3d1e2e1s2e1g2c1u3c112c1u1e1v2e1s1d1t2c1v1c1g2e1s1f1v2c1v2c1r2c1u1g1v2e1r2c172c1w3c1y2e1s3e1c2c1w2c1t2c1s1f162e1q2c1w2c1u2e1k2e1t3e1x2c1w2e102c1t2e1y2e1q3d1m2c1u3c182e1s3e1p2c1w2c1s2c1t1e1g2e1s3c162c1w2c1z2e1s2e192c1w2e1g2c1t3g1j2e1q3d1a2c1u3c1c2e1s1f172c1u3e1d2c1s3f182e1r3c1b2c1u3d172e1s3e1f2c1u2d1a2c1u3e1d2e1q1d1b2c1u3c1h2e1s3f162c1w3d1b2c1s3f192e1q3c112c1u2d192e1s3f1c2c1u1d1b2c1s3f1c2e1q1d192c1v3e1b2e1s2f162c1u3d1a2c1s2f172e1r3c1l2c1u3d182e1s3f172c1u3d192c1s3f1t2e1q2c1w2c1h1c1f3d143g1d2d1a2e1e2e1c1e1i1g1k3d102e1e3c1c1g1c1g1f1c1d2d1m1d183f1d3e181d1i3e161d1h3f121g1u2d1l3d1a1c121d1c1f1c3d1r1c1d3c1d3f1j3f111d1q1c1k1d1h3f1g2e161c1e2d181e1s1f1j3e161c1a1c1a1c181e1s1g1h1c1c1c1c1e123d1c1g1a1c1k2d1e3d1f3e121g123e1f3c1e1d1e3f1j1g1d2c1b2d161d1c1e1c3e1d2d1k3d1c1e1g1f1c1g1i1d1j2c1u3d1j3f152f1c3d162d1g2d1c1e1f3e1y2c1w1e122c1t2g1e2e1s3c1j2c1w3c102e1k3e1f2c1u3d1u2c1s1f1v2e1r1c1u2c1w1c1v2e1f2e1q2c1v3e1x2c1t2e1o2e1s1c1m2c1v3c1d2e1f3e1t3d1a3c173c1h192i1r1i1e1h2d2f2b2t1m2j16', 'a1fa52b35313y351y391e27322q1b3v3e1d3q021z1o27213q2m273e2q2o2w253a1g252z1i3e2b381a2x3u11311m380y113139233x213b361c2x3u112z1o21182v2z2p11223a231s27353e14212x253e1w3u29111138251s27352c1631281y10111611153v3b2q1921241u3u2v212n113w263e133x3b2q192z3612111o23113w28113u28113w281z3w2q213b213x3e2b233v2b233x272y3b3x2e111z2435163q00323e2b3y121o3e1d3q0z312m24112z1o2111112s2911211f393x3e1a1y10322x3w2u333e12111e1m11153x29211v322q14232722352e162835211f1e1a3e1631261y111211203u2911121m3u370131223516351m1d3f1l1g1m1d1f1e1q3f1h2g1q3f1h3e183g1k1g1g1e1h2f1g3c1s3f1k2e1r3e1z2e1w2e1y2e1t2e1w2e1s3f1m2c1s2e182e1q3e1r2e1w2c1q2e1t1e1e2e1u2e162c1u2e1z2e1q2e1b2e1w2e1e2e1t3g1h2e1s2e1w2c1s1g142e1s2g1r2e1u2c1z2e1u2e1e2e1u3e1v2c1u2g1w2e1r3e1t2e1w2e1g2e1t2e1v2e1u2f102c1u2e182e1q2g1x2e1w2e1b2e1s1f142e1u3g1x2c1s3f192e1q3f192e1u1d182e1s3f1x2e1s2f1b2c1s3e1i2e1q2f172e1w3d142e1s2f152e1t3f1q2c1s2f192e1s3f142e1u3d192e1u3e1a2e1s2f192c1u3f1d2e1q3f172e1v3d1f2e1s3f152e1s3g1d2c1s2f172e1r3f1z2e1u3d162e1u3g182e1s2f1a2c1u3g1v2e1q3f172e1u3d192e1s3f1s2e1s2e1w2c1f1e1h3f1e1g1g3g1w1d141g1s2g1b1e1i3f141d143f1g1e1e1e1s1g1s3e1f3e1j3e1d2f1b3f1l2d183f123e171f1f1g1i3d1g2e1f3f1q3g1k3e1q1c1i1f1h3f1a1e1h3e1d1d1k3f183f1d3e1a1f1i3e141f1h1e101e1a1e1c1c1a1e1a3f1k1g1s1f1d1d1b1f1m3f1d1f1g1g1f1d1m3e122e121g101e1e3d1f3f1k3f1r2g1s1e1f1d1a3g1s1e1q3e1g3f1g3e141f1i1g1q1f1g3e1w1d1h3f1c3e1d1g1k3e143e1f3f1g1g172f1s2e1w1e1u2e1t1e1d2e1s2g172c1t2e1h2e142g1v2e1w3c1q2e1t3g1r2e1s2e1v2c1t2e1y2e1d3f1q2e1u1c1f2e1t2e1t2e1u2e1l2c1t3f1w2e1d2f1y3e1y2c1s3e12141t223e161e1k3g1g2g1f3d142e1i3f1a1g1g1f1q1e1j1e123g1c1e1r3g142c1u2g1r2e1s2e1z2e1u2c1g2e1u3e1t2e1u2g1w2c1t3e1t2e1u2g1g2e1t2c1x2e1u2f1y2e1u2e182c1s2g1x2e1u2g1b2e1s1d162e1s2e1z2e1s1g1g2c1u1e1u2e1t2e1k2e1u2c162e1s2g1p2e1s1f192c1u2g1m2e1u1g1x2e1s2e1y2e1s3f102e1s2e1w2c1s1f1k2e1r2g1v2e1t3e1g2e1s1f192e1u3g182c1s3f192e1t3g162e1s3d172e1u3f1c2e1s2f172c1u3g1g2e1s3f192e1u3d1d2e1s3f182e1u3g1e2c1s3f172e1s3f172e1s2d172e1u3e1a2e1s3f182c1s3f1a2e1s3f182e1s3d1a2e1s1f172e1t3f1b2c1s3f192e1s3f152e1s2d172e1u3g1w2e1s1f172c1s3f1e2e1s3f172e1s3c1z2e1s2e1w2e1k1e123d1l1g1k1f143g121g141e1s2g1f3f143g103g1i1d1d3e1d1f161g1f1f1b1d1q3f1f3g1g3f1g3e1d1c1f1e1f1g1p3e1f1e183e131g1h2e1b1f1k3f1f1c1g2e1s1g1j3g1d3e1j3c1f2f1b3g1j1f181e122c192f1b1f1b1f1b1f1b3c181e1d3f183f153e1i1e1s3f1f1g1c3g1f1e1f3c1b1e191f1r1g1s3g123c1u1f143f1c3f171g1h1e1s2f1j2g1p1e1a3g181e1m3g1d1e1h3e1f1e1g2c1f1g1h2e1i1g1f3f1f2c103e1h2e1s1e102e1s2e1h2e1s1g1k2e1s2e1s2c1r1g1k2e1s3e1y2e1u1c1f2e1s2g1j2e1u2e1f2c1t3e1r2e1s2e1j2e1s2e152e1s3g1t2e1u3g1m2c1y3e1u2f1t2f102e191j1e2f1g3g1c1e1k3e1m1e1l1f1m1e1d3e1i1f1g1d1i2e1j1g1b2e172e1u1c1q2e1v2e152e1u1e1l2c1u3g1h2e1u1e1g2e1s3e1i2e1w2f1x2e1v2g1j2c1w3g1v2e1u3g112e1s2c1e2e1w1e1x2e1w2e1h2c1u1e1w2e1s2e1y2e1t2c122e1w2e1z2e1v2f1u2c1u1e172e1t2g102e1u2c172e1v3g1u2e1w2e1k2c1w1e112e1u1e1z2e1s2d1y2e1v3e1t2e1u2f172c1v3e112e1s3f1a2e1s3c1d2e1u3f192e1w3g1d2c1u3f1a2e1s3f1f2e1s2d192e1v3f1z2e1u1f172c1u3e1m2e1s3f192e1s3d182e1u1f192e1u3f152c1u3f1a2e1s3f1x2e1s2d1b2e1u3g1g2e1u2f192c1u3f1d2e1s3f192e1s3c1s2e1u1f192e1w3f1t2c1u3f1a2e1u3g102e1s3d192e1u3f192e1u3f172c1u2e1w2e1s2g1h1e123e1b3f1s1e1p3f1t3d1d3d1e3e1d2e1p3e102f1k3e1e1e1e1g1p3e1f1e183d151g1j2e1b1f1m1g1f1c1i2e1u2g1c3g1e1e1j3c1f2f1d1f1j3f1a1e122c1b1f1e1g1g3f1i2e1f3d1u1f1m1e1o1e1k1g1h1d1e2f1m3f1k1f1m3g1k3d1e3f1e1g1j3g1j3g141c1e2g1h3f1s3e1f1e1f1c1k2f141f143f1e2f1b1d1j3d1u2f1s1f1h3e1d2d161f1q1g1a1g1k3e1j1c1e2g1e1e1x3e142e191d1u2f1d1f1w1g1u2g1f3c162e1v3g1f2e1w2g1w2c1u2f1a2e1t3g112e1t1c122e1t1e172e1v2e1i2c1w2f1h2e1u1g1h2e1t1e1t2e1w3g182e1w1g1t2c1u3f1j2e1s2g1b2e1s2d182e112f153f113e141q1i1h1l2j2s1r1q2r1l1r161', 'c765b447783a64be25b22a0ebf1899d8'));
    var v = {
        log: 0,
        logout: 0,
        screencolor: "#000000",
        border: 0,
        bordersize: 1,
        bordercolor: "#000000",
        bgcolor: "#ffffff",
        rounding: 0,
        screenclick: 1,
        doubleclick: 1,
        player: 0,
        stopotherplayers: 1,
        iframe: 0,
        toolbar: {
            customimage: 0,
            color: "000000",
            a: "0.4",
            h: 34,
            stretchonfullscreen: 1,
            hide: 1,
            hidewithoutmoving: 1,
            hidejustfull: 0,
            hidetimeout: 3,
            hideleavetimeout: 0,
            leftandrightpadding: 3,
            animation: "none",
            position: "bottom",
            margin: "0 0 0 0",
            rounding: 0,
            clickarea: 0,
            image: ''
        },
        hotkey: {
            on: 1,
            f: 1,
            r: 1,
            m: 1,
            seek: 5,
            leftright: "seek",
            space: 1,
            updown: "volume",
            seeksides: 0,
            nums: 1,
            volumewheelfull: 1,
            wheelstep: 0.2
        },
        playlist: {
            bgcolor: "000000",
            bgcolorover: "333333",
            bga: 0.9,
            bgaover: -1,
            position: "left",
            margin: "0 0 0 0",
            padding: "7 15 7 15",
            color: "ffffff",
            font: "arial, helvetica, sans-serif",
            fontsize: 12,
            valuefontsize: 10,
            letterspacing: 0,
            valuecolor: "ffdd1f",
            borderbottom: 1,
            bordercolor: "444444",
            a: 1,
            aover: -1,
            posters: 0,
            posterheight: 100,
            posterwidth: 177,
            postertitleonhover: 1,
            historytitlea: 1,
            historycolor: "999999",
            historybgcolor: "000000",
            historybga: -1,
            historybgaover: -1,
            historytitlestrike: 0,
            activeiconsize: 3,
            headfontsize: 16,
            headbordercolor: "888888",
            rounding: 0,
            scrollarrows: 1,
            scrollarrowsize: 1,
            scrollarrowcolor: "ffffff",
            scrollarrowbg: 0,
            scrollarrowbgcolor: "000000",
            scrollarrowgradient: 1,
            scrollarrowbgover: 0,
            scrollarrowbgovercolor: "333333",
            limitwidth: 0,
            limitmaxwidth: 200,
            autoplaylist: 0,
            always: 0,
            alwaysjustpause: 0,
            alwaysnotfullscreen: 0,
            autohide: 1,
            floatleft: 0,
            floatheight: 50,
            floatmarginright: 0,
            floatlimitwidth: 1,
            floatwidth: 170,
            marginbg: 0,
            marginbgcolor: "333333",
            marginbgpadding: "0 0 0 0",
            hmaxk: 30,
            bordercolor: "666666"
        },
        settings: {
            bgcolor: "000000",
            bgcolorover: "222222",
            bga: 0.7,
            bgaover: -1,
            font: "arial, helvetica, sans-serif",
            position: "bottom-right",
            margin: "0 0 0 0",
            padding: "7 10 7 15",
            color: "ffffff",
            fontsize: 12,
            headfontsize: 16,
            valuefontsize: 10,
            letterspacing: 0,
            titlecolor: "ffffff",
            valuecolor: "ffdd1f",
            a: 1,
            scale: 5,
            aover: -1,
            activeicon: 1,
            activeiconsize: 3,
            scrollarrows: 1,
            scrollarrowsize: 1,
            scrollarrowcolor: "ffffff",
            limitwidth: 0,
            limitmaxwidth: 200,
            rounding: 0,
            settings1: 1,
            settings1action: "quality",
            settings2: 1,
            settings2action: "audiotrack",
            settings3: 1,
            settings3action: "subtitle",
            settings4: 0,
            settings4action: "download",
            settings5: 0,
            settings5action: "speed",
            hmaxk: 30,
            bordercolor: "666666"
        },
        logo: {
            position: "bottom-right",
            margin: "0 10 50 0"
        },
        volume: 0.8,
        volumestore: 1,
        mutestore: 1,
        loop: 0,
        shuffle: 0,
        finishrewind: 1,
        mute: 0,
        preload: 0,
        preloadhls: 0,
        preloaddash: 0,
        autoplay: 0,
        autoplaymute: 1,
        showtitleplaylist: 0,
        addtitleplaylistbr: 0,
        addtitleplaylist: 0,
        file_separator: ',',
        file2_separator: ';',
        file3_separator: '//',
        poster_scale: 'fill',
        poster_a: 1,
        poster_aover: -1,
        poster_float: 0,
        poster_floatmargin: '20 0 0 20',
        poster_floatposition: 'top-left',
        poster_floatwidth: 100,
        poster_floatheight: 100,
        poster_floatbgcolor: -1,
        posteronpause: 0,
        alerts: 1,
        alertsbgcolor: "ff0000",
        alertscolor: "ffffff",
        alertspaddingv: 5,
        alertspaddingh: 10,
        alertsbga: 1,
        alertsfontsize: 10,
        rightclick: 0,
        youtubeposter: 1,
        ytautoquality: 1,
        posterhide: 1,
        aspect: '16x9',
        landfullmobile: 0,
        hlschangequality: 'next',
        hlsautoquality: 1,
        hlsdebug: 0,
        hlscookies: 0,
        hlslowquality: 0,
        hlsquality: 1,
        hlsaudio: 1,
        livewakeuptime: 5,
        reload: 0,
        reloadlive: 1,
        livewakeup: 0,
        reloadtimeout: 5,
        dashdebug: 0,
        dashcookies: 0,
        dashlowquality: 0,
        dashquality: 1,
        dashaudio: 1,
        nameofhlsquality: 0,
        nameofyoutubequality: 0,
        nameofdashquality: 0,
        qualitystore: 1,
        eventstracker: 0,
        events: "PlayerjsEvents",
        errortimeout: 5000,
        container_h_procent: '100%',
        ga: 0,
        ga_event: {
            init: 1,
            error: 0,
            full: 0,
            end: 0,
            play: 1,
            play25: 0,
            play50: 0,
            play75: 0,
            vast_skip: 0,
            vast_click: 0,
            vast_impression: 0
        },
        yamtr_event: {
            init: 1,
            error: 0,
            full: 0,
            end: 0,
            play: 1,
            play25: 0,
            play50: 0,
            play75: 0
        },
        ga_proc: 100,
        playsinlineonmobile: 1,
        subtitle_start: 1,
        sub_size: 14,
        sub_sizeproc: '100%',
        sub_big_fullscreen: 1,
        sub_size_fullscreen: 20,
        sub_bg: 1,
        sub_bga: 0.7,
        sub_bgo: 2,
        sub_bgpadding: 3,
        sub_bottom: 10,
        sub_color: "ffffff",
        sub_color2: "ffeeab",
        sub_bgcolor: "000000",
        sub_shadow: 0,
        sub_weight: 400,
        sub_designstore: 1,
        sub_shift: 0,
        sub_store: 1,
        sub_off: 1,
        sharetitle: 1,
        sharetop: 0.3,
        shareiconscale: 3,
        shareiconscaleover: 4,
        shareiconmargin: 5,
        embedsize: 0,
        embedwidth: 560,
        embedheight: 315,
        fullonplay: 0,
        fullonplaymobile: 1,
        fullblack: 1,
        nativefullios: 1,
        hidestartbutios: 1,
        thumbs: 0,
        thumb_width: 160,
        thumb_height: 90,
        thumb_border: 0,
        thumb_borderwidth: 1,
        thumb_bordercolor: "333333",
        thumb_radius: 0,
        thumb_shadow: 1,
        enc2: '2',
        enc3: '3',
        vast_timeout: 10,
        vast_pauseonclick: 1,
        vast_closeonclick: 1,
        vast_volume: -1,
        vast_title: 1,
        vast_preroll_limit: 1,
        vast_preroll_andlimit: -1,
        vast_prerolltimebreak: 0,
        vast_prerolltbimp: 1,
        vast_preroll_counter: 0,
        vast_pauseroll_limit: 1,
        vast_pauserolltimebreak: 0,
        vast_pauserolltbimp: 1,
        vast_pauseroll_counter: 0,
        vast_postroll_limit: 1,
        vast_postrolltimebreak: 0,
        vast_postrolltbimp: 1,
        vast_postroll_counter: 0,
        vast_playroll_limit: 1,
        vast_playroll_counter: 0,
        vast_midroll_limit: 1,
        vast_midroll_counter: 0,
        vast_midrolltimebreak: 0,
        vast_midrolltbimp: 1,
        vast_introtimebreak: 0,
        vast_introtbimp: 1,
        vast_linktxtbgcolor: "#ffffff",
        vast_linktxtcolor: "#000000",
        vast_skipbgcolor: "#000000",
        vast_skipcolor: "#ffffff",
        vast_titlebgcolor: "#000000",
        vast_titlecolor: "#ffffff",
        vast_xbgcolor: "#000000",
        vast_xcolor: "#ffffff",
        vast_progressbgcolor: "#000000",
        vast_progresscolor: "#ffffff",
        vast_volumebgcolor: "#000000",
        vast_volumecolor: "#ffffff",
        vast_linktxtonmobile: 1,
        vast_unmutehover: 0,
        vast_unmutebutonce: 1,
        vast_default_volume: 0.5,
        vast_unmutebutbgcolor: "#ffffff",
        vast_unmutebutcolor: "#000000",
        vast_openclick: 1,
        vast_preroll_vmap: 1,
        vast_pauseroll_vmap: 1,
        vast_postroll_vmap: 1,
        vast_midroll_vmap: 1,
        vpaid_timeout: 10,
        vpaid_timeout2: -1,
        vast_resound: 1,
        vpaid_slotinframe: 1,
        eventstrackervast: 0,
        pauserollonplay: 0,
        partnerprerollor: "or",
        partnerpauserollor: "or",
        partnerpostrollor: "or",
        partnermidrollor: "or",
        midrollpoint: "50%",
        introskiptime: -1,
        introclickable: 0,
        introclosetime: -1,
        introtitle: 0,
        introtxt: 0,
        rc_version: 1,
        rc_anyway: 0,
        heartbeatinterval: 30,
        default_channel: 2,
        tagsinterval: 10,
        playedquartile: 0,
        minivis: 30,
        lsfullstart: 1,
        lsfullplay: 1,
        captions: 0,
        pip: {
            on: 0,
            bgcolor: "000000",
            border: 0,
            shadow: 2,
            bordercolor: "000000",
            position: "left",
            margin: "20 0 0 20",
            width: 150,
            hide: 0
        }
    };
    v.lang = "en";
    var Settings = function (is) {
        var i;
        var style = [];
        var f = [];
        var fbg = [];
        var fimg = [];
        var ftitle = [];
        var fvalue = [];
        var faction = [];
        var f2 = [];
        var f2bg = [];
        var f2img = [];
        var f2title = [];
        var f2value = [];
        var f2action = [];
        var stout = [];
        var is_visible = false;
        var open_action;
        var open_settings = -1;
        var empty = true;
        var key = is;
        var playlist;
        var shuffle = [];
        var shuffle_ = [];
        var plid = '';
        var plfolder = '';
        var plx = -1;
        var sub_settings_on = false;
        var sub_settings = false;
        var autonextopenfolder = false;
        var autoprevopenfolder = false;
        var justshow = false;
        var removed = false;
        var showinterval;
        var arrinterval;
        var wheelinterval;
        var hidetimeout;
        var settimer;
        var scale_i = -1;
        var _cstm = 0;
        var evntclk = "click";
        var evntovr = (o.system.mobile ? "touchstart" : "mouseover");
        var evntout = (o.system.mobile ? "touchend" : "mouseout");
        style = UpdateObject(style, v[is]);
        style = MarginPadding(v[is], 'margin', 'margin');
        if (style.marginbg == 0) {
            style.marginbgpadding = "0 0 0 0"
        }
        style = MarginPadding(v[is], 'bgpadding', 'marginbgpadding');
        style = MarginPadding(v[is], 'padding', 'padding');
        style.scrollwidth = 0;
        var _activeIcon = "<svg style='margin-top:3px' width='" + style.activeiconsize * 2 + "' height='" + (style.activeiconsize * 2 > style.valuefontsize ? (style.activeiconsize * 2) : style.valuefontsize) + "' xmlns:xlink='http://www.w3.org/1999/xlink' xmlns='http://www.w3.org/2000/svg'><g><ellipse ry='" + (style.activeiconsize) + "' rx='" + style.activeiconsize + "' cy='" + (style.activeiconsize * 2 > style.valuefontsize ? (style.activeiconsize) : (style.valuefontsize / 2)) + "' cx='" + style.activeiconsize + "' fill='#" + style.valuecolor + "'/></g></svg>";
        var _xIcon = "<svg width='" + style.activeiconsize * 2 + "' height='" + style.valuefontsize + "' xmlns:xlink='http://www.w3.org/1999/xlink' xmlns='http://www.w3.org/2000/svg' ><g><ellipse ry='" + (style.activeiconsize - 1) + "' rx='" + (style.activeiconsize - 1) + "' cy='" + (style.valuefontsize / 2 + 2) + "' cx='" + style.activeiconsize + "' stroke='#" + style.valuecolor + "' stroke='1' fill-opacity='0'/></g></svg>";
        var xx = 4;
        var _nextIcon = "<svg width='" + (xx + 2) + "' height='" + (style.valuefontsize) + "' xmlns:xlink='http://www.w3.org/1999/xlink' xmlns='http://www.w3.org/2000/svg'><g><line x1='1' y1='" + (style.valuefontsize / 2 - xx) + "' x2='" + xx + "' y2='" + (style.valuefontsize / 2) + "' stroke='#" + style.color + "' stroke-width='1' stroke-linecap='round'/><line x1='" + xx + "' y1='" + (style.valuefontsize / 2) + "' x2='1' y2='" + (style.valuefontsize / 2 + xx) + "' stroke='#" + style.color + "' stroke-width='1' stroke-linecap='round'/></g></svg>";
        var _prevIcon = "<svg width='" + (xx + 10) + "' height='" + (style.valuefontsize + 2) + "' xmlns:xlink='http://www.w3.org/1999/xlink' xmlns='http://www.w3.org/2000/svg' style='float:left'><g><line x1='1' y1='" + (style.valuefontsize / 2 + 2) + "' x2='" + xx + "' y2='" + (style.valuefontsize / 2 - xx + 2) + "' stroke='#" + style.color + "' stroke-width='1' stroke-linecap='round' /><line x1='1' y1='" + (style.valuefontsize / 2 + 2) + "' x2='" + xx + "' y2='" + (style.valuefontsize / 2 + xx + 2) + "' stroke='#" + style.color + "' stroke-width='1' stroke-linecap='round'/></g></svg>";
        var container = createElement("div");
        o.frame.appendChild(container);
        css(container, {
            'overflow': 'hidden',
            'display': 'block',
            'opacity': 0,
            'border-radius': style.rounding
        });
        if (is == "settings") {
            container.style.zIndex = 100
        } else {
            container.style.zIndex = 99
        }
        var control = createElement("div");
        if (o.small) {
            style.smallfontsize > 0 ? style.fontsize = style.smallfontsize : '';
            style.floatwidthsmall > 0 ? style.floatwidth = style.floatwidthsmall : '';
            style.floatheightsmall > 0 ? style.floatheight = style.floatheightsmall : ''
        }
        css(control, {
            'position': 'relative',
            'top': 0,
            'left': 0,
            'display': 'block',
            'width': '100%',
            'padding-top': style.bgpaddingtop,
            'padding-right': style.bgpaddingright + 20,
            'padding-bottom': style.bgpaddingbottom,
            'padding-left': style.bgpaddingleft,
            'color': style.color,
            'font-size': style.fontsize,
            'font-family': style.font,
            'letter-spacing': style.letterspacing + 'px'
        });
        if (o.system.safari) {
            css(control, {
                'min-width': 220
            })
        }
        if (is !== "playlist") {
            css(control, {
                'overflow-y': 'scroll'
            })
        }
        container.appendChild(control);
        if (style.floatleft != 1) {
            var control2 = createElement("div");
            css(control2, {
                'display': 'block',
                'overflow': 'hidden',
                'border-radius': style.rounding
            });
            if (style.floatleft != 1) {
                if (o.system.safari) {
                    css(control2, {
                        'min-width': 220
                    })
                }
            }
            control.appendChild(control2)
        }
        if (is == "playlist") {
            attr(control, {
                id: (v.id + "_" + is)
            });
            if (style.floatleft == 1) {
                css(control, {
                    'width': '100%',
                    'padding-right': style.bgpaddingright,
                    'padding-bottom': style.bgpaddingbottom + 20,
                    'overflow-x': 'scroll',
                    'white-space': 'nowrap'
                });
                css(container, {
                    'width': o.screen_w - style.marginright - style.marginleft,
                    'height': style.floatheight + style.bgpaddingtop + style.bgpaddingbottom
                })
            } else {
                css(control, {
                    'overflow-y': 'scroll'
                });
                if (style.width100 == 1) {
                    ResizePlaylist()
                }
            }
            if (style.marginbg == 1) {
                css(container, {
                    'background-color': style.marginbgcolor
                })
            }
            if (v.playlist.droplist == 1) {
                hide2(container)
            }
        }
        if (style.scrollarrows == 1) {
            var arr_up = createElement("div");
            var scrollbgcolor = hexToRgb(style.marginbg == 1 ? style.marginbgcolor : style.bgcolor);
            if (style.floatleft == 1) {
                StyleArrow(arr_up, 'to right, rgba(' + scrollbgcolor + ',' + (style.bga * 1 + 0.3) + '), rgba(' + scrollbgcolor + ',0)', 'left', 12, 5, 7, 10, 7, 10, 12, 15);
                arr_up.addEventListener(evntclk, ScrollLeft)
            } else {
                StyleArrow(arr_up, 'to bottom, rgba(' + scrollbgcolor + ',' + (style.bga * 1 + 0.3) + '), rgba(' + scrollbgcolor + ',0)', 'top', 5, 12, 10, 7, 10, 7, 15, 12);
                arr_up.addEventListener(evntclk, ScrollUp)
            }
            var arr_down = createElement("div");
            if (style.floatleft == 1) {
                StyleArrow(arr_down, 'to left, rgba(' + scrollbgcolor + ',' + (style.bga * 1 + 0.3) + '), rgba(' + scrollbgcolor + ',0)', 'right', 8, 5, 13, 10, 13, 10, 8, 15);
                arr_down.addEventListener(evntclk, ScrollRight)
            } else {
                StyleArrow(arr_down, 'to bottom, rgba(' + scrollbgcolor + ',0), rgba(' + scrollbgcolor + ',' + (style.bga * 1 + 0.3) + ')', 'bottom', 5, 8, 10, 13, 10, 13, 15, 8);
                arr_down.addEventListener(evntclk, ScrollDown)
            }
            arr_up.addEventListener("mouseover", ScrollOverOut);
            arr_up.addEventListener("mouseout", ScrollOverOut);
            arr_down.addEventListener("mouseover", ScrollOverOut);
            arr_down.addEventListener("mouseout", ScrollOverOut);
            control.addEventListener("wheel", Wheel);
            arr_up.addEventListener("mouseup", onMouseUp);
            arr_down.addEventListener("mouseup", onMouseUp);
            container.appendChild(arr_up);
            container.appendChild(arr_down);
            clearInterval(arrinterval);
            arrinterval = setInterval(ArrowsInterval, 1000)
        }
        control.addEventListener(evntovr, ControlOver);
        control.addEventListener(evntout, ControlOut);
        if (is == "settings") {
            for (var i = 1; i < 11; i++) {
                if (exist(v["control_" + is][is + i])) {
                    v.settings[is + i] = v["control_" + is][is + i];
                    if (exist(v["control_" + is][is + i + "title"])) {
                        v.settings[is + i + "title"] = v["control_" + is][is + i + "title"]
                    }
                    if (exist(v["control_" + is][is + i + "action"])) {
                        v.settings[is + i + "action"] = v["control_" + is][is + i + "action"]
                    }
                }
                if (exist(v.settings[is + i])) {
                    if (v.settings[is + i] == 1) {
                        CreateItem('f', i);
                        StyleItem(f[i], fbg[i], ftitle[i], fvalue[i]);
                        ftitle[i].innerHTML = Lang(v.settings[is + i + "action"]);
                        if (exist(v.settings[is + i + "title"])) {
                            if (v.settings[is + i + "title"] != '') {
                                ftitle[i].innerHTML = v.settings[is + i + "title"]
                            }
                        }
                        if (exist(v.settings[is + i + "action"])) {
                            faction[i] = v.settings[is + i + "action"];
                            Value(i);
                            if (faction[i] == 'scale') {
                                scale_i = i
                            }
                        }
                        f[i].addEventListener(evntovr, onOver);
                        f[i].addEventListener(evntout, onOut);
                        f[i].addEventListener(evntclk, onClick);
                        f[i].addEventListener("mouseup", onMouseUp);
                        if (v.settings[is + i + "hide"] == 1) {
                            css(f[i], {
                                "height": 0
                            })
                        }
                    }
                }
            }
        }

        function Wheel(x) {
            if (is == "playlist" && style.floatleft == 1 && x) {
                if (x.deltaX == 0 && x.deltaY != 0) {
                    control.scrollLeft -= x.deltaY;
                    x.preventDefault()
                }
            }
            clearInterval(wheelinterval);
            wheelinterval = setInterval(ControlOut, 3000);
            Retimer()
        }

        function ControlOver() {
            o.mouseDown = true
        }

        function ControlOut() {
            if (style.showovercontrol == 1) {
                clearTimeout(o.settingsovertimer);
                o.settingsovertimer = setTimeout(function () {
                    if (!o.mouseDown) {
                        HideControl()
                    }
                }, (v.settings.showoverto > 0 ? v.settings.showoverto * 1000 : (o.system.tv ? 2000 : 1000)))
            }
            o.mouseDown = false
        }

        function onOver(event) {
            if (o.fullscreen) {
                o.volumewheel ? o.actions.volumewheel(false) : ''
            }
            var i = event.target.getAttribute('fid');
            var x;
            if (i) {
                x = 'f'
            } else {
                if (event.target.getAttribute('f2id')) {
                    i = event.target.getAttribute('f2id');
                    x = 'f2'
                }
            }
            if (i) {
                i = parseInt(i);
                var opn = false;
                if (exist(eval(x)[i])) {
                    if (style.bgaover > -1) {
                        css(eval(x + 'bg')[i], {
                            'opacity': style.bgaover
                        })
                    }
                    if (style.aover > -1) {
                        css(eval(x + 'title')[i], {
                            'opacity': style.aover
                        });
                        css(eval(x + 'value')[i], {
                            'opacity': style.aover
                        })
                    }
                    if (is == "playlist") {
                        if (faction[i].indexOf("playlist") == 0) {
                            var id = faction[i].substr(8);
                            if (plid == id || plfolder == id) {
                                css(eval(x + 'title')[i], {
                                    'color': style.valuecolor
                                });
                                css(eval(x + 'value')[i], {
                                    'color': style.valuecolor
                                });
                                opn = true
                            } else {
                                css(eval(x + 'title')[i], {
                                    'color': style.color
                                })
                            }
                        }
                    }
                    if (style.playbgcolored == 1 && exist(style.playbgcolor) && opn) { } else {
                        css(eval(x + 'bg')[i], {
                            'backgroundColor': style.bgcolorover
                        })
                    }
                }
            }
        };

        function onOut(event) {
            if (o.fullscreen) {
                o.volumewheel ? o.actions.volumewheel(true) : ''
            }
            var i = event.target.getAttribute('fid');
            var x;
            var opn = false;
            Retimer();
            if (i) {
                x = 'f'
            } else {
                if (event.target.getAttribute('f2id')) {
                    i = event.target.getAttribute('f2id');
                    x = 'f2'
                }
            }
            if (i) {
                if (exist(eval(x)[i])) {
                    if (style.bgaover > -1) {
                        css(eval(x + 'bg')[i], {
                            'opacity': style.bga,
                            "transition": "opacity 0.1s linear"
                        })
                    }
                    if (style.aover > -1) {
                        css(eval(x + 'title')[i], {
                            'opacity': style.a,
                            "transition": "opacity 0.1s linear"
                        });
                        css(eval(x + 'value')[i], {
                            'opacity': style.a,
                            "transition": "opacity 0.1s linear"
                        })
                    }
                    if (is == "playlist") {
                        if (faction[i].indexOf("playlist") == 0) {
                            var id = faction[i].substr(8);
                            if (plid == id || plfolder == id) {
                                css(eval(x + 'title')[i], {
                                    'color': style.valuecolor
                                });
                                css(eval(x + 'value')[i], {
                                    'color': style.valuecolor
                                });
                                opn = true
                            } else {
                                if (exist(o.plhistory[id])) {
                                    HistoryPlaylist(i)
                                } else {
                                    css(eval(x + 'title')[i], {
                                        'color': style.color
                                    })
                                }
                            }
                        }
                    }
                    if (style.playbgcolored == 1 && exist(style.playbgcolor) && opn) { } else {
                        css(eval(x + 'bg')[i], {
                            'backgroundColor': o.plhistory[id] ? style.historybgcolor : style.bgcolor
                        })
                    }
                }
            }
        }

        function onClick(event) {
            if (!justshow) {
                var d = new Date();
                o.clicktime = d.getTime();
                var i = event.target.getAttribute('fid');
                if (i) {
                    if (exist(f[i])) {
                        if (exist(faction[i])) {
                            Action(i, 0)
                        }
                    }
                }
            }
        }

        function onMouseUp(event) {
            event.cancelBubble = true;
            Retimer()
        }

        function onClick2(event) {
            if (!justshow) {
                var d = new Date();
                o.clicktime = d.getTime();
                var i = event.target.getAttribute('f2id');
                if (i) {
                    if (i == 0) {
                        Home()
                    } else {
                        if (exist(f2action[i])) {
                            Action2(i)
                        }
                    }
                }
            }
        }

        function onClickSubtitle(event) {
            var x = event.target.getAttribute('setupx');
            if (x) {
                ActionOptions(x)
            }
        }

        function onClickSubtitle2(event) {
            Retimer();
            var i = event.target.getAttribute('f2id');
            if (exist(f2action[i])) {
                if (f2action[i].indexOf("=") > 0) {
                    var x = f2action[i].substr(0, f2action[i].indexOf("="));
                    var y = f2action[i].substr(f2action[i].indexOf("=") + 1);
                    var z = open_action + '_reset';
                    if (!v[z]) {
                        v[z] = []
                    }
                    if (!exist(v[z][x])) {
                        v[z][x] = v[x] + ''
                    }
                    StyleSubtitle(x, y)
                }
            }
        }

        function StyleSubtitle(x, y) {
            v[x] = y;
            if (o.storage && v.sub_designstore == 1 && x != "sub_shift") {
                localStorage.setItem("pljs" + x, y)
            }
            o.actions.RenewSubtitle();
            ActionOptions(x)
        }

        function onClickTimer2(event) {
            var i = event.target.getAttribute('f2id');
            var x = f2action[i];
            if (exist(x)) {
                if (x.indexOf("=") > 0) {
                    var z = x.substr(0, x.indexOf("="));
                    var y = x.substr(x.indexOf("=") + 1);
                    v[z] = y;
                    SubtitleTimerMenu();
                    Value(o[open_action + '_i']);
                    if (open_action == "offsettimer") {
                        SettingsTimers("offsetwrite")
                    }
                }
            }
        }

        function Value(i) {
            if (exist(faction[i])) {
                var _hide = false;
                var _show = false;
                var _value = '';
                if (is == "settings") {
                    if (faction[i] == "quality") {
                        _value = o.media.getQuality()
                    }
                    if (faction[i] == "audiotrack") {
                        _value = o.media.getAudioTrack()
                    }
                    if (faction[i] == "channel") {
                        if (o.channels) {
                            _value = o.files_channel[o.current_channel]
                        }
                    }
                    if (faction[i] == "audiotrack" || faction[i] == "channel" || faction[i] == "quality") {
                        if (o['files_' + faction[i]].length == 0) {
                            _hide = true
                        } else {
                            if (o['files_' + faction[i]].length == 1 && (style.show1value != 1 || o['files_' + faction[i]][0] == 1)) {
                                _hide = true
                            } else {
                                _show = true
                            }
                        }
                    }
                    if (faction[i] == "airplay") {
                        if (!o.airplay) {
                            _hide = true
                        } else {
                            _show = true
                        }
                    }
                    if (faction[i] == "download") {
                        if (o.file_type != 'native' && !v.download) {
                            _hide = true
                        } else {
                            _show = true
                        }
                    }
                    if (faction[i] == "subtitle") {
                        if (exist(o.subs)) {
                            _show = true;
                            if (o.subtitle_on || v.sub_off == 1) {
                                if (o.sbt) {
                                    _value = o.files_subtitle[!o.subtitle_on ? o.sbt.ioff() : o.current_subtitle]
                                }
                            } else {
                                _value = ''
                            }
                            var sxs = 0;
                            for (var s = 0; s < o.subs.length; s++) {
                                if (o.subs[s] != '') {
                                    sxs++
                                }
                            }
                            if (sxs == 1 && o.subload == 1) {
                                sxs = 0
                            }
                            if (v.sub_upload == 1 && v.sub_upload0 == 1) { } else {
                                if (sxs == 0) {
                                    _hide = true;
                                    _show = false
                                }
                            }
                        } else {
                            _hide = true
                        }
                    }
                    if (faction[i] == "speed") {
                        _value = o.files_speed[o.current_speed];
                        _value == 1 ? _value = Lang('normal') : '';
                        _show = true;
                        if (o.file_type == "vimeo" || (o.media.isLive() && v.speed4live != 1)) {
                            _hide = true;
                            _show = false
                        }
                    }
                    if (faction[i] == "scale") {
                        _value = Math.round(o.mediascale.x * 100) + '%';
                        _show = true
                    }
                    if (faction[i].indexOf("timer") > 0) {
                        var x = ' ';
                        var y = ['hour', 'minute', 'second'];
                        for (var z = 0; z < y.length; z++) {
                            if (exist(v[faction[i] + y[z]])) {
                                if (v[faction[i] + y[z]] != ' ') {
                                    x += (x != ' ' ? ':' : '') + v[faction[i] + y[z]]
                                }
                            }
                        }
                        _value = x != ' 0:0' && x.indexOf(":") > -1 ? x : ' ';
                        _show = true
                    }
                }
                fvalue[i].innerHTML = _value + (_value != '' && style.hidearrow != 1 ? ' &nbsp;<svg width="5px" height="7px" viewBox="-1 -1 5 8" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><polyline stroke="#' + style.valuecolor + '" stroke-width="1" fill="none" points="0 0 3 3 0 6"></polyline></svg>' : '');
                if (_hide) {
                    hide(f[i]);
                    if (is == "settings") {
                        stout[i] ? clearTimeout(stout[i]) : '';
                        if (o.controls) {
                            o.controls.SettingsN(i, false, _value)
                        } else {
                            stout[i] = setTimeout(function () {
                                o.controls.SettingsN(i, false, _value)
                            }, 200)
                        }
                    }
                    css(f[i], {
                        'position': 'absolute',
                        'right': 0,
                        'top': -100
                    })
                }
                if (_show) {
                    if (style.floatleft == 1) {
                        css(f[i], {
                            'display': 'inline-block'
                        })
                    } else {
                        show(f[i])
                    }
                    if (is == "settings") {
                        stout[i] ? clearTimeout(stout[i]) : '';
                        if (o.controls) {
                            o.controls.SettingsN(i, true, _value)
                        } else {
                            stout[i] = setTimeout(function () {
                                o.controls.SettingsN(i, true, _value)
                            }, 500)
                        }
                    }
                    css(f[i], {
                        'position': 'relative',
                        'right': 0,
                        'top': 0
                    })
                }
                Resize()
            }
            for (var j = 1; j < f.length; j++) {
                if (f[j]) {
                    if (isVisible(f[j])) {
                        var refresh = false;
                        empty ? refresh = true : '';
                        empty = false;
                        refresh && o.controls ? o.controls.refresh() : ''
                    }
                }
            }
        };

        function Action(i, cstm) {
            if (exist(faction[i])) {
                o.setaction = true;
                Retimer();
                var x = VisibleItems();
                if (open_action != faction[i]) {
                    open_action = faction[i];
                    if (open_action == 'quality' || open_action == 'audiotrack' || open_action == 'subtitle' || open_action == 'speed' || open_action == 'channel' || open_action == 'scale' || open_action.indexOf("timer") > 0) {
                        open_settings = i;
                        var z = copyObject(o['files_' + open_action]);
                        if (open_action == "sleeptimer") {
                            z = SettingsTimers("sleepoptions")
                        }
                        if (open_action == "offsettimer") {
                            z = SettingsTimers("offsetoptions")
                        }
                        var current = o['current_' + open_action];
                        var pressed = o['pressed_' + open_action];
                        for (var j = 1; j < f.length; j++) {
                            if (f[j]) {
                                f[j].style.display = "none"
                            }
                        }
                        f2 = [];
                        CreateItem('f2', 0);
                        StyleItem(f2[0], f2bg[0], f2title[0], f2value[0]);
                        css(f2[0], {
                            "border-bottom": "1px solid " + (style.bordercolored == 1 ? "#" + style.bordercolor.replace("#", "") : "rgba(100,100,100,0.7)")
                        });
                        _cstm = cstm;
                        var suboptns = false;
                        f2title[0].innerHTML = (x[0] < 2 || _cstm == 1 || style.noprevicon == 1 ? '' : _prevIcon) + (v.settings[is + i + "title"] && v.settings[is + i + "title"] != '' ? v.settings[is + i + "title"] : Lang(v.settings[is + i + "action"]));
                        if (open_action == 'subtitle' && !o.hls_subs && !o.dash_subs) {
                            var prm = createElement("div");
                            prm.innerHTML = Lang("options");
                            css(prm, {
                                'color': style.color,
                                'pointerEvents': 'auto',
                                'cursor': 'pointer'
                            });
                            f2value[0].appendChild(prm);
                            prm.addEventListener(evntclk, SubtitleSettings);
                            suboptns = true
                        }
                        if (open_action == 'subtitle' && v.sub_upload == 1 && !o.system.tv && exist(window.FileReader)) {
                            var uf = createElement("div");
                            !o.sbt ? o.sbt = new PluginSub() : '';
                            uf.innerHTML = "<input type='file' id='" + v.id + "_subfile' accept='.vtt,.ass,.srt' style='display:none'/>" + Lang('upload');
                            css(uf, {
                                'color': style.color,
                                'pointerEvents': 'auto',
                                'cursor': 'pointer',
                                'margin-left': (suboptns ? '10px' : 0)
                            });
                            f2value[0].appendChild(uf);
                            o.subupld = document.getElementById(v.id + "_subfile");
                            o.subupld.onchange = o.sbt.SubUpload;
                            uf.addEventListener(evntclk, o.sbt.SubUpload)
                        }
                        if (suboptns) {
                            if (sub_settings_on) {
                                if (_cstm == 2) {
                                    z = [];
                                    hide2(f2[0])
                                }
                                for (j = 0; j < o.sub_options.length; j++) {
                                    if (v.sub_all == 0 && o.sub_options[j] == "sub_color2") { } else {
                                        z.push("pjslng_" + o.sub_options[j])
                                    }
                                }
                            }
                        }
                        if (open_action == 'scale') {
                            Scale();
                            css(f2value[0], {
                                'width': style.valuefontsize * 2.5,
                                'text-align': 'right'
                            })
                        }
                        css(f2title[0], {
                            'font-size': style.headfontsize
                        });
                        f2action[0] = "home";
                        if (_cstm != 1 && x[0] > 1) {
                            f2[0].addEventListener(evntovr, onOver);
                            f2[0].addEventListener(evntout, onOut);
                            f2[0].addEventListener(evntclk, onClick2);
                            f2[0].addEventListener("mouseup", onMouseUp)
                        } else {
                            css(f2[0], {
                                "cursor": 'default'
                            })
                        }
                        if (style.nohead == 1) {
                            hide2(f2[0])
                        }
                        if (exist(z)) {
                            var zz = '';
                            for (j = 0; j < z.length; j++) {
                                var y = j + 1;
                                var toend = 0;
                                var off = false;
                                if (z[j] && trim(z[j]) != '') {
                                    if (open_action == 'quality') {
                                        if (z[j] == Lang("auto")) {
                                            toend = 1
                                        }
                                        if (o.file_type == "hls" && v.hlsqhsort == 1) {
                                            var iz = int(z[j]);
                                            if (iz && iz < zz) {
                                                toend = 2
                                            }
                                            zz = int(z[j])
                                        }
                                    }
                                    CreateItem('f2', y, toend);
                                    StyleItem(f2[y], f2bg[y], f2title[y], f2value[y], faction[i]);
                                    if (open_action == 'speed') {
                                        z[j] == 1 ? z[j] = Lang('normal') : ''
                                    }
                                    if (typeof (z[j]) == 'string') {
                                        if (z[j].indexOf("<<<") == 0) {
                                            z[j] = z[j].replace('<<<', '');
                                            off = true
                                        }
                                        if (z[j].indexOf('timer') > 0) {
                                            o[open_action + '_i'] = i
                                        }
                                        if (z[j].indexOf("pjslng") == 0) {
                                            var tmp = z[j];
                                            if (tmp.indexOf("timer") > 0) {
                                                f2title[y].innerHTML = Lang(z[j].substr(tmp.indexOf("timer") + 5))
                                            } else {
                                                f2title[y].innerHTML = Lang(z[j].substr(7))
                                            }
                                            if (z[j] == 'pjslng_sub_sizeproc') {
                                                css(f2[y], {
                                                    "border-top": "1px solid rgba(100,100,100,0.7)"
                                                })
                                            }
                                        } else {
                                            f2title[y].innerHTML = z[j]
                                        }
                                    } else {
                                        f2title[y].innerHTML = z[j]
                                    }
                                    f2action[y] = open_action + j;
                                    if (current == j || pressed == j) {
                                        f2value[y].innerHTML = current == j ? _activeIcon : _xIcon;
                                        current == j ? css(f2title[y], {
                                            'color': style.valuecolor
                                        }) : ''
                                    }
                                    if (typeof (z[j]) == 'string') {
                                        if (z[j].indexOf("pjslng") == 0) {
                                            var t = z[j].substr(7);
                                            if (t.indexOf("color") > 0) {
                                                f2value[y].innerHTML = "<div style='" + (v[t] == "000000" ? 'border:1px solid #999;height:8px;width:8px;' : 'height:10px;width:10px;') + ";background-color:" + (v[t].indexOf("#") == -1 ? '#' : '') + v[t] + ";border-radius:10px;'></div>"
                                            } else {
                                                if (exist(v[z[j].substr(7)])) {
                                                    f2value[y].innerHTML = v[z[j].substr(7)]
                                                }
                                            }
                                        }
                                    }
                                    if (open_action == 'quality') {
                                        if (z[j] == Lang("auto") && o.media.autoQuality()) {
                                            css(f2title[y], {
                                                'color': style.valuecolor
                                            })
                                        }
                                        if (exist(v.forbidden_quality)) {
                                            if (v.forbidden_quality.indexOf(z[j]) > -1) {
                                                hide2(f2[y])
                                            }
                                        }
                                    }
                                    var clck = "";
                                    if (typeof (z[j]) == 'string') {
                                        if (z[j].indexOf("pjslng") == 0) {
                                            attr(f2[y], {
                                                'f2parent': i,
                                                'setupx': z[j].substr(7)
                                            });
                                            clck = "onClickSubtitle"
                                        }
                                    }
                                    if (!off) {
                                        f2[y].addEventListener(evntovr, onOver);
                                        f2[y].addEventListener(evntout, onOut);
                                        if (clck == "onClickSubtitle") {
                                            f2[y].addEventListener(evntclk, onClickSubtitle)
                                        } else {
                                            f2[y].addEventListener(evntclk, onClick2)
                                        }
                                        f2[y].addEventListener("mouseup", onMouseUp)
                                    } else {
                                        css(f2[y], {
                                            "cursor": "default"
                                        })
                                    }
                                }
                            }
                        }
                        Resize()
                    }
                    if (faction[i] == 'download') {
                        o.actions.Download()
                    }
                    if (faction[i].indexOf('playlist') > -1) {
                        var id = faction[i].substr(8);
                        if (exist(o.playlist_dic[id])) {
                            if (exist(o.playlist_dic[id]['file'])) {
                                o.seekto = undefined;
                                ActionPlaylist(i);
                                UpdateStart(id);
                                SettingsTimers("offset");
                                if (exist(o.playlist_dic[id]['redirect']) && v.redirect == 1 && v.redirectplaylist == 1) {
                                    redirect(o.playlist_dic[id]['redirect'])
                                } else {
                                    UpdateVars0(id);
                                    o.actions.NewFile(o.playlist_dic[id]['file'], (v.playlist.dontplay == 1 ? 1 : undefined));
                                    v.playlist.always == 0 && v.playlist.autohide == 1 ? setTimeout(HideControl, 200) : '';
                                    autonextopenfolder = false;
                                    autoprevopenfolder = false;
                                    UpdateVars(id)
                                }
                            } else {
                                if (exist(o.playlist_dic[id]['folder'])) {
                                    UpdatePlaylist(id);
                                    if (autonextopenfolder) {
                                        plx == -1 ? Action(0, 0) : ''
                                    } else if (autoprevopenfolder) {
                                        plx == -1 ? Action(parseInt(f.length) - 2, 0) : ''
                                    }
                                }
                            }
                        }
                        if (o.droplist) {
                            o.droplist.Update()
                        }
                    }
                    if (faction[i] == 'airplay') {
                        o.media.Airplay()
                    }
                }
            }
        };
        this.UpdateTimer = function (x) {
            Value(o[x + '_i'])
        };

        function ActionOptions(x) {
            if (x == "sub_reset") {
                var z = open_action + '_reset';
                if (v[z]) {
                    for (var y in v[z]) {
                        if (v[z].hasOwnProperty(y)) {
                            StyleSubtitle(y, v[z][y])
                        }
                    }
                    SubtitleSettingsMenu()
                }
                return
            }
            Retimer();
            for (var i = 0; i < f2.length; i++) {
                if (f2[i]) {
                    f2[i].style.display = "none"
                }
            }
            f2 = [];
            CreateItem('f2', 0);
            StyleItem(f2[0], f2bg[0], f2title[0], f2value[0]);
            css(f2[0], {
                "border-bottom": "1px solid " + (style.bordercolored == 1 ? "#" + style.bordercolor.replace("#", "") : "rgba(100,100,100,0.7)")
            });
            if (x.indexOf("timer") > 0) {
                f2[0].addEventListener(evntclk, SubtitleTimerMenu);
                f2title[0].innerHTML = Lang(x.substr(x.indexOf("timer") + 5))
            } else {
                f2[0].addEventListener(evntclk, SubtitleSettingsMenu);
                f2title[0].innerHTML = (style.noprevicon != 1 ? _prevIcon : '') + Lang(x)
            }
            css(f2title[0], {
                'font-size': style.headfontsize
            });
            f2[0].addEventListener(evntovr, onOver);
            f2[0].addEventListener(evntout, onOut);
            f2[0].addEventListener("mouseup", onMouseUp);
            var values = [];
            var valuefromlang = false;
            if (x.indexOf("size") > 0) {
                values = ['50%', '75%', '100%', '125%', '150%', '175%', '200%', '250%', '300%', '400%']
            }
            if (x.indexOf("bga") > 0) {
                values = ['0', '0.2', '0.3', '0.4', '0.5', '0.6', '0.7', '0.8', '0.9', '1']
            }
            if (x.indexOf("shift") > 0) {
                for (i = -5; i < 5.5; i += 0.5) {
                    values.push(Math.round(i * 100) / 100)
                }
            }
            if (x.indexOf("weight") > 0) {
                values = [200, 400, 600]
            }
            if (x.indexOf("bottom") > 0) {
                for (i = 0; i < 21; i++) {
                    values[i] = i * 10
                }
            }
            if (x.indexOf("hour") > 0) {
                for (i = 0; i < 24; i++) {
                    values[i] = i
                }
            }
            if (x.indexOf("minute") > 0 || x.indexOf("second") > 0) {
                for (i = 0; i < 60; i++) {
                    values[i] = i
                }
            }
            if (x.indexOf("shadow") > 0) {
                valuefromlang = true;
                values = [0, 1]
            }
            if (x.indexOf("color") > 0) {
                values = ['ffffff', 'ffeeab', '72ccf8', '62de50', 'faed54', 'feba54', 'e8bbff', 'ffc7d1', 'aaaaaa', 'd9bb8c', 'b3fee8', '4bd9ac', 'FEF370', 'D90000', '073DA0', '409829', '644082', '000000'];
                var vx = v[x].replace("#", "");
                if (values.indexOf(vx) == -1) {
                    values[8] = vx
                }
            }
            for (y = 1; y <= values.length; y++) {
                CreateItem('f2', y, 0);
                StyleItem(f2[y], f2bg[y], f2title[y], f2value[y]);
                css(f2value[y], {
                    'padding-left': 0
                });
                if (x.indexOf("color") > 0 || x.indexOf("bottom") > 0 || x.indexOf("timer") > 0 || x.indexOf("shift") > 0) {
                    y % 3 != 0 ? css(f2[y], {
                        'float': 'left'
                    }) : '';
                    css(f2[y], {
                        'width': '33.3%'
                    });
                    if (x.indexOf("color") > 0) {
                        f2title[y].innerHTML = "<div style='" + (values[y - 1] == "000000" ? 'border:1px solid #999;height:18px;width:18px;' : 'height:20px;width:20px;') + ";background-color:#" + values[y - 1] + ";border-radius:20px;'></div>";
                        css(f2[y], {
                            'line-height': 1
                        })
                    } else {
                        f2title[y].innerHTML = values[y - 1]
                    }
                } else {
                    if (x.indexOf("weight") > 0) {
                        f2title[y].innerHTML = values[y - 1]
                    } else {
                        y % 2 != 0 ? css(f2[y], {
                            'float': 'left'
                        }) : '';
                        css(f2[y], {
                            'width': '50%'
                        });
                        if (valuefromlang) {
                            f2title[y].innerHTML = Lang(values[y - 1] + 'val')
                        } else {
                            f2title[y].innerHTML = values[y - 1]
                        }
                    }
                }
                f2action[y] = x + '=' + values[y - 1];
                if ((values[y - 1] == v[x] && String(v[x]) != " ") || v[x] == '#' + values[y - 1]) {
                    f2value[y].innerHTML = _activeIcon;
                    css(f2title[y], {
                        'color': style.valuecolor
                    })
                }
                f2[y].addEventListener(evntovr, onOver);
                f2[y].addEventListener(evntout, onOut);
                if (x.indexOf("timer") > 0) {
                    f2[y].addEventListener(evntclk, onClickTimer2)
                } else {
                    f2[y].addEventListener(evntclk, onClickSubtitle2)
                }
                f2[y].addEventListener("mouseup", onMouseUp)
            }
            Resize()
        }

        function UpdateVars0(id) {
            if (exist(o.playlist_dic[id]['poster'])) {
                v.poster = o.playlist_dic[id]['poster'];
                exist(v.poster) ? o.media.Poster(v.poster) : ''
            }
            if (exist(o.playlist_dic[id]['title'])) {
                o.titlestore = o.playlist_dic[id]['title']
            }
        }

        function UpdateVars(id) {
            if (exist(o.playlist_dic[id]['title'])) {
                if (v.showtitleplaylist == 1) {
                    if (o.actions.TitleTemplate(o.playlist_dic[id])) { } else {
                        v.title = (v.addtitleplaylist == 1 && exist(o.maintitle) ? o.maintitle + (v.addtitleplaylistbr == 1 ? '<br>' : ' ') : '') + o.playlist_dic[id]['title']
                    }
                    o.actions.Title('title')
                }
            }
            if (v.pointed == 1) {
                if (exist(o.playlist_dic[id]['points'])) {
                    v.points = o.playlist_dic[id]['points']
                } else {
                    v.points = []
                }
                o.controls.RenewPoints()
            }
            v.remove = undefined;
            var xv = ['url', 'url2', 'url3', 'vars', 'embed', 'end', 'remove', 'delete', 'heartbeat', 'download', 'label', 'title2', 'thumbnails'];
            for (var i = 0; i < xv.length; i++) {
                if (exist(o.playlist_dic[id][xv[i]])) {
                    v[xv[i]] = o.playlist_dic[id][xv[i]]
                }
            }
            v.start = 0;
            UpdateStart(id);
            if (exist(o.playlist_dic[id]['sub'])) {
                o.playlist_dic[id]['subtitle'] = o.playlist_dic[id]['sub']
            }
            if (exist(o.playlist_dic[id]['subtitle'])) {
                o.actions.Subtitle(o.playlist_dic[id]['subtitle'])
            }
            if (exist(o.playlist_dic[id]['design'])) {
                apiProcessor('design', o.playlist_dic[id]['design'])
            }
        }

        function UpdateStart(id) {
            var x = o.playlist_dic[id]['start'];
            if (exist(x)) {
                if (x == "continue") {
                    if (o.media.time() > 0) {
                        v.start = o.seekto = o.media.time()
                    }
                } else {
                    v.start = o.seekto = x
                }
            }
        }

        function ActionPlaylist(x) {
            if (plx == 0 && !o.start) {
                css(ftitle[plx], {
                    'color': style.color
                });
                css(fbg[plx], {
                    'backgroundColor': style.bgcolor
                });
                fvalue[plx].innerHTML = ''
            } else {
                o.plopenid = x;
                if (plx > -1) {
                    HistoryPlaylist(plx)
                }
                if (plid != '') {
                    o.plhistory[plid] = true;
                    shuffle = removebykey(shuffle, plid)
                }
            }
            if (faction[x]) {
                var id = faction[x].substr(8);
                fvalue[x].innerHTML = _activeIcon;
                css(ftitle[x], {
                    'color': style.valuecolor,
                    'text-decoration': 'none',
                    'opacity': style.a
                });
                if (style.playbgcolored == 1 && exist(style.playbgcolor)) {
                    css(fbg[x], {
                        'backgroundColor': style.playbgcolor
                    })
                }
                plx = x;
                plid = id;
                o.plid = plid;
                v.plstart = plid;
                o.playlist_title = ftitle[x].innerHTML;
                o.plopenid = plid;
                plfolder = o.playlist_dic[id]['pjs_parent'];
                if (o.controls) {
                    o.controls.PlaylistControls()
                }
            }
        }

        function UpdatePlaylist(id) {
            var x = id == 0 ? o.playlist : o.playlist_dic[id];
            o.plopenid = id;
            for (var i = 0; i < f.length; i++) {
                if (style.floatleft == 1) {
                    control.removeChild(f[i])
                } else {
                    control2.removeChild(f[i])
                }
                f[i] = null
            }
            f = [];
            plx = -1;
            if (exist(x['folder'])) {
                var y = Object.keys(x['folder']).length;
                CreateItem('f', y);
                faction[y] = "playlistfolder";
                StyleItem(f[y], fbg[y], ftitle[y], fvalue[y]);
                if (style.floatleft == 1) {
                    css(f[y], {
                        "width": (style.floatlimitwidth == 1 ? style.floatwidth : "auto"),
                        "height": style.floatheight
                    })
                }
                if (style.borderbottom == 1) {
                    if (style.floatleft == 1) {
                        css(f[y], {
                            "borderRight": "1px solid #" + style.headbordercolor
                        })
                    } else {
                        css(f[y], {
                            "borderBottom": "1px solid #" + style.headbordercolor
                        })
                    }
                }
                var tmp = x.title;
                if (style.noprevicon != 1) {
                    tmp = _prevIcon + tmp
                }
                ftitle[y].innerHTML = tmp;
                css(ftitle[y], {
                    'font-size': style.headfontsize
                });
                var p = x['pjs_parent'];
                f[y].addEventListener(evntovr, onOver);
                f[y].addEventListener(evntout, onOut);
                f[y].addEventListener(evntclk, function () {
                    PlaylistBack(p)
                });
                x = x['folder']
            }
            var y = Object.keys(x).length;
            shuffle = [];
            shuffle_ = [];
            for (var i = 0; i < y; i++) {
                CreateItem('f', i);
                faction[i] = "playlist" + x[i].id;
                if (!exist(o.plhistory[x[i].id]) && !exist(x[i].folder)) {
                    shuffle[x[i].id] = i;
                    shuffle_[x[i].id] = i
                }
                StyleItem(f[i], fbg[i], ftitle[i], fvalue[i]);
                if (style.floatleft == 1) {
                    if (style.activeiconsize == 0) {
                        css(ftitle[i], {
                            'width': style.floatwidth - style.paddingleft - style.paddingright
                        });
                        hide2(fvalue[i])
                    }
                    css(f[i], {
                        "width": (style.floatlimitwidth == 1 ? style.floatwidth : "auto"),
                        "height": style.floatheight
                    })
                }
                if (style.borderbottom == 1 && i < y - 1) {
                    var brd = createElement("div");
                    f[i].appendChild(brd);
                    if (style.floatleft == 1) {
                        css(brd, {
                            "position": "absolute",
                            "top": 0,
                            "right": 0,
                            "width": 1,
                            "height": "100%",
                            "background": "#" + style.bordercolor,
                            "pointerEvents": "none"
                        })
                    } else {
                        css(brd, {
                            "position": "absolute",
                            "bottom": 0,
                            "left": 0,
                            "width": "100%",
                            "height": 1,
                            "background": "#" + style.bordercolor,
                            "pointerEvents": "none"
                        })
                    }
                }
                ftitle[i].innerHTML = x[i].title ? x[i].title : '&nbsp;';
                if (v.timestore == 1 && v.playedstore == 1 && x[i].id) {
                    if (o.playedstored) {
                        if (o.playedstored.indexOf(x[i].id) > -1) {
                            x[i].played = 1
                        }
                    }
                }
                if (exist(x[i].played)) {
                    if (x[i].played == 1) {
                        o.plhistory[x[i].id] = true;
                        HistoryPlaylist(i)
                    }
                }
                if (exist(x[i].folder)) {
                    fvalue[i].innerHTML = _nextIcon;
                    css(fvalue[i], {
                        "color": style.color
                    })
                }
                f[i].addEventListener(evntovr, onOver);
                f[i].addEventListener(evntout, onOut);
                f[i].addEventListener(evntclk, onClick);
                f[i].addEventListener("mouseup", onMouseUp);
                if (exist(o.plhistory[x[i].id])) {
                    HistoryPlaylist(i)
                }
                if (plid == x[i].id) {
                    ActionPlaylist(i)
                }
                if (plfolder == x[i].id) {
                    css(ftitle[i], {
                        'color': style.valuecolor
                    });
                    css(fvalue[i], {
                        'color': style.valuecolor
                    })
                }
            }
            Resize();
            empty = false;
            o.controls ? o.controls.refresh() : ''
        }

        function StyleArrow(x, y, z, x1, y1, x2, y2, x3, y3, x4, y4) {
            var ww = (style.floatleft == 1 ? '40px' : '100%');
            var hh = (style.floatleft == 1 ? '100%' : '40px');
            css(x, {
                'position': 'absolute',
                'display': 'inline-block',
                'width': ww,
                'height': hh,
                'text-align': 'center'
            });
            if (style.scrollarrowgradient == 1) {
                css(x, {
                    'background': '-moz-linear-gradient(' + y + ')',
                    'background': '-webkit-linear-gradient(' + y + ')',
                    'background': '-ms-linear-gradient(' + y + ')',
                    'background': '-o-linear-gradient(' + y + ')',
                    'background': 'linear-gradient(' + y + ')',
                })
            }
            if (style.floatleft == 1 || o.system.mobile) {
                css(x, {
                    'cursor': 'pointer'
                })
            } else {
                css(x, {
                    'pointer-events': 'none'
                })
            }
            if (style.limitwidth == 1) {
                css(x, {
                    'max-width': style.limitmaxwidth + 'px!important'
                })
            }
            if (z == "top") {
                css(x, {
                    'top': -1,
                    'left': 0
                })
            }
            if (z == "bottom") {
                css(x, {
                    'bottom': -1,
                    'left': 0
                })
            }
            if (z == "left") {
                css(x, {
                    'top': 0,
                    'left': 0
                })
            }
            if (z == "right") {
                css(x, {
                    'top': 0,
                    'right': 0
                })
            }
            if (z == "right" || z == "left") {
                css(x, {
                    'text-align': 'left',
                    'padding-top': container.offsetHeight / 2 - 10
                })
            }
            x.innerHTML = "<center><div " + (style.scrollarrowbgover == 1 ? "onMouseOver='this.style.backgroundColor=\"#" + style.scrollarrowbgovercolor + "\"' onMouseOut='" + (style.scrollarrowbg == 1 ? "this.style.backgroundColor=\"#" + style.scrollarrowbgcolor : "this.style.background=\"none") + "\"'" : "") + " style='pointer-events:auto;cursor:pointer;width:20px;height:20px;border-radius:20px;" + (style.scrollarrowbg == 1 ? "background-color:#" + style.scrollarrowbgcolor + ";" : "") + (z == "top" ? "margin-top:10px;" : "") + (z == "bottom" ? "margin-top:10px;" : "") + (z == "right" ? "margin-left:0px;" : "") + (z == "left" ? "margin-right:0px;" : "") + "'><svg width='20' height='20' xmlns:xlink='http://www.w3.org/1999/xlink' xmlns='http://www.w3.org/2000/svg'><g><line x1='" + x1 + "' y1='" + y1 + "' x2='" + x2 + "' y2='" + y2 + "' stroke='#" + style.scrollarrowcolor + "' stroke-width='" + style.scrollarrowsize + "' stroke-linecap='round'/><line x1='" + x3 + "' y1='" + y3 + "' x2='" + x4 + "' y2='" + y4 + "' stroke='#" + style.scrollarrowcolor + "' stroke-width='" + style.scrollarrowsize + "' stroke-linecap='round'/></g></svg></div></center>"
        }
        this.Arrows = function () {
            if (style.scrollarrows == 1) {
                Arrows()
            }
        };

        function ArrowsInterval() {
            if (is_visible) {
                Arrows()
            }
        }

        function Arrows(e) {
            if (style.scrollarrows == 1 && !removed) {
                if (style.floatleft == 1) {
                    var h = control.scrollWidth;
                    var m = container.offsetWidth + style.bgpaddingleft + style.bgpaddingright;
                    var t = control.scrollLeft
                } else {
                    var h = control.scrollHeight;
                    var m = container.offsetHeight;
                    var t = control.scrollTop
                }
                if (h > m) {
                    if (t > 0) {
                        if (!isVisible(arr_up)) {
                            show(arr_up);
                            var m1 = new Motion({
                                "mc": arr_up,
                                "type": "alpha_div",
                                "to": 1,
                                "time": 0.3,
                                "me": "arr_up"
                            })
                        }
                    } else {
                        if (isVisible(arr_up)) {
                            var m2 = new Motion({
                                "mc": arr_up,
                                "type": "alpha_div",
                                "to": 0,
                                "time": 0.3,
                                "me": "arr_up",
                                "hide": true
                            })
                        }
                        if (e) {
                            e.deltaY < 0 ? e.preventDefault() : ''
                        }
                    }
                    if (t < h - m - 10) {
                        if (!isVisible(arr_down)) {
                            show(arr_down);
                            var m3 = new Motion({
                                "mc": arr_down,
                                "type": "alpha_div",
                                "to": 1,
                                "time": 0.3,
                                "me": "arr_down"
                            })
                        }
                    } else {
                        if (isVisible(arr_down)) {
                            var m4 = new Motion({
                                "mc": arr_down,
                                "type": "alpha_div",
                                "to": 0,
                                "time": 0.3,
                                "me": "arr_down",
                                "hide": true
                            })
                        }
                        if (e) {
                            e.deltaY > 0 ? e.preventDefault() : ''
                        }
                    }
                } else {
                    hide(arr_up);
                    hide(arr_down)
                }
            }
        }

        function ScrollDown() {
            var x = control.scrollTop + container.offsetHeight - 60;
            var m = new Motion({
                "mc": control,
                "type": "scroll",
                "to": x,
                "time": 0.3,
                "me": "scroll_down",
                "ease": "cubic"
            });
            setTimeout(Arrows, 1000)
        }

        function ScrollUp() {
            var x = control.scrollTop - container.offsetHeight + 60;
            var m = new Motion({
                "mc": control,
                "type": "scroll",
                "to": x,
                "time": 0.3,
                "me": "scroll_up",
                "ease": "cubic"
            });
            setTimeout(Arrows, 1000)
        }

        function ScrollOverOut(event) {
            clearTimeout(o.settingsovertimer);
            event.stopPropagation()
        }

        function ScrollRight() {
            var x = control.scrollLeft + (container.offsetWidth + style.bgpaddingleft + style.bgpaddingright) - 60;
            var m = new Motion({
                "mc": control,
                "type": "scrollleft",
                "to": x,
                "time": 0.3,
                "me": "scroll_right",
                "ease": "cubic"
            });
            setTimeout(Arrows, 1000)
        }

        function ScrollLeft() {
            var x = control.scrollLeft - (container.offsetWidth + style.bgpaddingleft + style.bgpaddingright) + 60;
            var m = new Motion({
                "mc": control,
                "type": "scrollleft",
                "to": x,
                "time": 0.3,
                "me": "scroll_left",
                "ease": "cubic"
            });
            setTimeout(Arrows, 1000)
        }

        function PlaylistBack(x) {
            if (x == '') {
                UpdatePlaylist(0)
            } else {
                if (exist(o.playlist_dic[x])) {
                    UpdatePlaylist(x)
                }
            }
            open_action = ''
        }

        function HistoryPlaylist(x) {
            fvalue[x].innerHTML = '';
            css(ftitle[x], {
                'color': style.historycolor
            });
            if (style.historytitlestrike == 1) {
                css(ftitle[x], {
                    'text-decoration': 'line-through'
                })
            }
            if (style.historytitlea > -1) {
                css(ftitle[x], {
                    'opacity': style.historytitlea
                })
            }
            css(fbg[x], {
                'backgroundColor': style.historybgcolor
            });
            if (style.historybga > -1) {
                css(fbg[x], {
                    'opacity': style.historybga
                })
            }
        }

        function Action2(i) {
            if (exist(f2action[i])) {
                Retimer();
                if (f2action[i].indexOf("quality") == 0) {
                    o.actions.SetQuality(f2action[i].substr(7))
                }
                if (f2action[i].indexOf("audiotrack") == 0) {
                    o.actions.SetAudioTrack(f2action[i].substr(10))
                }
                if (f2action[i].indexOf("subtitle") == 0) {
                    !o.sbt ? o.sbt = new PluginSub() : '';
                    o.sbt.SetSubtitle(f2action[i].substr(8))
                }
                if (f2action[i].indexOf("channel") == 0 && v.channels == 1) {
                    o.channels.SetChannel(f2action[i].substr(7))
                }
                if (f2action[i].indexOf("scale") == 0) {
                    if (f2action[i] == 'scale0') {
                        o.media.scale(style.scale / 100)
                    }
                    if (f2action[i] == 'scale1') {
                        o.media.scale('-' + style.scale / 100)
                    }
                    if (f2action[i] == 'scale2') {
                        o.media.normalscale()
                    }
                }
                if (f2action[i].indexOf("timer") > 0) {
                    if (f2action[i].indexOf("timer2") > 0) {
                        SettingsTimers(open_action + '0');
                        Value(o[open_action + '_i']);
                        if (open_action == "offsettimer") {
                            SettingsTimers("offsetwrite")
                        }
                        Home()
                    }
                }
                if (f2action[i].indexOf("speed") == 0) {
                    o.actions.SetSpeed(f2action[i].substr(5));
                    UpdateSpeed();
                    setTimeout(HideControl, 200)
                }
            }
        };
        this.UpdateSpeed = function () {
            UpdateSpeed()
        };
        this.Exist = function (x) {
            for (var i = 0; i < faction.length; i++) {
                if (faction[i] == x) {
                    return true
                }
            }
            return false
        };

        function UpdateSpeed() {
            for (var i = 0; i < faction.length; i++) {
                if (faction[i] == "speed") {
                    Value(i);
                    if (open_action == 'speed') {
                        Remove2();
                        Action(i, 0)
                    }
                }
            }
        }

        function CreateItem(x, i, toend) {
            if (exist(eval(x))) {
                eval(x)[i] = createElement("div");
                if (i < 2 || x == "f" || open_action != 'quality' || toend == 1) {
                    if (style.floatleft == 1) {
                        control.appendChild(eval(x)[i])
                    } else {
                        control2.appendChild(eval(x)[i])
                    }
                } else {
                    if (style.floatleft == 1) {
                        control.insertBefore(eval(x)[i], eval(x)[i - 1])
                    } else {
                        control2.insertBefore(eval(x)[i], eval(x)[toend == 2 ? i - 2 : i - 1])
                    }
                }
                if (x == 'f') {
                    attr(eval(x)[i], {
                        'fid': i
                    })
                }
                if (x == 'f2') {
                    attr(eval(x)[i], {
                        'f2id': i
                    })
                }
                eval(x + 'bg')[i] = createElement("div");
                eval(x)[i].appendChild(eval(x + 'bg')[i]);
                eval(x + 'img')[i] = createElement("div");
                eval(x)[i].appendChild(eval(x + 'img')[i]);
                css(eval(x + 'img')[i], {
                    'position': 'absolute',
                    'right': 0,
                    'top': 0,
                    'width': '100%',
                    'height': '100%',
                    'pointerEvents': 'none'
                });
                eval(x + 'title')[i] = createElement("div");
                eval(x)[i].appendChild(eval(x + 'title')[i]);
                eval(x + 'value')[i] = createElement("div");
                eval(x)[i].appendChild(eval(x + 'value')[i]);
                if (x == "f2" && is == "settings" && style.activeicon == 0) {
                    hide2(eval(x + 'value')[i])
                }
            }
        };

        function StyleItem(x, xbg, xtitle, xvalue, actn) {
            css(x, {
                'position': 'relative',
                'right': 0,
                'top': 0,
                'cursor': 'pointer',
                'height': 'auto',
                'width': '100%',
                'overflow': 'hidden',
                'display': 'block',
                'line-height': '1.5em'
            });
            if (style.floatmarginright && style.floatleft == 1) {
                css(x, {
                    'marginRight': style.floatmarginright
                })
            }
            if (style.floatleft == 1) {
                css(x, {
                    'display': 'inline-block',
                    'vertical-align': 'top',
                    'white-space': 'normal'
                })
            }
            css(xbg, {
                'position': 'absolute',
                'right': 0,
                'top': 0,
                'width': '100%',
                'height': '100%',
                'backgroundColor': style.bgcolor,
                'opacity': style.bga,
                'pointerEvents': 'none',
                'transition': 'opacity 0.2s linear,background .2s linear'
            });
            css(xtitle, {
                'position': 'relative',
                'right': 0,
                'top': 0,
                'float': (style.align ? style.align : 'left'),
                'color': style.color,
                'padding-top': style.paddingtop,
                'padding-right': style.paddingright,
                'padding-bottom': style.paddingbottom,
                'padding-left': style.paddingleft,
                'pointerEvents': 'none',
                'opacity': style.a,
                'transition': 'opacity 0.2s linear,color 0.2s linear',
            });
            css(xvalue, {
                'position': 'relative',
                'right': 0,
                'top': 0,
                'float': (style.valuealign ? style.valuealign : 'right'),
                'padding-top': style.paddingtop + (style.valuefontsize < style.fontsize ? (style.fontsize - style.valuefontsize) / 2 : 0),
                'padding-right': style.paddingright,
                'padding-left': style.paddingleft,
                'pointerEvents': 'none',
                'font-size': style.valuefontsize,
                'opacity': style.a,
                'color': style.valuecolor,
                'transition': 'opacity 0.2s linear,color 0.2s linear'
            });
            if (style.limitwidth == 1) {
                css(x, {
                    'max-width': style.limitmaxwidth + 'px!important'
                });
                css(xtitle, {
                    'max-width': (style.limitmaxwidth - 70) + 'px!important'
                })
            } else {
                if (style.floatleft == 1) {
                    if (style.floatlimitwidth == 1) {
                        css(x, {
                            'width': style.floatwidth
                        });
                        css(xtitle, {
                            'width': style.floatwidth - 70
                        })
                    }
                } else {
                    css(xtitle, {
                        'white-space': 'nowrap'
                    });
                    css(xvalue, {
                        'white-space': 'nowrap'
                    })
                }
            }
        }

        function Home() {
            for (var i = 1; i < f.length; i++) {
                if (exist(f[i])) {
                    if (style.floatleft == 1) {
                        f[i].style.display = "inline-block"
                    } else {
                        f[i].style.display = "block"
                    }
                }
            }
            Retimer();
            Remove2();
            Resize();
            open_action = '';
            open_settings = -1
        };

        function Remove2() {
            for (var j = 0; j < f2.length; j++) {
                if (f2[j]) {
                    if (style.floatleft == 1) {
                        control.removeChild(f2[j])
                    } else {
                        control2.removeChild(f2[j])
                    }
                    f2[j] = null
                }
            }
            f2 = [];
            open_action = ''
        }

        function Width() {
            return control.offsetWidth
        };
        this.resizePlaylist = function () {
            ResizePlaylist()
        };

        function ResizePlaylist() {
            if (is == "playlist") {
                if (style.floatleft == 1 || style.width100 == 1) {
                    var x = o.screen_w - style.marginright - style.marginleft;
                    css(container, {
                        'width': x
                    });
                    css(control, {
                        'width': x
                    });
                    control2 ? css(control2, {
                        'width': x
                    }) : ''
                }
            }
        }

        function Resize() {
            if (!removed) {
                if (is == "settings") {
                    o.controls ? o.controls.resizeSettings() : '';
                    var x = style.nohead == 1 && f.length > 1 ? f[1] : f[0]
                }
                if (is == "playlist") {
                    ResizePlaylist();
                    o.controls ? o.controls.resizePlaylist() : '';
                    var x = f[0];
                    if (v.change2playlist == 1) {
                        MainUpdateSize()
                    }
                }
                f.length > 1 && !x ? (f[1] ? x = f[1] : '') : '';
                f.length > 2 && !x ? (f[2] ? x = f[2] : '') : '';
                if (x) {
                    x.offsetWidth == 0 && f2.length > 0 ? x = f2[0] : ''
                }
                if (control.offsetWidth - control.clientWidth > 0 && x && style.floatleft != 1) {
                    if (exist(arr_up)) {
                        css(arr_up, {
                            "width": control2.offsetWidth
                        })
                    }
                    if (exist(arr_down)) {
                        css(arr_down, {
                            "width": control2.offsetWidth
                        })
                    }
                    style.scrollwidth = (control.offsetWidth - x.offsetWidth) - (control.clientWidth - x.clientWidth)
                } else {
                    style.scrollwidth = 0
                }
            }
        };

        function VisibleItems() {
            var x = 0;
            var y = 0;
            var z = '';
            for (var i = 1; i < f.length; i++) {
                if (exist(f[i])) {
                    if (f[i].style.visibility == "visible") {
                        x++;
                        y = i;
                        z = faction[i]
                    }
                }
            }
            return [x, y, z]
        }
        this.SubOpt = function () {
            sub_settings_on = true;
            this.show();
            _cstm = 2;
            SubtitleSettingsMenu()
        };

        function SubtitleSettings(x) {
            sub_settings_on = !sub_settings_on;
            SubtitleSettingsMenu(x)
        }

        function SubtitleSettingsMenu() {
            Home();
            for (var i = 0; i < faction.length; i++) {
                if (faction[i] == "subtitle") {
                    Action(i, _cstm)
                }
            }
        }

        function Retimer() {
            clearTimeout(settimer);
            settimer = setTimeout(function () {
                o.setaction = false
            }, 2000)
        }

        function SubtitleTimerMenu() {
            var x = open_action;
            Home();
            for (var i = 0; i < faction.length; i++) {
                if (faction[i] == x) {
                    Action(i, 0)
                }
            }
        }

        function HideControl(x) {
            if ((is == 'playlist' && v.playlist.always2 == 1) || (is == 'settings' && v.settings.always == 1)) {
                return
            }
            if (is == 'playlist' && v.playlist.droplist == 1 && v.playlist.dropnohide != 1) {
                o.droplist ? o.droplist.Hide() : '';
                is_visible = false
            } else {
                if ((x != 1 || (style.hidesmoothly == 1 && style.always == 1)) && !o.system.tv) {
                    var m = new Motion({
                        "mc": container,
                        "type": "alpha_div",
                        "to": 0,
                        "time": 0.1,
                        "me": is,
                        "ease": "elastic"
                    });
                    hidetimeout = setTimeout(function () {
                        css(container, {
                            "visibility": "hidden",
                            "opacity": 0,
                            "top": -2000
                        });
                        is_visible = false
                    }, 200)
                } else {
                    css(container, {
                        "visibility": "hidden",
                        "opacity": 0,
                        "top": -2000
                    });
                    is_visible = false
                }
            }
            if (is == 'playlist') {
                if (v.playlist.hidecontrol == 1 && o.controls) {
                    o.controls.toggleControl("action", "playlist", true)
                }
            }
            clearInterval(wheelinterval)
        };
        this.c = function () {
            return container
        };
        this.co = function () {
            if (container.contains(control)) {
                return control
            }
        };
        this.s = function (key) {
            return style[key]
        };
        this.ss = function (key) {
            return style
        };
        this.show = function () {
            Home();
            clearTimeout(hidetimeout);
            is_visible = true;
            if (is == 'playlist' && v.playlist.droplist == 1) {
                o.droplist ? o.droplist.Show() : ''
            } else {
                css(container, {
                    "visibility": "visible",
                    "opacity": 1,
                    "transition": "opacity 0.2s linear"
                });
                var x = VisibleItems();
                if (x[0] == 1) {
                    if (x[2] == "quality" || x[2] == "audiotrack" || x[2] == "subtitle" || x[2] == "speed" || x[2] == "scale" || x[2].indexOf("timer") > 0) {
                        Action(x[1], 0)
                    }
                }
            }
            if (o.controls) {
                is == 'settings' ? o.controls.resizeSettings() : '';
                if (is == 'playlist') {
                    o.controls.resizePlaylist();
                    if (v.playlist.hidecontrol == 1) {
                        o.controls.toggleControl("action", "playlist", false)
                    }
                }
            }
            if (o.system.safari) {
                css(control, {
                    'min-width': 'auto'
                });
                if (style.floatleft != 1) {
                    css(control2, {
                        'min-width': 'auto'
                    })
                }
            }
            justshow = true;
            clearInterval(showinterval);
            showinterval = setInterval(ShowTimeout, 100)
        };

        function ShowTimeout() {
            clearInterval(showinterval);
            justshow = false
        }
        this.open = function (i) {
            Action(i, 1)
        };
        this.hide = function (x) {
            HideControl(x)
        };
        this.SetQuality = function () {
            for (var i = 0; i < faction.length; i++) {
                if (faction[i] == "quality") {
                    Value(i);
                    if (o.files_quality.length > 1) {
                        show(f[i])
                    }
                    if (open_action == 'quality') {
                        Remove2();
                        Action(i, _cstm)
                    }
                }
            }
        };
        this.Airplay = function () {
            for (var i = 0; i < faction.length; i++) {
                if (faction[i] == "airplay") {
                    Value(i)
                }
            }
        };
        this.SetSetting = function (x) {
            for (var i = 0; i < faction.length; i++) {
                if (faction[i] == x) {
                    Value(i);
                    if (o['files_' + x]) {
                        if (o['files_' + x].length > 1) {
                            show(f[i])
                        }
                    }
                    if (open_action == x) {
                        Remove2();
                        Action(i, _cstm)
                    }
                }
            }
        };
        this.SetSubtitle = function () {
            for (var i = 0; i < faction.length; i++) {
                if (faction[i] == "subtitle") {
                    Value(i);
                    if (o.files_subtitle) {
                        if (o.files_subtitle.length > 0) {
                            var x = false;
                            if (o.subs) {
                                for (var y = 0; y < o.subs.length; y++) {
                                    if (o.subs[y] != '') {
                                        x = true;
                                        break
                                    }
                                }
                            } else {
                                x = true
                            }
                            x ? show(f[i]) : ''
                        }
                    }
                    if (open_action == 'subtitle') {
                        Remove2();
                        Action(i, 0)
                    }
                }
            }
        };
        this.updatePlaylist = function (x) {
            o.playlist = x;
            UpdatePlaylist(0);
            if (exist(v.plstart)) {
                if (v.plstart.indexOf("x-") != 0) {
                    for (var y in o.playlist_dic) {
                        if (o.playlist_dic.hasOwnProperty(y)) {
                            if (o.playlist_dic[y].pjs_id == v.plstart) {
                                v.plstart = y
                            }
                        }
                    }
                }
                if (exist(o.playlist_dic[v.plstart])) {
                    FindPlStart(o.playlist_dic[v.plstart]);
                    var y = o.playlist_dic[v.plstart]['pjs_i'];
                    ActionPlaylist(y);
                    if (v.playlist.openplaylistroot == 1 && style.droplist != 1) {
                        UpdatePlaylist(0);
                        setTimeout(function () {
                            Resize()
                        }, 500)
                    } else {
                        setTimeout(function () {
                            ScrollTo(y);
                            Resize()
                        }, 500)
                    }
                    v.plstart = undefined
                } else {
                    ActionPlaylist(0)
                }
            } else {
                ActionPlaylist(0)
            }
            if (style.droplist == 1) {
                if (!exist(o.droplist)) {
                    o.droplist = new PluginDroplist()
                }
            }
        };
        this.playById = function (x) {
            if (exist(o.playlist_dic[x])) {
                FindPlStart(o.playlist_dic[x]);
                Action(o.playlist_dic[x]['pjs_i'], 0);
                ScrollTo(o.playlist_dic[x]['pjs_i'])
            }
        };
        this.openById = function (x) {
            if (exist(o.playlist_dic[x])) {
                FindPlStart(o.playlist_dic[x]);
                if (o.playlist_dic[x]["file"]) {
                    ActionPlaylist(o.playlist_dic[x]['pjs_i']);
                    UpdateVars0(x);
                    o.actions.NewFile(o.playlist_dic[x]["file"], 1);
                    UpdateVars(x);
                    ScrollTo(o.playlist_dic[x]['pjs_i']);
                    if (o.droplist) {
                        o.droplist.Update()
                    }
                } else if (o.playlist_dic[x]["folder"]) {
                    UpdatePlaylist(x)
                }
            }
        };

        function showById(x) {
            if (exist(o.playlist_dic[x])) {
                plfolder = '';
                UpdatePlaylist(0);
                FindPlStart(o.playlist_dic[x]);
                UpdateVars0(x);
                Action(o.playlist_dic[x]['pjs_i'], 0);
                UpdateVars(x)
            }
        };
        this.PlaylistNext = function () {
            autonextopenfolder = true;
            x = parseInt(plx) + 1;
            if (plid != '') {
                o.plhistory[plid] = true;
                shuffle = removebykey(shuffle, plid)
            }
            if (v.shuffle == 1) {
                x = Shuffle(shuffle);
                if (x == null) {
                    if (v.shuffle8 == 1 || v.playlist.autoplaylist == 1) {
                        shuffle_.sort(function (a, b) {
                            return Math.random() - 0.5
                        });
                        for (var x in shuffle_) {
                            if (shuffle_.hasOwnProperty(x)) {
                                shuffle[x] = shuffle_[x]
                            }
                        }
                        x = Shuffle(shuffle)
                    } else {
                        o.actions.ShuffleEnd()
                    }
                }
            } else {
                if ((faction[x] == "playlistfolder" || plx == -1) && plid != '') {
                    var y = Object.keys(o.playlist_dic).indexOf(plid);
                    if (y < Object.keys(o.playlist_dic).length) {
                        var z = o.playlist_dic[Object.keys(o.playlist_dic)[y + 1]];
                        if (z) {
                            if (exist(z.folder)) {
                                z = o.playlist_dic[Object.keys(o.playlist_dic)[y + 2]]
                            }
                            this.openById(z.id);
                            x = -1;
                            o.actions.Play()
                        }
                    }
                }
            }
            if (x > -1) {
                Action(x, 0);
                ScrollTo(x)
            }
        };

        function ScrollTo(x) {
            if (f[x] && !removed) {
                if (style.floatleft == 1) {
                    var to = f[x].offsetLeft - 20;
                    var m = new Motion({
                        "mc": control,
                        "type": "scrollleft",
                        "to": to,
                        "time": 0.3,
                        "me": "scroll_left",
                        "ease": "cubic"
                    })
                } else {
                    var to = f[x].offsetTop - container.offsetHeight / 2 + 20;
                    var m = new Motion({
                        "mc": control,
                        "type": "scroll",
                        "to": to,
                        "time": 0.3,
                        "me": "scroll_down",
                        "ease": "cubic"
                    })
                }
                setTimeout(Arrows, 1000)
            }
        }

        function Shuffle(obj) {
            var keys = Object.keys(obj);
            var x;
            for (var i = 0; i < keys.length; i++) {
                x = obj[keys[keys.length * Math.random() << 0]];
                if (x) {
                    break
                }
            }
            return x
        };
        this.Scale = function () {
            Scale()
        };

        function Scale() {
            if (scale_i > -1) {
                Value(scale_i);
                if (open_action == 'scale') {
                    f2value[0].innerHTML = Math.round(o.mediascale.x * 100) + '%'
                }
            }
        };
        this.PlaylistNextExist = function () {
            if (v.shuffle == 1) {
                return Object.keys(shuffle).length > 0
            }
            var x = false;
            if (o.playlist_dic) {
                x = Object.keys(o.playlist_dic).indexOf(plid) < Object.keys(o.playlist_dic).length - 1
            }
            return x
        };
        this.PlaylistRewind = function () {
            if (exist(o.pl_first_id)) {
                showById(o.pl_first_id)
            }
        };
        this.PlaylistPrevExist = function () {
            var x = plx > 0;
            if (o.playlist_dic) {
                var y = Object.keys(o.playlist_dic);
                var z = y.indexOf(plid);
                x = z > 0;
                if (z == 1) {
                    if (exist(o.playlist_dic[y[0]].folder)) {
                        x = false
                    }
                }
            }
            return x
        };
        this.PlaylistExist = function () {
            return exist(o.playlist_dic)
        };
        this.PlaylistPrev = function () {
            autoprevopenfolder = true;
            if (this.PlaylistPrevExist()) {
                var x = parseInt(plx) - 1;
                if (x < 0) {
                    var y = Object.keys(o.playlist_dic).indexOf(plid);
                    if (y > 0) {
                        var z = o.playlist_dic[Object.keys(o.playlist_dic)[y - 1]];
                        if (z) {
                            if (exist(z.folder)) {
                                z = o.playlist_dic[Object.keys(o.playlist_dic)[y - 2]]
                            }
                            if (z) {
                                this.openById(z.id);
                                o.actions.Play()
                            }
                        }
                    }
                } else {
                    Action(x, 0);
                    ScrollTo(x)
                }
            }
        };
        this.PlaylistHere = function () {
            if (plx > 0) {
                ScrollTo(plx)
            }
        };

        function FindPlStart(x) {
            if (x['pjs_parent_i'] != -1) {
                FindPlStart(o.playlist_dic[x['pjs_parent']]);
                UpdatePlaylist(x['pjs_parent'])
            } else {
                UpdatePlaylist(0)
            }
        };
        this.g = function (x) {
            switch (x) {
                case "width":
                    return Width();
                    break;
                case "height":
                    return container.offsetHeight;
                    break;
                case "top":
                    return container.offsetTop;
                    break;
                case "scroll_height":
                    return control.scrollHeight;
                    break;
                case "margin_bottom":
                    return style.marginbottom;
                    break;
                case "x":
                    return int(container.style.left);
                    break;
                case "y":
                    return int(container.style.top);
                    break;
                case "opacity":
                    return container.style.opacity;
                    break;
                case "show":
                    return is_visible;
                    break;
                case "open":
                    return open_settings;
                    break;
                case "key":
                    return key;
                    break;
                case "motion_id":
                    return key + motion_id;
                    break;
                case "empty":
                    return empty;
                    break;
                case "playlist":
                    return is == "playlist";
                    break;
                case "activeicon":
                    return _activeIcon;
                    break;
                case "butplstart":
                    return o.playlist_dic[o.butplstart] ? o.playlist_dic[o.butplstart].title : '';
                case "title2":
                    return v.title2 ? v.title2 : ''
            }
        };
        this.empty = function () {
            if (is == "settings") {
                var x = 0;
                for (var i = 1; i < 11; i++) {
                    if (faction[i] == "quality") {
                        var y = o.files_quality.length;
                        if (exist(v.forbidden_quality)) {
                            var z = v.forbidden_quality.split(",");
                            for (var j = 0; j < z.length; j++) {
                                if (o.files_quality.indexOf(z[j]) > -1) {
                                    y--
                                }
                            }
                        }
                        if (y > 0) {
                            if (y > 1 || (y == 1 && o.files_quality != 1 && style.show1value == 1)) {
                                x++
                            }
                        }
                    }
                    if (faction[i] == "airplay") {
                        if (o.airplay) {
                            x++
                        }
                    }
                    if (faction[i] == "download") {
                        if (o.file_type == 'native' || v.download) {
                            x++
                        }
                    }
                    if (faction[i] == "audiotrack") {
                        if (o.files_audiotrack.length > 0) {
                            x++
                        }
                    }
                    if (faction[i] == "channel" && v.channels == 1) {
                        if (o.files_channel.length > 0) {
                            x++
                        }
                    }
                    if (faction[i] == "subtitle") {
                        if (exist(o.subs)) {
                            for (var s = 0; s < o.subs.length; s++) {
                                if (o.subs[s] != '') {
                                    x++;
                                    break
                                }
                            }
                        }
                        if (x == 1 && o.subload == 1) {
                            x = 0
                        }
                    }
                    if (faction[i] == "speed") {
                        if (o.file_type != "vimeo") {
                            x++
                        }
                    }
                    if (faction[i] == "scale") {
                        x++
                    }
                    if (faction[i]) {
                        if (faction[i].indexOf("timer") > 0) {
                            x++
                        }
                    }
                    if (v.settings[is + i + 'hide'] == 1) {
                        x--
                    }
                }
                return x == 0
            } else if (is == "playlist") {
                return f.length == 0
            } else {
                return empty
            }
        };
        this.Remove = function () {
            if (container.parentNode == o.frame) {
                container.removeChild(control);
                o.frame.removeChild(container);
                o.droplist ? o.droplist.Remove() : '';
                container = null;
                control = null;
                removed = true
            }
        }
    };
    var Share = function (url) {
        var control;
        var icon;
        var answer;
        var created = false;
        var open = false;
        var clr = v.shareclred == 1 && exist(v.sharecolor) ? CheckColor(v.sharecolor) : "#ffffff";
        var bgclr = v.shareclred == 1 && exist(v.sharebgcolor) ? CheckColor(v.sharebgcolor) : "#000000";
        var sh = [];
        var other = ["whatsapp", "viber", "telegram", "reddit", "webshare", "tumblr", "pinterest", "ok"];
        for (var i = 1; i <= 15; i++) {
            if (exist(v["share" + i])) {
                AddPlgn(v["share" + i])
            }
        }
        this.Show = function () {
            if (!created) {
                control = createElement("div");
                css(control, {
                    "position": "absolute",
                    "width": "100%",
                    "height": "100%",
                    "background": hex2rgb(bgclr, 0.8),
                    "color": clr
                });
                control.style.zIndex = "2000";
                var close = createElement("div");
                css(close, {
                    "position": "absolute",
                    "top": 15,
                    "right": 15,
                    "cursor": "pointer",
                    "padding": 5
                });
                close.innerHTML = "<svg width='20' height='20' xmlns:xlink='http://www.w3.org/1999/xlink' xmlns='http://www.w3.org/2000/svg'><g><path d='M16.5,3.5 L3.5,16.5 L16.5,3.5 Z' stroke='" + clr + "' stroke-width='3' stroke-linecap='square'></path><path d='M3.5,3.5 L16.5,16.5 L3.5,3.5 Z' stroke='" + clr + "' stroke-width='3' stroke-linecap='square'></path></g></svg>";
                if (o.system.mobile) {
                    close.addEventListener("touchend", function (event) {
                        Close()
                    })
                } else {
                    close.onclick = Close
                }
                close.style.zIndex = 10;
                var icons = createElement("div");
                css(icons, {
                    "position": "absolute",
                    "top": ((v.sharetop * 100) + '%'),
                    "left": 0,
                    "width": "100%",
                    "text-align": "center",
                    "color": clr
                });
                icons.innerHTML = (v.sharetitle == 1 ? Lang("share") + '<br><br>' : '') + (exist(v.url) ? '<a href="' + v.url + '" style="text-decoration:none;color:' + clr + ';outline:0;white-space: nowrap;letter-spacing:1px;display:block" target="_blank" id="pjs_share_link_' + v.id + '">' + v.url + '</a>' : '');
                o.frame.appendChild(control);
                control.appendChild(close);
                control.appendChild(icons);
                css(o.container, {
                    '-webkit-user-select': 'auto'
                });
                if (exist(v.url)) {
                    SelectText("pjs_share_link_" + v.id)
                }
                icon = [];
                if (!exist(v.share1)) {
                    v.share1 = "facebook"
                }
                if (!exist(v.share2)) {
                    v.share2 = "twitter"
                }
                if (!exist(v.share3)) {
                    if (v.lang == "ru") {
                        v.share3 = "vk"
                    }
                    if (v.lang == "en") {
                        v.share3 = "google"
                    }
                }
                if (exist(v.embed)) {
                    v.share15 = "embed"
                }
                var svg;
                for (var i = 1; i <= 15; i++) {
                    if (exist(v["share" + i])) {
                        svg = IconSVG(v["share" + i]);
                        if (v["share" + i] != "" && svg && svg != '') {
                            icon[i] = createElement("div");
                            css(icon[i], {
                                "display": "inline-block",
                                "cursor": "pointer"
                            });
                            var m = ((v.shareiconscale * 20 - 20) + v.shareiconmargin * 1) / 2;
                            var mlr = 0;
                            if (v["share" + i] == "vk" || v["share" + i] == "embed") {
                                mlr = v.shareiconscale * 3
                            }
                            css(icon[i], {
                                "margin-left": m + mlr,
                                "margin-right": m + mlr,
                                "margin-top": m + 20,
                                "width": 20,
                                "height": 20
                            });
                            icon[i].innerHTML = "<svg width='20' height='20' xmlns:xlink='http://www.w3.org/1999/xlink' xmlns='http://www.w3.org/2000/svg'><g>" + svg + "</g></svg>";
                            icons.appendChild(icon[i]);
                            scale(i, v.shareiconscale);
                            icon[i].i = "i" + i;
                            icon[i].onmouseover = onOver;
                            icon[i].onmouseout = onOut;
                            icon[i].onclick = onClick
                        }
                    }
                }
                answer = createElement("div");
                css(answer, {
                    "display": "block",
                    "width": "100%",
                    "text-align": "center",
                    "margin-top": m + 15
                });
                icons.appendChild(answer);
                created = true
            } else {
                show2(control);
                css(o.container, {
                    '-webkit-user-select': 'auto'
                });
                if (exist(v.url)) {
                    SelectText("pjs_share_link_" + v.id)
                }
            }
            if (o.play) {
                o.noads = true;
                o.actions.Pause()
            }
            open = true
        };

        function Close() {
            if (o.noads) {
                o.actions.Play()
            }
            Hide()
        }

        function Hide() {
            if (exist(control)) {
                hide2(control);
                o.noads = false;
                open = false;
                answer.innerHTML = '';
                css(o.container, {
                    '-webkit-user-select': 'none'
                })
            }
        }
        this.Hide = function () {
            Hide()
        };

        function onOver() {
            if (exist(this.i)) {
                var i = this.i.substr(1) * 1;
                if (v.shareiconscaleover > -1) {
                    scale(i, v.shareiconscaleover)
                }
            }
        }

        function onOut() {
            if (exist(this.i)) {
                var i = this.i.substr(1) * 1;
                if (v.shareiconscaleover > -1) {
                    scale(i, v.shareiconscale)
                }
            }
        }

        function onClick(e) {
            if (exist(this.i)) {
                var i = this.i.substr(1) * 1;
                ClickAction(v["share" + i])
            }
        }
        this.api = function (x) {
            if (x.indexOf("url") > -1) {
                if (v[x]) {
                    var y = v[x].replace("{time}", parseInt(o.media.time()));
                    copy(y);
                    o.alert.txt(Lang("copied"), 2)
                }
            }
            ClickAction(x, true)
        };

        function AddPlgn(x) {
            if (url(x) == '') {
                try {
                    sh[x] = eval('new PluginShare_' + x + '()')
                } catch (e) { }
            }
        }

        function ClickAction(y, z) {
            var x = url(y);
            if (other.indexOf(y) > -1) {
                if (sh[y]) {
                    x = sh[y].share()
                }
            }
            if (y == "embed" && exist(v.embed)) {
                if (exist(v.embedvars)) {
                    v.embedvars = v.embedvars.replace(/pjs'qt/ig, '"')
                }
                copy((exist(v.embedhtmlstart) ? v.embedhtmlstart.replace(/pjs'qt/ig, '"') : '') + '<iframe width="' + (v.embedsize == 1 ? v.embedwidth : parseInt(o.normal_w)) + '" height="' + (v.embedsize == 1 ? v.embedheight : parseInt(o.normal_h)) + '" src="' + v.embed + '" frameborder="0" allowfullscreen' + (exist(v.embedvars) ? ' ' + v.embedvars : '') + '></iframe>' + (exist(v.embedhtmlend) ? v.embedhtmlend.replace(/pjs'qt/ig, '"') : ''));
                if (z) {
                    o.alert.txt(Lang("copied"), 2)
                } else {
                    answer.innerHTML = Lang("copied");
                    if (exist(v.url)) {
                        SelectText("pjs_share_link_" + v.id)
                    }
                }
            }
            x != '' ? Pop(x, 'Share', 500, 500) : ''
        }

        function url(y) {
            var x = '';
            if (y == "facebook") {
                x = "https://www.facebook.com/sharer/sharer.php?u="
            }
            if (y == "twitter") {
                x = "https://twitter.com/home?status="
            }
            if (y == "google") {
                x = "https://plus.google.com/share?url="
            }
            if (y == "vk") {
                x = "https://vk.com/share.php?url="
            }
            return x
        }

        function scale(i, x) {
            css(icon[i], {
                "transform-origin": '50% 50% 0px'
            });
            css(icon[i], {
                "transform": "scale(" + x + ")",
                "transition": "transform 0.1s linear"
            })
        }

        function Pop(url, title, winWidth, winHeight) {
            var winTop = (screen.height / 2) - (winHeight / 2);
            var winLeft = (screen.width / 2) - (winWidth / 2);
            window.open(url + encodeURIComponent(exist(v.url) ? v.url : o.href), 'sharer', 'top=' + winTop + ',left=' + winLeft + ',toolbar=0,status=0,width=' + winWidth + ',height=' + winHeight)
        }

        function SelectText(element) {
            var doc = document,
                text = doc.getElementById(element),
                range, selection;
            if (text) {
                if (doc.body.createTextRange) {
                    range = document.body.createTextRange();
                    range.moveToElementText(text);
                    range.select()
                } else if (window.getSelection) {
                    selection = window.getSelection();
                    range = document.createRange();
                    range.selectNodeContents(text);
                    selection.removeAllRanges();
                    selection.addRange(range)
                }
            }
        }

        function IconSVG(x) {
            if (x == "facebook") {
                return "<path d='M14,6.87798468 L11.616046,6.87798468 L11.616046,5.31446009 C11.616046,4.72728083 12.005212,4.59038667 12.2793122,4.59038667 L13.9616447,4.59038667 L13.9616447,2.00904312 L11.6447345,2 C9.0727459,2 8.48743763,3.92524947 8.48743763,5.15729686 L8.48743763,6.87798468 L7,6.87798468 L7,9.53790984 L8.48743763,9.53790984 L8.48743763,17.0645937 L11.616046,17.0645937 L11.616046,9.53790984 L13.7271472,9.53790984 L14,6.87798468 Z' fill='" + clr + "' fill-rule='nonzero'></path>"
            }
            if (x == "twitter") {
                return "<path d='M7.90342661,15.0933314 C12.5898759,15.0933314 15.153204,11.209383 15.153204,7.84355402 C15.153204,7.73447623 15.153204,7.62539844 15.1454127,7.51242501 C15.644054,7.15013093 16.0725739,6.7060285 16.4153898,6.19180463 C15.9518092,6.3982733 15.4570635,6.53462054 14.950631,6.59305507 C15.484333,6.27361297 15.8816878,5.77497165 16.0725739,5.18283508 C15.5739326,5.47890336 15.024648,5.68926767 14.4558853,5.8022411 C13.4897677,4.777689 11.8769747,4.72704574 10.8524226,5.69316331 C10.1901646,6.31646496 9.90967882,7.24362617 10.1161475,8.1279354 C8.0670433,8.02664888 6.15818198,7.05663568 4.86483105,5.46721646 C4.1869905,6.63201142 4.53370204,8.12014413 5.65174939,8.86810611 C5.24660331,8.85641921 4.84924851,8.74734142 4.49474569,8.54866401 L4.49474569,8.5798291 C4.49474569,9.79137169 5.35178546,10.835402 6.53995424,11.0769314 C6.16597325,11.1782179 5.77251408,11.1938004 5.39074182,11.1197833 C5.72576646,12.1560223 6.68019712,12.8689236 7.77097501,12.8884018 C6.86718761,13.5974074 5.7530359,13.9830753 4.60771911,13.9830753 C4.40514608,13.9830753 4.20257304,13.9713884 4,13.9480146 C5.16089933,14.6959766 6.51658043,15.0933314 7.90342661,15.0933314' fill='" + clr + "' fill-rule='nonzero'></path>"
            }
            if (x == "google") {
                return "<path d='M10.0259804,8.81389961 L10.0259804,11.1907336 C10.0259804,11.1907336 12.3404412,11.1861004 13.2857843,11.1861004 C12.7735294,12.7243243 11.9818627,13.5629344 10.0259804,13.5629344 C8.04681373,13.5629344 6.50539216,11.969112 6.50539216,10 C6.50539216,8.03088803 8.05147059,6.43706564 10.0259804,6.43706564 C11.0737745,6.43706564 11.7490196,6.8030888 12.3683824,7.31274131 C12.8666667,6.81698842 12.8247549,6.74749035 14.0867647,5.56138996 C13.0156863,4.59305019 11.5906863,4 10.0306373,4 C6.70098039,4 4,6.68725869 4,10 C4,13.3127413 6.70098039,16 10.0306373,16 C15.0088235,16 16.2242647,11.6864865 15.8191176,8.81389961 L10.0259804,8.81389961 Z' fill='" + clr + "' fill-rule='nonzero'></path>"
            }
            if (x == "vk") {
                return "<path d='M18.927,13.749c-0.404-0.825-1.079-1.521-1.782-2.104h-0.012c-0.371-0.358-0.619-0.606-0.718-0.729 c-1.075-1.356,3.121-3.642,2.562-5.222l-0.05-0.087c-0.446-0.593-3.051-0.21-3.675-0.136c-0.073,0.033-0.127,0.077-0.186,0.136 c-0.962,1.291-1.164,2.901-2.426,3.997c-0.099,0.074-0.173,0.111-0.234,0.099c-0.05-0.012-0.1-0.025-0.148-0.037 c-0.963-0.546-0.054-3.303-0.396-4.219c-0.037-0.086-0.099-0.161-0.186-0.21c-0.074-0.049-0.174-0.086-0.297-0.124 c-1.102-0.18-2.203-0.146-3.304,0.099C7.952,5.273,7.84,5.36,7.741,5.472C7.63,5.595,7.618,5.669,7.692,5.682 c0.358,0.05,0.606,0.186,0.754,0.384C8.759,7.021,8.998,8.54,8.483,9.468C8.434,9.58,8.397,9.641,8.372,9.666 C8.36,9.691,8.335,9.703,8.323,9.715C8.135,9.802,7.958,9.777,7.791,9.641C7.667,9.555,7.556,9.443,7.419,9.307 C6.629,8.357,6.06,7.026,5.588,5.892c-0.05-0.124-0.124-0.223-0.21-0.285C5.261,5.534,5.13,5.474,4.994,5.447L2.569,5.459 c-0.248,0-0.421,0.062-0.507,0.173L2.025,5.682C1.984,5.806,1.993,5.93,2.049,6.053c1.343,3.101,3.321,7.416,6.966,8.439 c0.676,0.187,1.577,0.177,2.301,0.148c0.211-0.013,0.359-0.087,0.471-0.198l0.037-0.05c0.025-0.037,0.05-0.086,0.062-0.16 c0.149-0.455,0.022-0.938,0.247-1.387c0.062-0.099,0.124-0.186,0.186-0.26c0.059-0.078,0.133-0.127,0.223-0.148 c0.786-0.282,2.035,1.913,2.896,2.203C15.941,14.808,19.585,15.092,18.927,13.749C18.902,13.699,18.951,13.799,18.927,13.749z' fill='" + clr + "' fill-rule='nonzero'/></path>"
            }
            if (other.indexOf(x) > -1) {
                if (!sh[x]) {
                    AddPlgn(x)
                }
                return sh[x] ? sh[x].icon(clr) : ''
            }
            if (x == "embed") {
                return "<path d='M7.33571875,13.976 L1,10.6265714 L1,9.16114286 L7.33571875,5.798 L7.33571875,7.694 L2.90490625,9.91628571 L7.33571875,12.0785714 L7.33571875,13.976 Z M12.1411563,4 L9.4526875,16 L7.883875,16 L10.5723438,4 L12.1411563,4 Z M17.0956563,9.91628571 L12.6642813,7.69428571 L12.6642813,5.79828571 L19,9.16114286 L19,10.6265714 L12.6642813,13.976 L12.6642813,12.0785714 L17.0956563,9.91628571 Z' fill='" + clr + "' fill-rule='nonzero'></path>"
            }
        }

        function copy(x) {
            var textArea = document.createElement('textarea');
            textArea.setAttribute('style', 'width:1px;border:0;opacity:0;');
            document.body.appendChild(textArea);
            textArea.value = x;
            textArea.select();
            document.execCommand('copy');
            document.body.removeChild(textArea)
        };
        this.empty = function () {
            var x = true;
            for (var i = 1; i <= 15; i++) {
                if (exist(v["share" + i])) {
                    if (v["share" + i] != "") {
                        x = false
                    }
                } else {
                    i < 4 ? x = false : ''
                }
            }
            if (exist(v["embed"])) {
                v["embed"] != '' ? x = false : ''
            }
            if (exist(v["url"])) {
                v["url"] != '' ? x = false : ''
            }
            return x
        };
        this.Remove = function () {
            if (created) {
                o.frame.removeChild(control);
                control = null;
                created = false
            }
        };
        this.isOpen = function () {
            return open
        }
    };
    var MediaYoutube = function (url, parentcontainer) {
        var intro = false;
        if (url.indexOf('intro') == 0) {
            intro = true;
            url = url.substr(5)
        }
        var youtube_id = YoutubeID(url);
        var error;
        var player;
        var created = false;
        var ready = false;
        var started = false;
        var vastonmobile = false;
        var auto = true;
        var _set_quality = [];
        var _speed = 1;
        var _wait = false;
        var startwait_t;
        var _start = 0;
        var _readyonplay = 0;
        var quality_received = false;
        var container_id = 'pljs_yt_' + v.id + (intro ? 'intro' : '');
        var container = createElement('div');
        container.setAttribute('id', container_id);
        parentcontainer.appendChild(container);
        o.airplay = false;
        !intro ? o.actions.AirplayChanged() : '';
        if (o.system.mobile) {
            v.preload = 1
        }
        if (v.youtubecontrols != 1) {
            var layer = createElement('div');
            parentcontainer.appendChild(layer);
            css(layer, {
                position: "absolute",
                top: 0,
                left: 0,
                "background-color": "#ff0000",
                height: "100%",
                width: "100%",
                "opacity": 0
            });
            layer.addEventListener("dblclick", function (event) {
                event.cancelBubble = true
            });
            if (o.system.mobile) {
                layer.addEventListener("touchstart", function (event) {
                    event.cancelBubble = true
                });
                layer.addEventListener("click", function (event) {
                    event.cancelBubble = true
                });
                layer.addEventListener("touchend", function (event) {
                    event.cancelBubble = true;
                    ScreenClick(event);
                    if (v.screenclick == 1) {
                        setTimeout(HideLayer, 100);
                        setTimeout(ShowLayer, 1000)
                    }
                })
            } else {
                layer.addEventListener("mousemove", function (event) {
                    var x = true;
                    if (v.vast == 1) {
                        if (exist(v.preroll) && !started) {
                            x = false
                        }
                        if (exist(v.playroll) && Status() == "paused" && time() > 0) {
                            x = false
                        }
                    }
                    if (x && v.screenclick == 1 && v.ytcl != 1) {
                        hide2(this);
                        setTimeout(ShowLayer, 2000)
                    }
                })
            }
            v.screenclick == 1 && v.ytcl1 != 1 ? hide2(layer) : ''
        }

        function ShowLayer() {
            show2(layer)
        }

        function HideLayer() {
            if (v.ytcl != 1) {
                hide2(layer)
            }
        }
        if (v.preload == 1 && v.autoplay == 0) {
            onWaiting()
        }
        if (!window['YT']) {
            window.onYouTubeIframeAPIReady = function () {
                YouTubeIframeAPIReady();
                for (var i = 0; i < pljssglobal.length; i++) {
                    if (pljssglobal[i].api("id") != v.id) {
                        if (pljssglobal[i].api('isyoutube')) {
                            pljssglobal[i].api('youtubeready')
                        }
                    }
                }
            };
            var scrpt = Script("youtube.com/iframe_api", "youtube.com/iframe_api", "youtube_iframe_api");
            if (scrpt) {
                scrpt.onerror = function (e) {
                    o.actions.MediaReady();
                    if (v.yterrors != 1) {
                        error = 'YouTube API Error';
                        o.media.onError()
                    }
                }
            }
        } else {
            YouTubeIframeAPIReady()
        }

        function YouTubeIframeAPIReady() {
            if (v.preload == 1 || intro) {
                !created ? Init() : ''
            } else {
                o.actions.MediaReady()
            }
        }

        function Init() {
            if ("YT" in window) {
                if (exist(YT.Player) && !created) {
                    log("Youtube Init");
                    var cntrls = 0;
                    if (v.youtubecontrols == 1) {
                        cntrls = 1
                    }
                    o.seekto > 0 ? _start = parseInt(o.seekto) : '';
                    player = new YT.Player(container_id, {
                        height: o.container_h,
                        width: o.container_w,
                        videoId: youtube_id,
                        playerVars: {
                            enablejsapi: 1,
                            playerapiid: container_id,
                            html5: 1,
                            disablekb: 1,
                            autohide: 1,
                            playsinline: ((v.playsinlineonmobile == 0 || (v.playsinlineonmobileiphone != 1 && o.system.iphone)) && o.system.mobile ? 0 : 1),
                            iv_load_policy: 3,
                            controls: cntrls,
                            showinfo: 0,
                            modestbranding: 1,
                            rel: 0,
                            autoplay: 0,
                            loop: 0
                        },
                        events: {
                            'onReady': onYtPlayerReady,
                            'onStateChange': onYtPlayerStateChange,
                            'onError': onError,
                            'onPlaybackQualityChange': onQualityChanged
                        }
                    });
                    if (o.seekto > 0) {
                        o.seekto = undefined
                    }
                    Resize();
                    created = true
                } else {
                    setTimeout(Init, 500)
                }
            } else {
                setTimeout(Init, 500)
            }
        }
        var _play_i;

        function onYtPlayerReady() {
            log("Youtube Ready");
            ready = true;
            clearTimeout(startwait_t);
            o.actions.StopWaiting();
            if (intro) {
                if (o.system.mutedautoplay) {
                    o.actions.Mute()
                }
                player.playVideo();
                o.vast.ytReady()
            } else {
                if (v.autoplay == 1 && o.system.mutedautoplay && !o.acted) {
                    o.actions.Mute();
                    if (o.system.mobile) {
                        clearInterval(_play_i);
                        _play_i = setInterval(PlayingChecker, 300)
                    }
                }
                if (v.preload == 0) {
                    player.playVideo()
                } else {
                    o.actions.MediaReady()
                }
                o.media.onDuration();
                if (_speed != 1) {
                    SetSpeed(_speed)
                }
                onMeta();
                Resize()
            }
        }

        function PlayingChecker() {
            var x = player.getPlayerState();
            if (x == 2 || x == -1) {
                o.controls.Pause();
                o.controls.StopWaiting();
                clearInterval(_play_i)
            }
            if (x == 1) {
                clearInterval(_play_i)
            }
        }

        function onYtPlayerStateChange(event) {
            if (v.ytlog == 1) {
                log('YT', event.data)
            }
            if (intro) {
                if (event.data == YT.PlayerState.ENDED) {
                    o.vast.ytEnded()
                }
                if (event.data == YT.PlayerState.PLAYING) { }
            } else {
                if (event.data == YT.PlayerState.PLAYING) {
                    if (_readyonplay == 1) {
                        _readyonplay = 0;
                        onYtPlayerReady()
                    }
                    if (!o.play) {
                        o.actions.Play()
                    }
                    if (_start > 0) {
                        player.seekTo(_start, true);
                        _start = 0;
                        o.seekto = undefined
                    }
                    ShowLayer();
                    started = true;
                    ready = true;
                    if (vastonmobile) {
                        player.pauseVideo()
                    } else {
                        o.media.onPlay();
                        o.media.onTimeupdate()
                    }
                    Qualities();
                    if (exist(v.default_quality)) {
                        for (var i = 0; i < o.files_quality.length; i++) {
                            if (v.default_quality == o.files_quality[i]) {
                                SetQuality(i)
                            }
                        }
                        v.default_quality = null
                    } else {
                        if (exist(o.default_quality)) {
                            for (var i = 0; i < o.files_quality.length; i++) {
                                if (o.default_quality == o.files_quality[i]) {
                                    SetQuality(i)
                                }
                            }
                            o.default_quality = null
                        }
                    }
                    _wait = false
                }
                if (event.data == -1 && _wait && o.play) {
                    o.actions.StopWaiting();
                    _wait = false;
                    onPause()
                }
                if (event.data == YT.PlayerState.PAUSED) { }
                if (event.data == YT.PlayerState.ENDED) {
                    onEnded()
                }
                if (event.data == YT.PlayerState.BUFFERING) {
                    if (!o.play) { }
                    if (o.play) {
                        _wait = true;
                        onWaiting()
                    }
                }
                if (event.data == YT.PlayerState.CUED) { }
            }
        }

        function onError(event) {
            if (intro) {
                o.vast.ytError()
            } else {
                if (event.data == 2) {
                    error = "wrong youtube id"
                }
                if (event.data == 5) {
                    error = "network empty"
                }
                if (event.data == 101 || event.data == 150 || event.data == 100) {
                    error = "this video is unavailable"
                }
                if (v.customyterrors == 1) {
                    exist(v.customyterror) ? error = v.customyterror : ''
                }
                if (v.yterrors != 1) {
                    o.media.onError()
                } else {
                    hide(o.poster)
                }
            }
        }

        function onEnded() {
            v.start > 0 ? _start = v.start : '';
            o.media.onEnded();
            o.media.onDuration()
        }

        function onPause() {
            if (!o.nopause && o.play) {
                o.actions.Pause()
            }
        }

        function onTimeupdate() {
            o.media.onTimeupdate()
        }

        function onMeta() {
            o.media.onMeta();
            o.actions.LoadedData()
        }

        function onDuration() {
            o.media.onDuration()
        }

        function onVolume() {
            o.media.onVolume()
        }

        function onWaiting() {
            if (o.media) {
                o.media.onWaiting()
            } else {
                startwait_t = setTimeout(onWaiting, 100)
            }
        }

        function onQualityChanged(event) {
            SetCurrentQuality(event.data)
        }

        function Qualities() {
            if (!quality_received) {
                var x = player.getAvailableQualityLevels() + '';
                if (x != '' && x != undefined) {
                    o.files_quality = x.split(',');
                    o.files_quality = o.files_quality.reverse();
                    if (v.ytautoquality == 0) {
                        var y = o.files_quality.indexOf('auto');
                        if (y > -1) {
                            o.files_quality.splice(y, 1)
                        }
                    }
                    for (var i = 0; i < o.files_quality.length; i++) {
                        o.files_quality[i] = RenameQualities(o.files_quality[i])
                    }
                    quality_received = true;
                    SetCurrentQuality(player.getPlaybackQuality())
                }
            }
        }

        function SetCurrentQuality(x) {
            o.current_quality = o.files_quality.indexOf(RenameQualities(x + ''));
            o.controls.QualityChanged(o.current_quality)
        }
        this.size = function () {
            return {
                "width": 0,
                "height": 0
            }
        };
        this.src = function (x) {
            youtube_id = YoutubeID(x);
            if (o.seekto > 0) {
                _start = parseInt(o.seekto)
            }
            playById(youtube_id)
        };

        function Status() {
            var state = -1;
            if (ready) {
                state = player.getPlayerState()
            }
            var x = '';
            if (state == -1) {
                x = "paused"
            }
            if (state == 1 || state == 3) {
                x = "playing"
            }
            if (state == 2) {
                x = "paused";
                if (o.play) {
                    o.controls.Pause();
                    o.actions.StopWaiting()
                }
            }
            if (state == 5) {
                x = "paused"
            }
            if (state == 0) {
                x = "ended"
            }
            return x
        }

        function Resize() {
            player ? player.setSize(o.screen_w, o.screen_h) : ''
        }

        function RenameQualities(x) {
            var y = x;
            if (x == "tiny") {
                y = "160p"
            }
            if (x == "small") {
                y = "240p"
            }
            if (x == "medium") {
                y = "360p"
            }
            if (x == "large") {
                y = "480p"
            }
            if (x == "hd720") {
                y = "720p"
            }
            if (x == "hd1080") {
                y = "1080p"
            }
            if (v.nameofyoutubequality == 1) {
                y = Lang(y)
            }
            if (x == "auto") {
                y = Lang("auto")
            }
            _set_quality[y] = x;
            return y
        }

        function time() {
            return ready ? player.getCurrentTime() : 0
        };

        function SetSpeed(x) {
            player ? player.setPlaybackRate(x) : '';
            _speed = x
        };
        this.YoutubeReady = function () {
            YouTubeIframeAPIReady()
        };
        this.Play = function () {
            if (ready) {
                player.playVideo()
            } else {
                if (!created) {
                    Init()
                } else { }
            }
        };
        this.Pause = function () {
            if (ready) {
                player.pauseVideo()
            }
        };
        this.Toggle = function () {
            if (ready) {
                Status() == 'playing' ? player.pauseVideo() : player.playVideo()
            }
        };
        this.Seek = function (x) {
            ready ? player.seekTo(x, true) : ''
        };
        this.tag = function () {
            return false
        };
        this.Mute = function () {
            ready ? player.mute() : ''
        };
        this.Unmute = function () {
            ready ? player.unMute() : ''
        };
        this.Volume = function (x) {
            ready ? player.setVolume(x * 100) : ''
        };
        this.isPlaying = function () {
            return Status() == 'playing'
        };
        this.isLive = function () {
            return false
        };
        this.setQuality = function (x) {
            SetQuality(x)
        };

        function SetQuality(x) {
            if (ready) {
                if (exist(o.files_quality[x])) {
                    var y = _set_quality[o.files_quality[x]];
                    auto = y == 'auto';
                    var z = time();
                    player.setPlaybackQuality(y)
                }
            }
        }
        this.setSpeed = function (x) {
            SetSpeed(x)
        };
        this.ready = function () {
            return ready
        };
        this.status = function () {
            return Status()
        };
        this.time = function () {
            return time()
        };
        this.duration = function () {
            var x = ready ? player.getDuration() : 0;
            if (exist(v.end)) {
                x = v.end
            }
            return x
        };
        this.loaded = function () {
            var x = 0;
            if (ready) {
                x = player.getVideoLoadedFraction() * player.getDuration()
            }
            return x
        };
        this.resize = function () {
            Resize()
        };
        this.errorMessage = function () {
            return error
        };
        this.auto = function () {
            return v.ytautoquality == 1 ? auto : false
        };
        this.playId = function (x) {
            playById(x)
        };

        function playById(x) {
            url = x;
            if (player) {
                _readyonplay = 1;
                player.loadVideoById(x, 0)
            }
        }
        this.BeforeVast = function () {
            if (o.system.mobile && o.system.android) {
                this.Play();
                vastonmobile = true
            } else {
                if (Status() == "playing") {
                    this.Pause()
                }
            }
        };
        this.AfterVast = function () {
            vastonmobile = false
        };
        this.nativeControls = function () {
            return true
        };
        this.Remove = function () {
            ready ? player.destroy() : '';
            ready = false;
            quality_received = false;
            try {
                if (container) {
                    parentcontainer.removeChild(container)
                }
                parentcontainer.removeChild(layer)
            } catch (e) { }
        }
    };
    var PluginSub = function () {
        var sub = [];
        var upld = [];
        var empty = true;
        var ioff;
        var loading = -1;
        this.start = function (x) {
            Start(x)
        };

        function Start(x) {
            !x ? x = '' : '';
            if (x != '11') {
                var start = 0;
                var urlcnfg = true;
                var memory = '';
                o.subs = x.split(",");
                o.files_subtitle = [];
                o.current_subtitle = -1;
                if (StorageSupport() && v.sub_store == 1) {
                    if (localStorage.getItem("pljssubtitle") != null) {
                        memory = localStorage.getItem("pljssubtitle")
                    }
                } else {
                    if (o.remember_sub) {
                        memory = o.remember_sub
                    }
                }
                for (var i = 0; i < o.subs.length; i++) {
                    if (o.subs[i].indexOf("#0") == 0) {
                        o.subs[i] = fd0(o.subs[i])
                    }
                    if (o.subs[i].indexOf("#" + v.enc2) == 0) {
                        o.subs[i] = o[o.fd[0]](o.subs[i])
                    }
                    if (o.subs[i].indexOf("[") == 0 && o.subs[i].indexOf("]") > 1) {
                        o.files_subtitle[i] = o.subs[i].substr(o.subs[i].indexOf("[") + 1, o.subs[i].indexOf("]") - 1);
                        o.subs[i] = o.subs[i].substr(o.subs[i].indexOf("]") + 1);
                        urlcnfg = false
                    } else {
                        o.files_subtitle[i] = o.subs[i].substr(o.subs[i].lastIndexOf("/") + 1);
                        o.files_subtitle[i] = o.files_subtitle[i].substr(0, o.files_subtitle[i].lastIndexOf("."))
                    }
                    if (o.subs[i].indexOf("#0") == 0) {
                        o.subs[i] = fd0(o.subs[i])
                    }
                    if (o.subs[i].indexOf("#" + v.enc2) == 0) {
                        o.subs[i] = o[o.fd[0]](o.subs[i])
                    }
                }
                if (o.files_subtitle.length > 1 && v.sub_all == 1) {
                    o.files_subtitle.push(StringVar('sub_all_title', Lang('together')));
                    o.subs.push("all")
                }
                if (o.files_subtitle.length > 0 && v.sub_off == 1) {
                    if (v.sub_off0 == 1) {
                        ioff = 0;
                        start++;
                        o.files_subtitle.unshift(StringVar('sub_off_title', Lang('off')));
                        o.subs.unshift("")
                    } else {
                        o.files_subtitle.push(StringVar('sub_off_title', Lang('off')));
                        o.subs.push("");
                        ioff = o.files_subtitle.length - 1
                    }
                }
                for (var i = 0; i < o.subs.length; i++) {
                    if (exist(v.default_subtitle)) {
                        if (v.default_subtitle == o.files_subtitle[i]) {
                            start = i;
                            o.current_subtitle = i;
                            v.subtitle_start = 1
                        }
                    }
                    if (memory != '') {
                        if (memory == o.files_subtitle[i]) {
                            start = i;
                            o.current_subtitle = i
                        }
                    }
                }
                if (v.sub_off == 1 && v.subtitle_start == 0) {
                    o.current_subtitle = ioff
                }
                exist(o.controls) ? o.controls.SubtitleChanged() : '';
                if (v.subtitle_start == 1) {
                    o.current_subtitle = start;
                    if (v.sub_all == 1 && o.subs[start] == "all") {
                        SubtitleLoadAll(o.current_subtitle)
                    } else {
                        SubtitleLoad(o.current_subtitle)
                    }
                } else {
                    if (urlcnfg && o.subs.length < 3) {
                        SubtitleLoad(ioff == 0 ? 1 : 0)
                    }
                    v.sub_off != 1 ? o.current_subtitle = -1 : ''
                }
            } else {
                Remove()
            }
        }

        function SubtitleLoad(x) {
            if (exist(o.subs[x])) {
                if (o.subs[x].indexOf(".") > -1) {
                    o.subsor = o.subs[x].split(" or ");
                    o.sub_or = 0;
                    SubtitleLoad2(x)
                } else {
                    if (o.subs[x].indexOf('upld') == 0) {
                        if (upld[o.subs[x].substr(4)]) {
                            SubtitleParse(o.files_subtitle[x], upld[o.subs[x].substr(4)])
                        }
                    }
                }
            }
        }

        function SubtitleLoadAll(x) {
            sub[x] = Object();
            sub[x][0] = Array();
            sub[x][1] = Array();
            for (var i = 0; i < o.subs.length; i++) {
                setTimeout(SubtitleLoad, i * 500, i)
            }
        }

        function SubtitleLoad2(x) {
            var url = trim(o.subsor[o.sub_or]);
            var xhr = XHR(url);
            loading = x;
            o.subload = 1;
            xhr.onload = function () {
                o.subload = 0;
                if (this.readyState == 4 && this.status == 200) {
                    o.subtitle_on = true;
                    SubtitleParse(url, this.responseText, x)
                } else {
                    if (o.sub_or + 1 < o.subsor.length) {
                        o.sub_or++;
                        SubtitleLoad2(loading)
                    } else {
                        SubtitleError("loading_error")
                    }
                }
            };
            xhr.onerror = function (e) {
                o.subload = 0;
                if (o.sub_or + 1 < o.subsor.length) {
                    o.sub_or++;
                    SubtitleLoad2(loading)
                } else {
                    SubtitleError("loading_error")
                }
            };
            xhr.send()
        };

        function SubtitleError(x) {
            log("subtitle not found or access denied");
            if (o.files_subtitle[o.current_subtitle]) {
                if (o.files_subtitle[o.current_subtitle].indexOf(Lang("loading_error")) == -1) {
                    o.files_subtitle[o.current_subtitle] = o.files_subtitle[o.current_subtitle] + ' (' + Lang(x) + ')'
                }
            }
            if (v.subtitle_errdel == 1 && loading > -1) {
                o.subs[loading] = '';
                o.files_subtitle[loading] = ''
            }
            o.current_subtitle = -1;
            o.subtitle_on = false;
            if (o.constrols) {
                o.controls.SubtitleChanged();
                o.controls.refresh()
            } else {
                setTimeout(function () {
                    o.controls.SubtitleChanged();
                    o.controls.refresh()
                }, 100)
            }
            if (exist(o.subtitle)) {
                o.frame.removeChild(o.subtitle);
                o.subtitle = null
            }
        }

        function SubtitleParse(url, x, y) {
            if (url.indexOf('.srt') > -1 || url.indexOf('.ass') > -1 || url.indexOf('.ssa') > -1 || url.indexOf('.vtt') > -1) {
                var l = o.current_subtitle;
                if (exist(sub[l]) && o.subs[l] == "all") { } else {
                    sub[l] = Object();
                    sub[l][0] = Array();
                    sub[l][1] = Array()
                }
                var rows = Array();
                rows = x.split(/\r|\n/);
                var cnt = 1;
                var t1 = 0;
                var t2 = 0;
                var url_shift = (exist(v.subshift) ? v.subshift : 0);
                if (url.indexOf('shift=') > 0) {
                    url_shift = url.substr(url.indexOf('shift=') + 6) * 1
                }
                for (i = 0; i < rows.length; i++) {
                    if (url.indexOf('.srt') > -1 || url.indexOf('.vtt') > -1) {
                        if (rows[i].indexOf('-->') > -1 && rows[i].indexOf(':') > -1) {
                            t1 = TimeSub(rows[i].substr(0, rows[i].indexOf('-->'))) * 1 + url_shift;
                            t1 == 0 ? t1 = 1 : '';
                            t2 = TimeSub(rows[i].substr(rows[i].indexOf('-->') + 4, 12)) * 1 + url_shift;
                            exist(sub[l][0][t1]) ? '' : sub[l][0][t1] = '';
                            for (var j = t1; j < t2; j++) {
                                sub[l][1][j] = t1
                            }
                            cnt++
                        } else {
                            rows[i] = trim(rows[i]);
                            if (rows[i] != '' && rows[i].length > 0 && rows[i] != cnt && rows[i] != 'WEBVTT') {
                                sub[l][0][t1] = (sub[l][0][t1] && sub[l][0][t1] != '' ? sub[l][0][t1] + '<br>' : '') + (o.subs[l] == "all" && y > 0 ? '[sub2]' : '') + rows[i] + (o.subs[l] == "all" && y > 0 ? '[/sub2]' : '')
                            }
                        }
                    }
                    if (url.indexOf('.ass') > -1 || url.indexOf('.ssa') > -1) {
                        if (rows[i].indexOf('Dialogue:') > -1) {
                            t1 = TimeSub(rows[i].substr((url.indexOf('.ssa') > -1 ? rows[i].indexOf('=0') + 3 : 12), 12)) * 1 + url_shift;
                            t2 = TimeSub(rows[i].substr((url.indexOf('.ssa') > -1 ? rows[i].indexOf('=0') + 14 : 23), 10)) * 1 + url_shift;
                            var p = '';
                            if (rows[i].indexOf('0,,') > 0) {
                                p = rows[i].substr(rows[i].indexOf('0,,') + 3)
                            } else {
                                if (rows[i].indexOf('ffect,') > 0) {
                                    p = rows[i].substr(rows[i].indexOf('ffect,') + 6)
                                }
                            }
                            if (sub[l][0][t1] != undefined) {
                                sub[l][0][t1] += '\n' + (o.subs[l] == "all" && y > 0 ? '[sub2]' : '') + p + (o.subs[l] == "all" && y > 0 ? '[/sub2]' : '')
                            } else {
                                sub[l][0][t1] = p
                            }
                            sub[l][0][t1] = sub[l][0][t1].replace(/{.*?}/, '');
                            sub[l][0][t1] = sub[l][0][t1].replace(/\\\\N/, '<br>');
                            sub[l][0][t1] = sub[l][0][t1].replace(/\\N/, '<br>');
                            for (var j = t1; j < t2; j++) {
                                sub[l][1][j] = t1
                            }
                        }
                    }
                }
                o.controls.SubtitleChanged();
                o.actions.RenewSubtitle();
                o.controls.refresh()
            } else {
                if (x != '') {
                    if (x.indexOf('[') == 0) {
                        Start(x)
                    } else {
                        SubtitleError("error")
                    }
                } else {
                    Remove();
                    o.controls.refresh()
                }
            }
        }

        function TimeSub(srt) {
            var tmp = srt.split(':');
            var out = 0;
            tmp.length == 2 ? tmp.unshift("00") : '';
            tmp[0] != '00' ? out += tmp[0] * 3600 : '';
            tmp[1] != '00' ? out += tmp[1] * 60 : '';
            out += tmp[2].substr(0, 2) * 1;
            out = out * 10 + tmp[2].substr(3, 1) * 1;
            return out
        };

        function SetSubtitle(x) {
            if (exist(o.current_subtitle)) {
                if (o.current_subtitle != x) {
                    if (x == -1 || (v.sub_off == 1 && x == ioff)) {
                        SubtitleOff()
                    } else {
                        v.sub_shift = 0;
                        o.current_subtitle = x;
                        o.subtitle_on = true;
                        v.subtitle_start = 1;
                        SetSubtitle2(x);
                        js("subtitle", o.files_subtitle[x]);
                        o.controls.SubtitleChanged()
                    }
                } else {
                    if (v.sub_off != 1) {
                        SubtitleOff()
                    }
                }
            }
        }

        function SetSubtitle2(x) {
            if (exist(o.subs[x])) {
                log("Subtitle", x);
                o.current_subtitle = x;
                if (exist(o.files_subtitle[x])) {
                    if (o.storage && v.sub_store == 1) {
                        localStorage.setItem("pljssubtitle", o.files_subtitle[x])
                    } else {
                        o.remember_sub = o.files_subtitle[x]
                    }
                }
                if (o.file_type == "hls" && o.hls_subs == true) {
                    o.media.hlsDashSub(x, "hls")
                } else {
                    if (o.file_type == "dash" && o.dash_subs == true) {
                        o.media.hlsDashSub(x, "dash")
                    } else {
                        if (o.subs[x] == "all") {
                            SubtitleLoadAll(o.current_subtitle)
                        } else {
                            SubtitleLoad(o.current_subtitle)
                        }
                    }
                }
            }
        };
        this.SubUpload = function () {
            if (o.subupld) {
                var x = o.subupld.files;
                if (x[0]) {
                    var y = new FileReader();
                    y.onload = function (e) {
                        var z = e.target.result;
                        upld.push(z);
                        o.current_subtitle = -1;
                        var z = x[0].name;
                        if (z.length > 40) {
                            z = x[0].name.substr(0, 15) + '...' + x[0].name.substr(-15)
                        }
                        if (v.sub_off == 1 && v.sub_off0 == 1) {
                            o.subs.push('upld' + (upld.length - 1));
                            o.files_subtitle.push(z + '');
                            SetSubtitle(o.subs.length - 1)
                        } else {
                            o.subs.unshift('upld' + (upld.length - 1));
                            o.files_subtitle.unshift(z + '');
                            v.sub_off == 1 ? ioff++ : '';
                            SetSubtitle(0)
                        }
                        o.subupld.value = ""
                    };
                    y.readAsText(x[0])
                } else {
                    o.subupld.click()
                }
            }
        };
        this.SetSubtitle = function (x) {
            SetSubtitle(x)
        };
        this.ioff = function () {
            return ioff
        };
        this.show = function (x) {
            Show(x)
        };
        this.style = function () {
            Style()
        };
        this.remove = function () {
            Remove()
        };

        function SubtitleOff() {
            js("subtitle", "off");
            o.current_subtitle = v.sub_off == 1 ? ioff : -1;
            v.subtitle_start = 0;
            o.subtitle_on = false;
            o.controls.SubtitleChanged();
            o.hls_subs || o.dash_subs ? SetSubtitle2(o.current_subtitle) : '';
            exist(o.subtitle) ? o.frame.removeChild(o.subtitle) : '';
            o.subtitle = null
        }

        function Show(time) {
            if (v.sub_shift) {
                time = time - v.sub_shift * 1
            }
            if (o.subtitle_on && exist(o.subs)) {
                if (sub) {
                    var x = o.current_subtitle;
                    if (v.subpausehide == 1 && !o.play) {
                        return
                    }
                    if (exist(sub[x])) {
                        if (exist(sub[x][1])) {
                            var t = parseInt(time * 10);
                            if (exist(sub[x][1][t])) {
                                var y = '';
                                y = sub[x][0][sub[x][1][t]];
                                if (!exist(o.subtitle)) {
                                    o.subtitle = createElement('div');
                                    o.frame.appendChild(o.subtitle);
                                    Style()
                                }
                                if (empty) {
                                    show2(o.subtitle)
                                }
                                SubtitleBottom();
                                if (v.sub_split2words == 1) {
                                    y = PluginSubword(y)
                                }
                                if (v.sub_all == 1) {
                                    y = y.replace(/\[sub2\]/gm, '<span style="color:' + (v.sub_color2.indexOf("#") == -1 ? '#' : '') + v.sub_color2 + '">');
                                    y = y.replace(/\[\/sub2\]/gm, '</span>')
                                }
                                o.subtitle.innerHTML = '<span style="' + (v.sub_bg == 1 ? 'background-color:' + hexToRGBA(v.sub_bgcolor, v.sub_bga) + ';' : '') + '-webkit-box-decoration-break: clone;color:' + (v.sub_color.indexOf("#") == -1 ? '#' : '') + v.sub_color + ';padding:' + v.sub_bgpadding + 'px ' + v.sub_bgpadding * 2 + 'px;border-radius:' + v.sub_bgo + 'px;margin:0 0;line-height:' + (v.sub_lineheight ? v.sub_lineheight : 1.8) + ';font-weight:' + v.sub_weight + '">' + trim(y) + '</span>';
                                if (v.sub_big_fullscreen == 1) {
                                    if (o.fullscreen) {
                                        css(o.subtitle, {
                                            "font-size": ((v.sub_size_fullscreen + ((parseInt(v.sub_sizeproc) - 100) * v.sub_size_fullscreen / 100)) + "px")
                                        })
                                    } else {
                                        css(o.subtitle, {
                                            "font-size": ((v.sub_size + ((parseInt(v.sub_sizeproc) - 100) * v.sub_size / 100)) + "px")
                                        })
                                    }
                                }
                                empty = false
                            } else {
                                if (!empty && exist(o.subtitle)) {
                                    o.subtitle.innerHTML = '';
                                    empty = true;
                                    hide2(o.subtitle)
                                }
                            }
                        }
                    }
                }
            }
        }

        function Style() {
            if (o.subtitle) {
                css(o.subtitle, {
                    "position": "absolute",
                    "width": "100%",
                    "padding-left": "10%",
                    "padding-right": "10%",
                    "left": 0,
                    "color": v.sub_color,
                    "text-align": "center",
                    "box-sizing": "border-box"
                });
                if (v.sub_fonted == 1 && exist(v.sub_font)) {
                    v.sub_font != '' ? css(o.subtitle, {
                        "font-family": v.sub_font
                    }) : ''
                }
                if (v.sub_shadow == 1) {
                    css(o.subtitle, {
                        "text-shadow": "1px 1px 2px black"
                    })
                } else {
                    css(o.subtitle, {
                        "text-shadow": "none"
                    })
                }
                if (v.sub_drag == 1) {
                    PluginMovable(o.subtitle, 'o.subdrag')
                } else {
                    css(o.subtitle, {
                        "pointer-events": "none"
                    })
                }
            }
        }

        function SubtitleBottom() {
            if (!o.subdrag) {
                if (o.controls.ToolbarHidden() || v.sub_bottom > v.toolbar.h) {
                    css(o.subtitle, {
                        "position": "absolute",
                        "top": "auto",
                        "left": 0,
                        "bottom": (v.sub_bottom * 1)
                    })
                } else {
                    css(o.subtitle, {
                        "position": "absolute",
                        "top": "auto",
                        "left": 0,
                        "bottom": (v.sub_bottom * 1 + v.toolbar.h * 1)
                    })
                }
            }
        }

        function Remove() {
            o.current_subtitle = -1;
            o.subtitle_on = false;
            o.thumbs_on = false;
            v.subtitle = null;
            v.thumbnails = null;
            o.sub = null;
            o.subs = null;
            if (exist(o.controls)) {
                o.controls.SubtitleChanged()
            }
            o.files_subtitle = null;
            if (exist(o.subtitle)) {
                o.frame.removeChild(o.subtitle);
                o.subtitle = null
            }
            o.current_subtitle = null;
            o.subtitle_on = false
        }
    };
    var Motion = function (x) {
        var _ease;
        var _timer;
        var _type;
        var _from;
        var _to;
        var _steps;
        var _step = 0;
        var _speed;
        var _stop = false;
        var _timeout;
        if (x.me != undefined && x.mc != undefined && x.type != undefined && x.to != undefined) {
            if (x.time == null) {
                if (x.type.indexOf("alpha") > -1) {
                    x.to == 0 ? x.time = 0.5 : x.time = 0.2
                } else {
                    x.time = 0.15
                }
            }
            _ease = Ease(x.ease);
            if (x.type.indexOf("scale") == -1) {
                if (exist(o.motions[x.me])) {
                    o.motions[x.me].TheEnd()
                }
            }
            if (x.type.indexOf("scale") == -1) {
                o.motions[x.me] = this
            }
            if (x.show == 1) {
                x.mc.set("display", true)
            }
            _type = x.type.split('|');
            _to = String(x.to).split('|');
            _from = new Array();
            for (var i = 0; i < _type.length; i++) {
                if (!_to[i]) {
                    _to[i] = _to[0]
                }
                if (_type[i] == "alpha") {
                    _from[i] = x.mc.g("opacity")
                }
                if (_type[i] == "alpha_div") {
                    _from[i] = x.mc.style.opacity
                }
                if (_type[i] == "y") {
                    _from[i] = x.mc.g("y")
                }
                if (_type[i] == "x") {
                    _from[i] = x.mc.g("x")
                }
                if (_type[i] == "left") {
                    _from[i] = parseInt(x.mc.style.left)
                }
                if (_type[i] == "scale") {
                    _from[i] = x.mc.g("scaleX")
                }
                if (_type[i] == "scroll") {
                    _from[i] = x.mc.scrollTop
                }
                if (_type[i] == "scrollleft") {
                    _from[i] = x.mc.scrollLeft
                }
                if (_type[i] == "scaleY") {
                    _from[i] = x.mc.g("scaleY")
                }
                if (_type[i] == "scaleX") {
                    _from[i] = x.mc.g("scaleX")
                }
                if (_type[i] == "width") {
                    _from[i] = x.mc.g("width")
                }
                if (_type[i] == "width_div") {
                    _from[i] = x.mc.offsetWidth;
                    _to[i] = Math.floor(_to[i]);
                    x.me == "line_play" ? log("width", x.me, _from[i], _to[i], x.mc.offsetWidth) : ''
                }
                if (_type[i] == "height") {
                    _from[i] = x.mc.g("height")
                }
                if (_type[i] == "height_div") {
                    _from[i] = x.mc.offsetHeight
                }
                _to[i] = Number(_to[i]);
                _from[i] = Number(_from[i])
            }
            _speed = x.time * 1000 / _ease.length;
            _steps = _ease.length;
            if (_type.length == 1 && _from[0] == _to[0]) {
                End()
            } else {
                setTimeout(onStep, Math.round(_speed))
            }
        }

        function onStep() {
            for (var i = 0; i < _type.length; i++) {
                var tmp = _from[i] + (_to[i] - _from[i]) * (_ease[_step] ? _ease[_step] : 0);
                Alpha(_type[i], tmp);
                if (_type[i] == "y") {
                    x.mc.set("top", tmp)
                }
                if (_type[i] == "x") {
                    x.mc.set("left", tmp)
                }
                if (_type[i] == "left") {
                    x.mc.style.left = tmp + "px"
                }
                if (_type[i] == "scale") {
                    x.mc.set("scale", tmp)
                }
                if (_type[i] == "scaleY") {
                    x.mc.set("scaleY", tmp)
                }
                if (_type[i] == "scaleX") {
                    x.mc.set("scaleX", tmp)
                }
                if (_type[i] == "scroll") {
                    x.mc.scrollTop = tmp
                }
                if (_type[i] == "scrollleft") {
                    x.mc.scrollLeft = tmp
                }
                if (_type[i] == "width") {
                    x.mc.set("width", tmp)
                }
                if (_type[i] == "width_div") {
                    css(x.mc, {
                        "width": tmp
                    })
                }
                if (_type[i] == "height") {
                    x.mc.set("height", tmp)
                }
                if (_type[i] == "height_div") {
                    css(x.mc, {
                        "height": tmp
                    })
                }
            }
            _step++;
            if (!_stop) {
                if (_step == _steps) {
                    End()
                } else {
                    _timeout = setTimeout(onStep, Math.round(_speed))
                }
            }
        }

        function End() {
            _stop = true;
            if (x.hide) {
                if (_type[0] == "alpha_div" || _type[0] == "left") {
                    hide(x.mc)
                } else {
                    x.mc.set("display", false)
                }
            }
            if (x.type.indexOf("scale") == -1) {
                o.motions[x.me] = null;
                delete o.motions[x.me]
            }
            for (var i = 0; i < _type.length; i++) {
                Alpha(_type[i], _to[i])
            }
            clearTimeout(_timeout)
        };

        function Alpha(y, z) {
            if (y == "alpha") {
                x.mc.set("opacity", z)
            }
            if (y == "alpha_div") {
                x.mc.style.opacity = z
            }
        }
        this.TheEnd = function () {
            End()
        };
        this.TheEnd2 = function () {
            _step = _steps - 1;
            onStep();
            End()
        };
        this.XY = function (x0, x1, y0, y1) {
            var e = false;
            for (var i = 0; i < _type.length; i++) {
                if (_type[i] == 'x' && x0 != x1) {
                    e = true
                }
                if (_type[i] == 'y' && y0 != y1) {
                    e = true
                }
            }
            e ? End() : ''
        };

        function Ease(str) {
            switch (str) {
                case "elastic":
                    return [0, 0.432, 0.857, 1.275, 1.372, 1.296, 1.102, 0.957, 0.883, 0.87, 0.914, 0.992, 1.029, 1.041, 1.036, 1.019, 0.996, 0.984, 0.981, 0.988, 1.001, 1.006, 1.007, 1.006, 1.003, 0.999, 0.998, 0.998, 0.998, 0.998, 1];
                    break;
                case "cubic":
                    return [0, 0.096, 0.185, 0.267, 0.344, 0.416, 0.483, 0.547, 0.606, 0.659, 0.705, 0.747, 0.785, 0.818, 0.848, 0.874, 0.897, 0.918, 0.935, 0.95, 0.962, 0.971, 0.979, 0.985, 0.99, 0.994, 0.997, 0.999, 1];
                    break;
                case "back":
                    return [0, 0.146, 0.28, 0.403, 0.513, 0.613, 0.702, 0.78, 0.848, 0.907, 0.956, 0.997, 1.029, 1.055, 1.072, 1.084, 1.092, 1.095, 1.095, 1.093, 1.088, 1.081, 1.072, 1.06, 1.046, 1.033, 1.023, 1.014, 1.007, 1.003];
                    break;
                default:
                    return [0, 0.1, 0.2, 0.3, 0.4, 0.5, 0.6, 0.7, 0.8, 0.9, 1];
                    break
            }
        }
    };
    var System = function () {
        var N = navigator.appName,
            ua = navigator.userAgent,
            tem;
        var M = ua.match(/(opera|chrome|safari|firefox|msie)\/?\s*(\.?\d+(\.\d+)*)/i);
        var M = ua.match(/(opera|chrome|safari|firefox|msie|trident|edge)\/?\s*(\.?\d+(\.\d+)*)/i);
        if (M && (tem = ua.match(/version\/([\.\d]+)/i)) != null) M[2] = tem[1];
        var mtp = navigator.maxTouchPoints;
        this.browser = M ? M[1] : N;
        this.version = M ? M[2] : navigator.appVersion;
        this.opera = this.browser == "Opera";
        this.ie9 = this.browser == "MSIE 9.0";
        this.ie = this.browser == "MSIE" || this.browser == "Trident" || this.browser == "Edge";
        this.edge = ua.search(/(edge)\/?\s*/i) > -1;
        this.firefox = this.browser == "Firefox";
        this.safari = this.browser == "Safari";
        this.chrome = window.chrome;
        this.win = ua.search("Windows NT") > -1;
        this.ios = (ua.search(/(iphone|ipad|ipod)\/?\s*/i) > -1) || (navigator.platform === 'MacIntel' && mtp > 1);
        this.tv = v.notv != 1 && ua.search(/(Tizen|MiTV|LG Browser|SmartTV|Philips|TV Build)\/?\s*/i) > -1;
        this.lg = v.notv != 1 && ua.search(/(LG Browser)\/?\s*/i) > -1;
        this.iphone = ua.search(/(iphone)\/?\s*/i) > -1;
        this.ipad = this.ios && !this.iphone;
        this.webkit = 'WebkitAppearance' in document.documentElement.style;
        if (ua.search(/(android)\/?\s*/i) > -1) {
            mtp > 0 ? this.android = true : this.tv = true;
            if (matchMedia('(pointer:fine)').matches) {
                this.tv = true
            }
        }
        this.mobile = (this.ios || this.android || (ua.search(/(blackberry|iemobile|opera mini)\/?\s*/i) > -1)) && !this.tv;
        this.mutedautoplay = this.safari || this.chrome;
        this.desktop = !this.mobile;
        this.mobiletv = this.mobile || this.tv;
        this.fullscreen = false;
        if (this.ios) {
            this.iosv = parseFloat(ua.substr(ua.indexOf('OS ') + 3, 4).replace('_', '.'));
            if (this.ipad && !'ontouchstart' in window) {
                this.mobile = this.ios = false;
                this.tv = true
            }
        }
        if (o.frame.requestFullScreen || o.frame.requestFullscreen || o.frame.mozRequestFullScreen || o.frame.webkitRequestFullScreen || o.frame.msRequestFullscreen) {
            this.fullscreen = true
        }
    };

    function UpdateObject(obj, obj2) {
        for (var s in obj2) {
            if (typeof (obj2[s]) == 'object') {
                if (s == "events" || s == "file") {
                    obj[s] = obj2[s]
                } else {
                    for (var s2 in obj2[s]) {
                        if (typeof (obj[s]) != 'object') {
                            obj[s] = {}
                        }
                        if (typeof (obj2[s][s2]) == 'object') {
                            for (var s3 in obj2[s][s2]) {
                                if (typeof (obj[s][s2]) != 'object') {
                                    obj[s][s2] = {}
                                }
                                if (typeof (obj2[s][s2][s3]) == 'object') {
                                    for (var s4 in obj2[s][s2][s3]) {
                                        if (typeof (obj[s][s2][s3]) != 'object') {
                                            obj[s][s2][s3] = {}
                                        }
                                        obj[s][s2][s3][s4] = obj2[s][s2][s3][s4];
                                        if (s3 == 'padding' || s3 == 'margin') {
                                            obj[s][s2][s3][s4] = parseInt(obj[s][s2][s3][s4])
                                        }
                                    }
                                } else {
                                    obj[s][s2][s3] = obj2[s][s2][s3];
                                    if (s2 == 'padding' || s2 == 'margin') {
                                        obj[s][s2][s3] = parseInt(obj[s][s2][s3])
                                    }
                                }
                            }
                        } else {
                            obj[s][s2] = obj2[s][s2];
                            if (s == 'padding' || s == 'margin') {
                                obj[s][s2] = parseInt(obj[s][s2])
                            }
                        }
                    }
                }
            } else {
                if (s.indexOf("roll") > 0 && trim(obj2[s]) === "") { } else {
                    obj[s] = SettingsParser(s, obj2[s])
                }
            }
        }
        return obj
    };
    var SettingsParser = function (key, value) {
        if (typeof (value) == 'string') {
            value = trim(value);
            if (key.indexOf("color") > -1 && value != -1) {
                value = CheckColor(value)
            }
        }
        return value
    };

    function hexToRGBA(hex, opacity) {
        return 'rgba(' + (hex = hex.replace('#', '')).match(new RegExp('(.{' + hex.length / 3 + '})', 'g')).map(function (l) {
            return parseInt(hex.length % 2 ? l + l : l, 16)
        }).concat(opacity || 1).join(',') + ')'
    }

    function StorageSupport() {
        try {
            var storage = window['localStorage'],
                x = '__storage_test__';
            storage.setItem(x, x);
            storage.removeItem(x);
            return true
        } catch (e) {
            return false
        }
    };

    function killMotion(motion_id) {
        if (motion_id) {
            if (exist(o.motions[motion_id])) {
                o.motions[motion_id].TheEnd()
            }
        }
    };
    var Lang = function (x) {
        var y = x;
        if (y) {
            y = x.charAt(0).toUpperCase() + x.slice(1);
            if (y.indexOf("_") > -1) {
                y = y.replace(/_/ig, " ")
            }
        }
        var en = {
            "of": "of",
            "kbps": "kbps",
            "castdevice": "Playback on device",
            "casterror": "Playback error on device",
            "together": "All at once",
            "pass": "Password",
            "0val": "No",
            "sleeptimer": "Sleep",
            "offsettimer": "Skip",
            "1val": "Yes",
            "sub_bottom": "Bottom margin",
            "sub_weight": "Font weight",
            "sub_shadow": "Shadow",
            "sub_bga": "Background opacity",
            "sub_bgcolor": "Background color",
            "sub_sizeproc": "Text size",
            "sub_color": "Text color",
            "sub_color2": "Text color 2",
            "sub_shift": "Time shift",
            "sub_reset": "Reset",
            "prev": "Previous",
            "copied": "Copied to clipboard",
            "160p": "Tiny",
            "240p": "Small",
            "360p": "Medium",
            "480p": "High",
            "540p": "High",
            "720p": "HD",
            "1080p": "Full HD",
            "1296p": "Super HD",
            "1440p": "Quad HD",
            "2160p": "Ultra HD 4K",
            "ads": "Ad",
            "adsinvitation": "Go to the advertiser's website",
            "audiotrack": "Audio",
            "live": "LIVE",
            "fullscreen": "Enter fullscreen",
            "normalscreen": "Exit fullscreen"
        };
        if (exist(en[x])) {
            y = en[x]
        }
        if (exist(o['lang_' + v.lang])) {
            if (exist(o['lang_' + v.lang][x])) {
                y = o['lang_' + v.lang][x]
            }
        }
        if (v.rename) {
            if (v.rename[x]) {
                y = v.rename[x]
            }
        }
        return y
    };
    var gaTracker = function (x, y, z) {
        if (!exist(o.gatracked[y]) && v.playerjscom != 1) {
            var t = o.titlestore ? o.titlestore : (v.title ? v.title : '');
            exist(v.label) ? t = v.label : '';
            if (v.yamtr_event[x] == 1 && v.yamtr == 1 && exist(v.yamtrid)) {
                if (x == "init") {
                    setInterval(yaHit, 300000)
                }
                if (exist(window["yaCounter" + v.yamtrid])) {
                    window["yaCounter" + v.yamtrid].reachGoal('playerjs_' + x, {
                        title: t
                    });
                    log("Yandex", 'playerjs_' + x)
                } else {
                    log("Yandex Metric error")
                }
            }
            if (v.ga_event[x] == 1) {
                if (v.ga == 1) {
                    if (v.ga4 == 1) {
                        if (window.gtag) {
                            gtag('event', 'playerjs_' + x, {
                                'label': t
                            })
                        }
                    } else {
                        if (window.ga) {
                            var gao = {
                                eventCategory: 'Player',
                                eventAction: y
                            };
                            if (t != '') {
                                gao.eventLabel = t
                            }
                            if (v.gainact == 1 && !o.clicktime) {
                                gao.nonInteraction = 1
                            }
                            ga('user.send', 'event', gao)
                        }
                    }
                }
            }
        }
        z ? o.gatracked[y] = true : ''
    };

    function yaHit() {
        if (exist(window["yaCounter" + v.yamtrid])) {
            window["yaCounter" + v.yamtrid].reachGoal('playerjs_hit')
        }
    };
    var YoutubeID = function (url) {
        var x = '';
        url = url.replace("v=", "{=");
        if (url.indexOf('youtu.be/') > -1) {
            x = url.substr(url.indexOf(".be/") + 4);
            x.replace("/", "")
        } else {
            x = url.split(/(youtu.be\/|v\/|embed\/|watch\?|youtube.capiom\/user\/[^#]*#([^\/]*?\/)*)\??{?=?([^#\&\?]*)/)[3]
        }
        if (x != '') {
            if (x.indexOf("?t=") > 0) {
                v.start = x.substr(x.indexOf("?t=") + 3);
                var h = 0;
                var m = 0;
                var s = 0;
                if (v.start.indexOf("h") > 0) {
                    h = v.start.substr(0, v.start.indexOf("h"));
                    v.start = v.start.substr(v.start.indexOf("h") + 1)
                }
                if (v.start.indexOf("m") > 0) {
                    m = v.start.substr(0, v.start.indexOf("m"));
                    v.start = v.start.substr(v.start.indexOf("m") + 1)
                }
                if (v.start.indexOf("s") > 0) {
                    s = v.start.substr(0, v.start.indexOf("s"));
                    v.start = v.start.substr(v.start.indexOf("s") + 1)
                }
                if (h > 0 || m > 0 || s > 0) {
                    v.start = h * 3600 + m * 60 + s * 1
                }
                x = x.substr(0, x.indexOf("?t="))
            }
        }
        return x
    };
    var js = function (x, y, li, ev) {
        if (x == "init") {
            o.init = true
        }
        if (ev == 1) {
            for (var yi in y) {
                if (y.hasOwnProperty(yi)) {
                    if (typeof (y[yi]) == "object") {
                        y[yi] = ''
                    }
                }
            }
        }
        if (v.eventstracker == 1 && o.init) {
            if (v.eventlisteners == 1 || li == 1) {
                JsEvent(x, y)
            } else {
                if (y != undefined) {
                    if (typeof (y) == 'object') {
                        try {
                            y = JSON.stringify(y)
                        } catch (e) { }
                    }
                }
                if (typeof (v.events) == 'string') {
                    if (v.events.indexOf("{") == 0) {
                        try {
                            v.events = v.events.replace(/\'/ig, '"');
                            v.events = JSON.parse(v.events)
                        } catch (e) {
                            console.log(e)
                        }
                    }
                }
                if (typeof (v.events) == 'object') {
                    if (exist(v.events[x]) || exist(v.events['other'])) {
                        var z = x;
                        if (!exist(v.events[x]) && exist(v.events['other'])) {
                            z = 'other'
                        }
                        if (x.indexOf("vast_") == 0) {
                            if (exist(v.events['vast'])) {
                                z = 'vast'
                            }
                        }
                        try {
                            if (y !== undefined) {
                                eval(v.events[z] + "('" + x + "','" + v.id + "','" + y + "')")
                            } else {
                                eval(v.events[z] + "('" + x + "','" + v.id + "')")
                            }
                        } catch (e) {
                            log("events", e, x)
                        }
                    }
                } else {
                    if (v.events == '') {
                        v.events = "PlayerjsEvents"
                    }
                    try {
                        if (y !== undefined) {
                            eval(v.events + "('" + x + "','" + v.id + "','" + y + "')")
                        } else {
                            eval(v.events + "('" + x + "','" + v.id + "')")
                        }
                    } catch (e) {
                        log("events", e, x, y)
                    }
                }
            }
        }
        if (v.postmessage == 1 && li !== 1) {
            var zv = {
                event: x,
                time: o.media ? (x == "seek" ? o.seeked_time : o.media.time()) : 0
            };
            if (y != undefined) {
                zv["data"] = y
            }
            if (x == "duration" || x == "time") {
                zv["duration"] = o.media.duration()
            }
            if (x == "volume" || x == "unmute") {
                zv["volume"] = v.volume
            }
            if (x == "new") {
                zv["id"] = apiProcessor("playlist_id")
            }
            window.parent.postMessage(zv, '*');
            var z = x;
            x == "init" || x == "start" || x == "end" ? z = x + "ed" : '';
            x == "play" ? z = "resumed" : '';
            x == "pause" ? z = "paused" : '';
            x == "mute" ? z = "muted" : '';
            x == "unmute" ? z = "unmuted" : '';
            x == "seek" ? z = "rewound" : '';
            x == "vast_Impression" ? z = "adShown" : '';
            zv["event"] = z;
            if (z != '' && z != x) {
                zv = JSON.parse(JSON.stringify(zv));
                window.parent.postMessage(zv, '*')
            }
        }
    };
    var JsEvent = function (x, y) {
        var ev = document.createEvent('Events');
        if (y !== undefined) {
            ev.info = y
        }
        ev.initEvent(x, true, true);
        o.container.dispatchEvent(ev)
    };
    this.event = function (x, y) {
        o.events[x] = y
    };
    var api = function (x, y, but) {
        return apiProcessor(x, y, but)
    };
    this.api = function (x, y, but) {
        return apiProcessor(x, y, but)
    };

    function apiProcessor(x, y, but) {
        if (exist(o.actions)) {
            if (o.destroyed == 1) {
                return
            }
            if (but) {
                if (typeof (but) == 'string') {
                    if (but.indexOf("id:") == 0) {
                        but = o.controls.butByS(but.substr(3), "dom");
                        if (but) {
                            if (x == "button" && y == "toogle") {
                                but.Click()
                            }
                        }
                    }
                }
            }
            if (x == "play") {
                if (exist(y)) {
                    if (typeof (y) == 'string') {
                        y = y.replace(/(\r\n|\n|\r)/gm, "");
                        var seekto = -1;
                        if (y.indexOf("[seek:") > -1 && y.indexOf("]") == y.length - 1) {
                            seekto = y.substr(y.indexOf("[seek:") + 6, y.length - 1);
                            seekto = parseInt(seekto.substr(0, seekto.length - 1));
                            y = y.substr(0, y.indexOf("[seek:"));
                            if (y == '') {
                                o.actions.Seek(seekto);
                                o.actions.Play();
                                return
                            } else {
                                o.seekto = seekto
                            }
                        }
                        if (y.indexOf("#" + v.enc2) == 0) {
                            y = o[o.fd[0]](y)
                        }
                        if (y.indexOf("#" + v.enc3) == 0 && y.indexOf(v.file3_separator) > 0) {
                            y = o[o.fd[1]](y)
                        }
                        if (y.indexOf("#0") == 0) {
                            y = fd0(y)
                        }
                        if (v.fplace == 1) {
                            y = fplace(y)
                        }
                        if (y.indexOf(".txt") == y.length - 4) {
                            var xhr = XHR(y);
                            xhr.onload = function () {
                                if (this.readyState == 4 && this.status == 200) {
                                    try {
                                        apiProcessor('play', JSON.parse(this.responseText))
                                    } catch (e) { }
                                }
                            };
                            xhr.send();
                            return
                        }
                        if (y.indexOf("id:") == 0 && exist(o.playlist_dic)) {
                            var z = FindIdPl(y);
                            if (exist(o.playlist_dic[z])) {
                                o.controls.PlaylistPlayId(z);
                                seekto > -1 ? o.seekto = seekto : '';
                                return true
                            } else {
                                return false
                            }
                        }
                        if (y.indexOf("youtubeid:") == 0) {
                            var z = y.substr(10);
                            if (o.file_type == "youtube") {
                                o.media.playByYoutubeId(z);
                                return true
                            } else {
                                y = '//youtu.be/' + z
                            }
                        }
                    }
                    o.actions.NewFile(y)
                } else {
                    o.actions.Play()
                }
            }
            if (x == "file" && exist(y)) {
                o.newfile = true;
                if (y.indexOf("id:") == 0 && exist(o.playlist_dic)) {
                    var z = FindIdPl(y);
                    if (exist(o.playlist_dic[z])) {
                        o.controls.PlaylistOpenId(z);
                        seekto > -1 ? o.seekto = seekto : '';
                        return true
                    } else {
                        return false
                    }
                } else {
                    o.actions.NewFile(y, 1);
                    o.controls.Duration(0, 0)
                }
            } else {
                typeof Papi41 == 'function' ? Papi41() : ''
            }
            if (x == "preload") {
                if (exist(y)) {
                    o.newfile = true;
                    o.actions.NewFile(y, 1, 1)
                } else {
                    o.media.Preload()
                }
            }
            if (x == "pause") {
                if (o.play) {
                    o.actions.Pause();
                    o.actions.RenewSubtitle()
                }
            }
            if (x == "channel" && exist(y)) {
                o.start && o.channels ? o.channels.SetChannel(y) : ''
            }
            if (x.indexOf("vpaid_") == 0) {
                if (o.vast) {
                    o.vast.VpaidSet(x.substr(6), y)
                }
            }
            if (x == "alert") {
                o.alert.close();
                o.alert = new Alert();
                if (v.alert404 == 1) {
                    o.alert.txt(v.alert404text)
                } else {
                    o.alert.txt("Test message")
                }
                if (v.alert404v == 1 && exist(v.alert404video)) {
                    o.err404v = new PluginErrorVideo()
                }
            }
            if (x == "waiting") {
                o.controls.Waiting();
                o.controls.HideElement("control_start")
            }
            if (x == "toggle") {
                o.play ? o.actions.Pause() : o.actions.Play()
            }
            if (x == "stop") {
                v.preload = 0;
                v.autoplay = 0;
                o.media.Recover();
                o.actions.Stop()
            }
            if (x == "reload") {
                o.time = o.media.time();
                o.actions.Reload()
            }
            if (x == "download") {
                if (v.apiprm) {
                    if (v.apiprm.on == 1 && v.apiprm.dwn == 1) {
                        o.actions.Download()
                    }
                }
            }
            if (x == "effect" && exist(y)) {
                if (o.effects) {
                    o.effects.api(y)
                }
            }
            if (x == "share") {
                o.controls.showShare()
            }
            if (x == "startvast" && exist(y)) {
                if (v.vast == 1 && o.p != '') {
                    var sv = JSON.parse(decode(o.p));
                    for (var l in sv) {
                        if (sv.hasOwnProperty(l)) {
                            if (exist(sv[l].id)) {
                                if (y == sv[l].id) {
                                    v.midroll = 'prt' + (exist(sv[l]['cpm']) ? 'cpm' + sv[l]['cpm'] : '') + y + '_' + sv[l].preroll;
                                    v.midrolls = true;
                                    o.actions.advertising("midroll")
                                }
                            }
                        }
                    }
                }
            }
            if (x == "vastbreak") {
                typeof VastBreak == "function" ? VastBreak() : ''
            }
            if (x == "cuid" && y) {
                v.cuid = y;
                o.continue ? o.continue.updateCuid() : ''
            }
            if (x == "mute") {
                o.actions.Mute()
            }
            if (x == "speed") {
                if (exist(y)) {
                    o.actions.SetSpeed(y)
                } else {
                    return o.files_speed[o.current_speed]
                }
            }
            if (x == "speeds") {
                return o.files_speed
            }
            if (x == "unmute") {
                o.actions.Unmute()
            }
            if (x == "thumbnails") {
                if (exist(y)) {
                    v[x] = y;
                    o.actions.Thumbs()
                }
            }
            if (x == "qualities") {
                return o.files_quality
            }
            if (x == "adblock") {
                return o.ab ? true : false
            }
            if (x == "live") {
                return o.media ? o.media.isLive() : false
            }
            if (x == "subtitles") {
                return v.sub_off == 1 ? o.files_subtitle.slice(0, -1) : o.files_subtitle
            }
            if (x == "audiotracks") {
                return o.files_audiotrack
            }
            if (x == "volume" || x == "setVolume") {
                if (exist(y)) {
                    if (y >= 0 && y <= 1) {
                        o.actions.Volume(y)
                    }
                }
                return o.muted ? 0 : v.volume
            }
            if (x == "muted") {
                return exist(o.muted) ? o.muted : false
            }
            if (x == "moveplaylist") {
                o.controls ? o.controls.PlaylistMove(y) : ''
            }
            if (x == "design") {
                y < 2 ? y = '' : '';
                if (o['u' + y] != '') {
                    var x2 = JSON.parse(decode(o['u' + y]));
                    var v2 = [];
                    for (var l in v) {
                        if (v.hasOwnProperty(l)) {
                            if (l.indexOf("control_") == 0) {
                                v[l] = null
                            }
                        }
                    }
                    if (typeof x2 == "object") {
                        for (var k in x2) {
                            if (x2.hasOwnProperty(k)) {
                                if (k.indexOf("control_") == 0) {
                                    v[k] = x2[k]
                                }
                                if (k == "toolbar") {
                                    v2[k] = x2[k]
                                }
                            }
                        }
                    }
                    v = UpdateObject(v, v2);
                    var show_settings = false;
                    if (o.controls.SettingsVisible()) {
                        o.controls.Settings();
                        show_settings = true
                    }
                    var show_playlist = false;
                    if (o.controls.PlaylistVisible()) {
                        o.controls.Playlist();
                        show_playlist = true
                    }
                    o.controls.Remove();
                    o.controls = null;
                    o.controls = new Controls();
                    if (o.media.status() == "playing") {
                        o.controls.Play()
                    }
                    o.controls.Volume(v.volume);
                    if (exist(v.title)) {
                        Title(v.title)
                    }
                    if (show_settings) {
                        o.controls.Settings()
                    }
                    if (show_playlist) {
                        o.controls.Playlist()
                    }
                    if (o.fullscreen) {
                        o.controls.Fullscreen()
                    }
                    if (key != 'control_duration') {
                        o.controls.Duration(o.media.time(), o.media.duration())
                    }
                    MainResize()
                }
            }
            if (x == "vars") {
                return v.vars
            }
            if (x == "resize") {
                o.controls.resize(true)
            }
            if (x == "seek") {
                if (exist(y)) {
                    if (typeof y == "string") {
                        if (y.indexOf("%") > -1) {
                            y = parseInt(y.substr(0, y.indexOf("%")));
                            y = o.media.duration() * y / 100
                        } else {
                            var omt = o.media.time();
                            if (o.continue && !o.start) {
                                if (!o.continue.seeked) {
                                    var f = o.continue.flag();
                                    if (f.t && f.d) {
                                        omt = f.t;
                                        o.continue.seeked = true
                                    }
                                }
                            }
                            if (y.indexOf("+") == 0) {
                                y = omt + parseInt(y.substr(1))
                            } else {
                                if (y.indexOf("-") == 0) {
                                    y = omt - parseInt(y.substr(1))
                                }
                            }
                        }
                    }
                    y = y * 1;
                    y < 0 ? y = 0 : '';
                    if (o.media.duration() > 0) {
                        y > o.media.duration() ? y = 0 : ''
                    }
                    if (!exist(o.vast) && !exist(o.vastloader) && o.media.duration() > 0) {
                        o.seekto = undefined;
                        o.actions.Seek(y, true);
                        o.actions.Playing()
                    } else {
                        o.seekto = y
                    }
                }
            }
            if (x == "fullscreen") {
                !o.fullscreen ? o.actions.Fullscreen() : ''
            }
            if (x == "exitfullscreen") {
                o.fullscreen ? o.actions.Normalscreen() : ''
            }
            if (x == "isfullscreen") {
                return o.fullscreen
            }
            if (x == "size") {
                return o.screen_w + '/' + o.screen_h
            }
            if (x == "fix") {
                if (exist(o.minify)) {
                    o.minify.Do()
                }
            }
            if (x == "unfixing" || x == "unfix") {
                if (exist(o.minify)) {
                    o.minify.Un()
                }
            }
            if (x == "time") {
                var _t = o.media ? o.media.time() : 0;
                if (o.continue && v.timestore == 1 && !o.start && _t == 0) {
                    var f = o.continue.flag();
                    if (f.t) {
                        _t = f.t
                    }
                }
                return _t
            }
            if (x == "timeplay") {
                if (o.butplstart) {
                    apiProcessor("play", "id:" + o.butplstart)
                }
                if (o.butseekto) {
                    apiProcessor("seek", o.butseekto);
                    apiProcessor("play")
                }
            }
            if (x == "duration") {
                return o.media ? o.media.duration() : 0
            }
            if (x == "points") {
                if (y) {
                    v.points = y;
                    o.controls.RenewPoints()
                }
            }
            if (x == "quality") {
                if (exist(y)) {
                    if (but) {
                        v.hd = Switcher(v.hd, y, but);
                        if (o.files_quality.length == 2) {
                            o.actions.SetQuality(v.hd)
                        }
                    } else {
                        o.actions.SetQuality(y)
                    }
                } else {
                    return o.media ? o.media.getQuality() : 0
                }
            }
            if (x == "audiotrack") {
                if (exist(y)) {
                    if (but) {
                        v.ahd = Switcher(v.ahd, y, but);
                        if (o.files_audiotrack.length == 2) {
                            o.actions.SetAudioTrack(v.ahd)
                        }
                    } else {
                        o.actions.SetAudioTrack(y)
                    }
                } else {
                    return o.media ? o.media.getAudioTrack() : 0
                }
            }
            if (x == "isyoutube") {
                return o.file_type == "youtube"
            }
            if (x == "restart") {
                if (o.current_audiotrack > 0) {
                    o.restart_audio = o.current_audiotrack
                }
                o.actions.NewFile(v.file)
            }
            if (x == "playing") {
                return o.play
            }
            if (x == "started") {
                return o.start
            }
            if (x == "system") {
                return o.system[y]
            }
            if (x == "youtubeready") {
                o.destroyed != 1 ? o.media.onYoutubeReady() : ''
            }
            if (x == "id") {
                return v.id
            }
            if (x == "log") {
                v.log = y
            }
            if (x == "eventstracker") {
                v.eventstracker = y
            }
            if (x == "pip") {
                o.media.PipToggle()
            }
            if (x == "switchpip") {
                o.media.PipSwitch();
                if (but) {
                    o.piped = Switcher(o.piped, y, but)
                }
            }
            if (x == "airplay") {
                o.media.Airplay()
            }
            if (x == "pipwebkit") {
                o.media.PipWebkit()
            }
            if (x == "options" && v.playerjscom != 1) {
                console.log(options)
            }
            if (x == "subtitle") {
                v.subtitle = y;
                if (exist(y)) {
                    if (y.toString().length < 3 && o.sbt) {
                        o.sbt.SetSubtitle(y * 1)
                    } else {
                        o.actions.Subtitle(y)
                    }
                }
            }
            if (x == "quiz") {
                if (exist(o.quiz)) {
                    if (exist(y)) {
                        o.quiz.api(y)
                    } else {
                        return o.quiz.Active()
                    }
                }
            }
            if (x == "geo") {
                if (o.geobj) {
                    return o.geobj
                } else {
                    return false
                }
            }
            if (x == "box") {
                var box = createElement("div");
                box.id = y;
                box.style.zIndex = 10000;
                o.frame.appendChild(box)
            }
            if (x == "screenshot") {
                if (o.tagvideo) {
                    var canvas = createElement("canvas");
                    var size = o.media.size();
                    canvas.width = size.width > 0 ? size.width : o.normal_w;
                    canvas.height = size.height > 0 ? size.height : o.normal_h;
                    css(canvas, {
                        "position": "absolute",
                        "top": -canvas.height,
                        "left": -canvas.width,
                        "display": "none"
                    });
                    document.body.appendChild(canvas);
                    var ctx = canvas.getContext('2d');
                    ctx.drawImage(o.media.tag(), 0, 0, canvas.width, canvas.height);
                    var quality = 2;
                    var canvas2 = document.createElement("canvas");
                    canvas2.width = canvas.width * quality;
                    canvas2.height = canvas.height * quality;
                    var ctx2 = canvas2.getContext("2d");
                    ctx2.drawImage(o.media.tag(), 0, 0, canvas.width * quality, canvas.height * quality);
                    if (v.sscopyright == 1 && exist(v.sstext)) {
                        !exist(v.ssfontsize) ? v.ssfontsize = 20 : '';
                        !exist(v.ssfontcolor) ? v.ssfontcolor = "ffffff" : '';
                        ctx2.font = v.ssfontsize + "px Courier, Arial";
                        ctx2.fillStyle = CheckColor(v.ssfontcolor);
                        ctx2.fillText((v.sstext == "domain" ? o.domain : v.sstext), v.ssfontsize, canvas.height * quality - v.ssfontsize - 5)
                    }
                    ctx.drawImage(canvas2, 0, 0, canvas.width, canvas.height);
                    var img;
                    try {
                        img = canvas.toDataURL("image/jpeg")
                    } catch (e) {
                        console.log(e.message);
                        return false
                    }
                    return img
                } else {
                    return false
                }
            }
            if (x == "dash") {
                return o.file_type == x ? o.media.getDASH() : undefined
            }
            if (x == "hls") {
                return o.file_type == x ? o.media.getHLS() : undefined
            }
            if (x == "poster") {
                if (!o.play) {
                    o.media.Poster(y);
                    return true
                } else {
                    return false
                }
            }
            if (x == "scale") {
                if (y) {
                    o.media.scale(y)
                } else {
                    return [o.mediascale.x, o.mediascale.y, o.mediacontainer.style.left, o.mediacontainer.style.top]
                }
            }
            if (x == "title") {
                if (exist(y)) {
                    exist(y) ? v.title = y : '';
                    o.actions.Title('title');
                    return true
                } else {
                    return v.title
                }
            }
            if (x == "invert") {
                o.actions.InvertPlaylist()
            }
            if (x == "push") {
                if (y) {
                    !o.playlist_source ? o.playlist_source = [] : '';
                    if (typeof (y) == 'object') {
                        y = o.playlist_source.concat(y);
                        x = "playlist"
                    }
                }
            }
            if (x == "playlist") {
                if (y) {
                    if (typeof (y) == 'object') {
                        try {
                            o.actions.UpdatePlaylist(y);
                            return true
                        } catch (e) {
                            return false
                        }
                    } else {
                        if (y.indexOf(".txt") == y.length - 4 || y.indexOf(".txt?") > 0) {
                            var xhr = XHR(y);
                            xhr.onload = function () {
                                if (this.readyState == 4 && this.status == 200) {
                                    try {
                                        apiProcessor('playlist', JSON.parse(this.responseText))
                                    } catch (e) { }
                                }
                            };
                            xhr.send();
                            return true
                        }
                    }
                }
            }
            if (x == "next") {
                o.controls.PlaylistNext()
            }
            if (x == "prev") {
                o.controls.PlaylistPrev()
            }
            if (x == "find") {
                if (exist(y) && exist(o.playlist_dic)) {
                    !o.play ? v.autoplay = 0 : '';
                    for (var j in o.playlist_dic) {
                        if (o.playlist_dic.hasOwnProperty(j)) {
                            if (o.playlist_dic[j].pjs_id == y) {
                                y = j
                            }
                        }
                    }
                    if (exist(o.playlist_dic[y])) {
                        o.controls.PlaylistOpenId(y);
                        return true
                    } else {
                        return false
                    }
                }
            }
            if (x == "playlist_folders") {
                var tmp = [];
                if (exist(o.playlist_dic)) {
                    for (var j in o.playlist_dic) {
                        if (o.playlist_dic[j].folder && o.playlist_dic[j].pjs_parent_i == -1) {
                            tmp.push({
                                title: o.playlist_dic[j].title,
                                id: o.playlist_dic[j].id
                            })
                        }
                    }
                }
                return tmp
            }
            if (x == "playlist_id") {
                if (o.plid) {
                    return o.playlist_dic[o.plid].pjs_id ? o.playlist_dic[o.plid].pjs_id : o.plid
                }
            }
            if (x == "playlist_length") {
                if (o.playlist_dic) {
                    return Object.keys(o.playlist_dic).length
                } else {
                    return -1
                }
            }
            if (x == "playlist_title") {
                if (exist(o.playlist_title)) {
                    return o.playlist_title
                }
            }
            if (x == "showplaylist") {
                o.controls.PlaylistShow()
            }
            if (x == "toolbar") {
                o.controls.ShowForce()
            }
            if (x == "vastnow") {
                if (o.vast) {
                    return true
                } else {
                    return false
                }
            }
            if (x == "vastinfo") {
                if (o.vast) {
                    return VastInfo()
                } else {
                    return false
                }
            }
            if (x == "vastpause") {
                if (o.vast) {
                    return o.vast.pause()
                } else {
                    return false
                }
            }
            if (x == "vastresume") {
                if (o.vast) {
                    return o.vast.resume()
                } else {
                    return false
                }
            }
            if (x == "vaststart") {
                if (o.vast) {
                    o.vast.startAd()
                } else {
                    return false
                }
            }
            if (x == "vastmute") {
                if (o.vast) {
                    o.vast.mute()
                } else {
                    return false
                }
            }
            if (x == "captions") {
                v.captions = Switcher(v.captions, y, but);
                o.media.captions()
            }
            if (x == "loop") {
                if (exist(but)) {
                    v.loop = Switcher(v.loop, y, but)
                } else {
                    if (exist(y)) {
                        y == '0/1' ? y = 1 - v.loop : '';
                        v.loop = y
                    } else {
                        return v.loop
                    }
                }
            }
            if (x == "shuffle") {
                if (exist(but)) {
                    v.shuffle = Switcher(v.shuffle, y, but)
                } else {
                    if (exist(y)) {
                        v.shuffle = y
                    } else {
                        return v.shuffle
                    }
                }
            }
            if (x == "autonext" || x == "playlistloop") {
                var z = "autoplaylist";
                x == "playlistloop" ? z = "playlistrewind" : "";
                if (exist(but)) {
                    v.playlist[z] = Switcher(v.playlist[z], y, but)
                } else {
                    if (exist(y)) {
                        y == '0/1' ? y = 1 - v.playlist[z] : '';
                        v.playlist[z] = y
                    }
                }
                return v.playlist[z]
            }
            if (x == "hd") {
                if (o.files_quality.length == 2) {
                    v.hd = o.files_quality[o.current_quality];
                    v.hd = Switcher(v.hd, y, but);
                    if (o.files_quality[0] == v.hd) {
                        o.actions.SetQuality(0)
                    } else {
                        o.actions.SetQuality(1)
                    }
                }
            }
            if (x == "v" && y) {
                if (y.indexOf('file') == 0 || y.indexOf('bk') == 0) {
                    return
                }
                return v[y]
            }
            if (x.indexOf("update:") == 0) {
                var xx = x.substr(7);
                if (typeof (y) == 'object' && typeof (v[xx]) == 'object') {
                    for (var yy in y) {
                        if (y.hasOwnProperty(yy)) {
                            v[xx][yy] = y[yy]
                        }
                    }
                } else {
                    if (x.indexOf('rc_') == -1) {
                        v[xx] = y
                    }
                }
                return true
            }
            if (x.indexOf("text:") == 0) {
                o.controls.customText(x.substr(5), y)
            }
            if (x == "currentfile") {
                return o.media ? o.media.currentFile() : ''
            }
            if (x == "vrsn") {
                return o.version + ' ' + o.playerid
            }
            if (x == "playerid") {
                return o.playerid
            }
            if (x == "hlserror") {
                return o.hlserror
            }
            if (x == "dasherror") {
                return o.dasherror
            }
            if (x == "visibility") {
                return o.visibility
            }
            if (x == "vastids") {
                return o.vast ? o.vast_adid : undefined
            }
            if (x == "destroy") {
                o.actions.StopMedia();
                o.destroyed = 1;
                v.hotkey.on = 0;
                o.container.innerHTML = ''
            }
        } else {
            return false
        }
    };

    function Switcher(x, y, but) {
        var z = trim(y) + '';
        if (y.indexOf("/") > 0) {
            var y2 = y.split("/");
            if (y2.length == 2) {
                if (x == trim(y2[0])) {
                    z = trim(y2[1]);
                    if (but) {
                        but.CustomSwitch(1)
                    }
                } else {
                    z = trim(y2[0]);
                    if (but) {
                        but.CustomSwitch(0)
                    }
                }
            }
        }
        return z
    }

    function XHR(x) {
        var xhr = new XMLHttpRequest();
        xhr.open('GET', x, true);
        return xhr
    }

    function FindIdPl(y) {
        var z = y.substr(3);
        if (o.playlist_dic) {
            for (var j in o.playlist_dic) {
                if (o.playlist_dic.hasOwnProperty(j)) {
                    if (o.playlist_dic[j].pjs_id == z) {
                        z = j
                    }
                }
            }
        }
        return z
    }

    function VastInfo() {
        var x;
        if (o.vast) {
            if (o.vast.active()) {
                x = o.vast
            }
        }
        if (!x && o.vastloader) {
            x = o.vastloader
        }
        if (x) {
            var y = {
                is: o.vasttype,
                system: x.info("adsystem"),
                version: x.info("version"),
                vpaid: x.info("isVpaid"),
                url: o.current_vast_url + (x.info("wrapper") ? x.info("wrapper0") + x.info("wrapper") : ''),
                type: x.info("filetype"),
                file: x.info("file"),
                time: o.media.time(),
                volume: x.getVolume(),
                id: o.vast_adid
            };
            if (o.vasttype == "midroll") {
                y.midroll_time = o.midrollcrtm
            }
            return y
        }
    }
    var createElement = function (x) {
        var y = x;
        x == 'div' || x == 'div2' ? y = 'pjsdiv' : '';
        var z = document.createElement(y);
        if (x == 'div2') {
            css(z, {
                "cursor": "pointer",
                "display": "block"
            })
        }
        return z
    };
    var log = function (a, b, c, d, e, f, g) {
        if (v.log == 1 || v.logout == 1) {
            var x = a + (b != undefined ? " " + b : "") + (c != undefined ? " " + c : "") + (d != undefined ? " " + d : "") + (e != undefined ? " " + e : "") + (f != undefined ? " " + f : "") + (g != undefined ? " " + g : "");
            console.log("Playerjs" + (v.pjsframed == 1 ? "2" : "") + ": " + x);
            if (v.logout == 1 && exist(document.getElementById("pjslog"))) {
                document.getElementById("pjslog").innerHTML += x + '<br/>'
            }
        }
    };
    var CustomFonts = function () {
        if (v.fonts == 1 && exist(v.fontnames) && v.fontnames != '') {
            var x = document.createElement('link');
            x.rel = 'stylesheet';
            x.href = 'https://fonts.googleapis.com/css?family=' + v.fontnames.replace(/,/ig, "|").replace(/ /ig, "+");
            document.head.appendChild(x)
        }
    };
    var SvgColor = function (div, clr) {
        var x = ["path", "polygon", "polyline", "rect", "ellipse"];
        for (var y = 0; y < x.length; y++) {
            var z = div.querySelectorAll("svg " + x[y]);
            if (z.length > 0) {
                for (var y2 = 0; y2 < z.length; y2++) {
                    z[y2].style.fill = clr
                }
            }
        }
    };
    var Time = function (time) {
        time < 0 ? time = 0 : '';
        var full_minutes = o.media.duration >= 600 ? true : false;
        var full_hours = o.media.duration >= 3600 ? true : false;
        var minutes = Math.floor(time / 60);
        var seconds = Math.floor(time - minutes * 60);
        var hours = Math.floor(minutes / 60);
        var days = Math.floor(hours / 24);
        minutes = minutes - hours * 60;
        if (days > 0) {
            hours = hours - days * 24
        }
        if (v.dvrtime == 1 && o.media.isLive()) {
            var d = new Date();
            return String(new Date(d.getTime() + time * 1000).toLocaleTimeString())
        } else {
            return String((days > 0 ? days + ':' : '') + (hours > 0 || full_hours ? hours + ':' : '') + ((hours > 0 || full_minutes) && minutes < 10 ? '0' : '') + minutes + ':' + (seconds < 10 ? '0' : '') + seconds)
        }
    };
    var timeFormat = function (x) {
        var seconds = Math.floor(x);
        var minutes = Math.floor(seconds / 60);
        var hours = Math.floor(minutes / 60);
        minutes = Math.floor(minutes % 60);
        seconds = Math.floor(seconds % 60);
        hours > 0 && minutes < 10 ? minutes = "0" + minutes : "";
        seconds = seconds >= 0 ? ((seconds >= 10) ? seconds : "0" + seconds) : "00";
        var out = (hours > 0 ? hours + ":" : "") + (minutes >= 0 ? minutes : "0") + ":" + seconds;
        if (v.dvrtime == 1 && o.media.isLive()) {
            var d = new Date();
            return String(new Date(d.getTime() + x * 1000).toLocaleTimeString())
        } else {
            return out
        }
    };
    var Href = function () {
        return encodeURIComponent((window.location != window.parent.location) ? document.referrer : document.location.href)
    };
    var Script = function (x, y, z) {
        var t;
        if (!Scripted(x) && y) {
            t = document.createElement('script');
            y == "same" ? y = x : '';
            t.src = y.indexOf('//') == -1 ? '//' + y : y;
            t.async = 1;
            if (z) {
                t.name = z
            }
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(t, s)
        }
        return t
    };
    var Scripted = function (y) {
        var x = false;
        var scripts = document.getElementsByTagName('script');
        for (var i = 0; i < scripts.length; i++) {
            if (scripts[i].src.indexOf(y) > -1) {
                x = true
            }
        }
        return x
    };
    var hex2rgb = function (x, y) {
        x = x.replace('#', '');
        var r = parseInt(x.length == 3 ? x.slice(0, 1).repeat(2) : x.slice(0, 2), 16);
        var g = parseInt(x.length == 3 ? x.slice(1, 2).repeat(2) : x.slice(2, 4), 16);
        var b = parseInt(x.length == 3 ? x.slice(2, 3).repeat(2) : x.slice(4, 6), 16);
        if (y) {
            return 'rgba(' + r + ', ' + g + ', ' + b + ', ' + y + ')'
        } else {
            return 'rgb(' + r + ', ' + g + ', ' + b + ')'
        }
    };
    var css = function (e, o) {
        if (exist(e)) {
            for (var key in o) {
                if (o.hasOwnProperty(key)) {
                    if (o[key] != 'NaNpx' && o[key] != undefined) {
                        if (typeof o[key] == 'number' && key != 'opacity' && key != 'zIndex') {
                            o[key] += 'px'
                        }
                        if ((key.indexOf("color") > -1 || key.indexOf("Color") > -1) && o[key].indexOf("#") == -1 && o[key].indexOf("rgba") == -1) {
                            o[key] = '#' + o[key]
                        }
                        if (key == "transform") {
                            e.style['-ms-' + key] = o[key];
                            e.style['-moz-' + key] = o[key];
                            e.style['-webkit-' + key] = o[key];
                            e.style['-o-' + key] = o[key]
                        }
                        if (key == "fontFamily") {
                            if (o[key].indexOf(" ") > -1) {
                                o[key] = '"' + o[key] + '"'
                            }
                        }
                        if (key == "box-sizing") {
                            e.style.setProperty(key, o[key], 'important')
                        } else {
                            e.style[key] = o[key]
                        }
                    }
                }
            }
        }
    };
    var Bglines = function (x, clr, b1, b2) {
        var y = existv(b1, 1) * 1;
        var z = existv(b2, 1) * 1;
        css(x, {
            "background": "repeating-linear-gradient(-45deg," + clr + "," + clr + " " + y + "px,rgba(0,0,0,0)," + y + "px,rgba(0,0,0,0) " + (y + z) + "px)"
        })
    };
    var CheckColor = function (c) {
        return c.substr(0, 1) != '#' ? c = "#" + c : c
    };
    var controlCSS = function (x, color, y) {
        !color ? color = '#fff' : '';
        color = CheckColor(color);
        var r = random(100000, 1000000);
        x = x.replace(/\(rand\)/g, r);
        x = x.replace(/\(color\)/g, color);
        var _html = x.substr(0, x.indexOf('|||'));
        var _css = x.substr(x.indexOf('|||') + 3);
        var _css2 = '';
        if (o.system.webkit) {
            _css2 = _css.replace(/animation:/g, "-webkit-animation:");
            _css2 = _css2.replace(/animation-/g, "-webkit-animation-");
            _css2 = _css2.replace(/@keyframes/g, "@-webkit-keyframes");
            _css2 = _css2.replace(/transform/g, "-webkit-transform")
        }
        y.innerHTML = _html;
        pushCSS(_css2 + _css)
    };
    var pushCSS = function (x) {
        if (o.css) {
            if (o.css.styleSheet) {
                o.css.styleSheet.cssText = x
            } else {
                o.css.appendChild(document.createTextNode(x))
            }
        }
    };
    var xhr = function (y, z) {
        var x = new XMLHttpRequest();
        x.open('GET', y, true);
        x.onload = z;
        x.send()
    };
    var FindPjsDiv = function (x) {
        if (x) {
            for (var i = 0; i < 5; i++) {
                if (x.nodeName == "PJSDIV") {
                    break
                } else {
                    if (x.parentElement) {
                        x = x.parentElement
                    }
                }
            }
        }
        return x
    };
    var gif = function (z) {
        var gif = document.createElement("img");
        if (o.gifed.indexOf(z) > -1) {
            o.gifed.push(z);
            if (z.indexOf("?") > 0) {
                z = z + '&' + Math.random()
            } else {
                z = z + '?' + Math.random()
            }
        } else {
            o.gifed.push(z)
        }
        gif.setAttribute('src', z);
        gif.setAttribute('height', '1px');
        gif.setAttribute('width', '1px')
    };
    var attr = function (e, o) {
        for (var key in o) {
            if (o.hasOwnProperty(key)) {
                e.setAttribute(key, o[key])
            }
        }
    };
    var destroy = function (e) {
        if (e) {
            try {
                e.parentNode.removeChild(e);
                e = null
            } catch (e) { }
        }
    };
    var random = function (min, max) {
        return Math.floor(arguments.length > 1 ? (max - min + 1) * Math.random() + min : (min + 1) * Math.random())
    };
    var randomstr = function () {
        return Math.random().toString(36).substring(2, 12)
    };
    var removebykey = function (x, y) {
        x = Object.keys(x).reduce(function (obj, key) {
            if (key != y) {
                obj[key] = x[key]
            }
            return obj
        }, {});
        return x
    };
    var trim = function (x) {
        if (typeof x == "string") {
            return x.replace(/^\s+|\s+$/gm, '')
        } else {
            return x
        }
    };
    var encode = function (x, n) {
        if (n == 0) {
            return "#0" + salt.e(x)
        }
        if (n == -1) {
            return salt.e(x)
        }
        if (n == 1) {
            return "#1" + pepper(salt.e(x), 1)
        }
    };
    var str2obj = function (x) {
        if (v[x] != "") {
            if (typeof v[x] != "string") {
                o[x + 'o'] = v[x]
            } else {
                if (v[x].indexOf("[{") == 0) {
                    try {
                        v[x] = v[x].replace(/pjs'qt/ig, '"');
                        o[x + 'o'] = eval(v[x])
                    } catch (e) { }
                }
            }
        }
    };
    var dechar = function (x) {
        return String.fromCharCode(x)
    };
    var decode = function (x) {
        if (x.substr(0, 2) == "#1") {
            return salt.d(pepper(x.substr(2), -1))
        } else if (x.substr(0, 2) == "#0") {
            return salt.d(x.substr(2))
        } else {
            return x
        }
    };
    var checkBase64 = function (x) {
        if (x) {
            if (x.indexOf('http') == -1 && x.indexOf('.') == -1 && x.length > 100 && x.indexOf('data:') == -1) {
                x = 'data:image/png;base64,' + x
            }
        }
        return x
    };
    var hide = function (x) {
        x.style.visibility = "hidden"
    };
    var show = function (x) {
        x.style.visibility = "visible"
    };
    var hide2 = function (x) {
        x ? x.style.display = "none" : ''
    };
    var show2 = function (x) {
        x ? x.style.display = "block" : ''
    };
    var isVisible = function (x) {
        return x ? x.style.visibility != "hidden" && x.style.display != "none" : false
    };
    var int = function (s) {
        if (typeof s == "string") {
            if (s.indexOf("px") > 0) {
                s = s.substr(0, s.indexOf("px"))
            }
        }
        return parseInt(s)
    };
    var hidden = function (x) {
        return x.style.display == "none"
    };
    var hexToRgb = function (hex) {
        var bigint = parseInt(hex, 16);
        var r = (bigint >> 16) & 255;
        var g = (bigint >> 8) & 255;
        var b = bigint & 255;
        return r + "," + g + "," + b
    };
    var MarginPadding = function (o, x, y) {
        o[x + 'top'] = 0;
        o[x + 'right'] = 0;
        o[x + 'bottom'] = 0;
        o[x + 'left'] = 0;
        if (exist(o[y])) {
            var z = o[y].split(" ");
            if (z.length == 4) {
                o[x + 'top'] = z[0] ? parseFloat(z[0]) : 0;
                o[x + 'right'] = z[1] ? parseFloat(z[1]) : 0;
                o[x + 'bottom'] = z[2] ? parseFloat(z[2]) : 0;
                o[x + 'left'] = z[3] ? parseFloat(z[3]) : 0
            }
        }
        return o
    };
    var MarPad = function (x) {
        if (x) {
            x = x.replace(/ /ig, 'px ')
        }
        return x + 'px'
    };
    var StringVar = function (x, y) {
        return v[x] && v[x] != '' ? v[x] : y
    };
    var abc = String.fromCharCode(65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 77, 97, 98, 99, 100, 101, 102, 103, 104, 105, 106, 107, 108, 109, 78, 79, 80, 81, 82, 83, 84, 85, 86, 87, 88, 89, 90, 110, 111, 112, 113, 114, 115, 116, 117, 118, 119, 120, 121, 122);
    var salt = {
        _keyStr: abc + "0123456789+/=",
        e: function (e) {
            var t = "";
            var n, r, i, s, o, u, a;
            var f = 0;
            e = salt._ue(e);
            while (f < e.length) {
                n = e.charCodeAt(f++);
                r = e.charCodeAt(f++);
                i = e.charCodeAt(f++);
                s = n >> 2;
                o = (n & 3) << 4 | r >> 4;
                u = (r & 15) << 2 | i >> 6;
                a = i & 63;
                if (isNaN(r)) {
                    u = a = 64
                } else if (isNaN(i)) {
                    a = 64
                }
                t = t + this._keyStr.charAt(s) + this._keyStr.charAt(o) + this._keyStr.charAt(u) + this._keyStr.charAt(a)
            }
            return t
        },
        d: function (e) {
            var t = "";
            var n, r, i;
            var s, o, u, a;
            var f = 0;
            e = e.replace(/[^A-Za-z0-9\+\/\=]/g, "");
            while (f < e.length) {
                s = this._keyStr.indexOf(e.charAt(f++));
                o = this._keyStr.indexOf(e.charAt(f++));
                u = this._keyStr.indexOf(e.charAt(f++));
                a = this._keyStr.indexOf(e.charAt(f++));
                n = s << 2 | o >> 4;
                r = (o & 15) << 4 | u >> 2;
                i = (u & 3) << 6 | a;
                t = t + dechar(n);
                if (u != 64) {
                    t = t + dechar(r)
                }
                if (a != 64) {
                    t = t + dechar(i)
                }
            }
            t = salt._ud(t);
            return t
        },
        _ue: function (e) {
            e = e.replace(/\r\n/g, "\n");
            var t = "";
            for (var n = 0; n < e.length; n++) {
                var r = e.charCodeAt(n);
                if (r < 128) {
                    t += dechar(r)
                } else if (r > 127 && r < 2048) {
                    t += dechar(r >> 6 | 192);
                    t += dechar(r & 63 | 128)
                } else {
                    t += dechar(r >> 12 | 224);
                    t += dechar(r >> 6 & 63 | 128);
                    t += dechar(r & 63 | 128)
                }
            }
            return t
        },
        _ud: function (e) {
            var t = "";
            var n = 0;
            var r = 0;
            var c1 = 0;
            var c2 = 0;
            while (n < e.length) {
                r = e.charCodeAt(n);
                if (r < 128) {
                    t += dechar(r);
                    n++
                } else if (r > 191 && r < 224) {
                    c2 = e.charCodeAt(n + 1);
                    t += dechar((r & 31) << 6 | c2 & 63);
                    n += 2
                } else {
                    c2 = e.charCodeAt(n + 1);
                    c3 = e.charCodeAt(n + 2);
                    t += dechar((r & 15) << 12 | (c2 & 63) << 6 | c3 & 63);
                    n += 3
                }
            }
            return t
        }
    };
    var pepper = function (s, n) {
        s = s.replace(/\+/g, "#");
        s = s.replace(/#/g, "+");
        var a = sugar(o.y) * n;
        if (n < 0) a += abc.length / 2;
        var r = abc.substr(a * 2) + abc.substr(0, a * 2);
        return s.replace(/[A-Za-z]/g, function (c) {
            return r.charAt(abc.indexOf(c))
        })
    };
    var sugar = function (x) {
        x = x.split(dechar(61));
        var result = '';
        var c1 = dechar(120);
        var chr;
        for (var i in x) {
            if (x.hasOwnProperty(i)) {
                var encoded = '';
                for (var j in x[i]) {
                    if (x[i].hasOwnProperty(j)) {
                        encoded += (x[i][j] == c1) ? dechar(49) : dechar(48)
                    }
                }
                chr = parseInt(encoded, 2);
                result += dechar(chr.toString(10))
            }
        }
        return result.substr(0, result.length - 1)
    };
    var exist = function (x) {
        return x != null && typeof (x) != 'undefined' && x != 'undefined'
    };
    var existv = function (x, y) {
        return exist(x) ? x : y
    };
    var exist2 = function (x) {
        return exist(x) && x != -1 && x != ''
    };
    var copyObject = function (x) {
        if (typeof x == "object") {
            x = JSON.parse(JSON.stringify(x))
        }
        return x
    };
    var findLeft = function (el) {
        return el.getBoundingClientRect().left + (window.scrollX ? window.scrollX : window.pageXOffset)
    };
    var findTop = function (el) {
        const rect = el.getBoundingClientRect();
        return rect.top + window.scrollY
    };
    var redirect = function (x) {
        if (x != '') {
            if (v.redirectblank == 1) {
                window.open(x)
            } else {
                window.location.href = x
            }
            x = ''
        }
    };
    var reRightMenu = function () {
        if (v.rightmenu == 1) {
            o.rightmenu ? o.frame.removeChild(o.rightmenu) : '';
            o.rightmenu = null
        }
    };
    var Actions = function () {
        var _fullscreen_end = false;
        if (o.system.tv) {
            log("tv")
        }
        this.Title = function (x) {
            o.controls ? o.controls.title(x) : ''
        };
        this.File = function (x) {
            if (x) {
                if (typeof (x) == 'string') {
                    x = x.replace(/(\r\n|\n|\r)/gm, "");
                    if (x.indexOf("[{") == 0) {
                        try {
                            x = x.replace(/pjs'qt/ig, '"');
                            x = JSON.parse(x)
                        } catch (e) {
                            x = "incorrect JSON"
                        }
                    }
                }
                if (typeof (x) == 'object') {
                    o.playlist_dic = [];
                    o.playlist_source = copyObject(x);
                    o.playlist = IndexPlaylist(x);
                    if (v.playlist.openlast == 1 && !v.plstart) {
                        var keys = Object.keys(o.playlist_dic);
                        var last = keys.slice(-1)[0];
                        last ? v.plstart = last : ''
                    }
                    var y = FindFileInPlaylist();
                    if (y) {
                        x = y.file;
                        o.titlestore = y.title;
                        o.controls ? o.controls.titlepl(y.title) : '';
                        if (exist(y.poster)) {
                            if (o.media) {
                                o.media.Poster(y.poster)
                            } else {
                                v.poster = y.poster
                            }
                        }
                        if (exist(y.sub)) {
                            y.subtitle = y.sub
                        }
                        if (exist(y.start)) {
                            v.start = o.seekto = y.start
                        }
                        SettingsTimers("offset");
                        if (exist(y.id)) {
                            o.plid = y.id
                        }
                        var sx = ["subtitle", "vars", "embed", "url", "url2", "url3", "heartbeat", "thumbnails", "label", "download", "points", "remove", "end", "delete", "title2"];
                        if (exist(v.control_title)) {
                            if (v.control_title.showfrom1file == 1 && v.control_title.showtitleplaylist == 1) {
                                sx.push("title");
                                sx.push("t1");
                                sx.push("t2");
                                sx.push("t3");
                                sx.push("t4");
                                sx.push("t5")
                            }
                        }
                        for (var i = 0; i < sx.length; i++) {
                            if (exist(y[sx[i]])) {
                                v[sx[i]] = y[sx[i]]
                            }
                        }
                        if (sx.indexOf('title') > 0) {
                            if (v.control_title.templated == 1) {
                                o.title_template = v.control_title.template;
                                o.actions.TitleTemplate(y)
                            }
                            o.actions.Title('title')
                        }
                        if (o.controls) {
                            o.controls.UpdatePlaylist(o.playlist)
                        }
                        if (o.droplist) {
                            o.droplist.Update()
                        }
                    } else { }
                }
                if (typeof (x) == 'string') {
                    x = fjs(x);
                    if (x.indexOf("#" + v.enc2) == 0) {
                        x = o[o.fd[0]](x)
                    }
                    if (x.indexOf("#" + v.enc3) == 0 && x.indexOf(v.file3_separator) > 0) {
                        x = o[o.fd[1]](x)
                    }
                    if (x.indexOf("#0") == 0) {
                        x = fd0(x)
                    }
                    x = fjs(x);
                    if (v.fplace == 1) {
                        x = fplace(x)
                    }
                    if (x == '') {
                        log("empty file");
                        o.media_error = true;
                        js("error", "empty")
                    }
                    o.files_quality = [];
                    o.files_quality_ag = [];
                    o.files_audiotrack = [];
                    o.current_file = 0;
                    o.current_quality = 0;
                    o.current_audiotrack = 0;
                    v.file_separator == '' ? v.file_separator = ',' : '';
                    if ((x.indexOf("]") > -1 && x.indexOf("[") > -1) || exist(v.qualities)) {
                        o.files = x.split(v.file_separator)
                    } else {
                        o.files = [x]
                    }
                    o.audiotracks = [];
                    if (exist(v.qualities)) {
                        var qualities = v.qualities.split(v.file_separator)
                    }
                    if (o.files.length > 0) {
                        var q = -1;
                        for (var i = 0; i < o.files.length; i++) {
                            o.files[i] = trim(o.files[i]);
                            if (o.files[i] != '') {
                                if (o.files[i].indexOf("[") == 0 && o.files[i].indexOf("]") > 1) {
                                    o.files_quality[i] = o.files[i].substr(o.files[i].indexOf("[") + 1, o.files[i].indexOf("]") - 1);
                                    o.files[i] = o.files[i].substr(o.files[i].indexOf("]") + 1)
                                } else {
                                    if (exist(v.qualities)) {
                                        o.files_quality[i] = exist(qualities[i]) ? qualities[i] : ''
                                    } else {
                                        o.files_quality[i] = i + 1
                                    }
                                }
                                var is = 0;
                                if (exist(v.default_quality) && q == -1) {
                                    if (String(v.default_quality).indexOf("num:") == 0) {
                                        if (v.default_quality.substr(4) * 1 == i) {
                                            is = 1
                                        }
                                    }
                                    if (v.default_quality == o.files_quality[i]) {
                                        is = 1
                                    }
                                    if (v.default_quality == "max" && i == o.files.length - 1) {
                                        is = 1
                                    }
                                }
                                if (exist(o.default_quality)) {
                                    if (o.default_quality == o.files_quality[i]) {
                                        is = 1;
                                        q = i
                                    }
                                }
                                if (is == 1) {
                                    o.current_file = i;
                                    o.current_quality = i
                                }
                                o.files[i] = Prefile(o.files[i])
                            }
                        }
                    } else {
                        o.files[0] = Prefile(o.files[0])
                    }
                    return o.files[o.current_file]
                }
            } else {
                return x
            }
        };

        function Prefile(x) {
            if (exist(v.prefile) && x.indexOf("//") == -1) {
                x = v.prefile + x
            }
            return x
        };
        this.InvertPlaylist = function () {
            if (o.playlist) {
                var x = o.playlist.reverse();
                for (var i = 0; i < x.length; i++) {
                    x[i].pjs_i = i
                }
                o.playlist = x;
                o.controls.UpdatePlaylist(o.playlist)
            }
        };
        this.UpdatePlaylist = function (x) {
            if (typeof (x) == 'object') {
                o.playlist_dic = [];
                o.playlist_source = copyObject(x);
                o.playlist = IndexPlaylist(x);
                if (o.controls) {
                    o.controls.UpdatePlaylist(o.playlist)
                }
            }
        };
        this.NewFile = function (x, y, z) {
            !exist(y) ? v.autoplay = 1 : '';
            !exist(z) ? v.preload = 0 : '';
            v.duration = undefined;
            v.end = undefined;
            v.delete = undefined;
            o.media_error != 2 ? o.media_error = false : '';
            o.metadata = false;
            o.pipwebkit = false;
            o.reloadTimer = 0;
            o.gatracked = [];
            o.checknative = false;
            o.gained = false;
            o.dvr = false;
            o.quartile = [false, false, false];
            o.sess = randomstr();
            o.sesstime = 0;
            o.file_type != 'pjs' && o.sbt ? o.sbt.remove() : '';
            if (v.vast_midroll_limit > 1) {
                if (exist(o.midrollo) && v.midrolls == 1) {
                    for (var i in o.midrollo) {
                        o.midrollo[i].worked = undefined
                    }
                    v.vast_midroll_limit--
                }
            }
            if (o.err404v) {
                o.err404v.remove()
            }
            if (o.media.status() == "playing") {
                this.Stop()
            }
            if (exist(o.share)) {
                o.share.Remove()
            }
            if (exist(o.reloadErrorTimeout)) {
                clearTimeout(o.reloadErrorTimeout)
            }
            js("new");
            o.actions.VastRecover();
            x = this.File(x);
            if (y == 1) {
                o.file_type = ''
            }
            o.media.File(x);
            if ((o.system.mobile || o.system.safari) && !exist(y)) {
                o.actions.Play()
            }
            if (exist(o.custom_aspect)) {
                o.mediascale = {
                    x: 1,
                    y: 1,
                    x0: 1,
                    y0: 1
                };
                o.media.normalscale()
            }
            gaTracker("play", "Play");
            o.media.NativeControls();
            o.controls.QualityChangedNoHand();
            o.controls.AudioTrackChangedNoHand();
            o.controls.refresh();
            o.mediatags ? o.mediatags.read() : ''
        };
        this.TitleTemplate = function (x) {
            var y = false;
            if (x && o.title_template) {
                v.title = o.title_template;
                for (var i = 1; i < 6; i++) {
                    if (exist(x['t' + i])) {
                        v.title = v.title.replace("{" + i + "}", x['t' + i]);
                        y = true
                    }
                }
            }
            return y
        };
        this.MediaReady = function () {
            if (v.autoplay == 1) {
                if (v.observer == 1) {
                    setTimeout(function () {
                        o.actions.Play()
                    }, 500)
                } else {
                    this.Play()
                }
                v.autoplayed = 1
            }
            Thumbs()
        };
        this.Thumbs = function () {
            Thumbs()
        };

        function Thumbs() {
            if (v.thumbs == 1) {
                if (typeof PluginThumbs !== "undefined") {
                    o.th = new PluginThumbs()
                }
            }
        }
        this.NativeControls = function () {
            var x = false;
            if (o.system.mobile) {
                x = true;
                if (v.nativenotiphone == 1 && o.system.iphone) {
                    x = false
                }
                if (v.nativenotipad == 1 && o.system.ipad) {
                    x = false
                }
                if (v.nativenotios == 1 && o.system.ios) {
                    x = false
                }
                if (v.nativenotandroid == 1 && o.system.android) {
                    x = false
                }
            }
            if (v.nativeontv == 1 && o.system.tv) {
                x = true
            }
            return x
        };
        this.Metadata = function () {
            o.media.Volume(v.volume);
            if (o.muted) {
                o.media.Mute()
            }
            o.metadata = true;
            o.controls.refresh();
            if (!o.play && !o.start) {
                v.effects == 1 ? o.effects.api("pause") : ''
            }
            if (o.casting && o.tagvideo) {
                o.chromecast.Go()
            }
        };
        this.onPlayTag = function () {
            !o.onplay ? onPlay(true) : ''
        };

        function onPlay(x) {
            o.onplay = true;
            if (o.controls) {
                if (o.controls.SettingsVisible()) {
                    o.controls.Settings()
                }
            }
            if (o.droplist) {
                o.droplist.Close()
            } !x ? o.media.Play() : '';
            if (!o.checknative) {
                setTimeout(function () {
                    o.media.NativeControls()
                }, 500)
            } !o.play ? o.controls.Play() : '';
            v.effects == 1 ? o.effects.api("play") : '';
            v.vast == 1 ? o.actions.VastRecover('pauseroll') : '';
            if (o.system.mobile) {
                o.controls.HideInterval()
            }
            if (exist(o.share)) {
                o.share.isOpen() ? o.share.Hide() : ''
            }
            if (v.heartbeats == 1 && exist(v.heartbeat) && o.dt) {
                if (v.heartbeat != '' && !exist(o.heartbeatInterval)) {
                    o.heartbeatInterval = setInterval(Heartbeat, v.heartbeatinterval * 1000);
                    Heartbeat()
                }
            }
        }
        this.Play = function (noads) {
            if (!o.play) {
                o.actplay = true;
                var stop = false;
                if (o.file_type == "youtube") {
                    if (!o.media.YoutubeReady() && v.autoplay != 1 && v.preload == 1) {
                        stop = true;
                        if (window['YT']) {
                            v.autoplay = 1;
                            o.media.onYoutubeReady()
                        }
                    }
                }
                if (v.pass == 1 && v.passontime == 0) {
                    o.actions.Password();
                    stop = true
                }
                if (o.media_error || stop) {
                    if (o.media_error) {
                        Advertising("preroll") ? datetime(2) : ''
                    }
                } else {
                    o.newfile = false;
                    StopOtherPlayer(!o.start);
                    o.alert.close();
                    if (!o.start) {
                        js("start");
                        o.start = true;
                        if (v.toolbar.hideuntilstarted == 1) {
                            setTimeout(function () {
                                o.controls.resizetext()
                            }, 100)
                        }
                        if (v.toolbar.hideleavetimeout > 0 && v.autoplay == 1) {
                            o.starttimeout = true;
                            setTimeout(StartTimeout, v.toolbar.hideleavetimeout * 1000)
                        }
                        if (v.water == 1 && v.wid) {
                            PluginWater()
                        }
                        for (var i = 0; i < o.vsts.length; i++) {
                            if (v['vast_nofirst' + o.vsts[i]] == 1) {
                                localStorage.setItem("pljsfirst" + o.vsts[i], Date.now())
                            }
                        }
                        if (v.pjsstat == 1 && v.pjsstatid) {
                            PluginStat("start")
                        }
                        js("new");
                        o.controls.refresh();
                        gaTracker("play", "Play");
                        o.ab ? gaTracker("adblock", "AdBlock", 1) : ''
                    } else {
                        gaTracker("resume", "Resume")
                    }
                    if (v.fullonplay == 1 && !o.fullscreen) {
                        var dd = new Date();
                        var tt = dd.getTime();
                        if (tt - o.clicktime < 300) {
                            if (v.fullonplaymobile == 1) {
                                o.system.mobile ? this.Fullscreen() : ''
                            } else {
                                this.Fullscreen()
                            }
                        }
                    }
                    if (o.subtitle_on) {
                        if (v.subpausehide == 1) {
                            show2(o.subtitle)
                        }
                    }
                    if (o.err404v) {
                        o.err404v.remove()
                    }
                    if (noads != 1 && Advertising("preroll") || Advertising("intro")) {
                        datetime(2)
                    } else {
                        if (v.redirect == 1 && exist(v.redirectonplay) && !exist(options.redirect)) {
                            redirect(v.redirectonplay);
                            stop = true
                        }
                        if (!stop) {
                            log("Play");
                            if (o.file_type != 'pdf') {
                                o.media.duration() > 0 ? o.controls.Duration(o.media.time(), o.media.duration()) : ''
                            }
                            if (!o.start2) {
                                o.start2 = true;
                                if (v.toolbar.hideleavetimeout > 0 && v.autoplay == 1) {
                                    o.starttimeout = true;
                                    setTimeout(StartTimeout, v.toolbar.hideleavetimeout * 1000)
                                }
                            }
                            var playroll = false;
                            if (o.media.time() > 1 && v.pauserollonplay == 1 && noads != 1 && !isVastBgLoad() && !exist(o.vast) && !exist(o.vastloader)) {
                                playroll = Advertising("pauseroll")
                            }
                            if (playroll) {
                                isVastBgLoad() ? onPlay(false) : ''
                            } else {
                                onPlay(false)
                            }
                        }
                    }
                }
            } else {
                o.media ? o.media.Play() : ''
            }
        };

        function StartTimeout() {
            o.starttimeout = false;
            o.controls.refresh()
        }
        this.Pause = function () {
            if (o.play) {
                o.actplay = false;
                log("Pause");
                o.media.Pause();
                o.controls.Pause();
                js("pause");
                v.posteronpause ? ShowPoster() : '';
                v.posterhidepause == 1 ? HidePoster2() : '';
                v.effects == 1 ? o.effects.api("pause") : '';
                if (o.subtitle_on) {
                    if (v.subpausehide == 1) {
                        hide2(o.subtitle)
                    }
                }
                if (!exist(o.vast) && !exist(o.vastloader) && v.pauserollonplay == 0) {
                    Advertising("pauseroll")
                }
                o.onplay = false
            }
        };
        this.Mute = function () {
            o.media.Mute();
            o.controls.Mute();
            o.muted = true;
            js("mute")
        };
        this.Unmute = function () {
            o.media.Unmute();
            o.muted = false;
            o.controls.Unmute();
            js("unmute")
        };
        this.Volume = function (x, y) {
            x < 0.01 ? x = 0 : '';
            x > 1 ? x = 1 : '';
            if (x <= 0) {
                this.Mute();
                v.volume = 0;
                x = 0
            } else {
                if (o.muted) {
                    this.Unmute()
                }
                v.volume = x
            }
            js("volume", x);
            o.controls.Volume(x, y);
            o.media.Volume(x)
        };
        this.Waiting = function () {
            o.controls.Waiting()
        };
        this.StopWaiting = function () {
            o.controls ? o.controls.StopWaiting() : ''
        };
        this.Progress = function () {
            this.StopWaiting()
        };
        this.Seeked = function () {
            o.actions.UpdatePlay();
            this.StopWaiting()
        };
        this.Duration = function (time, duration) {
            if (o.continue && !o.start) {
                var f = o.continue.flag();
                if (f.t && f.d) {
                    time = f.t
                }
            }
            o.controls.Duration(time, duration)
        };
        this.LoadedData = function (time, duration) {
            if (exist(o.seekto) && o.file_type != "youtube" && !o.media.isLive()) {
                o.actions.Seek(o.seekto, false);
                o.seekto = undefined
            }
        };
        this.ScreenClick = function () {
            var d = new Date();
            o.clicktime = d.getTime();
            var x = false;
            if (o.controls.SettingsVisible() && v.settings.always != 1) {
                o.controls.Settings();
                x = true
            }
            if (o.droplist) {
                if (o.droplist.Visible()) {
                    o.droplist.Close();
                    x = true
                }
            }
            if (v.playlist.always == 0) {
                if (o.controls.PlaylistVisible() && v.playlist.autohide == 1) {
                    o.controls.Playlist();
                    x = true
                }
            }
            if (v.redirect == 1 && exist(v.redirectonclick) && !exist(options.redirect)) {
                redirect(v.redirectonclick);
                x = true
            }
            if (!x) {
                if (v.hotkey.on == 1 && v.hotkey.icons == 1 && v.hotkey.playiconbut == 1) {
                    PluginHotIcon('play', (o.play ? 0 : 1))
                }
                this.Toggle()
            }
        };
        this.ControlsBgClick = function () {
            if (o.controls.SettingsVisible()) {
                o.controls.Settings()
            }
        };
        this.Toggle = function () {
            if (o.media.status() == "playing") {
                this.Pause()
            } else {
                this.Play()
            }
            Sub()
        };
        this.Seek = function (sec, hand) {
            if (sec < o.media.duration()) {
                if (v.control_line.dontseekforward == 1) {
                    if (sec > o.media.time()) {
                        return
                    }
                }
                if (v.delete > 0) {
                    sec < v.delete ? sec = v.delete : ''
                }
                o.seeked_time = sec;
                o.media.Seek(sec);
                if (hand) {
                    o.controls.Seek(sec, o.media.duration())
                }
                o.seeking = true;
                o.seeking_time = o.media.time();
                Sub(o.seeking_time)
            }
        };
        this.Open = function (url, target, endfull) {
            if (o.media.status() == "playing" && o.mode != 'audio') {
                Pause();
                if (o.fullscreen && endfull) {
                    o.controls.Normalscreen()
                }
            }
            window.open(url, target)
        };
        this.Download = function () {
            var x = o.media.currentFile();
            if (exist(v.download)) {
                x = v.download
            }
            if (x != '') {
                js("download");
                var win = window.open(x, (v.downself == 1 ? '_self' : '_blank'));
                win.focus()
            }
        };
        this.UpdatePlay = function () {
            var time = o.media.time();
            var duration = o.media.duration();
            o.controls.Played(time, duration)
        };
        this.Playing = function () {
            var time = o.media.time();
            var duration = o.media.duration();
            var delta = duration > 0 ? time / duration : 0;
            if (!o.seeking) {
                o.controls ? o.controls.Played((o.seekto > 0 ? o.seekto : time), duration) : ''
            } else {
                time != o.seeking_time ? o.seeking = false : ''
            }
            if ((v.ga == 1 || v.yamtr == 1) && duration > 0) {
                gaTrackPlay("play25", "Play 25%", delta, 0.25);
                gaTrackPlay("play50", "Play 50%", delta, 0.50);
                gaTrackPlay("play75", "Play 75%", delta, 0.75)
            }
            for (var i = 0; i < 3; i++) {
                if (!o.quartile[i]) {
                    if (delta >= i * 0.25 + 0.25) {
                        Quartile(i)
                    }
                }
            }
            v.reloadlog == 1 ? log(1, time, duration) : '';
            if (v.reload == 1) {
                if (o.play) {
                    var z = false;
                    var rld = false;
                    if (v.reloadlive == 1) {
                        if (!o.media.isLive()) {
                            z = true
                        }
                    }
                    if (time > 0) {
                        if (time == o.time && !z) {
                            rld = true
                        } else {
                            o.reloadTimer = 0
                        }
                        o.time = time
                    } else {
                        if (v.reloadstart == 1) {
                            var ld = o.media.loaded();
                            v.reloadlog == 1 ? log(2, ld, o.timeld) : '';
                            if (!z) {
                                if (ld == o.timeld) {
                                    rld = true
                                } else {
                                    o.reloadTimer = 0
                                }
                            }
                            o.timeld = ld
                        }
                    }
                    if (rld) {
                        o.reloadTimer++;
                        v.reloadlog == 1 ? log(3, o.reloadTimer) : '';
                        if (o.reloadTimer == v.reloadtimeout * (1000 / o.timerTime)) {
                            o.actions.Reload()
                        }
                    }
                }
            }
            if (v.vast == 1) {
                v.nomidroll != 1 && v.midrolls == 1 ? MidrollOverlay("midroll", time, duration) : '';
                v.nooverlay != 1 && v.overlays == 1 ? MidrollOverlay("overlay", time, duration) : ''
            }
            if (v.intros == 1 && v.introstart > 0) {
                if (time >= v.introstart) {
                    if (!exist(o.vast)) {
                        if (Advertising("intro")) {
                            o.media.Pause();
                            o.controls.Pause()
                        }
                        v.introstart = 0
                    }
                }
            }
            SettingsTimers("play");
            if (v.pass == 1 && v.passontime > -1) {
                PasswordTime(time, duration)
            }
            if (o.subtitle_on) {
                Sub(time)
            }
            if (o.storage && v.timestore == 1) {
                if (o.continue) {
                    o.continue.write(time, duration)
                }
            }
            if (exist(v.end)) {
                if (v.end > 0 && time > v.end) {
                    if (o.file_type == "youtube") {
                        o.media.Pause();
                        o.media.Seek(v.start > 0 ? v.start : 0)
                    } else {
                        o.media.Recover();
                        o.actions.Stop()
                    }
                    v.start > 0 ? o.seekto = v.start : '';
                    o.actions.Ended()
                }
            }
            if (exist(v.remove)) {
                var r1 = v.remove.split(",");
                for (var i = 0; i < r1.length; i++) {
                    var r2 = r1[i].split("-");
                    if (r2.length == 2) {
                        if (time > r2[0] && time < r2[1]) {
                            o.media.Seek(r2[1])
                        }
                    }
                }
            }
        };

        function Quartile(x) {
            o.quartile[x] = true;
            if (v.timestore == 1 && v.playedstore == 1 && v.playedquartile == x) {
                if (o.storage && o.plid) {
                    o.continue ? o.continue.writePl(o.plid) : ''
                }
            }
        }

        function gaTrackPlay(x, y, t, p) {
            if (!exist(o.gatracked[y])) {
                if (t > p) {
                    gaTracker(x, y, 1)
                }
            }
        };
        this.Reload = function () {
            o.reloadTimer = 0;
            if (v.reloadjustevent == 1) {
                js("reload")
            } else {
                o.seekto > 0 || o.media.isLive() ? '' : o.seekto = o.media.time();
                var openpl = o.controls.PlaylistVisible();
                js("reload");
                o.media.reload();
                openpl && v.playlist.autohide == 1 ? o.controls.PlaylistShow() : ''
            }
        };
        this.Stopped = function () {
            o.controls.Played(0, 0);
            o.controls.Loaded(0, 0);
            o.actions.Duration(0, 0);
            o.controls.StopWaiting()
        };
        this.Loading = function () {
            var time = o.media.loaded();
            if (v.pjsiframed == 1) {
                js("loaded", time)
            }
            var duration = o.media.duration();
            o.controls ? o.controls.Loaded(time, duration) : ''
        };
        this.Ended = function () {
            js("fileend");
            if (v.loop == 1) {
                if (o.file_type == "youtube") {
                    this.Stop()
                }
                v.vast == 1 ? o.actions.VastRecover('preroll') : '';
                if (v.start > 0) {
                    o.actions.Seek(v.start)
                }
                this.Play()
            } else {
                if (o.media.isLive() || o.file_type == "youtube") {
                    this.Stop()
                } else {
                    if (v.finishrewind == 1) {
                        o.actions.Seek((v.start > 0 ? v.start : 0), true);
                        if (o.system.ie) {
                            o.media.Pause()
                        }
                    }
                }
                o.controls.onEnded();
                v.intros == 1 ? v.outros = 1 : '';
                if (Advertising("postroll") || Advertising("outro")) { } else {
                    End()
                }
            }
        };
        this.Fullscreen = function () {
            var stop = false;
            var error = false;
            o.fs_error = false;
            o.fullscreen_process = true;
            setTimeout(function () {
                o.fullscreen_process = false
            }, 3000);
            for (var x in o.motions) {
                if (o.motions.hasOwnProperty(x)) {
                    if (exist(o.motions[x])) {
                        try {
                            o.motions[x].TheEnd2()
                        } catch (e) { }
                    }
                }
            }
            try {
                o.fullscreen_start = true;
                if (((o.system.ios && v.nativefullios == 1) || (o.system.android && v.nativefulldroid == 1)) && o.tagvideo && !o.nativecontrols) {
                    var x = o.media.tag();
                    if (x) {
                        if (x.webkitSupportsFullscreen) {
                            NativeEnterFs();
                            stop = true
                        }
                    }
                }
                if (!stop) {
                    var fspr;
                    var y = o.frame;
                    if (y.requestFullscreen) {
                        o.realfullscreen = true;
                        fspr = y.requestFullscreen({
                            navigationUI: "hide"
                        });
                        if (fspr !== undefined) {
                            fspr.then(function () { }).catch(function (error) { })
                        }
                    } else if (y.requestFullScreen) {
                        y.requestFullScreen({
                            navigationUI: "hide"
                        });
                        o.realfullscreen = true
                    } else if (o.frame.mozRequestFullScreen) {
                        y.mozRequestFullScreen({
                            navigationUI: "hide"
                        });
                        o.realfullscreen = true
                    } else if (y.webkitRequestFullScreen) {
                        y.webkitRequestFullScreen({
                            navigationUI: "hide"
                        });
                        o.realfullscreen = true
                    } else if (y.msRequestFullscreen) {
                        y.msRequestFullscreen();
                        o.realfullscreen = true
                    }
                }
            } catch (e) {
                error = true;
                log(e)
            }
            if (!o.realfullscreen && !stop) {
                if (o.system.webkit && o.iniframe) {
                    NativeEnterFs()
                } else {
                    this.FullscreenUI()
                }
            }
            if (!error) {
                setTimeout(PostFullscreen, 200)
            }
        };

        function NativeEnterFs() {
            var x = o.media.tag();
            if (x) {
                o.nativefull = true;
                o.media.nativeSubtitle();
                x.webkitEnterFullScreen();
                x.addEventListener("webkitendfullscreen", iosExitFullscreen)
            }
        }

        function NativeExitFs() {
            var x = o.media.tag();
            if (x) {
                x.webkitExitFullscreen()
            }
        };
        this.NativeExitFs = function () {
            NativeExitFs()
        };

        function PostFullscreen() {
            if (o.fs_error != true) {
                if (o.ispipkit) {
                    o.media.PipWebkit()
                }
                if (v.hotkey.volumewheelfull == 1) {
                    VolumeWheelX(true);
                    o.volumewheel = true
                }
                v.effects == 1 ? o.effects.api("full") : '';
                js("fullscreen");
                gaTracker("full", "Fullscreen", 1)
            }
        };
        var volumewheelin;
        var lastwheel = {
            x: 0,
            y: 0
        };

        function VolumeWheel(e) {
            if (o.droplist) {
                if (o.droplist.OpenScroll()) {
                    return
                }
            }
            o.hidden_volume_over = true;
            clearInterval(volumewheelin);
            volumewheelin = setInterval(function () {
                o.hidden_volume_over = false;
                o.controls.resize();
                lastwheel = {
                    x: 0,
                    y: 0
                };
                clearInterval(volumewheelin)
            }, 2000);
            o.controls.resize();
            e.preventDefault();
            e.deltaX != 0 ? lastwheel.x++ : lastwheel.x--;
            e.deltaY != 0 ? lastwheel.y++ : lastwheel.y--;
            if (e.wheelDelta != 0) {
                if (lastwheel.x > lastwheel.y) {
                    if (e.deltaX > 0) {
                        o.actions.Volume(parseFloat(v.volume) - v.hotkey.wheelstep / 10, "no")
                    } else {
                        o.actions.Volume(parseFloat(v.volume) + v.hotkey.wheelstep / 10, "no")
                    }
                } else {
                    if (e.deltaY > 0) {
                        o.actions.Volume(parseFloat(v.volume) + (o.system.win ? -v.hotkey.wheelstep / 10 : v.hotkey.wheelstep / 10), "no")
                    } else {
                        o.actions.Volume(parseFloat(v.volume) - (o.system.win ? -v.hotkey.wheelstep / 10 : v.hotkey.wheelstep / 10), "no")
                    }
                }
                o.controls.volumescroll()
            }
        }

        function iosExitFullscreen() {
            if (o.system.ios) {
                o.media.removeNativeSubtitle();
                js("exitfullscreen")
            }
            o.nativefull = false
        }
        this.FullscreenUI = function () {
            if (o.fullscreen_start) {
                o.fullscreen = true;
                o.controls.Fullscreen();
                if (!o.realfullscreen) {
                    if (exist(o.parentIframe)) {
                        try {
                            css(o.parentIframe, {
                                'width': '100%',
                                'height': '100%',
                                'position': 'fixed',
                                'left': 0,
                                'top': 0,
                                'zIndex': "100000"
                            })
                        } catch (err) { }
                    }
                    css(o.frame, {
                        'width': '100%',
                        'height': '100%',
                        'position': 'fixed',
                        'left': 0,
                        'top': 0,
                        'zIndex': "100000"
                    });
                    o.screen_w = o.frame.offsetWidth;
                    o.screen_h = o.frame.offsetHeight;
                    try {
                        document.body.style.overflow = 'hidden';
                        if (!exist(o.playlist)) {
                            document.ontouchmove = function (e) {
                                e.preventDefault()
                            }
                        }
                    } catch (err) { }
                }
                if (v.fullblack == 1) {
                    css(o.frame, {
                        'backgroundColor': '#000000'
                    })
                }
                if (o.droplist) {
                    o.droplist.Close()
                }
                Sub();
                o.fullscreen_start = false
            }
        };
        this.Normalscreen = function () {
            _fullscreen_end = true;
            if (document.cancelFullScreen) {
                document.cancelFullScreen()
            } else if (document.exitFullscreen) {
                document.exitFullscreen()
            } else if (document.cancelFullscreen) {
                document.cancelFullscreen()
            } else if (document.mozCancelFullScreen) {
                document.mozCancelFullScreen()
            } else if (document.webkitCancelFullScreen) {
                document.webkitCancelFullScreen()
            } else if (document.msExitFullscreen) {
                document.msExitFullscreen()
            }
            if (!o.realfullscreen) {
                this.NormalscreenUI(false)
            }
        };
        this.changeAspect = function (x, y) {
            NewAspect(x, y)
        };

        function NewAspect(x, frmvst) {
            if (exist(o.vast) && !frmvst) {
                o.resizeonplay = x
            } else {
                var stop = false;
                var coh = o.container_w / x;
                if (exist(o.parentIframe) && v.notframe != 1) {
                    try {
                        css(o.parentIframe, {
                            'height': coh
                        })
                    } catch (err) {
                        stop = true;
                        log("iframe crossdomain issue")
                    }
                }
                if (!stop) {
                    o.aspect = x;
                    o.container_h = coh;
                    if (o.aspect > 0) {
                        css(o.container, {
                            'height': coh
                        })
                    }
                    js("height", coh)
                }
                if (o.vast && !o.fullscreen) {
                    o.screen_h = coh;
                    o.vast.Resize()
                }
            }
        };
        this.NormalscreenUI = function (x) {
            if (_fullscreen_end || x) {
                o.fullscreen = false;
                o.nativefull = false;
                if (!o.realfullscreen) {
                    if (exist(o.parentIframe)) {
                        try {
                            css(o.parentIframe, {
                                'position': 'static',
                                'left': 0,
                                'top': 0,
                                'zIndex': 'unset'
                            });
                            css(o.parentIframe, o.parentIframe_style);
                            css(o.parentIframe, {
                                'width': o.normal_w,
                                'height': o.normal_h
                            })
                        } catch (err) { }
                    }
                    css(o.frame, {
                        'width': o.normal_w,
                        'height': o.normal_h,
                        'position': 'absolute',
                        'left': 0,
                        'top': 0,
                        'zIndex': 'unset'
                    });
                    try {
                        document.body.style.overflow = 'auto';
                        document.ontouchmove = function (e) {
                            return true
                        }
                    } catch (err) { }
                }
                o.controls.Normalscreen();
                if (v.fullblack == 1) {
                    css(o.frame, {
                        'backgroundColor': v.screencolor
                    });
                    if (v.transparent == 1) {
                        o.frame.style.backgroundColor = 'transparent'
                    } else {
                        css(o.frame, {
                            'backgroundColor': v.screencolor
                        })
                    }
                }
                if (v.hotkey.volumewheelfull == 1) {
                    VolumeWheelX(false);
                    o.volumewheel = false
                }
                if (o.droplist) {
                    o.droplist.Close()
                }
                Sub();
                o.subdrag ? o.subdrag = false : '';
                o.controls.PlaylistHere();
                _fullscreen_end = false;
                js("exitfullscreen");
                o.realfullscreen = false;
                o.fullscreen_process = false
            }
        };
        this.volumewheel = function (x) {
            VolumeWheelX(x)
        };

        function VolumeWheelX(x) {
            lastwheel = {
                x: 0,
                y: 0
            };
            if (x) {
                window.addEventListener("wheel", VolumeWheel)
            } else {
                clearInterval(volumewheelin);
                window.removeEventListener("wheel", VolumeWheel)
            }
        }
        this.Stop = function () {
            v.preload = 0;
            o.controls.Pause();
            o.actions.Stopped();
            o.media.Volume(v.volume);
            if (o.controls.SettingsVisible()) {
                o.controls.Settings()
            }
            if (o.muted) {
                this.Mute()
            }
            if (exist(o.heartbeatInterval)) {
                clearInterval(o.heartbeatInterval);
                o.heartbeatInterval = null
            }
            Sub(0);
            log("stop");
            js("stop")
        };
        this.StopMedia = function () {
            v.preload = 0;
            v.autoplay = 0;
            o.media.Recover();
            o.actions.Stop()
        };
        this.SetQuality = function (x) {
            if (exist(o.current_quality)) {
                if (o.current_quality != x) {
                    o.current_quality = x;
                    if (v.qualitystore == 1) {
                        o.default_quality = o.files_quality[x];
                        if (o.storage) {
                            localStorage.setItem("pljsquality", o.default_quality)
                        }
                    }
                    o.media.SetQuality(x);
                    js("quality", o.files_quality[x]);
                    o.controls.QualityChanged(x)
                }
            }
        };
        this.AirplayChanged = function () {
            o.controls ? o.controls.AirplayChanged() : ''
        };
        this.SetAudioTrack = function (x) {
            if (exist(o.current_audiotrack)) {
                if (o.current_audiotrack != x) {
                    o.current_audiotrack = x;
                    if (v.trackstore == 1) {
                        o.default_audio = v.default_audio = o.files_audiotrack[x];
                        if (o.storage) {
                            localStorage.setItem("pljstrack", o.default_audio)
                        }
                    }
                    o.media.SetAudioTrack(x);
                    js("audiotrack", x);
                    o.controls.SettingChanged("audiotrack")
                }
            }
        };
        this.SetSpeed = function (x, z) {
            var y = x;
            String(y).indexOf('.') > 0 ? z = 1 : '';
            if (!z) {
                y = x == o.speed1 ? 1 : o.files_speed[x];
                o.current_speed = x
            }
            if (o.line_speed) {
                if (x == o.custom_speed) {
                    return
                }
                o.custom_speed = y;
                for (var i = 0; i < o.files_speed.length; i++) {
                    if (y <= o.files_speed[i]) {
                        o.current_speed = i;
                        break
                    }
                }
            }
            if (o.storage && v.speedstore == 1) {
                localStorage.setItem("pljsspeed", y)
            }
            js("speed", y);
            o.media.SetSpeed(y);
            o.controls.SettingChanged("speed")
        };

        function Sub(x) {
            o.sbt ? o.sbt.show(exist(x) ? x : o.media.time()) : ''
        };
        this.RenewSubtitle = function () {
            if (o.sbt) {
                Sub();
                o.sbt.style()
            }
        };
        this.Subtitle = function (x) {
            if (typeof (PluginSub) == 'function') {
                !o.sbt ? o.sbt = new PluginSub() : '';
                o.sbt.start(x)
            }
        };
        var vast_and;
        var vast_or;
        var vast_type;
        var vasturl;

        function Advertising(x) {
            if (v["vast_" + x + "timebreak"] > 0 && o.storage) {
                var tb = localStorage.getItem("pljs" + x + "_" + o.d);
                if (tb) {
                    var ct = new Date();
                    o.clicktime = ct.getTime();
                    var ct2 = (ct.getTime() - tb) / 3600000;
                    if (ct2 < v["vast_" + x + "timebreak"]) {
                        return false
                    }
                }
            }
            if (v["vast_" + x + "timelimit"] > 0) {
                if (o.media.duration() > 0) {
                    if (o.media.duration() < v["vast_" + x + "timelimit"] * 60) {
                        if (v["vast_" + x + "timelimited"] > 0) {
                            v.vast_preroll_andlimit = v["vast_" + x + "timelimited"]
                        } else {
                            return false
                        }
                    }
                }
            }
            if (o.compilations.indexOf("VAST") != -1 && v.vast == 1 && !o.noads && v[x + 's'] == 1) {
                if (typeof VastVideo == "undefined") {
                    return false
                }
                if (x == "intro" || x == "outro") {
                    if (typeof PluginIntro !== "undefined") {
                        vasturl = [];
                        return PluginIntro(x)
                    }
                }
                if (exist(o.vast) || exist(o.vastloader)) {
                    if (!isVisible(o.vastcontainer)) {
                        return false
                    } else {
                        return true
                    }
                } else {
                    if (exist(v[x])) {
                        if (v[x].toString().indexOf(".") > -1 || v[x].toString().indexOf(":") > -1 || v[x].toString().indexOf("[yandex]") > -1) {
                            js("vast_init", x);
                            if (!isVastBgLoad(x) && x != "overlay") {
                                setTimeout(function () {
                                    !o.play ? o.actions.Waiting() : ''
                                }, 10);
                                Curtain()
                            }
                            vast_and = 0;
                            vast_or = 0;
                            vast_type = x;
                            vasturl = v[x].split(" and ");
                            o.vast_loaders = [];
                            o.adsinchain = vasturl.length;
                            o.adscounter = 1;
                            o.adsfirst = true;
                            for (var i = 0; i < vasturl.length; i++) {
                                vasturl[i] = vasturl[i].split(" or ")
                            }
                            v[x.concat("_", "recover")] = v[x];
                            v[x] = null;
                            o.vasttype = x;
                            if (x != 'overlay') {
                                o.vast = new VastVideo()
                            }
                            o.vastloader = new VastLoader();
                            for (var i = 0; i < vasturl.length; i++) {
                                for (var j = 0; j < vasturl[i].length; j++) {
                                    var _url = trim(vasturl[i][j]);
                                    if (_url.indexOf("[50%]") > 0) {
                                        var tmp = random(1, 2);
                                        vasturl[i][j] = vasturl[i][j].replace("[50%]", "");
                                        if (tmp == 2) {
                                            vasturl[i][j] = ''
                                        }
                                    }
                                }
                            }
                            if (v.vast_preload == 1) {
                                for (var i = 0; i < vasturl.length; i++) {
                                    var n = i == 0 ? 1 : 0;
                                    if (vasturl[i].length > n) {
                                        for (var j = n; j < vasturl[i].length; j++) {
                                            var _url = trim(vasturl[i][j]);
                                            if (o.system.ie9) {
                                                VastAddPreload(_url)
                                            } else {
                                                setTimeout(VastAddPreload, i * 100, _url)
                                            }
                                        }
                                    }
                                }
                            }
                            if (vasturl[0][0] == '') {
                                VastNext()
                            } else {
                                o.vastloader.Load(trim(vasturl[0][0]), x)
                            }
                            return true
                        } else {
                            return false
                        }
                    } else {
                        return false
                    }
                }
            } else {
                return false
            }
        };
        this.advertising = function (x) {
            Advertising(x)
        };

        function MidrollOverlay(w, x, d) {
            if (exist(o[w + 'o']) && v[w + 's'] == 1) {
                var y;
                for (var i in o[w + 'o']) {
                    if (o[w + 'o'].hasOwnProperty(i)) {
                        if (!exist(o[w + 'o'][i].worked) && exist(o[w + 'o'][i].time) && exist(o[w + 'o'][i].vast)) {
                            var z = o[w + 'o'][i].time.toString();
                            if (z) {
                                if (z.indexOf("%") > 0) {
                                    if (d > 0) {
                                        z = parseInt(z.substr(0, z.indexOf("%"))) * d / 100
                                    } else {
                                        z = -1
                                    }
                                } else {
                                    z = parseInt(z)
                                }
                                if (x >= z) {
                                    if (v['vast_' + w + 'rest'] > 0 && z > -1) {
                                        if (x - z >= v['vast_' + w + 'rest']) {
                                            z = -1
                                        }
                                    }
                                    if (z > -1) {
                                        y = o[w + 'o'][i].vast;
                                        v[w] = o[w + 'o'][i].vast;
                                        o[w + 'crtm'] = o[w + 'o'][i].time;
                                        o[w + 'skipimprsd'] = o[w + 'o'][i].skipimpessed;
                                        if (Advertising(w)) {
                                            o[w + 'o'][i].worked = true;
                                            break
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        };

        function isVastBgLoad(z) {
            var y = false;
            var x = ['midroll', 'pauseroll'];
            for (var i = 0; i < x.length; i++) {
                if (o.vasttype == x[i] || z == x[i]) {
                    if (v['vast_' + x[i] + 'bgload'] == 1) {
                        y = true
                    }
                }
            }
            return y
        };
        this.isVastBgLoad = function (x) {
            return isVastBgLoad(x)
        };
        this.VastImpression = function () {
            VastVisible();
            o.vasttype == "midroll" ? o.midrollimprsd.push(o.current_vast_url) : ''
        };
        this.VpaidStarted = function () {
            VastVisible()
        };

        function VastVisible() {
            if (isVastBgLoad()) {
                if (o.play) {
                    o.media.Pause();
                    o.controls.Pause()
                }
                css(o.vastcontainer, {
                    "opacity": 1,
                    "visibility": "visible",
                    "top": 0
                });
                o.vastfrombg = 1
            }
            if (o.nativefull && !o.realfullscreen) {
                NativeExitFs()
            }
        };
        this.VastReady = function (x) {
            o.vastloader = null;
            o.vastfrombg = 0;
            log("VAST ready");
            js("vast_ready", o.vasttype);
            if (x.type == "overlay") {
                var ovr = new VastOverlay(x);
                o.overlays.push(ovr)
            } else {
                if (exist(o.vast)) {
                    if (v.preload == 0 && v.vastbgpreload == 1 && o.media.time() == 0 && o.media.duration() == 0) {
                        v.preload = 1;
                        o.media.Preload()
                    }
                    if ((!o.vast.tagLive() || x.isVpaid) && o.vastgo > 0) {
                        log("VAST renew");
                        o.vast.Remove();
                        o.vast = null;
                        o.vast = new VastVideo()
                    }
                    if (isVastBgLoad()) {
                        if (o.vast_impressions == 0) {
                            css(o.vastcontainer, {
                                "opacity": 0,
                                "visibility": "hidden",
                                "top": 2000
                            })
                        }
                    } else {
                        if (o.play) {
                            o.media.Pause();
                            o.controls.Pause()
                        }
                    }
                    o.vastgo++;
                    if (o.adsfirst && v.vast_longtimeout > 0) {
                        clearTimeout(o.vast_longtimeout);
                        o.vast_longtimeout = setTimeout(VastLongTimeout, v.vast_longtimeout * 1000 * 60);
                        if (exist(v.vast_longtimemsg)) {
                            if (v.vast_longtimemsg != '') {
                                o.vast_longtomsg ? o.vast_longtomsg.remove() : '';
                                o.vast_longtomsg = new PluginVastTimeMsg()
                            }
                        }
                    }
                    o.adsfirst = false;
                    if (v.vast_prestarttimeout > 0) {
                        log("VAST startdelay");
                        js("vast_startdelay");
                        setTimeout(VastGo, v.vast_prestarttimeout * 1000, x)
                    } else {
                        VastGo(x)
                    }
                } else {
                    log("VAST alarm")
                }
            }
        };

        function VastGo(x) {
            o.vast.Go(x)
        }

        function VastLongTimeout() {
            if (exist(o.vast)) {
                if (o.vast.active() && o.vast_impressions == 0) {
                    o.vast.RemoveForNextAd();
                    log("VAST timeout " + v.vast_longtimeout);
                    vasturl = [];
                    VastRemoveAndPlay()
                }
            }
        }
        this.VastError = function () {
            js('vast_error', o.vasttype);
            log("VAST error");
            VastNext()
        };
        this.VastNext = function () {
            var stop = false;
            var nolimit = false;
            if (o.vasttype == "preroll") {
                if (v.vast_preroll_and2limit > 0 && o.vast_starts > 0) {
                    nolimit = true;
                    if (o.vast_impressions >= v.vast_preroll_and2limit) {
                        stop = true
                    }
                }
                if (v.vast_preroll_andlimit > 0 && !nolimit) {
                    if (v.vast_preroll_2andlimit == 1 && o.vast_starts == 0) { } else {
                        if (o.vast_impressions >= v.vast_preroll_andlimit) {
                            stop = true
                        }
                    }
                }
            } !stop ? VastNext() : VastRemoveAndPlay()
        };
        this.VastRemoveUrl = function (x) {
            if (v[o.vasttype + "_recover"]) {
                for (var i = 0; i < 3; i++) {
                    v[o.vasttype + "_recover"] = v[o.vasttype + "_recover"].replace(x + (i == 0 ? ' and ' : (i == 1 ? ' or ' : '')), '')
                }
            }
        };

        function VastNext() {
            if (vasturl.length > 0 && vasturl[vast_and]) {
                if (vast_or < vasturl[vast_and].length - 1) {
                    o.vast ? o.vast.RemoveForNextAd() : '';
                    vast_or++;
                    var _url = trim(vasturl[vast_and][vast_or]);
                    var _preloaded = VastPreloaded(_url);
                    if (_preloaded == 'skip') {
                        o.vastloader = new VastLoader();
                        o.vastloader.Load(_url, o.vasttype)
                    }
                    if (_preloaded == 'error') {
                        VastNext()
                    }
                } else {
                    VastRemoveAndPlay()
                }
            } else {
                VastRemoveAndPlay()
            }
        }

        function VastPreloaded(_url) {
            var x = 'skip';
            if (v.vast_preload == 1 && o.vast_loaders) {
                var find = false;
                var n = 0;
                for (var i = 0; i < o.vast_loaders.length; i++) {
                    if (o.vast_loaders[i].done == 0) {
                        if (o.vast_loaders[i].ldr.preloaded(_url)) {
                            o.vast_loaders[i].done = 1;
                            var y = o.vast_loaders[i].ldr.Status();
                            if (y == 'ready') {
                                o.vastloader = o.vast_loaders[i].ldr;
                                log("VAST preloaded");
                                o.vast_loaders[i].ldr.Ready();
                                x = y
                            } else {
                                if (y == '') {
                                    x = 'ok';
                                    log("VAST preloading");
                                    o.vastloader = o.vast_loaders[i].ldr;
                                    o.vast_loaders[i].ldr.disablePreload()
                                }
                                if (y == 'error') {
                                    x = 'error'
                                }
                            }
                            find = true
                        }
                        if (find && o.vast_loaders[i].load == 0) {
                            n++;
                            if (n < 6) {
                                VastPreloadLoad(o.vast_loaders[i])
                            } else {
                                break
                            }
                        }
                    }
                }
            }
            return x
        }
        this.VastInsertAnd = function (x, y) {
            if (x != '') {
                var z = vast_and;
                var moveOr2end = false;
                if (y) {
                    for (var j = 0; j < vasturl.length; j++) {
                        vasturl[j] == y ? z = j : ''
                    }
                }
                if (vasturl.length == 1) {
                    if (vasturl[0].length > 1 && vast_or < vasturl[0].length - 1 && vasturl[vast_or]) {
                        var last_ors = vasturl[vast_or].slice(1, 99);
                        vasturl[0].splice(vast_or + 1, 99);
                        moveOr2end = true
                    }
                }
                if (typeof (x) == "object") {
                    for (var i = 0; i < x.length; i++) {
                        vasturl.splice(z + i + 1, 0, [x[i]]);
                        if (o.system.ie9) {
                            VastAddPreload(x[i])
                        } else {
                            setTimeout(VastAddPreload, i * 100, x[i])
                        }
                    }
                } else {
                    if (typeof (x) == "string") {
                        vasturl.push([x]);
                        VastAddPreload(x)
                    }
                }
                if (moveOr2end) {
                    vasturl[vasturl.length - 1] = vasturl[vasturl.length - 1].concat(last_ors)
                }
            }
        };
        this.VastInsertOr = function (x, y) {
            if (x != '') {
                var z = vast_and;
                if (y) {
                    for (var j = 0; j < vasturl.length; j++) {
                        vasturl[j] == y ? z = j : ''
                    }
                }
                if (vasturl[z]) {
                    if (typeof (x) == "object") {
                        for (var i = 0; i < x.length; i++) {
                            vasturl[z].push(x[i])
                        }
                    } else {
                        if (typeof (x) == "string") {
                            vasturl[z].push(x)
                        }
                    }
                }
            }
        };
        this.VastRemoveAndPlay = function (x) {
            VastRemoveAndPlay(x)
        };

        function VastAddPreload(x) {
            if (v.vast_preload == 1 && o.vast_loaders) {
                var i = 0;
                for (var i = 0; i < vasturl.length; i++) {
                    if (vasturl[i] == x) {
                        if (vast_and >= i) {
                            return
                        } else { }
                    }
                }
                if (vasturl.length == 1 && vasturl[0].length > 1) { } else {
                    var n = 0;
                    for (i = 0; i < o.vast_loaders.length; i++) {
                        o.vast_loaders[i].done == 0 ? n++ : ''
                    }
                    o.vast_loaders.push({
                        load: 0,
                        done: 0,
                        x: trim(x),
                        t: o.vasttype,
                        ldr: new VastLoader(true)
                    });
                    n < 5 ? VastPreloadLoad(o.vast_loaders[o.vast_loaders.length - 1]) : ''
                }
            }
        }

        function VastPreloadLoad(x) {
            if (x) {
                x.load = 1;
                x.ldr.Load(x.x, x.t)
            }
        }

        function VastRemoveAndPlay(dontplay) {
            var stop = false;
            var nolimit = false;
            if (o.vasttype == "preroll") {
                if (v.vast_preroll_and2limit > 0 && o.vast_starts > 0) {
                    nolimit = true;
                    if (o.vast_impressions >= v.vast_preroll_and2limit) {
                        stop = true
                    }
                }
                if (v.vast_preroll_andlimit > 0 && !nolimit) {
                    if (v.vast_preroll_2andlimit == 1 && o.vast_starts == 0) { } else {
                        if (o.vast_impressions >= v.vast_preroll_andlimit) {
                            stop = true
                        }
                    }
                }
            }
            if (vasturl.length > 0 && vast_and == vasturl.length - 1) {
                if (vasturl[0][0].indexOf("js:") == 0) {
                    vast_and = -1;
                    vasturl = [
                        [vasturl[0][0]]
                    ]
                }
            }
            if (o.vast_stop == 2) {
                stop = true
            }
            if (vasturl.length > vast_and + 1 && !stop) {
                o.vast.RemoveForNextAd();
                vast_and++;
                o.adscounter++;
                vast_or = 0;
                var _url = trim(vasturl[vast_and][0]);
                var _preloaded = VastPreloaded(_url);
                if (_preloaded == 'skip') {
                    o.vastloader = new VastLoader();
                    o.vastloader.Load(_url, vast_type)
                }
                if (_preloaded == 'error') {
                    VastRemoveAndPlay(dontplay)
                }
            } else {
                RemoveCurtain();
                o.controls.StopWaiting();
                if (exist(o.vast)) {
                    o.vast.Remove();
                    o.vast = null
                }
                o.vastloader = null;
                vasturl = [];
                vast_or = 0;
                vast_and = 0;
                o.shwvstfnsh != 1 ? js("vast_finish", o.vasttype) : '';
                o.shwvstfnsh = 0;
                if (v.vast_ima == 1) {
                    if (o.ima) {
                        o.ima.Destroy();
                        o.ima = undefined
                    }
                }
                vast_type = '';
                o.vast_impressions = 0;
                clearTimeout(o.vast_longtimeout);
                o.vast_longtomsg ? o.vast_longtomsg.remove() : '';
                o.vast_starts++;
                if (o.vasttype == "preroll" || (o.vasttype == "pauseroll" && v.pauserollonplay == 1) || o.vasttype == "midroll") {
                    if (v.file != '?') {
                        o.media.AfterVast();
                        var re;
                        if (o.file_type == "youtube" && !o.vastclick && o.system.ios) {
                            re = true;
                            o.vasttype == "preroll" ? o.media.reYT() : ''
                        }
                        if (re || dontplay == 'dontplay' || v.vast_dontplay == 1) { } else {
                            o.actions.Play(1)
                        }
                    }
                }
                if (o.resizeonplay > 0) {
                    NewAspect(o.resizeonplay);
                    o.resizeonplay = 0
                }
                if (o.vasttype == "postroll") {
                    End()
                }
                o.vastclick = false;
                o.vasttype = null
            }
        };
        this.EmptyVastUrl = function () {
            vasturl = [
                ['']
            ]
        };
        this.VastRecover = function (y) {
            var x = ['preroll', 'pauseroll', 'postroll', 'intro', 'outro'];
            var z;
            for (var i = 0; i < x.length; i++) {
                z = false;
                if (y) {
                    y != x[i] ? z = true : ''
                }
                if (!z && exist(v[x[i].concat("_", "recover")])) {
                    v['vast_' + x[i].concat("_", "limit")]--;
                    if (v['vast_' + x[i].concat("_", "limit")] > 0) {
                        v[x[i]] = v[x[i].concat("_", "recover")];
                        v[x[i].concat("_", "recover")] = null
                    }
                }
            }
        };
        this.Password = function () {
            Curtain();
            if (exist(o.pass)) {
                o.pass.Remove();
                o.pass = null
            }
            o.pass = new Pass()
        };
        this.RemovePassword = function () {
            RemoveCurtain();
            o.pass.Remove();
            o.pass = null
        };
        this.Curtain = function () {
            Curtain()
        };
        this.RemoveCurtain = function () {
            RemoveCurtain()
        };

        function Curtain() {
            if (o.curtain) { } else {
                o.curtain = createElement("div");
                o.frame.appendChild(o.curtain);
                css(o.curtain, {
                    "width": "100%",
                    "height": "100%",
                    "position": "absolute",
                    "top": 0,
                    "left": 0,
                    "background": "#000000",
                    "opacity": 0.1
                });
                o.curtain.style.zIndex = 1001
            }
        };

        function RemoveCurtain() {
            if (o.curtain) {
                o.frame.removeChild(o.curtain);
                o.curtain = null
            }
        };

        function ShowPoster() {
            if (exist(o.poster)) {
                if (v.poster != o.currentposter) {
                    Poster(v.poster, o.poster, v.poster_scale)
                }
                show(o.poster);
                css(o.poster, {
                    "opacity": v.poster_a
                });
                o.controls.refresh()
            }
        };
        this.HidePoster = function () {
            if (exist(o.poster)) {
                if (isVisible(o.poster)) {
                    var t = o.media.time();
                    if (t == 0 && v.posterhidestart == 1) { } else {
                        if (v.posterhidetime > 0) {
                            clearTimeout(o.pstr_to);
                            o.pstr_to = setTimeout(HidePoster2, v.posterhidetime * 1000)
                        } else {
                            HidePoster2()
                        }
                    }
                }
            }
        };

        function HidePoster2() {
            clearTimeout(o.pstr_to);
            if (v.posteronpause == 1 && !o.play) { } else {
                css(o.poster, {
                    "opacity": 0
                });
                setTimeout(HidePoster3, 500)
            }
        }

        function HidePoster3() {
            if (!o.play && v.posterhide == 1) { } else {
                hide(o.poster)
            }
        }
        this.ShowPoster = function () {
            ShowPoster()
        };

        function StopOtherPlayer(x) {
            if (v.stopotherplayers == 1) {
                for (var i = 0; i < pljssglobal.length; i++) {
                    if (pljssglobal[i].api("id") != v.id) {
                        pljssglobal[i].api('pause')
                    }
                }
            }
            pljssglobalid = v.id
        }

        function IndexPlaylist(x) {
            var y = Object.keys(x).length;
            if (y > 0) {
                x = IndexPlaylistProcessor(x, y, '', -1)
            }
            return x
        }

        function IndexPlaylistProcessor(x, y, p, j) {
            var x2 = [];
            var stop;
            if (exist(x['playlist'])) {
                x = x['playlist'];
                y = x.length
            }
            var ii = 0;
            for (var i = 0; i < y; i++) {
                stop = false;
                if (exist(x[i]['id'])) {
                    x[i]['pjs_id'] = x[i]['id']
                }
                x[i]['id'] = "x" + p + '-' + i + (exist(x[i]['id']) ? '-' + x[i]['id'] : '');
                j == -1 && i == 0 && !exist(x[i]['folder']) ? o.pl_first_id = x[i]['id'] : '';
                if (!exist(o.pl_first_id)) {
                    j == 0 && !exist(x[i]['folder']) ? o.pl_first_id = x[i]['id'] : ''
                }
                x[i]['pjs_parent'] = p;
                x[i]['pjs_parent_i'] = j;
                x[i]['pjs_i'] = ii;
                if (exist(x[i]['comment'])) {
                    x[i]['title'] = x[i]['comment'];
                    var q1 = x[i]['file'] ? x[i]['file'].indexOf('[') : 0;
                    var q2 = x[i]['file'] ? x[i]['file'].indexOf(']') : 0;
                    if (q1 > 0 && q2 > 0) {
                        var s1 = x[i]['file'].substr(q1 + 1, q2 - q1 - 1);
                        var s2 = s1.split(",");
                        var s3 = '';
                        for (var k = 0; k < s2.length; k++) {
                            s3 += "[" + s2[k] + "]" + x[i]['file'].replace("[" + s1 + "]", s2[k]) + (k < s2.length - 1 ? "," : '')
                        }
                        x[i]['file'] = s3
                    }
                }
                if (exist(x[i]['playlist'])) {
                    x[i]['folder'] = x[i]['playlist']
                }
                if (!exist(x[i]['folder'])) {
                    if (exist(x[i]['file'])) {
                        if (x[i]['file'] == '' && !exist(x[i]['redirect'])) {
                            stop = true
                        }
                    } else {
                        stop = true
                    }
                }
                if (!stop) {
                    o.playlist_dic[x[i]['id']] = x[i];
                    ii += 1
                }
                if (exist(x[i]['folder'])) {
                    var z = Object.keys(x[i]['folder']).length;
                    if (z > 0) {
                        x[i]['folder'] = IndexPlaylistProcessor(x[i]['folder'], z, x[i]['id'], i)
                    }
                }
                if (!stop) {
                    x2.push(x[i])
                }
            }
            return x2
        }

        function FindFileInPlaylist() {
            var x = [];
            if (exist(v.plstart)) {
                if (v.plstart.indexOf("x-") != 0) {
                    for (var y in o.playlist_dic) {
                        if (o.playlist_dic.hasOwnProperty(y)) {
                            if (o.playlist_dic[y].pjs_id == v.plstart) {
                                v.plstart = y
                            }
                        }
                    }
                }
                if (exist(o.playlist_dic[v.plstart])) {
                    v.playlist.norootplstart == 1 ? v.playlist.openplaylistroot = 0 : '';
                    x = o.playlist_dic[v.plstart]
                } else {
                    x = o.playlist[0];
                    if (v.plstart == o.plcontinue) {
                        o.seekto = undefined
                    }
                }
            } else {
                x = o.playlist[0]
            }
            if (x) {
                for (var i = 0; i < 10; i++) {
                    if (exist(x['folder'])) {
                        x = x['folder'][0]
                    } else {
                        break
                    }
                }
                v.plstart = x.id;
                if (v.plstart == o.plcontinue) {
                    x.start = undefined
                }
            }
            return x
        }

        function End() {
            gaTracker("end", "End", 1);
            o.actions.VastRecover();
            if (o.storage && v.timestore == 1) {
                o.continue.write(0, o.media.duration())
            }
            if (o.controls.PlaylistExist()) {
                if (v.playlist.autoplaylist == 1 && o.controls.PlaylistNextExist()) {
                    o.controls.PlaylistNext();
                    if (o.play && o.system.ios && o.file_type != "native") { }
                } else {
                    End2()
                }
            } else {
                ShowPoster();
                js("finish")
            }
        }
        this.ShuffleEnd = function () {
            End2()
        };

        function End2() {
            if (v.playlist.playlistrewind == 1 && !o.controls.PlaylistNextExist()) {
                o.controls.PlaylistRewind();
                return
            }
            if (v.playlist.openplaylistafter == 1) {
                !o.controls.PlaylistVisible() ? o.controls.Playlist() : ''
            }
            ShowPoster();
            js("finish")
        }

        function fjs(x) {
            if (x.indexOf('js:') == 0) {
                try {
                    x = eval(x.substr(3))
                } catch (e) {
                    console.log(e.message)
                }
            }
            return x ? x : ''
        }

        function Heartbeat() {
            var vts = Math.floor(Date.now() / 1000);
            var fts = (exist(v.livets) ? v.livets : 0) + parseInt(o.media.time());
            var type = 0;
            o.system.desktop ? type = 1 : '';
            o.system.ios ? type = 2 : '';
            o.system.android ? type = 3 : '';
            o.system.winmob ? type = 4 : '';
            o.system.tv ? type = 5 : '';
            var url = v.heartbeat.replace("[vts]", vts);
            url = url.replace("[fts]", fts);
            url = url.replace("[dvtp]", type);
            var gif = document.createElement("img");
            gif.setAttribute('src', url);
            gif.setAttribute('height', '1px');
            gif.setAttribute('width', '1px');
            o.frame.appendChild(gif)
        }
    };
    var Media = function (url) {
        var url;
        var urls;
        var urls_and;
        var current_url;
        var _status = "";
        var _lastime = 0;
        var _ended = false;
        var _stopped = false;
        var _tags;
        var media;
        var media2;
        o.mediascale = {
            x: 1,
            y: 1,
            x0: 1,
            y0: 1
        };
        var wait;
        var plurls;
        var current_plurl = 0;
        var rldcnt = 0;
        if (typeof (url) == 'string') {
            url = trim(url);
            if (url.indexOf("[{") == 0) {
                try {
                    url = url.replace(/pjs'qt/ig, '"');
                    url = JSON.parse(url);
                    wait ? url = o.actions.File(url) : ''
                } catch (e) {
                    console.log(e);
                    url = "incorrect JSON"
                }
            }
            if (url.indexOf("#" + v.enc2) == 0) {
                url = o[o.fd[0]](url)
            }
            if (url) {
                if (url.indexOf("#" + v.enc3) == 0 && url.indexOf(v.file3_separator) > 0) {
                    url = o[o.fd[1]](url)
                }
            }
            if (url) {
                if (url.indexOf("#0") == 0) {
                    if (url.indexOf(o.pltxt) > 0) {
                        url = fd0(url.replace(o.pltxt, '')) + o.pltxt
                    } else {
                        url = fd0(url)
                    }
                }
            }
            if (v.fplace == 1) {
                url = fplace(url)
            }
            if (typeof (url) == 'string') {
                if (url.indexOf(".m3u") == url.length - 4 || url.indexOf(".txt") > 0) {
                    plurls = url.split(" or ");
                    PlaylistLoad()
                }
            }
        }
        o.mediacontainer = createElement("div");
        css(o.mediacontainer, {
            "position": "absolute",
            "top": 0,
            "left": 0,
            "width": "100%",
            "height": "100%",
            "transition": "transform 0.2s linear",
            "text-align": "center"
        });
        o.frame.appendChild(o.mediacontainer);
        if (!wait) {
            Start()
        }

        function PlaylistLoad() {
            url = plurls[current_plurl];
            if (url.indexOf(o.pltxt) > 0) {
                url = url.replace(o.pltxt, '');
                v.file = url
            }
            var xhr = XHR(url);
            xhr.onload = function () {
                if (this.readyState == 4 && this.status == 200) {
                    Playlist(this)
                } else {
                    PlaylistError(1)
                }
            };
            xhr.onerror = function (e) {
                PlaylistError(1)
            };
            xhr.send();
            wait = true
        }

        function PlaylistError(x) {
            if (current_plurl + 1 < plurls.length) {
                current_plurl++;
                PlaylistLoad();
                x = 0
            }
            if (x == 1) {
                onError("playlist not found or access denied")
            }
            if (x == 2) {
                onError("playlists JSON")
            }
        }

        function Playlist(x) {
            if (x.responseText) {
                var y = x.responseText;
                if (y.indexOf("#" + v.enc2) == 0) {
                    y = o[o.fd[0]](y)
                }
                if (y.indexOf("#" + v.enc3) == 0 && y.indexOf(v.file3_separator) > 0) {
                    y = o[o.fd[1]](y)
                }
                if (url.indexOf(".m3u") == url.length - 4) {
                    var m3u = y.split(/(\r\n\t|\n|\r\t)/gm);
                    url = [];
                    var m3ui = 1;
                    var m3ut = '';
                    for (var i = 0; i < m3u.length; i++) {
                        if (m3u[i].indexOf("#EXTINF") > -1) {
                            if (m3u[i].indexOf(" - ") > -1) {
                                var tmp = m3u[i].split(" - ");
                                m3ut = tmp[tmp.length - 1]
                            }
                        }
                        if (m3u[i].indexOf("http") > -1) {
                            url.push({
                                title: "" + (m3ut != '' ? m3ut : m3ui),
                                file: m3u[i]
                            });
                            m3ui++;
                            m3ut = ''
                        }
                    }
                } else {
                    y = y.replace(/(\r\n\t|\n|\r\t)/gm, "");
                    try {
                        url = JSON.parse(y)
                    } catch (e) {
                        PlaylistError(2)
                    }
                }
                if (exist(url.items)) {
                    url = YoutubePlaylist(url)
                }
                if (o.controls) {
                    if (v.playlist.openplaylistbefore == 1) {
                        if (!o.controls.PlaylistVisible()) {
                            o.controls.PlaylistShow()
                        }
                    }
                }
                Start();
                MainResize();
                setTimeout(function () {
                    js("playlist")
                }, 1)
            }
        }

        function Start() {
            url = o.actions.File(url);
            url && url != '?' ? File(url) : ''
        }

        function onError(x) {
            log("Error: " + x);
            var y = true;
            var yy = true;
            js("loaderror", x);
            if (urls) {
                if (urls.length > 0) {
                    current_url++;
                    y = current_url > urls.length - 1;
                    if (y && v.tryotherquality == 1) {
                        if (o.files.length > 1 && o.current_quality > 0) {
                            if (o.files_quality[o.current_quality].indexOf(Lang("loading_error")) == -1) {
                                o.files_quality[o.current_quality] = o.files_quality[o.current_quality] + ' (' + Lang("loading_error") + ')'
                            }
                            yy = false;
                            o.actions.SetQuality(o.current_quality - 1);
                            FileTo()
                        }
                    }
                    if (!y) {
                        var z = false;
                        o.seekto > 0 || !o.start || media.isLive() ? '' : o.seekto = Time();
                        if (o.file_type != FileType(urls[current_url]) || o.file_type != 'native') {
                            if (o.play) {
                                o.actions.Stop();
                                z = true
                            }
                        }
                        log("Alternative source", o.seekto);
                        File('or');
                        o.start && !o.vast ? media.Play() : '';
                        FileTo()
                    } else {
                        if (v.reload == 1 && yy) {
                            y = false;
                            ErrorReload()
                        }
                    }
                }
            }
            if (y && yy && x) {
                ErrorMsg(x, true)
            }
        };

        function ErrorMsg(x, mr) {
            gaTracker("error", "Error", true);
            if (v.alerts && !o.media_error) {
                if (v.alert404 == 1 && x == "not found") {
                    o.alert.txt(v.alert404text)
                } else {
                    o.alert.txt(x)
                }
                if (v.alert404v == 1 && exist(v.alert404video)) {
                    o.err404v = new PluginErrorVideo()
                }
            }
            mr ? o.media_error = true : '';
            if (o.play) {
                o.actions.StopWaiting();
                o.controls.Pause()
            }
            exist(o.poster) ? o.actions.ShowPoster() : '';
            js("error", x)
        }

        function ErrorReload() {
            rldcnt++;
            log("Error Reload Timeout " + rldcnt);
            exist(o.reloadErrorTimeout) ? clearTimeout(o.reloadErrorTimeout) : '';
            o.reloadErrorTimeout = setTimeout(ReloadTimeout, v.reloadtimeout * 1000)
        }

        function ReloadTimeout() {
            var x = existv(v.reloadtimes, 10);
            if (o.play) {
                if (rldcnt < x) {
                    o.actions.Reload()
                } else {
                    ErrorMsg('Reload Error ' + media.errorMessage())
                }
            }
        }
        this.onError = function () {
            onError(media.errorMessage())
        };
        this.onEnded = function (y) {
            log("Ended");
            _ended = true;
            var x = false;
            if (Duration() > 0 && !o.casting && !y) {
                var time = o.current_time;
                if (time + 10 < Duration()) {
                    log('Break (recovery)');
                    js("recovery");
                    media.Play();
                    media.Seek(time);
                    x = true
                }
            }
            if (!x) {
                o.actions.Ended();
                js("end")
            }
        };
        this.onPlay = function () {
            if (v.posterhidepause == 1) {
                exist(o.poster) ? o.actions.ShowPoster() : ''
            }
            v.posterhide == 1 ? o.actions.HidePoster() : '';
            o.controls.Play();
            o.actions.onPlayTag();
            if (v.tags == 1 && exist(v.tagsurl)) {
                if (v.tagsurl.length > 5) {
                    RadioTags();
                    clearInterval(_tags);
                    _tags = setInterval(RadioTags, v.tagsinterval * 1000)
                }
            }
            if (v.reload == 1) {
                if (rldcnt > 0 && o.media.duration() == 0) {
                    rldcnt = 0;
                    ErrorReload()
                }
            }
            js("play")
        };
        this.NativeControls = function () {
            if (v.nativecontrolsmobile == 1 && o.tagvideo) {
                if (o.actions.NativeControls()) {
                    o.nativecontrols = media.nativeControls();
                    o.controls.refresh()
                }
            }
            o.checknative = true
        };
        this.onPause = function () {
            o.actions.Pause()
        };
        this.onSeeking = function () {
            log("Seeking")
        };
        this.onSeeked = function () {
            log("Seeked");
            o.actions.Seeked();
            o.seeking_time ? js("seek", o.seeking_time) : ''
        };
        this.onMeta = function () {
            log("Metadata");
            rldcnt = 0;
            o.actions.Metadata()
        };
        this.onDuration = function () {
            if (media) {
                log("Duration", Duration());
                o.actions.Duration(Time(), Duration());
                js("duration", Duration());
                rldcnt = 0;
                if (exist(o.restart_audio)) {
                    o.actions.SetAudioTrack(o.restart_audio);
                    o.restart_audio = null
                }
            }
        };

        function Time() {
            var x = media.time();
            return x
        }

        function Duration() {
            var x = media.duration();
            return x
        }
        this.onVolume = function () { };
        this.onWaiting = function () {
            log("Waiting");
            o.actions.Waiting();
            js("waiting")
        };
        this.onTimeupdate = function () {
            if (_lastime != Time()) {
                o.actions.StopWaiting();
                if (_lastime == 0) {
                    if (v.posterhide == 1 && v.posterhidestart == 1) {
                        o.actions.HidePoster()
                    }
                }
            }
            _lastime = Time();
            js("time", _lastime);
            if (v.pip.on == 1) {
                if (typeof (PluginPip) == 'function') {
                    if (!media2 && v.pip.custom != 1 && v.file2 && v.file2 != '' && _lastime > 0) {
                        o.mediapip = new PluginPip();
                        media2 = o.mediapip.create()
                    }
                }
            }
        };
        this.onYoutubeReady = function () {
            if (o.file_type == "youtube") {
                media ? media.YoutubeReady() : ''
            }
        };
        this.playByYoutubeId = function (x) {
            o.actions.Stop();
            media.playId(x)
        };
        this.YoutubeReady = function () {
            if (o.file_type == "youtube" && media) {
                return media.ready()
            } else {
                return true
            }
        };
        this.getHLS = function () {
            return media.getHLS()
        };
        this.getDASH = function () {
            return media.getDASH()
        };
        this.SetQuality = function (x) {
            log("Quality", x);
            if ((o.file_type == "native" || o.file_type == o.ws || (o.file_type == "hls" && (v.hlsquality == 0 || HlsLevelsLength() < 2)) || (o.file_type == "dash" && (v.dashquality == 0 || DashLevelsLength() < 2))) && exist(o.files[x])) {
                var time = this.time();
                o.seekto > 0 ? '' : o.seekto = time;
                o.actions.Seek(time, false);
                File(o.files[x], true);
                o.actions.Play()
            }
            if (o.file_type == "hls" && v.hlsquality == 1 && HlsLevelsLength() > 1) {
                media.setHlsQuality(x)
            } else if (o.file_type == "dash" && v.dashquality == 1 && DashLevelsLength() > 1) {
                media.setDashQuality(x)
            } else if (o.file_type == "youtube" || o.file_type == "dm") {
                media.setQuality(x)
            }
        };

        function NativeSubtitle() {
            if (o.tagvideo && o.subs) {
                media.removeTracks();
                for (var i = 0; i < o.subs.length; i++) {
                    media.addTrack(o.subs[i], o.files_subtitle[i], (i == o.current_subtitle))
                }
            }
        }
        this.SetSpeed = function (x) {
            log("Speed", x);
            media ? media.setSpeed(x) : '';
            if (v.pip.on == 1) {
                if (media2) {
                    media2.setSpeed(x)
                }
            }
        };
        this.nativeSubtitle = function () {
            NativeSubtitle()
        };
        this.removeNativeSubtitle = function () {
            media.removeTracks()
        };
        this.SetAudioTrack = function (x) {
            log("Audiotrack", x);
            if (o.audiotracks.length > 0) {
                if (o.audiotracks[x]) {
                    var time = this.time();
                    o.seekto > 0 ? '' : o.seekto = time;
                    o.actions.Seek(time, false);
                    File(o.audiotracks[x], true);
                    o.actions.Play()
                }
            } else {
                if (o.file_type == "hls" && v.hlsaudio == 1) {
                    media.setHlsAudioTrack(x)
                } else if (o.file_type == "dash" && v.dashaudio == 1) {
                    media.setDashAudioTrack(x)
                }
            }
        };
        this.getQuality = function () {
            var x = o.files_quality[o.current_quality];
            x == undefined ? x = '' : '';
            var y = autoQuality() && v.hlsautoquality == 1 && v.hlsquality == 1 && x != Lang("auto");
            return (y ? '' + Lang("auto") + ' ' : '') + x
        };
        this.getAudioTrack = function () {
            var x = o.files_audiotrack[o.current_audiotrack];
            x == undefined ? x = '' : '';
            return x
        };
        this.autoQuality = function () {
            return autoQuality()
        };

        function autoQuality() {
            var x = false;
            if (media) {
                if (o.file_type == "youtube") {
                    x = media.auto()
                }
                if (o.file_type == "hls" && v.hlsquality == 1 && HlsLevelsLength() > 1 && v.hlsautoquality == 1) {
                    x = media.auto()
                }
                if (o.file_type == "dash" && v.dashquality == 1 && DashLevelsLength() > 1) {
                    x = media.auto()
                }
            }
            return x
        }

        function HlsLevelsLength() {
            if (o.file_type == "hls") {
                return media.HlsLevelsLength()
            } else {
                return 0
            }
        }

        function DashLevelsLength() {
            if (o.file_type == "dash") {
                return media.DashLevelsLength()
            } else {
                return 0
            }
        }
        this.resize = function (x) {
            if (media && (o.file_type == "youtube" || o.file_type == "vimeo" || exist(v.ratio))) {
                media.resize()
            }
            if (v.screenmarginbottom > 0) {
                css(o.mediacontainer, {
                    "height": (o.fullscreen ? "100%" : o.normal_h - v.screenmarginbottom)
                })
            }
            if (o.media2 && v.pip.movable == 1) {
                o.mediapip.resize()
            }
        };
        this.size = function () {
            return media.size()
        };
        this.reload = function () {
            log('reload');
            o.reloadTimer = 0;
            o.start ? v.autoplay = 1 : '';
            o.actions.Waiting();
            if (url && v.rldnornd != 1) {
                if (url.indexOf('(random)') == -1) {
                    url = url + (url.indexOf('?') == -1 ? '?' : '&') + 'rand=(random)'
                }
            }
            if (o.file_type == "hls" || o.file_type == "native") {
                media.src(url)
            } else {
                File(url)
            }
        };
        if (!exist(o.poster)) {
            CreatePoster()
        }
        if (exist(v.poster)) {
            if (v.poster != '') {
                Poster(v.poster, o.poster, v.poster_scale);
                if (v.posterhidepause == 1 && !o.start) {
                    hide(o.poster)
                }
            } else {
                v.poster = null
            }
        }

        function Status() {
            _status = media ? media.status() : ''
        }

        function ParseUrl(url) {
            urls = url.split(" or ");
            for (var i = 0; i < urls.length; i++) {
                if (urls[i].indexOf(" and ") > -1) {
                    urls_and = urls[i].split(" and ");
                    urls[i] = urls_and[random(0, urls_and.length - 1)]
                }
            }
            current_url = 0
        }

        function Timer() {
            Status();
            if (_status == "playing" || o.casting) {
                o.actions.Playing()
            }
            if (_status != "") {
                o.actions.Loading()
            }
        }

        function CreatePoster() {
            if (o.poster) {
                o.frame.removeChild(o.poster)
            }
            o.poster = createElement("div");
            css(o.poster, {
                "pointer-events": "none",
                "opacity": v.poster_a,
                transition: "opacity 0.5s"
            });
            if (v.poster_float == 1) {
                PluginFloatPoster()
            } else {
                css(o.poster, {
                    'position': 'absolute',
                    'left': 0,
                    'top': 0,
                    'width': '100%',
                    'height': '100%'
                })
            }
            o.frame.appendChild(o.poster)
        }

        function File(x, y, crt) {
            v.file2_separator == '' ? v.file2_separator = ';' : '';
            if (x.indexOf('{') > -1 && x.indexOf('}') > -1 && x.indexOf(v.file2_separator) > -1) {
                var z = x.split(v.file2_separator);
                o.audiotracks = [];
                for (var i = 0; i < z.length; i++) {
                    o.files_audiotrack[i] = z[i].substr(z[i].indexOf("{") + 1, z[i].indexOf("}") - 1);
                    o.audiotracks[i] = z[i].substr(z[i].indexOf("}") + 1);
                    if (exist(v.default_audio)) {
                        if (v.default_audio == o.files_audiotrack[i]) {
                            o.current_audiotrack = i
                        }
                    }
                }
                x = o.audiotracks[o.current_audiotrack]
            } !exist(urls) ? urls = [] : '';
            o.fileTimeout ? clearTimeout(o.fileTimeout) : '';
            x && x != 'or' && x != 'x' ? ParseUrl(x) : '';
            var ft = o.file_type;
            if (urls.length > 0) {
                o.file_type = FileType(urls[current_url]);
                var create = false;
                if (crt) {
                    create = true
                }
                url = urls[current_url];
                if (url) {
                    url = url.replace(/\(random\)/g, Math.random())
                }
                if (!create && x != 'x' && media && o.file_type == ft && (ft == "native" || ft == "vimeo" || (ft == "youtube" && o.start && !_stopped) || ft == "dm" || ft == "hls" || ft == "dash")) {
                    media.src(url);
                    log("src")
                } else {
                    log("New");
                    RemoveMedia();
                    CreateMedia(url)
                }
                if (o.speed1) {
                    if (o.line_speed) {
                        media.setSpeed(o.custom_speed)
                    } else {
                        if (o.current_speed != o.speed1) {
                            media.setSpeed(o.files_speed[o.current_speed])
                        }
                    }
                }
            }
            if (!y) {
                clearInterval(o.timerInterval);
                o.timerInterval = setInterval(Timer, o.timerTime);
                if (!exist(v.subtitle) && v.sub_upload == 1 && v.sub_upload0 == 1) {
                    v.subtitle = ''
                }
                if (exist(v.subtitle)) {
                    o.actions.Subtitle(v.subtitle)
                }
                if (v.hidevideo == 1) {
                    if (v.nativecontrolsmobile == 1 && o.system.mobile) { } else {
                        if (o.file_type == "youtube") {
                            css(o.mediacontainer, {
                                "top": -3000,
                                "left": -3000
                            })
                        } else {
                            hide2(o.mediacontainer)
                        }
                        v.toolbar.hide = 0
                    }
                }
            }
        }

        function FileType(x) {
            var type = "native";
            if (x) {
                if (x.indexOf(".m3u8") > 0) {
                    type = "hls"
                } else if (x.indexOf(".mpd") > 0) {
                    type = "dash"
                } else if (x.indexOf("ws://") == 0) {
                    type = o.ws
                } else if (x.indexOf('youtube.com/') > -1 || x.indexOf('youtu.be/') > -1) {
                    if (typeof (MediaYoutube) == 'function') {
                        type = "youtube";
                        if (v.youtubeposter == 1) {
                            var y = 'https://img.youtube.com/vi/' + YoutubeID(x) + '/';
                            imageExists(y + 'maxresdefault.jpg', function (z) {
                                z > 100 ? v.poster = y + 'maxresdefault.jpg' : v.poster = y + 'hqdefault.jpg';
                                if (o.playlist_dic) {
                                    o.playlist_dic[o.plid]['poster'] = v.poster
                                }
                                v.autoplay == 1 || o.start ? '' : Poster(v.poster, o.poster, v.poster_scale)
                            })
                        }
                    } else {
                        log("No YouTube")
                    }
                } else if (v.vimeo == 1 && x.indexOf('vimeo.com/') > -1) {
                    type = "vimeo"
                } else if (v.dm == 1 && x.indexOf('dailymotion.com') > -1) {
                    type = "dm"
                } else if (v.pjsframe == 1) {
                    PjsFramed(x) ? type = "pjs" : ''
                }
            }
            o.tagvideo = type == "native" || type == "hls" || type == "dash" || type == o.ws;
            return type
        }

        function imageExists(url, callback) {
            var img = new Image();
            img.onload = function () {
                callback(this.height)
            };
            img.src = url
        }

        function CreateMedia(x) {
            o.file_type = FileType(x);
            if (o.tagvideo) {
                media = new MediaVideo(x, o.mediacontainer, false)
            }
            if (o.file_type == "youtube") {
                media = new MediaYoutube(x, o.mediacontainer)
            }
            if (v.vimeo == 1 && o.file_type == "vimeo") {
                media = new MediaVimeo(x, o.mediacontainer)
            }
            if (o.file_type == "pjs") {
                media = new MediaPjs(x)
            }
            if (o.file_type == "dm") {
                media = new MediaDaily(x, o.mediacontainer)
            }
            o.controls ? o.controls.UpdateSettings() : '';
            var t = 0;
            if (exist(v.duration)) {
                if (o.continue && v.timestore == 1 && !o.start) {
                    t = o.continue.flag().t
                }
                setTimeout(function () {
                    o.actions.Duration(t, v.duration)
                }, 100)
            }
        }

        function RemoveMedia() {
            if (media) {
                media.Remove();
                media = null;
                _status = "ended"
            }
            if (media2) {
                media2.Remove();
                media2 = null;
                media2 = undefined;
                o.mediapip.remove();
                o.media2 = null;
                o.mediapip = null
            }
        };
        this.Remove = function () {
            RemoveMedia()
        };
        this.RemoveAll = function () {
            urls = [];
            RemoveMedia()
        };
        this.File = function (x, y, z) {
            File(x, y, z)
        };
        this.Poster = function (x) {
            Poster(x, o.poster, v.poster_scale)
        };
        this.Play = function () {
            if (media) {
                _ended = false;
                _stopped = false;
                if (o.casting) {
                    o.chromecast.Play()
                } else {
                    media.Play();
                    v.posterhide == 1 ? o.actions.HidePoster() : ''
                }
                if (exist(media2)) {
                    media2.Play()
                }
                if (o.channels) {
                    if (o.tagvideo) {
                        if (o.clicktime > 0 && !o.channels.Created()) {
                            o.channels.Update()
                        }
                    } else {
                        o.files_channel = [];
                        o.controls.SettingChanged("channel")
                    }
                }
                if (o.tagvideo && v.volumegain > -1 && !o.gained && !o.system.ios) {
                    if (o.clicktime > 0) {
                        media.Gain()
                    }
                }
                FileTo()
            } else {
                setTimeout(this.Play, 500)
            }
        };

        function FileTo() {
            if (v.fileto > 0 && urls.length > 1) {
                if (Duration() == 0) {
                    clearTimeout(o.fileTimeout);
                    o.fileTimeout = setTimeout(FileTimeout, v.fileto * 1000)
                }
            }
        }

        function FileTimeout() {
            if (o.play && Duration() == 0 && Time() == 0) {
                if (media) {
                    if (media.loaded() == 0 && current_url != urls.length - 1) {
                        onError('File Timeout')
                    }
                }
            }
        }
        this.PipSwitch = function (event) {
            if (o.media2) {
                if (v.pip.movable == 1) {
                    if (o.moving[o.media2] > 2) {
                        return
                    }
                }
                if (event) {
                    event.stopPropagation();
                    window.event ? window.event.cancelBubble = true : ''
                }
                var tmp = media;
                media.ChangePip(true, o.media2);
                media2.ChangePip(false, o.mediacontainer);
                media = media2;
                media2 = tmp;
                media.Play();
                media2.Play();
                js("pip")
            }
        };
        this.reYT = function () {
            media.src(url)
        };
        this.ToolbarHide = function () {
            v.effects == 1 ? o.effects.api("hide") : '';
            o.toolbarhidden = true
        };
        this.ToolbarShow = function () {
            if (v.toolbar.resizeme) {
                v.toolbar.resizeme = false;
                if (o.controls) {
                    o.controls.resizeFromText(1);
                    o.controls.resizetext()
                }
            }
            o.toolbarhidden = false
        };
        this.PipToggle = function () {
            if (o.media2 && o.mediapip) {
                o.mediapip.toggle()
            }
        };
        this.Airplay = function () {
            if (o.tagvideo && o.airplay) {
                o.airplayed = true;
                media.airplay()
            }
        };
        this.PipWebkit = function () {
            if (o.tagvideo && o.pipwebkit) {
                media.pipwebkit()
            }
        };
        this.BeforeVast = function () {
            if (v.vast_poster == 1 && exist(v.vast_posterurl)) {
                if (!exist(o.vast_poster)) {
                    o.vast_poster = createElement("div");
                    css(o.vast_poster, {
                        'position': 'absolute',
                        'left': 0,
                        'top': 0,
                        'width': '100%',
                        'height': '100%',
                        "pointer-events": "none",
                        "zIndex": 10000
                    });
                    o.frame.appendChild(o.vast_poster)
                }
                show2(o.vast_poster);
                Poster(v.vast_posterurl, o.vast_poster, 'fill')
            }
            if (media) {
                datetime(0);
                media.BeforeVast()
            }
        };
        this.AfterVast = function () {
            if (o.vast_poster) {
                hide2(o.vast_poster)
            }
            media ? media.AfterVast() : ''
        };
        this.Pause = function () {
            if (o.casting) {
                o.chromecast.Pause()
            } else {
                media ? media.Pause() : log("nomedia")
            }
            if (exist(o.media2)) {
                media2.Pause()
            }
        };
        this.Recover = function () {
            _stopped = true;
            o.actions.Seek(0, false);
            exist(o.poster) ? o.actions.ShowPoster() : '';
            File('x')
        };
        this.Toggle = function () {
            media ? media.Toggle() : ''
        };
        this.Seek = function (x) {
            if (media) {
                if (o.casting) {
                    o.chromecast.Seek(x)
                } else {
                    media.Seek(x);
                    if (v.pip.on == 1) {
                        if (media2) {
                            media2.Seek(x)
                        }
                    }
                }
            }
        };
        this.Mute = function () {
            if (media) {
                media.Mute();
                o.casting ? o.chromecast.Mute() : ''
            }
            if (v.pip.on == 1 && v.pip.nomute == 1) {
                if (media2) {
                    media2.Mute()
                }
            }
        };
        this.Unmute = function () {
            if (media) {
                media.Unmute();
                o.casting ? o.chromecast.Unmute() : ''
            }
            if (v.pip.on == 1 && v.pip.nomute == 1) {
                if (media2) {
                    media2.Unmute()
                }
            }
        };
        this.Volume = function (x) {
            media ? media.Volume(x) : '';
            if (v.pip.on == 1) {
                if (v.pip.nomute == 1 && media2) {
                    media2.Volume(x)
                }
            }
            if (o.casting) {
                o.chromecast.Volume(x)
            }
        };
        this.isPlaying = function () {
            return media ? media.isPlaying() : false
        };
        this.isLive = function () {
            return media ? media.isLive() : false
        };
        this.status = function () {
            return _status
        };
        this.ended = function () {
            return _ended
        };
        this.time = function () {
            var x = 0;
            if (media) {
                x = Time();
                if (o.casting) {
                    var y = o.chromecast.Time();
                    y ? x = y : ''
                } else {
                    if (Duration() > 0 && x != Duration()) {
                        o.current_time = x + 0.0001
                    }
                }
                return x
            } else {
                return 0
            }
        };
        this.duration = function () {
            var x = 0;
            if (media) {
                x = Duration();
                x == 0 && exist(v.duration) ? x = v.duration * 1 : '';
                if (o.casting) {
                    var y = o.chromecast.Duration();
                    y ? x = y : ''
                }
            }
            return x
        };
        this.loaded = function () {
            return media ? media.loaded() : 0
        };
        this.createposter = function () {
            CreatePoster()
        };
        this.Preload = function () {
            if (o.tagvideo) {
                media.preload()
            }
        };
        this.scale = function (x) {
            if (String(x).indexOf(":") > 0) {
                var y = x.split(":");
                var z0 = o.screen_w / o.screen_h;
                var z1 = o.media.size();
                if (z1.width > 0) {
                    z0 = z1.width / z1.height
                }
                var z = y[0] / y[1];
                if (z0 != z) {
                    if (o.tagvideo) {
                        media.ObjectFit()
                    }
                    var w2 = o.screen_h * z;
                    var x2 = w2 / o.screen_w;
                    var h2 = o.screen_w / z;
                    var y2 = h2 / o.screen_h;
                    if (x2 < 1) {
                        o.mediascale.x0 = o.mediascale.x = parseFloat(x2);
                        o.mediascale.y = 1
                    } else {
                        o.mediascale.x = 1;
                        o.mediascale.y0 = o.mediascale.y = parseFloat(y2)
                    }
                    css(o.mediacontainer, {
                        "transform": "scaleX(" + o.mediascale.x + ") scaleY(" + o.mediascale.y + ")"
                    });
                    o.custom_aspect = x
                }
            } else {
                o.mediascale.x += parseFloat(x);
                o.mediascale.y += parseFloat(x);
                css(o.mediacontainer, {
                    "transform": "scaleX(" + o.mediascale.x + ") scaleY(" + o.mediascale.y + ")"
                })
            }
            if (v.hotkey.scaledrag == 1) {
                if (!o.mediadrag) {
                    if (o.mediascale.x > 0 || o.mediascale.y > 1) {
                        PluginMovable(o.mediacontainer, 'o.dragging');
                        o.mediadrag = true
                    }
                } else {
                    if (o.mediascale.x == 1 && o.mediascale.y == 1) {
                        css(o.mediacontainer, {
                            "top": 0,
                            "left": 0
                        })
                    }
                }
            }
            o.controls.SettingsScale()
        };
        this.normalscale = function () {
            if (o.tagvideo) {
                media.ObjectFit()
            }
            o.mediascale.x = o.mediascale.x0;
            o.mediascale.y = o.mediascale.y0;
            css(o.mediacontainer, {
                "transform": "scaleX(" + o.mediascale.x + ") scaleY(" + o.mediascale.y + ")"
            });
            o.controls.SettingsScale();
            o.custom_aspect = null
        };
        this.hlsDashSub = function (x, y) {
            media.hlsDashSub(x, y)
        };
        this.currentSubtitle = function () {
            var x = undefined;
            exist(o.subs) ? exist(o.subs[o.current_subtitle]) ? x = o.subs[o.current_subtitle] : '' : '';
            return x
        };
        this.currentFile = function () {
            return currentFile()
        };

        function currentFile() {
            return urls ? (urls.length > 0 ? (urls[current_url] ? urls[current_url] : '') : '') : ''
        };
        this.tag = function () {
            return media ? media.tag() : false
        };
        this.captions = function () {
            if (o.tagvideo) {
                media.captions()
            }
        };

        function RadioTags() {
            var xhr = XHR(v.tagsurl + '?url=' + urls[current_url]);
            xhr.onload = function () {
                if (this.readyState == 4 && this.status == 200) {
                    if (this.responseText) {
                        v.title = this.responseText;
                        o.actions.Title('title')
                    }
                }
            };
            xhr.send()
        }
    };
    var MediaVideo = function (url, container, pip) {
        var pjstg = createElement("video");
        var hls_config;
        var pipto = 0;
        if (v.taginframe == 1) {
            var tagframe = createElement("iframe");
            attr(tagframe, {
                "scrolling": "no",
                "allowfullscreen": "true",
                "allowtransparency": "true",
                "src": ""
            });
            css(tagframe, {
                "position": "absolute",
                "width": "100%",
                "height": "100%",
                "border": 0
            });
            container.appendChild(tagframe);
            var framei = window.setInterval(function () {
                if (tagframe.contentWindow.document.readyState === "complete") {
                    window.clearInterval(framei);
                    css(tagframe.contentDocument.body, {
                        "padding": 0,
                        "margin": 0
                    });
                    tagframe.contentDocument.body.appendChild(pjstg)
                }
            }, 100)
        } else {
            container.appendChild(pjstg)
        }
        var hls;
        var is_hls = false;
        var is_hls2 = false;
        var hls_started = false;
        var hls_created = false;
        var hls_force = -1;
        var dash;
        var dash_created = false;
        var dash_init = false;
        var dash_play = false;
        var ws;
        var ws_created = false;
        var is_dash = false;
        var is_live = false;
        var is_sleep = 0;
        var is_ws = false;
        var error;
        var error_time;
        var unmuteplease = false;
        var pip_quality = -1;
        var pause_before_vast = -1;
        var sleep_timeout;
        var _hlssubtracks;
        var _dashsubtracks;
        var _seekaftervast;
        var urlmse;
        var mimeCodec = 'video/mp4; codecs="avc1.42E01E, mp4a.40.2"';
        css(pjstg, {
            'position': 'absolute',
            'top': 0,
            'left': 0,
            'width': '100%',
            'height': '100%',
            'object-fit': 'contain',
            'transition': "filter 0.2s linear",
            'min-height': 'auto',
            'max-height': 'none',
            'min-width': 'auto',
            'max-width': 'none'
        });
        ObjectFit();
        if (v.playsinlineonmobile == 1 && o.system.mobile) {
            attr(pjstg, {
                'playsinline': '1'
            })
        }
        if (v.tagcors == 1) {
            attr(pjstg, {
                "crossorigin": "anonymous",
                "crossOrigin": "anonymous"
            })
        }
        attr(pjstg, {
            'src': url,
            'x-webkit-airplay': 'allow'
        });
        if (v.ynxnopip == 1) {
            attr(pjstg, {
                'pip': 'false'
            })
        }
        if (pip) {
            pjstg.autoplay = true;
            if (v.pip.nomute != 1 || v.autoplay == 1) {
                pjstg.muted = true
            }
        }
        if (v.nativenodownload == 1) {
            attr(pjstg, {
                'controlsList': 'nodownload'
            })
        }
        if (!o.system.tv) {
            attr(pjstg, {
                'preload': (v.preload == 1 && v.autoplay == 0 ? 'metadata' : 'none')
            })
        }
        tagSrc();
        if (!exist(url)) {
            url = ''
        }
        if (url.indexOf(".mpd") > 0) {
            is_dash = true;
            if (!exist(window.dashjs)) {
                var scrpt = Script("cdn.dashjs.org", "cdn.dashjs.org/latest/dash.all.min.js", "dash_all");
                if (scrpt) {
                    o.dashInterval = setInterval(WaitDash, 100);
                    scrpt.onerror = function (e) {
                        clearInterval(o.dashInterval);
                        o.actions.MediaReady();
                        error = 'DASH SDK not found';
                        o.media.onError()
                    }
                }
            } else {
                Dashed()
            }
        } else if (((options.hls == 1 && v.playerjscom != 1) || url.indexOf(".m3u8") > 0) && (o.compilation.indexOf("HLS") != -1 || exist(window.Hls))) {
            is_hls = true;
            is_hls2 = true;
            try {
                if (exist(Hls)) {
                    if (!Hls.isSupported() || (o.system.safari && v.nativehlsinsafari == 1 && !o.system.ios) || (o.system.safari && o.system.ios && v.nativehlsios == 1) || (o.system.edge && v.nativehlsinedge == 1)) {
                        log('HLS support ', Hls.isSupported());
                        is_hls = false
                    } else {
                        if (v.preload == 1 || v.autoplay == 1 || v.preloadhls == 1 || pip) {
                            CreateHLS(false)
                        }
                    }
                } else {
                    is_hls = false
                }
            } catch (error) {
                is_hls = false
            }
        } else if (url.indexOf("ws://") == 0 && v.flussonic == 1) {
            is_ws = true;
            CreateWS()
        }
        if (o.system.tv && v.autoplay == 1 && !is_hls && !is_dash && !is_ws) {
            setTimeout(function () {
                o.actions.MediaReady()
            }, 100)
        }
        if (v.channels == 1) {
            exist(o.channels) ? o.channels.Close() : '';
            o.channels = new PlugMediaChannels()
        }

        function WaitDash() {
            if (exist(window.dashjs)) {
                clearInterval(o.dashInterval);
                Dashed()
            }
        }

        function Dashed() {
            is_dash = true;
            if (MseIsSupported()) {
                v.preload == 1 || v.autoplay == 1 || v.preloaddash == 1 ? CreateDASH(false) : ''
            } else {
                is_dash = false;
                log("DASH not supported")
            }
        }

        function CreateDASH(x) {
            log("DASH");
            v.preloaddash = 1;
            var dash_config = {
                bufferLength: 60
            };
            if (o.files.length > 1) {
                v.dashquality = 0;
                v.dashquality_off = true
            } else {
                v.dashquality_off ? v.dashquality = 1 : ''
            }
            if (o.audiotracks.length > 1) {
                v.dashaudio = 0;
                v.dashaudio_off = true
            } else {
                v.dashaudio_off ? v.dashaudio = 1 : ''
            }
            if (exist(v.dashconfig)) {
                if (exist(v.dashconfig.bufferLength)) {
                    if (v.dashconfig.bufferLength > 600) {
                        v.dashconfig.bufferLength = 600
                    }
                }
                if (typeof v.dashconfig == "object") {
                    for (var key in v.dashconfig) {
                        dash_config[key] = v.dashconfig[key]
                    }
                }
            }
            dash = dashjs.MediaPlayer().create();
            js("dash", dash, 1);
            v.dashdebug == 1 && !pip ? dash.updateSettings({
                'debug': {
                    'logLevel': dashjs.Debug.LOG_LEVEL_DEBUG
                }
            }) : '';
            var ap = (v.autoplay == 1 || pip || x);
            dash.initialize(pjstg, url, ap);
            if (v.dashdrm == 1) {
                var ddj = v.dashdrmjson;
                if (ddj) {
                    if (typeof (ddj) == "string") {
                        try {
                            ddj = ddj.replace(/pjs'qt/ig, '"');
                            ddj = JSON.parse(ddj)
                        } catch (e) {
                            log("incorrect DASH DRM JSON")
                        }
                    }
                    if (typeof (ddj) == "object") {
                        dash.setProtectionData(ddj)
                    }
                }
            }
            dash.updateSettings({
                'streaming': {
                    'setFastSwitchEnabled': true,
                    'stableBufferTime': (dash_config.buffer0 == 1 && !ap ? 0 : dash_config.bufferLength)
                }
            });
            dash.updateSettings({
                'streaming': {
                    'bufferTimeAtTopQualityLongForm': dash_config.bufferLength
                }
            });
            dash.updateSettings({
                'streaming': {
                    'lastBitrateCachingInfo.enabled': false
                }
            });
            dash.updateSettings({
                'streaming': {
                    'lastMediaSettingsCachingInfo.enabled': false
                }
            });
            if (v.dashcookies == 1) {
                dash.setXHRWithCredentialsForType(undefined, true)
            }
            if (v.dashlowquality == 1) {
                dash.updateSettings({
                    'streaming': {
                        'abr': {
                            'autoSwitchBitrate': {
                                'audio': false,
                                'video': false
                            }
                        }
                    }
                })
            }
            dash.on(dashjs.MediaPlayer.events.STREAM_INITIALIZED, function (data) {
                if (!dash_init) {
                    log("DASH attached");
                    var q = DashQualityLevels();
                    DashAudioTracks();
                    o.dash_subs = false;
                    if (v.dashsubtracks == 1) {
                        _dashsubtracks = new PluginDashSubtitles(dash, pip)
                    }
                    is_live = dash.isDynamic();
                    is_live ? log("Live") : '';
                    if (v.dashquality == 1) {
                        if (v.dashlowquality == 1 || q > 0) {
                            o.current_quality = q;
                            dash.updateSettings({
                                'streaming': {
                                    'abr': {
                                        'autoSwitchBitrate': {
                                            'audio': false,
                                            'video': false
                                        }
                                    }
                                }
                            })
                        } else {
                            o.current_quality = dash.getBitrateInfoListFor("video").length - 1
                        }
                        o.controls.QualityChangedNoHand(o.current_quality);
                        dash.setQualityFor("video", o.current_quality);
                        dash.setQualityFor("audio", o.current_quality)
                    }
                    o.actions.MediaReady();
                    dash_init = true
                }
            });
            dash.on(dashjs.MediaPlayer.events.PLAYBACK_PLAYING, function (data) {
                if (dash_config.buffer0 == 1 && !ap) {
                    dash.updateSettings({
                        'streaming': {
                            'stableBufferTime': dash_config.bufferLength
                        }
                    })
                }
                if (!dash_play) {
                    var track = parseInt(o.current_audiotrack);
                    if (track > 0 && v.dashaudio == 1) {
                        dash.setCurrentTrack(dash.getTracksFor("audio")[track])
                    }
                    dash_play = true
                }
            });
            dash.on(dashjs.MediaPlayer.events.PLAYBACK_TIME_UPDATED, function (data) {
                if (is_live) {
                    o.actions.Duration(dash.time(), dash.duration())
                }
            });
            dash.on(dashjs.MediaPlayer.events.TEXT_TRACKS_ADDED, function (data) {
                dash.setTextTrack(-1)
            });
            dash.on(dashjs.MediaPlayer.events.QUALITY_CHANGE_REQUESTED, function (data) {
                if (data.mediaType == "video" && data.oldQuality != data.newQuality && v.dashquality == 1) {
                    o.current_quality = data.newQuality;
                    o.controls.QualityChangedNoHand(o.current_quality);
                    log("DASH Level " + o.current_quality)
                }
            });
            dash.on(dashjs.MediaPlayer.events.FRAGMENT_LOADING_COMPLETED, function (data) {
                if (exist(data.request)) {
                    if (data.request.type == "MediaSegment") {
                        js("fragment", data.request.url)
                    }
                }
            });
            dash.on(dashjs.MediaPlayer.events.ERROR, function (data) {
                if (data.error) {
                    if (typeof data.error == "object") {
                        o.dasherror = data.error.message
                    } else {
                        o.dasherror = data.error
                    }
                }
                error = "DASH " + o.dasherror;
                o.media.onError()
            });
            dash_created = true
        }

        function CreateHLS(x) {
            log("HLS");
            if (o.files.length > 1) {
                v.hlsquality = 0;
                v.hlsquality_off = true
            } else {
                v.hlsquality_off ? v.hlsquality = 1 : ''
            }
            if (o.audiotracks.length > 1) {
                v.hlsaudio = 0;
                v.hlsaudio_off = true
            } else {
                v.hlsaudio_off ? v.hlsaudio = 1 : ''
            }
            o.hls_subs = false;
            hls_force = -1;
            var dontload = false;
            if (v.preroll && v.hlsvastwait == 1) {
                dontload = true;
                v.hlsvastwait = 0
            }
            hls_config = {
                debug: (v.hlsdebug == 1 && !pip),
                autoStartLoad: (v.preload == 1 || v.autoplay == 1 || pip || x) && !dontload,
                maxBufferLength: 60,
                maxMaxBufferLength: 60,
                manifestLoadingTimeOut: (v.hlsmto > 0 ? v.hlsmto * 1000 : 40000),
                fragLoadingTimeOut: (v.hlsfto > 0 ? v.hlsfto * 1000 : 40000),
                enableWorker: false
            };
            if (v.hlscookies == 1) {
                hls_config['xhrSetup'] = function (xhr, url) {
                    xhr.withCredentials = true
                }
            }
            if (exist(v.hlsconfig)) {
                if (exist(v.hlsconfig.maxBufferLength)) {
                    if (v.hlsconfig.maxBufferLength > 600) {
                        v.hlsconfig.maxBufferLength = 600
                    }
                    v.hlsconfig.maxMaxBufferLength = v.hlsconfig.maxBufferLength
                }
                if (exist(v.hlsconfig.customBuffer)) {
                    v.hlsconfig.maxMaxBufferLength = v.hlsconfig.maxBufferLength = v.hlsconfig.customBuffer
                }
                if (typeof v.hlsconfig == "object") {
                    for (var key in v.hlsconfig) {
                        hls_config[key] = v.hlsconfig[key]
                    }
                }
            }
            hls = new Hls(hls_config);
            js("hls", hls, 1);
            hls.loadSource(url);
            hls.attachMedia(pjstg);
            hls.on(Hls.Events.MEDIA_ATTACHED, function () {
                log("HLS attached")
            });
            hls.on(Hls.Events.MANIFEST_LOADED, function (event, data) {
                !pip ? o.actions.MediaReady() : ''
            });
            hls.on(Hls.Events.MANIFEST_PARSED, function (event, data) {
                if (!pip && v.hlsquality == 1 && HlsLevelsLength() > 1) {
                    HlsQualityLevels();
                    o.controls ? o.controls.QualityChangedNoHand(o.current_quality) : ''
                }
            });
            hls.on(Hls.Events.LEVEL_SWITCH, function (event, data) {
                HlsLevel()
            });
            hls.on(Hls.Events.LEVEL_SWITCHED, function (event, data) {
                HlsLevel()
            });
            hls.on(Hls.Events.LEVEL_LOADED, function (event, data) {
                if (!pip) {
                    if (data.details.live != is_live) {
                        is_live = data.details.live;
                        o.controls.refresh()
                    }
                    is_live = data.details.live;
                    if (is_live) {
                        log("Live");
                        o.dvr = url.indexOf("?DVR") > -1;
                        if (pjstg.duration > 0 && pjstg.currentTime > 0) {
                            if (pjstg.duration - pjstg.currentTime < 10) {
                                if (o.hls_stuck_time > 0) {
                                    if (o.hls_stuck_time == pjstg.currentTime && o.hls_stuck_duration == pjstg.duration) {
                                        o.stuck++;
                                        if (o.stuck > 2) {
                                            o.stuck = 0;
                                            o.hls_stuck_time = -1;
                                            hls.destroy();
                                            CreateHLS(true);
                                            onEnded()
                                        }
                                    } else {
                                        o.hls_stuck_time = -1
                                    }
                                } else {
                                    o.hls_stuck_time = pjstg.currentTime;
                                    o.hls_stuck_duration = pjstg.duration
                                }
                            }
                        }
                    }
                }
                if (v.hlsquality == 1) {
                    o.current_quality = hls.loadLevel;
                    o.controls ? o.controls.QualityChangedNoHand(o.current_quality) : ''
                }
                HlsUpdateAudio()
            });
            hls.on(Hls.Events.FRAG_CHANGED, function (event, data) {
                if (exist(data.frag) && !pip) {
                    js("fragment", data.frag.relurl)
                }
                if (hls_force > -1) {
                    hls.nextAutoLevel = hls_force;
                    hls_force = -1
                }
                hls_started = true;
                hlsTextTracks()
            });
            hls.on(Hls.Events.FRAG_PARSING_METADATA, function (event, data) {
                js("fragdata", data, 1)
            });
            hls.on(Hls.Events.AUDIO_TRACKS_UPDATED, function (event, data) {
                !pip && v.hlsaudio == 1 ? HlsAudioTracks() : ''
            });
            hls.on(Hls.Events.AUDIO_TRACK_SWITCHING, function (event, data) {
                if (!pip && v.hlsaudio == 1) {
                    HlsAudioTrack()
                }
            });
            if (v.hlssubtracks == 1) {
                _hlssubtracks = new PluginHlsSubtitles(hls, pip)
            } else {
                hls.subtitleDisplay = false
            }
            hls.on(Hls.Events.ERROR, function (event, data) {
                v.log == 1 ? console.log(data) : '';
                js(data.type + 'Hls', data, 0, true);
                o.hlserror = data;
                if (data.fatal) {
                    switch (data.type) {
                        case Hls.ErrorTypes.NETWORK_ERROR:
                            if (v.livewakeup == 1) {
                                HlsSleep0()
                            } else {
                                error = data.details + ' (' + data.type + ')';
                                o.seekto > 0 || pip || v.live == 1 || is_ws ? '' : o.seekto = Time();
                                hls.destroy();
                                if (!pip) {
                                    o.media.onError()
                                }
                            }
                            break;
                        case Hls.ErrorTypes.MEDIA_ERROR:
                            HlsRecoverMediaError();
                            break;
                        default:
                            error = "HLS fatal error, destroy";
                            hls.destroy();
                            !pip ? o.media.onError() : '';
                            break
                    }
                } else {
                    log("HLS ", data.type, data.details, (data.response ? data.response.code : ''));
                    js("hls_error", (data.response ? data.response.code : ''));
                    if (is_sleep > 0) {
                        is_sleep = 2;
                        HlsSleep()
                    }
                }
            });
            hls_created = true
        }

        function HlsLevel() {
            if (!pip && v.hlsquality == 1 && HlsLevelsLength() > 1) {
                if (o.current_quality != hls.loadLevel) {
                    o.current_quality = hls.loadLevel;
                    o.controls ? o.controls.QualityChangedNoHand(o.current_quality) : '';
                    log("HLS Level " + o.current_quality)
                }
            }
        }

        function CreateWS() {
            if (exist(window.FlussonicMsePlayer)) {
                if (MseIsSupported()) {
                    if (!exist(o.ws)) {
                        o.ws = new PluginWS()
                    }
                    ws = new FlussonicMsePlayer(pjstg, url, {
                        debug: true
                    });
                    ws_created = true
                } else {
                    is_ws = false;
                    log("not supported")
                }
            }
        }

        function hlsTextTracks() {
            Captions()
        };
        this.captions = function () {
            Captions()
        };

        function Captions() {
            if (v.hlscaptions) {
                if (pjstg.textTracks.length > 0) {
                    if (v.captions == 1) {
                        pjstg.textTracks[pjstg.textTracks.length - 1].mode = "showing"
                    } else {
                        pjstg.textTracks[pjstg.textTracks.length - 1].mode = "hidden"
                    }
                    if (!o.captions) {
                        o.captions = true;
                        o.controls.refresh()
                    }
                } else {
                    if (o.captions) {
                        o.captions = false;
                        o.controls.refresh()
                    }
                }
            }
        }

        function HlsSleep0() {
            log("sleep");
            !pip && o.play ? o.actions.Pause() : '';
            o.actions.ShowPoster();
            is_sleep = 1;
            HlsSleep(o.play)
        }

        function HlsSleep(x) {
            if (is_sleep > 0) {
                clearTimeout(sleep_timeout);
                sleep_timeout = setTimeout(HlsLiveWaiting, v.livewakeuptime * 1000)
            }
        }

        function HlsLiveWaiting() {
            if (is_sleep > 0) {
                log("watching");
                if (is_hls) {
                    if (is_sleep == 1) {
                        hls.loadSource(url)
                    }
                    if (is_sleep == 2) {
                        hls.destroy();
                        CreateHLS(true);
                        pjstg.play()
                    }
                } else {
                    attr(pjstg, {
                        'src': url
                    })
                }
            }
        }
        var recover_decoding_error_date = 0;
        var recover_swap_audio_codec_date = 0;

        function HlsRecoverMediaError() {
            var now = performance.now();
            if (!recover_decoding_error_date || (now - recover_decoding_error_date) > 3000) {
                recover_decoding_error_date = performance.now();
                log("HLS fatal media error, try to recover");
                hls.recoverMediaError();
                hls.startLoad();
                if (o.play) {
                    TagPlay()
                }
            } else {
                if (!recover_swap_audio_codec_date || (now - recover_swap_audio_codec_date) > 3000) {
                    recover_swap_audio_codec_date = performance.now();
                    log("HLS fatal media error, try to recover");
                    hls.swapAudioCodec();
                    hls.recoverMediaError()
                } else {
                    log("HLS fatal media error, recovery failed")
                }
            }
        }
        pjstg.addEventListener('loadstart', onLoadStart);
        pjstg.addEventListener('error', onTagError);
        pjstg.addEventListener('ended', onEnded);
        pjstg.addEventListener('play', onPlay);
        pjstg.addEventListener('pause', onPause);
        pjstg.addEventListener('timeupdate', onTimeupdate);
        pjstg.addEventListener('seeking', onSeeking);
        pjstg.addEventListener('seeked', onSeeked);
        pjstg.addEventListener('loadedmetadata', onMeta);
        pjstg.addEventListener('volumechange', onVolume);
        pjstg.addEventListener('waiting', onWaiting);
        pjstg.addEventListener('durationchange', onDuration);
        pjstg.addEventListener('loadeddata', onLoadedData);
        pjstg.addEventListener('enterpictureinpicture', onPipEnter);
        pjstg.addEventListener('leavepictureinpicture', onPipLeave);

        function onLoadStart() {
            if (!is_hls && !is_dash) {
                !pip ? o.actions.MediaReady() : ''
            }
        }

        function onTagError() {
            if (!is_hls && !is_dash) {
                if (pjstg.error) {
                    log(pjstg.error, pjstg.error.code, pjstg.error.message);
                    var x = pjstg.error.code;
                    error = undefined;
                    if (x == 1) {
                        error = "aborted"
                    }
                    if (x == 2) {
                        error = "network"
                    }
                    if (x == 3) {
                        error = "decode"
                    }
                    if (x == 4) {
                        error = "not found"
                    }
                    log("Video Error: ", error)
                }
                if (is_hls2 && v.livewakeup == 1) {
                    error = undefined;
                    HlsSleep0()
                }
                if (error != undefined) {
                    onError()
                }
            }
        }

        function onError() {
            !pip ? o.media.onError() : ''
        }

        function onEnded() {
            !pip ? o.media.onEnded() : ''
        }

        function onPlay() {
            if (!o.start && v.preroll) {
                log('wrong play');
                pause();
                o.actions.Play();
                return
            }
            if (is_hls && is_sleep > 0) { } else {
                if (!pip) {
                    var bgl = o.actions.isVastBgLoad() && o.vastfrombg != 1;
                    if (bgl || pause_before_vast == -1) {
                        var x = false;
                        if (is_hls) {
                            if (exist(o.vast) || exist(o.vastloader)) {
                                if (bgl) { } else {
                                    pause();
                                    x = true
                                }
                            }
                        }
                        if (!x) {
                            o.media.onPlay()
                        }
                    }
                }
            }
        }

        function onPause() {
            log("video pause");
            if (o.play && o.actplay && !pjstg.ended && v.unpause == 1) {
                log("unpause");
                TagPlay()
            } else {
                !pip && !o.nopause ? o.media.onPause() : ''
            }
        }

        function onTimeupdate() {
            !pip ? o.media.onTimeupdate() : '';
            if (pause_before_vast > -1) {
                if (Time() > pause_before_vast) {
                    pause();
                    pause_before_vast = -1
                }
            }
        }

        function onSeeking() {
            !pip ? o.media.onSeeking() : ''
        }

        function onSeeked() {
            !pip ? o.media.onSeeked() : ''
        }

        function onMeta() {
            if (pip) {
                PipSize()
            } else {
                o.media.onMeta();
                PlayerSize();
                if (is_hls && is_sleep > 0) {
                    is_sleep = 0;
                    log("wake up");
                    hls.startLoad();
                    TagPlay();
                    o.controls.Play()
                }
                if (exist(v.ratio)) {
                    Resize()
                }
            }
        }
        this.ratio = function () {
            return (pjstg.videoWidth / pjstg.videoHeight)
        };

        function PipSize() {
            if (pjstg.videoHeight > 0) {
                css(container, {
                    "height": container.offsetWidth / (pjstg.videoWidth / pjstg.videoHeight) - parseInt(v.pip.border)
                })
            } else {
                if (pipto < 20) {
                    setTimeout(PipSize, 100);
                    pipto++
                }
            }
        }

        function PlayerSize() {
            if (v.changeheight == 1) {
                clearInterval(o.heightInterval);
                o.heightInterval = setInterval(WaitSize, 100);
                WaitSize()
            }
        }

        function WaitSize() {
            if (pjstg) {
                if (pjstg.videoHeight > 0) {
                    o.actions.changeAspect(pjstg.videoWidth / pjstg.videoHeight);
                    clearInterval(o.heightInterval)
                }
            }
        }

        function onDuration() {
            !pip && !is_ws ? o.media.onDuration() : ''
        }

        function onVolume() {
            !pip ? o.media.onVolume() : ''
        }

        function onWaiting() {
            if (is_hls && is_sleep > 0) { } else {
                !pip ? o.media.onWaiting() : ''
            }
        }

        function onLoadedData() {
            o.actions.LoadedData()
        }

        function MseIsSupported() {
            var mediaSource = window.MediaSource = window.MediaSource || window.WebKitMediaSource;
            var sourceBuffer = window.SourceBuffer = window.SourceBuffer || window.WebKitSourceBuffer;
            var isTypeSupported = mediaSource && typeof mediaSource.isTypeSupported === 'function' && mediaSource.isTypeSupported(mimeCodec);
            var sourceBufferValidAPI = !sourceBuffer || sourceBuffer.prototype && typeof sourceBuffer.prototype.appendBuffer === 'function' && typeof sourceBuffer.prototype.remove === 'function';
            return isTypeSupported && sourceBufferValidAPI
        }

        function DashQualityLevels() {
            var q = 0;
            if (!pip && v.dashquality == 1) {
                o.files_quality = [];
                var x = dash.getBitrateInfoListFor("video");
                if (x.length > 1) {
                    var y = '';
                    for (var i = 0; i < x.length; i++) {
                        o.files_quality[i] = exist(x[i].height) ? MseRenameQualities(x[i], v.nameofdashquality) : i;
                        if (o.files_quality[i] == y || v.dashaddbitrate == 1) {
                            y = o.files_quality[i];
                            if (exist(x[i].bitrate)) {
                                o.files_quality[i] += " " + span05 + " &nbsp;" + parseInt(x[i].bitrate / 1000) + ' ' + Lang('kbps') + '</span>';
                                v.dashaddbitrate != 1 ? o.files_quality[i - 1] += " " + span05 + " &nbsp;" + parseInt(x[i - 1].bitrate / 1000) + ' ' + Lang('kbps') + '</span>' : '';
                                y = ''
                            }
                        } else {
                            y = o.files_quality[i]
                        }
                        if (exist(v.default_quality) && q == 0) {
                            if (v.default_quality == o.files_quality[i]) {
                                q = i
                            }
                        }
                        if (exist(o.default_quality)) {
                            if (o.default_quality == o.files_quality[i]) {
                                q = i
                            }
                        }
                    }
                    o.files_quality[x.length] = Lang("auto")
                }
            }
            return q
        }

        function DashAudioTracks() {
            if (!pip && v.dashaudio == 1) {
                o.current_audiotrack = 0;
                var x = dash.getTracksFor("audio");
                if (x.length > 1) {
                    for (var i = 0; i < x.length; i++) {
                        o.files_audiotrack[i] = i;
                        if (exist(x[i].lang)) {
                            o.files_audiotrack[i] = RenameTracks(x[i].lang)
                        } else {
                            if (exist(x[i].index)) {
                                o.files_audiotrack[i] = Lang("audiotrack") + " " + x[i].index
                            }
                        }
                        if (exist(o.default_audio)) {
                            if (o.default_audio == o.files_audiotrack[i]) {
                                o.current_audiotrack = i
                            }
                        }
                    }
                }
                log("DASH AudioTrack ", o.current_audiotrack);
                o.controls.AudioTrackChangedNoHand(o.current_audiotrack)
            }
        }
        var span05 = "<span style='opacity:0.5'>";

        function HlsQualityLevels() {
            if (!pip && v.hlsquality == 1) {
                var x = hls.levels;
                var q = 0;
                o.files_quality = [];
                if (x.length > 1) {
                    for (var i = 0; i < x.length; i++) {
                        if (exist(x[i].height)) {
                            var y = MseRenameQualities(x[i], v.nameofhlsquality);
                            if (o.files_quality.indexOf(y) > -1 || v.hlsaddbitrate == 1) {
                                if (exist(x[i].bitrate)) {
                                    var yi = o.files_quality.indexOf(y);
                                    yi > -1 ? o.files_quality[yi] += " " + span05 + " &nbsp;" + parseInt(x[yi].bitrate / 1000) + ' ' + Lang('kbps') + '</span>' : '';
                                    o.files_quality[i] = y + " " + span05 + " &nbsp;" + parseInt(x[i].bitrate / 1000) + ' ' + Lang('kbps') + '</span>'
                                }
                            } else {
                                o.files_quality[i] = y
                            }
                            if (exist(x[i].audioGroupIds)) {
                                o.files_quality_ag[i] = x[i].audioGroupIds[0]
                            }
                        } else if (exist(x[i].name)) {
                            o.files_quality[i] = x[i].name
                        } else {
                            o.files_quality[i] = i
                        }
                        if (exist(v.default_quality) && q == 0) {
                            if (v.default_quality == o.files_quality[i]) {
                                q = i
                            }
                        }
                        if (exist(o.default_quality)) {
                            if (o.default_quality == o.files_quality[i]) {
                                q = i
                            }
                        }
                    }
                    if (v.hlsautoquality == 1) {
                        o.files_quality[x.length] = Lang("auto")
                    } else {
                        hls.autoLevelEnabled = 0;
                        hls.autoLevelCapping = 0
                    }
                    if (v.hlslowquality == 1 || q > 0) {
                        hls.autoLevelCapping = 0;
                        if (v.hlschangequality == "next" || (!o.start && v.preload == 0)) {
                            hls.nextLevel = q
                        } else {
                            if (v.hlschangequality == "current") {
                                hls.currentLevel = q
                            }
                        }
                    } else {
                        v.hlsautoquality == 1 ? o.current_quality = hls.levels.length - 1 : o.current_quality = hls.firstLevel
                    }
                    HlsUpdateAudio()
                }
                o.controls ? o.controls.refresh() : ''
            }
        }

        function HlsUpdateAudio() {
            if (o.files_quality_ag.length > 0 && v.hlsaudio == 1) {
                HlsAudioTracks();
                HlsAudioTrack()
            }
        }

        function HlsAudioTracks() {
            if (!pip && v.hlsaudio == 1) {
                var x = hls.audioTracks;
                o.files_audiotrack = [];
                var stop;
                if (x.length > 1) {
                    for (var i = 0; i < x.length; i++) {
                        stop = false;
                        if (exist(x[i].groupId) && o.files_quality_ag.length > 0) {
                            if (x[i].groupId != o.files_quality_ag[o.current_quality]) {
                                for (var j = 0; j < o.files_quality_ag.length; j++) {
                                    if (o.files_quality_ag[j] == x[i].groupId) {
                                        stop = true
                                    }
                                }
                            }
                        }
                        if (!stop) {
                            o.files_audiotrack[i] = exist(x[i].name) ? RenameTracks(x[i].name) : i;
                            if (exist(v.default_audio)) {
                                if (v.default_audio == o.files_audiotrack[i]) {
                                    o.current_audiotrack = i;
                                    hls.audioTrack = i
                                }
                            }
                        }
                    }
                }
            }
        }

        function HlsAudioTrack() {
            if (!pip) {
                var x = hls.audioTracks;
                var y = hls.audioTrack;
                if (y > -1) {
                    if (exist(x[y].groupId)) {
                        if (o.files_quality_ag.length > 0) {
                            if (o.files_quality_ag[o.current_quality] != x[y].groupId) {
                                for (var i = 0; i < x.length; i++) {
                                    if (x[i].name == x[y].name && x[i].groupId == o.files_quality_ag[o.current_quality]) {
                                        hls.audioTrack = i;
                                        y = i;
                                        break
                                    }
                                }
                            }
                        }
                    }
                    o.current_audiotrack = y;
                    log("HLS AudioTrack", o.current_audiotrack);
                    o.controls.AudioTrackChangedNoHand(o.current_audiotrack)
                }
            }
        };

        function RenameTracks(x) {
            var r = x.toLowerCase();
            if (r == "eng" || r == "en") {
                x = "English"
            } else if (r == "rus" || r == "ru") {
                x = "Русский"
            }
            if (typeof (v.rename_audio) == "object") {
                x = existv(v.rename_audio[x], x)
            }
            return x
        };

        function MseRenameQualities(x, y) {
            var r = x.height + 'p';
            if (x.height < 200) {
                r = '160p'
            } else if (x.height >= 200 && x.height <= 300) {
                r = '240p'
            } else if (x.height > 300 && x.height <= 400) {
                r = '360p'
            } else if (x.height > 400 && x.height <= 500) {
                r = '480p'
            } else if (x.height > 500 && x.height <= 600) {
                r = '540p'
            } else if (x.height > 600 && x.height <= 900) {
                r = '720p'
            } else if (x.height > 900 && x.height <= 1200) {
                r = '1080p'
            } else if (x.height > 1200 && x.height <= 1800) {
                r = '1440p'
            } else if (x.height > 1800) {
                r = '2160p'
            }
            if (x.width == 426 && x.height <= 240) {
                r = '240p'
            } else if (x.width == 640 && x.height <= 360) {
                r = '360p'
            } else if (x.width == 854 && x.height <= 480) {
                r = '480p'
            } else if (x.width == 1280 && x.height <= 720) {
                r = '720p'
            } else if (x.width == 1920 && x.height <= 1080) {
                r = '1080p'
            } else if (x.width == 2560 && x.height <= 1440) {
                r = '1440p'
            } else if (x.width == 3840 && x.height <= 2160) {
                r = '2160p'
            }
            if (v.settings.customqualities == 1 && exist(v.settings['name' + r])) {
                r = v.settings['name' + r]
            } else {
                if (y == 1) {
                    r = Lang(r)
                }
                if (y == 2 && exist(x.bitrate)) {
                    r = parseInt(x.bitrate / 1000) + ' ' + Lang('kbps')
                }
            }
            return r
        };

        function Time() {
            if (is_dash) {
                return dash_created ? dash.time() : 0
            } else {
                return pjstg.currentTime
            }
        };

        function Duration() {
            var x = pjstg.duration;
            if (is_dash && dash_created) {
                x = dash.duration()
            }
            if (exist(v.end)) {
                x = v.end
            }
            return x != Infinity && !isNaN(x) ? x : 0
        }
        this.Play = function () {
            var p = true;
            if (is_hls && !hls_started) {
                if (!hls_created) {
                    CreateHLS(true)
                }
                hls.startLoad()
            }
            if (is_dash && !dash_created) {
                CreateDASH(true);
                p = false
            }
            if (is_ws) {
                if (!ws_created) {
                    CreateWS()
                }
                ws.play();
                p = false
            }
            if (pjstg.style.top == "-2000px") {
                this.AfterVast()
            }
            p ? TagPlay() : ''
        };
        var playtry;

        function TagPlay() {
            if (url != "none") {
                var pp = pjstg.play();
                if (pp !== undefined) {
                    pp.then(function () { }).catch(function (error) {
                        log("playError", error.message);
                        if (error.message.indexOf('source') == -1 && error.message.indexOf('interrupted by') == -1) {
                            if (!o.system.mobiletv || error.message.indexOf('user denied permission') == -1) {
                                if (v.autoplaymute == 1 && !o.muted) {
                                    o.actions.Mute();
                                    var pp2 = pjstg.play();
                                    if (pp2) {
                                        pp2.then(function () { }).catch(function (e) {
                                            console.log(e)
                                        })
                                    }
                                } else {
                                    o.controls.Pause();
                                    o.actions.ShowPoster()
                                }
                            } else {
                                if (o.system.tv && (is_hls || is_dash)) { } else {
                                    o.controls.Pause();
                                    o.actions.ShowPoster();
                                    js("autoplay_denied")
                                }
                            }
                        }
                    })
                }
            }
        }
        this.BeforeVast = function () {
            if (o.vastloader || o.vast) {
                if (o.ispipkit) {
                    PipWebkit()
                }
                if (!o.airplayed && o.system.mobile && o.system.webkit) {
                    if (!pjstg.muted) {
                        pjstg.muted = true;
                        unmuteplease = true
                    }
                    css(pjstg, {
                        "position": "absolute",
                        "left": -2000,
                        "top": -2000
                    });
                    pause_before_vast = Time();
                    if (!is_ws) {
                        pjstg.play()
                    }
                    if (pause_before_vast == 0 && o.seekto > 0) {
                        _seekaftervast = o.seekto
                    }
                }
            }
        };
        this.AfterVast = function () {
            if (!o.airplayed && (o.system.mobile || o.system.webkit)) {
                css(pjstg, {
                    "position": "static",
                    "left": 0,
                    "top": 0
                });
                if (exist(v.ratio)) {
                    Resize()
                }
                if (unmuteplease) {
                    !o.muted ? pjstg.muted = false : '';
                    unmuteplease = false
                }
                if (_seekaftervast > 0) {
                    o.seekto = _seekaftervast;
                    _seekaftervast = 0
                }
                pause_before_vast = -1
            }
        };
        this.Pause = function () {
            pause()
        };

        function pause() {
            if (is_ws) {
                ws.pause()
            } else {
                pjstg.pause()
            }
        };
        this.Toggle = function () {
            !pjstg.paused ? Pause() : TagPlay()
        };
        this.Seek = function (x) {
            if (is_dash && dash_created) {
                dash.seek(x)
            } else {
                if (is_hls) {
                    if (v.hlsforce == 1 && x > 0 && isAuto()) {
                        hls_force = hls.currentLevel;
                        hls.nextAutoLevel = 0
                    }
                }
                pjstg.currentTime = x
            }
        };
        this.Mute = function () {
            pjstg.muted = true
        };
        this.Unmute = function () {
            pjstg.muted = false
        };
        this.Volume = function (x) {
            pjstg.volume = x
        };
        this.Gain = function () {
            if (o.gainedsource != pjstg) {
                var source;
                var ctx;
                if (o.audiosrc[pjstg]) {
                    source = o.audiosrc[pjstg];
                    ctx = o.audioctx[pjstg]
                } else {
                    window.AudioContext = window.AudioContext || window.webkitAudioContext;
                    ctx = new AudioContext();
                    source = ctx.createMediaElementSource(pjstg);
                    o.audiosrc[pjstg] = source;
                    o.audioctx[pjstg] = ctx
                }
                var gain = ctx.createGain();
                gain.gain.value = v.volumegain;
                source.connect(gain);
                gain.connect(ctx.destination);
                o.gained = true;
                o.gainedsource = pjstg
            }
        };
        this.isPlaying = function () {
            return !pjstg.paused
        };
        this.isLive = function () {
            return v.live == 1 || is_ws ? true : is_live
        };
        this.tag = function () {
            return pjstg
        };
        this.nativeControls = function () {
            attr(pjstg, {
                'controls': '1'
            });
            return true
        };
        this.preload = function () {
            attr(pjstg, {
                'preload': 'metadata'
            });
            if (is_hls && !hls_created) {
                CreateHLS(false)
            }
            if (is_dash && !dash_created) {
                CreateDASH(false)
            }
        };
        this.status = function () {
            var state = "playing";
            if (pjstg.paused) {
                state = "paused"
            }
            if (pjstg.ended) {
                state = "ended"
            }
            return state
        };
        this.ChangePip = function (x, y) {
            pip = x;
            y.appendChild(pjstg);
            container = y;
            if (x) {
                if (v.pip.nomute != 1) {
                    pjstg.muted = true
                } else {
                    if (!o.muted) {
                        pjstg.muted = false
                    }
                }
                PipSize();
                if (o.files_quality.length > 0) {
                    if (is_hls) {
                        pip_quality = o.current_quality;
                        hls.autoLevelCapping = 0;
                        hls.currentLevel = 0
                    }
                }
            } else {
                if (!o.muted && v.pip.nomute != 1) {
                    pjstg.muted = false
                }
                pjstg.volume = v.volume;
                PlayerSize();
                if (o.files_quality.length > 0) {
                    if (is_hls) {
                        hls.autoLevelCapping = -1;
                        if (pip_quality > -1) {
                            pip_quality < hls.levels.length ? hls.nextLevel = pip_quality : ''
                        }
                    }
                }
            }
        };
        this.time = function () {
            return Time()
        };
        this.duration = function () {
            return Duration()
        };
        this.loaded = function () {
            var x = 0;
            if (pjstg.buffered) {
                if (pjstg.buffered.length > 0) {
                    var y = Time();
                    for (var i = 0; i < pjstg.buffered.length; i++) {
                        if ((y >= pjstg.buffered.start(i) || y >= pjstg.buffered.start(i) - 100) && y <= pjstg.buffered.end(i)) {
                            x = pjstg.buffered.end(i)
                        }
                    }
                    x == 0 ? x = pjstg.buffered.end(pjstg.buffered.length - 1) : ''
                }
            }
            if (exist(v.end)) {
                x > v.end ? x = v.end : ''
            }
            return x
        };
        this.auto = function () {
            return isAuto()
        };

        function isAuto() {
            var x = false;
            if (is_hls) {
                if (hls_created) {
                    x = hls.autoLevelEnabled
                }
            } else if (is_dash) {
                if (dash_created) {
                    var y = dash.getSettings();
                    x = y.streaming.abr.autoSwitchBitrate.video
                }
            }
            return x
        }
        this.size = function () {
            return {
                "width": pjstg.videoWidth,
                "height": pjstg.videoHeight
            }
        };
        this.src = function (x) {
            url = x;
            o.media_error != 2 ? o.media_error = false : '';
            if (is_dash) {
                if (dash) {
                    dash.attachSource(x)
                }
            } else if (is_hls) {
                is_hls && hls ? hls.destroy() : '';
                CreateHLS(true);
                CheckPip()
            } else {
                attr(pjstg, {
                    'src': x,
                    'autoplay': 0
                });
                tagSrc();
                pause()
            }
        };

        function tagSrc() {
            if (o.system.safari) {
                var y = pjstg.textTracks;
                if (y) {
                    for (var i = 0; i < y.length; i++) {
                        y[i].mode = "disabled"
                    }
                }
                y = pjstg.audioTracks;
                if (y) {
                    for (i = 0; i < y.length; i++) {
                        y[i].enabled = (i == 0 ? 1 : 0)
                    }
                }
                if (window.WebKitPlaybackTargetAvailabilityEvent) {
                    pjstg.addEventListener('webkitplaybacktargetavailabilitychanged', function (event) {
                        o.airplay = event.availability == "available";
                        !pip ? o.actions.AirplayChanged() : ''
                    })
                }
            }
            CheckPip()
        }
        this.airplay = function () {
            pjstg.webkitShowPlaybackTargetPicker()
        };
        this.pipwebkit = function () {
            PipWebkit()
        };

        function CheckPip() {
            if (o.system.webkit) {
                if (exist(pjstg.webkitSupportsPresentationMode) && !o.system.iphone) {
                    o.pipwebkit = true
                }
                if (document.pictureInPictureEnabled && !pjstg.disablePictureInPicture) {
                    o.pipwebkit = true
                }
            }
        }

        function PipWebkit() {
            if (o.system.safari) {
                if (pjstg.webkitPresentationMode === "picture-in-picture") {
                    pjstg.webkitSetPresentationMode("inline");
                    o.ispipkit = false
                } else {
                    pjstg.webkitSetPresentationMode("picture-in-picture");
                    o.ispipkit = true
                }
            } else {
                if (!document.pictureInPictureElement) {
                    eval('pjstg.requestPictureInPicture().then(p => {o.ispipkit = true;}).catch(error => {o.ispipkit = false;});')
                } else {
                    eval('document.exitPictureInPicture().then(ok =>{o.ispipkit = false;}).catch(error => {});')
                }
            }
        };

        function onPipEnter() {
            o.ispipkit = true
        };

        function onPipLeave() {
            o.ispipkit = false
        };
        this.setDashQuality = function (x) {
            if (dash_created) {
                var x = parseInt(x);
                if (x == dash.getBitrateInfoListFor("video").length) {
                    o.current_quality = dash.getQualityFor('video')
                } else {
                    dash.updateSettings({
                        'streaming': {
                            'abr': {
                                'autoSwitchBitrate': {
                                    'audio': false,
                                    'video': false
                                }
                            }
                        }
                    });
                    dash.setQualityFor('video', x);
                    dash.setQualityFor('audio', x)
                }
            }
        };
        this.setWsQuality = function (x) {
            if (o.ws) {
                o.ws.setTracks(ws, x, -1)
            }
        };
        this.setWsAudioTrack = function (x) {
            if (o.ws) {
                o.ws.setTracks(ws, -1, x)
            }
        };
        this.setDashAudioTrack = function (x) {
            if (dash_created) {
                if (pjstg.buffered.length > 0) {
                    dash.setCurrentTrack(dash.getTracksFor('audio')[parseInt(x)])
                }
            }
        };
        this.setHlsQuality = function (x) {
            if (hls_created) {
                var y = parseInt(x);
                if (x == hls.levels.length) {
                    y = -1;
                    hls.autoLevelCapping = -1
                }
                if (v.hlschangequality == "current") {
                    setTimeout(onWaiting, 500);
                    hls.currentLevel = y
                }
                if (v.hlschangequality == "next") {
                    log("HLS next level " + y);
                    hls.nextLevel = y
                }
                if (y == -1) {
                    o.current_quality = hls.loadLevel
                }
                HlsUpdateAudio()
            }
        };
        this.getHLS = function () {
            return hls
        };
        this.getDASH = function () {
            return dash
        };
        this.HlsLevelsLength = function () {
            return HlsLevelsLength()
        };

        function HlsLevelsLength() {
            var x = 0;
            if (hls_created) {
                if (hls.levels) {
                    x = hls.levels.length
                }
            }
            return x
        }
        this.DashLevelsLength = function () {
            return DashLevelsLength()
        };
        this.ObjectFit = function () {
            ObjectFit()
        };

        function ObjectFit() {
            if (pjstg) {
                if (v.covervideo == 1 || v.fill == 1) {
                    if (v.fillvideo == 1 || v.fill == 1) {
                        css(pjstg, {
                            'object-fit': 'fill'
                        })
                    } else {
                        css(pjstg, {
                            'object-fit': 'cover'
                        })
                    }
                } else {
                    css(pjstg, {
                        'object-fit': 'contain'
                    })
                }
            }
        }
        this.resize = function () {
            Resize()
        };

        function Resize() {
            if (v.ratio) {
                api('scale', String(v.ratio).replace('/', ':'))
            }
        }

        function DashLevelsLength() {
            var x = 0;
            if (dash_created) {
                x = dash.getBitrateInfoListFor("video").length
            }
            return x
        }
        this.setHlsAudioTrack = function (x) {
            if (hls_created) {
                hls.audioTrack = parseInt(x)
            }
        };
        this.hlsDashSub = function (x, y) {
            if (y == "hls" && hls_created && _hlssubtracks) {
                _hlssubtracks.HlsSubTrack(x)
            }
            if (y == "dash" && dash_created && _dashsubtracks) {
                _dashsubtracks.DashSubTrack(x)
            }
        };
        this.setSpeed = function (x) {
            if (x) {
                pjstg.playbackRate = x
            }
        };
        this.removeTracks = function () {
            var x = pjstg.childNodes;
            var y = [];
            for (var i = 0; i < x.length; i++) {
                if (x[i].tagName.toLowerCase() == 'track') {
                    x[i].removeEventListener("load", iOSTrackLoaded);
                    y.push(x[i])
                }
            }
            for (var i = 0; i < y.length; i++) {
                pjstg.removeChild(y[i])
            }
        };
        this.addTrack = function (x, y, z) {
            if (x != '') {
                if (x.indexOf(' or ') > 0) {
                    var xx = x.split(' or ');
                    x = xx[0]
                }
                var track = document.createElement('track');
                track.setAttribute('src', x);
                track.setAttribute('label', y);
                track.setAttribute('kind', 'subtitles');
                track.setAttribute('mode', 'showing');
                if (z) {
                    track.setAttribute('default', '')
                }
                pjstg.appendChild(track);
                track.addEventListener("load", iOSTrackLoaded)
            }
        };

        function iOSTrackLoaded(e) {
            if (e.target.label && o.sbt) {
                for (var i = 0; i < o.files_subtitle.length; i++) {
                    if (o.files_subtitle[i] == e.target.label) {
                        o.sbt.SetSubtitle(i)
                    }
                }
            }
        };
        this.errorMessage = function () {
            return error ? error : ''
        };
        this.Remove = function () {
            clearInterval(o.dashInterval);
            is_hls && hls ? hls.destroy() : '';
            is_dash && dash ? dash.reset() : '';
            is_ws && ws ? ws.stop() : '';
            pjstg.removeEventListener('error', onTagError);
            pjstg.removeEventListener('ended', onEnded);
            pjstg.removeEventListener('play', onPlay);
            pjstg.removeEventListener('pause', onPause);
            pjstg.removeEventListener('timeupdate', onTimeupdate);
            pjstg.removeEventListener('seeking', onSeeking);
            pjstg.removeEventListener('seeked', onSeeked);
            pjstg.removeEventListener('loadedmetadata', onMeta);
            pjstg.removeEventListener('volumechange', onVolume);
            pjstg.removeEventListener('waiting', onWaiting);
            pjstg.removeEventListener('durationchange', onDuration);
            pjstg.removeEventListener('enterpictureinpicture', onPipEnter);
            pjstg.removeEventListener('leavepictureinpicture', onPipLeave);
            pjstg.src = '';
            if (container.tagName == "IFRAME") {
                container.contentDocument.body.removeChild(pjstg)
            } else {
                container.removeChild(pjstg)
            }
            pjstg = null
        }
    };
    var Controls = function () {
        var b = [];
        var butNames = [];
        var butPosition = [];
        var waiting = false;
        var wait_to;
        var toolbarHidden = false;
        var settings;
        var playlist;
        if (o.settings2) {
            o.settings2.hide();
            o.settings2 = null
        }
        var _lastactbut;
        o.files_speed = [0.25, 0.5, 0.75, 1, 1.25, 1.5, 2];
        if (v.settings.customspeeds == 1 && exist(v.settings.speeds)) {
            v.settings.speeds = v.settings.speeds.replace(/\n/ig, '');
            o.files_speed = v.settings.speeds.split(",")
        }
        o.speed1 = o.files_speed.indexOf('1') > -1 ? o.files_speed.indexOf('1') : o.files_speed.indexOf(1);
        o.current_speed == 3 ? o.current_speed = o.speed1 : '';
        !exist(v.settings.scale) ? v.settings.scale = 5 : '';
        o.files_scale = ['+ ' + v.settings.scale + '%', '&ndash; ' + v.settings.scale + '%', '100%'];
        var resizeonwidth = false;
        var stretch_width = 0;
        var stretch_width_last = 0;
        var stretch_with_volume = false;
        var firstly = true;
        var bg = new ControlsBg();
        var settings;
        var order = [];
        var _rights = false;
        var _move_rights = false;
        var _max_order = 0;
        var _rb = [];
        if (v.control_line.position == "controls-right") {
            v.control_line.position = "controls"
        }
        for (var y in v) {
            if (v.hasOwnProperty(y)) {
                if (y.indexOf("control_") == 0 && v[y]) {
                    !exist(v[y].order0) ? v[y].order0 = v[y].order : v[y].order = v[y].order0;
                    order[v[y].order] = y;
                    if (v.control_line.position != "controls") {
                        if (v[y].position == "controls-right") {
                            _rb.push([y, v[y].order]);
                            _rights = true
                        } else {
                            if (v[y].position == "controls" || v[y].position == undefined) {
                                _rights ? _move_rights = true : ''
                            }
                        }
                    }
                    _max_order < v[y].order ? _max_order = v[y].order : ''
                }
            }
        }
        if (_move_rights) {
            _rb.sort(function (a, b) {
                return a[1] - b[1]
            });
            for (var i = 0; i < _rb.length; i++) {
                order[v[_rb[i][0]].order] = null;
                v[_rb[i][0]].order = _max_order + 1;
                _max_order++;
                order[v[_rb[i][0]].order] = _rb[i][0]
            }
        }
        if (v.toolbar.hide == 1 && v.toolbar.hidedown == 1) {
            o.toolbar = createElement("div");
            o.frame.appendChild(o.toolbar);
            css(o.toolbar, {
                'position': 'absolute',
                'left': 0,
                'top': 0,
                'width': '100%',
                'height': '100%',
                'transition': 'top 0.3s ease-out',
                'pointer-events': 'none'
            })
        }
        var bg2 = createElement("div");
        if (v.toolbar.hide == 1 && v.toolbar.hidedown == 1) {
            o.toolbar.appendChild(bg2)
        } else {
            o.frame.appendChild(bg2)
        }
        css(bg2, {
            'position': 'absolute',
            'left': 0,
            'bottom': 0,
            'width': '100%',
            'height': v.toolbar.h
        });
        bg2.onclick = function () {
            !o.system.mobile ? o.actions.ControlsBgClick() : ''
        };
        if (o.hidecontrols) {
            hide2(bg.c());
            hide2(bg2)
        }
        for (var i = 1; i < order.length; i++) {
            if (order[i]) {
                var y = order[i];
                if (y) {
                    if (o.system.mobile) {
                        if (v[y].action == "volume" && v.showvolmobile == 1 && o.system.android) {
                            v[y].hideoutmute = 0
                        } else {
                            if (v[y].action == "volume" || (v[y].action == "fullscreen" && v.nativemobile)) {
                                v[y].on = 0
                            }
                        }
                    }
                    if (o.hidecontrols) {
                        v[y].on = 0
                    }
                    if (v[y].on == 1) {
                        var action = v[y].action;
                        if (action == "line" || action == "volume") {
                            b[y] = new ControlLine(y, action);
                            b[y].Resize(b[y].s("w"))
                        } else {
                            b[y] = new Control(y)
                        }
                        butNames.push(y);
                        if (b[y].g("action") == "title") {
                            if (b[y].s("text") == '') {
                                if (b[y].s("var") != '') {
                                    if (!exist(v[b[y].s("var")])) {
                                        b[y].set("display", false)
                                    }
                                } else {
                                    b[y].set("display", false)
                                }
                            }
                        }
                        if (b[y].g("action") == "custom") {
                            var lu = b[y].s("linkurl");
                            if (lu) {
                                if (lu.indexOf("api:") == 0 && lu.indexOf(",0/1") > 0) {
                                    var z = lu.split(",");
                                    api(z[0].substr(4)) == 0 ? b[y].CustomSwitch(0) : ''
                                }
                            }
                        }
                        b[y].set("scale", b[y].s("scale"))
                    }
                }
            }
        }
        if (exist(v.settings)) {
            if (typeof (Settings) == 'function') {
                settings = new Settings("settings");
                v.settings.always == 1 ? settings.show() : settings.hide()
            } else {
                o.noset = true
            }
        }
        if (exist(v.playlist)) {
            if (typeof (Settings) == 'function') {
                playlist = new Settings("playlist");
                if (exist(o.playlist)) {
                    playlist.updatePlaylist(o.playlist);
                    if (v.playlist.openplaylistbefore == 0 || !exist(v.playlist.openplaylistbefore)) {
                        v.playlist.always == 0 ? playlist.hide() : ''
                    } else {
                        playlist.show()
                    }
                } else {
                    playlist.hide(1)
                }
                PlaylistControls()
            }
        }
        if (o.shareme) {
            o.share = new Share()
        }
        CustomTextButs();
        Resize(true);
        ShowOrHide();
        SpeedChanged();
        firstly = false;

        function ControlX(but) {
            var x = 0;
            var to_right = false;
            if (but) {
                if (but.g("action") == 'line') {
                    x = butPosition.left + but.s("marginleft");
                    if (butPosition.rightbs != null) { } else {
                        butPosition.rightbs = []
                    }
                } else {
                    if (butPosition.rightbs != null) {
                        var but_space = but.g("width") + but.s("marginright") + but.s("marginleft");
                        if (HideProof(but)) {
                            but_space = 0
                        }
                        if (but.s("hidden") == 1 && !but.g("show")) {
                            but_space = 0
                        }
                        if (but.s("vertical") > 0) {
                            but_space = 0
                        }
                        x = bg.g("w") - v.toolbar.leftandrightpadding * 1 - but_space + but.g("width") / 2 + but.s("marginleft");
                        var i = 0;
                        butPosition.right -= but_space;
                        for (i = 0; i < butPosition.rightbs.length; i++) {
                            var but2 = b[butPosition.rightbs[i]];
                            if (but2.s("vertical") > 0) {
                                css(but2.c(), {
                                    "left": (but2.g("x0") - but_space)
                                })
                            } else {
                                css(but2.c(), {
                                    "left": (but2.g("x") - but_space)
                                })
                            }
                            but2.set("x0", but2.g("x"))
                        }
                        butPosition.rightbs.push(but.g("key"));
                        but.set('rightside', 1)
                    } else {
                        if (but.s("hidden") == 1 && !but.g("show")) {
                            if (but.g("action") == "volume") {
                                if (but.s("hide") == 1 && but.s("hideoutmute") == 1 && stretch_with_volume) {
                                    stretch_width += but.g("width") + but.s("marginleft") + but.s("marginright");
                                    stretch_with_volume = false
                                }
                            }
                        } else {
                            if (but.s("vertical") > 0) {
                                x = butPosition.left + but.s("marginleft") + but.s("marginright")
                            } else {
                                var stop = false;
                                if (but.g("action") == "volume") {
                                    if (but.s("hide") == 1 && but.s("hideoutmute") == 1) {
                                        if (!o.hidden_volume_over_process && !o.hidden_volume_over) {
                                            stop = true;
                                            stretch_with_volume = false
                                        } else {
                                            if (!stretch_with_volume) {
                                                stretch_width -= but.g("width") + but.s("marginleft") + but.s("marginright");
                                                stretch_with_volume = true
                                            }
                                        }
                                    }
                                }
                                if (HideProof(but)) {
                                    stop = true
                                }
                                if (!stop) {
                                    butPosition.left += but.g("width") / 2 + but.s("marginleft");
                                    x = butPosition.left;
                                    butPosition.left += but.g("width") / 2 + but.s("marginright")
                                } else {
                                    x = butPosition.left
                                }
                            }
                        }
                    }
                }
            }
            return x
        }

        function ControlCoordinate(but) {
            var width = o.fullscreen && v.toolbar.stretchonfullscreen == 0 ? o.normal_w : o.screen_w;
            var height = o.screen_h;
            var but_x = 0;
            if (but != bg) {
                but_x = width / 2 + but.s("marginleft") - but.s("marginright")
            }
            var but_y = height / 2;
            var but_w = but.g("width");
            var but_h = but.g("height");
            var position = but.s("position");
            if (position.indexOf("center") > -1) {
                but_x = o.screen_w / 2 + but.s("marginleft") - but.s("marginright")
            }
            if (position.indexOf("top") == 0) {
                but_y = but_h / 2 + (but.s("marginproctop") * o.screen_h / 100)
            }
            if (position.indexOf("bottom") == 0) {
                but_y = o.screen_h - (but == bg ? but_h : but_h / 2) - (but.s("marginprocbottom") * o.screen_h / 100)
            }
            if (position.indexOf("right") > -1) {
                but_x = o.screen_w - but_w / 2 + but.s("marginleft") - but.s("marginright") - (but.s("marginprocright") * o.screen_w / 100)
            }
            if (position.indexOf("left") > -1) {
                but_x = but_w / 2 + but.s("marginleft") - but.s("marginright") + (but.s("marginprocleft") * o.screen_w / 100)
            }
            if (position == "timeline") {
                but_x = -o.timeline_w / 2 + (but.s("marginprocleft") * o.timeline_w / 100) + but.s("marginleft") - but.s("marginright");
                but_y = -o.timeline_h / 2 - (but.s("marginprocbottom") * o.timeline_h / 100) + (but.s("marginproctop") * o.timeline_h / 100)
            }
            if (position.indexOf("controls") > -1) {
                var cx = ControlX(but);
                but_x = (bg ? (bg.c() ? int(bg.c().offsetLeft) : 0) : 0) + cx;
                if (position == "controls-right") {
                    but_x += stretch_width
                }
                if (v.toolbar.position == "top") {
                    but_y = v.toolbar.h / 2 - (v.toolbar_margintop < 0 ? v.toolbar_margintop : 0)
                } else {
                    but_y = height - v.toolbar.h / 2
                }
            }
            return {
                x: but_x,
                y: but_y + but.s("margintop") - but.s("marginbottom")
            }
        }

        function Resize(all) {
            var w = o.fullscreen && v.toolbar.stretchonfullscreen == 0 ? o.normal_w : o.screen_w;
            var h = o.screen_h;
            css(bg.c(), {
                'top': (v.toolbar.position == "top" ? 0 : o.screen_h - v.toolbar.h) - v.toolbar_margintop
            });
            bg.set("y0", (o.screen_h - v.toolbar.h - v.toolbar_margintop));
            if (v.toolbar.stretchonfullscreen == 0 && bg) {
                css(bg.c(), {
                    'width': w,
                    'left': 0,
                    'margin-left': 0
                });
                bg.set("w", w);
                if (o.fullscreen) {
                    css(bg.c(), {
                        'left': '50%',
                        'margin-left': -w / 2
                    })
                }
            }
            butPosition = {
                "left": v.toolbar.leftandrightpadding * 1,
                "right": (bg.g("w") - v.toolbar.leftandrightpadding * 1)
            };
            var bg_hide = false;
            if (!bg.g("show")) {
                bg.set("display", true);
                bg_hide = true
            }
            var key;
            for (var i = 0; i < butNames.length; i++) {
                key = butNames[i];
                if (b[key]) {
                    var cc = ControlCoordinate(b[key]);
                    if (cc) {
                        if (b[key].s("animation") == "position") {
                            if (exist(o.motions[key])) {
                                o.motions[key].XY(b[key].g("x0"), cc.x, b[key].g("y0"), cc.y)
                            }
                        }
                        b[key].set("x0", cc.x);
                        b[key].set("y0", cc.y);
                        if (b[key].s("hidden") == 1 && !b[key].g("show") && !all) {
                            HidePositionControl(b[key])
                        } else {
                            css(b[key].c(), {
                                "position": "absolute",
                                "left": b[key].g("x0"),
                                "top": b[key].g("y0")
                            })
                        }
                    }
                }
            }
            if (bg_hide) {
                bg.set("display", false)
            }
            stretch_width = 0;
            for (key in b) {
                if (b.hasOwnProperty(key)) {
                    if (b[key].s("position") == "controls-right" && b[key].g("action") != "line" && stretch_width > -1) {
                        stretch_width = butPosition.right - butPosition.left
                    }
                    if (b[key].g("action") == "line" && bg) {
                        var line_width;
                        if (b[key].s("customwidth") == 1) {
                            line_width = b[key].s("w")
                        } else {
                            if (b[key].s("position").indexOf("controls") > -1) {
                                line_width = butPosition.right - butPosition.left - b[key].s("marginleft") - b[key].s("marginright");
                                css(b[key].c(), {
                                    "left": (int(bg.c().offsetLeft) + butPosition.left + b[key].s("marginleft") + line_width / 2)
                                });
                                stretch_width = -1
                            } else {
                                line_width = bg.g("w") - b[key].s("marginleft") - b[key].s("marginright");
                                css(b[key].c(), {
                                    "left": (int(bg.c().offsetLeft) + b[key].s("marginleft") + line_width / 2)
                                })
                            }
                        }
                        b[key].set("x0", b[key].g("x"));
                        b[key].Resize(line_width)
                    }
                }
            }
            if (settings) {
                ResizeSettings(settings)
            }
            if (playlist) {
                ResizeSettings(playlist)
            }
            if (resizeonwidth || o.fullscreen || stretch_width_last != stretch_width) {
                ShowOrHide()
            }
        }

        function HidePositionControl(b) {
            var left = 0;
            var top = 0;
            if (b.s("position").indexOf("right") > -1 && b.s("position").indexOf("controls") == -1) {
                left = o.screen_w + b.g("width") + 10
            }
            if (b.s("position").indexOf("left") > -1) {
                left = -b.g("width") - 10
            }
            if (b.s("position").indexOf("top") > -1) {
                top = -b.g("height") * 2
            }
            if (b.s("position").indexOf("bottom") > -1 || b.s("position").indexOf("controls") > -1) {
                top = o.screen_h + b.g("height") + b.g("width") + 10
            }
            if (left > 0) {
                css(b.c(), {
                    "left": left
                })
            }
            if (top > 0) {
                css(b.c(), {
                    "top": top
                })
            }
        }

        function ResizeSettings(x) {
            var top = -2000;
            x.resizePlaylist();
            var y = o.screen_h - v.toolbar.h * (x.s("position").indexOf("top") > -1 ? 1 : 2);
            var ymax = y - (o.fullscreen && !o.system.mobile ? (100 + x.s("hmaxk") * 1) : x.s("hmaxk"));
            ymax < 100 ? ymax = 100 : '';
            css(x.c(), {
                'max-height': ymax
            });
            x.co() ? css(x.co(), {
                'max-height': ymax
            }) : '';
            if (x.g("show")) {
                top = o.screen_h / 2 - x.g("height") / 2 + x.s("margintop") - x.s("marginbottom");
                if (x.s("position").indexOf("top") > -1) {
                    top = x.s("margintop") - x.s("marginbottom")
                }
                if (x.s("position").indexOf("bottom") > -1) {
                    top = o.screen_h - v.toolbar.h - x.g("height") + x.s("margintop") - x.s("marginbottom")
                }
                top < 0 ? top = 0 : ''
            }
            if (x.s("position").indexOf("right") > -1) {
                css(x.c(), {
                    "position": "absolute",
                    "right": x.s("marginright") - x.s("scrollwidth"),
                    "top": top
                })
            } else if (x.s("position").indexOf("left") > -1) {
                css(x.c(), {
                    "position": "absolute",
                    "left": x.s("marginleft"),
                    "top": top
                })
            } else {
                if (x.g("key") == "playlist" && x.s("floatleft") == 1) {
                    css(x.c(), {
                        "position": "absolute",
                        "left": o.screen_w / 2 - x.g("width") / 2 + x.s("marginleft") / 2 - x.s("marginright") / 2,
                        "top": top
                    })
                } else {
                    var l = o.screen_w / 2 - x.g("width") / 2 + x.s("marginleft") - x.s("marginright");
                    css(x.c(), {
                        "position": "absolute",
                        "left": (l > 0 ? l : 0),
                        "top": top
                    })
                }
            }
            x.Arrows()
        };
        this.ControlClick = function (key) {
            var but = b[key];
            var action = but.g("action");
            if (action) {
                var d = new Date();
                o.clicktime = d.getTime();
                if (action && action != "") {
                    Action(but)
                }
            }
        };
        this.toggleControl = function (z, x, y) {
            for (var key in b) {
                if (b.hasOwnProperty(key)) {
                    if (b[key].s(z) == x) {
                        b[key].set(y ? "show2" : "hide2")
                    }
                }
            }
        };
        this.butByS = function (x, s) {
            var y = FindBut(s, x);
            return y
        };

        function Action(but, type) {
            o.acted = true;
            _lastactbut = but;
            var a = but.g("action");
            if (a == "play") {
                o.actions.Play();
                if (v.hotkey.on == 1 && v.hotkey.icons == 1 && v.hotkey.playiconbut == 1) {
                    PluginHotIcon('play', 1)
                }
            } else {
                if (a == "pause") {
                    o.actions.Pause();
                    if (v.hotkey.on == 1 && v.hotkey.icons == 1 && v.hotkey.playiconbut == 1) {
                        PluginHotIcon('play', 0)
                    }
                }
                if (a == "stop") {
                    o.actions.StopMedia()
                }
            }
            if (a == "back") {
                o.actions.Seek(0, false)
            }
            if (a == "fullscreen") {
                !o.casting ? o.actions.Fullscreen() : ''
            } else {
                if (a == "normalscreen") {
                    o.actions.Normalscreen()
                }
            }
            if (a == "line") {
                var ld = o.media.duration();
                var lt = but.g("click") * ld;
                if (v.delete > 0) {
                    ld -= v.delete;
                    lt = but.g("click") * ld + v.delete
                }
                if (v.seekwindow > 0) {
                    if (v.seekwindow / ld <= 1 - but.g("click")) {
                        return
                    }
                }
                o.actions.Seek(lt, true);
                if (o.continue) {
                    o.continue.write(lt, ld);
                    o.seekto > 0 ? o.seekto = undefined : ''
                }
            }
            if (a == "volume") {
                var x = but.g("click");
                x < 0.02 ? x = 0 : '';
                x > 1 ? x = 1 : '';
                if (but.s("customline") == "speed") {
                    x = parseFloat(x * o.files_speed.slice(-1)[0]).toFixed(1);
                    o.actions.SetSpeed(x, 1)
                } else {
                    if (o.storage && v.volumestore == 1) {
                        localStorage.setItem("pljsvolume", x);
                        if (but.g("click") > 0 || o.system.iphone || v.mutestore == 0) {
                            localStorage.removeItem("pljsmute")
                        } else {
                            localStorage.setItem("pljsmute", 1)
                        }
                    }
                    o.actions.Volume(x)
                }
            }
            if (a == "mute") {
                if (o.storage && !o.system.iphone && v.mutestore == 1) {
                    localStorage.setItem("pljsmute", 1)
                }
                o.actions.Mute();
                if (v.hotkey.icons == 1 && v.hotkey.muteiconbut == 1) {
                    PluginHotIcon('mute', 0)
                }
            } else {
                if (a == "unmute") {
                    if (o.storage) {
                        localStorage.removeItem("pljsmute")
                    }
                    o.actions.Unmute();
                    if (v.hotkey.icons == 1 && v.hotkey.muteiconbut == 1) {
                        PluginHotIcon('mute', 1)
                    }
                }
            }
            if (a.indexOf("time") == 0) {
                but.isOn() ? but.Off() : but.On()
            }
            if (a == "rotate") {
                o.media.Rotate()
            }
            if (a == "scale+") {
                o.media.Scale(0.1)
            }
            if (a == "scale-") {
                o.media.Scale(-0.1)
            }
            if (a == "scale") {
                o.media.Scale(0)
            }
            if (a == "live") {
                api("restart");
                but.set("iconopacity", 1);
                but.set("saturate", 1)
            }
            if (a == "share") {
                js("share");
                ShowShare()
            }
            if (a == "settings") {
                if (settings) {
                    if (!settings.g("show")) {
                        settings.show()
                    } else {
                        settings.hide()
                    }
                }
            }
            if (a == "playlist") {
                if (o.overopentimeout == a) {
                    return
                }
                if (exist(v.playlist)) {
                    if (playlist.g("show")) {
                        playlist.hide()
                    } else {
                        setTimeout(function () {
                            playlist.show()
                        }, 100)
                    }
                }
            }
            if (a == "next") {
                o.controls.PlaylistNext()
            }
            if (a == "prev") {
                o.controls.PlaylistPrev()
            }
            if (a == "custom") {
                if (but.s("link") == 1 && but.s("linkurl") != "") {
                    var x = trim(but.s("linkurl"));
                    if (o.overopentimeout == a + x) {
                        return
                    }
                    if (x.indexOf('{time}') > -1) {
                        x = x.replace('{time}', (exist(o.continue) ? o.continue.flag().t : o.media.time()))
                    }
                    if (x.indexOf('{file}') > -1) {
                        x = x.replace('{file}', o.media.currentFile())
                    }
                    if (x.indexOf('{title}') > -1) {
                        x = x.replace('{title}', v.title.replace(/,/ig, " "))
                    }
                    if (x == "airplay") {
                        o.media.Airplay()
                    }
                    if (x == "seektome") {
                        o.actions.Seek(but.s("marginprocleft") * o.media.duration() / 100);
                        !o.play ? o.actions.Play() : ''
                    }
                    but.s("linkpause") == 1 ? o.actions.Pause() : '';
                    var y = x.split(",");
                    if (x.indexOf("api:") == 0) {
                        var z = x.substr(4).split(";");
                        for (var i = 0; i < z.length; i++) {
                            y = z[i].split(",");
                            if (y.length > 1) {
                                if (y[0] == 'seek') {
                                    if (v.hotkey.icons == 1 && v.hotkey.seekiconbut == 1) {
                                        PluginHotIcon('seek', y[1] > 0 ? 1 : 0)
                                    }
                                }
                                api(y[0], y[1], but);
                                y[1] == '0/1' ? reRightMenu() : ''
                            } else {
                                if (y[0] == "screenshot") {
                                    var ss = api(y[0]);
                                    if (ss) {
                                        if (ss.indexOf("data") > -1) {
                                            if (v.ssfly == 1) {
                                                var img = document.createElement('img');
                                                img.setAttribute('src', ss);
                                                css(img, {
                                                    position: "fixed",
                                                    right: (exist(v.ssflyp) ? v.ssflyp : 20),
                                                    bottom: (exist(v.ssflyp) ? v.ssflyp : 20),
                                                    width: 0,
                                                    transition: "width 0.5s cubic-bezier(.75,-0.5,0,1.75)"
                                                });
                                                img.style.zIndex = 1001;
                                                document.body.appendChild(img);
                                                setTimeout(function () {
                                                    css(img, {
                                                        width: (exist(v.ssflyw) ? v.ssflyw : 200)
                                                    })
                                                }, 1);
                                                img.onclick = function () {
                                                    this.parentNode.removeChild(this)
                                                }
                                            }
                                            if (v.ssdown == 1) {
                                                var a = createElement("a");
                                                a.href = ss;
                                                a.download = y[0] + ".jpg";
                                                a.click()
                                            }
                                        }
                                    } else {
                                        log(y[0] + " error")
                                    }
                                } else {
                                    api(y[0])
                                }
                            }
                        }
                    } else {
                        if (x.indexOf("js:") == 0) {
                            if (x.indexOf("(") > 0 && x.indexOf(")") > 0) {
                                eval(x.substr(3))
                            } else {
                                eval(y[0].substr(3) + '(' + (exist(y[1]) ? '"' + y[1] + '"' : '') + (exist(y[2]) ? ',"' + y[2] + '"' : '') + ')')
                            }
                        }
                        if (x.indexOf("event:") == 0) {
                            JsEvent(x.substr(6), o.media.time())
                        }
                        if (x.indexOf("share:") == 0 && o.share) {
                            o.share.api(x.substr(6))
                        }
                        if (x.indexOf("effect:") == 0 && o.effects) {
                            api("effect", x.substr(7))
                        }
                        if (x.indexOf("http") == 0 || x.indexOf("/") == 0 || x.indexOf("?") == 0 || x.indexOf("url:") == 0) {
                            x.indexOf("url:") == 0 ? x = x.substr(4) : '';
                            window.open(x, but.s("linktarget"))
                        }
                        if (x.indexOf("download") == 0) {
                            o.actions.Download()
                        }
                        if (x == "api:pipwebkit") {
                            o.media.PipWebkit()
                        }
                    }
                    if (x.indexOf("settings#") > -1) {
                        if (settings) {
                            var si = x.substr(9).split(",");
                            if (settings.g("show") && settings.g("open") == si[0]) {
                                settings.hide()
                            } else {
                                for (var i = 0; i < si.length; i++) {
                                    i == 0 ? settings.show() : '';
                                    settings.open(si[i])
                                }
                            }
                        }
                    }
                    if (x.indexOf("settings:") > -1 && v.settings.combined == 1) {
                        if (!o.settings2) {
                            o.settings2 = new PluginSettings2()
                        }
                        if (type == "over") {
                            o.settings2.show(x)
                        } else {
                            o.settings2.toggle(x)
                        }
                    }
                    if (x == "unblock") {
                        o.actions.RemoveCurtain();
                        o.stopkeys = 0;
                        but.set("hide2");
                        var bl = FindBut("linkurl", "block");
                        if (bl) {
                            bl.set("hide2")
                        }
                    }
                    if (x == "block") {
                        but.UpdateText("OK");
                        but.s("linkurl2") ? window.location.href = trim(but.s("linkurl2")) : ''
                    }
                }
            }
        };
        this.title = function (t) {
            var y = false;
            for (var x in b) {
                if (b.hasOwnProperty(x)) {
                    if (b[x].g("action") == "title") {
                        if (b[x].s("var") == t || t == "title") {
                            if (b[x].s("hide") == 1 && b[x].s("hideonplay") == 1 && o.play) {
                                y = true
                            }
                            if (v[t] == '' || y) {
                                b[x].set("display", false)
                            } else {
                                b[x].set("display", true)
                            }
                            b[x].UpdateText(v[t])
                        }
                    }
                }
            }
            TitlePl()
        };
        this.titlepl = function () {
            TitlePl()
        };
        this.resizetext = function () {
            for (var x in b) {
                if (b.hasOwnProperty(x)) {
                    if (b[x].g("action") == "custom") {
                        if (b[x].s("type") == "text") {
                            b[x].ResizeText()
                        }
                    }
                }
            }
        };

        function TitlePl() {
            for (var x in b) {
                if (b.hasOwnProperty(x)) {
                    if (b[x].g("action") == "custom") {
                        if (b[x].s("type") == "text") {
                            b[x].RenewFromTitle(true)
                        }
                    }
                }
            }
        }

        function ShowShare() {
            if (exist(o.share)) {
                o.share.Show()
            }
        }
        this.showShare = function () {
            ShowShare()
        };
        this.updateTitle = function () {
            if (v.title != '') {
                for (var x in b) {
                    if (b.hasOwnProperty(x)) {
                        if (b[x].g("action") == "title") {
                            var y = false;
                            if (!b[x].g("show")) {
                                y = true;
                                b[x].set("display", true)
                            }
                            b[x].UpdateText(v.title);
                            if (y) {
                                b[x].set("display", false)
                            }
                        }
                    }
                }
            }
        };
        this.customTextPl = function () {
            CustomTextButs()
        };

        function CustomTextButs() {
            if (v.customtext) {
                if (typeof (v.customtext) == "object") {
                    for (var x in v.customtext) {
                        if (v.customtext.hasOwnProperty(x)) {
                            CustomText(x, v.customtext[x])
                        }
                    }
                }
            }
        };
        this.customText = function (y, z) {
            CustomText(y, z)
        };

        function CustomText(y, z) {
            for (var x in b) {
                if (b.hasOwnProperty(x)) {
                    if (b[x].g("action") == "custom" && b[x].s("type") == "text") {
                        if (b[x].s("dom") == y) {
                            if (!b[x].g("show") || b[x].s("hidden") == 1) {
                                b[x].set("unhidden");
                                b[x].set("display", true)
                            }
                            b[x].CustomText(z)
                        }
                    }
                }
            }
        };
        this.resize = function () {
            Resize()
        };
        this.resize2 = function () {
            Resize(true)
        };
        this.resizeSettings = function () {
            ResizeSettings(settings)
        };
        this.resizePlaylist = function () {
            ResizeSettings(playlist)
        };
        this.Play = function () {
            for (var x in b) {
                if (b.hasOwnProperty(x)) {
                    if (b[x].g("action") == "play") {
                        b[x].On()
                    }
                }
            }
            if (this.PlaylistVisible() && v.playlist.autohide == 1) {
                this.Playlist()
            }
            o.play = true;
            ShowOrHide()
        };
        this.Pause = function () {
            for (var x in b) {
                if (b.hasOwnProperty(x)) {
                    if (b[x].g("action") == "pause" || b[x].g("action") == "stop") {
                        b[x].Off()
                    }
                }
            }
            if (playlist) {
                if (v.playlist.openplaylistpause == 1 && !playlist.empty()) {
                    playlist.show()
                }
            }
            o.play = false;
            this.StopWaiting();
            ShowOrHide();
            if (v.toolbar.hide == 1 && v.toolbar.hideonpause == 1) {
                HideForce(true)
            }
        };
        this.Mute = function () {
            for (var x in b) {
                if (b.hasOwnProperty(x)) {
                    if (b[x].g("action") == "mute") {
                        b[x].On()
                    }
                    this.Volume(0)
                }
            }
            ShowOrHide()
        };
        this.Unmute = function () {
            for (var x in b) {
                if (b.hasOwnProperty(x)) {
                    if (b[x].g("action") == "unmute") {
                        b[x].Off()
                    }
                }
            }
            if (v.volume < 0.1) {
                v.volume = 0.5;
                o.actions.Volume(v.volume)
            } else {
                this.Volume(v.volume)
            }
            ShowOrHide()
        };
        this.Volume = function (volume, y) {
            for (var x in b) {
                if (b.hasOwnProperty(x)) {
                    if (b[x].g("action") == "volume") {
                        if (b[x].s("customline") != "speed") {
                            b[x].UpdatePlay(volume, 1, (y == "no" ? y : true))
                        }
                    }
                    if (b[x].g("action") == "mute") {
                        b[x].UpdateVolume(volume)
                    }
                }
            }
            ShowOrHide()
        };
        this.Fullscreen = function () {
            var bl = FindBut("action", "fullscreen");
            if (bl) {
                bl.On();
                bl.set("scale", bl.s("scale"))
            }
            ShowOrHide();
            resizeonwidth ? setTimeout(ShowOrHide, 500) : '';
            HideInterval()
        };
        this.Normalscreen = function () {
            var bl = FindBut("action", "fullscreen");
            if (bl) {
                bl.Off()
            }
            Resize();
            clearInterval(o.toolbarInterval);
            ShowOrHide()
        };
        this.onEnded = function () {
            for (var x in b) {
                if (b.hasOwnProperty(x)) {
                    if (b[x].g("action") == "play") {
                        b[x].ReplayIcon()
                    }
                }
            }
        };
        this.Review = function () {
            ShowOrHide()
        };

        function ShowOrHide() {
            for (var x in b) {
                if (b.hasOwnProperty(x)) {
                    if (b[x].g("action") != "buffer") {
                        ShowOrHideProcessor(b[x])
                    }
                }
            }
            ShowOrHideProcessor(bg);
            if (stretch_width_last != stretch_width) {
                stretch_width_last = stretch_width;
                Resize()
            }
            if (v.toolbar.hide == 1 && v.toolbar.hidedown == 1) {
                ToolbarDown(!o.starttimeout && !o.mouseHere && !o.fullscreen && o.play && v.toolbar.hidejustfull != 1 && !o.casting)
            }
        };

        function ShowForce() {
            var show = toolbarHidden && v.toolbar.hidewithoutmoving == 1;
            if (!o.play && v.toolbar.hide == 1 && v.toolbar.hideonpause == 1) {
                show = false
            }
            if (show) {
                for (var x in b) {
                    if (b.hasOwnProperty(x)) {
                        if (b[x].g("action") != "buffer") {
                            ShowOrHideProcessor(b[x], false)
                        }
                    }
                }
                css(o.frame, {
                    "cursor": "default"
                });
                o.fcdef = true;
                ShowOrHideProcessor(bg, false);
                if (bg.g("show")) {
                    ToolbarShow()
                }
                ToolbarDown(false)
            }
        }

        function HideForce() {
            var hide = o.play && v.toolbar.hidewithoutmoving == 1 && !o.mouseDown && !o.controlover;
            if (!o.play && v.toolbar.hide == 1 && v.toolbar.hideonpause == 1) {
                hide = true
            }
            if (settings) {
                if (settings.g("show") && o.setaction) {
                    hide = false
                }
            }
            if (hide) {
                for (var x in b) {
                    if (b.hasOwnProperty(x)) {
                        if (b[x].g("action") != "buffer") {
                            ShowOrHideProcessor(b[x], true)
                        }
                    }
                }
                ShowOrHideProcessor(bg, true);
                if (!bg.g("show")) {
                    toolbarHidden = true;
                    o.media.ToolbarHide();
                    if (o.play) {
                        css(o.frame, {
                            "cursor": "none"
                        });
                        o.fcdef = false
                    }
                }
                ToolbarDown(true)
            }
        }

        function HideInterval() {
            if (v.toolbar.hidewithoutmoving == 1) {
                if (v.toolbar.hidejustfull == 1 && !o.fullscreen && !o.fullscreen_process) { } else {
                    clearInterval(o.toolbarInterval);
                    o.toolbarInterval = setInterval(HideForce, ((v.toolbar.hideleavetimeout > 0 ? v.toolbar.hideleavetimeout : v.toolbar.hidetimeout) * 1000))
                }
            }
        }

        function ShowOrHideProcessor(but, forcehide) {
            var hide = false;
            var show = false;
            var toolbar_hide = false;
            if (v.toolbar.hide == 1) {
                if (!o.starttimeout && !o.mouseHere && !o.fullscreen && o.play && v.toolbar.hidejustfull != 1 && !o.casting) {
                    hide = true;
                    show = false;
                    toolbar_hide = true
                } else {
                    hide = false;
                    show = true
                }
                if (exist(forcehide) && !o.casting) {
                    hide = forcehide;
                    show = !hide
                }
                if (v.toolbar.hide == 1 && v.toolbar.hidedown == 1 && (but.s("position").indexOf("controls") == 0 || but.s("action") == "line")) {
                    hide = false;
                    show = true
                }
                if (v.toolbar.hideonpause == 1 && !o.play) {
                    hide = true;
                    show = false;
                    toolbar_hide = false
                }
            } else {
                if (but.s("hide") != 1) {
                    show = true
                }
            }
            if (show && !o.fcdef) {
                css(o.frame, {
                    "cursor": "default"
                });
                o.fcdef = true
            }
            var a = but.g("action");
            if (a == "custom" && but.s("position").indexOf("controls") == -1) {
                hide = false;
                show = true
            }
            if (o.casting) {
                if (a == "line") {
                    if (o.media.duration() == -1) {
                        hide = true;
                        show = false
                    }
                }
            }
            var re_y = false;
            var hp = HideProof(but);
            if (but.s("hide") == 1) {
                if (but.s("hideonleaveandplay") == 1) {
                    if (toolbar_hide || forcehide || (o.play && !o.mouseHere)) {
                        !toolbar_hide && !forcehide ? '' : hp = true
                    }
                }
                if (but.s("hidelap") == 1) {
                    if (o.play && !o.mouseHere) {
                        hp = true
                    }
                }
                if (but.s("hideonwidth") == 1 || but.s("hideoverwidth") == 1 || but.s("hideonfullscreen") == 1) {
                    resizeonwidth = true
                }
            }
            if (hp) {
                hide = true;
                show = false
            } else {
                !hide ? show = true : ''
            }
            if (but.s("action") == "volume") {
                if (but.s("hide") == 1 && but.s("hideoutmute") == 1) {
                    hide = true;
                    show = false;
                    if (!toolbar_hide && (o.hidden_volume_over || o.hidden_volume_over_process) && !forcehide && but.s("hiddenwidth") != 1) {
                        hide = false;
                        show = true
                    } else {
                        re_y = true
                    }
                }
            }
            if (o.nativecontrols || (!o.start && v.toolbar.hide == 1 && v.toolbar.hideuntilstarted == 1) || (!o.metadata && v.toolbar.hide == 1 && v.toolbar.hideuntilmeta == 1)) {
                if (but.s("position").indexOf("controls") > -1 || but.s("position").indexOf("bottom") > -1) {
                    hide = true;
                    show = false
                }
                if (v.toolbar.hidejustfull == 1 && !o.fullscreen) {
                    hide = false;
                    show = true
                }
            }
            if (settings) {
                if (settings.g("show") && v.settings.always != 1) {
                    toolbar_hide = false;
                    forcehide = false
                }
            }
            if (a == "share") {
                if (exist(o.share)) {
                    if (o.share.empty()) {
                        hide = true;
                        show = false;
                        but.set("animation", "none")
                    }
                }
            }
            if (a == "playlist" || a == "next" || a == "prev" || but.s("hidewithoutplaylist") == 1) {
                if (playlist) {
                    if (playlist.empty() && but.s("hidewithoutplaylist") != 0) {
                        hide = true;
                        show = false;
                        but.set("animation", "none")
                    }
                } else {
                    hide = true;
                    show = false
                }
            }
            if (o.hideall == 1) {
                hide = true;
                show = false
            }
            if (re_y) {
                var cc = ControlCoordinate(but);
                if (cc) {
                    cc.y > 0 ? but.set("y0", cc.y) : '';
                    css(but.c(), {
                        "position": "absolute",
                        "top": but.g("y0")
                    })
                }
            }
            if (hide) {
                HideControl(but, (firstly ? true : false))
            }
            if (show) {
                ShowControl(but)
            }
            if (but == bg) {
                if (!hide && show) {
                    ToolbarShow();
                    show2(bg2);
                    toolbarHidden = false
                }
                if (hide && !show) {
                    o.media.ToolbarHide();
                    SettingsClose();
                    hide2(bg2);
                    toolbarHidden = true
                }
                if (playlist) {
                    if (v.playlist.always == 1 && !playlist.empty()) {
                        if (show || o.nativecontrols) {
                            if (v.playlist.alwaysnotfullscreen == 1 && o.fullscreen) { } else {
                                if (!playlist.g("show")) {
                                    if (v.playlist.alwaysjustpause == 1) {
                                        !o.play ? playlist.show() : ''
                                    } else {
                                        playlist.show()
                                    }
                                }
                            }
                        } else {
                            if (hide && playlist.g("show")) {
                                playlist.hide()
                            }
                        }
                    }
                }
            }
        };

        function HideProof(but) {
            var x = false;
            var a = but.g("action");
            if (but.s("hide") == 1) {
                if (but.s("hideonplay") == 1) {
                    o.play ? x = true : ''
                }
                if (but.s("hideonpause") == 1) {
                    !o.play ? x = true : ''
                }
                if (but.s("hideondesktop") == 1) {
                    o.system.desktop ? x = true : ''
                }
                if (but.s("hideonmobile") == 1) {
                    o.system.mobile ? x = true : ''
                }
                if (but.s("hideoverwidth") == 1) {
                    if (o.screen_w > but.s("hideoverwidthlimit")) {
                        but.set("hiddenwidth", 1);
                        x = true
                    } else {
                        but.set("hiddenwidth", 0)
                    }
                }
                if (but.s("hideonwidth") == 1) {
                    if (o.screen_w <= but.s("hideonwidthlimit")) {
                        but.set("hiddenwidth", 1);
                        x = true
                    } else {
                        but.set("hiddenwidth", 0)
                    }
                }
                if (but.s("hideafterstart") == 1) {
                    o.start ? x = true : ''
                }
                if (but.s("hide0timestore") == 1) {
                    if (o.start || !o.continue || o.media.isLive()) {
                        x = true
                    }
                    if (o.continue) {
                        if (o.continue.flag().t == 0) {
                            x = true
                        }
                    }
                }
                if (but.s("hideuntilstarted") == 1) {
                    !o.start ? x = true : ''
                }
                if (but.s("hideuntilto") > 0) {
                    x = true
                }
                if (but.s("hideonvar") == 1) {
                    if (exist(but.s("hidevar"))) {
                        options[but.s("hidevar")] ? x = true : ''
                    }
                }
                if (but.s("hideuntiltext") == 1) {
                    if (!exist(but.s("customtext"))) {
                        x = true
                    }
                }
                if (but.s("hidewovar") == 1) {
                    if (exist(but.s("hidevar2"))) {
                        !options[but.s("hidevar2")] ? x = true : ''
                    }
                }
                if (but.s("hideuntilstartedios") == 1 && o.system.ios) {
                    !o.start || o.newfile ? x = true : ''
                }
                if (but.s("hideuntilended") == 1) {
                    !o.media.ended() ? x = true : ''
                }
                if (but.s("hideonvod") == 1) {
                    !o.media.isLive() ? x = true : ''
                }
                if (but.s("hideonleave") == 1) {
                    !o.mouseHere ? x = true : ''
                }
                if (but.s("hidenormscreen") == 1) {
                    !o.fullscreen ? x = true : ''
                }
                if (but.s("hideonfullscreen") == 1) {
                    o.fullscreen ? x = true : ''
                }
                if (but.s("hideonunmute") == 1) {
                    !o.muted ? x = true : ''
                }
                if (but.s("hideonlive") == 1) {
                    o.media.isLive() && o.media.currentFile().indexOf("?DVR") == -1 ? x = true : ''
                }
                if (but.s("hidewithposter") == 1) {
                    isVisible(o.poster) ? x = true : ''
                }
                if (but.s("hideuntilmeta") == 1) {
                    !o.metadata ? x = true : ''
                }
                if (but.s("hideonmeta") == 1) {
                    o.metadata ? x = true : ''
                }
                if (but.s("hidemini") == 1) {
                    o.mini ? x = true : ''
                }
                if (but.s("hidenomini") == 1) {
                    !o.mini ? x = true : ''
                }
                if (but.s("hideafterclick") == 1) {
                    if (but.g("clicked")) {
                        x = true
                    }
                }
                if (but.s("hidenoab") == 1) {
                    !o.ab ? x = true : ''
                }
                if (but.s("hideab") == 1) {
                    o.ab ? x = true : ''
                }
                if (but.s("hideonyoutube") == 1) {
                    if (v.preload == 1 && v.screenclick == 1) {
                        if (o.file_type == "youtube" && !exist(v.poster) && v.youtubeposter == 0) {
                            if (!o.start || o.media.status() == "ended") {
                                if (v.poster == '') { } else {
                                    x = true
                                }
                            }
                        }
                    }
                }
            }
            if (a == "custom") {
                if (but.s("linkurl")) {
                    if (but.s("linkurl") == "api:airplay" || but.s("linkurl") == "airplay") {
                        if (!o.airplay && !o.airplayed) {
                            x = true
                        }
                    }
                    if (but.s("linkurl") == "api:pipwebkit") {
                        if (!o.pipwebkit || (!o.start && v.preload == 0)) {
                            x = true
                        }
                    }
                    if (but.s("linkurl") == "api:unfixing") {
                        if (!o.mini) {
                            x = true
                        }
                    }
                    if (but.s("linkurl").indexOf("captions") > -1) {
                        if (!o.captions) {
                            x = true
                        }
                    }
                }
            }
            if (a == "playlist" || a == "next" || a == "prev") {
                if (playlist) {
                    if (playlist.empty()) {
                        x = true
                    }
                } else {
                    x = true
                }
            }
            if (a == "settings") {
                if (settings) {
                    if (settings.empty()) {
                        x = true;
                        but.set("animation", "none")
                    }
                } else {
                    x = true
                }
            }
            if (but.g("type") == "text") {
                if (but.g("length") == 0) {
                    x = true
                }
            }
            if (but.g("settings#")) {
                if (!but.g("set#visible")) {
                    x = true
                }
            }
            if (but.s("chromecast") == 1) {
                var cb = document.getElementById("pjs_cast_button_" + v.id);
                if ((o.media.duration() == 0 && o.media.time() == 0) || !o.tagvideo || !isVisible(cb) || !o.cast_available) {
                    x = true
                }
            }
            if (but.s("hidetime") == 1) {
                !x ? but.set("hidetime", 1) : ''
            }
            if (a == "duration") {
                if (o.media.isLive()) {
                    x = true
                }
            }
            if (but.g("key") == "control_start" && o.system.mobile) {
                if (o.nativecontrols && o.system.android) {
                    x = true
                }
            }
            return x
        }

        function HideControl(but, quick) {
            if (but.g("show")) {
                if (o.fullscreen_process || but.s("animation") == "none" || quick) {
                    but.set("display", false)
                } else {
                    HideAnimate(but)
                }
                but.set("show", false)
            }
        };

        function ShowControl(but) {
            if (!but.g("show")) {
                if (but.s("animation") == "none" || o.fullscreen_process) {
                    but.set("display", true);
                    if (o.fullscreen_process) {
                        but.set("opacity", 1)
                    }
                    if (but.g("action") == "volume") {
                        if (o.hidden_volume) {
                            HidePositionControl(but)
                        }
                    }
                } else {
                    ShowAnimate(but)
                }
                if (but.s("action") == "volume") {
                    o.controls.Volume(o.muted ? 0 : v.volume)
                }
                if (but.s("action") == "line") {
                    o.actions.Loading()
                }
                but.set("show", true)
            }
        };

        function HideAnimate(but) {
            killMotion(but.g("key"));
            var m_type = "alpha|";
            var m_to = "0|";
            var hide = 1;
            var a = but.s("animation");
            var p = but.s("position");
            if (a == "scale") {
                m_type += "scale|";
                m_to += "0|"
            }
            if (a == "position") {
                if (p.indexOf("right") > -1 && p.indexOf("controls") == -1) {
                    m_type += "x|";
                    m_to += int(o.screen_w + but.g("width")) + "|"
                }
                if (p.indexOf("left") > -1) {
                    m_type += "x|";
                    m_to += int(-but.g("width")) + "|"
                }
                if (p.indexOf("top") > -1) {
                    m_type += "y|";
                    m_to += "0|" + (-but.g("height")) + "|"
                }
                if (p.indexOf("bottom") > -1 || p.indexOf("controls") > -1 || p == "timeline") {
                    m_type += "y|";
                    if (but.g("action") == "line" || but.g("action") == "volume") {
                        m_to += int(o.screen_h + but.s("h") + (but.s("h") < 20 ? 20 - but.s("h") : 0)) + "|"
                    } else {
                        m_to += int(o.screen_h + but.g("height")) + "|"
                    }
                }
                if (p == "center") {
                    m_type += "scale|";
                    m_to += "0|"
                }
            }
            var m = new Motion({
                "mc": but,
                "me": but.g("key"),
                "type": m_type.substr(0, m_type.length - 1),
                "to": m_to.substr(0, m_to.length - 1),
                "hide": hide
            })
        };

        function ShowAnimate(but) {
            killMotion(but.g("key"));
            var m_type = "";
            var m_to = "";
            var a = but.s("animation");
            var p = but.s("position");
            if (but.g("opacity") != 1) {
                m_type = "alpha|";
                m_to = (but.g("key") == 'bg' ? v.toolbar.a : "1") + "|"
            }
            if (a == "scale") {
                if (but.g("scaleX") != but.s("scale")) {
                    but.set("scale", 0);
                    m_type += "scale|";
                    m_to += but.s("scale") + "|"
                }
            }
            if (a == "position") {
                if (p == "center") {
                    if (but.g("scaleX") != but.s("scale")) {
                        m_type += "scale|";
                        m_to += but.s("scale") + "|"
                    }
                } else {
                    if (p.indexOf("controls") > -1) {
                        if (but.g("y") != but.g("y0")) {
                            m_type += "y|";
                            m_to += but.g("y0") + "|"
                        }
                    } else {
                        m_type += "x|y|";
                        m_to += but.g("x0") + "|" + but.g("y0") + "|"
                    }
                }
            }
            if (m_type != "" && m_to != "") {
                var m = new Motion({
                    mc: but,
                    me: but.g("key"),
                    type: m_type.substr(0, m_type.length - 1),
                    to: m_to.substr(0, m_to.length - 1),
                    show: 1
                })
            } else {
                but.set("display", true)
            }
        };
        this.Mouse = function (key, type, quick) {
            var resize = false;
            var stop = false;
            var but = b[key];
            var action = but.g("action");
            var linkurl = but.s("linkurl");
            if (type == "over") {
                if (o.hidden_volume) {
                    if (action == "volume" || action == "mute" || action == "unmute") {
                        o.hidden_volume_over = true;
                        o.hidden_volume_over_process = true;
                        resize = true;
                        ShowOrHide();
                        if (v.control_line.hideonvolume == 1) {
                            var bl = FindBut("action", "line");
                            if (bl) {
                                hide2(bl.c())
                            }
                        }
                    }
                }
                if (settings && ((v.settings.showovercontrol == 1 && (action == "settings" || linkurl.indexOf("setting") == 0)) || linkurl.indexOf("settings:") == 0)) {
                    clearTimeout(o.settingsovertimer);
                    if (!settings.g("show") || _lastactbut != but) {
                        Action(but, type);
                        o.overopentimeout = action + linkurl;
                        setTimeout(function () {
                            o.overopentimeout = null
                        }, 500)
                    }
                }
                if (playlist && v.playlist.showovercontrol == 1 && action == "playlist") {
                    clearTimeout(o.playlistovertimer);
                    if (!playlist.g("show") || _lastactbut != but) {
                        Action(but, type);
                        o.overopentimeout = action;
                        setTimeout(function () {
                            o.overopentimeout = null
                        }, 500)
                    }
                }
            }
            if (type == "out") {
                if (o.hidden_volume) {
                    if (action == "volume" || action == "mute" || action == "unmute") {
                        o.hidden_volume_over = false;
                        o.hidden_volume_over_process = true;
                        setTimeout(function () {
                            if (!o.hidden_volume_over) {
                                o.hidden_volume_over_process = false;
                                for (var x in b) {
                                    if (b.hasOwnProperty(x)) {
                                        if (b[x].g("action") == "volume") {
                                            HideControl(b[x]);
                                            Resize()
                                        }
                                        if (b[x].g("action") == "line") {
                                            if (v.control_line.hideonvolume == 1) {
                                                show2(b[x].c())
                                            }
                                        }
                                    }
                                }
                            }
                        }, 500)
                    }
                }
                if ((v.settings.showovercontrol == 1 && (action == "settings" || linkurl.indexOf("setting") == 0)) || linkurl.indexOf("settings:") == 0) {
                    clearTimeout(o.settingsovertimer);
                    o.settingsovertimer = setTimeout(function () {
                        if (!o.mouseDown) {
                            SettingsClose(1)
                        }
                    }, (v.settings.showoverto > 0 ? v.settings.showoverto * 1000 : 1000))
                }
                if (playlist && v.playlist.showovercontrol == 1 && action == "playlist") {
                    clearTimeout(o.playlistovertimer);
                    o.playlistovertimer = setTimeout(function () {
                        if (!o.mouseDown) {
                            playlist.g("show") ? playlist.hide(1) : ''
                        }
                    }, (v.playlist.showoverto > 0 ? v.playlist.showoverto * 1000 : 1000))
                }
            }
            if (resize) {
                setTimeout(Resize, 10)
            }
        };
        this.StageLeave = function () {
            if (o.volumewheel && !o.fullscreen) {
                o.actions.volumewheel(false);
                o.volumewheel = false
            }
            if (o.poster) {
                if (v.poster_aover > -1 && isVisible(o.poster)) {
                    css(o.poster, {
                        opacity: v.poster_a
                    })
                }
            }
            if (o.play && v.playonhover == 1 && v.pauseonhover != 0) {
                o.actions.Pause()
            }
            if (v.toolbar.hideleavetimeout > 0) {
                clearTimeout(o.leavetimeout);
                o.leavetimeout = setTimeout(ShowOrHide, v.toolbar.hideleavetimeout * 1000)
            } else {
                ShowOrHide()
            }
        };
        this.StageOver = function () {
            if (o.poster) {
                if (v.poster_aover > -1 && isVisible(o.poster)) {
                    css(o.poster, {
                        opacity: v.poster_aover
                    })
                }
            }
            if (!o.play && v.playonhover == 1) {
                o.actions.Play()
            }
            ShowOrHide();
            ToolbarDown(false)
        };
        this.StageMove = function (stage_x, stage_y) {
            var y;
            for (var x in b) {
                if (b.hasOwnProperty(x)) {
                    y = b[x].g("action");
                    if (y == "line" || y == "volume") {
                        b[x].StageMove(stage_x, stage_y)
                    }
                }
            }
        };
        this.StageMove2 = function () {
            if (v.toolbar.hide == 1) {
                if (v.toolbar.hidejustfull == 1 && !o.fullscreen) {
                    return
                }
                if (!o.mouseHere && o.media.status() == "playing") {
                    o.mouseHere = true;
                    ShowOrHide();
                    o.system.mobile ? setTimeout(function () {
                        o.mouseHere = false
                    }, 500) : ''
                }
                if (v.toolbar.hidewithoutmoving == 1) {
                    ShowForce();
                    HideInterval()
                }
                ToolbarDown(false)
            }
        };
        this.StageMouseUp = function (stage_x, stage_y) {
            for (var x in b) {
                if (b.hasOwnProperty(x)) {
                    if (b[x].g("action") == "line" || b[x].g("action") == "volume") {
                        b[x].StageMouseUp(stage_x, stage_y)
                    }
                }
            }
        };
        this.Played = function (time, duration) {
            for (var x in b) {
                if (b.hasOwnProperty(x)) {
                    if (b[x].g("action") == "line") {
                        b[x].UpdatePlay(time, duration)
                    }
                    if (b[x].g("action") == "time") {
                        UpdateTime(b[x], time, duration)
                    }
                    if (b[x].s("rotateplaying") == 1) {
                        b[x].Rotate()
                    }
                }
            }
        };

        function ToolbarDown(x) {
            if (v.toolbar.hide == 1) {
                x ? SettingsClose() : '';
                if (v.toolbar.hidedown == 1) {
                    if (!o.play && v.toolbar.hideonpause == 1) {
                        x = true
                    }
                    if (x && !o.toolbarisdown) {
                        css(o.toolbar, {
                            "top": bg.h()
                        })
                    }
                    if (!x && o.toolbarisdown) {
                        css(o.toolbar, {
                            "top": 0
                        })
                    }
                    o.toolbarisdown = x
                }
            }
        }

        function ToolbarShow() {
            toolbarHidden = false;
            o.media.ToolbarShow();
            if (o.resizeonmouse) {
                o.resizeonmouse = false;
                Resize();
                setTimeout(Resize, 300)
            }
        }

        function UpdateTime(x, time, duration) {
            if (v.delete > 0) {
                time -= v.delete;
                duration -= v.delete
            }
            var y = Time(time);
            if (x.s("inversetime") == "1") {
                y = Time(duration - time)
            }
            if (x.s("showduration") == "1") {
                if (x.s("showboth") == "1") {
                    y = y + (duration > 0 ? ' ' + Lang(x.s("separator")) + ' ' + Time(duration) : '')
                } else {
                    time == 0 ? y = Time(duration) : ''
                }
            }
            x.UpdateText(y)
        }
        this.Loaded = function (time, duration) {
            var x = FindBut("action", "line");
            if (x) {
                x.UpdateLoad(time, duration)
            }
        };
        this.Waiting = function () {
            if (!waiting) {
                if (v.hidevideo == 1) {
                    clearTimeout(wait_to);
                    wait_to = setTimeout(Waiting, 500)
                } else {
                    Waiting()
                }
            }
        };

        function Waiting() {
            if (!waiting) {
                js("buffering");
                var x = FindBut("action", "buffer");
                if (x) {
                    x.Buffer();
                    waiting = true
                }
            }
        }
        this.HideElement = function (y) {
            for (var x in b) {
                if (x == y) {
                    b[x].set("hide2")
                }
            }
        };
        this.StopWaiting = function (time, duration) {
            clearTimeout(wait_to);
            if (waiting) {
                js("buffered");
                var x = FindBut("action", "buffer");
                if (x) {
                    x.BufferStop();
                    waiting = false
                }
            }
        };
        this.volumescroll = function () {
            var x = FindBut("linkurl", "volume scroll");
            if (x) {
                x.set("show2");
                x.UpdateText(Lang('volume') + ' ' + (o.muted ? 0 : Math.ceil(v.volume * 100)) + '%');
                clearTimeout(o.volumescroll);
                o.volumescroll = setTimeout(Volumescrolled, 1000)
            }
        };

        function Volumescrolled() {
            var x = FindBut("linkurl", "volume scroll");
            if (x) {
                x.UpdateText('');
                x.set("hide2");
                clearTimeout(o.volumescroll)
            }
        }
        this.Seek = function (time, duration) {
            if (v.delete > 0) {
                time -= v.delete;
                duration -= v.delete
            }
            for (var x in b) {
                if (b.hasOwnProperty(x)) {
                    if (b[x].g("action") == "line") {
                        duration > 0 ? b[x].set("click", time / duration) : '';
                        b[x].UpdatePlaySeek()
                    }
                    if (b[x].g("action") == "time") {
                        UpdateTime(b[x], time, duration)
                    }
                    if (b[x].g("action") == "live") {
                        b[x].set("iconopacity", 0.5);
                        b[x].set("saturate", 0)
                    }
                }
            }
        };
        this.Duration = function (time, duration) {
            for (var x in b) {
                if (b.hasOwnProperty(x)) {
                    if (b[x].g("action") == "duration") {
                        if (v.delete > 0) {
                            duration -= v.delete
                        }
                        b[x].UpdateText(Time(duration))
                    }
                    if (b[x].g("action") == "line") {
                        b[x].UpdatePlay(time, duration);
                        b[x].PlacePoints(duration)
                    }
                    if (b[x].g("action") == "time") {
                        UpdateTime(b[x], time, duration)
                    }
                }
            }
        };
        this.Settings = function () {
            settings.g("show") ? settings.hide() : settings.show()
        };
        this.SettingsVisible = function () {
            if (settings) {
                return settings.g("show") ? true : false
            } else {
                return false
            }
        };
        this.SettingsScale = function () {
            if (settings) {
                settings.Scale()
            }
        };
        this.SettingsClose = function () {
            SettingsClose()
        };
        this.SettingsTimer = function (x) {
            if (settings) {
                settings.UpdateTimer(x)
            }
        };
        this.SettingsSpeed = function () {
            if (settings) {
                settings.UpdateSpeed()
            }
        };
        this.SettingsExist = function (x) {
            if (settings) {
                return settings.Exist(x)
            }
        };

        function SettingsClose(x) {
            if (settings) {
                settings.g("show") ? settings.hide(x) : ''
            }
            o.settings2 ? o.settings2.hide() : ''
        };
        this.Playlist = function () {
            if (playlist) {
                if (playlist.g("show")) {
                    playlist.hide(1)
                } else {
                    playlist.show()
                }
            }
        };
        this.PlaylistShow = function () {
            if (playlist) {
                setTimeout(function () {
                    playlist.show()
                }, 100)
            }
        };
        this.PlaylistVisible = function () {
            if (playlist) {
                return playlist.g("show") ? true : false
            } else {
                return false
            }
        };
        this.PlaylistG = function (x) {
            return playlist ? playlist.g(x) : ''
        };
        this.UpdatePlaylist = function (x) {
            if (playlist) {
                playlist.updatePlaylist(x)
            }
        };
        this.PlaylistNext = function () {
            if (playlist) {
                playlist.PlaylistNext()
            }
        };
        this.PlaylistHere = function () {
            if (playlist) {
                playlist.PlaylistHere()
            }
        };
        this.PlaylistControls = function () {
            PlaylistControls()
        };

        function PlaylistControls() {
            for (var x in b) {
                if (b.hasOwnProperty(x)) {
                    if (b[x].g("action") == "next") {
                        css(b[x].c(), {
                            "opacity": (!playlist.PlaylistNextExist() ? 0.5 : 1)
                        })
                    }
                    if (b[x].g("action") == "prev") {
                        css(b[x].c(), {
                            "opacity": (!playlist.PlaylistPrevExist() ? 0.5 : 1)
                        })
                    }
                }
            }
        }
        this.PlaylistNextExist = function () {
            if (playlist) {
                return playlist.PlaylistNextExist()
            } else {
                return false
            }
        };
        this.PlaylistExist = function () {
            if (playlist) {
                return playlist.PlaylistExist()
            } else {
                return false
            }
        };
        this.PlaylistRewind = function () {
            if (playlist) {
                playlist.PlaylistRewind()
            }
        };
        this.PlaylistPrev = function () {
            if (playlist) {
                playlist.PlaylistPrev()
            }
        };
        this.PlaylistPlayId = function (x) {
            if (x && playlist) {
                playlist.playById(x)
            }
        };
        this.PlaylistOpenId = function (x) {
            if (x && playlist) {
                playlist.openById(x)
            }
        };
        this.PlaylistMove = function (x) {
            if (x && playlist) {
                css(playlist.co(), {
                    "maxHeight": "none",
                    "padding-right": playlist.s("bgpaddingright")
                });
                document.getElementById(x).appendChild(playlist.co());
                hide2(playlist.c())
            }
        };
        this.ShowSettingsBut = function () { };
        this.QualityChanged = function (x) {
            if (settings) {
                settings.SetQuality();
                settings.g("show") ? setTimeout(function () {
                    settings.hide()
                }, 200) : ''
            }
        };
        this.QualityChangedNoHand = function (x) {
            if (settings) {
                settings.SetQuality()
            }
            if (o.settings2) {
                o.settings2.update()
            }
        };
        this.AirplayChanged = function (x) {
            if (settings) {
                settings.Airplay()
            }
            Resize();
            ShowOrHide()
        };
        this.SettingChanged = function (x) {
            if (settings) {
                settings.SetSetting(x);
                settings.g("show") ? settings.hide() : ''
            }
            if (o.settings2) {
                o.settings2.update()
            }
            x == "speed" ? SpeedChanged() : ''
        };

        function SpeedChanged() {
            if (o.line_speed) {
                var y = o.files_speed.slice(-1)[0];
                for (var i in b) {
                    if (b.hasOwnProperty(i)) {
                        if (b[i].s("customline") == "speed" && o.custom_speed) {
                            b[i].UpdatePlay(o.custom_speed, y)
                        }
                        if (b[i].s("linkurl") == "api:speed,1.0") {
                            b[i].UpdateVolume(parseFloat(o.custom_speed / y, 1).toFixed(1))
                        }
                    }
                }
            }
        }
        this.AudioTrackChangedNoHand = function (x) {
            if (settings) {
                settings.SetSetting("audiotrack")
            }
            if (o.settings2) {
                o.settings2.update()
            }
        };
        this.SubtitleChanged = function () {
            if (settings) {
                settings.SetSubtitle();
                settings.g("show") ? setTimeout(function () {
                    settings.hide()
                }, 200) : ''
            }
            if (o.settings2) {
                o.settings2.update()
            }
        };
        this.SubOpt = function () {
            o.settings2 ? o.settings2.hide() : '';
            if (settings) {
                settings.SubOpt()
            }
        };
        this.SettingsN = function (num, display, val) {
            for (var x in b) {
                if (b.hasOwnProperty(x)) {
                    if (b[x].g("action") == "settings") {
                        if (b[x].s("hdicon") == 1) {
                            b[x].HdIcon()
                        }
                    }
                    if (b[x].g("action_settings") == "settings#" + num) {
                        b[x].set("set#visible", display);
                        if (b[x].g("type") == "text") {
                            if (val) {
                                val = val.toString();
                                var spn = val.indexOf(" <span style='opacity");
                                if (spn > -1) {
                                    val = val.substr(0, spn)
                                }
                                b[x].UpdateText(val)
                            }
                        } else {
                            if (v.settings['settings' + num + 'action'] == "subtitle") {
                                if (val == Lang("off")) {
                                    b[x].CustomSwitch(0)
                                } else {
                                    b[x].CustomSwitch(1)
                                }
                            }
                            Resize()
                        }
                        ShowOrHideProcessor(b[x])
                    }
                }
            }
        };
        this.UpdateSettings = function () {
            if (settings) {
                settings.SetQuality();
                settings.SetSetting("audiotrack");
                settings.SetSetting("download")
            }
        };
        this.RenewPoints = function () {
            var x = FindBut("action", "line");
            if (x) {
                x.RenewPoints()
            }
        };
        this.resize = function () {
            Resize();
            if (toolbarHidden) {
                o.resizeonmouse = true
            }
        };
        this.resizeFromText = function (x) {
            if (!toolbarHidden || x == 1) {
                Resize();
                ShowOrHide()
            } else {
                v.toolbar.resizeme = true
            }
        };
        this.refresh = function () {
            ShowOrHide();
            Resize();
            ShowOrHide();
            if (o.nativecontrols) {
                hide2(bg2)
            } else {
                !toolbarHidden ? show2(bg2) : ''
            }
        };
        this.KeyDown = function (event) {
            if (pljssglobalid == v.id && v.hotkey.on == 1) {
                var x = event.which;
                var y = false;
                if (x == undefined) {
                    x = event.keyCode
                }
                if (exist(o.vast) || exist(o.pass) || o.stopkeys == 1) {
                    return false
                }
                if (o.play && v.hotkey.onplay == 1) {
                    y = true
                }
                if (((v.hotkey.space == 1 && x == 32) || (v.hotkey.enter == 1 && x == 13)) && (o.focus || o.mouseHere || y)) {
                    if (v.hotkey.icons == 1) {
                        PluginHotIcon('play', o.play ? 0 : 1)
                    }
                    o.actions.Toggle();
                    event.preventDefault();
                    return false
                } !v.hotkey.vol ? v.hotkey.vol = 0.2 : '';
                !v.hotkey.scale ? v.hotkey.scale = 5 : '';
                if (v.hotkey.nums == 1 && (o.focus || y)) {
                    if (o.media.duration() > 0) {
                        for (var i = 48; i < 58; i++) {
                            if (x == i) {
                                o.actions.Seek((o.media.duration() * (x - 48) * 10) / 100, true)
                            }
                        }
                    }
                }
                if (x == 39 && (o.focus || y)) {
                    KeyPlusUp(v.hotkey.leftright)
                }
                if (x == 37 && (o.focus || y)) {
                    KeyPlusDown(v.hotkey.leftright)
                }
                if (x == 38 && (o.focus || y)) {
                    KeyPlusUp(v.hotkey.updown)
                }
                if (x == 40 && (o.focus || y)) {
                    KeyPlusDown(v.hotkey.updown)
                }
                if (x == 187 && (o.focus || y)) {
                    KeyPlusUp(v.hotkey.plusminus)
                }
                if (x == 189 && (o.focus || y)) {
                    KeyPlusDown(v.hotkey.plusminus)
                }
            }
        };

        function FindBut(y, z) {
            for (var x in b) {
                if (b.hasOwnProperty(x)) {
                    if (b[x].s(y) == z) {
                        return b[x]
                    }
                }
            }
        }

        function KeyPlusUp(x) {
            if (x == "next") {
                if (o.playlist) {
                    o.controls.PlaylistNext()
                } else {
                    x = "seek"
                }
            }
            if (x == "seek") {
                if (o.media.duration() > 0) {
                    if (o.media.time() + parseFloat(v.hotkey.seek) < o.media.duration()) {
                        o.actions.Seek(o.media.time() + parseFloat(v.hotkey.seek), true)
                    }
                }
            }
            if (x == "volume") {
                o.actions.Volume(parseFloat(v.volume) + parseFloat(v.hotkey.vol));
                event.preventDefault()
            }
            if (x == "scale") {
                o.media.scale(v.hotkey.scale / 100);
                event.preventDefault()
            }
            if (v.hotkey.icons == 1) {
                PluginHotIcon(x, 1)
            }
        }

        function KeyPlusDown(x) {
            if (x == "next") {
                if (o.playlist) {
                    o.controls.PlaylistPrev()
                } else {
                    x = "seek"
                }
            }
            if (x == "seek") {
                if (o.media.duration() > 0 && o.start) {
                    o.actions.Seek((o.media.time() - v.hotkey.seek >= 0 ? o.media.time() - v.hotkey.seek : 0), true)
                }
            }
            if (x == "volume") {
                o.actions.Volume(parseFloat(v.volume) - parseFloat(v.hotkey.vol));
                event.preventDefault()
            }
            if (x == "scale") {
                o.media.scale(-v.hotkey.scale / 100);
                event.preventDefault()
            }
            if (v.hotkey.icons == 1) {
                PluginHotIcon(x, 0)
            }
        };
        this.KeyUp = function (event) {
            if (pljssglobalid == v.id) {
                var x = event.which;
                if (x == undefined) {
                    x = event.keyCode
                }
                if (x == 57) {
                    if (v.log == 1) { }
                }
                if (o.fullscreen && x == 27) {
                    o.actions.Normalscreen()
                }
                if (exist(o.vast) || exist(o.pass)) {
                    return false
                }
                if (v.hotkey.f == 1 && x == 70 && v.hidevideo != 1 && (o.focus || o.mouseHere)) {
                    if (v.hotkey.icons == 1) {
                        PluginHotIcon('fullscreen', o.fullscreen ? 0 : 1)
                    }
                    o.fullscreen ? o.actions.Normalscreen() : o.actions.Fullscreen()
                }
                if (v.hotkey.m == 1 && x == 77 && (o.focus || o.mouseHere)) {
                    if (v.hotkey.icons == 1) {
                        PluginHotIcon('mute', o.muted ? 1 : 0)
                    }
                    o.muted ? o.actions.Unmute() : o.actions.Mute()
                }
            }
        };
        this.Remove = function () {
            clearInterval(o.toolbarInterval);
            for (var x in o) {
                if (x.indexOf("control") == 0 && x.indexOf("Interval") > -1) {
                    clearInterval(o[x])
                }
            }
            for (var i = 0; i < butNames.length; i++) {
                key = butNames[i];
                if (b[key]) {
                    b[key].Remove()
                }
            }
            if (settings) {
                settings.Remove()
            }
            if (playlist) {
                playlist.Remove()
            }
            bg.Remove();
            if (bg2.parentNode == o.frame) {
                o.frame.removeChild(bg2)
            } else {
                o.toolbar ? o.toolbar.removeChild(bg2) : ''
            }
        };
        this.ShowForce = function () {
            ShowForce()
        };
        this.HideForce = function () {
            HideForce();
            ShowOrHide()
        };
        this.HideInterval = function () {
            HideInterval()
        };
        this.ToolbarHidden = function () {
            return toolbarHidden
        }
    };
    var Control = function (key) {
        var i;
        var style = [];
        var w;
        var h;
        var last_text_w = 0;
        var bg;
        var bgcontainer;
        var area;
        var angle = 0;
        var visible = true;
        var selectOpen = false;
        var scaleX = 1;
        var scaleY = 1;
        var tip;
        var tipbg;
        var tiptext;
        var tipcrn;
        var action;
        var actionstt = '';
        var x0;
        var y0;
        var on;
        var over = false;
        var touchmove = false;
        var iconangle = 0;
        var bufferInterval;
        var bufferDeg = 0;
        var rightside = 0;
        var topside = 0;
        var bottomside = 0;
        var noclick = false;
        var zoomed = false;
        var clicked = false;
        var hidden = false;
        var htto;
        var hdicon;
        var imgldd;
        var settingsNumberVisible = false;
        style = UpdateObject(style, default_style.but);
        style = UpdateObject(style, v[key]);
        var actions = [style.action];
        action = actions[0];
        exist(style.action2) ? actions[1] = style.action2 : '';
        exist(style.opposite) ? actions[1] = style.opposite : '';
        exist(style.title) ? style.text = style.title : '';
        if (exist2(style.scalesmall)) {
            o.small ? style.scale = style.scalesmall : ''
        }
        if (action == "share") {
            o.shareme = true
        }
        if (exist(style.linkurl)) {
            if (style.type == "text" && style.linkurl != '') {
                if (exist(v[style.linkurl + 'text'])) {
                    style.text = v[style.linkurl + 'text']
                }
            }
            if (style.linkurl.indexOf("settings#") == 0) {
                actionstt = style.linkurl;
                if (style.tiptext == '' && actionstt.indexOf(",") == -1) {
                    style.tiptext = Lang(v.settings['settings' + actionstt.substr(9) + 'action'])
                }
            }
            if (style.linkurl.indexOf("captions") > -1) {
                v.hlscaptions = true
            }
            if (style.linkurl.indexOf("share:") > -1) {
                o.shareme = true
            }
            if (style.linkurl == "countdown") {
                style.counter = new PluginCountdown(style)
            }
        }
        var tips = style.tiptext ? style.tiptext.split("///") : [];
        if (style.liketext == 1) {
            style.type = "text";
            style.text = TipText(0) + (actions.length > 1 ? '///' + TipText(1) : '')
        }
        var _currentIcon = 0;
        var icons = new Array();
        var icon = new Array();
        var iconsover = new Array();
        var iconspress = new Array();
        var iconreplay = 0;
        var replay;
        if (style.type == "text") {
            if (style.dom) {
                if (exist(v[style.dom + 'text'])) {
                    style.text = v[style.dom + 'text']
                }
            }
            if (exist(style.text)) {
                icons[0] = trim(style.text);
                style.lngth = style.text.length;
                var smbls = ['/', '|', '-'];
                smbls.indexOf(style.text.substr(-1)) > -1 ? style.postsmbl = style.text.substr(-1) : '';
                smbls.indexOf(style.text.substr(0, 1)) > -1 ? style.presmbl = style.text.substr(0, 1) : '';
                if (action == "time" || action == "duration") {
                    if (style.text.indexOf('0:') == 0) {
                        style.timeshort = true
                    }
                    if (style.text.split(":").length == 3) {
                        style.with_hours = true
                    } else {
                        if (style.text.indexOf('00:00') > -1) {
                            style.with_min = true
                        }
                    }
                    if (style.dvrtime == 1) {
                        v.dvrtime = 1
                    }
                }
                if (style.inversetime == 1 && style.text.indexOf("-") == 0) {
                    style.minus4back = true
                }
                if (style.text.indexOf("///") > 0 && (action == "custom" || style.liketext == 1)) {
                    style.texts = style.text.split("///");
                    style.text = icons[0] = style.texts[0]
                }
            }
            if (v.fonts == 1) {
                setTimeout(ResizeText, 100);
                setTimeout(ResizeText, 500);
                setTimeout(ResizeText, 1000)
            }
        } else {
            if (exist(style.icon)) {
                icons[0] = style.icon;
                if (icons[0].indexOf("///") > 0 && icons[0].indexOf("base64") == -1) {
                    icons = style.icon.split("///")
                }
                if (exist(style.icon2)) {
                    icons[1] = style.icon2
                }
                if (style.iconsreplay == 1) {
                    if (exist2(style.icon3)) {
                        icons.push(style.icon3);
                        iconreplay = icons.length - 1
                    }
                }
            }
        }
        if (action == "custom") {
            if (style.link2 == 1 && exist(style.linkurl2)) {
                style.linkurl0 = style.linkurl
            }
        }
        var control = createElement("div");
        if (style.position == 'timeline') {
            o.timeline.appendChild(control)
        } else {
            if (style.position.indexOf('controls') > -1 && v.toolbar.hide == 1 && v.toolbar.hidedown == 1) {
                o.toolbar.appendChild(control)
            } else {
                o.frame.appendChild(control)
            }
            if (action == "buffer" && style.ontop2 == 1) {
                control.style.zIndex = 2001
            }
        }
        var bgcontainer = createElement("div");
        control.appendChild(bgcontainer);
        css(control, {
            "position": "absolute",
            "left": 0,
            "top": 0,
            "opacity": 1,
            "fontSize": "14px",
            "lineHeight": "1em"
        });
        if (exist2(style.dom)) {
            attr(control, {
                "id": (v.id + "_" + "control_" + style.dom)
            })
        }
        if (style.rotateplaying == 1) {
            css(control, {
                "transition": "transform 0.2s linear"
            })
        }
        if (icons.length > 0) {
            for (i = 0; i < icons.length; i++) {
                icon[i] = createElement("div");
                css(icon[i], {
                    "position": "absolute",
                    "top": 0,
                    "left": 0,
                    "pointerEvents": "none",
                    "opacity": style.a,
                    "transition": "opacity 0.1s linear,transform 0.1s linear"
                });
                if (style.type == "pic" && style.src != '') {
                    if (exist2(style.dom)) {
                        attr(icon[i], {
                            "id": (v.id + "_control_" + style.dom + "_icon")
                        });
                        if (v[style.dom + 'src']) {
                            style.src = v[style.dom + 'src']
                        }
                    }
                    if (style.src.indexOf(".png") > -1 || style.src.indexOf(".jpg") > -1 || style.src.indexOf(".gif") > -1 || style.src.indexOf("base64") > -1) {
                        style.src.indexOf("//") == -1 && style.src.indexOf("base64") == -1 ? style.src = '//' + style.src : '';
                        var z = createElement("img");
                        style.loading = 1;
                        z.addEventListener("load", imageLoaded);
                        z.src = style.src;
                        icon[i].appendChild(z);
                        style.w = icon[i].offsetWidth;
                        style.h = icon[i].offsetHeight;
                        if (style.picheight > 0) {
                            css(z, {
                                height: style.picheight
                            })
                        }
                    }
                }
                if (style.type == "text") {
                    css(icon[i], {
                        "color": (style.color),
                        "fontSize": style.fontsize,
                        "fontFamily": style.font,
                        "letter-spacing": style.letterspacing + 'px',
                        "padding": "0 3px 0 3px",
                        "white-space": "nowrap"
                    });
                    if (o.small) {
                        if (exist2(style.fontsizesmall)) {
                            css(icon[i], {
                                "fontSize": style.fontsizesmall,
                            })
                        }
                    }
                    if (style.click == 1) {
                        if (style.text.indexOf("<a ") > -1 || key == "control_title") {
                            css(icon[i], {
                                "pointerEvents": "auto"
                            })
                        }
                    }
                    if (style.bold == 1) {
                        css(icon[i], {
                            "font-weight": "bold"
                        })
                    }
                    icons[i] == 'live' ? icons[i] = Lang("live") : '';
                    icon[i].innerHTML = Places(icons[i]);
                    setTimeout(Marquee, 100);
                    style.w = icon[i].offsetWidth;
                    style.h = icon[i].offsetHeight;
                    if (exist2(style.dom)) {
                        attr(icon[i], {
                            "id": (v.id + "_control_" + style.dom + "_text")
                        })
                    }
                }
                if (style.type == "css") {
                    controlCSS(icons[i], style.color, icon[i])
                }
                var icn = icons[i].toString();
                if (icn.indexOf('var:') == 0) {
                    icn = existv(window[icn.substr(4)], '')
                }
                var isvg = icn.indexOf('<svg') > -1 || icn.indexOf('<SVG') > -1;
                if (style.type == "svg" && (icn.indexOf('<g>') > -1 || isvg)) {
                    if (action == "mute" || action == "custom") {
                        icn = icn.replace(/pjs_/g, 'pjs_' + v.id + key)
                    }
                    if (icn.indexOf('pointer') > -1) {
                        Clickable(icon[i])
                    }
                    icon[i].innerHTML = (!isvg ? "<svg width='20' height='20' xmlns:xlink='http://www.w3.org/1999/xlink' xmlns='http://www.w3.org/2000/svg'>" : '') + icn + (!isvg ? "</svg>" : '');
                    icon[i].offsetWidth > 20 ? style.w = icon[i].offsetWidth : '';
                    icon[i].offsetHeight > 20 ? style.h = icon[i].offsetHeight : '';
                    css(icon[i], {
                        "width": style.w,
                        "height": style.h
                    });
                    if (style.iconscolor != -1) {
                        IconsColor(icon, style.iconscolor)
                    }
                    if (exist2(style.dom)) {
                        attr(icon[i], {
                            "id": (v.id + "_control_" + style.dom + "_icon" + i)
                        })
                    }
                }
                control.appendChild(icon[i]);
                i > 0 ? hide(icon[i]) : ''
            }
            Background();
            imgldd ? imageLoaded() : '';
            if (style.linkurl == "chromecast") {
                style.chromecast = 1;
                style.hide = 1;
                o.chromecast ? icon[0].innerHTML = o.chromecast.button(style.iconscolor != -1 ? style.iconscolor : '#ffffff') : '';
                icon[0].onmouseover = onOver;
                icon[0].onmouseout = onOut;
                icon[0].onmousemove = onMove
            } else {
                if ((bg.offsetWidth * style.scale < 35 || bg.offsetHeight * style.scale < 35) && style.type != 'text') {
                    ClickArea();
                    Clickable(area)
                } else {
                    Clickable(bg)
                }
            }
            if (action == "custom") {
                if (style.link == 1 && exist(style.linkurl)) {
                    var lu = style.linkurl;
                    if (lu.indexOf("api:") == 0) {
                        var tmp = lu.substr(4).split(",");
                        if (tmp.length == 2) {
                            var tmp2 = tmp[1].split("/");
                            if (tmp2.length == 2) {
                                tmp[0] == 'hd' ? tmp[0] = "default_quality" : '';
                                if (v[tmp[0]] == tmp2[1]) {
                                    style.a = 1;
                                    css(icon[0], {
                                        "opacity": style.a
                                    })
                                }
                            }
                        }
                    }
                    if (lu == "unblock" || lu == "block") {
                        o.actions.Curtain();
                        control.style.zIndex = 2001;
                        o.stopkeys = 1
                    }
                }
            }
            if (action == "settings" && style.hdicon == 1) {
                hdicon = new PluginHdIcon(control, bg, style)
            }
            if (style.click == 0) {
                css(control, {
                    "pointerEvents": "none"
                })
            }
            if (style.loading == 1) {
                hide(bg)
            }
            if (style.tip == 1) {
                CreateTip()
            }
            if (style.position.indexOf("right") > -1) {
                rightside = 1
            }
            if (style.position.indexOf("top") > -1) {
                topside = 1
            }
            if (style.position.indexOf("bottom") > -1 || style.position.indexOf("control") > -1) {
                bottomside = 1
            }
            Resize();
            var t = '';
            if (style.rotation != 0) {
                t += "rotate(" + style.rotation + "deg)"
            }
            if (style.flipx == 1) {
                t += " scaleX(-1)"
            }
            if (style.flipy == 1) {
                t += " scaleY(-1)"
            }
            if (t != '') {
                css(control, {
                    "transform": t
                })
            }
            if (action == "buffer") {
                BufferStop()
            }
            var tmp = [];
            var i;
            if (action == "playlist") {
                tmp = ['autoplaylist', 'openplaylistafter', 'openplaylistbefore', 'openplaylistpause', 'openplaylistroot', 'playlistrewind'];
                for (i = 0; i < tmp.length; i++) {
                    if (exist(style[tmp[i]]) && !exist(v.playlist[tmp[i]])) {
                        v.playlist[tmp[i]] = style[tmp[i]]
                    }
                }
            }
            if (action == "title") {
                tmp = ['showtitleplaylist', 'addtitleplaylist', 'addtitleplaylistbr'];
                for (i = 0; i < tmp.length; i++) {
                    if (exist(style[tmp[i]]) && !exist(options[tmp[i]])) {
                        v[tmp[i]] = style[tmp[i]]
                    }
                }
            }
            style.tipalways == 1 ? Tip() : '';
            if (action == "custom" && style.on == 0) {
                hide2(control)
            }
            if (style.hide == 1 && style.hideuntilto > 0) {
                setTimeout(Hideuntilto, style.hideuntilto * 1000)
            }
        }

        function Hideuntilto() {
            style.hideuntilto = -1;
            o.controls.refresh()
        }

        function ClickArea() {
            if (area) {
                area.parentNode.removeChild(area)
            }
            area = createElement("div");
            css(area, {
                "position": "absolute",
                "top": 0,
                "left": 0,
                "width": style.type == "pic" ? bg.offsetWidth : (bg.offsetWidth > 35 ? bg.offsetWidth : 35) * style.clickscalex,
                "height": style.type == "pic" ? bg.offsetHeight : (bg.offsetHeight > 35 ? bg.offsetHeight : 35) * style.clickscaley
            });
            style = MarginPadding(style, 'clickmargin', 'clickmargin');
            control.appendChild(area)
        }

        function Clickable(x) {
            if (action.indexOf("time") == 0 && actions.length == 1) {
                style.click = 0
            }
            if (action == "custom" && style.link == 0) {
                style.click = 0
            }
            if (style.click == 1) {
                if (style.hand == 1) {
                    css(x, {
                        "cursor": "pointer"
                    })
                }
                css(x, {
                    "pointerEvents": "auto"
                });
                if (o.system.mobile) {
                    x.addEventListener("touchmove", function (event) {
                        event.stopPropagation();
                        touchmove = true
                    });
                    x.addEventListener("touchstart", function (event) {
                        style.mobileover == 1 ? onOver() : '';
                        event.stopPropagation()
                    });
                    x.addEventListener("touchend", function (event) {
                        event.stopPropagation();
                        event.preventDefault();
                        style.mobileover == 1 ? onOut() : '';
                        if (!touchmove) {
                            onClick(event)
                        }
                        touchmove = false
                    })
                } else {
                    x.onclick = onClick
                }
                if (v.toolbar.clickarea == 1 || style.clickarea == 1) {
                    css(x, {
                        "background-color": "#ff0000",
                        "opacity": 0.5
                    })
                }
            } else {
                css(x, {
                    "cursor": "default"
                })
            }
            if (!o.system.mobile) {
                x.onmouseover = onOver;
                x.onmouseout = onOut
            }
            if (style.hidden == 1 || style.tip == 1) {
                x.onmousemove = onMove
            }
        }

        function Background() {
            if (bg) {
                bg.parentNode.removeChild(bg)
            }
            bg = createElement("div");
            css(bg, {
                "position": "absolute",
                "top": 0,
                "left": 0
            });
            if (exist2(style.dom)) {
                attr(bg, {
                    "id": (v.id + "_control_" + style.dom + "_bg")
                })
            }
            w = style.w;
            h = style.h;
            style = MarginPadding(style, 'margin', 'margin');
            style = MarginPadding(style, 'marginproc', 'marginproc');
            if (style.type == "text") {
                w = icon[_currentIcon].offsetWidth;
                h = icon[_currentIcon].offsetHeight;
                if (style.minw > 0) {
                    w < style.minw ? w = style.minw : ''
                }
            }
            style = MarginPadding(style, 'bgpadding', 'bgpadding');
            style = MarginPadding(style, 'iconmargin', 'iconmargin');
            if (o.system.safari) {
                style.iconmarginleft /= style.scale;
                style.iconmarginright /= style.scale;
                style.iconmargintop /= style.scale;
                style.iconmarginbottom /= style.scale
            }
            if (exist2(style.dom) && exist(v.custom) && style.action == "custom") {
                if (typeof (v.custom) == 'object') {
                    for (var i = 0; i < Object.keys(v.custom).length; i++) {
                        if (v.custom[i][style.dom]) {
                            if (v.custom[i][style.dom] == "off") {
                                style.on = 0
                            } else {
                                var tmp = v.custom[i][style.dom].split(":");
                                if (tmp[0] == "margin-left") {
                                    if (tmp[1].indexOf("%") > 0) {
                                        style.marginprocleft = parseInt(tmp[1])
                                    } else {
                                        style.marginleft = parseInt(tmp[1])
                                    }
                                }
                            }
                        }
                    }
                }
            }
            style.h = h;
            style.w = w;
            if (style.bg == 1) {
                h = h + style.bgpaddingtop + style.bgpaddingbottom;
                w = w + style.bgpaddingleft + style.bgpaddingright;
                style.h = h;
                style.w = w;
                if (style.type == "text") {
                    style.bgh = icon[0].offsetHeight
                }
            } else {
                style.bga = 0
            }
            css(bg, {
                "width": (style.bgstretch == 1 ? 5000 : w),
                "height": h,
                "borderRadius": (style.bgo * h) / 2,
                "background": style.bgcolor,
                "opacity": style.bga,
                "transition": "opacity .1s linear, background .1s linear, transform .1s linear"
            });
            if (style.type == "pic") {
                css(bg, {
                    "width": w,
                    "height": h,
                    "borderRadius": (style.bgo * h / style.scale) / 2,
                })
            }
            if (style.bglines == 1) {
                Bglines(bg, style.bgcolor, style.bgline1, style.bgline2)
            }
            if (style.bgborder == 1) {
                css(bg, {
                    "border": "1px solid " + style.bgbordercolor
                })
            }
            bgcontainer.appendChild(bg)
        }

        function Resize() {
            css(bg, {
                "top": (-bg.offsetHeight / 2),
                "left": (-bg.offsetWidth / 2)
            });
            if (area) {
                var x = style.type == "pic" ? bg.offsetWidth : (bg.offsetWidth > 35 ? bg.offsetWidth : 35);
                var y = style.type == "pic" ? bg.offsetHeight : (bg.offsetHeight > 35 ? bg.offsetHeight : 35);
                css(area, {
                    "top": (-y / 2) + style.clickmargintop - style.clickmarginbottom,
                    "left": (-x / 2) + style.clickmarginleft - style.clickmarginright
                })
            }
            for (i = 0; i < icons.length; i++) {
                if (style.type == "svg") {
                    css(icon[i], {
                        "top": -Math.round(parseInt(icon[i].style.height)) / 2,
                        "left": -parseInt(icon[i].style.width) / 2
                    })
                } else {
                    css(icon[i], {
                        "top": -Math.round(icon[i].offsetHeight) / 2,
                        "left": -icon[i].offsetWidth / 2
                    })
                }
                if (bg) {
                    css(icon[i], {
                        "top": (int(icon[i].style.top) + style.bgpaddingtop / 2 - style.bgpaddingbottom / 2 + style.iconmargintop / 2 + style.iconmarginbottom / 2),
                        "left": (int(icon[i].style.left) + style.bgpaddingleft / 2 - style.bgpaddingright / 2 + style.iconmarginleft / 2 + style.iconmarginright / 2)
                    })
                }
            }
        }

        function onOver() {
            var i;
            over = true;
            if (style.iconsover == 1) {
                if (on && exist(style.icon2)) {
                    i = 1
                } else {
                    i = 0
                }
                if (replay && iconsover.length > 2) {
                    i = 2
                }
                if (iconsover[i]) {
                    hideAllIcons();
                    show(icon[iconsover[i]])
                }
            }
            if (style.bg == 1) {
                if (style.bgaover != -1) {
                    css(bg, {
                        "opacity": style.bgaover
                    })
                }
                if (style.bgcolorover != -1) {
                    css(bg, {
                        "background": style.bgcolorover
                    })
                }
            }
            if (style.aover > -1 && !selectOpen) {
                for (i = 0; i < icons.length; i++) {
                    if (icon[i].style.visibility != "hidden") {
                        css(icon[i], {
                            "opacity": style.aover
                        })
                    }
                }
            }
            if (style.iconscolorover != -1) {
                IconsColor(icon, style.iconscolorover)
            }
            if (style.rotateonhover == 1) {
                iconangle = iconangle + 45;
                Rot(icon[0], iconangle)
            }
            if (style.scaleover > style.scale && style.scaleover > -1) {
                scale(style.scaleover)
            }
            if (action == "settings" && o.controls.SettingsVisible()) { } else {
                if (style.tip == 1 && style.tipalways != 1) {
                    var x = tips.length > 1 && !on ? tips[1] : tips[0];
                    if (x) {
                        if (x.indexOf('var:') == 0) {
                            tiptext.innerHTML = window[x.substr(4)];
                            Tip()
                        }
                    }
                    show(tip);
                    css(tip, {
                        "opacity": 1
                    })
                }
            }
            if (action == "mute") {
                o.actions.volumewheel(true);
                o.volumewheel = true
            }
            o.controlover = true;
            o.controls.Mouse(key, "over")
        }

        function onOut() {
            over = false;
            var i;
            if (style.iconsover == 1) {
                if (on && exist(style.icon2)) {
                    i = 1
                } else {
                    i = 0
                }
                if (replay && iconsover.length > 2) {
                    i = 2
                }
                hideAllIcons();
                show(icon[i])
            }
            if (style.bg == 1) {
                if (style.bgaover != -1) {
                    css(bg, {
                        "opacity": style.bga
                    })
                }
                if (style.bgcolorover != -1) {
                    css(bg, {
                        "background": style.bgcolor
                    })
                }
            }
            if (style.aover > -1) {
                for (i = 0; i < icons.length; i++) {
                    if (icon[i].style.visibility != "hidden") {
                        css(icon[i], {
                            "opacity": style.a
                        })
                    }
                }
            }
            if (style.scaleover > -1) {
                scale(style.scale)
            }
            if (style.iconscolorover != -1) {
                IconsColor(icon, (style.iconscolor == -1 ? '#ffffff' : style.iconscolor))
            }
            if (action == "mute" && !o.fullscreen) {
                o.actions.volumewheel(false);
                o.volumewheel = false
            }
            if (style.tip == 1 && style.tipalways != 1) {
                hide(tip);
                css(tip, {
                    "opacity": 0
                })
            }
            o.controlover = false;
            o.controls ? o.controls.Mouse(key, "out") : ''
        }

        function onClick(e) {
            e ? e.cancelBubble = true : '';
            if (!noclick) {
                o.controls.ControlClick(key);
                if (action == "custom") {
                    CustomToogle()
                }
                if (style.tip == 1 && style.tipalways != 1) {
                    hide(tip);
                    css(tip, {
                        "opacity": 0
                    })
                }
                if (style.rotateonclick == 1) {
                    iconangle = iconangle + 45;
                    Rot(icon[0], iconangle)
                }
                clicked = true;
                if (style.hideafterclick == 1 || (key == "control_start" && style.hide == 1 && style.hideonplay == 1)) {
                    o.controls.refresh()
                }
            }
        };
        this.Click = function () {
            onClick()
        };

        function CustomToogle() {
            if (icons) {
                if (icons.length > 1) {
                    if (on == true) {
                        show(icon[0]);
                        hide(icon[1])
                    } else {
                        show(icon[1]);
                        hide(icon[0])
                    }
                }
                if (style.tip == 1 && tips.length > 1) {
                    tiptext.innerHTML = o.ni + (on == true ? tips[0] : tips[1]) + o.ni2;
                    Tip()
                }
            }
            if (exist(style.linkurl0)) {
                if (on == true) {
                    style.linkurl = style.linkurl0
                } else {
                    style.linkurl = style.linkurl2
                }
            }
            SwitchText();
            on = on != true;
            if (style.linkurl) {
                if (style.linkurl.indexOf(",0/1") > -1) {
                    js(style.linkurl, on ? 1 : 0)
                }
            }
            if (style.bg == 1 && exist(style.bgcolorlink2)) {
                if (style.bgcolorlink2 != -1) {
                    if (on) {
                        style.bgcolorlink0 = style.bgcolor;
                        style.bgcolor = style.bgcolorlink2
                    } else {
                        style.bgcolor = style.bgcolorlink0
                    }
                    Background();
                    Clickable(bg);
                    Resize();
                    if (style.type == "text") {
                        ResizeText()
                    } else {
                        scale(style.scale)
                    }
                }
            }
        }

        function SwitchText() {
            if (exist(style.texts)) {
                if (style.texts.length > 1) {
                    if (on == true) {
                        UpdateText(style.texts[0])
                    } else {
                        UpdateText(style.texts[1])
                    }
                }
            }
        }

        function ReplayIcon(event) {
            event.cancelBubble = true;
            o.controls.ControlClick(key)
        }

        function hideAllIcons() {
            for (var i = 0; i < icons.length; i++) {
                if (icon[i].style.visibility != "hidden") {
                    css(icon[i], {
                        "opacity": style.a
                    });
                    hide(icon[i])
                }
            }
        }

        function Marquee(text) {
            if (icon[0]) {
                if (icon[0].offsetWidth > o.screen_w - style.marginleft - style.marginright - style.bgpaddingleft - style.bgpaddingright) {
                    if (style.marquee == 1) {
                        if (!text) {
                            text = icon[0].innerHTML
                        }
                        icon[0].innerHTML = '<marquee>' + text + '</marquee>'
                    } else {
                        css(icon[0], {
                            "white-space": "normal"
                        })
                    }
                    css(icon[0], {
                        "width": o.screen_w - style.marginleft - style.marginright - style.bgpaddingleft - style.bgpaddingright
                    })
                }
            }
        }

        function imageLoaded() {
            if (bg) {
                imgldd = false;
                style.loading = 0;
                hide(bg);
                if (icon[0]) {
                    style.w = icon[0].offsetWidth * style.scale;
                    style.h = icon[0].offsetHeight * style.scale;
                    scale(style.scale)
                }
                style.loaded = 0;
                Background();
                ClickArea();
                Clickable(area);
                show(bg);
                Resize();
                o.controls.resize();
                if (!isVisible(control)) {
                    hide2(control)
                }
            } else {
                imgldd = true
            }
        }

        function CancelBubble(event) {
            event.cancelBubble = true
        }

        function onMove() {
            if (!o.system.mobile && !o.controlover) {
                onOver()
            }
            Tip()
        }

        function scale(x) {
            if (x > 0) {
                if (o.system.safari && style.tipalways != 1) {
                    css(bg, {
                        "zoom": x + ""
                    })
                } else {
                    css(bg, {
                        "transform": "scale(" + x + ")"
                    })
                }
                for (i = 0; i < icons.length; i++) {
                    if (o.system.safari && style.tipalways != 1) {
                        css(icon[i], {
                            "zoom": x + ""
                        });
                        zoomed = true
                    } else {
                        css(icon[i], {
                            "transform": "scale(" + x + ")"
                        })
                    }
                }
                scaleX = x;
                scaleY = x
            }
        }

        function CreateTip() {
            tip = createElement("div");
            css(tip, {
                'position': 'absolute',
                'left': 0,
                'top': 0,
                'height': 'auto',
                "opacity": 0,
                "transition": "opacity 0.1s linear"
            });
            tipbg = createElement("div");
            style = MarginPadding(style, 'tippadding', 'tippadding');
            style = MarginPadding(style, 'tipmargin', 'tipmargin');
            css(tipbg, {
                'position': 'absolute',
                'left': 0,
                'top': 0,
                'width': '100%',
                'height': 30,
                'background-color': style.tipbgcolor,
                'opacity': style.tipbga,
                'border-radius': style.tipbgrounding
            });
            tiptext = createElement("div");
            css(tiptext, {
                'position': 'absolute',
                'left': style.tippaddingleft,
                'top': style.tippaddingtop,
                'color': style.tipcolor,
                'font-family': style.tipfont,
                'font-size': style.tipfontsize,
                "letter-spacing": style.tipletterspacing + 'px',
                'opacity': style.tipa,
                "line-height": "1"
            });
            if (style.tiptext) {
                if (style.tiptext.indexOf("var:") == 0) {
                    style.tipvar = true
                }
            }
            if (!style.tipvar) {
                css(tiptext, {
                    'white-space': 'nowrap'
                })
            }
            if (style.tippointer == 1) {
                tipcrn = createElement("div");
                tipcrn.innerHTML = '<svg width="8px" height="6px" viewBox="0 0 8 6" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><polygon id="Rectangle" stroke="none" fill="#' + style.tipbgcolor.replace("#", "") + '" fill-rule="evenodd" points="0 0 8 0 4 6"></polygon></svg>'
            }
            if (style.tipalways == 1) {
                css(tip, {
                    "opacity": 1
                });
                Clickable(tip)
            } else {
                css(tip, {
                    "pointerEvents": "none"
                })
            }
            control.appendChild(tip);
            tiptext.innerHTML = o.ni + (style.tiptext == '' ? Lang(action) : tips[0]) + o.ni2;
            tip.appendChild(tipbg);
            tip.appendChild(tiptext);
            if (style.tippointer == 1) {
                tip.appendChild(tipcrn);
                var btm = o.doctype ? '-8px' : '-6px';
                var ps = style.tippointeralign;
                if (!exist(ps)) {
                    ps = ''
                }
                var tp = ps.indexOf("top") > -1;
                if (tp) {
                    Rot(tipcrn, '-180')
                }
                css(tipcrn, {
                    'position': 'absolute',
                    'right': (ps.indexOf("right") > -1 ? 10 * style.scale : 'auto'),
                    'left': (ps.indexOf("left") > -1 ? 10 * style.scale : (ps == '' || ps == 'top' ? '50%' : 'auto')),
                    'margin-left': (ps == '' || ps == 'top' ? '-4px' : 0),
                    'bottom': (tp ? 'auto' : btm),
                    'top': (tp ? btm : 'auto'),
                    'opacity': style.tipbga
                })
            }
            Tip()
        }

        function Tip() {
            if (style.tip == 1) {
                css(tip, {
                    "top": (bottomside == 1 ? -h - tip.offsetHeight + 3 : -tip.offsetHeight / 2) + style.tipmargintop - style.tipmarginbottom,
                    "left": (rightside == 1 ? -tiptext.offsetWidth : (bottomside == 1 ? -w / 2 : +tiptext.offsetWidth)) - (bottomside == 1 ? 0 : tiptext.offsetWidth / 2 + 5) + style.tipmarginleft - style.tipmarginright,
                    "height": style.tippaddingtop + tiptext.offsetHeight + style.tippaddingbottom,
                    "width": style.tippaddingleft + tiptext.offsetWidth + style.tippaddingright
                });
                css(tipbg, {
                    'height': tip.offsetHeight
                });
                tip.style.zIndex = "1000"
            }
        }
        this.c = function () {
            return control
        };
        this.s = function (x) {
            return style[x]
        };
        this.ss = function (x, x2) {
            return exist(style[x]) ? style[x][x2] : false
        };
        this.g = function (x) {
            switch (x) {
                case "width":
                    return w;
                    break;
                case "height":
                    return h;
                    break;
                case "x":
                    return int(control.style.left);
                    break;
                case "y":
                    return int(control.style.top);
                    break;
                case "opacity":
                    return control.style.opacity ? control.style.opacity : 1;
                    break;
                case "show":
                    return visible;
                    break;
                case "scaleX":
                    return scaleX;
                    break;
                case "scaleY":
                    return scaleY;
                    break;
                case "action":
                    return action;
                    break;
                case "action_settings":
                    return actionstt;
                    break;
                case "clicked":
                    return clicked;
                    break;
                case "type":
                    return style.type;
                    break;
                case "length":
                    return style.lngth ? style.lngth : 0;
                    break;
                case "key":
                    return key;
                    break;
                case "x0":
                    return x0;
                    break;
                case "y0":
                    return y0;
                    break;
                case "over":
                    return over;
                    break;
                case "settings#":
                    return actionstt.indexOf("settings#") == 0;
                    break;
                case "settings:":
                    return actionstt.indexOf("settings:") == 0;
                    break;
                case "set#visible":
                    return settingsNumberVisible;
                    break;
                default:
                    return false
            }
        };
        this.set = function (k, x) {
            switch (k) {
                case "show":
                    over ? onOut() : '';
                    visible = x;
                    break;
                case "display":
                    DisplayControl(x);
                    break;
                case "show2":
                    show2(control);
                    break;
                case "hide2":
                    hide2(control);
                    break;
                case "unhidden":
                    style.hidden = 0;
                    break;
                case "hidetime":
                    if (style.hidesec > 0 && style.hidden != 1 && !htto) {
                        clearTimeout(htto);
                        htto = setTimeout(function () {
                            hide2(control);
                            style.hidden = 1;
                            htto = undefined
                        }, style.hidesec * 1000)
                    }
                    break;
                case "scale":
                    scale(x);
                    break;
                case "scaleX":
                    css(control, {
                        "transform": "scaleX(" + x + ")"
                    });
                    scaleX = x;
                    break;
                case "scaleY":
                    css(control, {
                        "transform": "scaleY(" + x + ")"
                    });
                    scaleY = x;
                    break;
                case "opacity":
                    css(control, {
                        "opacity": x
                    });
                    break;
                case "iconopacity":
                    css(icon[0], {
                        "opacity": x
                    });
                    break;
                case "saturate":
                    css(icon[0], {
                        "filter": "saturate(" + x + ")"
                    });
                    break;
                case "left":
                    css(control, {
                        "left": x
                    });
                    break;
                case "top":
                    css(control, {
                        "top": x
                    });
                    break;
                case "width":
                    css(control, {
                        "width": x
                    });
                    break;
                case "height":
                    css(control, {
                        "height": x
                    });
                    break;
                case "over_final":
                    style.over_final = x;
                    break;
                case "rightside":
                    rightside = x;
                    break;
                case "set#visible":
                    settingsNumberVisible = x;
                    break;
                case "x":
                    css(control, {
                        "left": x
                    });
                    break;
                case "y":
                    css(control, {
                        "top": x
                    });
                    break;
                case "animation":
                    style.animation = x;
                    break;
                case "x0":
                    x0 = x;
                    break;
                case "y0":
                    y0 = x;
                    break;
                default:
                    return false
            }
        };

        function DisplayControl(x) {
            if (x && o.system.mobile) {
                noclick = true;
                setTimeout(noClickTimeout, 300)
            }
            if (!x) {
                if (style.iconsreplay == 1 && replay) {
                    hide(icon[iconreplay]);
                    show(icon[0]);
                    replay = false
                }
            }
            if (style.loading == 1) {
                x ? show(control) : hide(control)
            } else {
                if (key == "control_time" || key == "control_duration") {
                    x ? show(control) : hide(control)
                } else {
                    css(control, {
                        "display": (x ? "block" : "none")
                    })
                }
                visible = x;
                x ? show(control) : ''
            }
            if (x && style.resizetxt) {
                style.resizetxt = false;
                setTimeout(ResizeText, 100)
            }
        }

        function noClickTimeout() {
            noclick = false
        }
        this.UpdateText = function (x) {
            UpdateText(x);
            !isVisible(control) ? style.resizetxt = true : ''
        };
        this.CustomText = function (x) {
            style.customtext = x;
            UpdateText(x);
            o.controls.resize()
        };
        this.Rotate = function () {
            Rot(control, angle);
            angle += 20
        };

        function Rot(x, y) {
            css(x, {
                "transform": "rotate(" + y + "deg)" + (x == icon[0] && !zoomed && scaleX != 1 ? ' scale(' + scaleX + ')' : '')
            })
        };
        this.RenewFromTitle = function (x) {
            if (style.text.indexOf("{title") > -1) {
                UpdateText(style.text)
            }
        };
        this.CustomToogle = function () {
            CustomToogle()
        };

        function UpdateText(text) {
            if (style.type == "text") {
                if (exist(text)) {
                    if (style.with_hours) {
                        if (text.length == 4) {
                            text = (style.timeshort ? '0:0' : '00:0') + text
                        }
                        if (text.length == 5) {
                            text = (style.timeshort ? '0:' : '00:') + text
                        }
                        if (text.length == 7) {
                            text = (style.timeshort ? '' : '0') + text
                        }
                    }
                    if (style.with_min) {
                        if (text.length == 4) {
                            text = '0' + text
                        }
                    }
                    style.lngth = text.length
                }
                text = (style.presmbl ? style.presmbl + (style.minus4back ? '' : ' ') : '') + text + (style.postsmbl ? ' ' + style.postsmbl : '');
                var prevorius_default_w = icon[0].offsetWidth + (style.bg == 1 ? style.bgpaddingtop + style.bgpaddingbottom : 0);
                var prevorius_default_h = icon[0].offsetHeight + (style.bg == 1 ? style.bgpaddingtop + style.bgpaddingbottom : 0);
                icon[0].innerHTML = o.ni + (action == "custom" ? Places(text) : text) + o.ni2;
                if (style.triangle == 1) {
                    icon[0].innerHTML += '<span style="display:inline-block;width:10px"></span><span style="border-top: 3px solid #fff;border-left: 3px solid transparent;border-right: 3px solid transparent;position: absolute;right:3px;top: 50%;margin-top: -1px;"></span>'
                }
                if (action == "title") {
                    css(icon[0], {
                        "width": "auto",
                        "white-space": "nowrap"
                    });
                    Marquee(text)
                }
                style.w = icon[0].offsetWidth + (style.bg == 1 ? style.bgpaddingtop + style.bgpaddingbottom : 0);
                style.h = icon[0].offsetHeight + (style.bg == 1 ? style.bgpaddingtop + style.bgpaddingbottom : 0);
                if (prevorius_default_w != style.w || prevorius_default_h != style.h || (style.w > 0 && last_text_w == 0)) {
                    ResizeText()
                }
                if (icon[0].offsetWidth > 0) {
                    last_text_w = style.w
                } else {
                    actionstt != '' ? hide(icon[0]) : '';
                    if (text != '') {
                        setTimeout(ResizeText, 10)
                    }
                }
            }
        }
        this.ResizeText = function () {
            ResizeText()
        };

        function ResizeText() {
            if (style.type == "text") {
                if (icon[0]) {
                    if (icon[0].offsetWidth > 0) {
                        actionstt != '' ? show(icon[0]) : '';
                        w = style.w = icon[0].offsetWidth;
                        h = style.h = icon[0].offsetHeight;
                        Background();
                        Clickable(bg);
                        Resize();
                        o.controls ? o.controls.resizeFromText() : ''
                    }
                }
            }
        }
        this.UpdateVolume = function (x) {
            if (style.displayvolume == 1) {
                var n = 4;
                if (key == "control_mute") {
                    if (o.system.mobile) {
                        return
                    }
                } else {
                    n = 8
                }
                var y = 'pjs_';
                var z = [];
                for (var i = 1; i < n; i++) {
                    z[i] = document.getElementById(y.concat(v.id, key, 'volume_element', i))
                }
                if (z[1]) {
                    for (var i = 1; i < n; i++) {
                        z[i] ? hide(z[i]) : ''
                    }
                    if (n == 4) {
                        for (var i = 1; i < n; i++) {
                            x > (i / n) && z[i] ? show(z[i]) : ''
                        }
                    } else {
                        for (var i = n; i > 0; i--) {
                            if (x * 1 + (1 / n) >= (i / n) && z[i]) {
                                show(z[i]);
                                break
                            }
                        }
                    }
                }
            }
        };
        this.On = function () {
            if (!on) {
                if (icons) {
                    if (icons.length > 1 && actions.length > 1) {
                        hide(icon[0]);
                        show(icon[1])
                    }
                }
                if (actions.length > 1) {
                    action = actions[1];
                    if (style.tip == 1) {
                        tiptext.innerHTML = TipText(1);
                        Tip()
                    }
                }
                if (style.iconsreplay == 1 && replay) {
                    hide(icon[iconreplay]);
                    replay = false
                }
                SwitchText();
                on = true
            }
        };

        function TipText(x) {
            return o.ni + (style.tiptext == '' ? Lang(actions[x]) : (tips.length > 1 ? tips[x] : tips[0])) + o.ni2
        }
        this.CustomSwitch = function (x) {
            CustomSwitch(x)
        };

        function CustomSwitch(x) {
            var y = 'pjs_';
            var z = document.getElementById(y.concat(v.id, key, 'slider'));
            if (z) {
                css(z, {
                    "transition": "transform 0.1s ease-out"
                });
                if (x == 1) {
                    z.style.transform = 'translate(0, 0)'
                } else {
                    z.style.transform = 'translate(-7px, 0)'
                }
            } else {
                if (x == 1) {
                    style.a = 1
                } else {
                    style.a = 0.5
                }
            }
            on = x == 1;
            if (style.tip == 1 && tips.length > 1) {
                tiptext.innerHTML = (on ? tips[0] : tips[1])
            }
            css(icon[0], {
                "opacity": style.a
            })
        };
        this.Off = function () {
            if (on) {
                if (icons) {
                    if (icons.length > 1 && actions.length > 1) {
                        show(icon[0]);
                        hide(icon[1])
                    }
                }
                action = actions[0];
                if (actions.length > 1) {
                    if (style.tip == 1) {
                        tiptext.innerHTML = TipText(0);
                        Tip()
                    }
                }
                SwitchText();
                on = false;
                replay = false
            }
        };
        this.ReplayIcon = function () {
            if (style.iconsreplay == 1) {
                hideAllIcons();
                show(icon[iconreplay]);
                replay = true
            }
        };
        this.Buffer = function () {
            var stop = false;
            if (style.hide == 1 && style.hidewithposter == 1) {
                if (isVisible(o.poster)) {
                    stop = true
                }
            }
            if (!stop) {
                show2(control);
                var items = control.getElementsByTagName("*");
                for (var i = items.length; i--;) {
                    css(items[i], {
                        "animation-play-state": "running"
                    })
                }
                visible = true
            }
        };
        this.BufferStop = function () {
            BufferStop()
        };

        function BufferStop() {
            hide2(control);
            var items = control.getElementsByTagName("*");
            for (var i = items.length; i--;) {
                css(items[i], {
                    "animation-play-state": "paused"
                })
            }
            visible = false
        }
        this.Remove = function () {
            if (icons.length > 0) {
                for (i = 0; i < icons.length; i++) {
                    control.removeChild(icon[i]);
                    icon[i] = null
                }
            }
            if (bg) {
                bg.removeAttribute("onclick");
                bg.removeAttribute("onmouseover");
                bg.removeAttribute("onmouseout");
                bg.parentNode.removeChild(bg);
                bg = null
            }
            if (style.position == 'timeline') {
                o.timeline.removeChild(control)
            } else {
                if (control.parentNode == o.frame) {
                    o.frame.removeChild(control)
                } else {
                    if (o.toolbar) {
                        if (control.parentNode == o.toolbar) {
                            o.toolbar.removeChild(control)
                        }
                    }
                }
            }
            if (tip) {
                control.removeChild(tip)
            }
            control = null
        };
        this.HdIcon = function () {
            hdicon ? hdicon.toggle() : ''
        };

        function Places(x) {
            var z = x + '';
            if (x.indexOf('{time}') > -1 && exist(o.continue)) {
                x = x.replace('{time}', timeFormat(o.continue.flag().t))
            }
            if (x.indexOf('{title') > -1) {
                var y = o.titlestore ? o.titlestore : (v.title ? v.title : '');
                if (x.indexOf('{title2}') > -1 && o.controls) {
                    x = x.replace('{title2}', o.controls.PlaylistG('title2'))
                }
                if (o.butplstart && o.controls) {
                    y = o.controls.PlaylistG('butplstart')
                }
                x = x.replace('{title}', y);
                if (o.butplstart && !o.controls) {
                    setTimeout(UpdateText, 100, z)
                }
            }
            return x
        }

        function IconsColor(icon, clr) {
            for (var i = 0; i < icon.length; i++) {
                SvgColor(icon[i], clr)
            }
            if (style.linkurl == "chromecast") {
                if (o.chromecast) {
                    o.chromecast.Color(icon[0], clr)
                }
            }
        }
    };
    var ControlLine = function (key, action) {
        var i;
        var style = [];
        var w;
        var h;
        var bg;
        var visible = true;
        var x0;
        var y0;
        var scaleX = 1;
        var scaleY = 1;
        var topBg = 0;
        var leftBg = 0;
        var alphas;
        var mouseDown;
        var mouseUp;
        var click;
        var handle;
        var _duration_load;
        var _duration_play;
        var _time_load;
        var _time_play;
        var tip;
        var tipbg;
        var tiptext;
        var tipcrn;
        var points = [];
        o.current_thumb = -1;
        var lastTouch;
        var over;
        var onup_to;
        for (i in default_style.but) {
            style[i] = default_style.but[i]
        }
        var action = v[key].action;
        var type = v[key].type;
        for (i in default_style[action]) {
            style[i] = default_style[action][i]
        }
        for (i in v[key]) {
            style[i] = v[key][i]
        }
        style.w = parseInt(style.w);
        style.h = parseInt(style.h);
        style = MarginPadding(style, 'margin', 'margin');
        style = MarginPadding(style, 'marginproc', 'marginproc');
        var control = createElement("div");
        if (v.toolbar.hidedown == 1 && v.toolbar.hide == 1) {
            o.toolbar.appendChild(control)
        } else {
            o.frame.appendChild(control)
        }
        action == "line" ? o.timeline = control : '';
        var _cul = false;
        if (style.customline) {
            if (style.customline != 'volume') {
                _cul = true
            }
        }
        css(control, {
            "position": "absolute",
            "top": 0,
            "left": 0,
            "opacity": 1,
            "fontSize": "14px",
            "lineHeight": "1em"
        });
        if (style.ontop == 1) {
            control.style.zIndex = 5
        }
        Background();
        var lines = createElement("div");
        css(lines, {
            "position": "absolute",
            "bottom": Math.round(-style.h / 2),
            "left": Math.round(-style.w / 2)
        });
        if (style.roundout == 1) {
            css(lines, {
                "border-radius": style.rounding * style.h / 2,
                "height": style.h,
                "overflow": "hidden",
                "pointer-events": "none"
            })
        }
        if (exist2(style.dom)) {
            attr(control, {
                "id": (v.id + "_control_" + style.dom)
            })
        }
        control.appendChild(lines);
        if (action == 'line' && v.thumbs == 1) {
            CreateThumb()
        }
        if (style.tip == 1) {
            CreateTip()
        }
        var line0 = createElement("div");
        StyleLine(0, line0, 0.3, (style.gradient == 1 ? "linear-gradient(#" + style.gradientcolorbg + ", #" + style.colorbg + ")" : style.colorbg), style.w, style.abg);
        if (style.customdesign == 1 && exist(style.customdesignsvg)) {
            var svg0 = createElement("div");
            svg0.innerHTML = style.customdesignsvg.replace(/\#FFFFFF/g, "#" + style.colorbg);
            line0.appendChild(svg0);
            css(svg0, {
                "position": "absolute",
                "bottom": -Math.round(style.h / 2),
                "left": 0,
                "pointer-events": "none"
            });
            css(line0, {
                "overflow": "hidden",
                "background": "none"
            });
            var x = ["path", "polygon", "polyline", "rect", "ellipse"];
            for (var y = 0; y < x.length; y++) {
                var z = svg0.querySelectorAll("svg " + x[y]);
                if (z.length > 0) {
                    for (var y2 = 0; y2 < z.length; y2++) {
                        z[y2].style.fill = style.colorbg
                    }
                }
            }
        }
        lines.appendChild(line0);
        var lines1 = [];
        var line1 = createElement("div");
        StyleLine(1, line1, style.linespeed1, (style.gradient == 1 ? "linear-gradient(#" + style.gradientcolorload + ", #" + style.colorload + ")" : style.colorload), 0, style.aload);
        lines.appendChild(line1);
        if (style.aover > 0) {
            var line2 = createElement("div");
            StyleLine(2, line2, style.linespeed2, style.colorover, 0, style.aover);
            lines.appendChild(line2)
        }
        var line3 = createElement("div");
        StyleLine(3, line3, style.linespeed3, (style.gradient == 1 ? "linear-gradient(#" + style.gradientcolor + ", #" + style.color + ")" : style.color), 0, style.a);
        if (style.customdesign == 1 && exist(style.customdesignsvg)) {
            var svg3 = createElement("div");
            svg3.innerHTML = style.customdesignsvg.replace(/\#FFFFFF/g, "#" + style.color);
            css(svg3, {
                "position": "absolute",
                "bottom": -Math.round(style.h / 2),
                "left": 0,
                "pointer-events": "none"
            });
            css(line3, {
                "overflow": "hidden",
                "background": "none"
            });
            line3.appendChild(svg3)
        }
        if (style.value == 1) {
            var line3value = createElement("div");
            style = MarginPadding(style, 'valuepadding', 'valuepadding');
            style = MarginPadding(style, 'valuemargin', 'valuemargin');
            css(line3value, {
                "position": "absolute",
                "bottom": style.h / 2,
                "right": 0,
                "pointer-events": "none",
                "font-size": (style.valuesize + "px"),
                "color": style.valuecolor,
                "line-height": "100%",
                "padding-top": style.valuepaddingtop,
                "padding-bottom": style.valuepaddingbottom,
                "padding-left": style.valuepaddingleft,
                "padding-right": style.valuepaddingright,
                "margin-top": style.valuemargintop,
                "margin-bottom": style.valuemarginbottom,
                "margin-left": style.valuemarginleft,
                "margin-right": style.valuemarginright,
                "border-radius": (style.valuerounding + "px"),
                "display": "none"
            });
            if (style.valuebg == 1) {
                css(line3value, {
                    "background": "#" + style.valuebgcolor
                })
            }
            line3.appendChild(line3value);
            var l3v_show = false;
            var l3v_left = false
        }
        o.timeline_h = style.h;
        lines.appendChild(line3);
        if (style.pointed == 1) {
            v.pointed = 1;
            var pointscontrol = createElement("div");
            css(pointscontrol, {
                "position": "absolute",
                "top": 0,
                "left": 0
            });
            control.appendChild(pointscontrol);
            exist(v.points) ? UpdatePoints(v.points) : ''
        }
        if (style.handle == 1) {
            if (style.handleicon.toString().indexOf('<svg') == -1) {
                style.handleicon == '' ? style.handleicon = "<svg width='20' height='20'><g><ellipse ry='5' rx='5' cy='10' cx='10' fill='#fff'/></g></svg>" : ''
            }
            handle = createElement("div");
            handle.innerHTML = style.handleicon.toString();
            style = MarginPadding(style, 'handlemargin', 'handlemargin');
            css(handle, {
                "position": "absolute",
                "top": -10 + style.handlemargintop - style.handlemarginbottom,
                "left": -1000,
                "pointer-events": "none",
                "height": 20,
                "width": style.handle_width,
                "opacity": style.handlea,
                "transition": "transform 0.1s linear, opacity 0.1s linear"
            });
            if (style.handlehide == 1 || style.handlehideinit == 1) {
                css(handle, {
                    "transform": "scale(0)"
                })
            } else {
                if (style.handlescale != 1) {
                    css(handle, {
                        "transform": "scale(" + style.handlescale + ")"
                    })
                }
            }
            control.appendChild(handle);
            if (style.handlecolor != -1) {
                var x = ["path", "rect", "ellipse"];
                for (var y = 0; y < x.length; y++) {
                    var z = handle.querySelectorAll("svg " + x[y]);
                    if (z.length > 0) {
                        for (var y2 = 0; y2 < z.length; y2++) {
                            z[y2].style.fill = "#" + style.handlecolor
                        }
                    }
                }
            }
            style.handlewidth = handle.offsetWidth
        }
        if (style.rotation != 0) {
            css(control, {
                "transform": "rotate(" + style.rotation + "deg)"
            })
        }
        if (style.hidden == 1) {
            hide(control);
            visible = false
        }
        if (action == "volume") {
            if (style.hide == 1 && style.hideoutmute == 1) {
                o.hidden_volume = true;
                style.hidden = true
            } else {
                o.hidden_volume = false
            }
        }
        style.vertical = 0;
        if (style.rotation != 0) {
            style.rotation2 = Math.abs(style.rotation);
            if (style.rotation2 > 45 && style.rotation2 < 135) {
                style.vertical = 90
            }
            if (style.rotation2 > 225 && style.rotation2 < 315) {
                style.vertical = 270
            }
        }
        if (_cul) {
            o.line_speed = style.customline == "speed";
            w = style.w;
            UpdatePlay(1, o.files_speed.slice(-1)[0], "no")
        }

        function StyleLine(n, x, y, z, _w, _a) {
            css(x, {
                "position": "absolute",
                "bottom": 0,
                "left": 0,
                "width": _w,
                "height": (style['h' + n] > 0 ? style['h' + n] : style.h),
                "background": z ? (z.indexOf("linear") > -1 ? z : '#' + z) : '',
                "border-radius": (style.roundout == 1 ? 1 : style.rounding * style.h / 2),
                "opacity": _a,
                "pointer-events": "none",
                "transition": "transform 0.2s ease-in-out"
            })
        }

        function Background() {
            bg = createElement("div");
            style = MarginPadding(style, 'bgpadding', 'bgpadding');
            var bgh = style.h + style.bgpaddingtop + style.bgpaddingbottom;
            var bgw = style.w + style.bgpaddingleft + style.bgpaddingright;
            if (style.bg == 1) { } else {
                style.bga = 0
            }
            style = MarginPadding(style, 'clickmargin', 'clickmargin');
            if (v.toolbar.clickarea == 1 || style.clickarea == 1) {
                style.bgcolor = '#ff0000';
                style.bg = 1;
                style.bga = 0.5
            }
            css(bg, {
                "position": "absolute",
                "top": 0,
                "left": 0,
                "width": bgw,
                "height": bgh * style.clickscaley,
                "borderRadius": (style.bgo * bgh) / 2,
                "backgroundColor": style.bgcolor,
                "opacity": style.bga,
                "pointerEvents": "auto",
                "transition": "opacity .1s linear, background .1s linear"
            });
            if (style.bgborder == 1) {
                css(bg, {
                    "border": "1px solid #" + style.bgbordercolor
                })
            }
            if (style.click == 1) {
                if (style.hand == 1) {
                    css(bg, {
                        "cursor": "pointer"
                    })
                }
                if (!o.system.mobile) {
                    bg.onclick = onClick;
                    bg.onmouseup = onUp;
                    bg.onmousedown = onDown;
                    bg.onmousemove = onMove
                }
            } else {
                css(bg, {
                    "cursor": "default"
                })
            }
            if (!o.system.mobile) {
                bg.onmouseover = onOver;
                bg.onmousemove = onMove;
                bg.onmouseout = onOut
            }
            if (o.system.mobile) {
                bg.addEventListener("touchstart", function (event) {
                    event.cancelBubble = true;
                    if (!exist(event.clientX) && event.touches.length > 0) {
                        event.clientX = event.touches[0].pageX;
                        event.clientY = event.touches[0].pageY
                    }
                    lastTouch = event;
                    onOver(event);
                    onDown(event)
                });
                bg.addEventListener("touchend", function (event) {
                    event.cancelBubble = true;
                    onOut(event);
                    onUp(lastTouch)
                });
                bg.addEventListener("click", function (event) {
                    event.cancelBubble = true
                });
                bg.addEventListener("touchmove", function (event) {
                    if (!exist(event.clientX) && event.touches.length > 0) {
                        event.clientX = event.touches[0].pageX;
                        event.clientY = event.touches[0].pageY
                    }
                    lastTouch = event;
                    onMove(event)
                })
            }
            css(bg, {
                "left": Math.ceil(-style.w / 2 - style.bgpaddingleft)
            });
            css(bg, {
                "top": Math.ceil(-style.h / 2 - style.bgpaddingtop + style.clickmargintop - style.clickmarginbottom)
            });
            control.appendChild(bg)
        }

        function Resize(width) {
            if (width != w) {
                w = width;
                o.timeline_w = w;
                var delta = w / line0.offsetWidth;
                css(bg, {
                    "width": (w + style.bgpaddingleft + style.bgpaddingright),
                    "left": -w / 2 - style.bgpaddingleft,
                });
                css(lines, {
                    "left": -w / 2
                });
                css(line0, {
                    "width": w
                });
                css(lines, {
                    "width": w
                });
                var xx = line1.offsetWidth * delta;
                if (xx > line0.offsetWidth) {
                    xx = line0.offsetWidth
                }
                css(line1, {
                    "width": xx
                });
                var wp = line3.offsetWidth * delta;
                css(line3, {
                    "width": wp
                });
                HandleWidth(wp, false);
                if (action == "line") {
                    Continue()
                }
                if (style.pointed == 1) {
                    PlacePoints()
                }
            }
        }

        function HandleWidth(x, none) {
            if (style.handle == 1) {
                if (x < style.handlewidth / 2 && style.handle_width != 20) {
                    x = style.handlewidth / 2
                }
                if (x > w - style.handlewidth / 2 && style.handle_width != 20) {
                    x = w - style.handlewidth / 2
                }
                var y = x - w / 2 - style.handlewidth / 2 + style.handlemarginleft - style.handlemarginright;
                css(handle, {
                    "left": y
                })
            }
        }

        function ShowHandle() {
            css(handle, {
                "transform": "scale(" + style.handlescale + ")"
            })
        }

        function onOver(event) {
            o.controls.Mouse(key, "over");
            if (style.bg == 1) {
                if (style.bgaover != -1) {
                    var m = new Motion({
                        "mc": bg,
                        "type": "alpha_div",
                        "to": style.bgaover,
                        "time": 0.1,
                        "me": (key + "bg")
                    })
                }
                if (exist2(style.bgcolorover)) {
                    css(bg, {
                        "background-color": style.bgcolorover
                    })
                }
            }
            if (exist2(style.coloroverplay)) {
                css(line3, {
                    "background-color": style.coloroverplay
                })
            }
            if (style.handle == 1) {
                if (style.handleiconsover == 1 && exist(style.handleiconover)) {
                    if (style.handleiconspress == 1 && mouseDown) { } else {
                        handle.innerHTML = "<svg width='" + style.handle_width + "' height='20' xmlns:xlink='http://www.w3.org/1999/xlink' xmlns='http://www.w3.org/2000/svg'>" + style.handleiconover.toString() + "</svg>"
                    }
                }
                if (style.handlehide == 1) {
                    if (style.handlehideinit == 1 && !o.start) { } else {
                        ShowHandle()
                    }
                } else {
                    if (style.handleaover != -1) {
                        var m2 = new Motion({
                            "mc": handle,
                            "type": "alpha_div",
                            "to": style.handleaover,
                            "time": 0.1,
                            "me": (key + "handle")
                        })
                    }
                }
            }
            if (style.tip == 1 && (o.media.duration() > 0 || action == "volume" || _cul)) {
                show(tip);
                css(tip, {
                    "opacity": 1
                })
            }
            if (style.expand > 0) {
                css(bg, {
                    "transform": "scaleY(" + ((style.expand - 1) / 5 + 1) + ")"
                });
                LineScale(style.expand)
            }
            if (action == "volume") {
                o.actions.volumewheel(true);
                o.volumewheel = true
            }
            o.controlover = true
        }

        function LineScale(x) {
            css(line0, {
                "transform": "scaleY(" + x + ")"
            });
            css(line1, {
                "transform": "scaleY(" + x + ")"
            });
            line2 ? css(line2, {
                "transform": "scaleY(" + x + ")"
            }) : '';
            css(line3, {
                "transform": "scaleY(" + x + ")"
            })
        }

        function onOut() {
            if (!mouseUp) {
                if (style.aover > 0) {
                    css(line2, {
                        "width": 0
                    })
                }
                if (exist2(style.coloroverplay)) {
                    css(line3, {
                        "background-color": style.color
                    })
                }
                if (style.bg == 1) {
                    if (style.bgaover != -1) {
                        var m = new Motion({
                            "mc": bg,
                            "type": "alpha_div",
                            "to": style.bga,
                            "time": 0.1,
                            "me": (key + "bg")
                        })
                    }
                    if (exist2(style.bgcolorover)) {
                        css(bg, {
                            "background-color": style.bgcolor
                        })
                    }
                }
                if (style.handle == 1) {
                    if (style.handleiconsover == 1 && exist(style.handleiconover)) {
                        if (style.handleiconspress == 1 && mouseDown) { } else {
                            handle.innerHTML = "<svg width='" + style.handle_width + "' height='20' xmlns:xlink='http://www.w3.org/1999/xlink' xmlns='http://www.w3.org/2000/svg'>" + style.handleicon.toString() + "</svg>"
                        }
                    }
                    if (style.handlehide == 1) {
                        css(handle, {
                            "transform": "scale(0)"
                        })
                    } else {
                        if (style.handleaover != -1) {
                            var m2 = new Motion({
                                "mc": handle,
                                "type": "alpha_div",
                                "to": style.handlea,
                                "time": 0.1,
                                "me": (key + "handle")
                            })
                        }
                    }
                }
                if (style.expand > 0) {
                    css(bg, {
                        "transform": "scaleY(1)"
                    });
                    LineScale(1)
                }
                if (action == "volume" && !o.fullscreen) {
                    o.actions.volumewheel(false);
                    o.volumewheel = false
                }
                o.controls.Mouse(key, "out")
            }
            if (style.tip == 1 && (o.media.duration() > 0 || action == "volume")) {
                hide(tip);
                css(tip, {
                    "opacity": 0
                })
            }
            if (o.thumbs_on && action == "line") {
                o.th.hide();
                o.current_thumb = -1
            }
            o.controlover = false
        }

        function onClick(event) {
            event.cancelBubble = true
        }

        function CancelBubble(event) {
            event.cancelBubble = true
        }

        function onUp(event) {
            if (action == "volume") {
                if (o.hidden_volume_over) {
                    mouseUp = true;
                    clearTimeout(onup_to);
                    onup_to = setTimeout(function () {
                        mouseUp = false;
                        onOut()
                    }, 1000)
                }
            }
            EndMove();
            o.mouseDown = false;
            if (style.handle == 1) {
                if (style.handleiconspress == 1 && exist(style.handleiconpress)) {
                    handle.innerHTML = "<svg width='20' height='20' xmlns:xlink='http://www.w3.org/1999/xlink' xmlns='http://www.w3.org/2000/svg'>" + style.handleicon.toString() + "</svg>"
                }
            }
            CalculateClick(event.clientX, event.clientY);
            o.controls.ControlClick(key);
            o.controls.StageMouseUp(event.clientX, event.clientY);
            event.cancelBubble = true
        }

        function onDown(event) {
            mouseDown = true;
            if (style.handle == 1) {
                if (style.handleiconspress == 1 && exist(style.handleiconpress)) {
                    handle.innerHTML = "<svg width='20' height='20' xmlns:xlink='http://www.w3.org/1999/xlink' xmlns='http://www.w3.org/2000/svg'>" + style.handleiconpress.toString() + "</svg>"
                }
            }
            topBg = findTop(bg);
            leftBg = findLeft(bg);
            CalculateClick(event.clientX, event.clientY);
            UpdatePlay(click, 1, "no")
        }

        function CalculateClick(event_x, event_y) {
            var x;
            var xOffset = Math.max(document.documentElement.scrollLeft, document.body.scrollLeft);
            var yOffset = Math.max(document.documentElement.scrollTop, document.body.scrollTop);
            if (o.system.mobile) { } else {
                event_y = event_y + yOffset;
                event_x = event_x + xOffset
            }
            if (style.vertical > 0) {
                x = event_y - topBg - style.bgpaddingright;
                click = x / w;
                if (style.vertical == 270) {
                    x = event_y - topBg - style.bgpaddingleft;
                    click = x / w;
                    click = (click - 1) * -1
                }
            } else {
                x = event_x - leftBg - style.bgpaddingleft;
                click = x / w;
                if (style.rotation > 134 && style.rotation < 235) {
                    x = event_x - leftBg - style.bgpaddingright;
                    click = x / w;
                    click = (click - 1) * -1
                }
            }
            click > 1 ? click = 1 : '';
            click < 0 ? click = 0 : ''
        }
        this.PlacePoints = function () {
            PlacePoints()
        };
        this.RenewPoints = function () {
            UpdatePoints()
        };

        function UpdatePoints() {
            if (points) {
                for (var i = 0; i < points.length; i++) {
                    pointscontrol.removeChild(points[i])
                }
            }
            points = [];
            if (v.points) {
                if (typeof (v.points) == "string") {
                    v.points = eval(v.points)
                }
                for (var i = 0; i < Object.keys(v.points).length; i++) {
                    if (v.points[i].time) {
                        points[i] = createElement("div");
                        css(points[i], {
                            'position': 'absolute',
                            'left': 0,
                            'top': -style.h / 2,
                            'width': (exist(v.points[i].width) ? v.points[i].width : style.pointw),
                            'height': style.h,
                            'opacity': (exist(v.points[i].opacity) ? v.points[i].opacity : style.pointa),
                            'pointer-events': 'none',
                            'display': 'none',
                            'background-color': (exist(v.points[i].color) ? v.points[i].color : style.pointcolor)
                        });
                        points[i].time = v.points[i].time;
                        pointscontrol.appendChild(points[i])
                    }
                }
                PlacePoints()
            }
        }

        function PlacePoints() {
            var x = o.media.duration();
            for (var i = 0; i < points.length; i++) {
                if (x > 0) {
                    css(points[i], {
                        'left': w * (points[i].time / x) - w / 2,
                        'display': 'block'
                    })
                } else {
                    hide2(points[i])
                }
            }
        }

        function EndMove() {
            mouseDown = false
        }

        function onMove(event) {
            leftBg = findLeft(bg);
            if (style.aover > 0) {
                if (o.start || action != 'line') {
                    css(line2, {
                        "width": event.clientX - leftBg
                    })
                }
            }
            if (style.tip == 1 && (o.media.duration() > 0 || action == "volume" || _cul)) {
                !isVisible(tip) ? show(tip) : '';
                topBg = findTop(bg);
                CalculateClick(event.clientX, event.clientY);
                if (action == "line") {
                    if (v.hlsdvrtime == 1) {
                        if (o.media.isLive() && o.media.currentFile().indexOf("?DVR") > 0) {
                            tiptext.innerHTML = '- ' + timeFormat((1 - click) * o.media.duration(true))
                        } else {
                            tiptext.innerHTML = timeFormat(click * o.media.duration())
                        }
                    } else {
                        var d = o.media.duration();
                        if (v.delete > 0) {
                            d = d - v.delete
                        }
                        tiptext.innerHTML = timeFormat(click * d)
                    }
                }
                if (action == "volume" || _cul) {
                    tiptext.innerHTML = Math.round(click * 100);
                    if (_cul) {
                        if (o.line_speed) {
                            tiptext.innerHTML = (_cul && exist2(style.tiptext) ? style.tiptext + '&nbsp;' : '') + parseFloat(click * o.files_speed.slice(-1)[0]).toFixed(1)
                        }
                    }
                }
                css(tip, {
                    "top": (-tiptext.offsetHeight * 2 - style.linetipmarginbottom * 1) - (style.toptip == 1 ? (style.h / 2) * (style.expand > 0 ? style.expand : 1) : 0),
                    "left": (-w / 2 + (event.clientX + document.documentElement.scrollLeft - leftBg) - tip.offsetWidth / 2),
                    "height": style.tippaddingtop + style.tipfontsize + style.tippaddingbottom,
                    "width": style.tippaddingleft + tiptext.offsetWidth + style.tippaddingright,
                });
                css(tipbg, {
                    'height': tip.offsetHeight
                });
                tip.style.zIndex = "1000"
            }
            if (o.thumbs_on && action == "line" && o.th) {
                if (o.media.duration() > 0) {
                    if (style.tip == 0) {
                        topBg = findTop(bg);
                        leftBg = findLeft(bg);
                        CalculateClick(event.clientX, event.clientY)
                    }
                    var left = (-w / 2 + (event.clientX - leftBg) - v.thumb_width / 2);
                    left > w / 2 - v.thumb_width ? left = w / 2 - v.thumb_width : '';
                    css(o.thumb, {
                        "top": (-v.thumb_height - (v.thumb_bottom > 0 ? v.thumb_bottom * 1 : 5) - v.thumb_border),
                        "left": (left < -w / 2 ? -w / 2 : left)
                    });
                    o.th.time(click * o.media.duration(), event.clientX, leftBg, w)
                }
            }
            if (o.system.mobile) {
                onDown(event)
            }
        }
        this.c = function () {
            return control
        };
        this.s = function (key) {
            return style[key]
        };
        this.ss = function (x, x2) {
            return style[x][x2]
        };
        this.g = function (x) {
            switch (x) {
                case "width":
                    return w;
                    break;
                case "offsetwidth":
                    return line0.offsetWidth;
                    break;
                case "height":
                    return style.h;
                    break;
                case "x":
                    return int(control.style.left);
                    break;
                case "y":
                    return int(control.style.top);
                    break;
                case "opacity":
                    return control.style.opacity ? control.style.opacity : 1;
                    break;
                case "show":
                    return visible;
                    break;
                case "scaleX":
                    return scaleX;
                    break;
                case "scaleY":
                    return scaleY;
                    break;
                case "action":
                    return action;
                    break;
                case "key":
                    return key;
                    break;
                case "x0":
                    return x0;
                    break;
                case "y0":
                    return y0;
                    break;
                case "click":
                    return click;
                    break;
                default:
                    return false
            }
        };
        this.set = function (key, x) {
            switch (key) {
                case "show":
                    visible = x;
                    break;
                case "mouseDown":
                    mouseDown = x;
                    break;
                case "display":
                    action == "line" || style.hide == 1 ? css(control, {
                        "visibility": (x ? "visible" : "hidden")
                    }) : css(control, {
                        "display": (x ? "block" : "none")
                    });
                    visible = x;
                    break;
                case "scaleX":
                    css(control, {
                        "transform": "scaleX(" + x + ")"
                    });
                    scaleX = x;
                    break;
                case "scaleY":
                    css(control, {
                        "transform": "scaleY(" + x + ")"
                    });
                    scaleY = x;
                    break;
                case "opacity":
                    css(control, {
                        "opacity": x
                    });
                    break;
                case "left":
                    css(control, {
                        "left": x
                    });
                    break;
                case "top":
                    css(control, {
                        "top": x
                    });
                    break;
                case "click":
                    click = x;
                    break;
                case "hiddenwidth":
                    style.hiddenwidth = x;
                    break;
                case "width":
                    css(control, {
                        "width": x
                    });
                    break;
                case "height":
                    css(control, {
                        "height": x
                    });
                    break;
                case "over_final":
                    style.roundingver_final = x;
                    break;
                case "x":
                    css(control, {
                        "left": x
                    });
                    break;
                case "y":
                    css(control, {
                        "top": x
                    });
                    break;
                case "x0":
                    x0 = x;
                    break;
                case "y0":
                    y0 = x;
                    break
            }
        };
        this.Resize = function (x) {
            Resize(x)
        };
        this.StageLeave = function (x) { };
        this.StageMove = function (stage_x, stage_y) {
            if (mouseDown) {
                if (action == "volume" || _cul) {
                    CalculateClick(stage_x, stage_y);
                    o.controls.ControlClick(key)
                }
                if (action == "volume") {
                    o.hidden_volume_over = true
                }
                CalculateClick(stage_x, stage_y);
                UpdatePlay(click, 1, "no")
            }
        };
        this.StageMouseUp = function (stage_x, stage_y) {
            if (mouseDown) {
                EndMove();
                mouseDown = false;
                CalculateClick(stage_x, stage_y);
                o.controls.ControlClick(key);
                UpdatePlay(click, 1, "no")
            }
        };

        function UpdatePlay(time, duration, animate) {
            time < 0 ? time = 0 : '';
            if (v.delete > 0 && duration > 1) {
                duration = duration - v.delete;
                time = time - v.delete
            }
            if (style.handle == 1 && style.handlehideinit == 1 && style.handlehide != 1) {
                if (!style.handleinit && time > 0) {
                    ShowHandle();
                    style.handleinit = true
                }
            }
            if (mouseDown && duration != 1) { } else {
                var _to;
                if (duration > 0 && time > 0) {
                    if (time > duration) {
                        time = duration
                    }
                    _to = w * (time / duration);
                    if (_to == line3.offsetWidth) {
                        _to = -1
                    }
                } else {
                    _to = 0
                }
                if (_to >= 0) {
                    css(line3, {
                        "width": _to
                    });
                    HandleWidth(_to, true)
                }
                if (exist(line3value)) {
                    if (duration < 2 && action == "line") {
                        if (l3v_show) {
                            hide2(line3value);
                            l3v_show = false
                        }
                    } else {
                        if (!l3v_show) {
                            show2(line3value);
                            l3v_show = true
                        }
                        line3value.innerHTML = action == "line" ? Time(time == 0 ? duration : time) : Math.ceil(time * 100);
                        if (_to < line3value.clientWidth + style.valuemarginright + style.valuemarginleft) {
                            if (!l3v_left) {
                                css(line3value, {
                                    "left": 0,
                                    "right": "auto"
                                });
                                l3v_left = true
                            }
                        } else {
                            if (l3v_left) {
                                css(line3value, {
                                    "right": 0,
                                    "left": "auto"
                                });
                                l3v_left = false
                            }
                        }
                    }
                }
            }
        };
        this.UpdatePlay = function (time, duration, animate) {
            if (duration != _duration_play || time != _time_play) {
                UpdatePlay(time, duration, animate)
            }
        };
        this.UpdatePlaySeek = function () {
            click > 1 ? click = 1 : '';
            click < 0 ? click = 0 : '';
            css(line3, {
                "width": (click * w)
            })
        };
        this.UpdateLoad = function (time, duration) {
            if (duration > 0 && time > 0) {
                var _to = w * (time / duration);
                css(line1, {
                    "width": int(_to)
                });
                _duration_load = duration;
                _time_load = time
            } else {
                _time_load = 0;
                css(line1, {
                    "width": 0
                })
            }
        };

        function CreateThumb() {
            o.thumb = createElement("div");
            css(o.thumb, {
                'position': 'absolute',
                'left': 0,
                'top': 0,
                'width': v.thumb_width,
                'height': v.thumb_height,
                'overflow': 'hidden',
                "pointer-events": "none",
                "background-color": "#000",
                "border-radius": v.thumb_radius + 'px',
                "display": "none"
            });
            o.thumb.id = "pjs_thumbnail_" + v.id;
            if (v.thumb_border == 1) {
                css(o.thumb, {
                    "border": v.thumb_borderwidth + "px solid " + SettingsParser('color', v.thumb_bordercolor)
                })
            }
            if (v.thumb_shadow == 1) {
                css(o.thumb, {
                    "box-shadow": "0px 1px 5px rgba(0,0,0,0.5)"
                })
            }
            o.thumb.style.zIndex = "999";
            control.appendChild(o.thumb)
        }

        function CreateTip() {
            tip = createElement("div");
            css(tip, {
                'position': 'absolute',
                'left': 0,
                'top': 0,
                'height': 'auto',
                "pointer-events": "none",
                "opacity": 0,
                "transition": "opacity 0.1s linear"
            });
            tipbg = createElement("div");
            style = MarginPadding(style, 'tippadding', 'tippadding');
            css(tipbg, {
                'position': 'absolute',
                'left': 0,
                'top': 0,
                'width': '100%',
                'height': 30,
                'background-color': style.tipbgcolor,
                'opacity': style.tipbga,
                'border-radius': style.tipbgrounding
            });
            tiptext = createElement("div");
            css(tiptext, {
                'position': 'absolute',
                'left': style.tippaddingleft,
                'top': style.tippaddingtop,
                'color': style.tipcolor,
                'font-family': style.tipfont,
                'font-size': style.tipfontsize,
                "letter-spacing": style.tipletterspacing + 'px',
                "line-height": "1",
                'opacity': style.tipa
            });
            style.linetippointer ? style.tippointer = style.linetippointer : '';
            if (style.tippointer == 1) {
                tipcrn = createElement("div");
                tipcrn.innerHTML = '<svg width="8px" height="6px" viewBox="0 0 8 6" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><polygon id="Rectangle" stroke="none" fill="' + CheckColor(style.tipbgcolor) + '" fill-rule="evenodd" points="0 0 8 0 4 6"></polygon></svg>'
            }
            control.appendChild(tip);
            tip.appendChild(tipbg);
            tip.appendChild(tiptext);
            if (style.tippointer == 1) {
                tip.appendChild(tipcrn);
                css(tipcrn, {
                    'position': 'absolute',
                    'left': '50%',
                    'margin-left': '-4px',
                    'bottom': (o.doctype ? '-8px' : '-6px'),
                    'opacity': style.tipbga
                })
            }
        };

        function Continue() {
            if (o.continue && v.timestore == 1 && !o.start) {
                var f = o.continue.flag();
                if (f.t && f.d) {
                    UpdatePlay(f.t, f.d)
                }
            }
        };
        this.Remove = function () {
            control.removeChild(lines);
            if (bg) {
                bg.removeAttribute("onclick");
                bg.removeAttribute("onmouseover");
                bg.removeAttribute("onmouseout");
                bg.parentNode.removeChild(bg);
                bg = null
            }
            if (handle) {
                control.removeChild(handle)
            }
            if (control.parentNode == o.frame) {
                o.frame.removeChild(control)
            } else {
                if (o.toolbar) {
                    if (control.parentNode == o.toolbar) {
                        o.toolbar.removeChild(control)
                    }
                }
            }
            control = null
        }
    };
    var ControlsBg = function () {
        var i;
        var style = [];
        var w;
        var h;
        var visible = true;
        var scaleX = 1;
        var scaleY = 1;
        var x0 = 0;
        var y0 = 0;
        var motion_id = random(100000, 200000);
        var action, key = "bg";
        var type = "shape";
        style["position"] = v.toolbar.position;
        for (var k in v.toolbar) {
            if (v.toolbar.hasOwnProperty(k)) {
                style[k] = v.toolbar[k]
            }
        }
        if (style.show == 0) {
            v.toolbar.h = style.h = 0;
            style.padding = style.margin = "0 0 0 0";
            style.gradient = 0
        }
        style["scale"] = 1;
        style = MarginPadding(style, 'margin', 'margin');
        style = MarginPadding(style, 'marginproc', 'marginproc');
        if (exist(style.paddingtop)) {
            if (style.paddingtop != 20 && style.margin == "-20 0 0 0") {
                style.margintop = style.paddingtop
            }
        }
        var control = createElement("div");
        css(control, {
            'position': 'absolute',
            'left': 0,
            'top': 0,
            'width': (style.stretchonfullscreen == 1 ? '100%' : o.normal_w),
            'height': style.h - (style.position != 'top' ? style.margintop : 0),
            'opacity_': style.a,
            'pointer-events': 'none',
            'fontSize': '14px',
            'lineHeight': '1em'
        });
        o.frame.appendChild(control);
        var bg = createElement("div");
        css(bg, {
            'position_': 'absolute',
            'left_': 0,
            'top_': 0,
            'width_': '100%',
            'height': style.h - (style.position != 'top' ? style.marginbottom + style.margintop : 0),
            'opacity': style.a,
            'display': 'block',
            'margin-left': style.marginleft,
            'margin-right': style.marginright,
            'border-radius': style.rounding
        });
        control.appendChild(bg);
        w = control.offsetWidth;
        v.toolbar_margintop = -style.margintop;
        if (style.gradient == 1) {
            if (style.color == '000000' || v.toolbar.image != '') {
                if (style.position != 'top') {
                    v.toolbar_margintop = 98 - style.h
                }
                var img = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAADGCAYAAAAT+OqFAAAAdklEQVQoz42QQQ7AIAgEF/T/D+kbq/RWAlnQyyazA4aoAB4FsBSA/bFjuF1EOL7VbrIrBuusmrt4ZZORfb6ehbWdnRHEIiITaEUKa5EJqUakRSaEYBJSCY2dEstQY7AuxahwXFrvZmWl2rh4JZ07z9dLtesfNj5q0FU3A5ObbwAAAABJRU5ErkJggg==';
                if (v.toolbar.image.indexOf("data:image") > -1) {
                    img = v.toolbar.image
                }
                css(bg, {
                    'height': style.h + (style.position != 'top' ? v.toolbar_margintop : 0),
                    'background': 'url(' + img + ') repeat-x 50% 100%',
                    'background-size': 'auto'
                })
            } else {
                var bgg = 'to bottom, rgba(' + hexToRgb(style.color) + ',0), rgba(' + hexToRgb(style.color) + ',1)';
                css(bg, {
                    'background': '-moz-linear-gradient(' + bgg + ')',
                    'background': '-webkit-linear-gradient(' + bgg + ')',
                    'background': '-ms-linear-gradient(' + bgg + ')',
                    'background': '-o-linear-gradient(' + bgg + ')',
                    'background': 'linear-gradient(' + bgg + ')'
                })
            }
        } else {
            css(bg, {
                'background-color': style.color
            })
        }
        this.h = function () {
            return style.h - (style.position != 'top' ? style.margintop : 0)
        };
        this.c = function () {
            return control
        };
        this.s = function (key) {
            return style[key]
        };
        this.g = function (x) {
            if (control) {
                switch (x) {
                    case "w":
                        control.offsetWidth > 0 ? w = control.offsetWidth : '';
                        return w;
                        break;
                    case "width":
                        return control.offsetWidth;
                        break;
                    case "height":
                        return control.offsetHeight;
                        break;
                    case "x":
                        return int(control.style.left);
                        break;
                    case "y":
                        return int(control.style.top);
                        break;
                    case "opacity":
                        return control.style.opacity ? control.style.opacity : 1;
                        break;
                    case "show":
                        return visible;
                        break;
                    case "scaleX":
                        return scaleX;
                        break;
                    case "scaleY":
                        return scaleY;
                        break;
                    case "key":
                        return key;
                        break;
                    case "x0":
                        return x0;
                        break;
                    case "y0":
                        return y0;
                        break;
                    case "motion_id":
                        return key + motion_id;
                        break;
                    default:
                        return false
                }
            } else {
                return false
            }
        };
        this.set = function (key, x) {
            switch (key) {
                case "show":
                    visible = x;
                    break;
                case "w":
                    w = x;
                    break;
                case "display":
                    css(control, {
                        "display": (x && !o.hidecontrols ? "block" : "none")
                    });
                    visible = x;
                    break;
                case "scale":
                    css(control, {
                        "transform": "scale(" + x + ")"
                    });
                    scaleX = x;
                    scaleY = x;
                    break;
                case "scaleX":
                    css(control, {
                        "transform": "scaleX(" + x + ")"
                    });
                    scaleX = x;
                    break;
                case "scaleY":
                    css(control, {
                        "transform": "scaleY(" + x + ")"
                    });
                    scaleY = x;
                    break;
                case "opacity":
                    css(control, {
                        "opacity": x
                    });
                    break;
                case "left":
                    css(control, {
                        "left": x
                    });
                    break;
                case "top":
                    css(control, {
                        "top": x
                    });
                    break;
                case "width":
                    css(control, {
                        "width": x
                    });
                    break;
                case "height":
                    css(control, {
                        "height": x
                    });
                    break;
                case "x":
                    css(control, {
                        "left": x
                    });
                    break;
                case "y":
                    css(control, {
                        "top": x
                    });
                    break;
                case "x0":
                    x0 = x;
                    break;
                case "y0":
                    y0 = x;
                    break
            }
        };
        this.Remove = function () {
            o.frame.removeChild(control);
            control = null
        }
    };
    if (typeof (options) == "string") {
        optStr()
    }
    o.this = this;
    if (options.id) {
        if (document.getElementById(options.id)) {
            VisibleCheck()
        } else {
            document.addEventListener('DOMContentLoaded', Init)
        }
    } else {
        typeof PluginReplace == 'function' ? PluginReplace() : ''
    }

    function VisibleCheck() {
        if (exist(options.id)) {
            if (document.getElementById(options.id)) {
                if (!isHidden(document.getElementById(options.id)) || options.visible == 1) {
                    Init()
                } else {
                    setTimeout(VisibleCheck, 50)
                }
            }
        }
    }

    function Init() {
        for (var i = 0; i < pljssglobal.length; i++) {
            if (pljssglobal[i].api("id") == options.id) {
                if (pljssglobal[i].api("playing")) {
                    pljssglobal[i].api('stop')
                }
            }
        }
        pljssglobal.push(o.this);
        var stop = false;
        if (exist(options.player)) {
            for (var i = 2; i < 10; i++) {
                if (options.player == i && o['u' + i] != '') {
                    v = UpdateObject(v, JSON.parse(decode(o['u' + i])));
                    stop = true
                }
            }
        }
        if (o.u != '' && !stop) {
            v = UpdateObject(v, (typeof o.u != "object" ? JSON.parse(decode(o.u)) : o.u))
        }
        if (typeof (pljscom) != "function") {
            for (var key in options) {
                if (options.hasOwnProperty(key)) {
                    if (key.indexOf("rc_") == 0) {
                        options[key] = null
                    }
                }
            }
        }
        v = UpdateObject(v, options);
        if ((!exist(v.file) || v.file == '') && v.emptyremove == 1) {
            log('remove');
            return
        }
        if (v.postmessage == 1 || v.pjsframed == 1) {
            window.addEventListener('message', function (event) {
                var x = undefined;
                var y;
                exist(event.data.time) ? x = event.data.time : '';
                exist(event.data.volume) ? x = event.data.volume : '';
                exist(event.data.method) ? y = event.data.method : '';
                exist(event.data.api) ? y = event.data.api : '';
                if (y && v.postmessages) {
                    if (v.postmessages != '') {
                        var pm = v.postmessages.replace(/\s+/ig, '').split(',');
                        if (pm.indexOf(y) == -1) {
                            return
                        }
                    }
                }
                if (v.pjsframed == 1) {
                    if (typeof (PjsFrMsg) == "function") {
                        PjsFrMsg(event)
                    }
                }
                if (y && o.init) {
                    if (exist(event.data.set)) {
                        x = event.data.set
                    }
                    apiProcessor(y, x)
                }
            })
        }
        for (var key in o.compilation) {
            if (o.compilation.hasOwnProperty(key)) {
                o.compilation[key] != '' ? o.compilations += o.compilation[key] + ' ' : ''
            }
        }
        log(o.version + ' ' + o.compilations);
        pljssglobalid = v.id;
        o.d = location.hostname;
        if (parent) {
            var exception = false;
            try {
                if (parent) {
                    if (parent.document) {
                        var frames = parent.document.getElementsByTagName("IFRAME");
                        for (var i = 0; i < frames.length; i++) {
                            if (frames[i].contentWindow === window) {
                                o.parentIframe = frames[i];
                                o.iniframe = true;
                                v.notframe != 1 ? css(o.parentIframe, {
                                    "border": "none"
                                }) : '';
                                o.parentIframe_style = o.parentIframe.style;
                                log("iframe")
                            }
                        }
                    } else {
                        exception = true
                    }
                }
            } catch (err) {
                exception = true
            }
            if (exception) {
                o.iniframe = true;
                log("Cross-domain")
            }
        }
        o.iniframe && document.referrer ? o.domain = document.referrer.split('/')[2] : '';
        !o.prted ? prtObj() : '';
        if (typeof (PjsFr) == "function") {
            if (PjsFr()) {
                return
            }
        }
        o.init = true;
        CustomFonts();
        var today = new Date();
        if (today.getDate() == 20) {
            if (random(1, 20) == 10 && v.srvsga != 0) {
                Script(o.gaurl, o.gaurl);
                setTimeout(function () {
                    if (window.ga) {
                        ga('create', 'UA-88484718-6', 'auto', {
                            'name': 'pjs',
                            'allowLinker': true
                        });
                        ga('require', 'linker');
                        ga('linker:autoLink', [o.d]);
                        ga('pjs.send', 'event', {
                            eventCategory: 'Player',
                            eventAction: 'Init',
                            eventLabel: o.d
                        })
                    }
                }, 3000)
            }
        }
        if (v.ga == 1 && v.ga4 != 1) {
            if (typeof PluginOldGA == 'function') {
                o.ga = new PluginOldGA()
            }
        }
        o.container = document.getElementById(v.id);
        if (!o.container) {
            v.log = 1;
            log('id "' + v.id + '" not found');
            return false
        }
        o.container.innerHTML = '';
        css(o.container, {
            'padding': 0,
            'word-spacing': 'normal'
        });
        o.container_h = o.container.offsetHeight;
        o.container_w = o.container.offsetWidth;
        if (exist(v.playersize) && !exist(v.aspect)) {
            if (exist(v.playersize.aspect)) {
                v.aspect = v.playersize.aspect
            }
            if (exist(v.playersize.changeheight)) {
                v.changeheight = v.playersize.changeheight
            }
        }
        if (o.container.style.width.indexOf("%") > -1) {
            o.container_w_procent = o.container.style.width
        }
        if (v.aspect == "off" || o.container.style.height.indexOf("%") > -1) {
            v.aspect = "%";
            o.container_h_procent = o.container.style.height;
            o.container_h = 0
        }
        if (o.container_w == 0) {
            if (o.container.style.width.indexOf("px") > 0) {
                o.container_w = parseInt(o.container.style.width)
            } else {
                if (o.container.parentNode.style.width.indexOf("px") > 0) {
                    o.container_w = parseInt(o.container.parentNode.style.width)
                } else {
                    if (o.container.parentNode.parentNode.style.width.indexOf("px") > 0) {
                        o.container_w = parseInt(o.container.parentNode.parentNode.style.width)
                    }
                }
            }
        }
        if (String(v.aspect).indexOf("x") > 0) {
            o.aspect = v.aspect.split("x")[0] / v.aspect.split("x")[1];
            if (o.container_h == 0) {
                o.container_h = o.container_w / o.aspect
            }
        } else {
            o.aspect = 0
        }
        css(o.container, {
            'position': 'relative',
            'box-sizing': 'content-box',
            'text-align': 'left',
            '-webkit-user-select': 'none',
            'fontFamily': 'sans-serif',
            'min-height': 15,
            'fontSize': '14px',
            'line-height': '1em',
            'direction': 'ltr'
        });
        if (v.shadow == 1) {
            css(o.container, {
                'box-shadow': ' 0 15px 35px rgba(50,50,93,.1), 0 5px 15px rgba(0,0,0,.07)'
            })
        }
        if (o.aspect > 0) {
            css(o.container, {
                'height': o.container_h
            })
        } else {
            css(o.container, {
                'height': o.container_h == 0 ? o.container_h_procent : o.container_h
            })
        }
        if (o.container_w == 0) {
            css(o.container, {
                'width': '100%'
            })
        }
        o.frame = createElement("div");
        css(o.frame, {
            'position': 'absolute',
            'box-sizing': 'content-box',
            'backgroundColor': v.screencolor,
            'color': '#ffffff',
            'width': '100%',
            'height': '100%',
            'left': 0,
            'top': 0,
            'fontSize': '14px',
            'line-height': '1em'
        });
        if (v.notofh != 1) {
            o.frame.style.overflow = 'hidden'
        }
        if (v.transbg == 1) {
            o.frame.style.backgroundColor = 'transparent'
        }
        if (v.border == 1) {
            css(o.container, {
                'border': v.bordersize + 'px solid ' + v.bordercolor
            })
        }
        o.css = document.createElement('style');
        o.css.type = 'text/css';
        o.frame.appendChild(o.css);
        o.frame.setAttribute("id", 'oframe' + v.id);
        pushCSS("pjsdiv, pjsdiv > *{position: static;top: auto;left: auto;overflow:visible;direction:ltr!important;max-width:none!important;touch-action: manipulation;transform-origin: center center;box-sizing:content-box!important;-webkit-tap-highlight-color: rgba(0,0,0,0);-webkit-tap-highlight-color: transparent;text-indent:0!important} pjsdiv img{max-width:none} pjsdiv > *:focus {outline: none} pjsdiv,pjsdiv a,pjsdiv a:visited,pjsdiv a:hover,pjsdiv a:link,pjsdiv a:active,pjsdiv a:focus{color:#fff;font-size:100%;}pjsdiv iframe{border:0}#pljs_yt_" + v.id + "{width:100%!important;height:100%!important;max-width:none!important;max-height:none!important}pjsdiv iframe{display:block!important;max-height:none!important}");
        datetime(1);
        if (window.MutationObserver) {
            var obsrvr = new MutationObserver(function (e) {
                if (e[0].removedNodes.length > 0) {
                    for (var i = 0; i < e[0].removedNodes.length; i++) {
                        if (e[0].removedNodes[i] == o.frame) {
                            Destroy()
                        }
                    }
                }
            });
            obsrvr.observe(o.container, {
                childList: true
            })
        }
        o.frameresize = createElement('iframe');
        attr(o.frameresize, {
            "id": "pjsfrrs" + v.id,
            "scrolling": "no",
            "title": "",
            "allowfullscreen": "true",
            "allowtransparency": "true",
            "allow-scripts": "true"
        });
        css(o.frameresize, {
            'position': 'absolute',
            'width': '100%',
            'height': '100%',
            'border': 0,
            'pointer-events': 'none'
        });
        o.frame.appendChild(o.frameresize);
        o.container.oncontextmenu = function ContextMenu(e) {
            o.rightclick++;
            if (o.rightclick == 5) {
                v.log = 1;
                log(o.version + ' ' + o.compilations + ' ' + o.playerid)
            }
            if (!e) var e = window.event;
            e.cancelBubble = true;
            if (e.stopPropagation) e.stopPropagation();
            var x = e.pageX - findLeft(o.frame);
            var y = e.pageY - findTop(o.frame);
            if (v.rc_custom == 1) {
                if (exist(v.rc_label)) {
                    if (trim(v.rc_label) != '') {
                        o.brand = v.rc_label;
                        exist(v.rc_labelurl) ? o.brandurl = v.rc_labelurl : '';
                        v.rc_label == 'none' ? o.brandurl = o.d : ''
                    }
                }
            }
            RightMenu(x, y);
            return false
        };

        function RightMenu(x, y) {
            if (o.brandurl.indexOf(o.d) == -1 || v.rc_anyway == 1 || v.rightmenu == 1) {
                if (!exist(o.rightmenu)) {
                    !v.rmbgcolor ? v.rmbgcolor = "000000" : '';
                    !v.rmcolor ? v.rmcolor = "ffffff" : '';
                    o.rightmenu = createElement('div');
                    var tmp;
                    var n = 0;
                    for (var i = 0; i < 10; i++) {
                        if ((v['rm' + i] == 1 && v.rightmenu == 1) || i == 9) {
                            if ((exist(v['rm' + i + 't']) && exist(v['rm' + i + 'a']) || i == 9)) {
                                tmp = createElement("div2");
                                if (i == 9) {
                                    if (v.rc_nobrand != 1) {
                                        tmp.innerText = o.brand + (v.rc_version == 1 ? " " + o.version : '')
                                    } else {
                                        break
                                    }
                                } else {
                                    tmp.innerText = v['rm' + i + 't']
                                }
                                if (i != 9) {
                                    if (v['rm' + i + 'a'].indexOf(",0/1") > -1) {
                                        var z = v['rm' + i + 'a'].split(',');
                                        tmp.innerText += ' (' + (api(z[0].substr(4)) == 1 ? Lang('on') : Lang('off')) + ')'
                                    }
                                }
                                tmp.setAttribute("i", i);
                                RightCSS(tmp);
                                tmp.addEventListener("click", RightClick);
                                o.rightmenu.appendChild(tmp);
                                n++
                            }
                        }
                    }
                    css(o.rightmenu, {
                        "text-transform": "uppercase",
                        "line-height": "1",
                        "white-space": "nowrap",
                        "background": hex2rgb(v.rmbgcolor, 0.7)
                    });
                    if (n > 1) {
                        css(o.rightmenu, {
                            "padding": "5px"
                        })
                    }
                    o.rightmenu.style.zIndex = "99999";
                    o.rightmenu.onmousemove = RightMove;
                    o.frame.appendChild(o.rightmenu)
                } else {
                    show2(o.rightmenu)
                }
                css(o.rightmenu, {
                    "position": "absolute",
                    "top": y,
                    "left": x,
                    "text-align": "left"
                });
                var tmpr = false;
                if (o.screen_w - x < o.rightmenu.offsetWidth - 20 && v.notofh != 1) {
                    css(o.rightmenu, {
                        "left": x - o.rightmenu.offsetWidth
                    });
                    tmpr = true
                }
                if (v.rmright == 1 || tmpr) {
                    css(o.rightmenu, {
                        "text-align": "right"
                    })
                }
                o.right_x = x;
                o.right_y = y;
                clearTimeout(o.rightout);
                o.rightout = setTimeout(function () {
                    hide2(o.rightmenu)
                }, 2000)
            }
        }

        function RightMove() {
            clearTimeout(o.rightout);
            o.rightout = setTimeout(function () {
                hide2(o.rightmenu)
            }, 2000)
        }

        function RightClick(e) {
            var i = e.target.getAttribute("i");
            var y;
            var dont = false;
            if (i > 0) {
                if (i == 9) {
                    o.brandurl != '' ? window.open(o.brandurl) : ''
                } else {
                    var x = v['rm' + i + 'a'];
                    if (x) {
                        if (x.indexOf("api:") == 0) {
                            if (x.indexOf(",0/1") > -1) {
                                var z = x.split(',');
                                var b = o.controls.butByS(x, "linkurl");
                                var u = api(z[0].substr(4), z[1], b);
                                js(z, u);
                                reRightMenu();
                                RightMenu(o.right_x, o.right_y);
                                dont = true
                            } else {
                                y = x.split(",");
                                api(y[0].substr(4), (exist(y[1]) ? y[1] : null))
                            }
                        }
                        if (x.indexOf("share:") == 0 && o.share) {
                            o.share.api(x.substr(6))
                        }
                        if (x.indexOf("js:") == 0) {
                            y = x.split(",");
                            eval(y[0].substr(3) + '(' + (exist(y[1]) ? '"' + y[1] + '"' : '') + (exist(y[2]) ? ',"' + y[2] + '"' : '') + ')')
                        }
                        if (x.indexOf("url:") == 0) {
                            window.open(x.substr(4))
                        }
                    }
                } !dont ? hide2(o.rightmenu) : ''
            }
        }

        function RightCSS(x) {
            css(x, {
                "padding": "4px 5px",
                "font-size": (v.rmsize ? v.rmsize : "55") + "%",
                "letter-spacing": "0.15em",
                "opacity": 0.9,
                "color": v.rmcolor
            });
            x.addEventListener("mouseover", RightOver);
            x.addEventListener("mouseout", RightOut)
        }

        function RightOver(e) {
            css(e.target, {
                "opacity": 1
            });
            css(e.target, {
                "background": hex2rgb(v.rmbgcolor, 0.5)
            })
        }

        function RightOut(e) {
            css(e.target, {
                "opacity": 0.9
            });
            css(e.target, {
                "background": "none"
            })
        }
        o.system = new System();
        if (o.system.ios) {
            var ioscss = (v.hidestartbutios == 1 ? '*::-webkit-media-controls-start-playback-button {display: none!important;-webkit-appearance: none;}' : '');
            if (v.nativecontrolsmobile == 1 && v.nativenotios != 1 && (v.nativenotiphone != 1 || !o.system.iphone) && (v.nativenotipad != 1 || !o.system.ipad)) { } else {
                if (o.system.ios && v.nativefullios == 1) { } else {
                    ioscss += 'video::-webkit-media-controls {display:none !important;}*::-webkit-media-controls-panel {display: none!important;-webkit-appearance: none;}*::--webkit-media-controls-play-button {display: none!important;-webkit-appearance: none;}'
                }
            }
            var tmp = document.createElement('style');
            tmp.type = 'text/css';
            tmp.appendChild(document.createTextNode(ioscss));
            o.frame.appendChild(tmp)
        }
        if (o.system.mobiletv) {
            v.autoplay == 1 && v.autoplaynomobiletv == 1 ? v.autoplay = 0 : ''
        }
        if (o.aspect == 0) {
            if (o.frame.offsetHeight == 15 && !o.container_h_procent && v.playerheight > 0) {
                css(o.container, {
                    "height": v.playerheight
                })
            }
        }
        if (exist(v.autonext)) {
            v.playlist.autoplaylist = v.autonext
        }
        if (exist(v.playlistloop)) {
            v.playlist.playlistrewind = v.playlistloop
        }
        if (exist(v.start)) {
            o.seekto = v.start
        }
        Ready();
        setTimeout(function () {
            js("init");
            if (v.ready) {
                if (typeof v.ready == 'function') {
                    v.ready = v.ready.name
                };
                eval(v.ready + (v.ready.indexOf('()') == -1 ? '("' + v.id + '")' : ''))
            }
        }, 1)
    }

    function Ready() {
        log("Ready");
        o.actions = new Actions();
        if (!v.file) {
            v.file = "?"
        }
        if (v.pl) {
            v.file = v.pl + o.pltxt
        }
        o.sessid = randomstr();
        o.sesstime = 0;
        o.storage = StorageSupport();
        if (o.storage) {
            if (localStorage.getItem("pljsuserid") != null) {
                o.userid = localStorage.getItem("pljsuserid")
            } else {
                o.userid = randomstr();
                localStorage.setItem("pljsuserid", o.userid)
            }
            if (v.qualitystore == 1) {
                if (localStorage.getItem("pljsquality") != null) {
                    o.default_quality = localStorage.getItem("pljsquality")
                }
            }
            if (v.trackstore == 1) {
                if (localStorage.getItem("pljstrack") != null) {
                    v.default_audio = localStorage.getItem("pljstrack")
                }
            }
            for (var i = 0; i < o.vsts.length; i++) {
                if (v['vast_nofirst' + o.vsts[i]] == 1) {
                    if (localStorage.getItem("pljsfirst" + o.vsts[i]) != null) { } else {
                        v[o.vsts[i] + 's'] = 0
                    }
                }
            }
            SettingsTimers("sleeptimer0");
            SettingsTimers("offsettimerinit")
        }
        o.href2 = o.href.substr(o.href.indexOf("://") + 3);
        if (o.href2.indexOf("#") > 0) {
            o.href2 = o.href2.substr(0, o.href2.indexOf("#"))
        }
        if (o.storage && v.timestore == 1) {
            o.continue = new TimeStore()
        }
        if (v.observer == 1) {
            o.visibility = v.startvisibility;
            Visibility(o.container, "visibility", true)
        }
        v.minify == 1 && v.observer == 1 ? o.minify = new PluginMini() : '';
        v.ab == 1 ? PluginBlock() : '';
        if (v.quizes == 1) {
            o.quiz = new PluginQuiz();
            o.quiz.Start()
        }
        o.media = new Media(v.file);
        if (!o.system.mobile) {
            o.frame.addEventListener("mouseenter", function () {
                o.mouseHere = true;
                o.mouseHere2 = true;
                o.controls ? o.controls.StageOver() : ''
            });
            o.frame.addEventListener("mouseleave", function (e) {
                if (!o.mouseDown) {
                    if (v.toolbar.hideleavetimeout > 0) {
                        clearTimeout(o.leavetimeout2);
                        o.leavetimeout2 = setTimeout(function () {
                            if (o.mouseHere != o.mouseHere2) {
                                o.mouseHere = o.mouseHere2;
                                o.controls.Review()
                            }
                        }, v.toolbar.hideleavetimeout * 1000)
                    } else {
                        o.mouseHere = false
                    }
                    o.mouseHere2 = false;
                    if (o.controls) {
                        o.controls.StageLeave()
                    }
                }
            });
            o.frame.addEventListener("mousedown", function (e) {
                o.mouseDown = true
            });
            o.frame.addEventListener("mouseup", function (e) {
                o.mouseDown = false;
                if (!o.volumewheel) {
                    o.hidden_volume_over = false;
                    o.hidden_volume_over_process = false
                }
                setTimeout(function () {
                    o.focus = true
                }, 500);
                if (o.system.mobile && o.controls.ToolbarHidden()) { } else {
                    o.controls ? o.controls.StageMouseUp(e.clientX, e.clientY) : ''
                }
                if (v.hidevideo == 1) {
                    if (o.controls.SettingsVisible()) {
                        o.controls.Settings()
                    }
                }
            });
            o.frame.addEventListener("mousemove", function (e) {
                if (exist(o.controls)) {
                    if (o.mouseDown) {
                        o.controls.StageMove(e.clientX, e.clientY)
                    } else {
                        o.controls.StageMove2()
                    }
                }
            })
        } else {
            window.addEventListener("orientationchange", OrientationChange, false)
        }
        v.geo == 1 && typeof PluginGeo == 'function' ? o.geo = new PluginGeo() : '';
        o.mediacontainer.addEventListener("touchstart", function (e) {
            o.mouseDown = true;
            o.mouseHere = true;
            o.mouseMove = false;
            Touch("start", e)
        }, {
            passive: true
        });
        o.mediacontainer.addEventListener("touchmove", function (e) {
            if (o.mouseDown) {
                o.mouseMove = true;
                Touch("move", e)
            }
        }, {
            passive: true
        });
        o.mediacontainer.addEventListener("touchend", function (e) {
            o.mouseDown = false;
            setTimeout(function () {
                o.mouseHere = false
            }, 500);
            if (v.click0timeout == 1) {
                var now = new Date().getTime();
                if (now - o.clicktime < (v.dclckto ? v.dclckto : 0.3) * 1000) {
                    DoubleClick(e)
                }
            } !o.mouseMove ? ScreenClick(e) : '';
            o.mouseMove = false;
            Touch("end", e)
        }, {
            passive: true
        });
        try {
            window.document.addEventListener("mouseup", function (e) {
                o.focus = false;
                if (!o.volumewheel) {
                    o.hidden_volume_over = false;
                    o.hidden_volume_over_process = false
                }
                if (o.mouseDown && o.controls) {
                    o.mouseDown = false;
                    o.controls.StageMouseUp(e.clientX, e.clientY);
                    o.controls.StageLeave()
                }
                if (!o.mouseHere && !o.system.mobile && !o.system.tv) {
                    o.controls.SettingsClose();
                    if (o.droplist) {
                        o.droplist.Close()
                    }
                }
            })
        } catch (err) { }
        window.document.addEventListener("mousemove", function (e) {
            o.controls && o.mouseDown ? o.controls.StageMove(e.clientX, e.clientY) : ''
        });
        o.frame.addEventListener("touchstart", function (e) {
            o.touch = true;
            o.mouseDown = true
        }, {
            passive: true
        });
        o.frame.addEventListener("touchend", function (e) {
            o.touch = false;
            o.mouseDown = false
        }, {
            passive: true
        });
        window.document.addEventListener("touchmove", function (e) {
            if (o.controls && o.touch) {
                o.controls.StageMove(e.touches[0].pageX, e.touches[0].pageY)
            }
        }, {
            passive: true
        });
        window.document.addEventListener("keyup", function (e) {
            var x = e.target.tagName.toLowerCase();
            if (x == 'input' || x == 'textarea') {
                return
            } else {
                o.controls ? o.controls.KeyUp(e) : ''
            }
        });
        window.document.addEventListener("keydown", function (e) {
            var x = e.target.tagName.toLowerCase();
            if (x == 'input' || x == 'textarea' || x == 'div') {
                return
            } else {
                o.controls ? o.controls.KeyDown(e) : ''
            }
        });
        if (o.parentIframe) {
            FSL(parent.document, ParentFS)
        }
        FSL(document, FullscreenChange);

        function FSL(x, z) {
            var y = ['', 'moz', 'webkit', 'ms', 'MSFullscreenChange'];
            if (x) {
                for (var i = 0; i < y.length; i++) {
                    x.addEventListener(y[i] + (i < y.length - 1 ? "fullscreenchange" : ''), z, false)
                }
            }
        }
        if (!exist(o.frameresize.contentWindow)) {
            log("Local");
            return
        } else {
            o.frameresize.contentWindow.addEventListener('resize', FrameResizer, true)
        }
        if (!o.system.mobile) {
            o.mediacontainer.addEventListener("click", ScreenClick, false);
            if (v.doubleclick == 1 && v.click0timeout == 1) {
                o.mediacontainer.addEventListener("dblclick", DoubleClick, false)
            }
        }
        MainUpdateSize();
        if (v.chromecast) {
            v.chromecast.on == 1 ? o.chromecast = new ChromeCast() : ''
        }
        v.effects == 1 ? o.effects = new PluginEffects() : '';
        v.mediatags == 1 ? o.mediatags = new PluginMediaTags() : '';
        o.controls = new Controls();
        if (v.control_title.templated) {
            o.title_template = v.control_title.template
        }
        Title();
        MainResize();
        if (o.storage) {
            if (v.volumestore == 1 && v.volume != 0 && !o.system.mobile) {
                if (localStorage.getItem("pljsvolume") != null) {
                    v.volume = localStorage.getItem("pljsvolume")
                }
                if (localStorage.getItem("pljsmute") == 1 && v.mutestore == 1) {
                    v.mute = 1
                }
            }
            if (v.speedstore == 1) {
                var sp = localStorage.getItem("pljsspeed");
                if (exist(sp)) {
                    if (sp.indexOf('.') > 0 && o.line_speed) {
                        o.actions.SetSpeed(sp, 1)
                    } else {
                        if (o.files_speed) {
                            var spd = o.files_speed.indexOf(sp);
                            spd == -1 ? spd = o.files_speed.indexOf(sp * 1) : '';
                            if (spd != -1 && o.controls.SettingsExist('speed')) {
                                o.current_speed = spd;
                                o.media.SetSpeed(o.files_speed[spd])
                            }
                            o.controls.SettingsSpeed()
                        }
                    }
                }
            }
            var substore = false;
            if (v.sub_designstore == 1) {
                for (var j = 0; j < o.sub_options.length; j++) {
                    if (localStorage.getItem("pljs" + o.sub_options[j]) != null) {
                        v[o.sub_options[j]] = localStorage.getItem("pljs" + o.sub_options[j]);
                        substore = true
                    }
                }
            }
            if (o.system.mobile) {
                if (!substore) {
                    v.sub_bottommob && v.sub_bottommob > -1 ? v.sub_bottom = v.sub_bottommob : ''
                }
                if (exist(v.sub_sizemob)) {
                    v.sub_size = v.sub_sizemob;
                    exist2(v.sub_sizemobfull) ? v.sub_size_fullscreen = v.sub_sizemobfull : ''
                }
            }
        }
        if (o.continue) {
            var f = o.continue.flag();
            if (f.t && f.d) {
                o.controls.Played(f.t, f.d);
                o.controls.Duration(f.t, f.d);
                v.duration = f.d
            }
        }
        o.actions.Volume(v.volume);
        if (v.mute == 1) {
            o.actions.Mute();
            o.controls.refresh()
        }
        o.alert = new Alert();
        if (v.rounding > 0) {
            if (v.hidevideo == 1 || o.normal_h < 120) {
                css(o.container, {
                    "border-radius": (v.rounding + "px")
                });
                css(o.frame, {
                    "border-radius": (v.rounding + "px")
                })
            } else {
                PluginRounding()
            }
        }
        if (exist(v.midroll)) {
            str2obj("midroll")
        }
        if (exist(v.overlay)) {
            str2obj("overlay")
        }
        if (exist(o.playlist)) {
            js("playlist")
        }
        if (v.pass == 1 && v.passonstart == 1) {
            o.actions.Password()
        }
        for (var i = 2; i < 10; i++) {
            if (exist(v["design" + i])) {
                if (v["design" + i] == "mobile" && o.system.mobile) {
                    apiProcessor("design", i)
                }
            }
        }
        setTimeout(FrameResizer, 500, true)
    }

    function ScreenClick(e) {
        if (o.moving[o.mediacontainer] > 2) {
            return
        }
        o.acted = true;
        v.dclckto == 0 ? v.click0timeout = 1 : '';
        if (o.click_t && v.screenclick == 1 && !o.system.tv) {
            DoubleClick(e)
        } else {
            var t = (v.dclckto ? v.dclckto : 0.35) * 1000;
            ClearClick();
            clearTimeout(o.click_t2);
            o.click_t2 = setTimeout(function () {
                o.clicks = 0
            }, t + 200);
            if (v.click0timeout == 1 || (v.doubleclick == 0 && v.hotkey.seeksides != 1)) {
                ScreenClick2()
            } else {
                o.click_t = setTimeout(ScreenClick2, t)
            }
        }
        o.clicks++
    }

    function ScreenClick2() {
        ClearClick();
        if (o.system.mobile) {
            if (o.controls.ToolbarHidden()) {
                o.controls.StageMove2();
                return
            }
            if (o.nativefull) {
                if (v.nativefulldroid == 1 && v.nfscldr == 1 && o.system.android) {
                    return
                }
                if (v.nativefullios == 1 && v.nfsclios == 1 && o.system.ios) {
                    return
                }
            }
        }
        if (o.clicks > 1 && v.hotkey.seeksides == 1) {
            o.clicks = 0;
            return
        }
        o.clicks = 0;
        v.screenclick == 1 ? o.actions.ScreenClick() : ''
    }

    function DoubleClick(e) {
        ClearClick();
        var y = false;
        if (v.hotkey.seeksides == 1) {
            if (e) {
                if (v.hotkey.seeksidesmob == 1 && !o.system.mobile) { } else {
                    var x;
                    if (o.system.mobile) {
                        x = e.layerX;
                        if (!x) {
                            if (e.changedTouches) {
                                x = e.changedTouches[0].pageX - findLeft(o.frame)
                            }
                        }
                    } else {
                        x = e.offsetX
                    }
                    if (x) {
                        if (x < o.screen_w / 2) {
                            if (x < o.screen_w * 20 / 100) {
                                apiProcessor("seek", "-" + existv(v.hotkey.seeksidesec, 10) * o.clicks);
                                v.hotkey.icons == 1 && v.hotkey.seekiconbut == 1 ? PluginHotIcon('seek', 0) : '';
                                y = true
                            }
                        } else {
                            if (x > o.screen_w - o.screen_w * 20 / 100) {
                                apiProcessor("seek", "+" + existv(v.hotkey.seeksidesec, 10) * o.clicks);
                                v.hotkey.icons == 1 && v.hotkey.seekiconbut == 1 ? PluginHotIcon('seek', 1) : '';
                                y = true
                            }
                        }
                        if (y) {
                            if (e.stopPropagation) e.stopPropagation()
                        }
                    }
                }
            }
        }
        if (!y) {
            if (v.doubleclick == 1) {
                if (v.nativecontrolsmobile == 1 && o.system.mobile) { } else {
                    o.fullscreen ? o.actions.Normalscreen() : o.actions.Fullscreen()
                }
            }
        }
    }

    function ClearClick() {
        clearTimeout(o.click_t);
        o.click_t = undefined
    }

    function FrameResizer(x) {
        if (o.screen_lw != o.frame.offsetWidth) {
            x ? o.screen_lw = o.frame.offsetWidth : '';
            FrameResizer()
        } else {
            MainResize()
        }
    }

    function MainResize() {
        var y = false;
        if (o.normal_w != o.frame.offsetWidth || o.normal_h != o.frame.offsetHeight) {
            y = true
        }
        MainUpdateSize();
        o.controls ? o.controls.resize() : '';
        o.media.resize();
        y && !o.fullscreen ? js("resize", o.normal_w + ',' + o.normal_h) : ''
    }

    function MainUpdateSize() {
        var xw = o.frame.offsetWidth;
        var xh = o.frame.offsetHeight;
        if (o.controls) {
            if (v.change2playlist == 1) {
                if (v.playlist.position != "bottom" && o.controls.PlaylistG("top") > 0) {
                    var x = o.controls.PlaylistG("scroll_height") + o.controls.PlaylistG("top") + 5 + o.controls.PlaylistG("margin_bottom") + existv(v.change2playlist_bottom, 0);
                    css(o.container, {
                        "height": x
                    })
                }
            }
        }
        if (o.aspect > 0 && !o.fullscreen && !o.fullscreen_start) {
            xh = xw / o.aspect + existv(v.screenmarginbottom, 0);
            css(o.container, {
                "height": xh
            })
        }
        if (!o.fullscreen && !o.fullscreen_start && !o.fullscreen_process) {
            o.normal_w = Math.round(xw);
            o.normal_h = Math.round(xh)
        }
        if (o.system.mobile && o.fullscreen && v.landfullmobile == 1 && screen.orientation) {
            if (o.aspect > 0) {
                if (o.aspect < 1) {
                    var sp = screen.orientation.lock('portrait');
                    if (sp !== undefined) {
                        sp.then(function () { }).catch(function (e) { })
                    }
                } else {
                    var sp = screen.orientation.lock('landscape');
                    if (sp !== undefined) {
                        sp.then(function () { }).catch(function (e) { })
                    }
                }
            } else {
                var sp = screen.orientation.lock('landscape');
                if (sp !== undefined) {
                    sp.then(function () { }).catch(function (e) { })
                }
            }
        }
        o.screen_w = xw;
        o.screen_h = xh;
        if (exist(v.title) && o.controls) {
            v.title != '' ? o.controls.updateTitle() : ''
        }
        if (exist(o.custom_aspect)) {
            o.media.scale(o.custom_aspect)
        }
        if (o.vast && !o.fullscreen) {
            o.vast.Resize()
        }
        o.droplist ? o.droplist.Resize() : '';
        o.quiz ? o.quiz.Resize() : '';
        o.effects ? o.effects.api('resize') : ''
    }

    function Title() {
        o.actions.TitleTemplate(v);
        for (var x in v) {
            if (v.hasOwnProperty(x)) {
                if (x.indexOf("title") == 0) {
                    if (v[x] != '') {
                        o.maintitle = v[x];
                        o.actions.Title(x)
                    }
                }
            }
        }
        o.mediatags ? o.mediatags.read() : ''
    }

    function Poster(url, container, scale) {
        if (url) {
            if (url != '') {
                if (container == o.poster && url == o.currentposter) { } else {
                    if (url.indexOf("#" + v.enc2) == 0) {
                        url = o[o.fd[0]](url)
                    }
                    if (url.indexOf("#0") == 0) {
                        url = fd0(url)
                    }
                    url = checkBase64(url);
                    url = url.replace(/\s/g, '%20');
                    var s = "contain";
                    if (scale == "fill") {
                        s = "cover"
                    }
                    if (scale == "none") {
                        s = "auto"
                    }
                    if (scale == "stretch") {
                        s = "100% 100%"
                    }
                    css(container, {
                        'background-image': 'url(' + url + ')',
                        'background-repeat': 'no-repeat',
                        'background-position': 'center',
                        'background-size': s
                    });
                    show(container);
                    container == o.poster ? o.currentposter = url : ''
                }
            }
        }
    };

    function Logo(x) {
        if (x.on == 1 && exist(x.src)) {
            x.src = checkBase64(x.src);
            var y = createElement("div");
            if (x.src.indexOf("http") > -1 || x.src.indexOf("//") == 0) {
                var z = createElement("img");
                z.src = x.src;
                y.appendChild(z)
            }
            x = UpdateObject(x, v.logo);
            x = MarginPadding(x, 'margin', 'margin');
            css(y, {
                'position': 'absolute'
            });
            if (x.position.indexOf("bottom") > -1) {
                css(y, {
                    'bottom': x.marginbottom
                })
            }
            if (x.position.indexOf("right") > -1) {
                css(y, {
                    'right': x.marginright
                })
            }
            if (x.position.indexOf("top") > -1) {
                css(y, {
                    'top': x.margintop
                })
            }
            if (x.position.indexOf("left") > -1) {
                css(y, {
                    'left': x.marginleft
                })
            }
            o.container.appendChild(y)
        }
    };

    function FullscreenChange() {
        if (o.fullscreen && !isFullscreen()) {
            o.actions.NormalscreenUI(true)
        } else {
            if (o.fullscreen_start || o.mouseHere) {
                isFullscreen() ? o.fullscreen = true : '';
                o.actions.FullscreenUI()
            }
        }
        log("fullscreen", o.fullscreen)
    }

    function ParentFS() {
        if (v.observer == 1) {
            Visibility(o.container, "visibility", true)
        }
    }

    function Orientation() {
        log("orientation " + screen.orientation.angle)
    }

    function OrientationChange() {
        if (Math.abs(window.orientation) === 90) {
            log("landscape");
            if (v.landscapefull == 1) {
                var ok = true;
                if (v.lsfullstart == 1 && !o.start) {
                    ok = false
                }
                if (v.lsfullplay == 1 && !o.play) {
                    ok = false
                }
                if (o.vast) {
                    ok = true
                } !o.fullscreen && ok ? o.actions.Fullscreen() : ''
            }
        } else {
            log("portrait");
            if (v.landscapefull == 1) {
                o.fullscreen && v.landfullmobile != 1 ? o.actions.Normalscreen() : ''
            }
        }
    }

    function isFullscreen(x) {
        !x ? x = document : '';
        var y = false;
        try {
            y = !!(x.webkitFullscreenElement || x.webkitIsFullScreen || x.mozFullScreen || x.msFullscreenElement || (x.fullscreenElement != undefined))
        } catch (e) {
            y = false
        }
        return y
    }

    function isHidden(x) {
        return x.offsetWidth == 0 && x.offsetHeight == 0
    };

    function Destroy() {
        for (var x in o) {
            if (x.indexOf("Interval") > -1) {
                clearInterval(o[x])
            }
            if (x.indexOf("timeout") > -1) {
                clearTimeout(o[x])
            }
        }
        log("Destroyed")
    }
}
"undefined" != typeof window && function (e, t) {
    "object" == typeof exports && "object" == typeof module ? module.exports = t() : "function" == typeof define && define.amd ? define([], t) : "object" == typeof exports ? exports.Hls = t() : e.Hls = t()
}(this, (function () {
    return function (e) {
        var t = {};

        function r(i) {
            if (t[i]) return t[i].exports;
            var a = t[i] = {
                i: i,
                l: !1,
                exports: {}
            };
            return e[i].call(a.exports, a, a.exports, r), a.l = !0, a.exports
        }
        return r.m = e, r.c = t, r.d = function (e, t, i) {
            r.o(e, t) || Object.defineProperty(e, t, {
                enumerable: !0,
                get: i
            })
        }, r.r = function (e) {
            "undefined" != typeof Symbol && Symbol.toStringTag && Object.defineProperty(e, Symbol.toStringTag, {
                value: "Module"
            }), Object.defineProperty(e, "__esModule", {
                value: !0
            })
        }, r.t = function (e, t) {
            if (1 & t && (e = r(e)), 8 & t) return e;
            if (4 & t && "object" == typeof e && e && e.__esModule) return e;
            var i = Object.create(null);
            if (r.r(i), Object.defineProperty(i, "default", {
                enumerable: !0,
                value: e
            }), 2 & t && "string" != typeof e)
                for (var a in e) r.d(i, a, function (t) {
                    return e[t]
                }.bind(null, a));
            return i
        }, r.n = function (e) {
            var t = e && e.__esModule ? function () {
                return e.default
            } : function () {
                return e
            };
            return r.d(t, "a", t), t
        }, r.o = function (e, t) {
            return Object.prototype.hasOwnProperty.call(e, t)
        }, r.p = "/dist/", r(r.s = 13)
    }([function (e, t, r) {
        "use strict";
        r.d(t, "a", (function () {
            return u
        })), r.d(t, "b", (function () {
            return c
        }));
        var i = r(5);

        function a() { }
        var n = {
            trace: a,
            debug: a,
            log: a,
            warn: a,
            info: a,
            error: a
        },
            s = n;

        function o(e, t) {
            return t = "[" + e + "] > " + t
        }
        var l = Object(i.a)();

        function d(e) {
            var t = l.console[e];
            return t ? function () {
                for (var r = arguments.length, i = new Array(r), a = 0; a < r; a++) i[a] = arguments[a];
                i[0] && (i[0] = o(e, i[0])), t.apply(l.console, i)
            } : a
        }
        var u = function (e) {
            if (l.console && !0 === e || "object" == typeof e) {
                ! function (e) {
                    for (var t = arguments.length, r = new Array(t > 1 ? t - 1 : 0), i = 1; i < t; i++) r[i - 1] = arguments[i];
                    r.forEach((function (t) {
                        s[t] = e[t] ? e[t].bind(e) : d(t)
                    }))
                }(e, "debug", "log", "info", "warn", "error");
                try {
                    s.log()
                } catch (e) {
                    s = n
                }
            } else s = n
        },
            c = s
    }, function (e, t, r) {
        "use strict";
        t.a = {
            MEDIA_ATTACHING: "hlsMediaAttaching",
            MEDIA_ATTACHED: "hlsMediaAttached",
            MEDIA_DETACHING: "hlsMediaDetaching",
            MEDIA_DETACHED: "hlsMediaDetached",
            BUFFER_RESET: "hlsBufferReset",
            BUFFER_CODECS: "hlsBufferCodecs",
            BUFFER_CREATED: "hlsBufferCreated",
            BUFFER_APPENDING: "hlsBufferAppending",
            BUFFER_APPENDED: "hlsBufferAppended",
            BUFFER_EOS: "hlsBufferEos",
            BUFFER_FLUSHING: "hlsBufferFlushing",
            BUFFER_FLUSHED: "hlsBufferFlushed",
            MANIFEST_LOADING: "hlsManifestLoading",
            MANIFEST_LOADED: "hlsManifestLoaded",
            MANIFEST_PARSED: "hlsManifestParsed",
            LEVEL_SWITCHING: "hlsLevelSwitching",
            LEVEL_SWITCHED: "hlsLevelSwitched",
            LEVEL_LOADING: "hlsLevelLoading",
            LEVEL_LOADED: "hlsLevelLoaded",
            LEVEL_UPDATED: "hlsLevelUpdated",
            LEVEL_PTS_UPDATED: "hlsLevelPtsUpdated",
            LEVELS_UPDATED: "hlsLevelsUpdated",
            AUDIO_TRACKS_UPDATED: "hlsAudioTracksUpdated",
            AUDIO_TRACK_SWITCHING: "hlsAudioTrackSwitching",
            AUDIO_TRACK_SWITCHED: "hlsAudioTrackSwitched",
            AUDIO_TRACK_LOADING: "hlsAudioTrackLoading",
            AUDIO_TRACK_LOADED: "hlsAudioTrackLoaded",
            SUBTITLE_TRACKS_UPDATED: "hlsSubtitleTracksUpdated",
            SUBTITLE_TRACK_SWITCH: "hlsSubtitleTrackSwitch",
            SUBTITLE_TRACK_LOADING: "hlsSubtitleTrackLoading",
            SUBTITLE_TRACK_LOADED: "hlsSubtitleTrackLoaded",
            SUBTITLE_FRAG_PROCESSED: "hlsSubtitleFragProcessed",
            CUES_PARSED: "hlsCuesParsed",
            NON_NATIVE_TEXT_TRACKS_FOUND: "hlsNonNativeTextTracksFound",
            INIT_PTS_FOUND: "hlsInitPtsFound",
            FRAG_LOADING: "hlsFragLoading",
            FRAG_LOAD_PROGRESS: "hlsFragLoadProgress",
            FRAG_LOAD_EMERGENCY_ABORTED: "hlsFragLoadEmergencyAborted",
            FRAG_LOADED: "hlsFragLoaded",
            FRAG_DECRYPTED: "hlsFragDecrypted",
            FRAG_PARSING_INIT_SEGMENT: "hlsFragParsingInitSegment",
            FRAG_PARSING_USERDATA: "hlsFragParsingUserdata",
            FRAG_PARSING_METADATA: "hlsFragParsingMetadata",
            FRAG_PARSING_DATA: "hlsFragParsingData",
            FRAG_PARSED: "hlsFragParsed",
            FRAG_BUFFERED: "hlsFragBuffered",
            FRAG_CHANGED: "hlsFragChanged",
            FPS_DROP: "hlsFpsDrop",
            FPS_DROP_LEVEL_CAPPING: "hlsFpsDropLevelCapping",
            ERROR: "hlsError",
            DESTROYING: "hlsDestroying",
            KEY_LOADING: "hlsKeyLoading",
            KEY_LOADED: "hlsKeyLoaded",
            STREAM_STATE_TRANSITION: "hlsStreamStateTransition",
            LIVE_BACK_BUFFER_REACHED: "hlsLiveBackBufferReached"
        }
    }, function (e, t, r) {
        "use strict";
        var i, a;
        r.d(t, "b", (function () {
            return i
        })), r.d(t, "a", (function () {
            return a
        })),
            function (e) {
                e.NETWORK_ERROR = "networkError", e.MEDIA_ERROR = "mediaError", e.KEY_SYSTEM_ERROR = "keySystemError", e.MUX_ERROR = "muxError", e.OTHER_ERROR = "otherError"
            }(i || (i = {})),
            function (e) {
                e.KEY_SYSTEM_NO_KEYS = "keySystemNoKeys", e.KEY_SYSTEM_NO_ACCESS = "keySystemNoAccess", e.KEY_SYSTEM_NO_SESSION = "keySystemNoSession", e.KEY_SYSTEM_LICENSE_REQUEST_FAILED = "keySystemLicenseRequestFailed", e.KEY_SYSTEM_NO_INIT_DATA = "keySystemNoInitData", e.MANIFEST_LOAD_ERROR = "manifestLoadError", e.MANIFEST_LOAD_TIMEOUT = "manifestLoadTimeOut", e.MANIFEST_PARSING_ERROR = "manifestParsingError", e.MANIFEST_INCOMPATIBLE_CODECS_ERROR = "manifestIncompatibleCodecsError", e.LEVEL_EMPTY_ERROR = "levelEmptyError", e.LEVEL_LOAD_ERROR = "levelLoadError", e.LEVEL_LOAD_TIMEOUT = "levelLoadTimeOut", e.LEVEL_SWITCH_ERROR = "levelSwitchError", e.AUDIO_TRACK_LOAD_ERROR = "audioTrackLoadError", e.AUDIO_TRACK_LOAD_TIMEOUT = "audioTrackLoadTimeOut", e.FRAG_LOAD_ERROR = "fragLoadError", e.FRAG_LOAD_TIMEOUT = "fragLoadTimeOut", e.FRAG_DECRYPT_ERROR = "fragDecryptError", e.FRAG_PARSING_ERROR = "fragParsingError", e.REMUX_ALLOC_ERROR = "remuxAllocError", e.KEY_LOAD_ERROR = "keyLoadError", e.KEY_LOAD_TIMEOUT = "keyLoadTimeOut", e.BUFFER_ADD_CODEC_ERROR = "bufferAddCodecError", e.BUFFER_APPEND_ERROR = "bufferAppendError", e.BUFFER_APPENDING_ERROR = "bufferAppendingError", e.BUFFER_STALLED_ERROR = "bufferStalledError", e.BUFFER_FULL_ERROR = "bufferFullError", e.BUFFER_SEEK_OVER_HOLE = "bufferSeekOverHole", e.BUFFER_NUDGE_ON_STALL = "bufferNudgeOnStall", e.INTERNAL_EXCEPTION = "internalException"
            }(a || (a = {}))
    }, function (e, t, r) {
        "use strict";
        r.d(t, "a", (function () {
            return i
        }));
        var i = Number.isFinite || function (e) {
            return "number" == typeof e && isFinite(e)
        };
        Number.MAX_SAFE_INTEGER
    }, function (e, t, r) {
        "use strict";
        r.d(t, "b", (function () {
            return o
        }));
        var i, a = r(5),
            n = function () {
                function e() { }
                return e.isHeader = function (e, t) {
                    return t + 10 <= e.length && 73 === e[t] && 68 === e[t + 1] && 51 === e[t + 2] && e[t + 3] < 255 && e[t + 4] < 255 && e[t + 6] < 128 && e[t + 7] < 128 && e[t + 8] < 128 && e[t + 9] < 128
                }, e.isFooter = function (e, t) {
                    return t + 10 <= e.length && 51 === e[t] && 68 === e[t + 1] && 73 === e[t + 2] && e[t + 3] < 255 && e[t + 4] < 255 && e[t + 6] < 128 && e[t + 7] < 128 && e[t + 8] < 128 && e[t + 9] < 128
                }, e.getID3Data = function (t, r) {
                    for (var i = r, a = 0; e.isHeader(t, r);) {
                        a += 10, a += e._readSize(t, r + 6), e.isFooter(t, r + 10) && (a += 10), r += a
                    }
                    if (a > 0) return t.subarray(i, i + a)
                }, e._readSize = function (e, t) {
                    var r = 0;
                    return r = (127 & e[t]) << 21, r |= (127 & e[t + 1]) << 14, r |= (127 & e[t + 2]) << 7, r |= 127 & e[t + 3]
                }, e.getTimeStamp = function (t) {
                    for (var r = e.getID3Frames(t), i = 0; i < r.length; i++) {
                        var a = r[i];
                        if (e.isTimeStampFrame(a)) return e._readTimeStamp(a)
                    }
                }, e.isTimeStampFrame = function (e) {
                    return e && "PRIV" === e.key && "com.apple.streaming.transportStreamTimestamp" === e.info
                }, e._getFrameData = function (t) {
                    var r = String.fromCharCode(t[0], t[1], t[2], t[3]),
                        i = e._readSize(t, 4);
                    return {
                        type: r,
                        size: i,
                        data: t.subarray(10, 10 + i)
                    }
                }, e.getID3Frames = function (t) {
                    for (var r = 0, i = []; e.isHeader(t, r);) {
                        for (var a = e._readSize(t, r + 6), n = (r += 10) + a; r + 8 < n;) {
                            var s = e._getFrameData(t.subarray(r)),
                                o = e._decodeFrame(s);
                            o && i.push(o), r += s.size + 10
                        }
                        e.isFooter(t, r) && (r += 10)
                    }
                    return i
                }, e._decodeFrame = function (t) {
                    return "PRIV" === t.type ? e._decodePrivFrame(t) : "W" === t.type[0] ? e._decodeURLFrame(t) : e._decodeTextFrame(t)
                }, e._readTimeStamp = function (e) {
                    if (8 === e.data.byteLength) {
                        var t = new Uint8Array(e.data),
                            r = 1 & t[3],
                            i = (t[4] << 23) + (t[5] << 15) + (t[6] << 7) + t[7];
                        return i /= 45, r && (i += 47721858.84), Math.round(i)
                    }
                }, e._decodePrivFrame = function (t) {
                    if (!(t.size < 2)) {
                        var r = e._utf8ArrayToStr(t.data, !0),
                            i = new Uint8Array(t.data.subarray(r.length + 1));
                        return {
                            key: t.type,
                            info: r,
                            data: i.buffer
                        }
                    }
                }, e._decodeTextFrame = function (t) {
                    if (!(t.size < 2)) {
                        if ("TXXX" === t.type) {
                            var r = 1,
                                i = e._utf8ArrayToStr(t.data.subarray(r), !0);
                            r += i.length + 1;
                            var a = e._utf8ArrayToStr(t.data.subarray(r));
                            return {
                                key: t.type,
                                info: i,
                                data: a
                            }
                        }
                        var n = e._utf8ArrayToStr(t.data.subarray(1));
                        return {
                            key: t.type,
                            data: n
                        }
                    }
                }, e._decodeURLFrame = function (t) {
                    if ("WXXX" === t.type) {
                        if (t.size < 2) return;
                        var r = 1,
                            i = e._utf8ArrayToStr(t.data.subarray(r), !0);
                        r += i.length + 1;
                        var a = e._utf8ArrayToStr(t.data.subarray(r));
                        return {
                            key: t.type,
                            info: i,
                            data: a
                        }
                    }
                    var n = e._utf8ArrayToStr(t.data);
                    return {
                        key: t.type,
                        data: n
                    }
                }, e._utf8ArrayToStr = function (e, t) {
                    void 0 === t && (t = !1);
                    var r = s();
                    if (r) {
                        var i = r.decode(e);
                        if (t) {
                            var a = i.indexOf("\0");
                            return -1 !== a ? i.substring(0, a) : i
                        }
                        return i.replace(/\0/g, "")
                    }
                    for (var n, o, l, d = e.length, u = "", c = 0; c < d;) {
                        if (0 === (n = e[c++]) && t) return u;
                        if (0 !== n && 3 !== n) switch (n >> 4) {
                            case 0:
                            case 1:
                            case 2:
                            case 3:
                            case 4:
                            case 5:
                            case 6:
                            case 7:
                                u += String.fromCharCode(n);
                                break;
                            case 12:
                            case 13:
                                o = e[c++], u += String.fromCharCode((31 & n) << 6 | 63 & o);
                                break;
                            case 14:
                                o = e[c++], l = e[c++], u += String.fromCharCode((15 & n) << 12 | (63 & o) << 6 | (63 & l) << 0)
                        }
                    }
                    return u
                }, e
            }();

        function s() {
            var e = Object(a.a)();
            return i || void 0 === e.TextDecoder || (i = new e.TextDecoder("utf-8")), i
        }
        var o = n._utf8ArrayToStr;
        t.a = n
    }, function (e, t, r) {
        "use strict";

        function i() {
            return "undefined" == typeof window ? self : window
        }
        r.d(t, "a", (function () {
            return i
        }))
    }, function (e, t, r) {
        var i, a, n, s, o;
        i = /^((?:[a-zA-Z0-9+\-.]+:)?)(\/\/[^\/?#]*)?((?:[^\/?#]*\/)*[^;?#]*)?(;[^?#]*)?(\?[^#]*)?(#.*)?$/, a = /^([^\/?#]*)(.*)$/, n = /(?:\/|^)\.(?=\/)/g, s = /(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g, o = {
            buildAbsoluteURL: function (e, t, r) {
                if (r = r || {}, e = e.trim(), !(t = t.trim())) {
                    if (!r.alwaysNormalize) return e;
                    var i = o.parseURL(e);
                    if (!i) throw new Error("Error trying to parse base URL.");
                    return i.path = o.normalizePath(i.path), o.buildURLFromParts(i)
                }
                var n = o.parseURL(t);
                if (!n) throw new Error("Error trying to parse relative URL.");
                if (n.scheme) return r.alwaysNormalize ? (n.path = o.normalizePath(n.path), o.buildURLFromParts(n)) : t;
                var s = o.parseURL(e);
                if (!s) throw new Error("Error trying to parse base URL.");
                if (!s.netLoc && s.path && "/" !== s.path[0]) {
                    var l = a.exec(s.path);
                    s.netLoc = l[1], s.path = l[2]
                }
                s.netLoc && !s.path && (s.path = "/");
                var d = {
                    scheme: s.scheme,
                    netLoc: n.netLoc,
                    path: null,
                    params: n.params,
                    query: n.query,
                    fragment: n.fragment
                };
                if (!n.netLoc && (d.netLoc = s.netLoc, "/" !== n.path[0]))
                    if (n.path) {
                        var u = s.path,
                            c = u.substring(0, u.lastIndexOf("/") + 1) + n.path;
                        d.path = o.normalizePath(c)
                    } else d.path = s.path, n.params || (d.params = s.params, n.query || (d.query = s.query));
                return null === d.path && (d.path = r.alwaysNormalize ? o.normalizePath(n.path) : n.path), o.buildURLFromParts(d)
            },
            parseURL: function (e) {
                var t = i.exec(e);
                return t ? {
                    scheme: t[1] || "",
                    netLoc: t[2] || "",
                    path: t[3] || "",
                    params: t[4] || "",
                    query: t[5] || "",
                    fragment: t[6] || ""
                } : null
            },
            normalizePath: function (e) {
                for (e = e.split("").reverse().join("").replace(n, ""); e.length !== (e = e.replace(s, "")).length;);
                return e.split("").reverse().join("")
            },
            buildURLFromParts: function (e) {
                return e.scheme + e.netLoc + e.path + e.params + e.query + e.fragment
            }
        }, e.exports = o
    }, function (e, t, r) {
        "use strict";
        var i = function () {
            function e(e, t) {
                this.subtle = e, this.aesIV = t
            }
            return e.prototype.decrypt = function (e, t) {
                return this.subtle.decrypt({
                    name: "AES-CBC",
                    iv: this.aesIV
                }, t, e)
            }, e
        }(),
            a = function () {
                function e(e, t) {
                    this.subtle = e, this.key = t
                }
                return e.prototype.expandKey = function () {
                    return this.subtle.importKey("raw", this.key, {
                        name: "AES-CBC"
                    }, !1, ["encrypt", "decrypt"])
                }, e
            }();
        var n = function () {
            function e() {
                this.rcon = [0, 1, 2, 4, 8, 16, 32, 64, 128, 27, 54], this.subMix = [new Uint32Array(256), new Uint32Array(256), new Uint32Array(256), new Uint32Array(256)], this.invSubMix = [new Uint32Array(256), new Uint32Array(256), new Uint32Array(256), new Uint32Array(256)], this.sBox = new Uint32Array(256), this.invSBox = new Uint32Array(256), this.key = new Uint32Array(0), this.initTable()
            }
            var t = e.prototype;
            return t.uint8ArrayToUint32Array_ = function (e) {
                for (var t = new DataView(e), r = new Uint32Array(4), i = 0; i < 4; i++) r[i] = t.getUint32(4 * i);
                return r
            }, t.initTable = function () {
                var e = this.sBox,
                    t = this.invSBox,
                    r = this.subMix,
                    i = r[0],
                    a = r[1],
                    n = r[2],
                    s = r[3],
                    o = this.invSubMix,
                    l = o[0],
                    d = o[1],
                    u = o[2],
                    c = o[3],
                    h = new Uint32Array(256),
                    f = 0,
                    g = 0,
                    p = 0;
                for (p = 0; p < 256; p++) h[p] = p < 128 ? p << 1 : p << 1 ^ 283;
                for (p = 0; p < 256; p++) {
                    var v = g ^ g << 1 ^ g << 2 ^ g << 3 ^ g << 4;
                    v = v >>> 8 ^ 255 & v ^ 99, e[f] = v, t[v] = f;
                    var m = h[f],
                        y = h[m],
                        b = h[y],
                        T = 257 * h[v] ^ 16843008 * v;
                    i[f] = T << 24 | T >>> 8, a[f] = T << 16 | T >>> 16, n[f] = T << 8 | T >>> 24, s[f] = T, T = 16843009 * b ^ 65537 * y ^ 257 * m ^ 16843008 * f, l[v] = T << 24 | T >>> 8, d[v] = T << 16 | T >>> 16, u[v] = T << 8 | T >>> 24, c[v] = T, f ? (f = m ^ h[h[h[b ^ m]]], g ^= h[h[g]]) : f = g = 1
                }
            }, t.expandKey = function (e) {
                for (var t = this.uint8ArrayToUint32Array_(e), r = !0, i = 0; i < t.length && r;) r = t[i] === this.key[i], i++;
                if (!r) {
                    this.key = t;
                    var a = this.keySize = t.length;
                    if (4 !== a && 6 !== a && 8 !== a) throw new Error("Invalid aes key size=" + a);
                    var n, s, o, l, d = this.ksRows = 4 * (a + 6 + 1),
                        u = this.keySchedule = new Uint32Array(d),
                        c = this.invKeySchedule = new Uint32Array(d),
                        h = this.sBox,
                        f = this.rcon,
                        g = this.invSubMix,
                        p = g[0],
                        v = g[1],
                        m = g[2],
                        y = g[3];
                    for (n = 0; n < d; n++) n < a ? o = u[n] = t[n] : (l = o, n % a == 0 ? (l = h[(l = l << 8 | l >>> 24) >>> 24] << 24 | h[l >>> 16 & 255] << 16 | h[l >>> 8 & 255] << 8 | h[255 & l], l ^= f[n / a | 0] << 24) : a > 6 && n % a == 4 && (l = h[l >>> 24] << 24 | h[l >>> 16 & 255] << 16 | h[l >>> 8 & 255] << 8 | h[255 & l]), u[n] = o = (u[n - a] ^ l) >>> 0);
                    for (s = 0; s < d; s++) n = d - s, l = 3 & s ? u[n] : u[n - 4], c[s] = s < 4 || n <= 4 ? l : p[h[l >>> 24]] ^ v[h[l >>> 16 & 255]] ^ m[h[l >>> 8 & 255]] ^ y[h[255 & l]], c[s] = c[s] >>> 0
                }
            }, t.networkToHostOrderSwap = function (e) {
                return e << 24 | (65280 & e) << 8 | (16711680 & e) >> 8 | e >>> 24
            }, t.decrypt = function (e, t, r, i) {
                for (var a, n, s, o, l, d, u, c, h, f, g, p, v, m, y, b, T, E = this.keySize + 6, S = this.invKeySchedule, _ = this.invSBox, R = this.invSubMix, A = R[0], k = R[1], w = R[2], L = R[3], D = this.uint8ArrayToUint32Array_(r), O = D[0], C = D[1], I = D[2], P = D[3], x = new Int32Array(e), M = new Int32Array(x.length), F = this.networkToHostOrderSwap; t < x.length;) {
                    for (h = F(x[t]), f = F(x[t + 1]), g = F(x[t + 2]), p = F(x[t + 3]), l = h ^ S[0], d = p ^ S[1], u = g ^ S[2], c = f ^ S[3], v = 4, m = 1; m < E; m++) a = A[l >>> 24] ^ k[d >> 16 & 255] ^ w[u >> 8 & 255] ^ L[255 & c] ^ S[v], n = A[d >>> 24] ^ k[u >> 16 & 255] ^ w[c >> 8 & 255] ^ L[255 & l] ^ S[v + 1], s = A[u >>> 24] ^ k[c >> 16 & 255] ^ w[l >> 8 & 255] ^ L[255 & d] ^ S[v + 2], o = A[c >>> 24] ^ k[l >> 16 & 255] ^ w[d >> 8 & 255] ^ L[255 & u] ^ S[v + 3], l = a, d = n, u = s, c = o, v += 4;
                    a = _[l >>> 24] << 24 ^ _[d >> 16 & 255] << 16 ^ _[u >> 8 & 255] << 8 ^ _[255 & c] ^ S[v], n = _[d >>> 24] << 24 ^ _[u >> 16 & 255] << 16 ^ _[c >> 8 & 255] << 8 ^ _[255 & l] ^ S[v + 1], s = _[u >>> 24] << 24 ^ _[c >> 16 & 255] << 16 ^ _[l >> 8 & 255] << 8 ^ _[255 & d] ^ S[v + 2], o = _[c >>> 24] << 24 ^ _[l >> 16 & 255] << 16 ^ _[d >> 8 & 255] << 8 ^ _[255 & u] ^ S[v + 3], v += 3, M[t] = F(a ^ O), M[t + 1] = F(o ^ C), M[t + 2] = F(s ^ I), M[t + 3] = F(n ^ P), O = h, C = f, I = g, P = p, t += 4
                }
                return i ? (y = M.buffer, b = y.byteLength, (T = b && new DataView(y).getUint8(b - 1)) ? y.slice(0, b - T) : y) : M.buffer
            }, t.destroy = function () {
                this.key = void 0, this.keySize = void 0, this.ksRows = void 0, this.sBox = void 0, this.invSBox = void 0, this.subMix = void 0, this.invSubMix = void 0, this.keySchedule = void 0, this.invKeySchedule = void 0, this.rcon = void 0
            }, e
        }(),
            s = r(2),
            o = r(0),
            l = r(1),
            d = r(5),
            u = Object(d.a)(),
            c = function () {
                function e(e, t, r) {
                    var i = (void 0 === r ? {} : r).removePKCS7Padding,
                        a = void 0 === i || i;
                    if (this.logEnabled = !0, this.observer = e, this.config = t, this.removePKCS7Padding = a, a) try {
                        var n = u.crypto;
                        n && (this.subtle = n.subtle || n.webkitSubtle)
                    } catch (e) { }
                    this.disableWebCrypto = !this.subtle
                }
                var t = e.prototype;
                return t.isSync = function () {
                    return this.disableWebCrypto && this.config.enableSoftwareAES
                }, t.decrypt = function (e, t, r, s) {
                    var l = this;
                    if (this.disableWebCrypto && this.config.enableSoftwareAES) {
                        this.logEnabled && (o.b.log("JS AES decrypt"), this.logEnabled = !1);
                        var d = this.decryptor;
                        d || (this.decryptor = d = new n), d.expandKey(t), s(d.decrypt(e, 0, r, this.removePKCS7Padding))
                    } else {
                        this.logEnabled && (o.b.log("WebCrypto AES decrypt"), this.logEnabled = !1);
                        var u = this.subtle;
                        this.key !== t && (this.key = t, this.fastAesKey = new a(u, t)), this.fastAesKey.expandKey().then((function (a) {
                            new i(u, r).decrypt(e, a).catch((function (i) {
                                l.onWebCryptoError(i, e, t, r, s)
                            })).then((function (e) {
                                s(e)
                            }))
                        })).catch((function (i) {
                            l.onWebCryptoError(i, e, t, r, s)
                        }))
                    }
                }, t.onWebCryptoError = function (e, t, r, i, a) {
                    this.config.enableSoftwareAES ? (o.b.log("WebCrypto Error, disable WebCrypto API"), this.disableWebCrypto = !0, this.logEnabled = !0, this.decrypt(t, r, i, a)) : (o.b.error("decrypting error : " + e.message), this.observer.trigger(l.a.ERROR, {
                        type: s.b.MEDIA_ERROR,
                        details: s.a.FRAG_DECRYPT_ERROR,
                        fatal: !0,
                        reason: e.message
                    }))
                }, t.destroy = function () {
                    var e = this.decryptor;
                    e && (e.destroy(), this.decryptor = void 0)
                }, e
            }();
        t.a = c
    }, function (e, t, r) {
        "use strict";
        var i = Object.prototype.hasOwnProperty,
            a = "~";

        function n() { }

        function s(e, t, r) {
            this.fn = e, this.context = t, this.once = r || !1
        }

        function o(e, t, r, i, n) {
            if ("function" != typeof r) throw new TypeError("The listener must be a function");
            var o = new s(r, i || e, n),
                l = a ? a + t : t;
            return e._events[l] ? e._events[l].fn ? e._events[l] = [e._events[l], o] : e._events[l].push(o) : (e._events[l] = o, e._eventsCount++), e
        }

        function l(e, t) {
            0 == --e._eventsCount ? e._events = new n : delete e._events[t]
        }

        function d() {
            this._events = new n, this._eventsCount = 0
        }
        Object.create && (n.prototype = Object.create(null), (new n).__proto__ || (a = !1)), d.prototype.eventNames = function () {
            var e, t, r = [];
            if (0 === this._eventsCount) return r;
            for (t in e = this._events) i.call(e, t) && r.push(a ? t.slice(1) : t);
            return Object.getOwnPropertySymbols ? r.concat(Object.getOwnPropertySymbols(e)) : r
        }, d.prototype.listeners = function (e) {
            var t = a ? a + e : e,
                r = this._events[t];
            if (!r) return [];
            if (r.fn) return [r.fn];
            for (var i = 0, n = r.length, s = new Array(n); i < n; i++) s[i] = r[i].fn;
            return s
        }, d.prototype.listenerCount = function (e) {
            var t = a ? a + e : e,
                r = this._events[t];
            return r ? r.fn ? 1 : r.length : 0
        }, d.prototype.emit = function (e, t, r, i, n, s) {
            var o = a ? a + e : e;
            if (!this._events[o]) return !1;
            var l, d, u = this._events[o],
                c = arguments.length;
            if (u.fn) {
                switch (u.once && this.removeListener(e, u.fn, void 0, !0), c) {
                    case 1:
                        return u.fn.call(u.context), !0;
                    case 2:
                        return u.fn.call(u.context, t), !0;
                    case 3:
                        return u.fn.call(u.context, t, r), !0;
                    case 4:
                        return u.fn.call(u.context, t, r, i), !0;
                    case 5:
                        return u.fn.call(u.context, t, r, i, n), !0;
                    case 6:
                        return u.fn.call(u.context, t, r, i, n, s), !0
                }
                for (d = 1, l = new Array(c - 1); d < c; d++) l[d - 1] = arguments[d];
                u.fn.apply(u.context, l)
            } else {
                var h, f = u.length;
                for (d = 0; d < f; d++) switch (u[d].once && this.removeListener(e, u[d].fn, void 0, !0), c) {
                    case 1:
                        u[d].fn.call(u[d].context);
                        break;
                    case 2:
                        u[d].fn.call(u[d].context, t);
                        break;
                    case 3:
                        u[d].fn.call(u[d].context, t, r);
                        break;
                    case 4:
                        u[d].fn.call(u[d].context, t, r, i);
                        break;
                    default:
                        if (!l)
                            for (h = 1, l = new Array(c - 1); h < c; h++) l[h - 1] = arguments[h];
                        u[d].fn.apply(u[d].context, l)
                }
            }
            return !0
        }, d.prototype.on = function (e, t, r) {
            return o(this, e, t, r, !1)
        }, d.prototype.once = function (e, t, r) {
            return o(this, e, t, r, !0)
        }, d.prototype.removeListener = function (e, t, r, i) {
            var n = a ? a + e : e;
            if (!this._events[n]) return this;
            if (!t) return l(this, n), this;
            var s = this._events[n];
            if (s.fn) s.fn !== t || i && !s.once || r && s.context !== r || l(this, n);
            else {
                for (var o = 0, d = [], u = s.length; o < u; o++)(s[o].fn !== t || i && !s[o].once || r && s[o].context !== r) && d.push(s[o]);
                d.length ? this._events[n] = 1 === d.length ? d[0] : d : l(this, n)
            }
            return this
        }, d.prototype.removeAllListeners = function (e) {
            var t;
            return e ? (t = a ? a + e : e, this._events[t] && l(this, t)) : (this._events = new n, this._eventsCount = 0), this
        }, d.prototype.off = d.prototype.removeListener, d.prototype.addListener = d.prototype.on, d.prefixed = a, d.EventEmitter = d, e.exports = d
    }, function (e, t, r) {
        "use strict";
        var i = r(1),
            a = r(2),
            n = r(7),
            s = r(3),
            o = r(0),
            l = r(5);

        function d(e, t) {
            return 255 === e[t] && 240 == (246 & e[t + 1])
        }

        function u(e, t) {
            return 1 & e[t + 1] ? 7 : 9
        }

        function c(e, t) {
            return (3 & e[t + 3]) << 11 | e[t + 4] << 3 | (224 & e[t + 5]) >>> 5
        }

        function h(e, t) {
            return !!(t + 1 < e.length && d(e, t))
        }

        function f(e, t) {
            if (h(e, t)) {
                var r = u(e, t);
                if (t + r >= e.length) return !1;
                var i = c(e, t);
                if (i <= r) return !1;
                var a = t + i;
                if (a === e.length || a + 1 < e.length && d(e, a)) return !0
            }
            return !1
        }

        function g(e, t, r, n, s) {
            if (!e.samplerate) {
                var l = function (e, t, r, n) {
                    var s, l, d, u, c, h = navigator.userAgent.toLowerCase(),
                        f = n,
                        g = [96e3, 88200, 64e3, 48e3, 44100, 32e3, 24e3, 22050, 16e3, 12e3, 11025, 8e3, 7350];
                    if (s = 1 + ((192 & t[r + 2]) >>> 6), !((l = (60 & t[r + 2]) >>> 2) > g.length - 1)) return u = (1 & t[r + 2]) << 2, u |= (192 & t[r + 3]) >>> 6, o.b.log("manifest codec:" + n + ",ADTS data:type:" + s + ",sampleingIndex:" + l + "[" + g[l] + "Hz],channelConfig:" + u), /firefox/i.test(h) ? l >= 6 ? (s = 5, c = new Array(4), d = l - 3) : (s = 2, c = new Array(2), d = l) : -1 !== h.indexOf("android") ? (s = 2, c = new Array(2), d = l) : (s = 5, c = new Array(4), n && (-1 !== n.indexOf("mp4a.40.29") || -1 !== n.indexOf("mp4a.40.5")) || !n && l >= 6 ? d = l - 3 : ((n && -1 !== n.indexOf("mp4a.40.2") && (l >= 6 && 1 === u || /vivaldi/i.test(h)) || !n && 1 === u) && (s = 2, c = new Array(2)), d = l)), c[0] = s << 3, c[0] |= (14 & l) >> 1, c[1] |= (1 & l) << 7, c[1] |= u << 3, 5 === s && (c[1] |= (14 & d) >> 1, c[2] = (1 & d) << 7, c[2] |= 8, c[3] = 0), {
                        config: c,
                        samplerate: g[l],
                        channelCount: u,
                        codec: "mp4a.40." + s,
                        manifestCodec: f
                    };
                    e.trigger(i.a.ERROR, {
                        type: a.b.MEDIA_ERROR,
                        details: a.a.FRAG_PARSING_ERROR,
                        fatal: !0,
                        reason: "invalid ADTS sampling index:" + l
                    })
                }(t, r, n, s);
                e.config = l.config, e.samplerate = l.samplerate, e.channelCount = l.channelCount, e.codec = l.codec, e.manifestCodec = l.manifestCodec, o.b.log("parsed codec:" + e.codec + ",rate:" + l.samplerate + ",nb channel:" + l.channelCount)
            }
        }

        function p(e) {
            return 9216e4 / e
        }

        function v(e, t, r, i, a) {
            var n = function (e, t, r, i, a) {
                var n, s, o = e.length;
                if (n = u(e, t), s = c(e, t), (s -= n) > 0 && t + n + s <= o) return {
                    headerLength: n,
                    frameLength: s,
                    stamp: r + i * a
                }
            }(t, r, i, a, p(e.samplerate));
            if (n) {
                var s = n.stamp,
                    o = n.headerLength,
                    l = n.frameLength,
                    d = {
                        unit: t.subarray(r + o, r + o + l),
                        pts: s,
                        dts: s
                    };
                return e.samples.push(d), {
                    sample: d,
                    length: l + o
                }
            }
        }
        var m = r(4),
            y = function () {
                function e(e, t, r) {
                    this.observer = e, this.config = r, this.remuxer = t
                }
                var t = e.prototype;
                return t.resetInitSegment = function (e, t, r, i) {
                    this._audioTrack = {
                        container: "audio/adts",
                        type: "audio",
                        id: 0,
                        sequenceNumber: 0,
                        isAAC: !0,
                        samples: [],
                        len: 0,
                        manifestCodec: t,
                        duration: i,
                        inputTimeScale: 9e4
                    }
                }, t.resetTimeStamp = function () { }, e.probe = function (e) {
                    if (!e) return !1;
                    for (var t = (m.a.getID3Data(e, 0) || []).length, r = e.length; t < r; t++)
                        if (f(e, t)) return o.b.log("ADTS sync word found !"), !0;
                    return !1
                }, t.append = function (e, t, r, i) {
                    for (var a = this._audioTrack, n = m.a.getID3Data(e, 0) || [], l = m.a.getTimeStamp(n), d = Object(s.a)(l) ? 90 * l : 9e4 * t, u = 0, c = d, f = e.length, p = n.length, y = [{
                        pts: c,
                        dts: c,
                        data: n
                    }]; p < f - 1;)
                        if (h(e, p) && p + 5 < f) {
                            g(a, this.observer, e, p, a.manifestCodec);
                            var b = v(a, e, p, d, u);
                            if (!b) {
                                o.b.log("Unable to parse AAC frame");
                                break
                            }
                            p += b.length, c = b.sample.pts, u++
                        } else m.a.isHeader(e, p) ? (n = m.a.getID3Data(e, p), y.push({
                            pts: c,
                            dts: c,
                            data: n
                        }), p += n.length) : p++;
                    this.remuxer.remux(a, {
                        samples: []
                    }, {
                        samples: y,
                        inputTimeScale: 9e4
                    }, {
                        samples: []
                    }, t, r, i)
                }, t.destroy = function () { }, e
            }(),
            b = r(10),
            T = {
                BitratesMap: [32, 64, 96, 128, 160, 192, 224, 256, 288, 320, 352, 384, 416, 448, 32, 48, 56, 64, 80, 96, 112, 128, 160, 192, 224, 256, 320, 384, 32, 40, 48, 56, 64, 80, 96, 112, 128, 160, 192, 224, 256, 320, 32, 48, 56, 64, 80, 96, 112, 128, 144, 160, 176, 192, 224, 256, 8, 16, 24, 32, 40, 48, 56, 64, 80, 96, 112, 128, 144, 160],
                SamplingRateMap: [44100, 48e3, 32e3, 22050, 24e3, 16e3, 11025, 12e3, 8e3],
                SamplesCoefficients: [
                    [0, 72, 144, 12],
                    [0, 0, 0, 0],
                    [0, 72, 144, 12],
                    [0, 144, 144, 12]
                ],
                BytesInSlot: [0, 1, 1, 4],
                appendFrame: function (e, t, r, i, a) {
                    if (!(r + 24 > t.length)) {
                        var n = this.parseHeader(t, r);
                        if (n && r + n.frameLength <= t.length) {
                            var s = i + a * (9e4 * n.samplesPerFrame / n.sampleRate),
                                o = {
                                    unit: t.subarray(r, r + n.frameLength),
                                    pts: s,
                                    dts: s
                                };
                            return e.config = [], e.channelCount = n.channelCount, e.samplerate = n.sampleRate, e.samples.push(o), {
                                sample: o,
                                length: n.frameLength
                            }
                        }
                    }
                },
                parseHeader: function (e, t) {
                    var r = e[t + 1] >> 3 & 3,
                        i = e[t + 1] >> 1 & 3,
                        a = e[t + 2] >> 4 & 15,
                        n = e[t + 2] >> 2 & 3,
                        s = e[t + 2] >> 1 & 1;
                    if (1 !== r && 0 !== a && 15 !== a && 3 !== n) {
                        var o = 3 === r ? 3 - i : 3 === i ? 3 : 4,
                            l = 1e3 * T.BitratesMap[14 * o + a - 1],
                            d = 3 === r ? 0 : 2 === r ? 1 : 2,
                            u = T.SamplingRateMap[3 * d + n],
                            c = e[t + 3] >> 6 == 3 ? 1 : 2,
                            h = T.SamplesCoefficients[r][i],
                            f = T.BytesInSlot[i],
                            g = 8 * h * f;
                        return {
                            sampleRate: u,
                            channelCount: c,
                            frameLength: parseInt(h * l / u + s, 10) * f,
                            samplesPerFrame: g
                        }
                    }
                },
                isHeaderPattern: function (e, t) {
                    return 255 === e[t] && 224 == (224 & e[t + 1]) && 0 != (6 & e[t + 1])
                },
                isHeader: function (e, t) {
                    return !!(t + 1 < e.length && this.isHeaderPattern(e, t))
                },
                probe: function (e, t) {
                    if (t + 1 < e.length && this.isHeaderPattern(e, t)) {
                        var r = this.parseHeader(e, t),
                            i = 4;
                        r && r.frameLength && (i = r.frameLength);
                        var a = t + i;
                        if (a === e.length || a + 1 < e.length && this.isHeaderPattern(e, a)) return !0
                    }
                    return !1
                }
            },
            E = T,
            S = function () {
                function e(e) {
                    this.data = e, this.bytesAvailable = e.byteLength, this.word = 0, this.bitsAvailable = 0
                }
                var t = e.prototype;
                return t.loadWord = function () {
                    var e = this.data,
                        t = this.bytesAvailable,
                        r = e.byteLength - t,
                        i = new Uint8Array(4),
                        a = Math.min(4, t);
                    if (0 === a) throw new Error("no bytes available");
                    i.set(e.subarray(r, r + a)), this.word = new DataView(i.buffer).getUint32(0), this.bitsAvailable = 8 * a, this.bytesAvailable -= a
                }, t.skipBits = function (e) {
                    var t;
                    this.bitsAvailable > e ? (this.word <<= e, this.bitsAvailable -= e) : (e -= this.bitsAvailable, e -= (t = e >> 3) >> 3, this.bytesAvailable -= t, this.loadWord(), this.word <<= e, this.bitsAvailable -= e)
                }, t.readBits = function (e) {
                    var t = Math.min(this.bitsAvailable, e),
                        r = this.word >>> 32 - t;
                    return e > 32 && o.b.error("Cannot read more than 32 bits at a time"), this.bitsAvailable -= t, this.bitsAvailable > 0 ? this.word <<= t : this.bytesAvailable > 0 && this.loadWord(), (t = e - t) > 0 && this.bitsAvailable ? r << t | this.readBits(t) : r
                }, t.skipLZ = function () {
                    var e;
                    for (e = 0; e < this.bitsAvailable; ++e)
                        if (0 != (this.word & 2147483648 >>> e)) return this.word <<= e, this.bitsAvailable -= e, e;
                    return this.loadWord(), e + this.skipLZ()
                }, t.skipUEG = function () {
                    this.skipBits(1 + this.skipLZ())
                }, t.skipEG = function () {
                    this.skipBits(1 + this.skipLZ())
                }, t.readUEG = function () {
                    var e = this.skipLZ();
                    return this.readBits(e + 1) - 1
                }, t.readEG = function () {
                    var e = this.readUEG();
                    return 1 & e ? 1 + e >>> 1 : -1 * (e >>> 1)
                }, t.readBoolean = function () {
                    return 1 === this.readBits(1)
                }, t.readUByte = function () {
                    return this.readBits(8)
                }, t.readUShort = function () {
                    return this.readBits(16)
                }, t.readUInt = function () {
                    return this.readBits(32)
                }, t.skipScalingList = function (e) {
                    var t, r = 8,
                        i = 8;
                    for (t = 0; t < e; t++) 0 !== i && (i = (r + this.readEG() + 256) % 256), r = 0 === i ? r : i
                }, t.readSPS = function () {
                    var e, t, r, i, a, n, s, o = 0,
                        l = 0,
                        d = 0,
                        u = 0,
                        c = this.readUByte.bind(this),
                        h = this.readBits.bind(this),
                        f = this.readUEG.bind(this),
                        g = this.readBoolean.bind(this),
                        p = this.skipBits.bind(this),
                        v = this.skipEG.bind(this),
                        m = this.skipUEG.bind(this),
                        y = this.skipScalingList.bind(this);
                    if (c(), e = c(), h(5), p(3), c(), m(), 100 === e || 110 === e || 122 === e || 244 === e || 44 === e || 83 === e || 86 === e || 118 === e || 128 === e) {
                        var b = f();
                        if (3 === b && p(1), m(), m(), p(1), g())
                            for (n = 3 !== b ? 8 : 12, s = 0; s < n; s++) g() && y(s < 6 ? 16 : 64)
                    }
                    m();
                    var T = f();
                    if (0 === T) f();
                    else if (1 === T)
                        for (p(1), v(), v(), t = f(), s = 0; s < t; s++) v();
                    m(), p(1), r = f(), i = f(), 0 === (a = h(1)) && p(1), p(1), g() && (o = f(), l = f(), d = f(), u = f());
                    var E = [1, 1];
                    if (g() && g()) switch (c()) {
                        case 1:
                            E = [1, 1];
                            break;
                        case 2:
                            E = [12, 11];
                            break;
                        case 3:
                            E = [10, 11];
                            break;
                        case 4:
                            E = [16, 11];
                            break;
                        case 5:
                            E = [40, 33];
                            break;
                        case 6:
                            E = [24, 11];
                            break;
                        case 7:
                            E = [20, 11];
                            break;
                        case 8:
                            E = [32, 11];
                            break;
                        case 9:
                            E = [80, 33];
                            break;
                        case 10:
                            E = [18, 11];
                            break;
                        case 11:
                            E = [15, 11];
                            break;
                        case 12:
                            E = [64, 33];
                            break;
                        case 13:
                            E = [160, 99];
                            break;
                        case 14:
                            E = [4, 3];
                            break;
                        case 15:
                            E = [3, 2];
                            break;
                        case 16:
                            E = [2, 1];
                            break;
                        case 255:
                            E = [c() << 8 | c(), c() << 8 | c()]
                    }
                    return {
                        width: Math.ceil(16 * (r + 1) - 2 * o - 2 * l),
                        height: (2 - a) * (i + 1) * 16 - (a ? 2 : 4) * (d + u),
                        pixelRatio: E
                    }
                }, t.readSliceType = function () {
                    return this.readUByte(), this.readUEG(), this.readUEG()
                }, e
            }(),
            _ = function () {
                function e(e, t, r, i) {
                    this.decryptdata = r, this.discardEPB = i, this.decrypter = new n.a(e, t, {
                        removePKCS7Padding: !1
                    })
                }
                var t = e.prototype;
                return t.decryptBuffer = function (e, t) {
                    this.decrypter.decrypt(e, this.decryptdata.key.buffer, this.decryptdata.iv.buffer, t)
                }, t.decryptAacSample = function (e, t, r, i) {
                    var a = e[t].unit,
                        n = a.subarray(16, a.length - a.length % 16),
                        s = n.buffer.slice(n.byteOffset, n.byteOffset + n.length),
                        o = this;
                    this.decryptBuffer(s, (function (n) {
                        n = new Uint8Array(n), a.set(n, 16), i || o.decryptAacSamples(e, t + 1, r)
                    }))
                }, t.decryptAacSamples = function (e, t, r) {
                    for (; ; t++) {
                        if (t >= e.length) return void r();
                        if (!(e[t].unit.length < 32)) {
                            var i = this.decrypter.isSync();
                            if (this.decryptAacSample(e, t, r, i), !i) return
                        }
                    }
                }, t.getAvcEncryptedData = function (e) {
                    for (var t = 16 * Math.floor((e.length - 48) / 160) + 16, r = new Int8Array(t), i = 0, a = 32; a <= e.length - 16; a += 160, i += 16) r.set(e.subarray(a, a + 16), i);
                    return r
                }, t.getAvcDecryptedUnit = function (e, t) {
                    t = new Uint8Array(t);
                    for (var r = 0, i = 32; i <= e.length - 16; i += 160, r += 16) e.set(t.subarray(r, r + 16), i);
                    return e
                }, t.decryptAvcSample = function (e, t, r, i, a, n) {
                    var s = this.discardEPB(a.data),
                        o = this.getAvcEncryptedData(s),
                        l = this;
                    this.decryptBuffer(o.buffer, (function (o) {
                        a.data = l.getAvcDecryptedUnit(s, o), n || l.decryptAvcSamples(e, t, r + 1, i)
                    }))
                }, t.decryptAvcSamples = function (e, t, r, i) {
                    for (; ; t++, r = 0) {
                        if (t >= e.length) return void i();
                        for (var a = e[t].units; !(r >= a.length); r++) {
                            var n = a[r];
                            if (!(n.data.length <= 48 || 1 !== n.type && 5 !== n.type)) {
                                var s = this.decrypter.isSync();
                                if (this.decryptAvcSample(e, t, r, i, n, s), !s) return
                            }
                        }
                    }
                }, e
            }(),
            R = {
                video: 1,
                audio: 2,
                id3: 3,
                text: 4
            },
            A = function () {
                function e(e, t, r, i) {
                    this.observer = e, this.config = r, this.typeSupported = i, this.remuxer = t, this.sampleAes = null, this.pmtUnknownTypes = {}
                }
                var t = e.prototype;
                return t.setDecryptData = function (e) {
                    null != e && null != e.key && "SAMPLE-AES" === e.method ? this.sampleAes = new _(this.observer, this.config, e, this.discardEPB) : this.sampleAes = null
                }, e.probe = function (t) {
                    var r = e._syncOffset(t);
                    return !(r < 0) && (r && o.b.warn("MPEG2-TS detected but first sync word found @ offset " + r + ", junk ahead ?"), !0)
                }, e._syncOffset = function (e) {
                    for (var t = Math.min(1e3, e.length - 564), r = 0; r < t;) {
                        if (71 === e[r] && 71 === e[r + 188] && 71 === e[r + 376]) return r;
                        r++
                    }
                    return -1
                }, e.createTrack = function (e, t) {
                    return {
                        container: "video" === e || "audio" === e ? "video/mp2t" : void 0,
                        type: e,
                        id: R[e],
                        pid: -1,
                        inputTimeScale: 9e4,
                        sequenceNumber: 0,
                        samples: [],
                        dropped: "video" === e ? 0 : void 0,
                        isAAC: "audio" === e || void 0,
                        duration: "audio" === e ? t : void 0
                    }
                }, t.resetInitSegment = function (t, r, i, a) {
                    this.pmtParsed = !1, this._pmtId = -1, this.pmtUnknownTypes = {}, this._avcTrack = e.createTrack("video", a), this._audioTrack = e.createTrack("audio", a), this._id3Track = e.createTrack("id3", a), this._txtTrack = e.createTrack("text", a), this.aacOverFlow = null, this.aacLastPTS = null, this.avcSample = null, this.audioCodec = r, this.videoCodec = i, this._duration = a
                }, t.resetTimeStamp = function () { }, t.append = function (t, r, n, s) {
                    var l, d, u, c, h, f = t.length,
                        g = !1;
                    this.pmtUnknownTypes = {}, this.contiguous = n;
                    var p = this.pmtParsed,
                        v = this._avcTrack,
                        m = this._audioTrack,
                        y = this._id3Track,
                        b = v.pid,
                        T = m.pid,
                        E = y.pid,
                        S = this._pmtId,
                        _ = v.pesData,
                        R = m.pesData,
                        A = y.pesData,
                        k = this._parsePAT,
                        w = this._parsePMT.bind(this),
                        L = this._parsePES,
                        D = this._parseAVCPES.bind(this),
                        O = this._parseAACPES.bind(this),
                        C = this._parseMPEGPES.bind(this),
                        I = this._parseID3PES.bind(this),
                        P = e._syncOffset(t);
                    for (f -= (f + P) % 188, l = P; l < f; l += 188)
                        if (71 === t[l]) {
                            if (d = !!(64 & t[l + 1]), u = ((31 & t[l + 1]) << 8) + t[l + 2], (48 & t[l + 3]) >> 4 > 1) {
                                if ((c = l + 5 + t[l + 4]) === l + 188) continue
                            } else c = l + 4;
                            switch (u) {
                                case b:
                                    d && (_ && (h = L(_)) && D(h, !1), _ = {
                                        data: [],
                                        size: 0
                                    }), _ && (_.data.push(t.subarray(c, l + 188)), _.size += l + 188 - c);
                                    break;
                                case T:
                                    d && (R && (h = L(R)) && (m.isAAC ? O(h) : C(h)), R = {
                                        data: [],
                                        size: 0
                                    }), R && (R.data.push(t.subarray(c, l + 188)), R.size += l + 188 - c);
                                    break;
                                case E:
                                    d && (A && (h = L(A)) && I(h), A = {
                                        data: [],
                                        size: 0
                                    }), A && (A.data.push(t.subarray(c, l + 188)), A.size += l + 188 - c);
                                    break;
                                case 0:
                                    d && (c += t[c] + 1), S = this._pmtId = k(t, c);
                                    break;
                                case S:
                                    d && (c += t[c] + 1);
                                    var x = w(t, c, !0 === this.typeSupported.mpeg || !0 === this.typeSupported.mp3, null != this.sampleAes);
                                    (b = x.avc) > 0 && (v.pid = b), (T = x.audio) > 0 && (m.pid = T, m.isAAC = x.isAAC), (E = x.id3) > 0 && (y.pid = E), g && !p && (o.b.log("reparse from beginning"), g = !1, l = P - 188), p = this.pmtParsed = !0;
                                    break;
                                case 17:
                                case 8191:
                                    break;
                                default:
                                    g = !0
                            }
                        } else this.observer.trigger(i.a.ERROR, {
                            type: a.b.MEDIA_ERROR,
                            details: a.a.FRAG_PARSING_ERROR,
                            fatal: !1,
                            reason: "TS packet did not start with 0x47"
                        });
                    _ && (h = L(_)) ? (D(h, !0), v.pesData = null) : v.pesData = _, R && (h = L(R)) ? (m.isAAC ? O(h) : C(h), m.pesData = null) : (R && R.size && o.b.log("last AAC PES packet truncated,might overlap between fragments"), m.pesData = R), A && (h = L(A)) ? (I(h), y.pesData = null) : y.pesData = A, null == this.sampleAes ? this.remuxer.remux(m, v, y, this._txtTrack, r, n, s) : this.decryptAndRemux(m, v, y, this._txtTrack, r, n, s)
                }, t.decryptAndRemux = function (e, t, r, i, a, n, s) {
                    if (e.samples && e.isAAC) {
                        var o = this;
                        this.sampleAes.decryptAacSamples(e.samples, 0, (function () {
                            o.decryptAndRemuxAvc(e, t, r, i, a, n, s)
                        }))
                    } else this.decryptAndRemuxAvc(e, t, r, i, a, n, s)
                }, t.decryptAndRemuxAvc = function (e, t, r, i, a, n, s) {
                    if (t.samples) {
                        var o = this;
                        this.sampleAes.decryptAvcSamples(t.samples, 0, 0, (function () {
                            o.remuxer.remux(e, t, r, i, a, n, s)
                        }))
                    } else this.remuxer.remux(e, t, r, i, a, n, s)
                }, t.destroy = function () {
                    this._initPTS = this._initDTS = void 0, this._duration = 0
                }, t._parsePAT = function (e, t) {
                    return (31 & e[t + 10]) << 8 | e[t + 11]
                }, t._trackUnknownPmt = function (e, t, r) {
                    var i = this.pmtUnknownTypes[e] || 0;
                    return 0 === i && (this.pmtUnknownTypes[e] = 0, t.call(o.b, r)), this.pmtUnknownTypes[e]++, i
                }, t._parsePMT = function (e, t, r, i) {
                    var a, n, s = {
                        audio: -1,
                        avc: -1,
                        id3: -1,
                        isAAC: !0
                    };
                    for (a = t + 3 + ((15 & e[t + 1]) << 8 | e[t + 2]) - 4, t += 12 + ((15 & e[t + 10]) << 8 | e[t + 11]); t < a;) {
                        switch (n = (31 & e[t + 1]) << 8 | e[t + 2], e[t]) {
                            case 207:
                                if (!i) {
                                    this._trackUnknownPmt(e[t], o.b.warn, "ADTS AAC with AES-128-CBC frame encryption found in unencrypted stream");
                                    break
                                }
                            case 15:
                                -1 === s.audio && (s.audio = n);
                                break;
                            case 21:
                                -1 === s.id3 && (s.id3 = n);
                                break;
                            case 219:
                                if (!i) {
                                    this._trackUnknownPmt(e[t], o.b.warn, "H.264 with AES-128-CBC slice encryption found in unencrypted stream");
                                    break
                                }
                            case 27:
                                -1 === s.avc && (s.avc = n);
                                break;
                            case 3:
                            case 4:
                                r ? -1 === s.audio && (s.audio = n, s.isAAC = !1) : this._trackUnknownPmt(e[t], o.b.warn, "MPEG audio found, not supported in this browser");
                                break;
                            case 36:
                                this._trackUnknownPmt(e[t], o.b.warn, "Unsupported HEVC stream type found");
                                break;
                            default:
                                this._trackUnknownPmt(e[t], o.b.log, "Unknown stream type:" + e[t])
                        }
                        t += 5 + ((15 & e[t + 3]) << 8 | e[t + 4])
                    }
                    return s
                }, t._parsePES = function (e) {
                    var t, r, i, a, n, s, l, d, u = 0,
                        c = e.data;
                    if (!e || 0 === e.size) return null;
                    for (; c[0].length < 19 && c.length > 1;) {
                        var h = new Uint8Array(c[0].length + c[1].length);
                        h.set(c[0]), h.set(c[1], c[0].length), c[0] = h, c.splice(1, 1)
                    }
                    if (1 === ((t = c[0])[0] << 16) + (t[1] << 8) + t[2]) {
                        if ((i = (t[4] << 8) + t[5]) && i > e.size - 6) return null;
                        if (192 & (r = t[7]) && (s = 536870912 * (14 & t[9]) + 4194304 * (255 & t[10]) + 16384 * (254 & t[11]) + 128 * (255 & t[12]) + (254 & t[13]) / 2, 64 & r ? s - (l = 536870912 * (14 & t[14]) + 4194304 * (255 & t[15]) + 16384 * (254 & t[16]) + 128 * (255 & t[17]) + (254 & t[18]) / 2) > 54e5 && (o.b.warn(Math.round((s - l) / 9e4) + "s delta between PTS and DTS, align them"), s = l) : l = s), d = (a = t[8]) + 9, e.size <= d) return null;
                        e.size -= d, n = new Uint8Array(e.size);
                        for (var f = 0, g = c.length; f < g; f++) {
                            var p = (t = c[f]).byteLength;
                            if (d) {
                                if (d > p) {
                                    d -= p;
                                    continue
                                }
                                t = t.subarray(d), p -= d, d = 0
                            }
                            n.set(t, u), u += p
                        }
                        return i && (i -= a + 3), {
                            data: n,
                            pts: s,
                            dts: l,
                            len: i
                        }
                    }
                    return null
                }, t.pushAccesUnit = function (e, t) {
                    if (e.units.length && e.frame) {
                        var r = t.samples,
                            i = r.length;
                        if (isNaN(e.pts)) {
                            if (!i) return void t.dropped++;
                            var a = r[i - 1];
                            e.pts = a.pts, e.dts = a.dts
                        } !this.config.forceKeyFrameOnDiscontinuity || !0 === e.key || t.sps && (i || this.contiguous) ? (e.id = i, r.push(e)) : t.dropped++
                    }
                    e.debug.length && o.b.log(e.pts + "/" + e.dts + ":" + e.debug)
                }, t._parseAVCPES = function (e, t) {
                    var r, i, a, n = this,
                        s = this._avcTrack,
                        o = this._parseAVCNALu(e.data),
                        l = this.avcSample,
                        d = !1,
                        u = this.pushAccesUnit.bind(this),
                        c = function (e, t, r, i) {
                            return {
                                key: e,
                                pts: t,
                                dts: r,
                                units: [],
                                debug: i
                            }
                        };
                    e.data = null, l && o.length && !s.audFound && (u(l, s), l = this.avcSample = c(!1, e.pts, e.dts, "")), o.forEach((function (t) {
                        switch (t.type) {
                            case 1:
                                i = !0, l || (l = n.avcSample = c(!0, e.pts, e.dts, "")), l.frame = !0;
                                var o = t.data;
                                if (d && o.length > 4) {
                                    var h = new S(o).readSliceType();
                                    2 !== h && 4 !== h && 7 !== h && 9 !== h || (l.key = !0)
                                }
                                break;
                            case 5:
                                i = !0, l || (l = n.avcSample = c(!0, e.pts, e.dts, "")), l.key = !0, l.frame = !0;
                                break;
                            case 6:
                                i = !0, (r = new S(n.discardEPB(t.data))).readUByte();
                                for (var f = 0, g = 0, p = !1, v = 0; !p && r.bytesAvailable > 1;) {
                                    f = 0;
                                    do {
                                        f += v = r.readUByte()
                                    } while (255 === v);
                                    g = 0;
                                    do {
                                        g += v = r.readUByte()
                                    } while (255 === v);
                                    if (4 === f && 0 !== r.bytesAvailable) {
                                        if (p = !0, 181 === r.readUByte())
                                            if (49 === r.readUShort())
                                                if (1195456820 === r.readUInt())
                                                    if (3 === r.readUByte()) {
                                                        var y = r.readUByte(),
                                                            b = 31 & y,
                                                            T = [y, r.readUByte()];
                                                        for (a = 0; a < b; a++) T.push(r.readUByte()), T.push(r.readUByte()), T.push(r.readUByte());
                                                        n._insertSampleInOrder(n._txtTrack.samples, {
                                                            type: 3,
                                                            pts: e.pts,
                                                            bytes: T
                                                        })
                                                    }
                                    } else if (5 === f && 0 !== r.bytesAvailable) {
                                        if (p = !0, g > 16) {
                                            var E = [];
                                            for (a = 0; a < 16; a++) E.push(r.readUByte().toString(16)), 3 !== a && 5 !== a && 7 !== a && 9 !== a || E.push("-");
                                            var _ = g - 16,
                                                R = new Uint8Array(_);
                                            for (a = 0; a < _; a++) R[a] = r.readUByte();
                                            n._insertSampleInOrder(n._txtTrack.samples, {
                                                pts: e.pts,
                                                payloadType: f,
                                                uuid: E.join(""),
                                                userDataBytes: R,
                                                userData: Object(m.b)(R.buffer)
                                            })
                                        }
                                    } else if (g < r.bytesAvailable)
                                        for (a = 0; a < g; a++) r.readUByte()
                                }
                                break;
                            case 7:
                                if (i = !0, d = !0, !s.sps) {
                                    var A = (r = new S(t.data)).readSPS();
                                    s.width = A.width, s.height = A.height, s.pixelRatio = A.pixelRatio, s.sps = [t.data], s.duration = n._duration;
                                    var k = t.data.subarray(1, 4),
                                        w = "avc1.";
                                    for (a = 0; a < 3; a++) {
                                        var L = k[a].toString(16);
                                        L.length < 2 && (L = "0" + L), w += L
                                    }
                                    s.codec = w
                                }
                                break;
                            case 8:
                                i = !0, s.pps || (s.pps = [t.data]);
                                break;
                            case 9:
                                i = !1, s.audFound = !0, l && u(l, s), l = n.avcSample = c(!1, e.pts, e.dts, "");
                                break;
                            case 12:
                                i = !1;
                                break;
                            default:
                                i = !1, l && (l.debug += "unknown NAL " + t.type + " ")
                        }
                        l && i && l.units.push(t)
                    })), t && l && (u(l, s), this.avcSample = null)
                }, t._insertSampleInOrder = function (e, t) {
                    var r = e.length;
                    if (r > 0) {
                        if (t.pts >= e[r - 1].pts) e.push(t);
                        else
                            for (var i = r - 1; i >= 0; i--)
                                if (t.pts < e[i].pts) {
                                    e.splice(i, 0, t);
                                    break
                                }
                    } else e.push(t)
                }, t._getLastNalUnit = function () {
                    var e, t = this.avcSample;
                    if (!t || 0 === t.units.length) {
                        var r = this._avcTrack.samples;
                        t = r[r.length - 1]
                    }
                    if (t) {
                        var i = t.units;
                        e = i[i.length - 1]
                    }
                    return e
                }, t._parseAVCNALu = function (e) {
                    var t, r, i, a, n = 0,
                        s = e.byteLength,
                        o = this._avcTrack,
                        l = o.naluState || 0,
                        d = l,
                        u = [],
                        c = -1;
                    for (-1 === l && (c = 0, a = 31 & e[0], l = 0, n = 1); n < s;)
                        if (t = e[n++], l)
                            if (1 !== l)
                                if (t)
                                    if (1 === t) {
                                        if (c >= 0) i = {
                                            data: e.subarray(c, n - l - 1),
                                            type: a
                                        }, u.push(i);
                                        else {
                                            var h = this._getLastNalUnit();
                                            if (h && (d && n <= 4 - d && h.state && (h.data = h.data.subarray(0, h.data.byteLength - d)), (r = n - l - 1) > 0)) {
                                                var f = new Uint8Array(h.data.byteLength + r);
                                                f.set(h.data, 0), f.set(e.subarray(0, r), h.data.byteLength), h.data = f
                                            }
                                        }
                                        n < s ? (c = n, a = 31 & e[n], l = 0) : l = -1
                                    } else l = 0;
                                else l = 3;
                            else l = t ? 0 : 2;
                        else l = t ? 0 : 1;
                    if (c >= 0 && l >= 0 && (i = {
                        data: e.subarray(c, s),
                        type: a,
                        state: l
                    }, u.push(i)), 0 === u.length) {
                        var g = this._getLastNalUnit();
                        if (g) {
                            var p = new Uint8Array(g.data.byteLength + e.byteLength);
                            p.set(g.data, 0), p.set(e, g.data.byteLength), g.data = p
                        }
                    }
                    return o.naluState = l, u
                }, t.discardEPB = function (e) {
                    for (var t, r, i = e.byteLength, a = [], n = 1; n < i - 2;) 0 === e[n] && 0 === e[n + 1] && 3 === e[n + 2] ? (a.push(n + 2), n += 2) : n++;
                    if (0 === a.length) return e;
                    t = i - a.length, r = new Uint8Array(t);
                    var s = 0;
                    for (n = 0; n < t; s++, n++) s === a[0] && (s++, a.shift()), r[n] = e[s];
                    return r
                }, t._parseAACPES = function (e) {
                    var t, r, n, s, l, d, u, c = this._audioTrack,
                        f = e.data,
                        m = e.pts,
                        y = this.aacOverFlow,
                        b = this.aacLastPTS;
                    if (y) {
                        var T = new Uint8Array(y.byteLength + f.byteLength);
                        T.set(y, 0), T.set(f, y.byteLength), f = T
                    }
                    for (n = 0, l = f.length; n < l - 1 && !h(f, n); n++);
                    if (n && (n < l - 1 ? (d = "AAC PES did not start with ADTS header,offset:" + n, u = !1) : (d = "no ADTS header found in AAC PES", u = !0), o.b.warn("parsing error:" + d), this.observer.trigger(i.a.ERROR, {
                        type: a.b.MEDIA_ERROR,
                        details: a.a.FRAG_PARSING_ERROR,
                        fatal: u,
                        reason: d
                    }), u)) return;
                    if (g(c, this.observer, f, n, this.audioCodec), r = 0, t = p(c.samplerate), y && b) {
                        var E = b + t;
                        Math.abs(E - m) > 1 && (o.b.log("AAC: align PTS for overlapping frames by " + Math.round((E - m) / 90)), m = E)
                    }
                    for (; n < l;) {
                        if (h(f, n)) {
                            if (n + 5 < l) {
                                var S = v(c, f, n, m, r);
                                if (S) {
                                    n += S.length, s = S.sample.pts, r++;
                                    continue
                                }
                            }
                            break
                        }
                        n++
                    }
                    y = n < l ? f.subarray(n, l) : null, this.aacOverFlow = y, this.aacLastPTS = s
                }, t._parseMPEGPES = function (e) {
                    for (var t = e.data, r = t.length, i = 0, a = 0, n = e.pts; a < r;)
                        if (E.isHeader(t, a)) {
                            var s = E.appendFrame(this._audioTrack, t, a, n, i);
                            if (!s) break;
                            a += s.length, i++
                        } else a++
                }, t._parseID3PES = function (e) {
                    this._id3Track.samples.push(e)
                }, e
            }(),
            k = function () {
                function e(e, t, r) {
                    this.observer = e, this.config = r, this.remuxer = t
                }
                var t = e.prototype;
                return t.resetInitSegment = function (e, t, r, i) {
                    this._audioTrack = {
                        container: "audio/mpeg",
                        type: "audio",
                        id: -1,
                        sequenceNumber: 0,
                        isAAC: !1,
                        samples: [],
                        len: 0,
                        manifestCodec: t,
                        duration: i,
                        inputTimeScale: 9e4
                    }
                }, t.resetTimeStamp = function () { }, e.probe = function (e) {
                    var t, r, i = m.a.getID3Data(e, 0);
                    if (i && void 0 !== m.a.getTimeStamp(i))
                        for (t = i.length, r = Math.min(e.length - 1, t + 100); t < r; t++)
                            if (E.probe(e, t)) return o.b.log("MPEG Audio sync word found !"), !0;
                    return !1
                }, t.append = function (e, t, r, i) {
                    for (var a = m.a.getID3Data(e, 0) || [], n = m.a.getTimeStamp(a), s = void 0 !== n ? 90 * n : 9e4 * t, o = a.length, l = e.length, d = 0, u = 0, c = this._audioTrack, h = [{
                        pts: s,
                        dts: s,
                        data: a
                    }]; o < l;)
                        if (E.isHeader(e, o)) {
                            var f = E.appendFrame(c, e, o, s, d);
                            if (!f) break;
                            o += f.length, u = f.sample.pts, d++
                        } else m.a.isHeader(e, o) ? (a = m.a.getID3Data(e, o), h.push({
                            pts: u,
                            dts: u,
                            data: a
                        }), o += a.length) : o++;
                    this.remuxer.remux(c, {
                        samples: []
                    }, {
                        samples: h,
                        inputTimeScale: 9e4
                    }, {
                        samples: []
                    }, t, r, i)
                }, t.destroy = function () { }, e
            }(),
            w = function () {
                function e() { }
                return e.getSilentFrame = function (e, t) {
                    switch (e) {
                        case "mp4a.40.2":
                            if (1 === t) return new Uint8Array([0, 200, 0, 128, 35, 128]);
                            if (2 === t) return new Uint8Array([33, 0, 73, 144, 2, 25, 0, 35, 128]);
                            if (3 === t) return new Uint8Array([0, 200, 0, 128, 32, 132, 1, 38, 64, 8, 100, 0, 142]);
                            if (4 === t) return new Uint8Array([0, 200, 0, 128, 32, 132, 1, 38, 64, 8, 100, 0, 128, 44, 128, 8, 2, 56]);
                            if (5 === t) return new Uint8Array([0, 200, 0, 128, 32, 132, 1, 38, 64, 8, 100, 0, 130, 48, 4, 153, 0, 33, 144, 2, 56]);
                            if (6 === t) return new Uint8Array([0, 200, 0, 128, 32, 132, 1, 38, 64, 8, 100, 0, 130, 48, 4, 153, 0, 33, 144, 2, 0, 178, 0, 32, 8, 224]);
                            break;
                        default:
                            if (1 === t) return new Uint8Array([1, 64, 34, 128, 163, 78, 230, 128, 186, 8, 0, 0, 0, 28, 6, 241, 193, 10, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 94]);
                            if (2 === t) return new Uint8Array([1, 64, 34, 128, 163, 94, 230, 128, 186, 8, 0, 0, 0, 0, 149, 0, 6, 241, 161, 10, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 94]);
                            if (3 === t) return new Uint8Array([1, 64, 34, 128, 163, 94, 230, 128, 186, 8, 0, 0, 0, 0, 149, 0, 6, 241, 161, 10, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 94])
                    }
                    return null
                }, e
            }(),
            L = Math.pow(2, 32) - 1,
            D = function () {
                function e() { }
                return e.init = function () {
                    var t;
                    for (t in e.types = {
                        avc1: [],
                        avcC: [],
                        btrt: [],
                        dinf: [],
                        dref: [],
                        esds: [],
                        ftyp: [],
                        hdlr: [],
                        mdat: [],
                        mdhd: [],
                        mdia: [],
                        mfhd: [],
                        minf: [],
                        moof: [],
                        moov: [],
                        mp4a: [],
                        ".mp3": [],
                        mvex: [],
                        mvhd: [],
                        pasp: [],
                        sdtp: [],
                        stbl: [],
                        stco: [],
                        stsc: [],
                        stsd: [],
                        stsz: [],
                        stts: [],
                        tfdt: [],
                        tfhd: [],
                        traf: [],
                        trak: [],
                        trun: [],
                        trex: [],
                        tkhd: [],
                        vmhd: [],
                        smhd: []
                    }, e.types) e.types.hasOwnProperty(t) && (e.types[t] = [t.charCodeAt(0), t.charCodeAt(1), t.charCodeAt(2), t.charCodeAt(3)]);
                    var r = new Uint8Array([0, 0, 0, 0, 0, 0, 0, 0, 118, 105, 100, 101, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 86, 105, 100, 101, 111, 72, 97, 110, 100, 108, 101, 114, 0]),
                        i = new Uint8Array([0, 0, 0, 0, 0, 0, 0, 0, 115, 111, 117, 110, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 83, 111, 117, 110, 100, 72, 97, 110, 100, 108, 101, 114, 0]);
                    e.HDLR_TYPES = {
                        video: r,
                        audio: i
                    };
                    var a = new Uint8Array([0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 12, 117, 114, 108, 32, 0, 0, 0, 1]),
                        n = new Uint8Array([0, 0, 0, 0, 0, 0, 0, 0]);
                    e.STTS = e.STSC = e.STCO = n, e.STSZ = new Uint8Array([0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]), e.VMHD = new Uint8Array([0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0]), e.SMHD = new Uint8Array([0, 0, 0, 0, 0, 0, 0, 0]), e.STSD = new Uint8Array([0, 0, 0, 0, 0, 0, 0, 1]);
                    var s = new Uint8Array([105, 115, 111, 109]),
                        o = new Uint8Array([97, 118, 99, 49]),
                        l = new Uint8Array([0, 0, 0, 1]);
                    e.FTYP = e.box(e.types.ftyp, s, l, s, o), e.DINF = e.box(e.types.dinf, e.box(e.types.dref, a))
                }, e.box = function (e) {
                    for (var t, r = Array.prototype.slice.call(arguments, 1), i = 8, a = r.length, n = a; a--;) i += r[a].byteLength;
                    for ((t = new Uint8Array(i))[0] = i >> 24 & 255, t[1] = i >> 16 & 255, t[2] = i >> 8 & 255, t[3] = 255 & i, t.set(e, 4), a = 0, i = 8; a < n; a++) t.set(r[a], i), i += r[a].byteLength;
                    return t
                }, e.hdlr = function (t) {
                    return e.box(e.types.hdlr, e.HDLR_TYPES[t])
                }, e.mdat = function (t) {
                    return e.box(e.types.mdat, t)
                }, e.mdhd = function (t, r) {
                    r *= t;
                    var i = Math.floor(r / (L + 1)),
                        a = Math.floor(r % (L + 1));
                    return e.box(e.types.mdhd, new Uint8Array([1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 0, 0, 0, 0, 0, 0, 0, 3, t >> 24 & 255, t >> 16 & 255, t >> 8 & 255, 255 & t, i >> 24, i >> 16 & 255, i >> 8 & 255, 255 & i, a >> 24, a >> 16 & 255, a >> 8 & 255, 255 & a, 85, 196, 0, 0]))
                }, e.mdia = function (t) {
                    return e.box(e.types.mdia, e.mdhd(t.timescale, t.duration), e.hdlr(t.type), e.minf(t))
                }, e.mfhd = function (t) {
                    return e.box(e.types.mfhd, new Uint8Array([0, 0, 0, 0, t >> 24, t >> 16 & 255, t >> 8 & 255, 255 & t]))
                }, e.minf = function (t) {
                    return "audio" === t.type ? e.box(e.types.minf, e.box(e.types.smhd, e.SMHD), e.DINF, e.stbl(t)) : e.box(e.types.minf, e.box(e.types.vmhd, e.VMHD), e.DINF, e.stbl(t))
                }, e.moof = function (t, r, i) {
                    return e.box(e.types.moof, e.mfhd(t), e.traf(i, r))
                }, e.moov = function (t) {
                    for (var r = t.length, i = []; r--;) i[r] = e.trak(t[r]);
                    return e.box.apply(null, [e.types.moov, e.mvhd(t[0].timescale, t[0].duration)].concat(i).concat(e.mvex(t)))
                }, e.mvex = function (t) {
                    for (var r = t.length, i = []; r--;) i[r] = e.trex(t[r]);
                    return e.box.apply(null, [e.types.mvex].concat(i))
                }, e.mvhd = function (t, r) {
                    r *= t;
                    var i = Math.floor(r / (L + 1)),
                        a = Math.floor(r % (L + 1)),
                        n = new Uint8Array([1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 0, 0, 0, 0, 0, 0, 0, 3, t >> 24 & 255, t >> 16 & 255, t >> 8 & 255, 255 & t, i >> 24, i >> 16 & 255, i >> 8 & 255, 255 & i, a >> 24, a >> 16 & 255, a >> 8 & 255, 255 & a, 0, 1, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 64, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 255, 255, 255, 255]);
                    return e.box(e.types.mvhd, n)
                }, e.sdtp = function (t) {
                    var r, i, a = t.samples || [],
                        n = new Uint8Array(4 + a.length);
                    for (i = 0; i < a.length; i++) r = a[i].flags, n[i + 4] = r.dependsOn << 4 | r.isDependedOn << 2 | r.hasRedundancy;
                    return e.box(e.types.sdtp, n)
                }, e.stbl = function (t) {
                    return e.box(e.types.stbl, e.stsd(t), e.box(e.types.stts, e.STTS), e.box(e.types.stsc, e.STSC), e.box(e.types.stsz, e.STSZ), e.box(e.types.stco, e.STCO))
                }, e.avc1 = function (t) {
                    var r, i, a, n = [],
                        s = [];
                    for (r = 0; r < t.sps.length; r++) a = (i = t.sps[r]).byteLength, n.push(a >>> 8 & 255), n.push(255 & a), n = n.concat(Array.prototype.slice.call(i));
                    for (r = 0; r < t.pps.length; r++) a = (i = t.pps[r]).byteLength, s.push(a >>> 8 & 255), s.push(255 & a), s = s.concat(Array.prototype.slice.call(i));
                    var o = e.box(e.types.avcC, new Uint8Array([1, n[3], n[4], n[5], 255, 224 | t.sps.length].concat(n).concat([t.pps.length]).concat(s))),
                        l = t.width,
                        d = t.height,
                        u = t.pixelRatio[0],
                        c = t.pixelRatio[1];
                    return e.box(e.types.avc1, new Uint8Array([0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, l >> 8 & 255, 255 & l, d >> 8 & 255, 255 & d, 0, 72, 0, 0, 0, 72, 0, 0, 0, 0, 0, 0, 0, 1, 18, 100, 97, 105, 108, 121, 109, 111, 116, 105, 111, 110, 47, 104, 108, 115, 46, 106, 115, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 24, 17, 17]), o, e.box(e.types.btrt, new Uint8Array([0, 28, 156, 128, 0, 45, 198, 192, 0, 45, 198, 192])), e.box(e.types.pasp, new Uint8Array([u >> 24, u >> 16 & 255, u >> 8 & 255, 255 & u, c >> 24, c >> 16 & 255, c >> 8 & 255, 255 & c])))
                }, e.esds = function (e) {
                    var t = e.config.length;
                    return new Uint8Array([0, 0, 0, 0, 3, 23 + t, 0, 1, 0, 4, 15 + t, 64, 21, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 5].concat([t]).concat(e.config).concat([6, 1, 2]))
                }, e.mp4a = function (t) {
                    var r = t.samplerate;
                    return e.box(e.types.mp4a, new Uint8Array([0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, t.channelCount, 0, 16, 0, 0, 0, 0, r >> 8 & 255, 255 & r, 0, 0]), e.box(e.types.esds, e.esds(t)))
                }, e.mp3 = function (t) {
                    var r = t.samplerate;
                    return e.box(e.types[".mp3"], new Uint8Array([0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, t.channelCount, 0, 16, 0, 0, 0, 0, r >> 8 & 255, 255 & r, 0, 0]))
                }, e.stsd = function (t) {
                    return "audio" === t.type ? t.isAAC || "mp3" !== t.codec ? e.box(e.types.stsd, e.STSD, e.mp4a(t)) : e.box(e.types.stsd, e.STSD, e.mp3(t)) : e.box(e.types.stsd, e.STSD, e.avc1(t))
                }, e.tkhd = function (t) {
                    var r = t.id,
                        i = t.duration * t.timescale,
                        a = t.width,
                        n = t.height,
                        s = Math.floor(i / (L + 1)),
                        o = Math.floor(i % (L + 1));
                    return e.box(e.types.tkhd, new Uint8Array([1, 0, 0, 7, 0, 0, 0, 0, 0, 0, 0, 2, 0, 0, 0, 0, 0, 0, 0, 3, r >> 24 & 255, r >> 16 & 255, r >> 8 & 255, 255 & r, 0, 0, 0, 0, s >> 24, s >> 16 & 255, s >> 8 & 255, 255 & s, o >> 24, o >> 16 & 255, o >> 8 & 255, 255 & o, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 64, 0, 0, 0, a >> 8 & 255, 255 & a, 0, 0, n >> 8 & 255, 255 & n, 0, 0]))
                }, e.traf = function (t, r) {
                    var i = e.sdtp(t),
                        a = t.id,
                        n = Math.floor(r / (L + 1)),
                        s = Math.floor(r % (L + 1));
                    return e.box(e.types.traf, e.box(e.types.tfhd, new Uint8Array([0, 0, 0, 0, a >> 24, a >> 16 & 255, a >> 8 & 255, 255 & a])), e.box(e.types.tfdt, new Uint8Array([1, 0, 0, 0, n >> 24, n >> 16 & 255, n >> 8 & 255, 255 & n, s >> 24, s >> 16 & 255, s >> 8 & 255, 255 & s])), e.trun(t, i.length + 16 + 20 + 8 + 16 + 8 + 8), i)
                }, e.trak = function (t) {
                    return t.duration = t.duration || 4294967295, e.box(e.types.trak, e.tkhd(t), e.mdia(t))
                }, e.trex = function (t) {
                    var r = t.id;
                    return e.box(e.types.trex, new Uint8Array([0, 0, 0, 0, r >> 24, r >> 16 & 255, r >> 8 & 255, 255 & r, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 1]))
                }, e.trun = function (t, r) {
                    var i, a, n, s, o, l, d = t.samples || [],
                        u = d.length,
                        c = 12 + 16 * u,
                        h = new Uint8Array(c);
                    for (r += 8 + c, h.set([0, 0, 15, 1, u >>> 24 & 255, u >>> 16 & 255, u >>> 8 & 255, 255 & u, r >>> 24 & 255, r >>> 16 & 255, r >>> 8 & 255, 255 & r], 0), i = 0; i < u; i++) n = (a = d[i]).duration, s = a.size, o = a.flags, l = a.cts, h.set([n >>> 24 & 255, n >>> 16 & 255, n >>> 8 & 255, 255 & n, s >>> 24 & 255, s >>> 16 & 255, s >>> 8 & 255, 255 & s, o.isLeading << 2 | o.dependsOn, o.isDependedOn << 6 | o.hasRedundancy << 4 | o.paddingValue << 1 | o.isNonSync, 61440 & o.degradPrio, 15 & o.degradPrio, l >>> 24 & 255, l >>> 16 & 255, l >>> 8 & 255, 255 & l], 12 + 16 * i);
                    return e.box(e.types.trun, h)
                }, e.initSegment = function (t) {
                    e.types || e.init();
                    var r, i = e.moov(t);
                    return (r = new Uint8Array(e.FTYP.byteLength + i.byteLength)).set(e.FTYP), r.set(i, e.FTYP.byteLength), r
                }, e
            }();

        function O(e, t, r, i) {
            void 0 === r && (r = 1), void 0 === i && (i = !1);
            var a = e * t * r;
            return i ? Math.round(a) : a
        }

        function C(e, t) {
            return void 0 === t && (t = !1), O(e, 1e3, 1 / 9e4, t)
        }

        function I(e, t) {
            return void 0 === t && (t = 1), O(e, 9e4, 1 / t)
        }
        var P = I(10),
            x = I(.2),
            M = null;

        function F(e, t) {
            var r;
            if (void 0 === t) return e;
            for (r = t < e ? -8589934592 : 8589934592; Math.abs(e - t) > 4294967296;) e += r;
            return e
        }
        var U, N = function () {
            function e(e, t, r, i) {
                if (this.observer = e, this.config = t, this.typeSupported = r, this.ISGenerated = !1, null === M) {
                    var a = navigator.userAgent.match(/Chrome\/(\d+)/i);
                    M = a ? parseInt(a[1]) : 0
                }
            }
            var t = e.prototype;
            return t.destroy = function () { }, t.resetTimeStamp = function (e) {
                this._initPTS = this._initDTS = e
            }, t.resetInitSegment = function () {
                this.ISGenerated = !1
            }, t.getVideoStartPts = function (e) {
                var t = !1,
                    r = e.reduce((function (e, r) {
                        var i = r.pts - e;
                        return i < -4294967296 ? (t = !0, F(e, r.pts)) : i > 0 ? e : r.pts
                    }), e[0].pts);
                return t && o.b.debug("PTS rollover detected"), r
            }, t.remux = function (e, t, r, a, n, s, l) {
                if (this.ISGenerated || this.generateIS(e, t, n), this.ISGenerated) {
                    var d = e.samples.length,
                        u = t.samples.length,
                        c = n,
                        h = n;
                    if (d && u) {
                        var f = this.getVideoStartPts(t.samples),
                            g = (F(e.samples[0].pts, f) - f) / t.inputTimeScale;
                        c += Math.max(0, g), h += Math.max(0, -g)
                    }
                    if (d) {
                        e.timescale || (o.b.warn("regenerate InitSegment as audio detected"), this.generateIS(e, t, n));
                        var p, v = this.remuxAudio(e, c, s, l);
                        if (u) v && (p = v.endPTS - v.startPTS), t.timescale || (o.b.warn("regenerate InitSegment as video detected"), this.generateIS(e, t, n)), this.remuxVideo(t, h, s, p)
                    } else if (u) {
                        var m = this.remuxVideo(t, h, s, 0, l);
                        m && e.codec && this.remuxEmptyAudio(e, c, s, m)
                    }
                }
                r.samples.length && this.remuxID3(r, n), a.samples.length && this.remuxText(a, n), this.observer.trigger(i.a.FRAG_PARSED)
            }, t.generateIS = function (e, t, r) {
                var n, s, l = this.observer,
                    d = e.samples,
                    u = t.samples,
                    c = this.typeSupported,
                    h = "audio/mp4",
                    f = {},
                    g = {
                        tracks: f
                    },
                    p = void 0 === this._initPTS;
                if (p && (n = s = 1 / 0), e.config && d.length && (e.timescale = e.samplerate, o.b.log("audio sampling rate : " + e.samplerate), e.isAAC || (c.mpeg ? (h = "audio/mpeg", e.codec = "") : c.mp3 && (e.codec = "mp3")), f.audio = {
                    container: h,
                    codec: e.codec,
                    initSegment: !e.isAAC && c.mpeg ? new Uint8Array : D.initSegment([e]),
                    metadata: {
                        channelCount: e.channelCount
                    }
                }, p && (n = s = d[0].pts - Math.round(e.inputTimeScale * r))), t.sps && t.pps && u.length) {
                    var v = t.inputTimeScale;
                    if (t.timescale = v, f.video = {
                        container: "video/mp4",
                        codec: t.codec,
                        initSegment: D.initSegment([t]),
                        metadata: {
                            width: t.width,
                            height: t.height
                        }
                    }, p) {
                        var m = this.getVideoStartPts(u),
                            y = Math.round(v * r);
                        s = Math.min(s, F(u[0].dts, m) - y), n = Math.min(n, m - y), this.observer.trigger(i.a.INIT_PTS_FOUND, {
                            initPTS: n
                        })
                    }
                } else p && f.audio && this.observer.trigger(i.a.INIT_PTS_FOUND, {
                    initPTS: n
                });
                Object.keys(f).length ? (l.trigger(i.a.FRAG_PARSING_INIT_SEGMENT, g), this.ISGenerated = !0, p && (this._initPTS = n, this._initDTS = s)) : l.trigger(i.a.ERROR, {
                    type: a.b.MEDIA_ERROR,
                    details: a.a.FRAG_PARSING_ERROR,
                    fatal: !1,
                    reason: "no audio/video samples found"
                })
            }, t.remuxVideo = function (e, t, r, n) {
                var s, l, d, u, c, h = e.timescale,
                    f = e.samples,
                    g = [],
                    p = f.length,
                    v = this._initPTS,
                    m = 8,
                    y = Number.POSITIVE_INFINITY,
                    b = Number.NEGATIVE_INFINITY,
                    T = 0,
                    E = !1,
                    S = this.nextAvcDts;
                if (0 !== p) {
                    if (!r) S = t * h - (f[0].pts - F(f[0].dts, f[0].pts));
                    for (var _ = 0; _ < p; _++) {
                        var R = f[_];
                        R.pts = F(R.pts - v, S), R.dts = F(R.dts - v, S), R.dts > R.pts && (T = Math.max(Math.min(T, R.pts - R.dts), -1 * x)), R.dts < f[_ > 0 ? _ - 1 : _].dts && (E = !0)
                    }
                    E && f.sort((function (e, t) {
                        var r = e.dts - t.dts,
                            i = e.pts - t.pts;
                        return r || i || e.id - t.id
                    })), u = f[0].dts, c = f[p - 1].dts;
                    var A = Math.round((c - u) / (p - 1));
                    if (T < 0) {
                        if (T < -2 * A) {
                            o.b.warn("PTS < DTS detected in video samples, offsetting DTS from PTS by " + C(-A, !0) + " ms");
                            for (var k = T, w = 0; w < p; w++) f[w].dts = k = Math.max(k, f[w].pts - A), f[w].pts = Math.max(k, f[w].pts)
                        } else {
                            o.b.warn("PTS < DTS detected in video samples, shifting DTS by " + C(T, !0) + " ms to overcome this issue");
                            for (var L = 0; L < p; L++) f[L].dts = f[L].dts + T
                        }
                        u = f[0].dts, c = f[p - 1].dts
                    }
                    if (r) {
                        var O = u - S,
                            I = O > A;
                        if (I || O < -1) {
                            I ? o.b.warn("AVC: " + C(O, !0) + " ms (" + O + "dts) hole between fragments detected, filling it") : o.b.warn("AVC: " + C(-O, !0) + " ms (" + O + "dts) overlapping between fragments detected"), u = S;
                            var P = f[0].pts - O;
                            f[0].dts = u, f[0].pts = P, o.b.log("Video: First PTS/DTS adjusted: " + C(P, !0) + "/" + C(u, !0) + ", delta: " + C(O, !0) + " ms")
                        }
                    }
                    M && M < 75 && (u = Math.max(0, u));
                    for (var U = 0, N = 0, B = 0; B < p; B++) {
                        for (var G = f[B], K = G.units, j = K.length, H = 0, V = 0; V < j; V++) H += K[V].data.length;
                        N += H, U += j, G.length = H, G.dts = Math.max(G.dts, u), G.pts = Math.max(G.pts, G.dts, 0), y = Math.min(G.pts, y), b = Math.max(G.pts, b)
                    }
                    c = f[p - 1].dts;
                    var Y = N + 4 * U + 8;
                    try {
                        l = new Uint8Array(Y)
                    } catch (e) {
                        return void this.observer.trigger(i.a.ERROR, {
                            type: a.b.MUX_ERROR,
                            details: a.a.REMUX_ALLOC_ERROR,
                            fatal: !1,
                            bytes: Y,
                            reason: "fail allocating video mdat " + Y
                        })
                    }
                    var W = new DataView(l.buffer);
                    W.setUint32(0, Y), l.set(D.types.mdat, 4);
                    for (var q = 0; q < p; q++) {
                        for (var X, z = f[q], Q = z.units, $ = 0, J = 0, Z = Q.length; J < Z; J++) {
                            var ee = Q[J],
                                te = ee.data,
                                re = ee.data.byteLength;
                            W.setUint32(m, re), m += 4, l.set(te, m), m += re, $ += 4 + re
                        }
                        if (q < p - 1) s = f[q + 1].dts - z.dts;
                        else {
                            var ie = this.config,
                                ae = z.dts - f[q > 0 ? q - 1 : q].dts;
                            if (ie.stretchShortVideoTrack) {
                                var ne = ie.maxBufferHole,
                                    se = Math.floor(ne * h),
                                    oe = (n ? y + n * h : this.nextAudioPts) - z.pts;
                                oe > se ? ((s = oe - ae) < 0 && (s = ae), o.b.log("It is approximately " + C(oe, !1) + " ms to the next segment; using duration " + C(s, !1) + " ms for the last video frame.")) : s = ae
                            } else s = ae
                        }
                        X = Math.round(z.pts - z.dts), g.push({
                            size: $,
                            duration: s,
                            cts: X,
                            flags: {
                                isLeading: 0,
                                isDependedOn: 0,
                                hasRedundancy: 0,
                                degradPrio: 0,
                                dependsOn: z.key ? 2 : 1,
                                isNonSync: z.key ? 0 : 1
                            }
                        })
                    }
                    this.nextAvcDts = c + s;
                    var le = e.dropped;
                    if (e.nbNalu = 0, e.dropped = 0, g.length && navigator.userAgent.toLowerCase().indexOf("chrome") > -1) {
                        var de = g[0].flags;
                        de.dependsOn = 2, de.isNonSync = 0
                    }
                    e.samples = g, d = D.moof(e.sequenceNumber++, u, e), e.samples = [];
                    var ue = {
                        data1: d,
                        data2: l,
                        startPTS: y / h,
                        endPTS: (b + s) / h,
                        startDTS: u / h,
                        endDTS: this.nextAvcDts / h,
                        type: "video",
                        hasAudio: !1,
                        hasVideo: !0,
                        nb: g.length,
                        dropped: le
                    };
                    return this.observer.trigger(i.a.FRAG_PARSING_DATA, ue), ue
                }
            }, t.remuxAudio = function (e, t, r, n) {
                var s, l, d, u, c, h, f = e.inputTimeScale,
                    g = e.timescale,
                    p = f / g,
                    v = (e.isAAC ? 1024 : 1152) * p,
                    m = this._initPTS,
                    y = !e.isAAC && this.typeSupported.mpeg,
                    b = y ? 0 : 8,
                    T = e.samples,
                    E = [],
                    S = this.nextAudioPts;
                if (r |= T.length && S && (n && Math.abs(t - S / f) < .1 || Math.abs(T[0].pts - S - m) < 20 * v), T.forEach((function (e) {
                    e.pts = e.dts = F(e.pts - m, t * f)
                })), 0 !== (T = T.filter((function (e) {
                    return e.pts >= 0
                }))).length) {
                    if (r || (S = n ? Math.max(0, t * f) : T[0].pts), e.isAAC)
                        for (var _ = this.config.maxAudioFramesDrift, R = 0, A = S; R < T.length;) {
                            var k = T[R],
                                L = k.pts,
                                O = L - A;
                            if (O <= -_ * v) r || R > 0 ? (o.b.warn("Dropping 1 audio frame @ " + C(A, !0) / 1e3 + "s due to " + C(O, !0) + " ms overlap."), T.splice(R, 1)) : (o.b.warn("Audio frame @ " + C(L, !0) / 1e3 + "s overlaps nextAudioPts by " + C(O, !0) + " ms."), A = L + v, R++);
                            else if (O >= _ * v && O < P && A) {
                                var I = Math.round(O / v);
                                o.b.warn("Injecting " + I + " audio frames @ " + C(A, !0) / 1e3 + "s due to " + C(O, !0) + " ms gap.");
                                for (var x = 0; x < I; x++) {
                                    var M = Math.max(A, 0);
                                    (l = w.getSilentFrame(e.manifestCodec || e.codec, e.channelCount)) || (o.b.log("Unable to get silent frame for given audio codec; duplicating last frame instead."), l = k.unit.subarray()), T.splice(R, 0, {
                                        unit: l,
                                        pts: M,
                                        dts: M
                                    }), A += v, R++
                                }
                                k.pts = k.dts = A, A += v, R++
                            } else Math.abs(O), k.pts = k.dts = A, A += v, R++
                        }
                    for (var U = T.length, N = 0; U--;) N += T[U].unit.byteLength;
                    for (var B = 0, G = T.length; B < G; B++) {
                        var K = T[B],
                            j = K.unit,
                            H = K.pts;
                        if (void 0 !== h && s) s.duration = Math.round((H - h) / p);
                        else {
                            var V = H - S,
                                Y = 0;
                            if (r && e.isAAC && V) {
                                if (V > 0 && V < P) Y = Math.round((H - S) / v), o.b.log(C(V, !0) + " ms hole between AAC samples detected,filling it"), Y > 0 && ((l = w.getSilentFrame(e.manifestCodec || e.codec, e.channelCount)) || (l = j.subarray()), N += Y * l.length);
                                else if (V < -12) {
                                    o.b.log("drop overlapping AAC sample, expected/parsed/delta: " + C(S, !0) + " ms / " + C(H, !0) + " ms / " + C(-V, !0) + " ms"), N -= j.byteLength;
                                    continue
                                }
                                H = S
                            }
                            if (c = H, !(N > 0)) return;
                            N += b;
                            try {
                                d = new Uint8Array(N)
                            } catch (e) {
                                return void this.observer.trigger(i.a.ERROR, {
                                    type: a.b.MUX_ERROR,
                                    details: a.a.REMUX_ALLOC_ERROR,
                                    fatal: !1,
                                    bytes: N,
                                    reason: "fail allocating audio mdat " + N
                                })
                            }
                            y || (new DataView(d.buffer).setUint32(0, N), d.set(D.types.mdat, 4));
                            for (var W = 0; W < Y; W++)(l = w.getSilentFrame(e.manifestCodec || e.codec, e.channelCount)) || (o.b.log("Unable to get silent frame for given audio codec; duplicating this frame instead."), l = j.subarray()), d.set(l, b), b += l.byteLength, s = {
                                size: l.byteLength,
                                cts: 0,
                                duration: 1024,
                                flags: {
                                    isLeading: 0,
                                    isDependedOn: 0,
                                    hasRedundancy: 0,
                                    degradPrio: 0,
                                    dependsOn: 1
                                }
                            }, E.push(s)
                        }
                        d.set(j, b);
                        var q = j.byteLength;
                        b += q, s = {
                            size: q,
                            cts: 0,
                            duration: 0,
                            flags: {
                                isLeading: 0,
                                isDependedOn: 0,
                                hasRedundancy: 0,
                                degradPrio: 0,
                                dependsOn: 1
                            }
                        }, E.push(s), h = H
                    }
                    var X = 0;
                    if ((U = E.length) >= 2 && (X = E[U - 2].duration, s.duration = X), U) {
                        this.nextAudioPts = S = h + p * X, e.samples = E, u = y ? new Uint8Array : D.moof(e.sequenceNumber++, c / p, e), e.samples = [];
                        var z = c / f,
                            Q = S / f,
                            $ = {
                                data1: u,
                                data2: d,
                                startPTS: z,
                                endPTS: Q,
                                startDTS: z,
                                endDTS: Q,
                                type: "audio",
                                hasAudio: !0,
                                hasVideo: !1,
                                nb: U
                            };
                        return this.observer.trigger(i.a.FRAG_PARSING_DATA, $), $
                    }
                    return null
                }
            }, t.remuxEmptyAudio = function (e, t, r, i) {
                var a = e.inputTimeScale,
                    n = a / (e.samplerate ? e.samplerate : a),
                    s = this.nextAudioPts,
                    l = (void 0 !== s ? s : i.startDTS * a) + this._initDTS,
                    d = i.endDTS * a + this._initDTS,
                    u = 1024 * n,
                    c = Math.ceil((d - l) / u),
                    h = w.getSilentFrame(e.manifestCodec || e.codec, e.channelCount);
                if (o.b.warn("remux empty Audio"), h) {
                    for (var f = [], g = 0; g < c; g++) {
                        var p = l + g * u;
                        f.push({
                            unit: h,
                            pts: p,
                            dts: p
                        })
                    }
                    e.samples = f, this.remuxAudio(e, t, r)
                } else o.b.trace("Unable to remuxEmptyAudio since we were unable to get a silent frame for given audio codec!")
            }, t.remuxID3 = function (e, t) {
                var r = e.samples.length;
                if (r) {
                    for (var a = e.inputTimeScale, n = this._initPTS, s = this._initDTS, o = 0; o < r; o++) {
                        var l = e.samples[o];
                        l.pts = F(l.pts - n, t * a) / a, l.dts = F(l.dts - s, t * a) / a
                    }
                    this.observer.trigger(i.a.FRAG_PARSING_METADATA, {
                        samples: e.samples
                    }), e.samples = []
                }
            }, t.remuxText = function (e, t) {
                var r = e.samples.length,
                    a = e.inputTimeScale,
                    n = this._initPTS;
                if (r) {
                    for (var s = 0; s < r; s++) {
                        var o = e.samples[s];
                        o.pts = F(o.pts - n, t * a) / a
                    }
                    e.samples.sort((function (e, t) {
                        return e.pts - t.pts
                    })), this.observer.trigger(i.a.FRAG_PARSING_USERDATA, {
                        samples: e.samples
                    })
                }
                e.samples = []
            }, e
        }(),
            B = function () {
                function e(e) {
                    this.observer = e
                }
                var t = e.prototype;
                return t.destroy = function () { }, t.resetTimeStamp = function () { }, t.resetInitSegment = function () { }, t.remux = function (e, t, r, a, n, s, o, l) {
                    var d = this.observer,
                        u = "";
                    e && (u += "audio"), t && (u += "video"), d.trigger(i.a.FRAG_PARSING_DATA, {
                        data1: l,
                        startPTS: n,
                        startDTS: n,
                        type: u,
                        hasAudio: !!e,
                        hasVideo: !!t,
                        nb: 1,
                        dropped: 0
                    }), d.trigger(i.a.FRAG_PARSED)
                }, e
            }(),
            G = Object(l.a)();
        try {
            U = G.performance.now.bind(G.performance)
        } catch (e) {
            o.b.debug("Unable to use Performance API on this environment"), U = G.Date.now
        }
        var K = function () {
            function e(e, t, r, i) {
                this.observer = e, this.typeSupported = t, this.config = r, this.vendor = i
            }
            var t = e.prototype;
            return t.destroy = function () {
                var e = this.demuxer;
                e && e.destroy()
            }, t.push = function (e, t, r, a, s, o, l, d, u, c, h, f) {
                var g = this;
                if (e.byteLength > 0 && null != t && null != t.key && "AES-128" === t.method) {
                    var p = this.decrypter;
                    null == p && (p = this.decrypter = new n.a(this.observer, this.config));
                    var v = U();
                    p.decrypt(e, t.key.buffer, t.iv.buffer, (function (e) {
                        var n = U();
                        g.observer.trigger(i.a.FRAG_DECRYPTED, {
                            stats: {
                                tstart: v,
                                tdecrypt: n
                            }
                        }), g.pushDecrypted(new Uint8Array(e), t, new Uint8Array(r), a, s, o, l, d, u, c, h, f)
                    }))
                } else this.pushDecrypted(new Uint8Array(e), t, new Uint8Array(r), a, s, o, l, d, u, c, h, f)
            }, t.pushDecrypted = function (e, t, r, n, s, o, l, d, u, c, h, f) {
                var g = this.demuxer,
                    p = this.remuxer;
                if (!g || l || d) {
                    for (var v, m = this.observer, T = this.typeSupported, E = this.config, S = [{
                        demux: A,
                        remux: N
                    }, {
                        demux: b.a,
                        remux: B
                    }, {
                        demux: y,
                        remux: N
                    }, {
                        demux: k,
                        remux: N
                    }], _ = 0, R = S.length; _ < R && !(v = S[_]).demux.probe(e); _++);
                    if (!v) return void m.trigger(i.a.ERROR, {
                        type: a.b.MEDIA_ERROR,
                        details: a.a.FRAG_PARSING_ERROR,
                        fatal: !0,
                        reason: "no demux matching with content found"
                    });
                    p && p instanceof v.remux || (p = new v.remux(m, E, T, this.vendor)), g && g instanceof v.demux || (g = new v.demux(m, p, E, T), this.probe = v.demux.probe), this.demuxer = g, this.remuxer = p
                } (l || d) && (g.resetInitSegment(r, n, s, c), p.resetInitSegment()), l && (g.resetTimeStamp(f), p.resetTimeStamp(f)), "function" == typeof g.setDecryptData && g.setDecryptData(t), g.append(e, o, u, h)
            }, e
        }();
        t.a = K
    }, function (e, t, r) {
        "use strict";
        var i = r(0),
            a = r(1),
            n = Math.pow(2, 32) - 1,
            s = function () {
                function e(e, t) {
                    this.observer = e, this.remuxer = t
                }
                var t = e.prototype;
                return t.resetTimeStamp = function (e) {
                    this.initPTS = e
                }, t.resetInitSegment = function (t, r, i, n) {
                    if (t && t.byteLength) {
                        var s = this.initData = e.parseInitSegment(t);
                        null == r && (r = "mp4a.40.5"), null == i && (i = "avc1.42e01e");
                        var o = {};
                        s.audio && s.video ? o.audiovideo = {
                            container: "video/mp4",
                            codec: r + "," + i,
                            initSegment: n ? t : null
                        } : (s.audio && (o.audio = {
                            container: "audio/mp4",
                            codec: r,
                            initSegment: n ? t : null
                        }), s.video && (o.video = {
                            container: "video/mp4",
                            codec: i,
                            initSegment: n ? t : null
                        })), this.observer.trigger(a.a.FRAG_PARSING_INIT_SEGMENT, {
                            tracks: o
                        })
                    } else r && (this.audioCodec = r), i && (this.videoCodec = i)
                }, e.probe = function (t) {
                    return e.findBox({
                        data: t,
                        start: 0,
                        end: Math.min(t.length, 16384)
                    }, ["moof"]).length > 0
                }, e.bin2str = function (e) {
                    return String.fromCharCode.apply(null, e)
                }, e.readUint16 = function (e, t) {
                    e.data && (t += e.start, e = e.data);
                    var r = e[t] << 8 | e[t + 1];
                    return r < 0 ? 65536 + r : r
                }, e.readUint32 = function (e, t) {
                    e.data && (t += e.start, e = e.data);
                    var r = e[t] << 24 | e[t + 1] << 16 | e[t + 2] << 8 | e[t + 3];
                    return r < 0 ? 4294967296 + r : r
                }, e.writeUint32 = function (e, t, r) {
                    e.data && (t += e.start, e = e.data), e[t] = r >> 24, e[t + 1] = r >> 16 & 255, e[t + 2] = r >> 8 & 255, e[t + 3] = 255 & r
                }, e.findBox = function (t, r) {
                    var i, a, n, s, o, l, d = [];
                    if (t.data ? (o = t.start, n = t.end, t = t.data) : (o = 0, n = t.byteLength), !r.length) return null;
                    for (i = o; i < n;) l = (a = e.readUint32(t, i)) > 1 ? i + a : n, e.bin2str(t.subarray(i + 4, i + 8)) === r[0] && (1 === r.length ? d.push({
                        data: t,
                        start: i + 8,
                        end: l
                    }) : (s = e.findBox({
                        data: t,
                        start: i + 8,
                        end: l
                    }, r.slice(1))).length && (d = d.concat(s))), i = l;
                    return d
                }, e.parseSegmentIndex = function (t) {
                    var r, i = e.findBox(t, ["moov"])[0],
                        a = i ? i.end : null,
                        n = 0,
                        s = e.findBox(t, ["sidx"]);
                    if (!s || !s[0]) return null;
                    r = [];
                    var o = (s = s[0]).data[0];
                    n = 0 === o ? 8 : 16;
                    var l = e.readUint32(s, n);
                    n += 4;
                    n += 0 === o ? 8 : 16, n += 2;
                    var d = s.end + 0,
                        u = e.readUint16(s, n);
                    n += 2;
                    for (var c = 0; c < u; c++) {
                        var h = n,
                            f = e.readUint32(s, h);
                        h += 4;
                        var g = 2147483647 & f;
                        if (1 === (2147483648 & f) >>> 31) return void console.warn("SIDX has hierarchical references (not supported)");
                        var p = e.readUint32(s, h);
                        h += 4, r.push({
                            referenceSize: g,
                            subsegmentDuration: p,
                            info: {
                                duration: p / l,
                                start: d,
                                end: d + g - 1
                            }
                        }), d += g, n = h += 4
                    }
                    return {
                        earliestPresentationTime: 0,
                        timescale: l,
                        version: o,
                        referencesCount: u,
                        references: r,
                        moovEndOffset: a
                    }
                }, e.parseInitSegment = function (t) {
                    var r = [];
                    return e.findBox(t, ["moov", "trak"]).forEach((function (t) {
                        var a = e.findBox(t, ["tkhd"])[0];
                        if (a) {
                            var n = a.data[a.start],
                                s = 0 === n ? 12 : 20,
                                o = e.readUint32(a, s),
                                l = e.findBox(t, ["mdia", "mdhd"])[0];
                            if (l) {
                                s = 0 === (n = l.data[l.start]) ? 12 : 20;
                                var d = e.readUint32(l, s),
                                    u = e.findBox(t, ["mdia", "hdlr"])[0];
                                if (u) {
                                    var c = {
                                        soun: "audio",
                                        vide: "video"
                                    }[e.bin2str(u.data.subarray(u.start + 8, u.start + 12))];
                                    if (c) {
                                        var h = e.findBox(t, ["mdia", "minf", "stbl", "stsd"]);
                                        if (h.length) {
                                            h = h[0];
                                            var f = e.bin2str(h.data.subarray(h.start + 12, h.start + 16));
                                            i.b.log("MP4Demuxer:" + c + ":" + f + " found")
                                        }
                                        r[o] = {
                                            timescale: d,
                                            type: c
                                        }, r[c] = {
                                            timescale: d,
                                            id: o
                                        }
                                    }
                                }
                            }
                        }
                    })), r
                }, e.getStartDTS = function (t, r) {
                    var i, a, n;
                    return i = e.findBox(r, ["moof", "traf"]), a = [].concat.apply([], i.map((function (r) {
                        return e.findBox(r, ["tfhd"]).map((function (i) {
                            var a, n;
                            return a = e.readUint32(i, 4), n = t[a].timescale || 9e4, e.findBox(r, ["tfdt"]).map((function (t) {
                                var r, i;
                                return r = t.data[t.start], i = e.readUint32(t, 4), 1 === r && (i *= Math.pow(2, 32), i += e.readUint32(t, 8)), i
                            }))[0] / n
                        }))
                    }))), n = Math.min.apply(null, a), isFinite(n) ? n : 0
                }, e.offsetStartDTS = function (t, r, i) {
                    e.findBox(r, ["moof", "traf"]).map((function (r) {
                        return e.findBox(r, ["tfhd"]).map((function (a) {
                            var s = e.readUint32(a, 4),
                                o = t[s].timescale || 9e4;
                            e.findBox(r, ["tfdt"]).map((function (t) {
                                var r = t.data[t.start],
                                    a = e.readUint32(t, 4);
                                if (0 === r) e.writeUint32(t, 4, a - i * o);
                                else {
                                    a *= Math.pow(2, 32), a += e.readUint32(t, 8), a -= i * o, a = Math.max(a, 0);
                                    var s = Math.floor(a / (n + 1)),
                                        l = Math.floor(a % (n + 1));
                                    e.writeUint32(t, 4, s), e.writeUint32(t, 8, l)
                                }
                            }))
                        }))
                    }))
                }, t.append = function (t, r, i, n) {
                    var s = this.initData;
                    s || (this.resetInitSegment(t, this.audioCodec, this.videoCodec, !1), s = this.initData);
                    var o, l = this.initPTS;
                    if (void 0 === l) {
                        var d = e.getStartDTS(s, t);
                        this.initPTS = l = d - r, this.observer.trigger(a.a.INIT_PTS_FOUND, {
                            initPTS: l
                        })
                    }
                    e.offsetStartDTS(s, t, l), o = e.getStartDTS(s, t), this.remuxer.remux(s.audio, s.video, null, null, o, i, n, t)
                }, t.destroy = function () { }, e
            }();
        t.a = s
    }, function (e, t, r) {
        function i(e) {
            var t = {};

            function r(i) {
                if (t[i]) return t[i].exports;
                var a = t[i] = {
                    i: i,
                    l: !1,
                    exports: {}
                };
                return e[i].call(a.exports, a, a.exports, r), a.l = !0, a.exports
            }
            r.m = e, r.c = t, r.i = function (e) {
                return e
            }, r.d = function (e, t, i) {
                r.o(e, t) || Object.defineProperty(e, t, {
                    configurable: !1,
                    enumerable: !0,
                    get: i
                })
            }, r.r = function (e) {
                Object.defineProperty(e, "__esModule", {
                    value: !0
                })
            }, r.n = function (e) {
                var t = e && e.__esModule ? function () {
                    return e.default
                } : function () {
                    return e
                };
                return r.d(t, "a", t), t
            }, r.o = function (e, t) {
                return Object.prototype.hasOwnProperty.call(e, t)
            }, r.p = "/", r.oe = function (e) {
                throw console.error(e), e
            };
            var i = r(r.s = ENTRY_MODULE);
            return i.default || i
        }

        function a(e) {
            return (e + "").replace(/[.?*+^$[\]\\(){}|-]/g, "\\$&")
        }

        function n(e, t, i) {
            var n = {};
            n[i] = [];
            var s = t.toString(),
                o = s.match(/^function\s?\w*\(\w+,\s*\w+,\s*(\w+)\)/);
            if (!o) return n;
            for (var l, d = o[1], u = new RegExp("(\\\\n|\\W)" + a(d) + "\\(\\s*(/\\*.*?\\*/)?\\s*.*?([\\.|\\-|\\+|\\w|/|@]+).*?\\)", "g"); l = u.exec(s);) "dll-reference" !== l[3] && n[i].push(l[3]);
            for (u = new RegExp("\\(" + a(d) + '\\("(dll-reference\\s([\\.|\\-|\\+|\\w|/|@]+))"\\)\\)\\(\\s*(/\\*.*?\\*/)?\\s*.*?([\\.|\\-|\\+|\\w|/|@]+).*?\\)', "g"); l = u.exec(s);) e[l[2]] || (n[i].push(l[1]), e[l[2]] = r(l[1]).m), n[l[2]] = n[l[2]] || [], n[l[2]].push(l[4]);
            for (var c, h = Object.keys(n), f = 0; f < h.length; f++)
                for (var g = 0; g < n[h[f]].length; g++) c = n[h[f]][g], isNaN(1 * c) || (n[h[f]][g] = 1 * n[h[f]][g]);
            return n
        }

        function s(e) {
            return Object.keys(e).reduce((function (t, r) {
                return t || e[r].length > 0
            }), !1)
        }
        e.exports = function (e, t) {
            t = t || {};
            var a = {
                main: r.m
            },
                o = t.all ? {
                    main: Object.keys(a.main)
                } : function (e, t) {
                    for (var r = {
                        main: [t]
                    }, i = {
                        main: []
                    }, a = {
                        main: {}
                    }; s(r);)
                        for (var o = Object.keys(r), l = 0; l < o.length; l++) {
                            var d = o[l],
                                u = r[d].pop();
                            if (a[d] = a[d] || {}, !a[d][u] && e[d][u]) {
                                a[d][u] = !0, i[d] = i[d] || [], i[d].push(u);
                                for (var c = n(e, e[d][u], d), h = Object.keys(c), f = 0; f < h.length; f++) r[h[f]] = r[h[f]] || [], r[h[f]] = r[h[f]].concat(c[h[f]])
                            }
                        }
                    return i
                }(a, e),
                l = "";
            Object.keys(o).filter((function (e) {
                return "main" !== e
            })).forEach((function (e) {
                for (var t = 0; o[e][t];) t++;
                o[e].push(t), a[e][t] = "(function(module, exports, __webpack_require__) { module.exports = __webpack_require__; })", l = l + "var " + e + " = (" + i.toString().replace("ENTRY_MODULE", JSON.stringify(t)) + ")({" + o[e].map((function (t) {
                    return JSON.stringify(t) + ": " + a[e][t].toString()
                })).join(",") + "});\n"
            })), l = l + "new ((" + i.toString().replace("ENTRY_MODULE", JSON.stringify(e)) + ")({" + o.main.map((function (e) {
                return JSON.stringify(e) + ": " + a.main[e].toString()
            })).join(",") + "}))(self);";
            var d = new window.Blob([l], {
                type: "text/javascript"
            });
            if (t.bare) return d;
            var u = (window.URL || window.webkitURL || window.mozURL || window.msURL).createObjectURL(d),
                c = new window.Worker(u);
            return c.objectURL = u, c
        }
    }, function (e, t, r) {
        "use strict";
        r.r(t);
        var i = r(9),
            a = r(1),
            n = r(0),
            s = r(8);
        t.default = function (e) {
            var t = new s.EventEmitter;
            t.trigger = function (e) {
                for (var r = arguments.length, i = new Array(r > 1 ? r - 1 : 0), a = 1; a < r; a++) i[a - 1] = arguments[a];
                t.emit.apply(t, [e, e].concat(i))
            }, t.off = function (e) {
                for (var r = arguments.length, i = new Array(r > 1 ? r - 1 : 0), a = 1; a < r; a++) i[a - 1] = arguments[a];
                t.removeListener.apply(t, [e].concat(i))
            };
            var r = function (t, r) {
                e.postMessage({
                    event: t,
                    data: r
                })
            };
            e.addEventListener("message", (function (a) {
                var s = a.data;
                switch (s.cmd) {
                    case "init":
                        var o = JSON.parse(s.config);
                        e.demuxer = new i.a(t, s.typeSupported, o, s.vendor), Object(n.a)(o.debug), r("init", null);
                        break;
                    case "demux":
                        e.demuxer.push(s.data, s.decryptdata, s.initSegment, s.audioCodec, s.videoCodec, s.timeOffset, s.discontinuity, s.trackSwitch, s.contiguous, s.duration, s.accurateTimeOffset, s.defaultInitPTS)
                }
            })), t.on(a.a.FRAG_DECRYPTED, r), t.on(a.a.FRAG_PARSING_INIT_SEGMENT, r), t.on(a.a.FRAG_PARSED, r), t.on(a.a.ERROR, r), t.on(a.a.FRAG_PARSING_METADATA, r), t.on(a.a.FRAG_PARSING_USERDATA, r), t.on(a.a.INIT_PTS_FOUND, r), t.on(a.a.FRAG_PARSING_DATA, (function (t, r) {
                var i = [],
                    a = {
                        event: t,
                        data: r
                    };
                r.data1 && (a.data1 = r.data1.buffer, i.push(r.data1.buffer), delete r.data1), r.data2 && (a.data2 = r.data2.buffer, i.push(r.data2.buffer), delete r.data2), e.postMessage(a, i)
            }))
        }
    }, function (e, t, r) {
        "use strict";
        r.r(t), r.d(t, "default", (function () {
            return nr
        }));
        var i = {};
        r.r(i), r.d(i, "newCue", (function () {
            return ft
        }));
        var a, n, s = r(6),
            o = r(2),
            l = r(3),
            d = r(1),
            u = r(0),
            c = {
                hlsEventGeneric: !0,
                hlsHandlerDestroying: !0,
                hlsHandlerDestroyed: !0
            },
            h = function () {
                function e(e) {
                    this.hls = void 0, this.handledEvents = void 0, this.useGenericHandler = void 0, this.hls = e, this.onEvent = this.onEvent.bind(this);
                    for (var t = arguments.length, r = new Array(t > 1 ? t - 1 : 0), i = 1; i < t; i++) r[i - 1] = arguments[i];
                    this.handledEvents = r, this.useGenericHandler = !0, this.registerListeners()
                }
                var t = e.prototype;
                return t.destroy = function () {
                    this.onHandlerDestroying(), this.unregisterListeners(), this.onHandlerDestroyed()
                }, t.onHandlerDestroying = function () { }, t.onHandlerDestroyed = function () { }, t.isEventHandler = function () {
                    return "object" == typeof this.handledEvents && this.handledEvents.length && "function" == typeof this.onEvent
                }, t.registerListeners = function () {
                    this.isEventHandler() && this.handledEvents.forEach((function (e) {
                        if (c[e]) throw new Error("Forbidden event-name: " + e);
                        this.hls.on(e, this.onEvent)
                    }), this)
                }, t.unregisterListeners = function () {
                    this.isEventHandler() && this.handledEvents.forEach((function (e) {
                        this.hls.off(e, this.onEvent)
                    }), this)
                }, t.onEvent = function (e, t) {
                    this.onEventGeneric(e, t)
                }, t.onEventGeneric = function (e, t) {
                    try {
                        (function (e, t) {
                            var r = "on" + e.replace("hls", "");
                            if ("function" != typeof this[r]) throw new Error("Event " + e + " has no generic handler in this " + this.constructor.name + " class (tried " + r + ")");
                            return this[r].bind(this, t)
                        }).call(this, e, t).call()
                    } catch (t) {
                        u.b.error("An internal error happened while handling event " + e + '. Error message: "' + t.message + '". Here is a stacktrace:', t), this.hls.trigger(d.a.ERROR, {
                            type: o.b.OTHER_ERROR,
                            details: o.a.INTERNAL_EXCEPTION,
                            fatal: !1,
                            event: e,
                            err: t
                        })
                    }
                }, e
            }();
        ! function (e) {
            e.MANIFEST = "manifest", e.LEVEL = "level", e.AUDIO_TRACK = "audioTrack", e.SUBTITLE_TRACK = "subtitleTrack"
        }(a || (a = {})),
            function (e) {
                e.MAIN = "main", e.AUDIO = "audio", e.SUBTITLE = "subtitle"
            }(n || (n = {}));
        var f = r(10);

        function g(e, t) {
            for (var r = 0; r < t.length; r++) {
                var i = t[r];
                i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), Object.defineProperty(e, i.key, i)
            }
        }
        var p, v = function () {
            function e(e, t) {
                this._uri = null, this.baseuri = void 0, this.reluri = void 0, this.method = null, this.key = null, this.iv = null, this.baseuri = e, this.reluri = t
            }
            var t, r, i;
            return t = e, (r = [{
                key: "uri",
                get: function () {
                    return !this._uri && this.reluri && (this._uri = Object(s.buildAbsoluteURL)(this.baseuri, this.reluri, {
                        alwaysNormalize: !0
                    })), this._uri
                }
            }]) && g(t.prototype, r), i && g(t, i), e
        }();

        function m(e, t) {
            for (var r = 0; r < t.length; r++) {
                var i = t[r];
                i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), Object.defineProperty(e, i.key, i)
            }
        } ! function (e) {
            e.AUDIO = "audio", e.VIDEO = "video"
        }(p || (p = {}));
        var y = function () {
            function e() {
                var e;
                this._url = null, this._byteRange = null, this._decryptdata = null, this._elementaryStreams = ((e = {})[p.AUDIO] = !1, e[p.VIDEO] = !1, e), this.deltaPTS = 0, this.rawProgramDateTime = null, this.programDateTime = null, this.title = null, this.tagList = [], this.cc = void 0, this.type = void 0, this.relurl = void 0, this.baseurl = void 0, this.duration = void 0, this.start = void 0, this.sn = 0, this.urlId = 0, this.level = 0, this.levelkey = void 0, this.loader = void 0
            }
            var t, r, i, a = e.prototype;
            return a.setByteRange = function (e, t) {
                var r = e.split("@", 2),
                    i = [];
                1 === r.length ? i[0] = t ? t.byteRangeEndOffset : 0 : i[0] = parseInt(r[1]), i[1] = parseInt(r[0]) + i[0], this._byteRange = i
            }, a.addElementaryStream = function (e) {
                this._elementaryStreams[e] = !0
            }, a.hasElementaryStream = function (e) {
                return !0 === this._elementaryStreams[e]
            }, a.createInitializationVector = function (e) {
                for (var t = new Uint8Array(16), r = 12; r < 16; r++) t[r] = e >> 8 * (15 - r) & 255;
                return t
            }, a.setDecryptDataFromLevelKey = function (e, t) {
                var r = e;
                return (null == e ? void 0 : e.method) && e.uri && !e.iv && ((r = new v(e.baseuri, e.reluri)).method = e.method, r.iv = this.createInitializationVector(t)), r
            }, t = e, (r = [{
                key: "url",
                get: function () {
                    return !this._url && this.relurl && (this._url = Object(s.buildAbsoluteURL)(this.baseurl, this.relurl, {
                        alwaysNormalize: !0
                    })), this._url
                },
                set: function (e) {
                    this._url = e
                }
            }, {
                key: "byteRange",
                get: function () {
                    return this._byteRange ? this._byteRange : []
                }
            }, {
                key: "byteRangeStartOffset",
                get: function () {
                    return this.byteRange[0]
                }
            }, {
                key: "byteRangeEndOffset",
                get: function () {
                    return this.byteRange[1]
                }
            }, {
                key: "decryptdata",
                get: function () {
                    if (!this.levelkey && !this._decryptdata) return null;
                    if (!this._decryptdata && this.levelkey) {
                        var e = this.sn;
                        "number" != typeof e && (this.levelkey && "AES-128" === this.levelkey.method && !this.levelkey.iv && u.b.warn('missing IV for initialization segment with method="' + this.levelkey.method + '" - compliance issue'), e = 0), this._decryptdata = this.setDecryptDataFromLevelKey(this.levelkey, e)
                    }
                    return this._decryptdata
                }
            }, {
                key: "endProgramDateTime",
                get: function () {
                    if (null === this.programDateTime) return null;
                    if (!Object(l.a)(this.programDateTime)) return null;
                    var e = Object(l.a)(this.duration) ? this.duration : 0;
                    return this.programDateTime + 1e3 * e
                }
            }, {
                key: "encrypted",
                get: function () {
                    return !(!this.decryptdata || null === this.decryptdata.uri || null !== this.decryptdata.key)
                }
            }]) && m(t.prototype, r), i && m(t, i), e
        }();

        function b(e, t) {
            for (var r = 0; r < t.length; r++) {
                var i = t[r];
                i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), Object.defineProperty(e, i.key, i)
            }
        }
        var T = function () {
            function e(e) {
                this.endCC = 0, this.endSN = 0, this.fragments = [], this.initSegment = null, this.live = !0, this.needSidxRanges = !1, this.startCC = 0, this.startSN = 0, this.startTimeOffset = null, this.targetduration = 0, this.totalduration = 0, this.type = null, this.url = e, this.version = null
            }
            var t, r, i;
            return t = e, (r = [{
                key: "hasProgramDateTime",
                get: function () {
                    return !(!this.fragments[0] || !Object(l.a)(this.fragments[0].programDateTime))
                }
            }]) && b(t.prototype, r), i && b(t, i), e
        }(),
            E = /^(\d+)x(\d+)$/,
            S = /\s*(.+?)\s*=((?:\".*?\")|.*?)(?:,|$)/g,
            _ = function () {
                function e(t) {
                    for (var r in "string" == typeof t && (t = e.parseAttrList(t)), t) t.hasOwnProperty(r) && (this[r] = t[r])
                }
                var t = e.prototype;
                return t.decimalInteger = function (e) {
                    var t = parseInt(this[e], 10);
                    return t > Number.MAX_SAFE_INTEGER ? 1 / 0 : t
                }, t.hexadecimalInteger = function (e) {
                    if (this[e]) {
                        var t = (this[e] || "0x").slice(2);
                        t = (1 & t.length ? "0" : "") + t;
                        for (var r = new Uint8Array(t.length / 2), i = 0; i < t.length / 2; i++) r[i] = parseInt(t.slice(2 * i, 2 * i + 2), 16);
                        return r
                    }
                    return null
                }, t.hexadecimalIntegerAsNumber = function (e) {
                    var t = parseInt(this[e], 16);
                    return t > Number.MAX_SAFE_INTEGER ? 1 / 0 : t
                }, t.decimalFloatingPoint = function (e) {
                    return parseFloat(this[e])
                }, t.enumeratedString = function (e) {
                    return this[e]
                }, t.decimalResolution = function (e) {
                    var t = E.exec(this[e]);
                    if (null !== t) return {
                        width: parseInt(t[1], 10),
                        height: parseInt(t[2], 10)
                    }
                }, e.parseAttrList = function (e) {
                    var t, r = {};
                    for (S.lastIndex = 0; null !== (t = S.exec(e));) {
                        var i = t[2];
                        0 === i.indexOf('"') && i.lastIndexOf('"') === i.length - 1 && (i = i.slice(1, -1)), r[t[1]] = i
                    }
                    return r
                }, e
            }(),
            R = {
                audio: {
                    a3ds: !0,
                    "ac-3": !0,
                    "ac-4": !0,
                    alac: !0,
                    alaw: !0,
                    dra1: !0,
                    "dts+": !0,
                    "dts-": !0,
                    dtsc: !0,
                    dtse: !0,
                    dtsh: !0,
                    "ec-3": !0,
                    enca: !0,
                    g719: !0,
                    g726: !0,
                    m4ae: !0,
                    mha1: !0,
                    mha2: !0,
                    mhm1: !0,
                    mhm2: !0,
                    mlpa: !0,
                    mp4a: !0,
                    "raw ": !0,
                    Opus: !0,
                    samr: !0,
                    sawb: !0,
                    sawp: !0,
                    sevc: !0,
                    sqcp: !0,
                    ssmv: !0,
                    twos: !0,
                    ulaw: !0
                },
                video: {
                    avc1: !0,
                    avc2: !0,
                    avc3: !0,
                    avc4: !0,
                    avcp: !0,
                    drac: !0,
                    dvav: !0,
                    dvhe: !0,
                    encv: !0,
                    hev1: !0,
                    hvc1: !0,
                    mjp2: !0,
                    mp4v: !0,
                    mvc1: !0,
                    mvc2: !0,
                    mvc3: !0,
                    mvc4: !0,
                    resv: !0,
                    rv60: !0,
                    s263: !0,
                    svc1: !0,
                    svc2: !0,
                    "vc-1": !0,
                    vp08: !0,
                    vp09: !0
                }
            };

        function A(e, t) {
            return MediaSource.isTypeSupported((t || "video") + '/mp4;codecs="' + e + '"')
        }
        var k = /(?:#EXT-X-STREAM-INF:([^\n\r]*)[\r\n]+([^\r\n]+)|#EXT-X-SESSION-DATA:([^\n\r]*)[\r\n]+)/g,
            w = /#EXT-X-MEDIA:(.*)/g,
            L = new RegExp([/#EXTINF:\s*(\d*(?:\.\d+)?)(?:,(.*)\s+)?/.source, /|(?!#)([\S+ ?]+)/.source, /|#EXT-X-BYTERANGE:*(.+)/.source, /|#EXT-X-PROGRAM-DATE-TIME:(.+)/.source, /|#.*/.source].join(""), "g"),
            D = /(?:(?:#(EXTM3U))|(?:#EXT-X-(PLAYLIST-TYPE):(.+))|(?:#EXT-X-(MEDIA-SEQUENCE): *(\d+))|(?:#EXT-X-(TARGETDURATION): *(\d+))|(?:#EXT-X-(KEY):(.+))|(?:#EXT-X-(START):(.+))|(?:#EXT-X-(ENDLIST))|(?:#EXT-X-(DISCONTINUITY-SEQ)UENCE:(\d+))|(?:#EXT-X-(DIS)CONTINUITY))|(?:#EXT-X-(VERSION):(\d+))|(?:#EXT-X-(MAP):(.+))|(?:(#)([^:]*):(.*))|(?:(#)(.*))(?:.*)\r?\n?/,
            O = /\.(mp4|m4s|m4v|m4a)$/i,
            C = function () {
                function e() { }
                return e.findGroup = function (e, t) {
                    for (var r = 0; r < e.length; r++) {
                        var i = e[r];
                        if (i.id === t) return i
                    }
                }, e.convertAVC1ToAVCOTI = function (e) {
                    var t, r = e.split(".");
                    return r.length > 2 ? (t = r.shift() + ".", t += parseInt(r.shift()).toString(16), t += ("000" + parseInt(r.shift()).toString(16)).substr(-4)) : t = e, t
                }, e.resolve = function (e, t) {
                    return s.buildAbsoluteURL(t, e, {
                        alwaysNormalize: !0
                    })
                }, e.parseMasterPlaylist = function (t, r) {
                    var i, a = [],
                        n = {},
                        s = !1;

                    function o(e, t) {
                        ["video", "audio"].forEach((function (r) {
                            var i = e.filter((function (e) {
                                return function (e, t) {
                                    var r = R[t];
                                    return !!r && !0 === r[e.slice(0, 4)]
                                }(e, r)
                            }));
                            if (i.length) {
                                var a = i.filter((function (e) {
                                    return 0 === e.lastIndexOf("avc1", 0) || 0 === e.lastIndexOf("mp4a", 0)
                                }));
                                t[r + "Codec"] = a.length > 0 ? a[0] : i[0], e = e.filter((function (e) {
                                    return -1 === i.indexOf(e)
                                }))
                            }
                        })), t.unknownCodecs = e
                    }
                    for (k.lastIndex = 0; null != (i = k.exec(t));)
                        if (i[1]) {
                            var l = {},
                                d = l.attrs = new _(i[1]);
                            l.url = e.resolve(i[2], r);
                            var u = d.decimalResolution("RESOLUTION");
                            u && (l.width = u.width, l.height = u.height), l.bitrate = d.decimalInteger("AVERAGE-BANDWIDTH") || d.decimalInteger("BANDWIDTH"), l.name = d.NAME, o([].concat((d.CODECS || "").split(/[ ,]+/)), l), l.videoCodec && -1 !== l.videoCodec.indexOf("avc1") && (l.videoCodec = e.convertAVC1ToAVCOTI(l.videoCodec)), a.push(l)
                        } else if (i[3]) {
                            var c = new _(i[3]);
                            c["DATA-ID"] && (s = !0, n[c["DATA-ID"]] = c)
                        }
                    return {
                        levels: a,
                        sessionData: s ? n : null
                    }
                }, e.parseMasterPlaylistMedia = function (t, r, i, a) {
                    var n;
                    void 0 === a && (a = []);
                    var s = [],
                        o = 0;
                    for (w.lastIndex = 0; null !== (n = w.exec(t));) {
                        var l = new _(n[1]);
                        if (l.TYPE === i) {
                            var d = {
                                attrs: l,
                                id: o++,
                                groupId: l["GROUP-ID"],
                                instreamId: l["INSTREAM-ID"],
                                name: l.NAME || l.LANGUAGE,
                                type: i,
                                default: "YES" === l.DEFAULT,
                                autoselect: "YES" === l.AUTOSELECT,
                                forced: "YES" === l.FORCED,
                                lang: l.LANGUAGE
                            };
                            if (l.URI && (d.url = e.resolve(l.URI, r)), a.length) {
                                var u = e.findGroup(a, d.groupId);
                                d.audioCodec = u ? u.codec : a[0].codec
                            }
                            s.push(d)
                        }
                    }
                    return s
                }, e.parseLevelPlaylist = function (e, t, r, i, a) {
                    var n, s, o, d = 0,
                        c = 0,
                        h = new T(t),
                        f = 0,
                        g = null,
                        p = new y,
                        m = null;
                    for (L.lastIndex = 0; null !== (n = L.exec(e));) {
                        var b = n[1];
                        if (b) {
                            p.duration = parseFloat(b);
                            var E = (" " + n[2]).slice(1);
                            p.title = E || null, p.tagList.push(E ? ["INF", b, E] : ["INF", b])
                        } else if (n[3]) {
                            if (Object(l.a)(p.duration)) {
                                var S = d++;
                                p.type = i, p.start = c, o && (p.levelkey = o), p.sn = S, p.level = r, p.cc = f, p.urlId = a, p.baseurl = t, p.relurl = (" " + n[3]).slice(1), I(p, g), h.fragments.push(p), g = p, c += p.duration, p = new y
                            }
                        } else if (n[4]) {
                            var R = (" " + n[4]).slice(1);
                            g ? p.setByteRange(R, g) : p.setByteRange(R)
                        } else if (n[5]) p.rawProgramDateTime = (" " + n[5]).slice(1), p.tagList.push(["PROGRAM-DATE-TIME", p.rawProgramDateTime]), null === m && (m = h.fragments.length);
                        else {
                            if (!(n = n[0].match(D))) {
                                u.b.warn("No matches on slow regex match for level playlist!");
                                continue
                            }
                            for (s = 1; s < n.length && void 0 === n[s]; s++);
                            var A = (" " + n[s + 1]).slice(1),
                                k = (" " + n[s + 2]).slice(1);
                            switch (n[s]) {
                                case "#":
                                    p.tagList.push(k ? [A, k] : [A]);
                                    break;
                                case "PLAYLIST-TYPE":
                                    h.type = A.toUpperCase();
                                    break;
                                case "MEDIA-SEQUENCE":
                                    d = h.startSN = parseInt(A);
                                    break;
                                case "TARGETDURATION":
                                    h.targetduration = parseFloat(A);
                                    break;
                                case "VERSION":
                                    h.version = parseInt(A);
                                    break;
                                case "EXTM3U":
                                    break;
                                case "ENDLIST":
                                    h.live = !1;
                                    break;
                                case "DIS":
                                    f++, p.tagList.push(["DIS"]);
                                    break;
                                case "DISCONTINUITY-SEQ":
                                    f = parseInt(A);
                                    break;
                                case "KEY":
                                    var w = new _(A),
                                        C = w.enumeratedString("METHOD"),
                                        P = w.URI,
                                        x = w.hexadecimalInteger("IV");
                                    if ("com.apple.streamingkeydelivery" === (w.KEYFORMAT || "identity")) {
                                        u.b.warn("Keyformat com.apple.streamingkeydelivery is not supported");
                                        continue
                                    }
                                    C && (o = new v(t, P), P && ["AES-128", "SAMPLE-AES", "SAMPLE-AES-CENC"].indexOf(C) >= 0 && (o.method = C, o.key = null, o.iv = x));
                                    break;
                                case "START":
                                    var M = new _(A).decimalFloatingPoint("TIME-OFFSET");
                                    Object(l.a)(M) && (h.startTimeOffset = M);
                                    break;
                                case "MAP":
                                    var F = new _(A);
                                    p.relurl = F.URI, F.BYTERANGE && p.setByteRange(F.BYTERANGE), p.baseurl = t, p.level = r, p.type = i, p.sn = "initSegment", h.initSegment = p, (p = new y).rawProgramDateTime = h.initSegment.rawProgramDateTime;
                                    break;
                                default:
                                    u.b.warn("line parsed but not handled: " + n)
                            }
                        }
                    }
                    return (p = g) && !p.relurl && (h.fragments.pop(), c -= p.duration), h.totalduration = c, h.averagetargetduration = c / h.fragments.length, h.endSN = d - 1, h.startCC = h.fragments[0] ? h.fragments[0].cc : 0, h.endCC = f, !h.initSegment && h.fragments.length && h.fragments.every((function (e) {
                        return O.test(e.relurl)
                    })) && (u.b.warn("MP4 fragments found but no init segment (probably no MAP, incomplete M3U8), trying to fetch SIDX"), (p = new y).relurl = h.fragments[0].relurl, p.baseurl = t, p.level = r, p.type = i, p.sn = "initSegment", h.initSegment = p, h.needSidxRanges = !0), m && function (e, t) {
                        for (var r = e[t], i = t - 1; i >= 0; i--) {
                            var a = e[i];
                            a.programDateTime = r.programDateTime - 1e3 * a.duration, r = a
                        }
                    }(h.fragments, m), h
                }, e
            }();

        function I(e, t) {
            e.rawProgramDateTime ? e.programDateTime = Date.parse(e.rawProgramDateTime) : (null == t ? void 0 : t.programDateTime) && (e.programDateTime = t.endProgramDateTime), Object(l.a)(e.programDateTime) || (e.programDateTime = null, e.rawProgramDateTime = null)
        }
        var P = window.performance,
            x = function (e) {
                var t, r;

                function i(t) {
                    var r;
                    return (r = e.call(this, t, d.a.MANIFEST_LOADING, d.a.LEVEL_LOADING, d.a.AUDIO_TRACK_LOADING, d.a.SUBTITLE_TRACK_LOADING) || this).loaders = {}, r
                }
                r = e, (t = i).prototype = Object.create(r.prototype), t.prototype.constructor = t, t.__proto__ = r, i.canHaveQualityLevels = function (e) {
                    return e !== a.AUDIO_TRACK && e !== a.SUBTITLE_TRACK
                }, i.mapContextToLevelType = function (e) {
                    switch (e.type) {
                        case a.AUDIO_TRACK:
                            return n.AUDIO;
                        case a.SUBTITLE_TRACK:
                            return n.SUBTITLE;
                        default:
                            return n.MAIN
                    }
                }, i.getResponseUrl = function (e, t) {
                    var r = e.url;
                    return void 0 !== r && 0 !== r.indexOf("data:") || (r = t.url), r
                };
                var s = i.prototype;
                return s.createInternalLoader = function (e) {
                    var t = this.hls.config,
                        r = t.pLoader,
                        i = t.loader,
                        a = new (r || i)(t);
                    return e.loader = a, this.loaders[e.type] = a, a
                }, s.getInternalLoader = function (e) {
                    return this.loaders[e.type]
                }, s.resetInternalLoader = function (e) {
                    this.loaders[e] && delete this.loaders[e]
                }, s.destroyInternalLoaders = function () {
                    for (var e in this.loaders) {
                        var t = this.loaders[e];
                        t && t.destroy(), this.resetInternalLoader(e)
                    }
                }, s.destroy = function () {
                    this.destroyInternalLoaders(), e.prototype.destroy.call(this)
                }, s.onManifestLoading = function (e) {
                    this.load({
                        url: e.url,
                        type: a.MANIFEST,
                        level: 0,
                        id: null,
                        responseType: "text"
                    })
                }, s.onLevelLoading = function (e) {
                    this.load({
                        url: e.url,
                        type: a.LEVEL,
                        level: e.level,
                        id: e.id,
                        responseType: "text"
                    })
                }, s.onAudioTrackLoading = function (e) {
                    this.load({
                        url: e.url,
                        type: a.AUDIO_TRACK,
                        level: null,
                        id: e.id,
                        responseType: "text"
                    })
                }, s.onSubtitleTrackLoading = function (e) {
                    this.load({
                        url: e.url,
                        type: a.SUBTITLE_TRACK,
                        level: null,
                        id: e.id,
                        responseType: "text"
                    })
                }, s.load = function (e) {
                    var t = this.hls.config;
                    u.b.debug("Loading playlist of type " + e.type + ", level: " + e.level + ", id: " + e.id);
                    var r, i, n, s, o = this.getInternalLoader(e);
                    if (o) {
                        var l = o.context;
                        if (l && l.url === e.url) return u.b.trace("playlist request ongoing"), !1;
                        u.b.warn("aborting previous loader for type: " + e.type), o.abort()
                    }
                    switch (e.type) {
                        case a.MANIFEST:
                            r = t.manifestLoadingMaxRetry, i = t.manifestLoadingTimeOut, n = t.manifestLoadingRetryDelay, s = t.manifestLoadingMaxRetryTimeout;
                            break;
                        case a.LEVEL:
                            r = 0, s = 0, n = 0, i = t.levelLoadingTimeOut;
                            break;
                        default:
                            r = t.levelLoadingMaxRetry, i = t.levelLoadingTimeOut, n = t.levelLoadingRetryDelay, s = t.levelLoadingMaxRetryTimeout
                    }
                    o = this.createInternalLoader(e);
                    var d = {
                        timeout: i,
                        maxRetry: r,
                        retryDelay: n,
                        maxRetryDelay: s
                    },
                        c = {
                            onSuccess: this.loadsuccess.bind(this),
                            onError: this.loaderror.bind(this),
                            onTimeout: this.loadtimeout.bind(this)
                        };
                    return u.b.debug("Calling internal loader delegate for URL: " + e.url), o.load(e, d, c), !0
                }, s.loadsuccess = function (e, t, r, i) {
                    if (void 0 === i && (i = null), r.isSidxRequest) return this._handleSidxRequest(e, r), void this._handlePlaylistLoaded(e, t, r, i);
                    if (this.resetInternalLoader(r.type), "string" != typeof e.data) throw new Error('expected responseType of "text" for PlaylistLoader');
                    var a = e.data;
                    t.tload = P.now(), 0 === a.indexOf("#EXTM3U") ? a.indexOf("#EXTINF:") > 0 || a.indexOf("#EXT-X-TARGETDURATION:") > 0 ? this._handleTrackOrLevelPlaylist(e, t, r, i) : this._handleMasterPlaylist(e, t, r, i) : this._handleManifestParsingError(e, r, "no EXTM3U delimiter", i)
                }, s.loaderror = function (e, t, r) {
                    void 0 === r && (r = null), this._handleNetworkError(t, r, !1, e)
                }, s.loadtimeout = function (e, t, r) {
                    void 0 === r && (r = null), this._handleNetworkError(t, r, !0)
                }, s._handleMasterPlaylist = function (e, t, r, a) {
                    var n = this.hls,
                        s = e.data,
                        o = i.getResponseUrl(e, r),
                        l = C.parseMasterPlaylist(s, o),
                        c = l.levels,
                        h = l.sessionData;
                    if (c.length) {
                        var f = c.map((function (e) {
                            return {
                                id: e.attrs.AUDIO,
                                codec: e.audioCodec
                            }
                        })),
                            g = C.parseMasterPlaylistMedia(s, o, "AUDIO", f),
                            p = C.parseMasterPlaylistMedia(s, o, "SUBTITLES"),
                            v = C.parseMasterPlaylistMedia(s, o, "CLOSED-CAPTIONS");
                        if (g.length) {
                            var m = !1;
                            g.forEach((function (e) {
                                e.url || (m = !0)
                            })), !1 === m && c[0].audioCodec && !c[0].attrs.AUDIO && (u.b.log("audio codec signaled in quality level, but no embedded audio track signaled, create one"), g.unshift({
                                type: "main",
                                name: "main",
                                default: !1,
                                autoselect: !1,
                                forced: !1,
                                id: -1,
                                attrs: {},
                                url: ""
                            }))
                        }
                        n.trigger(d.a.MANIFEST_LOADED, {
                            levels: c,
                            audioTracks: g,
                            subtitles: p,
                            captions: v,
                            url: o,
                            stats: t,
                            networkDetails: a,
                            sessionData: h
                        })
                    } else this._handleManifestParsingError(e, r, "no level found in manifest", a)
                }, s._handleTrackOrLevelPlaylist = function (e, t, r, n) {
                    var s = this.hls,
                        u = r.id,
                        c = r.level,
                        h = r.type,
                        f = i.getResponseUrl(e, r),
                        g = Object(l.a)(u) ? u : 0,
                        p = Object(l.a)(c) ? c : g,
                        v = i.mapContextToLevelType(r),
                        m = C.parseLevelPlaylist(e.data, f, p, v, g);
                    if (m.tload = t.tload, m.fragments.length) {
                        if (h === a.MANIFEST) {
                            var y = {
                                url: f,
                                details: m
                            };
                            s.trigger(d.a.MANIFEST_LOADED, {
                                levels: [y],
                                audioTracks: [],
                                url: f,
                                stats: t,
                                networkDetails: n,
                                sessionData: null
                            })
                        }
                        if (t.tparsed = P.now(), m.needSidxRanges) {
                            var b = m.initSegment.url;
                            this.load({
                                url: b,
                                isSidxRequest: !0,
                                type: h,
                                level: c,
                                levelDetails: m,
                                id: u,
                                rangeStart: 0,
                                rangeEnd: 2048,
                                responseType: "arraybuffer"
                            })
                        } else r.levelDetails = m, this._handlePlaylistLoaded(e, t, r, n)
                    } else s.trigger(d.a.ERROR, {
                        type: o.b.NETWORK_ERROR,
                        details: o.a.LEVEL_EMPTY_ERROR,
                        fatal: !1,
                        url: f,
                        reason: "no fragments found in level",
                        level: "number" == typeof r.level ? r.level : void 0
                    })
                }, s._handleSidxRequest = function (e, t) {
                    if ("string" == typeof e.data) throw new Error("sidx request must be made with responseType of array buffer");
                    var r = f.a.parseSegmentIndex(new Uint8Array(e.data));
                    if (r) {
                        var i = r.references,
                            a = t.levelDetails;
                        i.forEach((function (e, t) {
                            var r = e.info;
                            if (a) {
                                var i = a.fragments[t];
                                0 === i.byteRange.length && i.setByteRange(String(1 + r.end - r.start) + "@" + String(r.start))
                            }
                        })), a && a.initSegment.setByteRange(String(r.moovEndOffset) + "@0")
                    }
                }, s._handleManifestParsingError = function (e, t, r, i) {
                    this.hls.trigger(d.a.ERROR, {
                        type: o.b.NETWORK_ERROR,
                        details: o.a.MANIFEST_PARSING_ERROR,
                        fatal: !0,
                        url: e.url,
                        reason: r,
                        networkDetails: i
                    })
                }, s._handleNetworkError = function (e, t, r, i) {
                    var n, s;
                    void 0 === r && (r = !1), void 0 === i && (i = null), u.b.info("A network error occured while loading a " + e.type + "-type playlist");
                    var l = this.getInternalLoader(e);
                    switch (e.type) {
                        case a.MANIFEST:
                            n = r ? o.a.MANIFEST_LOAD_TIMEOUT : o.a.MANIFEST_LOAD_ERROR, s = !0;
                            break;
                        case a.LEVEL:
                            n = r ? o.a.LEVEL_LOAD_TIMEOUT : o.a.LEVEL_LOAD_ERROR, s = !1;
                            break;
                        case a.AUDIO_TRACK:
                            n = r ? o.a.AUDIO_TRACK_LOAD_TIMEOUT : o.a.AUDIO_TRACK_LOAD_ERROR, s = !1;
                            break;
                        default:
                            s = !1
                    }
                    l && (l.abort(), this.resetInternalLoader(e.type));
                    var c = {
                        type: o.b.NETWORK_ERROR,
                        details: n,
                        fatal: s,
                        url: e.url,
                        loader: l,
                        context: e,
                        networkDetails: t
                    };
                    i && (c.response = i), this.hls.trigger(d.a.ERROR, c)
                }, s._handlePlaylistLoaded = function (e, t, r, n) {
                    var s = r.type,
                        o = r.level,
                        l = r.id,
                        u = r.levelDetails;
                    if (u && u.targetduration)
                        if (i.canHaveQualityLevels(r.type)) this.hls.trigger(d.a.LEVEL_LOADED, {
                            details: u,
                            level: o || 0,
                            id: l || 0,
                            stats: t,
                            networkDetails: n
                        });
                        else switch (s) {
                            case a.AUDIO_TRACK:
                                this.hls.trigger(d.a.AUDIO_TRACK_LOADED, {
                                    details: u,
                                    id: l,
                                    stats: t,
                                    networkDetails: n
                                });
                                break;
                            case a.SUBTITLE_TRACK:
                                this.hls.trigger(d.a.SUBTITLE_TRACK_LOADED, {
                                    details: u,
                                    id: l,
                                    stats: t,
                                    networkDetails: n
                                })
                        } else this._handleManifestParsingError(e, r, "invalid target duration", n)
                }, i
            }(h);
        var M = function (e) {
            var t, r;

            function i(t) {
                var r;
                return (r = e.call(this, t, d.a.FRAG_LOADING) || this).loaders = {}, r
            }
            r = e, (t = i).prototype = Object.create(r.prototype), t.prototype.constructor = t, t.__proto__ = r;
            var a = i.prototype;
            return a.destroy = function () {
                var t = this.loaders;
                for (var r in t) {
                    var i = t[r];
                    i && i.destroy()
                }
                this.loaders = {}, e.prototype.destroy.call(this)
            }, a.onFragLoading = function (e) {
                var t = e.frag,
                    r = t.type,
                    i = this.loaders,
                    a = this.hls.config,
                    n = a.fLoader,
                    s = a.loader;
                t.loaded = 0;
                var o, d, c, h = i[r];
                h && (u.b.warn("abort previous fragment loader for type: " + r), h.abort()), h = i[r] = t.loader = a.fLoader ? new n(a) : new s(a), o = {
                    url: t.url,
                    frag: t,
                    responseType: "arraybuffer",
                    progressData: !1
                };
                var f = t.byteRangeStartOffset,
                    g = t.byteRangeEndOffset;
                Object(l.a)(f) && Object(l.a)(g) && (o.rangeStart = f, o.rangeEnd = g), d = {
                    timeout: a.fragLoadingTimeOut,
                    maxRetry: 0,
                    retryDelay: 0,
                    maxRetryDelay: a.fragLoadingMaxRetryTimeout
                }, c = {
                    onSuccess: this.loadsuccess.bind(this),
                    onError: this.loaderror.bind(this),
                    onTimeout: this.loadtimeout.bind(this),
                    onProgress: this.loadprogress.bind(this)
                }, h.load(o, d, c)
            }, a.loadsuccess = function (e, t, r, i) {
                void 0 === i && (i = null);
                var a = e.data,
                    n = r.frag;
                n.loader = void 0, this.loaders[n.type] = void 0, this.hls.trigger(d.a.FRAG_LOADED, {
                    payload: a,
                    frag: n,
                    stats: t,
                    networkDetails: i
                })
            }, a.loaderror = function (e, t, r) {
                void 0 === r && (r = null);
                var i = t.frag,
                    a = i.loader;
                a && a.abort(), this.loaders[i.type] = void 0, this.hls.trigger(d.a.ERROR, {
                    type: o.b.NETWORK_ERROR,
                    details: o.a.FRAG_LOAD_ERROR,
                    fatal: !1,
                    frag: t.frag,
                    response: e,
                    networkDetails: r
                })
            }, a.loadtimeout = function (e, t, r) {
                void 0 === r && (r = null);
                var i = t.frag,
                    a = i.loader;
                a && a.abort(), this.loaders[i.type] = void 0, this.hls.trigger(d.a.ERROR, {
                    type: o.b.NETWORK_ERROR,
                    details: o.a.FRAG_LOAD_TIMEOUT,
                    fatal: !1,
                    frag: t.frag,
                    networkDetails: r
                })
            }, a.loadprogress = function (e, t, r, i) {
                void 0 === i && (i = null);
                var a = t.frag;
                a.loaded = e.loaded, this.hls.trigger(d.a.FRAG_LOAD_PROGRESS, {
                    frag: a,
                    stats: e,
                    networkDetails: i
                })
            }, i
        }(h);
        var F = function (e) {
            var t, r;

            function i(t) {
                var r;
                return (r = e.call(this, t, d.a.KEY_LOADING) || this).loaders = {}, r.decryptkey = null, r.decrypturl = null, r
            }
            r = e, (t = i).prototype = Object.create(r.prototype), t.prototype.constructor = t, t.__proto__ = r;
            var a = i.prototype;
            return a.destroy = function () {
                for (var t in this.loaders) {
                    var r = this.loaders[t];
                    r && r.destroy()
                }
                this.loaders = {}, e.prototype.destroy.call(this)
            }, a.onKeyLoading = function (e) {
                var t = e.frag,
                    r = t.type,
                    i = this.loaders[r];
                if (t.decryptdata) {
                    var a = t.decryptdata.uri;
                    if (a !== this.decrypturl || null === this.decryptkey) {
                        var n = this.hls.config;
                        if (i && (u.b.warn("abort previous key loader for type:" + r), i.abort()), !a) return void u.b.warn("key uri is falsy");
                        t.loader = this.loaders[r] = new n.loader(n), this.decrypturl = a, this.decryptkey = null;
                        var s = {
                            url: a,
                            frag: t,
                            responseType: "arraybuffer"
                        },
                            o = {
                                timeout: n.fragLoadingTimeOut,
                                maxRetry: 0,
                                retryDelay: n.fragLoadingRetryDelay,
                                maxRetryDelay: n.fragLoadingMaxRetryTimeout
                            },
                            l = {
                                onSuccess: this.loadsuccess.bind(this),
                                onError: this.loaderror.bind(this),
                                onTimeout: this.loadtimeout.bind(this)
                            };
                        t.loader.load(s, o, l)
                    } else this.decryptkey && (t.decryptdata.key = this.decryptkey, this.hls.trigger(d.a.KEY_LOADED, {
                        frag: t
                    }))
                } else u.b.warn("Missing decryption data on fragment in onKeyLoading")
            }, a.loadsuccess = function (e, t, r) {
                var i = r.frag;
                i.decryptdata ? (this.decryptkey = i.decryptdata.key = new Uint8Array(e.data), i.loader = void 0, delete this.loaders[i.type], this.hls.trigger(d.a.KEY_LOADED, {
                    frag: i
                })) : u.b.error("after key load, decryptdata unset")
            }, a.loaderror = function (e, t) {
                var r = t.frag,
                    i = r.loader;
                i && i.abort(), delete this.loaders[r.type], this.hls.trigger(d.a.ERROR, {
                    type: o.b.NETWORK_ERROR,
                    details: o.a.KEY_LOAD_ERROR,
                    fatal: !1,
                    frag: r,
                    response: e
                })
            }, a.loadtimeout = function (e, t) {
                var r = t.frag,
                    i = r.loader;
                i && i.abort(), delete this.loaders[r.type], this.hls.trigger(d.a.ERROR, {
                    type: o.b.NETWORK_ERROR,
                    details: o.a.KEY_LOAD_TIMEOUT,
                    fatal: !1,
                    frag: r
                })
            }, i
        }(h);
        var U = "NOT_LOADED",
            N = "APPENDING",
            B = "PARTIAL",
            G = "OK",
            K = function (e) {
                var t, r;

                function i(t) {
                    var r;
                    return (r = e.call(this, t, d.a.BUFFER_APPENDED, d.a.FRAG_BUFFERED, d.a.FRAG_LOADED) || this).bufferPadding = .2, r.fragments = Object.create(null), r.timeRanges = Object.create(null), r.config = t.config, r
                }
                r = e, (t = i).prototype = Object.create(r.prototype), t.prototype.constructor = t, t.__proto__ = r;
                var a = i.prototype;
                return a.destroy = function () {
                    this.fragments = Object.create(null), this.timeRanges = Object.create(null), this.config = null, h.prototype.destroy.call(this), e.prototype.destroy.call(this)
                }, a.getBufferedFrag = function (e, t) {
                    var r = this.fragments,
                        i = Object.keys(r).filter((function (i) {
                            var a = r[i];
                            if (a.body.type !== t) return !1;
                            if (!a.buffered) return !1;
                            var n = a.body;
                            return n.startPTS <= e && e <= n.endPTS
                        }));
                    if (0 === i.length) return null;
                    var a = i.pop();
                    return r[a].body
                }, a.detectEvictedFragments = function (e, t) {
                    var r = this;
                    Object.keys(this.fragments).forEach((function (i) {
                        var a = r.fragments[i];
                        if (a && a.buffered) {
                            var n = a.range[e];
                            if (n)
                                for (var s = n.time, o = 0; o < s.length; o++) {
                                    var l = s[o];
                                    if (!r.isTimeBuffered(l.startPTS, l.endPTS, t)) {
                                        r.removeFragment(a.body);
                                        break
                                    }
                                }
                        }
                    }))
                }, a.detectPartialFragments = function (e) {
                    var t = this,
                        r = this.getFragmentKey(e),
                        i = this.fragments[r];
                    i && (i.buffered = !0, Object.keys(this.timeRanges).forEach((function (r) {
                        if (e.hasElementaryStream(r)) {
                            var a = t.timeRanges[r];
                            i.range[r] = t.getBufferedTimes(e.startPTS, e.endPTS, a)
                        }
                    })))
                }, a.getBufferedTimes = function (e, t, r) {
                    for (var i, a, n = [], s = !1, o = 0; o < r.length; o++) {
                        if (i = r.start(o) - this.bufferPadding, a = r.end(o) + this.bufferPadding, e >= i && t <= a) {
                            n.push({
                                startPTS: Math.max(e, r.start(o)),
                                endPTS: Math.min(t, r.end(o))
                            });
                            break
                        }
                        if (e < a && t > i) n.push({
                            startPTS: Math.max(e, r.start(o)),
                            endPTS: Math.min(t, r.end(o))
                        }), s = !0;
                        else if (t <= i) break
                    }
                    return {
                        time: n,
                        partial: s
                    }
                }, a.getFragmentKey = function (e) {
                    return e.type + "_" + e.level + "_" + e.urlId + "_" + e.sn
                }, a.getPartialFragment = function (e) {
                    var t, r, i, a = this,
                        n = null,
                        s = 0;
                    return Object.keys(this.fragments).forEach((function (o) {
                        var l = a.fragments[o];
                        a.isPartial(l) && (r = l.body.startPTS - a.bufferPadding, i = l.body.endPTS + a.bufferPadding, e >= r && e <= i && (t = Math.min(e - r, i - e), s <= t && (n = l.body, s = t)))
                    })), n
                }, a.getState = function (e) {
                    var t = this.getFragmentKey(e),
                        r = this.fragments[t],
                        i = U;
                    return void 0 !== r && (i = r.buffered ? !0 === this.isPartial(r) ? B : G : N), i
                }, a.isPartial = function (e) {
                    return !0 === e.buffered && (void 0 !== e.range.video && !0 === e.range.video.partial || void 0 !== e.range.audio && !0 === e.range.audio.partial)
                }, a.isTimeBuffered = function (e, t, r) {
                    for (var i, a, n = 0; n < r.length; n++) {
                        if (i = r.start(n) - this.bufferPadding, a = r.end(n) + this.bufferPadding, e >= i && t <= a) return !0;
                        if (t <= i) return !1
                    }
                    return !1
                }, a.onFragLoaded = function (e) {
                    var t = e.frag;
                    Object(l.a)(t.sn) && !t.bitrateTest && (this.fragments[this.getFragmentKey(t)] = {
                        body: t,
                        range: Object.create(null),
                        buffered: !1
                    })
                }, a.onBufferAppended = function (e) {
                    var t = this;
                    this.timeRanges = e.timeRanges, Object.keys(this.timeRanges).forEach((function (e) {
                        var r = t.timeRanges[e];
                        t.detectEvictedFragments(e, r)
                    }))
                }, a.onFragBuffered = function (e) {
                    this.detectPartialFragments(e.frag)
                }, a.hasFragment = function (e) {
                    var t = this.getFragmentKey(e);
                    return void 0 !== this.fragments[t]
                }, a.removeFragment = function (e) {
                    var t = this.getFragmentKey(e);
                    delete this.fragments[t]
                }, a.removeAllFragments = function () {
                    this.fragments = Object.create(null)
                }, i
            }(h),
            j = {
                search: function (e, t) {
                    for (var r = 0, i = e.length - 1, a = null, n = null; r <= i;) {
                        var s = t(n = e[a = (r + i) / 2 | 0]);
                        if (s > 0) r = a + 1;
                        else {
                            if (!(s < 0)) return n;
                            i = a - 1
                        }
                    }
                    return null
                }
            },
            H = function () {
                function e() { }
                return e.isBuffered = function (e, t) {
                    try {
                        if (e)
                            for (var r = e.buffered, i = 0; i < r.length; i++)
                                if (t >= r.start(i) && t <= r.end(i)) return !0
                    } catch (e) { }
                    return !1
                }, e.bufferInfo = function (e, t, r) {
                    try {
                        if (e) {
                            var i, a = e.buffered,
                                n = [];
                            for (i = 0; i < a.length; i++) n.push({
                                start: a.start(i),
                                end: a.end(i)
                            });
                            return this.bufferedInfo(n, t, r)
                        }
                    } catch (e) { }
                    return {
                        len: 0,
                        start: t,
                        end: t,
                        nextStart: void 0
                    }
                }, e.bufferedInfo = function (e, t, r) {
                    e.sort((function (e, t) {
                        var r = e.start - t.start;
                        return r || t.end - e.end
                    }));
                    var i = [];
                    if (r)
                        for (var a = 0; a < e.length; a++) {
                            var n = i.length;
                            if (n) {
                                var s = i[n - 1].end;
                                e[a].start - s < r ? e[a].end > s && (i[n - 1].end = e[a].end) : i.push(e[a])
                            } else i.push(e[a])
                        } else i = e;
                    for (var o, l = 0, d = t, u = t, c = 0; c < i.length; c++) {
                        var h = i[c].start,
                            f = i[c].end;
                        if (t + r >= h && t < f) d = h, l = (u = f) - t;
                        else if (t + r < h) {
                            o = h;
                            break
                        }
                    }
                    return {
                        len: l,
                        start: d,
                        end: u,
                        nextStart: o
                    }
                }, e
            }(),
            V = r(8),
            Y = r(11),
            W = r(9);

        function q() {
            return window.MediaSource || window.WebKitMediaSource
        }
        var X = r(5);
        var z = function (e) {
            var t, r;

            function i() {
                return e.apply(this, arguments) || this
            }
            return r = e, (t = i).prototype = Object.create(r.prototype), t.prototype.constructor = t, t.__proto__ = r, i.prototype.trigger = function (e) {
                for (var t = arguments.length, r = new Array(t > 1 ? t - 1 : 0), i = 1; i < t; i++) r[i - 1] = arguments[i];
                this.emit.apply(this, [e, e].concat(r))
            }, i
        }(V.EventEmitter),
            Q = Object(X.a)(),
            $ = q() || {
                isTypeSupported: function () {
                    return !1
                }
            },
            J = function () {
                function e(e, t) {
                    var r = this;
                    this.hls = e, this.id = t;
                    var i = this.observer = new z,
                        a = e.config,
                        n = function (t, i) {
                            (i = i || {}).frag = r.frag, i.id = r.id, e.trigger(t, i)
                        };
                    i.on(d.a.FRAG_DECRYPTED, n), i.on(d.a.FRAG_PARSING_INIT_SEGMENT, n), i.on(d.a.FRAG_PARSING_DATA, n), i.on(d.a.FRAG_PARSED, n), i.on(d.a.ERROR, n), i.on(d.a.FRAG_PARSING_METADATA, n), i.on(d.a.FRAG_PARSING_USERDATA, n), i.on(d.a.INIT_PTS_FOUND, n);
                    var s = {
                        mp4: $.isTypeSupported("video/mp4"),
                        mpeg: $.isTypeSupported("audio/mpeg"),
                        mp3: $.isTypeSupported('audio/mp4; codecs="mp3"')
                    },
                        l = navigator.vendor;
                    if (a.enableWorker && "undefined" != typeof Worker) {
                        var c;
                        u.b.log("demuxing in webworker");
                        try {
                            c = this.w = Y(12), this.onwmsg = this.onWorkerMessage.bind(this), c.addEventListener("message", this.onwmsg), c.onerror = function (t) {
                                e.trigger(d.a.ERROR, {
                                    type: o.b.OTHER_ERROR,
                                    details: o.a.INTERNAL_EXCEPTION,
                                    fatal: !0,
                                    event: "demuxerWorker",
                                    err: {
                                        message: t.message + " (" + t.filename + ":" + t.lineno + ")"
                                    }
                                })
                            }, c.postMessage({
                                cmd: "init",
                                typeSupported: s,
                                vendor: l,
                                id: t,
                                config: JSON.stringify(a)
                            })
                        } catch (e) {
                            u.b.warn("Error in worker:", e), u.b.error("Error while initializing DemuxerWorker, fallback on DemuxerInline"), c && Q.URL.revokeObjectURL(c.objectURL), this.demuxer = new W.a(i, s, a, l), this.w = void 0
                        }
                    } else this.demuxer = new W.a(i, s, a, l)
                }
                var t = e.prototype;
                return t.destroy = function () {
                    var e = this.w;
                    if (e) e.removeEventListener("message", this.onwmsg), e.terminate(), this.w = null;
                    else {
                        var t = this.demuxer;
                        t && (t.destroy(), this.demuxer = null)
                    }
                    var r = this.observer;
                    r && (r.removeAllListeners(), this.observer = null)
                }, t.push = function (e, t, r, i, a, n, s, o) {
                    var d = this.w,
                        c = Object(l.a)(a.startPTS) ? a.startPTS : a.start,
                        h = a.decryptdata,
                        f = this.frag,
                        g = !(f && a.cc === f.cc),
                        p = !(f && a.level === f.level),
                        v = f && a.sn === f.sn + 1,
                        m = !p && v;
                    if (g && u.b.log(this.id + ":discontinuity detected"), p && u.b.log(this.id + ":switch detected"), this.frag = a, d) d.postMessage({
                        cmd: "demux",
                        data: e,
                        decryptdata: h,
                        initSegment: t,
                        audioCodec: r,
                        videoCodec: i,
                        timeOffset: c,
                        discontinuity: g,
                        trackSwitch: p,
                        contiguous: m,
                        duration: n,
                        accurateTimeOffset: s,
                        defaultInitPTS: o
                    }, e instanceof ArrayBuffer ? [e] : []);
                    else {
                        var y = this.demuxer;
                        y && y.push(e, h, t, r, i, c, g, p, m, n, s, o)
                    }
                }, t.onWorkerMessage = function (e) {
                    var t = e.data,
                        r = this.hls;
                    switch (t.event) {
                        case "init":
                            Q.URL.revokeObjectURL(this.w.objectURL);
                            break;
                        case d.a.FRAG_PARSING_DATA:
                            t.data.data1 = new Uint8Array(t.data1), t.data2 && (t.data.data2 = new Uint8Array(t.data2));
                        default:
                            t.data = t.data || {}, t.data.frag = this.frag, t.data.id = this.id, r.trigger(t.event, t.data)
                    }
                }, e
            }();

        function Z(e, t, r) {
            switch (t) {
                case "audio":
                    e.audioGroupIds || (e.audioGroupIds = []), e.audioGroupIds.push(r);
                    break;
                case "text":
                    e.textGroupIds || (e.textGroupIds = []), e.textGroupIds.push(r)
            }
        }

        function ee(e, t, r) {
            var i = e[t],
                a = e[r],
                n = a.startPTS;
            if (Object(l.a)(n)) r > t ? (i.duration = n - i.start, i.duration < 0 && u.b.warn("negative duration computed for frag " + i.sn + ",level " + i.level + ", there should be some duration drift between playlist and fragment!")) : (a.duration = i.start - n, a.duration < 0 && u.b.warn("negative duration computed for frag " + a.sn + ",level " + a.level + ", there should be some duration drift between playlist and fragment!"));
            else if (r > t) {
                var s = i.cc === a.cc;
                a.start = i.start + (s && i.minEndPTS ? i.minEndPTS - i.start : i.duration)
            } else a.start = Math.max(i.start - a.duration, 0)
        }

        function te(e, t, r, i, a, n) {
            var s = r,
                o = i;
            if (Object(l.a)(t.startPTS)) {
                var d = Math.abs(t.startPTS - r);
                Object(l.a)(t.deltaPTS) ? t.deltaPTS = Math.max(d, t.deltaPTS) : t.deltaPTS = d, s = Math.max(r, t.startPTS), r = Math.min(r, t.startPTS), o = Math.min(i, t.endPTS), i = Math.max(i, t.endPTS), a = Math.min(a, t.startDTS), n = Math.max(n, t.endDTS)
            }
            var u = r - t.start;
            t.start = t.startPTS = r, t.maxStartPTS = s, t.endPTS = i, t.minEndPTS = o, t.startDTS = a, t.endDTS = n, t.duration = i - r;
            var c, h, f, g = t.sn;
            if (!e || g < e.startSN || g > e.endSN) return 0;
            for (c = g - e.startSN, (h = e.fragments)[c] = t, f = c; f > 0; f--) ee(h, f, f - 1);
            for (f = c; f < h.length - 1; f++) ee(h, f, f + 1);
            return e.PTSKnown = !0, u
        }

        function re(e, t) {
            t.initSegment && e.initSegment && (t.initSegment = e.initSegment);
            var r, i = 0;
            if (ie(e, t, (function (e, a) {
                i = e.cc - a.cc, Object(l.a)(e.startPTS) && (a.start = a.startPTS = e.startPTS, a.endPTS = e.endPTS, a.duration = e.duration, a.backtracked = e.backtracked, a.dropped = e.dropped, r = a), t.PTSKnown = !0
            })), t.PTSKnown) {
                if (i) {
                    u.b.log("discontinuity sliding from playlist, take drift into account");
                    for (var a = t.fragments, n = 0; n < a.length; n++) a[n].cc += i
                }
                r ? te(t, r, r.startPTS, r.endPTS, r.startDTS, r.endDTS) : function (e, t) {
                    var r = t.startSN - e.startSN,
                        i = e.fragments,
                        a = t.fragments;
                    if (r < 0 || r > i.length) return;
                    for (var n = 0; n < a.length; n++) a[n].start += i[r].start
                }(e, t), t.PTSKnown = e.PTSKnown
            }
        }

        function ie(e, t, r) {
            if (e && t)
                for (var i = Math.max(e.startSN, t.startSN) - t.startSN, a = Math.min(e.endSN, t.endSN) - t.startSN, n = t.startSN - e.startSN, s = i; s <= a; s++) {
                    var o = e.fragments[n + s],
                        l = t.fragments[s];
                    if (!o || !l) break;
                    r(o, l, s)
                }
        }

        function ae(e, t, r) {
            var i = 1e3 * (t.averagetargetduration ? t.averagetargetduration : t.targetduration),
                a = i / 2;
            return e && t.endSN === e.endSN && (i = a), r && (i = Math.max(a, i - (window.performance.now() - r))), Math.round(i)
        }
        var ne = {
            toString: function (e) {
                for (var t = "", r = e.length, i = 0; i < r; i++) t += "[" + e.start(i).toFixed(3) + "," + e.end(i).toFixed(3) + "]";
                return t
            }
        };

        function se(e, t) {
            t.fragments.forEach((function (t) {
                if (t) {
                    var r = t.start + e;
                    t.start = t.startPTS = r, t.endPTS = r + t.duration
                }
            })), t.PTSKnown = !0
        }

        function oe(e, t, r) {
            ! function (e, t, r) {
                if (function (e, t, r) {
                    var i = !1;
                    return t && t.details && r && (r.endCC > r.startCC || e && e.cc < r.startCC) && (i = !0), i
                }(e, r, t)) {
                    var i = function (e, t) {
                        var r = e.fragments,
                            i = t.fragments;
                        if (i.length && r.length) {
                            var a = function (e, t) {
                                for (var r = null, i = 0; i < e.length; i += 1) {
                                    var a = e[i];
                                    if (a && a.cc === t) {
                                        r = a;
                                        break
                                    }
                                }
                                return r
                            }(r, i[0].cc);
                            if (a && (!a || a.startPTS)) return a;
                            u.b.log("No frag in previous level to align on")
                        } else u.b.log("No fragments to align")
                    }(r.details, t);
                    i && (u.b.log("Adjusting PTS using last level due to CC increase within current level"), se(i.start, t))
                }
            }(e, r, t), !r.PTSKnown && t && function (e, t) {
                if (t && t.fragments.length) {
                    if (!e.hasProgramDateTime || !t.hasProgramDateTime) return;
                    var r = t.fragments[0].programDateTime,
                        i = (e.fragments[0].programDateTime - r) / 1e3 + t.fragments[0].start;
                    Object(l.a)(i) && (u.b.log("adjusting PTS using programDateTime delta, sliding:" + i.toFixed(3)), se(i, e))
                }
            }(r, t.details)
        }

        function le(e, t, r) {
            if (null === t || !Array.isArray(e) || !e.length || !Object(l.a)(t)) return null;
            if (t < (e[0].programDateTime || 0)) return null;
            if (t >= (e[e.length - 1].endProgramDateTime || 0)) return null;
            r = r || 0;
            for (var i = 0; i < e.length; ++i) {
                var a = e[i];
                if (ce(t, r, a)) return a
            }
            return null
        }

        function de(e, t, r, i) {
            void 0 === r && (r = 0), void 0 === i && (i = 0);
            var a = null;
            if (e ? a = t[e.sn - t[0].sn + 1] : 0 === r && 0 === t[0].start && (a = t[0]), a && 0 === ue(r, i, a)) return a;
            var n = j.search(t, ue.bind(null, r, i));
            return n || a
        }

        function ue(e, t, r) {
            void 0 === e && (e = 0), void 0 === t && (t = 0);
            var i = Math.min(t, r.duration + (r.deltaPTS ? r.deltaPTS : 0));
            return r.start + r.duration - i <= e ? 1 : r.start - i > e && r.start ? -1 : 0
        }

        function ce(e, t, r) {
            var i = 1e3 * Math.min(t, r.duration + (r.deltaPTS ? r.deltaPTS : 0));
            return (r.endProgramDateTime || 0) - i > e
        }
        var he = function () {
            function e(e, t, r, i) {
                this.config = e, this.media = t, this.fragmentTracker = r, this.hls = i, this.nudgeRetry = 0, this.stallReported = !1, this.stalled = null, this.moved = !1, this.seeking = !1
            }
            var t = e.prototype;
            return t.poll = function (e) {
                var t = this.config,
                    r = this.media,
                    i = this.stalled,
                    a = r.currentTime,
                    n = r.seeking,
                    s = this.seeking && !n,
                    o = !this.seeking && n;
                if (this.seeking = n, a === e) {
                    if ((o || s) && (this.stalled = null), !r.paused && !r.ended && 0 !== r.playbackRate && r.buffered.length) {
                        var l = H.bufferInfo(r, a, 0),
                            d = l.len > 0,
                            c = l.nextStart || 0;
                        if (d || c) {
                            if (n) {
                                var h = l.len > 2,
                                    f = !c || c - a > 2 && !this.fragmentTracker.getPartialFragment(a);
                                if (h || f) return;
                                this.moved = !1
                            }
                            if (!this.moved && this.stalled) {
                                var g = Math.max(c, l.start || 0) - a;
                                if (g > 0 && g <= 2) return void this._trySkipBufferHole(null)
                            }
                            var p = self.performance.now();
                            if (null !== i) {
                                var v = p - i;
                                !n && v >= 250 && this._reportStall(l.len);
                                var m = H.bufferInfo(r, a, t.maxBufferHole);
                                this._tryFixBufferStall(m, v)
                            } else this.stalled = p
                        }
                    }
                } else if (this.moved = !0, null !== i) {
                    if (this.stallReported) {
                        var y = self.performance.now() - i;
                        u.b.warn("playback not stuck anymore @" + a + ", after " + Math.round(y) + "ms"), this.stallReported = !1
                    }
                    this.stalled = null, this.nudgeRetry = 0
                }
            }, t._tryFixBufferStall = function (e, t) {
                var r = this.config,
                    i = this.fragmentTracker,
                    a = this.media.currentTime,
                    n = i.getPartialFragment(a);
                if (n && this._trySkipBufferHole(n)) return;
                e.len > r.maxBufferHole && t > 1e3 * r.highBufferWatchdogPeriod && (u.b.warn("Trying to nudge playhead over buffer-hole"), this.stalled = null, this._tryNudgeBuffer())
            }, t._reportStall = function (e) {
                var t = this.hls,
                    r = this.media;
                this.stallReported || (this.stallReported = !0, u.b.warn("Playback stalling at @" + r.currentTime + " due to low buffer (buffer=" + e + ")"), t.trigger(d.a.ERROR, {
                    type: o.b.MEDIA_ERROR,
                    details: o.a.BUFFER_STALLED_ERROR,
                    fatal: !1,
                    buffer: e
                }))
            }, t._trySkipBufferHole = function (e) {
                for (var t = this.config, r = this.hls, i = this.media, a = i.currentTime, n = 0, s = 0; s < i.buffered.length; s++) {
                    var l = i.buffered.start(s);
                    if (a + t.maxBufferHole >= n && a < l) {
                        var c = Math.max(l + .05, i.currentTime + .1);
                        return u.b.warn("skipping hole, adjusting currentTime from " + a + " to " + c), this.moved = !0, this.stalled = null, i.currentTime = c, e && r.trigger(d.a.ERROR, {
                            type: o.b.MEDIA_ERROR,
                            details: o.a.BUFFER_SEEK_OVER_HOLE,
                            fatal: !1,
                            reason: "fragment loaded with buffer holes, seeking from " + a + " to " + c,
                            frag: e
                        }), c
                    }
                    n = i.buffered.end(s)
                }
                return 0
            }, t._tryNudgeBuffer = function () {
                var e = this.config,
                    t = this.hls,
                    r = this.media,
                    i = r.currentTime,
                    a = (this.nudgeRetry || 0) + 1;
                if (this.nudgeRetry = a, a < e.nudgeMaxRetry) {
                    var n = i + a * e.nudgeOffset;
                    u.b.warn("Nudging 'currentTime' from " + i + " to " + n), r.currentTime = n, t.trigger(d.a.ERROR, {
                        type: o.b.MEDIA_ERROR,
                        details: o.a.BUFFER_NUDGE_ON_STALL,
                        fatal: !1
                    })
                } else u.b.error("Playhead still not moving while enough data buffered @" + i + " after " + e.nudgeMaxRetry + " nudges"), t.trigger(d.a.ERROR, {
                    type: o.b.MEDIA_ERROR,
                    details: o.a.BUFFER_STALLED_ERROR,
                    fatal: !0
                })
            }, e
        }();

        function fe(e) {
            if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
            return e
        }
        var ge = function (e) {
            var t, r;

            function i(t) {
                for (var r, i = arguments.length, a = new Array(i > 1 ? i - 1 : 0), n = 1; n < i; n++) a[n - 1] = arguments[n];
                return (r = e.call.apply(e, [this, t].concat(a)) || this)._boundTick = void 0, r._tickTimer = null, r._tickInterval = null, r._tickCallCount = 0, r._boundTick = r.tick.bind(fe(r)), r
            }
            r = e, (t = i).prototype = Object.create(r.prototype), t.prototype.constructor = t, t.__proto__ = r;
            var a = i.prototype;
            return a.onHandlerDestroying = function () {
                this.clearNextTick(), this.clearInterval()
            }, a.hasInterval = function () {
                return !!this._tickInterval
            }, a.hasNextTick = function () {
                return !!this._tickTimer
            }, a.setInterval = function (e) {
                return !this._tickInterval && (this._tickInterval = self.setInterval(this._boundTick, e), !0)
            }, a.clearInterval = function () {
                return !!this._tickInterval && (self.clearInterval(this._tickInterval), this._tickInterval = null, !0)
            }, a.clearNextTick = function () {
                return !!this._tickTimer && (self.clearTimeout(this._tickTimer), this._tickTimer = null, !0)
            }, a.tick = function () {
                this._tickCallCount++, 1 === this._tickCallCount && (this.doTick(), this._tickCallCount > 1 && (this.clearNextTick(), this._tickTimer = self.setTimeout(this._boundTick, 0)), this._tickCallCount = 0)
            }, a.doTick = function () { }, i
        }(h);
        var pe = "STOPPED",
            ve = "STARTING",
            me = "IDLE",
            ye = "PAUSED",
            be = "KEY_LOADING",
            Te = "FRAG_LOADING",
            Ee = "FRAG_LOADING_WAITING_RETRY",
            Se = "WAITING_TRACK",
            _e = "PARSING",
            Re = "PARSED",
            Ae = "BUFFER_FLUSHING",
            ke = "ENDED",
            we = "ERROR",
            Le = "WAITING_INIT_PTS",
            De = "WAITING_LEVEL",
            Oe = function (e) {
                var t, r;

                function i() {
                    return e.apply(this, arguments) || this
                }
                r = e, (t = i).prototype = Object.create(r.prototype), t.prototype.constructor = t, t.__proto__ = r;
                var a = i.prototype;
                return a.doTick = function () { }, a.startLoad = function () { }, a.stopLoad = function () {
                    var e = this.fragCurrent;
                    e && (e.loader && e.loader.abort(), this.fragmentTracker.removeFragment(e)), this.demuxer && (this.demuxer.destroy(), this.demuxer = null), this.fragCurrent = null, this.fragPrevious = null, this.clearInterval(), this.clearNextTick(), this.state = pe
                }, a._streamEnded = function (e, t) {
                    var r = this.fragCurrent,
                        i = this.fragmentTracker;
                    if (!t.live && r && !r.backtracked && r.sn === t.endSN && !e.nextStart) {
                        var a = i.getState(r);
                        return a === B || a === G
                    }
                    return !1
                }, a.onMediaSeeking = function () {
                    var e = this.config,
                        t = this.media,
                        r = this.mediaBuffer,
                        i = this.state,
                        a = t ? t.currentTime : null,
                        n = H.bufferInfo(r || t, a, this.config.maxBufferHole);
                    if (u.b.log("media seeking to " + (Object(l.a)(a) ? a.toFixed(3) : a)), i === Te) {
                        var s = this.fragCurrent;
                        if (0 === n.len && s) {
                            var o = e.maxFragLookUpTolerance,
                                d = s.start - o,
                                c = s.start + s.duration + o;
                            a < d || a > c ? (s.loader && (u.b.log("seeking outside of buffer while fragment load in progress, cancel fragment load"), s.loader.abort()), this.fragCurrent = null, this.fragPrevious = null, this.state = me) : u.b.log("seeking outside of buffer but within currently loaded fragment range")
                        }
                    } else i === ke && (0 === n.len && (this.fragPrevious = null, this.fragCurrent = null), this.state = me);
                    t && (this.lastCurrentTime = a), this.loadedmetadata || (this.nextLoadPosition = this.startPosition = a), this.tick()
                }, a.onMediaEnded = function () {
                    this.startPosition = this.lastCurrentTime = 0
                }, a.onHandlerDestroying = function () {
                    this.stopLoad(), e.prototype.onHandlerDestroying.call(this)
                }, a.onHandlerDestroyed = function () {
                    this.state = pe, this.fragmentTracker = null
                }, a.computeLivePosition = function (e, t) {
                    var r = void 0 !== this.config.liveSyncDuration ? this.config.liveSyncDuration : this.config.liveSyncDurationCount * t.targetduration;
                    return e + Math.max(0, t.totalduration - r)
                }, i
            }(ge);

        function Ce(e, t) {
            for (var r = 0; r < t.length; r++) {
                var i = t[r];
                i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), Object.defineProperty(e, i.key, i)
            }
        }
        var Ie, Pe = function (e) {
            var t, r;

            function i(t, r) {
                var i;
                return (i = e.call(this, t, d.a.MEDIA_ATTACHED, d.a.MEDIA_DETACHING, d.a.MANIFEST_LOADING, d.a.MANIFEST_PARSED, d.a.LEVEL_LOADED, d.a.LEVELS_UPDATED, d.a.KEY_LOADED, d.a.FRAG_LOADED, d.a.FRAG_LOAD_EMERGENCY_ABORTED, d.a.FRAG_PARSING_INIT_SEGMENT, d.a.FRAG_PARSING_DATA, d.a.FRAG_PARSED, d.a.ERROR, d.a.AUDIO_TRACK_SWITCHING, d.a.AUDIO_TRACK_SWITCHED, d.a.BUFFER_CREATED, d.a.BUFFER_APPENDED, d.a.BUFFER_FLUSHED) || this).fragmentTracker = r, i.config = t.config, i.audioCodecSwap = !1, i._state = pe, i.stallReported = !1, i.gapController = null, i.altAudio = !1, i.audioOnly = !1, i.bitrateTest = !1, i
            }
            r = e, (t = i).prototype = Object.create(r.prototype), t.prototype.constructor = t, t.__proto__ = r;
            var a, s, c, h = i.prototype;
            return h.startLoad = function (e) {
                if (this.levels) {
                    var t = this.lastCurrentTime,
                        r = this.hls;
                    if (this.stopLoad(), this.setInterval(100), this.level = -1, this.fragLoadError = 0, !this.startFragRequested) {
                        var i = r.startLevel; - 1 === i && (r.config.testBandwidth ? (i = 0, this.bitrateTest = !0) : i = r.nextAutoLevel), this.level = r.nextLoadLevel = i, this.loadedmetadata = !1
                    }
                    t > 0 && -1 === e && (u.b.log("override startPosition with lastCurrentTime @" + t.toFixed(3)), e = t), this.state = me, this.nextLoadPosition = this.startPosition = this.lastCurrentTime = e, this.tick()
                } else this.forceStartLoad = !0, this.state = pe
            }, h.stopLoad = function () {
                this.forceStartLoad = !1, e.prototype.stopLoad.call(this)
            }, h.doTick = function () {
                switch (this.state) {
                    case Ae:
                        this.fragLoadError = 0;
                        break;
                    case me:
                        this._doTickIdle();
                        break;
                    case De:
                        var e = this.levels[this.level];
                        e && e.details && (this.state = me);
                        break;
                    case Ee:
                        var t = window.performance.now(),
                            r = this.retryDate;
                        (!r || t >= r || this.media && this.media.seeking) && (u.b.log("mediaController: retryDate reached, switch back to IDLE state"), this.state = me)
                }
                this._checkBuffer(), this._checkFragmentChanged()
            }, h._doTickIdle = function () {
                var e = this.hls,
                    t = e.config,
                    r = this.media;
                if (void 0 !== this.levelLastLoaded && (r || !this.startFragRequested && t.startFragPrefetch))
                    if (this.altAudio && this.audioOnly) this.demuxer.frag = null;
                    else {
                        var i;
                        i = this.loadedmetadata ? r.currentTime : this.nextLoadPosition;
                        var a = e.nextLoadLevel,
                            n = this.levels[a];
                        if (n) {
                            var s, o = n.bitrate;
                            s = o ? Math.max(8 * t.maxBufferSize / o, t.maxBufferLength) : t.maxBufferLength, s = Math.min(s, t.maxMaxBufferLength);
                            var l = i < t.maxBufferHole ? Math.max(2, t.maxBufferHole) : t.maxBufferHole,
                                c = H.bufferInfo(this.mediaBuffer ? this.mediaBuffer : r, i, l),
                                h = c.len;
                            if (!(h >= s)) {
                                u.b.trace("buffer length of " + h.toFixed(3) + " is below max of " + s.toFixed(3) + ". checking for more payload ..."), this.level = e.nextLoadLevel = a;
                                var f = n.details;
                                if (!f || f.live && this.levelLastLoaded !== a) this.state = De;
                                else {
                                    if (this._streamEnded(c, f)) {
                                        var g = {};
                                        return this.altAudio && (g.type = "video"), this.hls.trigger(d.a.BUFFER_EOS, g), void (this.state = ke)
                                    }
                                    this._fetchPayloadOrEos(i, c, f)
                                }
                            }
                        }
                    }
            }, h._fetchPayloadOrEos = function (e, t, r) {
                var i = this.fragPrevious,
                    a = (this.level, r.fragments),
                    n = a.length;
                if (0 !== n) {
                    var s, o = a[0].start,
                        l = a[n - 1].start + a[n - 1].duration,
                        d = t.end;
                    if (r.initSegment && !r.initSegment.data) s = r.initSegment;
                    else if (r.live) {
                        var c = this.config.initialLiveManifestSize;
                        if (n < c) return void u.b.warn("Can not start playback of a level, reason: not enough fragments " + n + " < " + c);
                        if (null === (s = this._ensureFragmentAtLivePoint(r, d, o, l, i, a))) return
                    } else d < o && (s = a[0]);
                    s || (s = this._findFragment(o, i, n, a, d, l, r)), s && (s.encrypted ? this._loadKey(s, r) : this._loadFragment(s, r, e, d))
                }
            }, h._ensureFragmentAtLivePoint = function (e, t, r, i, a, n) {
                var s, o = this.hls.config,
                    d = this.media,
                    c = 1 / 0;
                if (void 0 !== o.liveMaxLatencyDuration ? c = o.liveMaxLatencyDuration : Object(l.a)(o.liveMaxLatencyDurationCount) && (c = o.liveMaxLatencyDurationCount * e.targetduration), t < Math.max(r - o.maxFragLookUpTolerance, i - c)) {
                    var h = this.liveSyncPosition = this.computeLivePosition(r, e);
                    t = h, d && !d.paused && d.readyState && d.duration > h && h > d.currentTime && (u.b.log("buffer end: " + t.toFixed(3) + " is located too far from the end of live sliding playlist, reset currentTime to : " + h.toFixed(3)), d.currentTime = h), this.nextLoadPosition = h
                }
                if (e.PTSKnown && t > i && d && d.readyState) return null;
                if (this.startFragRequested && !e.PTSKnown && a)
                    if (e.hasProgramDateTime) u.b.log("live playlist, switching playlist, load frag with same PDT: " + a.programDateTime), s = le(n, a.endProgramDateTime, o.maxFragLookUpTolerance);
                    else {
                        var f = a.sn + 1;
                        if (f >= e.startSN && f <= e.endSN) {
                            var g = n[f - e.startSN];
                            a.cc === g.cc && (s = g, u.b.log("live playlist, switching playlist, load frag with next SN: " + s.sn))
                        }
                        s || (s = j.search(n, (function (e) {
                            return a.cc - e.cc
                        }))) && u.b.log("live playlist, switching playlist, load frag with same CC: " + s.sn)
                    } return s
            }, h._findFragment = function (e, t, r, i, a, n, s) {
                var o, l = this.hls.config;
                a < n ? o = de(t, i, a, a > n - l.maxFragLookUpTolerance ? 0 : l.maxFragLookUpTolerance) : o = i[r - 1];
                if (o) {
                    var d = o.sn - s.startSN,
                        c = t && o.level === t.level,
                        h = i[d - 1],
                        f = i[d + 1];
                    if (t && o.sn === t.sn)
                        if (c && !o.backtracked)
                            if (o.sn < s.endSN) {
                                var g = t.deltaPTS;
                                g && g > l.maxBufferHole && t.dropped && d ? (o = h, u.b.warn("Previous fragment was dropped with large PTS gap between audio and video. Maybe fragment is not starting with a keyframe? Loading previous one to try to overcome this")) : (o = f, this.fragmentTracker.getState(o) !== G && u.b.log("Re-loading fragment with SN: " + o.sn))
                            } else o = null;
                        else o.backtracked && (f && f.backtracked ? (u.b.warn("Already backtracked from fragment " + f.sn + ", will not backtrack to fragment " + o.sn + ". Loading fragment " + f.sn), o = f) : (u.b.warn("Loaded fragment with dropped frames, backtracking 1 segment to find a keyframe"), o.dropped = 0, h ? (o = h).backtracked = !0 : d && (o = null)))
                }
                return o
            }, h._loadKey = function (e, t) {
                u.b.log("Loading key for " + e.sn + " of [" + t.startSN + "-" + t.endSN + "], level " + this.level), this.state = be, this.hls.trigger(d.a.KEY_LOADING, {
                    frag: e
                })
            }, h._loadFragment = function (e, t, r, i) {
                var a = this.fragmentTracker.getState(e);
                this.fragCurrent = e, "initSegment" !== e.sn && (this.startFragRequested = !0), Object(l.a)(e.sn) && !e.bitrateTest && (this.nextLoadPosition = e.start + e.duration), e.backtracked || a === U || a === B ? (e.autoLevel = this.hls.autoLevelEnabled, e.bitrateTest = this.bitrateTest, u.b.log("Loading " + e.sn + " of [" + t.startSN + "-" + t.endSN + "], level " + this.level + ", " + (this.loadedmetadata ? "currentTime" : "nextLoadPosition") + ": " + parseFloat(r.toFixed(3)) + ", bufferEnd: " + parseFloat(i.toFixed(3))), this.hls.trigger(d.a.FRAG_LOADING, {
                    frag: e
                }), this.demuxer || (this.demuxer = new J(this.hls, "main")), this.state = Te) : a === N && this._reduceMaxBufferLength(e.duration) && this.fragmentTracker.removeFragment(e)
            }, h.getBufferedFrag = function (e) {
                return this.fragmentTracker.getBufferedFrag(e, n.MAIN)
            }, h.followingBufferedFrag = function (e) {
                return e ? this.getBufferedFrag(e.endPTS + .5) : null
            }, h._checkFragmentChanged = function () {
                var e, t, r = this.media;
                if (r && r.readyState && !1 === r.seeking && ((t = r.currentTime) > this.lastCurrentTime && (this.lastCurrentTime = t), H.isBuffered(r, t) ? e = this.getBufferedFrag(t) : H.isBuffered(r, t + .1) && (e = this.getBufferedFrag(t + .1)), e)) {
                    var i = e;
                    if (i !== this.fragPlaying) {
                        this.hls.trigger(d.a.FRAG_CHANGED, {
                            frag: i
                        });
                        var a = i.level;
                        this.fragPlaying && this.fragPlaying.level === a || this.hls.trigger(d.a.LEVEL_SWITCHED, {
                            level: a
                        }), this.fragPlaying = i
                    }
                }
            }, h.immediateLevelSwitch = function () {
                if (u.b.log("immediateLevelSwitch"), !this.immediateSwitch) {
                    this.immediateSwitch = !0;
                    var e, t = this.media;
                    t ? (e = t.paused) || t.pause() : e = !0, this.previouslyPaused = e
                }
                var r = this.fragCurrent;
                r && r.loader && r.loader.abort(), this.fragCurrent = null, this.flushMainBuffer(0, Number.POSITIVE_INFINITY)
            }, h.immediateLevelSwitchEnd = function () {
                var e = this.media;
                e && e.buffered.length && (this.immediateSwitch = !1, e.currentTime > 0 && H.isBuffered(e, e.currentTime) && (e.currentTime -= 1e-4), this.previouslyPaused || e.play())
            }, h.nextLevelSwitch = function () {
                var e = this.media;
                if (e && e.readyState) {
                    var t, r = this.getBufferedFrag(e.currentTime);
                    if (r && r.startPTS > 1 && this.flushMainBuffer(0, r.startPTS - 1), e.paused) t = 0;
                    else {
                        var i = this.hls.nextLoadLevel,
                            a = this.levels[i],
                            n = this.fragLastKbps;
                        t = n && this.fragCurrent ? this.fragCurrent.duration * a.bitrate / (1e3 * n) + 1 : 0
                    }
                    var s = this.getBufferedFrag(e.currentTime + t);
                    if (s) {
                        var o = this.followingBufferedFrag(s);
                        if (o) {
                            var l = this.fragCurrent;
                            l && l.loader && l.loader.abort(), this.fragCurrent = null;
                            var d = Math.max(s.endPTS, o.maxStartPTS + Math.min(this.config.maxFragLookUpTolerance, o.duration));
                            this.flushMainBuffer(d, Number.POSITIVE_INFINITY)
                        }
                    }
                }
            }, h.flushMainBuffer = function (e, t) {
                this.state = Ae;
                var r = {
                    startOffset: e,
                    endOffset: t
                };
                this.altAudio && (r.type = "video"), this.hls.trigger(d.a.BUFFER_FLUSHING, r)
            }, h.onMediaAttached = function (e) {
                var t = this.media = this.mediaBuffer = e.media;
                this.onvseeking = this.onMediaSeeking.bind(this), this.onvseeked = this.onMediaSeeked.bind(this), this.onvended = this.onMediaEnded.bind(this), t.addEventListener("seeking", this.onvseeking), t.addEventListener("seeked", this.onvseeked), t.addEventListener("ended", this.onvended);
                var r = this.config;
                this.levels && r.autoStartLoad && this.hls.startLoad(r.startPosition), this.gapController = new he(r, t, this.fragmentTracker, this.hls)
            }, h.onMediaDetaching = function () {
                var e = this.media;
                e && e.ended && (u.b.log("MSE detaching and video ended, reset startPosition"), this.startPosition = this.lastCurrentTime = 0);
                var t = this.levels;
                t && t.forEach((function (e) {
                    e.details && e.details.fragments.forEach((function (e) {
                        e.backtracked = void 0
                    }))
                })), e && (e.removeEventListener("seeking", this.onvseeking), e.removeEventListener("seeked", this.onvseeked), e.removeEventListener("ended", this.onvended), this.onvseeking = this.onvseeked = this.onvended = null), this.fragmentTracker.removeAllFragments(), this.media = this.mediaBuffer = null, this.loadedmetadata = !1, this.stopLoad()
            }, h.onMediaSeeked = function () {
                var e = this.media,
                    t = e ? e.currentTime : void 0;
                Object(l.a)(t) && u.b.log("media seeked to " + t.toFixed(3)), this.tick()
            }, h.onManifestLoading = function () {
                u.b.log("trigger BUFFER_RESET"), this.hls.trigger(d.a.BUFFER_RESET), this.fragmentTracker.removeAllFragments(), this.stalled = !1, this.startPosition = this.lastCurrentTime = 0
            }, h.onManifestParsed = function (e) {
                var t, r = !1,
                    i = !1;
                e.levels.forEach((function (e) {
                    (t = e.audioCodec) && (-1 !== t.indexOf("mp4a.40.2") && (r = !0), -1 !== t.indexOf("mp4a.40.5") && (i = !0))
                })), this.audioCodecSwitch = r && i, this.audioCodecSwitch && u.b.log("both AAC/HE-AAC audio found in levels; declaring level codec as HE-AAC"), this.altAudio = e.altAudio, this.levels = e.levels, this.startFragRequested = !1;
                var a = this.config;
                (a.autoStartLoad || this.forceStartLoad) && this.hls.startLoad(a.startPosition)
            }, h.onLevelLoaded = function (e) {
                var t = e.details,
                    r = e.level,
                    i = this.levels[this.levelLastLoaded],
                    a = this.levels[r],
                    n = t.totalduration,
                    s = 0;
                if (u.b.log("level " + r + " loaded [" + t.startSN + "," + t.endSN + "],duration:" + n), t.live || a.details && a.details.live) {
                    var o = a.details;
                    o && t.fragments.length > 0 ? (re(o, t), s = t.fragments[0].start, this.liveSyncPosition = this.computeLivePosition(s, o), t.PTSKnown && Object(l.a)(s) ? u.b.log("live playlist sliding:" + s.toFixed(3)) : (u.b.log("live playlist - outdated PTS, unknown sliding"), oe(this.fragPrevious, i, t))) : (u.b.log("live playlist - first load, unknown sliding"), t.PTSKnown = !1, oe(this.fragPrevious, i, t))
                } else t.PTSKnown = !1;
                if (a.details = t, this.levelLastLoaded = r, this.hls.trigger(d.a.LEVEL_UPDATED, {
                    details: t,
                    level: r
                }), !1 === this.startFragRequested) {
                    if (-1 === this.startPosition || -1 === this.lastCurrentTime) {
                        var c = t.startTimeOffset;
                        Object(l.a)(c) ? (c < 0 && (u.b.log("negative start time offset " + c + ", count from end of last fragment"), c = s + n + c), u.b.log("start time offset found in playlist, adjust startPosition to " + c), this.startPosition = c) : t.live ? (this.startPosition = this.computeLivePosition(s, t), u.b.log("configure startPosition to " + this.startPosition)) : this.startPosition = 0, this.lastCurrentTime = this.startPosition
                    }
                    this.nextLoadPosition = this.startPosition
                }
                this.state === De && (this.state = me), this.tick()
            }, h.onKeyLoaded = function () {
                this.state === be && (this.state = me, this.tick())
            }, h.onFragLoaded = function (e) {
                var t = this.fragCurrent,
                    r = this.hls,
                    i = this.levels,
                    a = this.media,
                    n = e.frag;
                if (this.state === Te && t && "main" === n.type && n.level === t.level && n.sn === t.sn) {
                    var s = e.stats,
                        o = i[t.level],
                        l = o.details;
                    if (this.bitrateTest = !1, this.stats = s, u.b.log("Loaded " + t.sn + " of [" + l.startSN + " ," + l.endSN + "],level " + t.level), n.bitrateTest && r.nextLoadLevel) this.state = me, this.startFragRequested = !1, s.tparsed = s.tbuffered = window.performance.now(), r.trigger(d.a.FRAG_BUFFERED, {
                        stats: s,
                        frag: t,
                        id: "main"
                    }), this.tick();
                    else if ("initSegment" === n.sn) this.state = me, s.tparsed = s.tbuffered = window.performance.now(), l.initSegment.data = e.payload, r.trigger(d.a.FRAG_BUFFERED, {
                        stats: s,
                        frag: t,
                        id: "main"
                    }), this.tick();
                    else {
                        u.b.log("Parsing " + t.sn + " of [" + l.startSN + " ," + l.endSN + "],level " + t.level + ", cc " + t.cc), this.state = _e, this.pendingBuffering = !0, this.appended = !1, n.bitrateTest && (n.bitrateTest = !1, this.fragmentTracker.onFragLoaded({
                            frag: n
                        }));
                        var c = !(a && a.seeking) && (l.PTSKnown || !l.live),
                            h = l.initSegment ? l.initSegment.data : [],
                            f = this._getAudioCodec(o);
                        (this.demuxer = this.demuxer || new J(this.hls, "main")).push(e.payload, h, f, o.videoCodec, t, l.totalduration, c)
                    }
                }
                this.fragLoadError = 0
            }, h.onFragParsingInitSegment = function (e) {
                var t = this.fragCurrent,
                    r = e.frag;
                if (t && "main" === e.id && r.sn === t.sn && r.level === t.level && this.state === _e) {
                    var i, a, n = e.tracks;
                    if (this.audioOnly = n.audio && !n.video, this.altAudio && !this.audioOnly && delete n.audio, a = n.audio) {
                        var s = this.levels[this.level].audioCodec,
                            o = navigator.userAgent.toLowerCase();
                        s && this.audioCodecSwap && (u.b.log("swapping playlist audio codec"), s = -1 !== s.indexOf("mp4a.40.5") ? "mp4a.40.2" : "mp4a.40.5"), this.audioCodecSwitch && 1 !== a.metadata.channelCount && -1 === o.indexOf("firefox") && (s = "mp4a.40.5"), -1 !== o.indexOf("android") && "audio/mpeg" !== a.container && (s = "mp4a.40.2", u.b.log("Android: force audio codec to " + s)), a.levelCodec = s, a.id = e.id
                    }
                    for (i in (a = n.video) && (a.levelCodec = this.levels[this.level].videoCodec, a.id = e.id), this.hls.trigger(d.a.BUFFER_CODECS, n), n) {
                        a = n[i], u.b.log("main track:" + i + ",container:" + a.container + ",codecs[level/parsed]=[" + a.levelCodec + "/" + a.codec + "]");
                        var l = a.initSegment;
                        l && (this.appended = !0, this.pendingBuffering = !0, this.hls.trigger(d.a.BUFFER_APPENDING, {
                            type: i,
                            data: l,
                            parent: "main",
                            content: "initSegment"
                        }))
                    }
                    this.tick()
                }
            }, h.onFragParsingData = function (e) {
                var t = this,
                    r = this.fragCurrent,
                    i = e.frag;
                if (r && "main" === e.id && i.sn === r.sn && i.level === r.level && ("audio" !== e.type || !this.altAudio) && this.state === _e) {
                    var a = this.levels[this.level],
                        n = r;
                    if (Object(l.a)(e.endPTS) || (e.endPTS = e.startPTS + r.duration, e.endDTS = e.startDTS + r.duration), !0 === e.hasAudio && n.addElementaryStream(p.AUDIO), !0 === e.hasVideo && n.addElementaryStream(p.VIDEO), u.b.log("Parsed " + e.type + ",PTS:[" + e.startPTS.toFixed(3) + "," + e.endPTS.toFixed(3) + "],DTS:[" + e.startDTS.toFixed(3) + "/" + e.endDTS.toFixed(3) + "],nb:" + e.nb + ",dropped:" + (e.dropped || 0)), "video" === e.type)
                        if (n.dropped = e.dropped, n.dropped)
                            if (n.backtracked) u.b.warn("Already backtracked on this fragment, appending with the gap", n.sn);
                            else {
                                var s = a.details;
                                if (!s || n.sn !== s.startSN) return u.b.warn("missing video frame(s), backtracking fragment", n.sn), this.fragmentTracker.removeFragment(n), n.backtracked = !0, this.nextLoadPosition = e.startPTS, this.state = me, this.fragPrevious = n, this.demuxer && (this.demuxer.destroy(), this.demuxer = null), void this.tick();
                                u.b.warn("missing video frame(s) on first frag, appending with gap", n.sn)
                            }
                        else n.backtracked = !1;
                    var o = te(a.details, n, e.startPTS, e.endPTS, e.startDTS, e.endDTS),
                        c = this.hls;
                    c.trigger(d.a.LEVEL_PTS_UPDATED, {
                        details: a.details,
                        level: this.level,
                        drift: o,
                        type: e.type,
                        start: e.startPTS,
                        end: e.endPTS
                    }), [e.data1, e.data2].forEach((function (r) {
                        r && r.length && t.state === _e && (t.appended = !0, t.pendingBuffering = !0, c.trigger(d.a.BUFFER_APPENDING, {
                            type: e.type,
                            data: r,
                            parent: "main",
                            content: "data"
                        }))
                    })), this.tick()
                }
            }, h.onFragParsed = function (e) {
                var t = this.fragCurrent,
                    r = e.frag;
                t && "main" === e.id && r.sn === t.sn && r.level === t.level && this.state === _e && (this.stats.tparsed = window.performance.now(), this.state = Re, this._checkAppendedParsed())
            }, h.onAudioTrackSwitching = function (e) {
                var t = this.altAudio,
                    r = !!e.url,
                    i = e.id;
                if (!r) {
                    if (this.mediaBuffer !== this.media) {
                        u.b.log("switching on main audio, use media.buffered to schedule main fragment loading"), this.mediaBuffer = this.media;
                        var a = this.fragCurrent;
                        a.loader && (u.b.log("switching to main audio track, cancel main fragment load"), a.loader.abort()), this.fragCurrent = null, this.fragPrevious = null, this.demuxer && (this.demuxer.destroy(), this.demuxer = null), this.state = me
                    }
                    var n = this.hls;
                    t && n.trigger(d.a.BUFFER_FLUSHING, {
                        startOffset: 0,
                        endOffset: Number.POSITIVE_INFINITY,
                        type: "audio"
                    }), n.trigger(d.a.AUDIO_TRACK_SWITCHED, {
                        id: i
                    })
                }
            }, h.onAudioTrackSwitched = function (e) {
                var t = e.id,
                    r = !!this.hls.audioTracks[t].url;
                if (r) {
                    var i = this.videoBuffer;
                    i && this.mediaBuffer !== i && (u.b.log("switching on alternate audio, use video.buffered to schedule main fragment loading"), this.mediaBuffer = i)
                }
                this.altAudio = r, this.tick()
            }, h.onBufferCreated = function (e) {
                var t, r, i = e.tracks,
                    a = !1;
                for (var n in i) {
                    var s = i[n];
                    "main" === s.id ? (r = n, t = s, "video" === n && (this.videoBuffer = i[n].buffer)) : a = !0
                }
                a && t ? (u.b.log("alternate track found, use " + r + ".buffered to schedule main fragment loading"), this.mediaBuffer = t.buffer) : this.mediaBuffer = this.media
            }, h.onBufferAppended = function (e) {
                if ("main" === e.parent) {
                    var t = this.state;
                    t !== _e && t !== Re || (this.pendingBuffering = e.pending > 0, this._checkAppendedParsed())
                }
            }, h._checkAppendedParsed = function () {
                if (!(this.state !== Re || this.appended && this.pendingBuffering)) {
                    var e = this.fragCurrent;
                    if (e) {
                        var t = this.mediaBuffer ? this.mediaBuffer : this.media;
                        u.b.log("main buffered : " + ne.toString(t.buffered)), this.fragPrevious = e;
                        var r = this.stats;
                        r.tbuffered = window.performance.now(), this.fragLastKbps = Math.round(8 * r.total / (r.tbuffered - r.tfirst)), this.hls.trigger(d.a.FRAG_BUFFERED, {
                            stats: r,
                            frag: e,
                            id: "main"
                        }), this.state = me
                    } (this.loadedmetadata || this.startPosition <= 0) && this.tick()
                }
            }, h.onError = function (e) {
                var t = e.frag || this.fragCurrent;
                if (!t || "main" === t.type) {
                    var r = !!this.media && H.isBuffered(this.media, this.media.currentTime) && H.isBuffered(this.media, this.media.currentTime + .5);
                    switch (e.details) {
                        case o.a.FRAG_LOAD_ERROR:
                        case o.a.FRAG_LOAD_TIMEOUT:
                        case o.a.KEY_LOAD_ERROR:
                        case o.a.KEY_LOAD_TIMEOUT:
                            if (!e.fatal)
                                if (this.fragLoadError + 1 <= this.config.fragLoadingMaxRetry) {
                                    var i = Math.min(Math.pow(2, this.fragLoadError) * this.config.fragLoadingRetryDelay, this.config.fragLoadingMaxRetryTimeout);
                                    u.b.warn("mediaController: frag loading failed, retry in " + i + " ms"), this.retryDate = window.performance.now() + i, this.loadedmetadata || (this.startFragRequested = !1, this.nextLoadPosition = this.startPosition), this.fragLoadError++, this.state = Ee
                                } else u.b.error("mediaController: " + e.details + " reaches max retry, redispatch as fatal ..."), e.fatal = !0, this.state = we;
                            break;
                        case o.a.LEVEL_LOAD_ERROR:
                        case o.a.LEVEL_LOAD_TIMEOUT:
                            this.state !== we && (e.fatal ? (this.state = we, u.b.warn("streamController: " + e.details + ",switch to " + this.state + " state ...")) : e.levelRetry || this.state !== De || (this.state = me));
                            break;
                        case o.a.BUFFER_FULL_ERROR:
                            "main" !== e.parent || this.state !== _e && this.state !== Re || (r ? (this._reduceMaxBufferLength(this.config.maxBufferLength), this.state = me) : (u.b.warn("buffer full error also media.currentTime is not buffered, flush everything"), this.fragCurrent = null, this.flushMainBuffer(0, Number.POSITIVE_INFINITY)))
                    }
                }
            }, h._reduceMaxBufferLength = function (e) {
                var t = this.config;
                return t.maxMaxBufferLength >= e && (t.maxMaxBufferLength /= 2, u.b.warn("main:reduce max buffer length to " + t.maxMaxBufferLength + "s"), !0)
            }, h._checkBuffer = function () {
                var e = this.media;
                if (e && 0 !== e.readyState) {
                    var t = (this.mediaBuffer ? this.mediaBuffer : e).buffered;
                    !this.loadedmetadata && t.length ? (this.loadedmetadata = !0, this._seekToStartPos()) : this.immediateSwitch ? this.immediateLevelSwitchEnd() : this.gapController.poll(this.lastCurrentTime, t)
                }
            }, h.onFragLoadEmergencyAborted = function () {
                this.state = me, this.loadedmetadata || (this.startFragRequested = !1, this.nextLoadPosition = this.startPosition), this.tick()
            }, h.onBufferFlushed = function () {
                var e = this.mediaBuffer ? this.mediaBuffer : this.media;
                if (e) {
                    var t = this.audioOnly ? p.AUDIO : p.VIDEO;
                    this.fragmentTracker.detectEvictedFragments(t, e.buffered)
                }
                this.state = me, this.fragPrevious = null
            }, h.onLevelsUpdated = function (e) {
                this.levels = e.levels
            }, h.swapAudioCodec = function () {
                this.audioCodecSwap = !this.audioCodecSwap
            }, h._seekToStartPos = function () {
                var e = this.media,
                    t = e.currentTime,
                    r = this.startPosition;
                if (t !== r && r >= 0) {
                    if (e.seeking) return void u.b.log("could not seek to " + r + ", already seeking at " + t);
                    var i = (e.buffered.length ? e.buffered.start(0) : 0) - r;
                    i > 0 && i < this.config.maxBufferHole && (u.b.log("adjusting start position by " + i + " to match buffer start"), r += i, this.startPosition = r), u.b.log("seek to target start position " + r + " from current time " + t + ". ready state " + e.readyState), e.currentTime = r
                }
            }, h._getAudioCodec = function (e) {
                var t = this.config.defaultAudioCodec || e.audioCodec;
                return this.audioCodecSwap && (u.b.log("swapping playlist audio codec"), t && (t = -1 !== t.indexOf("mp4a.40.5") ? "mp4a.40.2" : "mp4a.40.5")), t
            }, a = i, (s = [{
                key: "state",
                set: function (e) {
                    if (this.state !== e) {
                        var t = this.state;
                        this._state = e, u.b.log("main stream-controller: " + t + "->" + e), this.hls.trigger(d.a.STREAM_STATE_TRANSITION, {
                            previousState: t,
                            nextState: e
                        })
                    }
                },
                get: function () {
                    return this._state
                }
            }, {
                key: "currentLevel",
                get: function () {
                    var e = this.media;
                    if (e) {
                        var t = this.getBufferedFrag(e.currentTime);
                        if (t) return t.level
                    }
                    return -1
                }
            }, {
                key: "nextBufferedFrag",
                get: function () {
                    var e = this.media;
                    return e ? this.followingBufferedFrag(this.getBufferedFrag(e.currentTime)) : null
                }
            }, {
                key: "nextLevel",
                get: function () {
                    var e = this.nextBufferedFrag;
                    return e ? e.level : -1
                }
            }, {
                key: "liveSyncPosition",
                get: function () {
                    return this._liveSyncPosition
                },
                set: function (e) {
                    this._liveSyncPosition = e
                }
            }]) && Ce(a.prototype, s), c && Ce(a, c), i
        }(Oe);

        function xe(e, t) {
            for (var r = 0; r < t.length; r++) {
                var i = t[r];
                i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), Object.defineProperty(e, i.key, i)
            }
        }
        var Me = function (e) {
            var t, r;

            function i(t) {
                var r;
                return (r = e.call(this, t, d.a.MANIFEST_LOADED, d.a.LEVEL_LOADED, d.a.AUDIO_TRACK_SWITCHED, d.a.FRAG_LOADED, d.a.ERROR) || this).canload = !1, r.currentLevelIndex = null, r.manualLevelIndex = -1, r.timer = null, Ie = /chrome|firefox/.test(navigator.userAgent.toLowerCase()), r
            }
            r = e, (t = i).prototype = Object.create(r.prototype), t.prototype.constructor = t, t.__proto__ = r;
            var a, n, s, l = i.prototype;
            return l.onHandlerDestroying = function () {
                this.clearTimer(), this.manualLevelIndex = -1
            }, l.clearTimer = function () {
                null !== this.timer && (clearTimeout(this.timer), this.timer = null)
            }, l.startLoad = function () {
                var e = this._levels;
                this.canload = !0, this.levelRetryCount = 0, e && e.forEach((function (e) {
                    e.loadError = 0;
                    var t = e.details;
                    t && t.live && (e.details = void 0)
                })), null !== this.timer && this.loadLevel()
            }, l.stopLoad = function () {
                this.canload = !1
            }, l.onManifestLoaded = function (e) {
                var t, r = [],
                    i = [],
                    a = {},
                    n = null,
                    s = !1,
                    l = !1;
                if (e.levels.forEach((function (e) {
                    var t = e.attrs;
                    e.loadError = 0, e.fragmentError = !1, s = s || !!e.videoCodec, l = l || !!e.audioCodec, Ie && e.audioCodec && -1 !== e.audioCodec.indexOf("mp4a.40.34") && (e.audioCodec = void 0), (n = a[e.bitrate]) ? n.url.push(e.url) : (e.url = [e.url], e.urlId = 0, a[e.bitrate] = e, r.push(e)), t && (t.AUDIO && Z(n || e, "audio", t.AUDIO), t.SUBTITLES && Z(n || e, "text", t.SUBTITLES))
                })), s && l && (r = r.filter((function (e) {
                    return !!e.videoCodec
                }))), r = r.filter((function (e) {
                    var t = e.audioCodec,
                        r = e.videoCodec;
                    return (!t || A(t, "audio")) && (!r || A(r, "video"))
                })), e.audioTracks && (i = e.audioTracks.filter((function (e) {
                    return !e.audioCodec || A(e.audioCodec, "audio")
                }))).forEach((function (e, t) {
                    e.id = t
                })), r.length > 0) {
                    t = r[0].bitrate, r.sort((function (e, t) {
                        return e.bitrate - t.bitrate
                    })), this._levels = r;
                    for (var c = 0; c < r.length; c++)
                        if (r[c].bitrate === t) {
                            this._firstLevel = c, u.b.log("manifest loaded," + r.length + " level(s) found, first bitrate:" + t);
                            break
                        } var h = l && !s;
                    this.hls.trigger(d.a.MANIFEST_PARSED, {
                        levels: r,
                        audioTracks: i,
                        firstLevel: this._firstLevel,
                        stats: e.stats,
                        audio: l,
                        video: s,
                        altAudio: !h && i.some((function (e) {
                            return !!e.url
                        }))
                    })
                } else this.hls.trigger(d.a.ERROR, {
                    type: o.b.MEDIA_ERROR,
                    details: o.a.MANIFEST_INCOMPATIBLE_CODECS_ERROR,
                    fatal: !0,
                    url: this.hls.url,
                    reason: "no level with compatible codecs found in manifest"
                })
            }, l.setLevelInternal = function (e) {
                var t = this._levels,
                    r = this.hls;
                if (e >= 0 && e < t.length) {
                    if (this.clearTimer(), this.currentLevelIndex !== e) {
                        u.b.log("switching to level " + e), this.currentLevelIndex = e;
                        var i = t[e];
                        i.level = e, r.trigger(d.a.LEVEL_SWITCHING, i)
                    }
                    var a = t[e],
                        n = a.details;
                    if (!n || n.live) {
                        var s = a.urlId;
                        r.trigger(d.a.LEVEL_LOADING, {
                            url: a.url[s],
                            level: e,
                            id: s
                        })
                    }
                } else r.trigger(d.a.ERROR, {
                    type: o.b.OTHER_ERROR,
                    details: o.a.LEVEL_SWITCH_ERROR,
                    level: e,
                    fatal: !1,
                    reason: "invalid level idx"
                })
            }, l.onError = function (e) {
                if (e.fatal) e.type === o.b.NETWORK_ERROR && this.clearTimer();
                else {
                    var t, r = !1,
                        i = !1;
                    switch (e.details) {
                        case o.a.FRAG_LOAD_ERROR:
                        case o.a.FRAG_LOAD_TIMEOUT:
                        case o.a.KEY_LOAD_ERROR:
                        case o.a.KEY_LOAD_TIMEOUT:
                            t = e.frag.level, i = !0;
                            break;
                        case o.a.LEVEL_LOAD_ERROR:
                        case o.a.LEVEL_LOAD_TIMEOUT:
                            t = e.context.level, r = !0;
                            break;
                        case o.a.REMUX_ALLOC_ERROR:
                            t = e.level, r = !0
                    }
                    void 0 !== t && this.recoverLevel(e, t, r, i)
                }
            }, l.recoverLevel = function (e, t, r, i) {
                var a, n, s, o = this,
                    l = this.hls.config,
                    d = e.details,
                    c = this._levels[t];
                if (c.loadError++, c.fragmentError = i, r) {
                    if (!(this.levelRetryCount + 1 <= l.levelLoadingMaxRetry)) return u.b.error("level controller, cannot recover from " + d + " error"), this.currentLevelIndex = null, this.clearTimer(), void (e.fatal = !0);
                    n = Math.min(Math.pow(2, this.levelRetryCount) * l.levelLoadingRetryDelay, l.levelLoadingMaxRetryTimeout), this.timer = setTimeout((function () {
                        return o.loadLevel()
                    }), n), e.levelRetry = !0, this.levelRetryCount++, u.b.warn("level controller, " + d + ", retry in " + n + " ms, current retry count is " + this.levelRetryCount)
                } (r || i) && ((a = c.url.length) > 1 && c.loadError < a ? (c.urlId = (c.urlId + 1) % a, c.details = void 0, u.b.warn("level controller, " + d + " for level " + t + ": switching to redundant URL-id " + c.urlId)) : -1 === this.manualLevelIndex ? (s = 0 === t ? this._levels.length - 1 : t - 1, u.b.warn("level controller, " + d + ": switch to " + s), this.hls.nextAutoLevel = this.currentLevelIndex = s) : i && (u.b.warn("level controller, " + d + ": reload a fragment"), this.currentLevelIndex = null))
            }, l.onFragLoaded = function (e) {
                var t = e.frag;
                if (void 0 !== t && "main" === t.type) {
                    var r = this._levels[t.level];
                    void 0 !== r && (r.fragmentError = !1, r.loadError = 0, this.levelRetryCount = 0)
                }
            }, l.onLevelLoaded = function (e) {
                var t = this,
                    r = e.level,
                    i = e.details;
                if (r === this.currentLevelIndex) {
                    var a = this._levels[r];
                    if (a.fragmentError || (a.loadError = 0, this.levelRetryCount = 0), i.live) {
                        var n = ae(a.details, i, e.stats.trequest);
                        u.b.log("live playlist, reload in " + Math.round(n) + " ms"), this.timer = setTimeout((function () {
                            return t.loadLevel()
                        }), n)
                    } else this.clearTimer()
                }
            }, l.onAudioTrackSwitched = function (e) {
                var t = this.hls.audioTracks[e.id].groupId,
                    r = this.hls.levels[this.currentLevelIndex];
                if (r && r.audioGroupIds) {
                    for (var i = -1, a = 0; a < r.audioGroupIds.length; a++)
                        if (r.audioGroupIds[a] === t) {
                            i = a;
                            break
                        } i !== r.urlId && (r.urlId = i, this.startLoad())
                }
            }, l.loadLevel = function () {
                if (u.b.debug("call to loadLevel"), null !== this.currentLevelIndex && this.canload) {
                    var e = this._levels[this.currentLevelIndex];
                    if ("object" == typeof e && e.url.length > 0) {
                        var t = this.currentLevelIndex,
                            r = e.urlId,
                            i = e.url[r];
                        u.b.log("Attempt loading level index " + t + " with URL-id " + r), this.hls.trigger(d.a.LEVEL_LOADING, {
                            url: i,
                            level: t,
                            id: r
                        })
                    }
                }
            }, l.removeLevel = function (e, t) {
                var r = this.levels.filter((function (r, i) {
                    return i !== e || r.url.length > 1 && void 0 !== t && (r.url = r.url.filter((function (e, r) {
                        return r !== t
                    })), r.urlId = 0, !0)
                })).map((function (e, t) {
                    var r = e.details;
                    return r && r.fragments && r.fragments.forEach((function (e) {
                        e.level = t
                    })), e
                }));
                this._levels = r, this.hls.trigger(d.a.LEVELS_UPDATED, {
                    levels: r
                })
            }, a = i, (n = [{
                key: "levels",
                get: function () {
                    return this._levels
                }
            }, {
                key: "level",
                get: function () {
                    return this.currentLevelIndex
                },
                set: function (e) {
                    var t = this._levels;
                    t && (e = Math.min(e, t.length - 1), this.currentLevelIndex === e && t[e].details || this.setLevelInternal(e))
                }
            }, {
                key: "manualLevel",
                get: function () {
                    return this.manualLevelIndex
                },
                set: function (e) {
                    this.manualLevelIndex = e, void 0 === this._startLevel && (this._startLevel = e), -1 !== e && (this.level = e)
                }
            }, {
                key: "firstLevel",
                get: function () {
                    return this._firstLevel
                },
                set: function (e) {
                    this._firstLevel = e
                }
            }, {
                key: "startLevel",
                get: function () {
                    if (void 0 === this._startLevel) {
                        var e = this.hls.config.startLevel;
                        return void 0 !== e ? e : this._firstLevel
                    }
                    return this._startLevel
                },
                set: function (e) {
                    this._startLevel = e
                }
            }, {
                key: "nextLoadLevel",
                get: function () {
                    return -1 !== this.manualLevelIndex ? this.manualLevelIndex : this.hls.nextAutoLevel
                },
                set: function (e) {
                    this.level = e, -1 === this.manualLevelIndex && (this.hls.nextAutoLevel = e)
                }
            }]) && xe(a.prototype, n), s && xe(a, s), i
        }(h),
            Fe = r(4);

        function Ue(e, t) {
            var r;
            try {
                r = new Event("addtrack")
            } catch (e) {
                (r = document.createEvent("Event")).initEvent("addtrack", !1, !1)
            }
            r.track = e, t.dispatchEvent(r)
        }

        function Ne(e) {
            if (null == e ? void 0 : e.cues)
                for (; e.cues.length > 0;) e.removeCue(e.cues[0])
        }
        var Be = function (e) {
            var t, r;

            function i(t) {
                var r;
                return (r = e.call(this, t, d.a.MEDIA_ATTACHED, d.a.MEDIA_DETACHING, d.a.FRAG_PARSING_METADATA, d.a.LIVE_BACK_BUFFER_REACHED) || this).id3Track = void 0, r.media = void 0, r
            }
            r = e, (t = i).prototype = Object.create(r.prototype), t.prototype.constructor = t, t.__proto__ = r;
            var a = i.prototype;
            return a.destroy = function () {
                h.prototype.destroy.call(this)
            }, a.onMediaAttached = function (e) {
                this.media = e.media, this.media
            }, a.onMediaDetaching = function () {
                Ne(this.id3Track), this.id3Track = void 0, this.media = void 0
            }, a.getID3Track = function (e) {
                for (var t = 0; t < e.length; t++) {
                    var r = e[t];
                    if ("metadata" === r.kind && "id3" === r.label) return Ue(r, this.media), r
                }
                return this.media.addTextTrack("metadata", "id3")
            }, a.onFragParsingMetadata = function (e) {
                var t = e.frag,
                    r = e.samples;
                this.id3Track || (this.id3Track = this.getID3Track(this.media.textTracks), this.id3Track.mode = "hidden");
                for (var i = window.WebKitDataCue || window.VTTCue || window.TextTrackCue, a = 0; a < r.length; a++) {
                    var n = Fe.a.getID3Frames(r[a].data);
                    if (n) {
                        var s = Math.max(r[a].pts, 0),
                            o = a < r.length - 1 ? r[a + 1].pts : t.endPTS;
                        o || (o = t.start + t.duration), o - s <= 0 && (o = s + .25);
                        for (var l = 0; l < n.length; l++) {
                            var d = n[l];
                            if (!Fe.a.isTimeStampFrame(d)) {
                                var u = new i(s, o, "");
                                u.value = d, this.id3Track.addCue(u)
                            }
                        }
                    }
                }
            }, a.onLiveBackBufferReached = function (e) {
                var t = e.bufferEnd,
                    r = this.id3Track;
                if (r && r.cues && r.cues.length) {
                    var i = function (e, t) {
                        if (t < e[0].endTime) return e[0];
                        if (t > e[e.length - 1].endTime) return e[e.length - 1];
                        for (var r = 0, i = e.length - 1; r <= i;) {
                            var a = Math.floor((i + r) / 2);
                            if (t < e[a].endTime) i = a - 1;
                            else {
                                if (!(t > e[a].endTime)) return e[a];
                                r = a + 1
                            }
                        }
                        return e[r].endTime - t < t - e[i].endTime ? e[r] : e[i]
                    }(r.cues, t);
                    if (i)
                        for (; r.cues[0] !== i;) r.removeCue(r.cues[0])
                }
            }, i
        }(h);
        var Ge = function () {
            function e(e) {
                this.alpha_ = void 0, this.estimate_ = void 0, this.totalWeight_ = void 0, this.alpha_ = e ? Math.exp(Math.log(.5) / e) : 0, this.estimate_ = 0, this.totalWeight_ = 0
            }
            var t = e.prototype;
            return t.sample = function (e, t) {
                var r = Math.pow(this.alpha_, e);
                this.estimate_ = t * (1 - r) + r * this.estimate_, this.totalWeight_ += e
            }, t.getTotalWeight = function () {
                return this.totalWeight_
            }, t.getEstimate = function () {
                if (this.alpha_) {
                    var e = 1 - Math.pow(this.alpha_, this.totalWeight_);
                    return this.estimate_ / e
                }
                return this.estimate_
            }, e
        }(),
            Ke = function () {
                function e(e, t, r, i) {
                    this.hls = void 0, this.defaultEstimate_ = void 0, this.minWeight_ = void 0, this.minDelayMs_ = void 0, this.slow_ = void 0, this.fast_ = void 0, this.hls = e, this.defaultEstimate_ = i, this.minWeight_ = .001, this.minDelayMs_ = 50, this.slow_ = new Ge(t), this.fast_ = new Ge(r)
                }
                var t = e.prototype;
                return t.sample = function (e, t) {
                    var r = (e = Math.max(e, this.minDelayMs_)) / 1e3,
                        i = 8 * t / r;
                    this.fast_.sample(r, i), this.slow_.sample(r, i)
                }, t.canEstimate = function () {
                    var e = this.fast_;
                    return e && e.getTotalWeight() >= this.minWeight_
                }, t.getEstimate = function () {
                    return this.canEstimate() ? Math.min(this.fast_.getEstimate(), this.slow_.getEstimate()) : this.defaultEstimate_
                }, t.destroy = function () { }, e
            }();

        function je(e, t) {
            for (var r = 0; r < t.length; r++) {
                var i = t[r];
                i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), Object.defineProperty(e, i.key, i)
            }
        }
        var He = window.performance,
            Ve = function (e) {
                var t, r;

                function i(t) {
                    var r;
                    return (r = e.call(this, t, d.a.FRAG_LOADING, d.a.FRAG_LOADED, d.a.FRAG_BUFFERED, d.a.ERROR) || this).lastLoadedFragLevel = 0, r._nextAutoLevel = -1, r.hls = t, r.timer = null, r._bwEstimator = null, r.onCheck = r._abandonRulesCheck.bind(function (e) {
                        if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                        return e
                    }(r)), r
                }
                r = e, (t = i).prototype = Object.create(r.prototype), t.prototype.constructor = t, t.__proto__ = r;
                var a, n, s, c = i.prototype;
                return c.destroy = function () {
                    this.clearTimer(), h.prototype.destroy.call(this)
                }, c.onFragLoading = function (e) {
                    var t = e.frag;
                    if ("main" === t.type && (this.timer || (this.fragCurrent = t, this.timer = setInterval(this.onCheck, 100)), !this._bwEstimator)) {
                        var r, i, a = this.hls,
                            n = a.config,
                            s = t.level;
                        a.levels[s].details.live ? (r = n.abrEwmaFastLive, i = n.abrEwmaSlowLive) : (r = n.abrEwmaFastVoD, i = n.abrEwmaSlowVoD), this._bwEstimator = new Ke(a, i, r, n.abrEwmaDefaultEstimate)
                    }
                }, c._abandonRulesCheck = function () {
                    var e = this.hls,
                        t = e.media,
                        r = this.fragCurrent;
                    if (r) {
                        var i = r.loader;
                        if (!i || i.stats && i.stats.aborted) return u.b.warn("frag loader destroy or aborted, disarm abandonRules"), this.clearTimer(), void (this._nextAutoLevel = -1);
                        var a = i.stats;
                        if (t && a && (!t.paused && 0 !== t.playbackRate || !t.readyState) && r.autoLevel && r.level) {
                            var n = He.now() - a.trequest,
                                s = Math.abs(t.playbackRate);
                            if (n > 500 * r.duration / s) {
                                var o = e.levels,
                                    l = Math.max(1, a.bw ? a.bw / 8 : 1e3 * a.loaded / n),
                                    c = o[r.level];
                                if (!c) return;
                                var h = c.realBitrate ? Math.max(c.realBitrate, c.bitrate) : c.bitrate,
                                    f = a.total ? a.total : Math.max(a.loaded, Math.round(r.duration * h / 8)),
                                    g = t.currentTime,
                                    p = (f - a.loaded) / l,
                                    v = (H.bufferInfo(t, g, e.config.maxBufferHole).end - g) / s;
                                if (v < 2 * r.duration / s && p > v) {
                                    var m, y = e.minAutoLevel;
                                    for (m = r.level - 1; m > y; m--) {
                                        var b = o[m].realBitrate ? Math.max(o[m].realBitrate, o[m].bitrate) : o[m].bitrate;
                                        if (r.duration * b / (6.4 * l) < v) break
                                    }
                                    void 0 < p && (u.b.warn("loading too slow, abort fragment loading and switch to level " + m + ":fragLoadedDelay[" + m + "]<fragLoadedDelay[" + (r.level - 1) + "];bufferStarvationDelay:" + (void 0).toFixed(1) + "<" + p.toFixed(1) + ":" + v.toFixed(1)), e.nextLoadLevel = m, this._bwEstimator.sample(n, a.loaded), i.abort(), this.clearTimer(), e.trigger(d.a.FRAG_LOAD_EMERGENCY_ABORTED, {
                                        frag: r,
                                        stats: a
                                    }))
                                }
                            }
                        }
                    }
                }, c.onFragLoaded = function (e) {
                    var t = e.frag;
                    if ("main" === t.type && Object(l.a)(t.sn)) {
                        if (this.clearTimer(), this.lastLoadedFragLevel = t.level, this._nextAutoLevel = -1, this.hls.config.abrMaxWithRealBitrate) {
                            var r = this.hls.levels[t.level],
                                i = (r.loaded ? r.loaded.bytes : 0) + e.stats.loaded,
                                a = (r.loaded ? r.loaded.duration : 0) + e.frag.duration;
                            r.loaded = {
                                bytes: i,
                                duration: a
                            }, r.realBitrate = Math.round(8 * i / a)
                        }
                        if (e.frag.bitrateTest) {
                            var n = e.stats;
                            n.tparsed = n.tbuffered = n.tload, this.onFragBuffered(e)
                        }
                    }
                }, c.onFragBuffered = function (e) {
                    var t = e.stats,
                        r = e.frag;
                    if (!0 !== t.aborted && "main" === r.type && Object(l.a)(r.sn) && (!r.bitrateTest || t.tload === t.tbuffered)) {
                        var i = t.tparsed - t.trequest;
                        u.b.log("latency/loading/parsing/append/kbps:" + Math.round(t.tfirst - t.trequest) + "/" + Math.round(t.tload - t.tfirst) + "/" + Math.round(t.tparsed - t.tload) + "/" + Math.round(t.tbuffered - t.tparsed) + "/" + Math.round(8 * t.loaded / (t.tbuffered - t.trequest))), this._bwEstimator.sample(i, t.loaded), t.bwEstimate = this._bwEstimator.getEstimate(), r.bitrateTest ? this.bitrateTestDelay = i / 1e3 : this.bitrateTestDelay = 0
                    }
                }, c.onError = function (e) {
                    switch (e.details) {
                        case o.a.FRAG_LOAD_ERROR:
                        case o.a.FRAG_LOAD_TIMEOUT:
                            this.clearTimer()
                    }
                }, c.clearTimer = function () {
                    clearInterval(this.timer), this.timer = null
                }, c._findBestLevel = function (e, t, r, i, a, n, s, o, l) {
                    for (var d = a; d >= i; d--) {
                        var c = l[d];
                        if (c) {
                            var h = c.details,
                                f = h ? h.totalduration / h.fragments.length : t,
                                g = !!h && h.live,
                                p = void 0;
                            p = d <= e ? s * r : o * r;
                            var v = l[d].realBitrate ? Math.max(l[d].realBitrate, l[d].bitrate) : l[d].bitrate,
                                m = v * f / p;
                            if (u.b.trace("level/adjustedbw/bitrate/avgDuration/maxFetchDuration/fetchDuration: " + d + "/" + Math.round(p) + "/" + v + "/" + f + "/" + n + "/" + m), p > v && (!m || g && !this.bitrateTestDelay || m < n)) return d
                        }
                    }
                    return -1
                }, a = i, (n = [{
                    key: "nextAutoLevel",
                    get: function () {
                        var e = this._nextAutoLevel,
                            t = this._bwEstimator;
                        if (!(-1 === e || t && t.canEstimate())) return e;
                        var r = this._nextABRAutoLevel;
                        return -1 !== e && (r = Math.min(e, r)), r
                    },
                    set: function (e) {
                        this._nextAutoLevel = e
                    }
                }, {
                    key: "_nextABRAutoLevel",
                    get: function () {
                        var e = this.hls,
                            t = e.maxAutoLevel,
                            r = e.levels,
                            i = e.config,
                            a = e.minAutoLevel,
                            n = e.media,
                            s = this.lastLoadedFragLevel,
                            o = this.fragCurrent ? this.fragCurrent.duration : 0,
                            l = n ? n.currentTime : 0,
                            d = n && 0 !== n.playbackRate ? Math.abs(n.playbackRate) : 1,
                            c = this._bwEstimator ? this._bwEstimator.getEstimate() : i.abrEwmaDefaultEstimate,
                            h = (H.bufferInfo(n, l, i.maxBufferHole).end - l) / d,
                            f = this._findBestLevel(s, o, c, a, t, h, i.abrBandWidthFactor, i.abrBandWidthUpFactor, r);
                        if (f >= 0) return f;
                        u.b.trace("rebuffering expected to happen, lets try to find a quality level minimizing the rebuffering");
                        var g = o ? Math.min(o, i.maxStarvationDelay) : i.maxStarvationDelay,
                            p = i.abrBandWidthFactor,
                            v = i.abrBandWidthUpFactor;
                        if (0 === h) {
                            var m = this.bitrateTestDelay;
                            m && (g = (o ? Math.min(o, i.maxLoadingDelay) : i.maxLoadingDelay) - m, u.b.trace("bitrate test took " + Math.round(1e3 * m) + "ms, set first fragment max fetchDuration to " + Math.round(1e3 * g) + " ms"), p = v = 1)
                        }
                        return f = this._findBestLevel(s, o, c, a, t, h + g, p, v, r), Math.max(f, 0)
                    }
                }]) && je(a.prototype, n), s && je(a, s), i
            }(h);
        var Ye = q(),
            We = function (e) {
                var t, r;

                function i(t) {
                    var r;
                    return (r = e.call(this, t, d.a.MEDIA_ATTACHING, d.a.MEDIA_DETACHING, d.a.MANIFEST_PARSED, d.a.BUFFER_RESET, d.a.BUFFER_APPENDING, d.a.BUFFER_CODECS, d.a.BUFFER_EOS, d.a.BUFFER_FLUSHING, d.a.LEVEL_PTS_UPDATED, d.a.LEVEL_UPDATED) || this)._msDuration = null, r._levelDuration = null, r._levelTargetDuration = 10, r._live = null, r._objectUrl = null, r._needsFlush = !1, r._needsEos = !1, r.config = void 0, r.audioTimestampOffset = void 0, r.bufferCodecEventsExpected = 0, r._bufferCodecEventsTotal = 0, r.media = null, r.mediaSource = null, r.segments = [], r.parent = void 0, r.appending = !1, r.appended = 0, r.appendError = 0, r.flushBufferCounter = 0, r.tracks = {}, r.pendingTracks = {}, r.sourceBuffer = {}, r.flushRange = [], r._onMediaSourceOpen = function () {
                        u.b.log("media source opened"), r.hls.trigger(d.a.MEDIA_ATTACHED, {
                            media: r.media
                        });
                        var e = r.mediaSource;
                        e && e.removeEventListener("sourceopen", r._onMediaSourceOpen), r.checkPendingTracks()
                    }, r._onMediaSourceClose = function () {
                        u.b.log("media source closed")
                    }, r._onMediaSourceEnded = function () {
                        u.b.log("media source ended")
                    }, r._onSBUpdateEnd = function () {
                        if (r.audioTimestampOffset && r.sourceBuffer.audio) {
                            var e = r.sourceBuffer.audio;
                            u.b.warn("change mpeg audio timestamp offset from " + e.timestampOffset + " to " + r.audioTimestampOffset), e.timestampOffset = r.audioTimestampOffset, delete r.audioTimestampOffset
                        }
                        r._needsFlush && r.doFlush(), r._needsEos && r.checkEos(), r.appending = !1;
                        var t = r.parent,
                            i = r.segments.reduce((function (e, r) {
                                return r.parent === t ? e + 1 : e
                            }), 0),
                            a = {},
                            n = r.sourceBuffer;
                        for (var s in n) {
                            var o = n[s];
                            if (!o) throw Error("handling source buffer update end error: source buffer for " + s + " uninitilized and unable to update buffered TimeRanges.");
                            a[s] = o.buffered
                        }
                        r.hls.trigger(d.a.BUFFER_APPENDED, {
                            parent: t,
                            pending: i,
                            timeRanges: a
                        }), r._needsFlush || r.doAppending(), r.updateMediaElementDuration(), 0 === i && r.flushLiveBackBuffer()
                    }, r._onSBUpdateError = function (e) {
                        u.b.error("sourceBuffer error:", e), r.hls.trigger(d.a.ERROR, {
                            type: o.b.MEDIA_ERROR,
                            details: o.a.BUFFER_APPENDING_ERROR,
                            fatal: !1
                        })
                    }, r.config = t.config, r
                }
                r = e, (t = i).prototype = Object.create(r.prototype), t.prototype.constructor = t, t.__proto__ = r;
                var a = i.prototype;
                return a.destroy = function () {
                    h.prototype.destroy.call(this)
                }, a.onLevelPtsUpdated = function (e) {
                    var t = e.type,
                        r = this.tracks.audio;
                    if ("audio" === t && r && "audio/mpeg" === r.container) {
                        var i = this.sourceBuffer.audio;
                        if (!i) throw Error("Level PTS Updated and source buffer for audio uninitalized");
                        if (Math.abs(i.timestampOffset - e.start) > .1) {
                            var a = i.updating;
                            try {
                                i.abort()
                            } catch (e) {
                                u.b.warn("can not abort audio buffer: " + e)
                            }
                            a ? this.audioTimestampOffset = e.start : (u.b.warn("change mpeg audio timestamp offset from " + i.timestampOffset + " to " + e.start), i.timestampOffset = e.start)
                        }
                    }
                }, a.onManifestParsed = function (e) {
                    var t = 2;
                    (e.audio && !e.video || !e.altAudio) && (t = 1), this.bufferCodecEventsExpected = this._bufferCodecEventsTotal = t, u.b.log(this.bufferCodecEventsExpected + " bufferCodec event(s) expected")
                }, a.onMediaAttaching = function (e) {
                    var t = this.media = e.media;
                    if (t && Ye) {
                        var r = this.mediaSource = new Ye;
                        r.addEventListener("sourceopen", this._onMediaSourceOpen), r.addEventListener("sourceended", this._onMediaSourceEnded), r.addEventListener("sourceclose", this._onMediaSourceClose), t.src = window.URL.createObjectURL(r), this._objectUrl = t.src
                    }
                }, a.onMediaDetaching = function () {
                    u.b.log("media source detaching");
                    var e = this.mediaSource;
                    if (e) {
                        if ("open" === e.readyState) try {
                            e.endOfStream()
                        } catch (e) {
                            u.b.warn("onMediaDetaching:" + e.message + " while calling endOfStream")
                        }
                        e.removeEventListener("sourceopen", this._onMediaSourceOpen), e.removeEventListener("sourceended", this._onMediaSourceEnded), e.removeEventListener("sourceclose", this._onMediaSourceClose), this.media && (this._objectUrl && window.URL.revokeObjectURL(this._objectUrl), this.media.src === this._objectUrl ? (this.media.removeAttribute("src"), this.media.load()) : u.b.warn("media.src was changed by a third party - skip cleanup")), this.mediaSource = null, this.media = null, this._objectUrl = null, this.bufferCodecEventsExpected = this._bufferCodecEventsTotal, this.pendingTracks = {}, this.tracks = {}, this.sourceBuffer = {}, this.flushRange = [], this.segments = [], this.appended = 0
                    }
                    this.hls.trigger(d.a.MEDIA_DETACHED)
                }, a.checkPendingTracks = function () {
                    var e = this.bufferCodecEventsExpected,
                        t = this.pendingTracks,
                        r = Object.keys(t).length;
                    (r && !e || 2 === r) && (this.createSourceBuffers(t), this.pendingTracks = {}, this.doAppending())
                }, a.onBufferReset = function () {
                    var e = this.sourceBuffer;
                    for (var t in e) {
                        var r = e[t];
                        try {
                            r && (this.mediaSource && this.mediaSource.removeSourceBuffer(r), r.removeEventListener("updateend", this._onSBUpdateEnd), r.removeEventListener("error", this._onSBUpdateError))
                        } catch (e) { }
                    }
                    this.sourceBuffer = {}, this.flushRange = [], this.segments = [], this.appended = 0
                }, a.onBufferCodecs = function (e) {
                    var t = this;
                    Object.keys(this.sourceBuffer).length || (Object.keys(e).forEach((function (r) {
                        t.pendingTracks[r] = e[r]
                    })), this.bufferCodecEventsExpected = Math.max(this.bufferCodecEventsExpected - 1, 0), this.mediaSource && "open" === this.mediaSource.readyState && this.checkPendingTracks())
                }, a.createSourceBuffers = function (e) {
                    var t = this.sourceBuffer,
                        r = this.mediaSource;
                    if (!r) throw Error("createSourceBuffers called when mediaSource was null");
                    for (var i in e)
                        if (!t[i]) {
                            var a = e[i];
                            if (!a) throw Error("source buffer exists for track " + i + ", however track does not");
                            var n = a.levelCodec || a.codec,
                                s = a.container + ";codecs=" + n;
                            u.b.log("creating sourceBuffer(" + s + ")");
                            try {
                                var l = t[i] = r.addSourceBuffer(s);
                                l.addEventListener("updateend", this._onSBUpdateEnd), l.addEventListener("error", this._onSBUpdateError), this.tracks[i] = {
                                    buffer: l,
                                    codec: n,
                                    id: a.id,
                                    container: a.container,
                                    levelCodec: a.levelCodec
                                }
                            } catch (e) {
                                u.b.error("error while trying to add sourceBuffer:" + e.message), this.hls.trigger(d.a.ERROR, {
                                    type: o.b.MEDIA_ERROR,
                                    details: o.a.BUFFER_ADD_CODEC_ERROR,
                                    fatal: !1,
                                    err: e,
                                    mimeType: s
                                })
                            }
                        } this.hls.trigger(d.a.BUFFER_CREATED, {
                            tracks: this.tracks
                        })
                }, a.onBufferAppending = function (e) {
                    this._needsFlush || (this.segments ? this.segments.push(e) : this.segments = [e], this.doAppending())
                }, a.onBufferEos = function (e) {
                    for (var t in this.sourceBuffer)
                        if (!e.type || e.type === t) {
                            var r = this.sourceBuffer[t];
                            r && !r.ended && (r.ended = !0, u.b.log(t + " sourceBuffer now EOS"))
                        } this.checkEos()
                }, a.checkEos = function () {
                    var e = this.sourceBuffer,
                        t = this.mediaSource;
                    if (t && "open" === t.readyState) {
                        for (var r in e) {
                            var i = e[r];
                            if (i) {
                                if (!i.ended) return;
                                if (i.updating) return void (this._needsEos = !0)
                            }
                        }
                        u.b.log("all media data are available, signal endOfStream() to MediaSource and stop loading fragment");
                        try {
                            t.endOfStream()
                        } catch (e) {
                            u.b.warn("exception while calling mediaSource.endOfStream()")
                        }
                        this._needsEos = !1
                    } else this._needsEos = !1
                }, a.onBufferFlushing = function (e) {
                    e.type ? this.flushRange.push({
                        start: e.startOffset,
                        end: e.endOffset,
                        type: e.type
                    }) : (this.flushRange.push({
                        start: e.startOffset,
                        end: e.endOffset,
                        type: "video"
                    }), this.flushRange.push({
                        start: e.startOffset,
                        end: e.endOffset,
                        type: "audio"
                    })), this.flushBufferCounter = 0, this.doFlush()
                }, a.flushLiveBackBuffer = function () {
                    if (this._live) {
                        var e = this.config.liveBackBufferLength;
                        if (isFinite(e) && !(e < 0))
                            if (this.media)
                                for (var t = this.media.currentTime, r = this.sourceBuffer, i = Object.keys(r), a = t - Math.max(e, this._levelTargetDuration), n = i.length - 1; n >= 0; n--) {
                                    var s = i[n],
                                        o = r[s];
                                    if (o) {
                                        var l = o.buffered;
                                        l.length > 0 && a > l.start(0) && this.removeBufferRange(s, o, 0, a) && this.hls.trigger(d.a.LIVE_BACK_BUFFER_REACHED, {
                                            bufferEnd: a
                                        })
                                    }
                                } else u.b.error("flushLiveBackBuffer called without attaching media")
                    }
                }, a.onLevelUpdated = function (e) {
                    var t = e.details;
                    t.fragments.length > 0 && (this._levelDuration = t.totalduration + t.fragments[0].start, this._levelTargetDuration = t.averagetargetduration || t.targetduration || 10, this._live = t.live, this.updateMediaElementDuration())
                }, a.updateMediaElementDuration = function () {
                    var e, t = this.config;
                    if (null !== this._levelDuration && this.media && this.mediaSource && this.sourceBuffer && 0 !== this.media.readyState && "open" === this.mediaSource.readyState) {
                        for (var r in this.sourceBuffer) {
                            var i = this.sourceBuffer[r];
                            if (i && !0 === i.updating) return
                        }
                        e = this.media.duration, null === this._msDuration && (this._msDuration = this.mediaSource.duration), !0 === this._live && !0 === t.liveDurationInfinity ? (u.b.log("Media Source duration is set to Infinity"), this._msDuration = this.mediaSource.duration = 1 / 0) : (this._levelDuration > this._msDuration && this._levelDuration > e || !Object(l.a)(e)) && (u.b.log("Updating Media Source duration to " + this._levelDuration.toFixed(3)), this._msDuration = this.mediaSource.duration = this._levelDuration)
                    }
                }, a.doFlush = function () {
                    for (; this.flushRange.length;) {
                        var e = this.flushRange[0];
                        if (!this.flushBuffer(e.start, e.end, e.type)) return void (this._needsFlush = !0);
                        this.flushRange.shift(), this.flushBufferCounter = 0
                    }
                    if (0 === this.flushRange.length) {
                        this._needsFlush = !1;
                        var t = 0,
                            r = this.sourceBuffer;
                        try {
                            for (var i in r) {
                                var a = r[i];
                                a && (t += a.buffered.length)
                            }
                        } catch (e) {
                            u.b.error("error while accessing sourceBuffer.buffered")
                        }
                        this.appended = t, this.hls.trigger(d.a.BUFFER_FLUSHED)
                    }
                }, a.doAppending = function () {
                    var e = this.config,
                        t = this.hls,
                        r = this.segments,
                        i = this.sourceBuffer;
                    if (Object.keys(i).length) {
                        if (!this.media || this.media.error) return this.segments = [], void u.b.error("trying to append although a media error occured, flush segment and abort");
                        if (!this.appending) {
                            var a = r.shift();
                            if (a) try {
                                var n = i[a.type];
                                if (!n) return void this._onSBUpdateEnd();
                                if (n.updating) return void r.unshift(a);
                                n.ended = !1, this.parent = a.parent, n.appendBuffer(a.data), this.appendError = 0, this.appended++, this.appending = !0
                            } catch (i) {
                                u.b.error("error while trying to append buffer:" + i.message), r.unshift(a);
                                var s = {
                                    type: o.b.MEDIA_ERROR,
                                    parent: a.parent,
                                    details: "",
                                    fatal: !1
                                };
                                22 === i.code ? (this.segments = [], s.details = o.a.BUFFER_FULL_ERROR) : (this.appendError++, s.details = o.a.BUFFER_APPEND_ERROR, this.appendError > e.appendErrorMaxRetry && (u.b.log("fail " + e.appendErrorMaxRetry + " times to append segment in sourceBuffer"), this.segments = [], s.fatal = !0)), t.trigger(d.a.ERROR, s)
                            }
                        }
                    }
                }, a.flushBuffer = function (e, t, r) {
                    var i = this.sourceBuffer;
                    if (!Object.keys(i).length) return !0;
                    var a = "null";
                    if (this.media && (a = this.media.currentTime.toFixed(3)), u.b.log("flushBuffer,pos/start/end: " + a + "/" + e + "/" + t), this.flushBufferCounter >= this.appended) return u.b.warn("abort flushing too many retries"), !0;
                    var n = i[r];
                    if (n) {
                        if (n.ended = !1, n.updating) return u.b.warn("cannot flush, sb updating in progress"), !1;
                        if (this.removeBufferRange(r, n, e, t)) return this.flushBufferCounter++, !1
                    }
                    return u.b.log("buffer flushed"), !0
                }, a.removeBufferRange = function (e, t, r, i) {
                    try {
                        for (var a = 0; a < t.buffered.length; a++) {
                            var n = t.buffered.start(a),
                                s = t.buffered.end(a),
                                o = Math.max(n, r),
                                l = Math.min(s, i);
                            if (Math.min(l, s) - o > .5) {
                                var d = "null";
                                return this.media && (d = this.media.currentTime.toString()), u.b.log("sb remove " + e + " [" + o + "," + l + "], of [" + n + "," + s + "], pos:" + d), t.remove(o, l), !0
                            }
                        }
                    } catch (e) {
                        u.b.warn("removeBufferRange failed", e)
                    }
                    return !1
                }, i
            }(h);

        function qe(e, t) {
            for (var r = 0; r < t.length; r++) {
                var i = t[r];
                i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), Object.defineProperty(e, i.key, i)
            }
        }
        var Xe = function (e) {
            var t, r;

            function i(t) {
                var r;
                return (r = e.call(this, t, d.a.FPS_DROP_LEVEL_CAPPING, d.a.MEDIA_ATTACHING, d.a.MANIFEST_PARSED, d.a.LEVELS_UPDATED, d.a.BUFFER_CODECS, d.a.MEDIA_DETACHING) || this).autoLevelCapping = Number.POSITIVE_INFINITY, r.firstLevel = null, r.levels = [], r.media = null, r.restrictedLevels = [], r.timer = null, r.clientRect = null, r
            }
            r = e, (t = i).prototype = Object.create(r.prototype), t.prototype.constructor = t, t.__proto__ = r;
            var a, n, s, o = i.prototype;
            return o.destroy = function () {
                this.hls.config.capLevelToPlayerSize && (this.media = null, this.clientRect = null, this.stopCapping())
            }, o.onFpsDropLevelCapping = function (e) {
                i.isLevelAllowed(e.droppedLevel, this.restrictedLevels) && this.restrictedLevels.push(e.droppedLevel)
            }, o.onMediaAttaching = function (e) {
                this.media = e.media instanceof window.HTMLVideoElement ? e.media : null
            }, o.onManifestParsed = function (e) {
                var t = this.hls;
                this.restrictedLevels = [], this.levels = e.levels, this.firstLevel = e.firstLevel, t.config.capLevelToPlayerSize && e.video && this.startCapping()
            }, o.onBufferCodecs = function (e) {
                this.hls.config.capLevelToPlayerSize && e.video && this.startCapping()
            }, o.onLevelsUpdated = function (e) {
                this.levels = e.levels
            }, o.onMediaDetaching = function () {
                this.stopCapping()
            }, o.detectPlayerSize = function () {
                if (this.media) {
                    var e = this.levels ? this.levels.length : 0;
                    if (e) {
                        var t = this.hls;
                        t.autoLevelCapping = this.getMaxLevel(e - 1), t.autoLevelCapping > this.autoLevelCapping && t.streamController.nextLevelSwitch(), this.autoLevelCapping = t.autoLevelCapping
                    }
                }
            }, o.getMaxLevel = function (e) {
                var t = this;
                if (!this.levels) return -1;
                var r = this.levels.filter((function (r, a) {
                    return i.isLevelAllowed(a, t.restrictedLevels) && a <= e
                }));
                return this.clientRect = null, i.getMaxLevelByMediaSize(r, this.mediaWidth, this.mediaHeight)
            }, o.startCapping = function () {
                this.timer || (this.autoLevelCapping = Number.POSITIVE_INFINITY, this.hls.firstLevel = this.getMaxLevel(this.firstLevel), clearInterval(this.timer), this.timer = setInterval(this.detectPlayerSize.bind(this), 1e3), this.detectPlayerSize())
            }, o.stopCapping = function () {
                this.restrictedLevels = [], this.firstLevel = null, this.autoLevelCapping = Number.POSITIVE_INFINITY, this.timer && (this.timer = clearInterval(this.timer), this.timer = null)
            }, o.getDimensions = function () {
                if (this.clientRect) return this.clientRect;
                var e = this.media,
                    t = {
                        width: 0,
                        height: 0
                    };
                if (e) {
                    var r = e.getBoundingClientRect();
                    t.width = r.width, t.height = r.height, t.width || t.height || (t.width = r.right - r.left || e.width || 0, t.height = r.bottom - r.top || e.height || 0)
                }
                return this.clientRect = t, t
            }, i.isLevelAllowed = function (e, t) {
                return void 0 === t && (t = []), -1 === t.indexOf(e)
            }, i.getMaxLevelByMediaSize = function (e, t, r) {
                if (!e || e && !e.length) return -1;
                for (var i, a, n = e.length - 1, s = 0; s < e.length; s += 1) {
                    var o = e[s];
                    if ((o.width >= t || o.height >= r) && (i = o, !(a = e[s + 1]) || i.width !== a.width || i.height !== a.height)) {
                        n = s;
                        break
                    }
                }
                return n
            }, a = i, s = [{
                key: "contentScaleFactor",
                get: function () {
                    var e = 1;
                    try {
                        e = window.devicePixelRatio
                    } catch (e) { }
                    return e
                }
            }], (n = [{
                key: "mediaWidth",
                get: function () {
                    return this.getDimensions().width * i.contentScaleFactor
                }
            }, {
                key: "mediaHeight",
                get: function () {
                    return this.getDimensions().height * i.contentScaleFactor
                }
            }]) && qe(a.prototype, n), s && qe(a, s), i
        }(h);
        var ze = window.performance,
            Qe = function (e) {
                var t, r;

                function i(t) {
                    return e.call(this, t, d.a.MEDIA_ATTACHING) || this
                }
                r = e, (t = i).prototype = Object.create(r.prototype), t.prototype.constructor = t, t.__proto__ = r;
                var a = i.prototype;
                return a.destroy = function () {
                    this.timer && clearInterval(this.timer), this.isVideoPlaybackQualityAvailable = !1
                }, a.onMediaAttaching = function (e) {
                    var t = this.hls.config;
                    t.capLevelOnFPSDrop && ("function" == typeof (this.video = e.media instanceof window.HTMLVideoElement ? e.media : null).getVideoPlaybackQuality && (this.isVideoPlaybackQualityAvailable = !0), clearInterval(this.timer), this.timer = setInterval(this.checkFPSInterval.bind(this), t.fpsDroppedMonitoringPeriod))
                }, a.checkFPS = function (e, t, r) {
                    var i = ze.now();
                    if (t) {
                        if (this.lastTime) {
                            var a = i - this.lastTime,
                                n = r - this.lastDroppedFrames,
                                s = t - this.lastDecodedFrames,
                                o = 1e3 * n / a,
                                l = this.hls;
                            if (l.trigger(d.a.FPS_DROP, {
                                currentDropped: n,
                                currentDecoded: s,
                                totalDroppedFrames: r
                            }), o > 0 && n > l.config.fpsDroppedMonitoringThreshold * s) {
                                var c = l.currentLevel;
                                u.b.warn("drop FPS ratio greater than max allowed value for currentLevel: " + c), c > 0 && (-1 === l.autoLevelCapping || l.autoLevelCapping >= c) && (c -= 1, l.trigger(d.a.FPS_DROP_LEVEL_CAPPING, {
                                    level: c,
                                    droppedLevel: l.currentLevel
                                }), l.autoLevelCapping = c, l.streamController.nextLevelSwitch())
                            }
                        }
                        this.lastTime = i, this.lastDroppedFrames = r, this.lastDecodedFrames = t
                    }
                }, a.checkFPSInterval = function () {
                    var e = this.video;
                    if (e)
                        if (this.isVideoPlaybackQualityAvailable) {
                            var t = e.getVideoPlaybackQuality();
                            this.checkFPS(e, t.totalVideoFrames, t.droppedVideoFrames)
                        } else this.checkFPS(e, e.webkitDecodedFrameCount, e.webkitDroppedFrameCount)
                }, i
            }(h),
            $e = function () {
                function e(e) {
                    e && e.xhrSetup && (this.xhrSetup = e.xhrSetup)
                }
                var t = e.prototype;
                return t.destroy = function () {
                    this.abort(), this.loader = null
                }, t.abort = function () {
                    var e = this.loader;
                    e && 4 !== e.readyState && (this.stats.aborted = !0, e.abort()), window.clearTimeout(this.requestTimeout), this.requestTimeout = null, window.clearTimeout(this.retryTimeout), this.retryTimeout = null
                }, t.load = function (e, t, r) {
                    this.context = e, this.config = t, this.callbacks = r, this.stats = {
                        trequest: window.performance.now(),
                        retry: 0
                    }, this.retryDelay = t.retryDelay, this.loadInternal()
                }, t.loadInternal = function () {
                    var e, t = this.context;
                    e = this.loader = new window.XMLHttpRequest;
                    var r = this.stats;
                    r.tfirst = 0, r.loaded = 0;
                    var i = this.xhrSetup;
                    try {
                        if (i) try {
                            i(e, t.url)
                        } catch (r) {
                            e.open("GET", t.url, !0), i(e, t.url)
                        }
                        e.readyState || e.open("GET", t.url, !0)
                    } catch (r) {
                        return void this.callbacks.onError({
                            code: e.status,
                            text: r.message
                        }, t, e)
                    }
                    t.rangeEnd && e.setRequestHeader("Range", "bytes=" + t.rangeStart + "-" + (t.rangeEnd - 1)), e.onreadystatechange = this.readystatechange.bind(this), e.onprogress = this.loadprogress.bind(this), e.responseType = t.responseType, this.requestTimeout = window.setTimeout(this.loadtimeout.bind(this), this.config.timeout), e.send()
                }, t.readystatechange = function (e) {
                    var t = e.currentTarget,
                        r = t.readyState,
                        i = this.stats,
                        a = this.context,
                        n = this.config;
                    if (!i.aborted && r >= 2)
                        if (window.clearTimeout(this.requestTimeout), 0 === i.tfirst && (i.tfirst = Math.max(window.performance.now(), i.trequest)), 4 === r) {
                            var s = t.status;
                            if (s >= 200 && s < 300) {
                                var o, l;
                                i.tload = Math.max(i.tfirst, window.performance.now()), l = "arraybuffer" === a.responseType ? (o = t.response).byteLength : (o = t.responseText).length, i.loaded = i.total = l;
                                var d = {
                                    url: t.responseURL,
                                    data: o
                                };
                                this.callbacks.onSuccess(d, i, a, t)
                            } else i.retry >= n.maxRetry || s >= 400 && s < 499 ? (u.b.error(s + " while loading " + a.url), this.callbacks.onError({
                                code: s,
                                text: t.statusText
                            }, a, t)) : (u.b.warn(s + " while loading " + a.url + ", retrying in " + this.retryDelay + "..."), this.destroy(), this.retryTimeout = window.setTimeout(this.loadInternal.bind(this), this.retryDelay), this.retryDelay = Math.min(2 * this.retryDelay, n.maxRetryDelay), i.retry++)
                        } else this.requestTimeout = window.setTimeout(this.loadtimeout.bind(this), n.timeout)
                }, t.loadtimeout = function () {
                    u.b.warn("timeout while loading " + this.context.url), this.callbacks.onTimeout(this.stats, this.context, null)
                }, t.loadprogress = function (e) {
                    var t = e.currentTarget,
                        r = this.stats;
                    r.loaded = e.loaded, e.lengthComputable && (r.total = e.total);
                    var i = this.callbacks.onProgress;
                    i && i(r, this.context, null, t)
                }, e
            }();

        function Je(e, t) {
            for (var r = 0; r < t.length; r++) {
                var i = t[r];
                i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), Object.defineProperty(e, i.key, i)
            }
        }
        var Ze = function (e) {
            var t, r;

            function i(t) {
                var r;
                return (r = e.call(this, t, d.a.MANIFEST_LOADING, d.a.MANIFEST_PARSED, d.a.AUDIO_TRACK_LOADED, d.a.AUDIO_TRACK_SWITCHED, d.a.LEVEL_LOADED, d.a.ERROR) || this)._trackId = -1, r._selectDefaultTrack = !0, r.tracks = [], r.trackIdBlacklist = Object.create(null), r.audioGroupId = null, r
            }
            r = e, (t = i).prototype = Object.create(r.prototype), t.prototype.constructor = t, t.__proto__ = r;
            var a, n, s, l = i.prototype;
            return l.onManifestLoading = function () {
                this.tracks = [], this._trackId = -1, this._selectDefaultTrack = !0
            }, l.onManifestParsed = function (e) {
                var t = this.tracks = e.audioTracks || [];
                this.hls.trigger(d.a.AUDIO_TRACKS_UPDATED, {
                    audioTracks: t
                }), this._selectAudioGroup(this.hls.nextLoadLevel)
            }, l.onAudioTrackLoaded = function (e) {
                if (e.id >= this.tracks.length) u.b.warn("Invalid audio track id:", e.id);
                else {
                    if (u.b.log("audioTrack " + e.id + " loaded"), this.tracks[e.id].details = e.details, e.details.live && !this.hasInterval()) {
                        var t = 1e3 * e.details.targetduration;
                        this.setInterval(t)
                    } !e.details.live && this.hasInterval() && this.clearInterval()
                }
            }, l.onAudioTrackSwitched = function (e) {
                var t = this.tracks[e.id].groupId;
                t && this.audioGroupId !== t && (this.audioGroupId = t)
            }, l.onLevelLoaded = function (e) {
                this._selectAudioGroup(e.level)
            }, l.onError = function (e) {
                e.type === o.b.NETWORK_ERROR && (e.fatal && this.clearInterval(), e.details === o.a.AUDIO_TRACK_LOAD_ERROR && (u.b.warn("Network failure on audio-track id:", e.context.id), this._handleLoadError()))
            }, l._setAudioTrack = function (e) {
                if (this._trackId === e && this.tracks[this._trackId].details) u.b.debug("Same id as current audio-track passed, and track details available -> no-op");
                else if (e < 0 || e >= this.tracks.length) u.b.warn("Invalid id passed to audio-track controller");
                else {
                    var t = this.tracks[e];
                    u.b.log("Now switching to audio-track index " + e), this.clearInterval(), this._trackId = e;
                    var r = t.url,
                        i = t.type,
                        a = t.id;
                    this.hls.trigger(d.a.AUDIO_TRACK_SWITCHING, {
                        id: a,
                        type: i,
                        url: r
                    }), this._loadTrackDetailsIfNeeded(t)
                }
            }, l.doTick = function () {
                this._updateTrack(this._trackId)
            }, l._selectAudioGroup = function (e) {
                var t = this.hls.levels[e];
                if (t && t.audioGroupIds) {
                    var r = t.audioGroupIds[t.urlId];
                    this.audioGroupId !== r && (this.audioGroupId = r, this._selectInitialAudioTrack())
                }
            }, l._selectInitialAudioTrack = function () {
                var e = this,
                    t = this.tracks;
                if (t.length) {
                    var r = this.tracks[this._trackId],
                        i = null;
                    if (r && (i = r.name), this._selectDefaultTrack) {
                        var a = t.filter((function (e) {
                            return e.default
                        }));
                        a.length ? t = a : u.b.warn("No default audio tracks defined")
                    }
                    var n = !1,
                        s = function () {
                            t.forEach((function (t) {
                                n || e.audioGroupId && t.groupId !== e.audioGroupId || i && i !== t.name || (e._setAudioTrack(t.id), n = !0)
                            }))
                        };
                    s(), n || (i = null, s()), n || (u.b.error("No track found for running audio group-ID: " + this.audioGroupId), this.hls.trigger(d.a.ERROR, {
                        type: o.b.MEDIA_ERROR,
                        details: o.a.AUDIO_TRACK_LOAD_ERROR,
                        fatal: !0
                    }))
                }
            }, l._needsTrackLoading = function (e) {
                var t = e.details,
                    r = e.url;
                return !(t && !t.live) && !!r
            }, l._loadTrackDetailsIfNeeded = function (e) {
                if (this._needsTrackLoading(e)) {
                    var t = e.url,
                        r = e.id;
                    u.b.log("loading audio-track playlist for id: " + r), this.hls.trigger(d.a.AUDIO_TRACK_LOADING, {
                        url: t,
                        id: r
                    })
                }
            }, l._updateTrack = function (e) {
                if (!(e < 0 || e >= this.tracks.length)) {
                    this.clearInterval(), this._trackId = e, u.b.log("trying to update audio-track " + e);
                    var t = this.tracks[e];
                    this._loadTrackDetailsIfNeeded(t)
                }
            }, l._handleLoadError = function () {
                this.trackIdBlacklist[this._trackId] = !0;
                var e = this._trackId,
                    t = this.tracks[e],
                    r = t.name,
                    i = t.language,
                    a = t.groupId;
                u.b.warn("Loading failed on audio track id: " + e + ", group-id: " + a + ', name/language: "' + r + '" / "' + i + '"');
                for (var n = e, s = 0; s < this.tracks.length; s++) {
                    if (!this.trackIdBlacklist[s])
                        if (this.tracks[s].name === r) {
                            n = s;
                            break
                        }
                }
                n !== e ? (u.b.log("Attempting audio-track fallback id:", n, "group-id:", this.tracks[n].groupId), this._setAudioTrack(n)) : u.b.warn('No fallback audio-track found for name/language: "' + r + '" / "' + i + '"')
            }, a = i, (n = [{
                key: "audioTracks",
                get: function () {
                    return this.tracks
                }
            }, {
                key: "audioTrack",
                get: function () {
                    return this._trackId
                },
                set: function (e) {
                    this._setAudioTrack(e), this._selectDefaultTrack = !1
                }
            }]) && Je(a.prototype, n), s && Je(a, s), i
        }(ge);

        function et(e, t) {
            for (var r = 0; r < t.length; r++) {
                var i = t[r];
                i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), Object.defineProperty(e, i.key, i)
            }
        }
        var tt = window.performance,
            rt = function (e) {
                var t, r;

                function i(t, r) {
                    var i;
                    return (i = e.call(this, t, d.a.MEDIA_ATTACHED, d.a.MEDIA_DETACHING, d.a.AUDIO_TRACKS_UPDATED, d.a.AUDIO_TRACK_SWITCHING, d.a.AUDIO_TRACK_LOADED, d.a.KEY_LOADED, d.a.FRAG_LOADED, d.a.FRAG_PARSING_INIT_SEGMENT, d.a.FRAG_PARSING_DATA, d.a.FRAG_PARSED, d.a.ERROR, d.a.BUFFER_RESET, d.a.BUFFER_CREATED, d.a.BUFFER_APPENDED, d.a.BUFFER_FLUSHED, d.a.INIT_PTS_FOUND) || this).fragmentTracker = r, i.config = t.config, i.audioCodecSwap = !1, i._state = pe, i.initPTS = [], i.waitingFragment = null, i.videoTrackCC = null, i.waitingVideoCC = null, i
                }
                r = e, (t = i).prototype = Object.create(r.prototype), t.prototype.constructor = t, t.__proto__ = r;
                var a, n, s, c = i.prototype;
                return c.onInitPtsFound = function (e) {
                    var t = e.id,
                        r = e.frag.cc,
                        i = e.initPTS;
                    "main" === t && (this.initPTS[r] = i, this.videoTrackCC = r, u.b.log("InitPTS for cc: " + r + " found from main: " + i), this.state === Le && this.tick())
                }, c.startLoad = function (e) {
                    if (this.tracks) {
                        var t = this.lastCurrentTime;
                        this.stopLoad(), this.setInterval(100), this.fragLoadError = 0, t > 0 && -1 === e ? (u.b.log("audio:override startPosition with lastCurrentTime @" + t.toFixed(3)), this.state = me) : (this.lastCurrentTime = this.startPosition ? this.startPosition : e, this.state = ve), this.nextLoadPosition = this.startPosition = this.lastCurrentTime, this.tick()
                    } else this.startPosition = e, this.state = pe
                }, c.doTick = function () {
                    var e, t, r, i = this.hls,
                        a = i.config;
                    switch (this.state) {
                        case we:
                        case ye:
                        case Ae:
                            break;
                        case ve:
                            this.state = Se, this.loadedmetadata = !1;
                            break;
                        case me:
                            var n = this.tracks;
                            if (!n) break;
                            if (!this.media && (this.startFragRequested || !a.startFragPrefetch)) break;
                            if (this.loadedmetadata) e = this.media.currentTime;
                            else if (void 0 === (e = this.nextLoadPosition)) break;
                            var s = this.mediaBuffer ? this.mediaBuffer : this.media,
                                o = this.videoBuffer ? this.videoBuffer : this.media,
                                c = e < a.maxBufferHole ? Math.max(2, a.maxBufferHole) : a.maxBufferHole,
                                h = H.bufferInfo(s, e, c),
                                f = H.bufferInfo(o, e, c),
                                g = h.len,
                                p = h.end,
                                v = this.fragPrevious,
                                m = Math.min(a.maxBufferLength, a.maxMaxBufferLength),
                                y = Math.max(m, f.len),
                                b = this.audioSwitch,
                                T = this.trackId;
                            if ((g < y || b) && T < n.length) {
                                if (void 0 === (r = n[T].details)) {
                                    this.state = Se;
                                    break
                                }
                                if (!b && this._streamEnded(h, r)) return this.hls.trigger(d.a.BUFFER_EOS, {
                                    type: "audio"
                                }), void (this.state = ke);
                                var E, S = r.fragments,
                                    _ = S.length,
                                    R = S[0].start,
                                    A = S[_ - 1].start + S[_ - 1].duration;
                                if (b)
                                    if (r.live && !r.PTSKnown) u.b.log("switching audiotrack, live stream, unknown PTS,load first fragment"), p = 0;
                                    else if (p = e, r.PTSKnown && e < R) {
                                        if (!(h.end > R || h.nextStart)) return;
                                        u.b.log("alt audio track ahead of main track, seek to start of alt audio track"), this.media.currentTime = R + .05
                                    }
                                if (r.initSegment && !r.initSegment.data) E = r.initSegment;
                                else if (p <= R) {
                                    if (E = S[0], null !== this.videoTrackCC && E.cc !== this.videoTrackCC && (E = function (e, t) {
                                        return j.search(e, (function (e) {
                                            return e.cc < t ? 1 : e.cc > t ? -1 : 0
                                        }))
                                    }(S, this.videoTrackCC)), r.live && E.loadIdx && E.loadIdx === this.fragLoadIdx) {
                                        var k = h.nextStart ? h.nextStart : R;
                                        return u.b.log("no alt audio available @currentTime:" + this.media.currentTime + ", seeking @" + (k + .05)), void (this.media.currentTime = k + .05)
                                    }
                                } else {
                                    var w, L = a.maxFragLookUpTolerance,
                                        D = v ? S[v.sn - S[0].sn + 1] : void 0;
                                    p < A ? (p > A - L && (L = 0), w = D && !ue(p, L, D) ? D : j.search(S, (function (e) {
                                        return ue(p, L, e)
                                    }))) : w = S[_ - 1], w && (E = w, R = w.start, v && E.level === v.level && E.sn === v.sn && (E.sn < r.endSN ? (E = S[E.sn + 1 - r.startSN], this.fragmentTracker.getState(E) !== G && u.b.log("SN just loaded, load next one: " + E.sn)) : E = null))
                                }
                                E && (E.encrypted ? (u.b.log("Loading key for " + E.sn + " of [" + r.startSN + " ," + r.endSN + "],track " + T), this.state = be, i.trigger(d.a.KEY_LOADING, {
                                    frag: E
                                })) : (this.fragCurrent = E, (b || this.fragmentTracker.getState(E) === U) && (u.b.log("Loading " + E.sn + ", cc: " + E.cc + " of [" + r.startSN + " ," + r.endSN + "],track " + T + ", " + (this.loadedmetadata ? "currentTime" : "nextLoadPosition") + ": " + e + ", bufferEnd: " + p.toFixed(3)), "initSegment" !== E.sn && (this.startFragRequested = !0), Object(l.a)(E.sn) && (this.nextLoadPosition = E.start + E.duration), i.trigger(d.a.FRAG_LOADING, {
                                    frag: E
                                }), this.state = Te)))
                            }
                            break;
                        case Se:
                            (t = this.tracks[this.trackId]) && t.details && (this.state = me);
                            break;
                        case Ee:
                            var O = tt.now(),
                                C = this.retryDate,
                                I = (s = this.media) && s.seeking;
                            (!C || O >= C || I) && (u.b.log("audioStreamController: retryDate reached, switch back to IDLE state"), this.state = me);
                            break;
                        case Le:
                            var P = this.waitingFragment;
                            if (P) {
                                var x = P.frag.cc;
                                if (void 0 !== this.initPTS[x]) this.waitingFragment = null, this.state = Te, this.onFragLoaded(P);
                                else if (this.videoTrackCC !== this.waitingVideoCC) u.b.log("Waiting fragment cc (" + x + ") cancelled because video is at cc " + this.videoTrackCC), this.clearWaitingFragment();
                                else {
                                    var M = H.bufferInfo(this.mediaBuffer, this.media.currentTime, a.maxBufferHole);
                                    ue(M.end, a.maxFragLookUpTolerance, P.frag) < 0 && (u.b.log("Waiting fragment cc (" + x + ") @ " + P.frag.start + " cancelled because another fragment at " + M.end + " is needed"), this.clearWaitingFragment())
                                }
                            } else this.state = me
                    }
                }, c.clearWaitingFragment = function () {
                    var e = this.waitingFragment;
                    e && (this.fragmentTracker.removeFragment(e.frag), this.waitingFragment = null, this.waitingVideoCC = null, this.state = me)
                }, c.onMediaAttached = function (e) {
                    var t = this.media = this.mediaBuffer = e.media;
                    this.onvseeking = this.onMediaSeeking.bind(this), this.onvended = this.onMediaEnded.bind(this), t.addEventListener("seeking", this.onvseeking), t.addEventListener("ended", this.onvended);
                    var r = this.config;
                    this.tracks && r.autoStartLoad && this.startLoad(r.startPosition)
                }, c.onMediaDetaching = function () {
                    var e = this.media;
                    e && e.ended && (u.b.log("MSE detaching and video ended, reset startPosition"), this.startPosition = this.lastCurrentTime = 0), e && (e.removeEventListener("seeking", this.onvseeking), e.removeEventListener("ended", this.onvended), this.onvseeking = this.onvseeked = this.onvended = null), this.media = this.mediaBuffer = this.videoBuffer = null, this.loadedmetadata = !1, this.fragmentTracker.removeAllFragments(), this.stopLoad()
                }, c.onAudioTracksUpdated = function (e) {
                    u.b.log("audio tracks updated"), this.tracks = e.audioTracks
                }, c.onAudioTrackSwitching = function (e) {
                    var t = !!e.url;
                    this.trackId = e.id, this.fragCurrent = null, this.clearWaitingFragment(), this.state = ye, t ? this.setInterval(100) : this.demuxer && (this.demuxer.destroy(), this.demuxer = null), t && (this.audioSwitch = !0, this.state = me), this.tick()
                }, c.onAudioTrackLoaded = function (e) {
                    var t = e.details,
                        r = e.id,
                        i = this.tracks[r],
                        a = i.details,
                        n = t.totalduration,
                        s = 0;
                    if (u.b.log("track " + r + " loaded [" + t.startSN + "," + t.endSN + "],duration:" + n), t.live || a && a.live ? a && t.fragments.length > 0 ? (re(a, t), s = t.fragments[0].start, t.PTSKnown ? u.b.log("live audio playlist sliding:" + s.toFixed(3)) : u.b.log("live audio playlist - outdated PTS, unknown sliding")) : (t.PTSKnown = !1, u.b.log("live audio playlist - first load, unknown sliding")) : t.PTSKnown = !1, i.details = t, !this.startFragRequested) {
                        if (-1 === this.startPosition) {
                            var o = t.startTimeOffset;
                            Object(l.a)(o) ? (u.b.log("start time offset found in playlist, adjust startPosition to " + o), this.startPosition = o) : t.live ? (this.startPosition = this.computeLivePosition(s, t), u.b.log("compute startPosition for audio-track to " + this.startPosition)) : this.startPosition = 0
                        }
                        this.nextLoadPosition = this.startPosition
                    }
                    this.state === Se && (this.state = me), this.tick()
                }, c.onKeyLoaded = function () {
                    this.state === be && (this.state = me, this.tick())
                }, c.onFragLoaded = function (e) {
                    var t = this.fragCurrent,
                        r = e.frag;
                    if (this.state === Te && t && "audio" === r.type && r.level === t.level && r.sn === t.sn) {
                        var i = this.tracks[this.trackId],
                            a = i.details,
                            n = a.totalduration,
                            s = t.level,
                            o = t.sn,
                            l = t.cc,
                            c = this.config.defaultAudioCodec || i.audioCodec || "mp4a.40.2",
                            h = this.stats = e.stats;
                        if ("initSegment" === o) this.state = me, h.tparsed = h.tbuffered = tt.now(), a.initSegment.data = e.payload, this.hls.trigger(d.a.FRAG_BUFFERED, {
                            stats: h,
                            frag: t,
                            id: "audio"
                        }), this.tick();
                        else {
                            this.state = _e, this.appended = !1, this.demuxer || (this.demuxer = new J(this.hls, "audio"));
                            var f = this.initPTS[l],
                                g = a.initSegment ? a.initSegment.data : [];
                            if (void 0 !== f) {
                                this.pendingBuffering = !0, u.b.log("Demuxing " + o + " of [" + a.startSN + " ," + a.endSN + "],track " + s);
                                this.demuxer.push(e.payload, g, c, null, t, n, !1, f)
                            } else u.b.log("Unknown video PTS for cc " + l + ", waiting for video PTS before demuxing audio frag " + o + " of [" + a.startSN + " ," + a.endSN + "],track " + s), this.waitingFragment = e, this.waitingVideoCC = this.videoTrackCC, this.state = Le
                        }
                    }
                    this.fragLoadError = 0
                }, c.onFragParsingInitSegment = function (e) {
                    var t = this.fragCurrent,
                        r = e.frag;
                    if (t && "audio" === e.id && r.sn === t.sn && r.level === t.level && this.state === _e) {
                        var i, a = e.tracks;
                        if (a.video && delete a.video, i = a.audio) {
                            i.levelCodec = i.codec, i.id = e.id, this.hls.trigger(d.a.BUFFER_CODECS, a), u.b.log("audio track:audio,container:" + i.container + ",codecs[level/parsed]=[" + i.levelCodec + "/" + i.codec + "]");
                            var n = i.initSegment;
                            if (n) {
                                var s = {
                                    type: "audio",
                                    data: n,
                                    parent: "audio",
                                    content: "initSegment"
                                };
                                this.audioSwitch ? this.pendingData = [s] : (this.appended = !0, this.pendingBuffering = !0, this.hls.trigger(d.a.BUFFER_APPENDING, s))
                            }
                            this.tick()
                        }
                    }
                }, c.onFragParsingData = function (e) {
                    var t = this,
                        r = this.fragCurrent,
                        i = e.frag;
                    if (r && "audio" === e.id && "audio" === e.type && i.sn === r.sn && i.level === r.level && this.state === _e) {
                        var a = this.trackId,
                            n = this.tracks[a],
                            s = this.hls;
                        Object(l.a)(e.endPTS) || (e.endPTS = e.startPTS + r.duration, e.endDTS = e.startDTS + r.duration), r.addElementaryStream(p.AUDIO), u.b.log("parsed " + e.type + ",PTS:[" + e.startPTS.toFixed(3) + "," + e.endPTS.toFixed(3) + "],DTS:[" + e.startDTS.toFixed(3) + "/" + e.endDTS.toFixed(3) + "],nb:" + e.nb), te(n.details, r, e.startPTS, e.endPTS);
                        var c = this.media,
                            h = !1;
                        if (this.audioSwitch)
                            if (c && c.readyState) {
                                var f = c.currentTime;
                                u.b.log("switching audio track : currentTime:" + f), f >= e.startPTS && (u.b.log("switching audio track : flushing all audio"), this.state = Ae, s.trigger(d.a.BUFFER_FLUSHING, {
                                    startOffset: 0,
                                    endOffset: Number.POSITIVE_INFINITY,
                                    type: "audio"
                                }), h = !0, this.audioSwitch = !1, s.trigger(d.a.AUDIO_TRACK_SWITCHED, {
                                    id: a
                                }))
                            } else this.audioSwitch = !1, s.trigger(d.a.AUDIO_TRACK_SWITCHED, {
                                id: a
                            });
                        var g = this.pendingData;
                        if (!g) return u.b.warn("Apparently attempt to enqueue media payload without codec initialization data upfront"), void s.trigger(d.a.ERROR, {
                            type: o.b.MEDIA_ERROR,
                            details: null,
                            fatal: !0
                        });
                        this.audioSwitch || ([e.data1, e.data2].forEach((function (t) {
                            t && t.length && g.push({
                                type: e.type,
                                data: t,
                                parent: "audio",
                                content: "data"
                            })
                        })), !h && g.length && (g.forEach((function (e) {
                            t.state === _e && (t.pendingBuffering = !0, t.hls.trigger(d.a.BUFFER_APPENDING, e))
                        })), this.pendingData = [], this.appended = !0)), this.tick()
                    }
                }, c.onFragParsed = function (e) {
                    var t = this.fragCurrent,
                        r = e.frag;
                    t && "audio" === e.id && r.sn === t.sn && r.level === t.level && this.state === _e && (this.stats.tparsed = tt.now(), this.state = Re, this._checkAppendedParsed())
                }, c.onBufferReset = function () {
                    this.mediaBuffer = this.videoBuffer = null, this.loadedmetadata = !1
                }, c.onBufferCreated = function (e) {
                    var t = e.tracks.audio;
                    t && (this.mediaBuffer = t.buffer, this.loadedmetadata = !0), e.tracks.video && (this.videoBuffer = e.tracks.video.buffer)
                }, c.onBufferAppended = function (e) {
                    if ("audio" === e.parent) {
                        var t = this.state;
                        t !== _e && t !== Re || (this.pendingBuffering = e.pending > 0, this._checkAppendedParsed())
                    }
                }, c._checkAppendedParsed = function () {
                    if (!(this.state !== Re || this.appended && this.pendingBuffering)) {
                        var e = this.fragCurrent,
                            t = this.stats,
                            r = this.hls;
                        if (e) {
                            this.fragPrevious = e, t.tbuffered = tt.now(), r.trigger(d.a.FRAG_BUFFERED, {
                                stats: t,
                                frag: e,
                                id: "audio"
                            });
                            var i = this.mediaBuffer ? this.mediaBuffer : this.media;
                            i && u.b.log("audio buffered : " + ne.toString(i.buffered)), this.audioSwitch && this.appended && (this.audioSwitch = !1, r.trigger(d.a.AUDIO_TRACK_SWITCHED, {
                                id: this.trackId
                            })), this.state = me
                        }
                        this.tick()
                    }
                }, c.onError = function (e) {
                    var t = e.frag;
                    if (!t || "audio" === t.type) switch (e.details) {
                        case o.a.FRAG_LOAD_ERROR:
                        case o.a.FRAG_LOAD_TIMEOUT:
                            var r = e.frag;
                            if (r && "audio" !== r.type) break;
                            if (!e.fatal) {
                                var i = this.fragLoadError;
                                i ? i++ : i = 1;
                                var a = this.config;
                                if (i <= a.fragLoadingMaxRetry) {
                                    this.fragLoadError = i;
                                    var n = Math.min(Math.pow(2, i - 1) * a.fragLoadingRetryDelay, a.fragLoadingMaxRetryTimeout);
                                    u.b.warn("AudioStreamController: frag loading failed, retry in " + n + " ms"), this.retryDate = tt.now() + n, this.state = Ee
                                } else u.b.error("AudioStreamController: " + e.details + " reaches max retry, redispatch as fatal ..."), e.fatal = !0, this.state = we
                            }
                            break;
                        case o.a.AUDIO_TRACK_LOAD_ERROR:
                        case o.a.AUDIO_TRACK_LOAD_TIMEOUT:
                        case o.a.KEY_LOAD_ERROR:
                        case o.a.KEY_LOAD_TIMEOUT:
                            this.state !== we && (this.state = e.fatal ? we : me, u.b.warn("AudioStreamController: " + e.details + " while loading frag, now switching to " + this.state + " state ..."));
                            break;
                        case o.a.BUFFER_FULL_ERROR:
                            if ("audio" === e.parent && (this.state === _e || this.state === Re)) {
                                var s = this.mediaBuffer,
                                    l = this.media.currentTime;
                                if (s && H.isBuffered(s, l) && H.isBuffered(s, l + .5)) {
                                    var c = this.config;
                                    c.maxMaxBufferLength >= c.maxBufferLength && (c.maxMaxBufferLength /= 2, u.b.warn("AudioStreamController: reduce max buffer length to " + c.maxMaxBufferLength + "s")), this.state = me
                                } else u.b.warn("AudioStreamController: buffer full error also media.currentTime is not buffered, flush audio buffer"), this.fragCurrent = null, this.state = Ae, this.hls.trigger(d.a.BUFFER_FLUSHING, {
                                    startOffset: 0,
                                    endOffset: Number.POSITIVE_INFINITY,
                                    type: "audio"
                                })
                            }
                    }
                }, c.onBufferFlushed = function () {
                    var e = this,
                        t = this.pendingData;
                    t && t.length ? (u.b.log("AudioStreamController: appending pending audio data after buffer flushed"), t.forEach((function (t) {
                        e.hls.trigger(d.a.BUFFER_APPENDING, t)
                    })), this.appended = !0, this.pendingData = [], this.state = Re) : (this.state = me, this.fragPrevious = null, this.tick())
                }, a = i, (n = [{
                    key: "state",
                    set: function (e) {
                        if (this.state !== e) {
                            var t = this.state;
                            this._state = e, u.b.log("audio stream:" + t + "->" + e)
                        }
                    },
                    get: function () {
                        return this._state
                    }
                }]) && et(a.prototype, n), s && et(a, s), i
            }(Oe),
            it = function () {
                if ("undefined" != typeof window && window.VTTCue) return window.VTTCue;
                var e = {
                    "": !0,
                    lr: !0,
                    rl: !0
                },
                    t = {
                        start: !0,
                        middle: !0,
                        end: !0,
                        left: !0,
                        right: !0
                    };

                function r(e) {
                    return "string" == typeof e && (!!t[e.toLowerCase()] && e.toLowerCase())
                }

                function i(e) {
                    for (var t = 1; t < arguments.length; t++) {
                        var r = arguments[t];
                        for (var i in r) e[i] = r[i]
                    }
                    return e
                }

                function a(t, a, n) {
                    var s = this,
                        o = {
                            enumerable: !0
                        };
                    s.hasBeenReset = !1;
                    var l = "",
                        d = !1,
                        u = t,
                        c = a,
                        h = n,
                        f = null,
                        g = "",
                        p = !0,
                        v = "auto",
                        m = "start",
                        y = 50,
                        b = "middle",
                        T = 50,
                        E = "middle";
                    Object.defineProperty(s, "id", i({}, o, {
                        get: function () {
                            return l
                        },
                        set: function (e) {
                            l = "" + e
                        }
                    })), Object.defineProperty(s, "pauseOnExit", i({}, o, {
                        get: function () {
                            return d
                        },
                        set: function (e) {
                            d = !!e
                        }
                    })), Object.defineProperty(s, "startTime", i({}, o, {
                        get: function () {
                            return u
                        },
                        set: function (e) {
                            if ("number" != typeof e) throw new TypeError("Start time must be set to a number.");
                            u = e, this.hasBeenReset = !0
                        }
                    })), Object.defineProperty(s, "endTime", i({}, o, {
                        get: function () {
                            return c
                        },
                        set: function (e) {
                            if ("number" != typeof e) throw new TypeError("End time must be set to a number.");
                            c = e, this.hasBeenReset = !0
                        }
                    })), Object.defineProperty(s, "text", i({}, o, {
                        get: function () {
                            return h
                        },
                        set: function (e) {
                            h = "" + e, this.hasBeenReset = !0
                        }
                    })), Object.defineProperty(s, "region", i({}, o, {
                        get: function () {
                            return f
                        },
                        set: function (e) {
                            f = e, this.hasBeenReset = !0
                        }
                    })), Object.defineProperty(s, "vertical", i({}, o, {
                        get: function () {
                            return g
                        },
                        set: function (t) {
                            var r = function (t) {
                                return "string" == typeof t && (!!e[t.toLowerCase()] && t.toLowerCase())
                            }(t);
                            if (!1 === r) throw new SyntaxError("An invalid or illegal string was specified.");
                            g = r, this.hasBeenReset = !0
                        }
                    })), Object.defineProperty(s, "snapToLines", i({}, o, {
                        get: function () {
                            return p
                        },
                        set: function (e) {
                            p = !!e, this.hasBeenReset = !0
                        }
                    })), Object.defineProperty(s, "line", i({}, o, {
                        get: function () {
                            return v
                        },
                        set: function (e) {
                            if ("number" != typeof e && "auto" !== e) throw new SyntaxError("An invalid number or illegal string was specified.");
                            v = e, this.hasBeenReset = !0
                        }
                    })), Object.defineProperty(s, "lineAlign", i({}, o, {
                        get: function () {
                            return m
                        },
                        set: function (e) {
                            var t = r(e);
                            if (!t) throw new SyntaxError("An invalid or illegal string was specified.");
                            m = t, this.hasBeenReset = !0
                        }
                    })), Object.defineProperty(s, "position", i({}, o, {
                        get: function () {
                            return y
                        },
                        set: function (e) {
                            if (e < 0 || e > 100) throw new Error("Position must be between 0 and 100.");
                            y = e, this.hasBeenReset = !0
                        }
                    })), Object.defineProperty(s, "positionAlign", i({}, o, {
                        get: function () {
                            return b
                        },
                        set: function (e) {
                            var t = r(e);
                            if (!t) throw new SyntaxError("An invalid or illegal string was specified.");
                            b = t, this.hasBeenReset = !0
                        }
                    })), Object.defineProperty(s, "size", i({}, o, {
                        get: function () {
                            return T
                        },
                        set: function (e) {
                            if (e < 0 || e > 100) throw new Error("Size must be between 0 and 100.");
                            T = e, this.hasBeenReset = !0
                        }
                    })), Object.defineProperty(s, "align", i({}, o, {
                        get: function () {
                            return E
                        },
                        set: function (e) {
                            var t = r(e);
                            if (!t) throw new SyntaxError("An invalid or illegal string was specified.");
                            E = t, this.hasBeenReset = !0
                        }
                    })), s.displayState = void 0
                }
                return a.prototype.getCueAsHTML = function () {
                    return window.WebVTT.convertCueToDOMTree(window, this.text)
                }, a
            }(),
            at = function () {
                return {
                    decode: function (e) {
                        if (!e) return "";
                        if ("string" != typeof e) throw new Error("Error - expected string data.");
                        return decodeURIComponent(encodeURIComponent(e))
                    }
                }
            };

        function nt() {
            this.window = window, this.state = "INITIAL", this.buffer = "", this.decoder = new at, this.regionList = []
        }

        function st() {
            this.values = Object.create(null)
        }

        function ot(e, t, r, i) {
            var a = i ? e.split(i) : [e];
            for (var n in a)
                if ("string" == typeof a[n]) {
                    var s = a[n].split(r);
                    if (2 === s.length) t(s[0], s[1])
                }
        }
        st.prototype = {
            set: function (e, t) {
                this.get(e) || "" === t || (this.values[e] = t)
            },
            get: function (e, t, r) {
                return r ? this.has(e) ? this.values[e] : t[r] : this.has(e) ? this.values[e] : t
            },
            has: function (e) {
                return e in this.values
            },
            alt: function (e, t, r) {
                for (var i = 0; i < r.length; ++i)
                    if (t === r[i]) {
                        this.set(e, t);
                        break
                    }
            },
            integer: function (e, t) {
                /^-?\d+$/.test(t) && this.set(e, parseInt(t, 10))
            },
            percent: function (e, t) {
                return !!(t.match(/^([\d]{1,3})(\.[\d]*)?%$/) && (t = parseFloat(t)) >= 0 && t <= 100) && (this.set(e, t), !0)
            }
        };
        var lt = new it(0, 0, 0),
            dt = "middle" === lt.align ? "middle" : "center";

        function ut(e, t, r) {
            var i = e;

            function a() {
                var t = function (e) {
                    function t(e, t, r, i) {
                        return 3600 * (0 | e) + 60 * (0 | t) + (0 | r) + (0 | i) / 1e3
                    }
                    var r = e.match(/^(\d+):(\d{2})(:\d{2})?\.(\d{3})/);
                    return r ? r[3] ? t(r[1], r[2], r[3].replace(":", ""), r[4]) : r[1] > 59 ? t(r[1], r[2], 0, r[4]) : t(0, r[1], r[2], r[4]) : null
                }(e);
                if (null === t) throw new Error("Malformed timestamp: " + i);
                return e = e.replace(/^[^\sa-zA-Z-]+/, ""), t
            }

            function n() {
                e = e.replace(/^\s+/, "")
            }
            if (n(), t.startTime = a(), n(), "--\x3e" !== e.substr(0, 3)) throw new Error("Malformed time stamp (time stamps must be separated by '--\x3e'): " + i);
            e = e.substr(3), n(), t.endTime = a(), n(),
                function (e, t) {
                    var i = new st;
                    ot(e, (function (e, t) {
                        switch (e) {
                            case "region":
                                for (var a = r.length - 1; a >= 0; a--)
                                    if (r[a].id === t) {
                                        i.set(e, r[a].region);
                                        break
                                    } break;
                            case "vertical":
                                i.alt(e, t, ["rl", "lr"]);
                                break;
                            case "line":
                                var n = t.split(","),
                                    s = n[0];
                                i.integer(e, s), i.percent(e, s) && i.set("snapToLines", !1), i.alt(e, s, ["auto"]), 2 === n.length && i.alt("lineAlign", n[1], ["start", dt, "end"]);
                                break;
                            case "position":
                                n = t.split(","), i.percent(e, n[0]), 2 === n.length && i.alt("positionAlign", n[1], ["start", dt, "end", "line-left", "line-right", "auto"]);
                                break;
                            case "size":
                                i.percent(e, t);
                                break;
                            case "align":
                                i.alt(e, t, ["start", dt, "end", "left", "right"])
                        }
                    }), /:/, /\s/), t.region = i.get("region", null), t.vertical = i.get("vertical", "");
                    var a = i.get("line", "auto");
                    "auto" === a && -1 === lt.line && (a = -1), t.line = a, t.lineAlign = i.get("lineAlign", "start"), t.snapToLines = i.get("snapToLines", !0), t.size = i.get("size", 100), t.align = i.get("align", dt);
                    var n = i.get("position", "auto");
                    "auto" === n && 50 === lt.position && (n = "start" === t.align || "left" === t.align ? 0 : "end" === t.align || "right" === t.align ? 100 : 50), t.position = n
                }(e, t)
        }

        function ct(e) {
            return e.replace(/<br(?: \/)?>/gi, "\n")
        }
        nt.prototype = {
            parse: function (e) {
                var t = this;

                function r() {
                    var e = t.buffer,
                        r = 0;
                    for (e = ct(e); r < e.length && "\r" !== e[r] && "\n" !== e[r];) ++r;
                    var i = e.substr(0, r);
                    return "\r" === e[r] && ++r, "\n" === e[r] && ++r, t.buffer = e.substr(r), i
                }
                e && (t.buffer += t.decoder.decode(e, {
                    stream: !0
                }));
                try {
                    var i;
                    if ("INITIAL" === t.state) {
                        if (!/\r\n|\n/.test(t.buffer)) return this;
                        var a = (i = r()).match(/^(ï»¿)?WEBVTT([ \t].*)?$/);
                        if (!a || !a[0]) throw new Error("Malformed WebVTT signature.");
                        t.state = "HEADER"
                    }
                    for (var n = !1; t.buffer;) {
                        if (!/\r\n|\n/.test(t.buffer)) return this;
                        switch (n ? n = !1 : i = r(), t.state) {
                            case "HEADER":
                                /:/.test(i) ? ot(i, (function (e, t) { }), /:/) : i || (t.state = "ID");
                                continue;
                            case "NOTE":
                                i || (t.state = "ID");
                                continue;
                            case "ID":
                                if (/^NOTE($|[ \t])/.test(i)) {
                                    t.state = "NOTE";
                                    break
                                }
                                if (!i) continue;
                                if (t.cue = new it(0, 0, ""), t.state = "CUE", -1 === i.indexOf("--\x3e")) {
                                    t.cue.id = i;
                                    continue
                                }
                            case "CUE":
                                try {
                                    ut(i, t.cue, t.regionList)
                                } catch (e) {
                                    t.cue = null, t.state = "BADCUE";
                                    continue
                                }
                                t.state = "CUETEXT";
                                continue;
                            case "CUETEXT":
                                var s = -1 !== i.indexOf("--\x3e");
                                if (!i || s && (n = !0)) {
                                    t.oncue && t.oncue(t.cue), t.cue = null, t.state = "ID";
                                    continue
                                }
                                t.cue.text && (t.cue.text += "\n"), t.cue.text += i;
                                continue;
                            case "BADCUE":
                                i || (t.state = "ID");
                                continue
                        }
                    }
                } catch (e) {
                    "CUETEXT" === t.state && t.cue && t.oncue && t.oncue(t.cue), t.cue = null, t.state = "INITIAL" === t.state ? "BADWEBVTT" : "BADCUE"
                }
                return this
            },
            flush: function () {
                try {
                    if (this.buffer += this.decoder.decode(), (this.cue || "HEADER" === this.state) && (this.buffer += "\n\n", this.parse()), "INITIAL" === this.state) throw new Error("Malformed WebVTT signature.")
                } catch (e) {
                    throw e
                }
                return this.onflush && this.onflush(), this
            }
        };
        var ht = nt;

        function ft(e, t, r, i) {
            for (var a, n, s, o, l, d = [], u = window.VTTCue || TextTrackCue, c = 0; c < i.rows.length; c++)
                if (s = !0, o = 0, l = "", !(a = i.rows[c]).isEmpty()) {
                    for (var h = 0; h < a.chars.length; h++) a.chars[h].uchar.match(/\s/) && s ? o++ : (l += a.chars[h].uchar, s = !1);
                    a.cueStartTime = t, t === r && (r += 1e-4), n = new u(t, r, ct(l.trim())), o >= 16 ? o-- : o++, navigator.userAgent.match(/Firefox\//) ? n.line = c + 1 : n.line = c > 7 ? c - 2 : c + 1, n.align = "left", n.position = Math.max(0, Math.min(100, o / 32 * 100)), d.push(n), e && e.addCue(n)
                } return d
        }
        var gt, pt = {
            42: 225,
            92: 233,
            94: 237,
            95: 243,
            96: 250,
            123: 231,
            124: 247,
            125: 209,
            126: 241,
            127: 9608,
            128: 174,
            129: 176,
            130: 189,
            131: 191,
            132: 8482,
            133: 162,
            134: 163,
            135: 9834,
            136: 224,
            137: 32,
            138: 232,
            139: 226,
            140: 234,
            141: 238,
            142: 244,
            143: 251,
            144: 193,
            145: 201,
            146: 211,
            147: 218,
            148: 220,
            149: 252,
            150: 8216,
            151: 161,
            152: 42,
            153: 8217,
            154: 9473,
            155: 169,
            156: 8480,
            157: 8226,
            158: 8220,
            159: 8221,
            160: 192,
            161: 194,
            162: 199,
            163: 200,
            164: 202,
            165: 203,
            166: 235,
            167: 206,
            168: 207,
            169: 239,
            170: 212,
            171: 217,
            172: 249,
            173: 219,
            174: 171,
            175: 187,
            176: 195,
            177: 227,
            178: 205,
            179: 204,
            180: 236,
            181: 210,
            182: 242,
            183: 213,
            184: 245,
            185: 123,
            186: 125,
            187: 92,
            188: 94,
            189: 95,
            190: 124,
            191: 8764,
            192: 196,
            193: 228,
            194: 214,
            195: 246,
            196: 223,
            197: 165,
            198: 164,
            199: 9475,
            200: 197,
            201: 229,
            202: 216,
            203: 248,
            204: 9487,
            205: 9491,
            206: 9495,
            207: 9499
        },
            vt = function (e) {
                var t = e;
                return pt.hasOwnProperty(e) && (t = pt[e]), String.fromCharCode(t)
            },
            mt = {
                17: 1,
                18: 3,
                21: 5,
                22: 7,
                23: 9,
                16: 11,
                19: 12,
                20: 14
            },
            yt = {
                17: 2,
                18: 4,
                21: 6,
                22: 8,
                23: 10,
                19: 13,
                20: 15
            },
            bt = {
                25: 1,
                26: 3,
                29: 5,
                30: 7,
                31: 9,
                24: 11,
                27: 12,
                28: 14
            },
            Tt = {
                25: 2,
                26: 4,
                29: 6,
                30: 8,
                31: 10,
                27: 13,
                28: 15
            },
            Et = ["white", "green", "blue", "cyan", "red", "yellow", "magenta", "black", "transparent"];
        ! function (e) {
            e[e.ERROR = 0] = "ERROR", e[e.TEXT = 1] = "TEXT", e[e.WARNING = 2] = "WARNING", e[e.INFO = 2] = "INFO", e[e.DEBUG = 3] = "DEBUG", e[e.DATA = 3] = "DATA"
        }(gt || (gt = {}));
        var St = function () {
            function e() {
                this.time = null, this.verboseLevel = gt.ERROR
            }
            return e.prototype.log = function (e, t) {
                this.verboseLevel >= e && u.b.log(this.time + " [" + e + "] " + t)
            }, e
        }(),
            _t = function (e) {
                for (var t = [], r = 0; r < e.length; r++) t.push(e[r].toString(16));
                return t
            },
            Rt = function () {
                function e(e, t, r, i, a) {
                    this.foreground = void 0, this.underline = void 0, this.italics = void 0, this.background = void 0, this.flash = void 0, this.foreground = e || "white", this.underline = t || !1, this.italics = r || !1, this.background = i || "black", this.flash = a || !1
                }
                var t = e.prototype;
                return t.reset = function () {
                    this.foreground = "white", this.underline = !1, this.italics = !1, this.background = "black", this.flash = !1
                }, t.setStyles = function (e) {
                    for (var t = ["foreground", "underline", "italics", "background", "flash"], r = 0; r < t.length; r++) {
                        var i = t[r];
                        e.hasOwnProperty(i) && (this[i] = e[i])
                    }
                }, t.isDefault = function () {
                    return "white" === this.foreground && !this.underline && !this.italics && "black" === this.background && !this.flash
                }, t.equals = function (e) {
                    return this.foreground === e.foreground && this.underline === e.underline && this.italics === e.italics && this.background === e.background && this.flash === e.flash
                }, t.copy = function (e) {
                    this.foreground = e.foreground, this.underline = e.underline, this.italics = e.italics, this.background = e.background, this.flash = e.flash
                }, t.toString = function () {
                    return "color=" + this.foreground + ", underline=" + this.underline + ", italics=" + this.italics + ", background=" + this.background + ", flash=" + this.flash
                }, e
            }(),
            At = function () {
                function e(e, t, r, i, a, n) {
                    this.uchar = void 0, this.penState = void 0, this.uchar = e || " ", this.penState = new Rt(t, r, i, a, n)
                }
                var t = e.prototype;
                return t.reset = function () {
                    this.uchar = " ", this.penState.reset()
                }, t.setChar = function (e, t) {
                    this.uchar = e, this.penState.copy(t)
                }, t.setPenState = function (e) {
                    this.penState.copy(e)
                }, t.equals = function (e) {
                    return this.uchar === e.uchar && this.penState.equals(e.penState)
                }, t.copy = function (e) {
                    this.uchar = e.uchar, this.penState.copy(e.penState)
                }, t.isEmpty = function () {
                    return " " === this.uchar && this.penState.isDefault()
                }, e
            }(),
            kt = function () {
                function e(e) {
                    this.chars = void 0, this.pos = void 0, this.currPenState = void 0, this.cueStartTime = void 0, this.logger = void 0, this.chars = [];
                    for (var t = 0; t < 100; t++) this.chars.push(new At);
                    this.logger = e, this.pos = 0, this.currPenState = new Rt
                }
                var t = e.prototype;
                return t.equals = function (e) {
                    for (var t = !0, r = 0; r < 100; r++)
                        if (!this.chars[r].equals(e.chars[r])) {
                            t = !1;
                            break
                        } return t
                }, t.copy = function (e) {
                    for (var t = 0; t < 100; t++) this.chars[t].copy(e.chars[t])
                }, t.isEmpty = function () {
                    for (var e = !0, t = 0; t < 100; t++)
                        if (!this.chars[t].isEmpty()) {
                            e = !1;
                            break
                        } return e
                }, t.setCursor = function (e) {
                    this.pos !== e && (this.pos = e), this.pos < 0 ? (this.logger.log(gt.DEBUG, "Negative cursor position " + this.pos), this.pos = 0) : this.pos > 100 && (this.logger.log(gt.DEBUG, "Too large cursor position " + this.pos), this.pos = 100)
                }, t.moveCursor = function (e) {
                    var t = this.pos + e;
                    if (e > 1)
                        for (var r = this.pos + 1; r < t + 1; r++) this.chars[r].setPenState(this.currPenState);
                    this.setCursor(t)
                }, t.backSpace = function () {
                    this.moveCursor(-1), this.chars[this.pos].setChar(" ", this.currPenState)
                }, t.insertChar = function (e) {
                    e >= 144 && this.backSpace();
                    var t = vt(e);
                    this.pos >= 100 ? this.logger.log(gt.ERROR, "Cannot insert " + e.toString(16) + " (" + t + ") at position " + this.pos + ". Skipping it!") : (this.chars[this.pos].setChar(t, this.currPenState), this.moveCursor(1))
                }, t.clearFromPos = function (e) {
                    var t;
                    for (t = e; t < 100; t++) this.chars[t].reset()
                }, t.clear = function () {
                    this.clearFromPos(0), this.pos = 0, this.currPenState.reset()
                }, t.clearToEndOfRow = function () {
                    this.clearFromPos(this.pos)
                }, t.getTextString = function () {
                    for (var e = [], t = !0, r = 0; r < 100; r++) {
                        var i = this.chars[r].uchar;
                        " " !== i && (t = !1), e.push(i)
                    }
                    return t ? "" : e.join("")
                }, t.setPenStyles = function (e) {
                    this.currPenState.setStyles(e), this.chars[this.pos].setPenState(this.currPenState)
                }, e
            }(),
            wt = function () {
                function e(e) {
                    this.rows = void 0, this.currRow = void 0, this.nrRollUpRows = void 0, this.lastOutputScreen = void 0, this.logger = void 0, this.rows = [];
                    for (var t = 0; t < 15; t++) this.rows.push(new kt(e));
                    this.logger = e, this.currRow = 14, this.nrRollUpRows = null, this.lastOutputScreen = null, this.reset()
                }
                var t = e.prototype;
                return t.reset = function () {
                    for (var e = 0; e < 15; e++) this.rows[e].clear();
                    this.currRow = 14
                }, t.equals = function (e) {
                    for (var t = !0, r = 0; r < 15; r++)
                        if (!this.rows[r].equals(e.rows[r])) {
                            t = !1;
                            break
                        } return t
                }, t.copy = function (e) {
                    for (var t = 0; t < 15; t++) this.rows[t].copy(e.rows[t])
                }, t.isEmpty = function () {
                    for (var e = !0, t = 0; t < 15; t++)
                        if (!this.rows[t].isEmpty()) {
                            e = !1;
                            break
                        } return e
                }, t.backSpace = function () {
                    this.rows[this.currRow].backSpace()
                }, t.clearToEndOfRow = function () {
                    this.rows[this.currRow].clearToEndOfRow()
                }, t.insertChar = function (e) {
                    this.rows[this.currRow].insertChar(e)
                }, t.setPen = function (e) {
                    this.rows[this.currRow].setPenStyles(e)
                }, t.moveCursor = function (e) {
                    this.rows[this.currRow].moveCursor(e)
                }, t.setCursor = function (e) {
                    this.logger.log(gt.INFO, "setCursor: " + e), this.rows[this.currRow].setCursor(e)
                }, t.setPAC = function (e) {
                    this.logger.log(gt.INFO, "pacData = " + JSON.stringify(e));
                    var t = e.row - 1;
                    if (this.nrRollUpRows && t < this.nrRollUpRows - 1 && (t = this.nrRollUpRows - 1), this.nrRollUpRows && this.currRow !== t) {
                        for (var r = 0; r < 15; r++) this.rows[r].clear();
                        var i = this.currRow + 1 - this.nrRollUpRows,
                            a = this.lastOutputScreen;
                        if (a) {
                            var n = a.rows[i].cueStartTime,
                                s = this.logger.time;
                            if (n && null !== s && n < s)
                                for (var o = 0; o < this.nrRollUpRows; o++) this.rows[t - this.nrRollUpRows + o + 1].copy(a.rows[i + o])
                        }
                    }
                    this.currRow = t;
                    var l = this.rows[this.currRow];
                    if (null !== e.indent) {
                        var d = e.indent,
                            u = Math.max(d - 1, 0);
                        l.setCursor(e.indent), e.color = l.chars[u].penState.foreground
                    }
                    var c = {
                        foreground: e.color,
                        underline: e.underline,
                        italics: e.italics,
                        background: "black",
                        flash: !1
                    };
                    this.setPen(c)
                }, t.setBkgData = function (e) {
                    this.logger.log(gt.INFO, "bkgData = " + JSON.stringify(e)), this.backSpace(), this.setPen(e), this.insertChar(32)
                }, t.setRollUpRows = function (e) {
                    this.nrRollUpRows = e
                }, t.rollUp = function () {
                    if (null !== this.nrRollUpRows) {
                        this.logger.log(gt.TEXT, this.getDisplayText());
                        var e = this.currRow + 1 - this.nrRollUpRows,
                            t = this.rows.splice(e, 1)[0];
                        t.clear(), this.rows.splice(this.currRow, 0, t), this.logger.log(gt.INFO, "Rolling up")
                    } else this.logger.log(gt.DEBUG, "roll_up but nrRollUpRows not set yet")
                }, t.getDisplayText = function (e) {
                    e = e || !1;
                    for (var t = [], r = "", i = -1, a = 0; a < 15; a++) {
                        var n = this.rows[a].getTextString();
                        n && (i = a + 1, e ? t.push("Row " + i + ": '" + n + "'") : t.push(n.trim()))
                    }
                    return t.length > 0 && (r = e ? "[" + t.join(" | ") + "]" : t.join("\n")), r
                }, t.getTextAndFormat = function () {
                    return this.rows
                }, e
            }(),
            Lt = function () {
                function e(e, t, r) {
                    this.chNr = void 0, this.outputFilter = void 0, this.mode = void 0, this.verbose = void 0, this.displayedMemory = void 0, this.nonDisplayedMemory = void 0, this.lastOutputScreen = void 0, this.currRollUpRow = void 0, this.writeScreen = void 0, this.cueStartTime = void 0, this.logger = void 0, this.chNr = e, this.outputFilter = t, this.mode = null, this.verbose = 0, this.displayedMemory = new wt(r), this.nonDisplayedMemory = new wt(r), this.lastOutputScreen = new wt(r), this.currRollUpRow = this.displayedMemory.rows[14], this.writeScreen = this.displayedMemory, this.mode = null, this.cueStartTime = null, this.logger = r
                }
                var t = e.prototype;
                return t.reset = function () {
                    this.mode = null, this.displayedMemory.reset(), this.nonDisplayedMemory.reset(), this.lastOutputScreen.reset(), this.outputFilter.reset(), this.currRollUpRow = this.displayedMemory.rows[14], this.writeScreen = this.displayedMemory, this.mode = null, this.cueStartTime = null
                }, t.getHandler = function () {
                    return this.outputFilter
                }, t.setHandler = function (e) {
                    this.outputFilter = e
                }, t.setPAC = function (e) {
                    this.writeScreen.setPAC(e)
                }, t.setBkgData = function (e) {
                    this.writeScreen.setBkgData(e)
                }, t.setMode = function (e) {
                    e !== this.mode && (this.mode = e, this.logger.log(gt.INFO, "MODE=" + e), "MODE_POP-ON" === this.mode ? this.writeScreen = this.nonDisplayedMemory : (this.writeScreen = this.displayedMemory, this.writeScreen.reset()), "MODE_ROLL-UP" !== this.mode && (this.displayedMemory.nrRollUpRows = null, this.nonDisplayedMemory.nrRollUpRows = null), this.mode = e)
                }, t.insertChars = function (e) {
                    for (var t = 0; t < e.length; t++) this.writeScreen.insertChar(e[t]);
                    var r = this.writeScreen === this.displayedMemory ? "DISP" : "NON_DISP";
                    this.logger.log(gt.INFO, r + ": " + this.writeScreen.getDisplayText(!0)), "MODE_PAINT-ON" !== this.mode && "MODE_ROLL-UP" !== this.mode || (this.logger.log(gt.TEXT, "DISPLAYED: " + this.displayedMemory.getDisplayText(!0)), this.outputDataUpdate())
                }, t.ccRCL = function () {
                    this.logger.log(gt.INFO, "RCL - Resume Caption Loading"), this.setMode("MODE_POP-ON")
                }, t.ccBS = function () {
                    this.logger.log(gt.INFO, "BS - BackSpace"), "MODE_TEXT" !== this.mode && (this.writeScreen.backSpace(), this.writeScreen === this.displayedMemory && this.outputDataUpdate())
                }, t.ccAOF = function () { }, t.ccAON = function () { }, t.ccDER = function () {
                    this.logger.log(gt.INFO, "DER- Delete to End of Row"), this.writeScreen.clearToEndOfRow(), this.outputDataUpdate()
                }, t.ccRU = function (e) {
                    this.logger.log(gt.INFO, "RU(" + e + ") - Roll Up"), this.writeScreen = this.displayedMemory, this.setMode("MODE_ROLL-UP"), this.writeScreen.setRollUpRows(e)
                }, t.ccFON = function () {
                    this.logger.log(gt.INFO, "FON - Flash On"), this.writeScreen.setPen({
                        flash: !0
                    })
                }, t.ccRDC = function () {
                    this.logger.log(gt.INFO, "RDC - Resume Direct Captioning"), this.setMode("MODE_PAINT-ON")
                }, t.ccTR = function () {
                    this.logger.log(gt.INFO, "TR"), this.setMode("MODE_TEXT")
                }, t.ccRTD = function () {
                    this.logger.log(gt.INFO, "RTD"), this.setMode("MODE_TEXT")
                }, t.ccEDM = function () {
                    this.logger.log(gt.INFO, "EDM - Erase Displayed Memory"), this.displayedMemory.reset(), this.outputDataUpdate(!0)
                }, t.ccCR = function () {
                    this.logger.log(gt.INFO, "CR - Carriage Return"), this.writeScreen.rollUp(), this.outputDataUpdate(!0)
                }, t.ccENM = function () {
                    this.logger.log(gt.INFO, "ENM - Erase Non-displayed Memory"), this.nonDisplayedMemory.reset()
                }, t.ccEOC = function () {
                    if (this.logger.log(gt.INFO, "EOC - End Of Caption"), "MODE_POP-ON" === this.mode) {
                        var e = this.displayedMemory;
                        this.displayedMemory = this.nonDisplayedMemory, this.nonDisplayedMemory = e, this.writeScreen = this.nonDisplayedMemory, this.logger.log(gt.TEXT, "DISP: " + this.displayedMemory.getDisplayText())
                    }
                    this.outputDataUpdate(!0)
                }, t.ccTO = function (e) {
                    this.logger.log(gt.INFO, "TO(" + e + ") - Tab Offset"), this.writeScreen.moveCursor(e)
                }, t.ccMIDROW = function (e) {
                    var t = {
                        flash: !1
                    };
                    if (t.underline = e % 2 == 1, t.italics = e >= 46, t.italics) t.foreground = "white";
                    else {
                        var r = Math.floor(e / 2) - 16;
                        t.foreground = ["white", "green", "blue", "cyan", "red", "yellow", "magenta"][r]
                    }
                    this.logger.log(gt.INFO, "MIDROW: " + JSON.stringify(t)), this.writeScreen.setPen(t)
                }, t.outputDataUpdate = function (e) {
                    void 0 === e && (e = !1);
                    var t = this.logger.time;
                    null !== t && this.outputFilter && (null !== this.cueStartTime || this.displayedMemory.isEmpty() ? this.displayedMemory.equals(this.lastOutputScreen) || (this.outputFilter.newCue(this.cueStartTime, t, this.lastOutputScreen), e && this.outputFilter.dispatchCue && this.outputFilter.dispatchCue(), this.cueStartTime = this.displayedMemory.isEmpty() ? null : t) : this.cueStartTime = t, this.lastOutputScreen.copy(this.displayedMemory))
                }, t.cueSplitAtTime = function (e) {
                    this.outputFilter && (this.displayedMemory.isEmpty() || (this.outputFilter.newCue && this.outputFilter.newCue(this.cueStartTime, e, this.displayedMemory), this.cueStartTime = e))
                }, e
            }();

        function Dt(e, t, r) {
            r.a = e, r.b = t
        }

        function Ot(e, t, r) {
            return r.a === e && r.b === t
        }
        var Ct = function () {
            function e(e, t, r) {
                this.channels = void 0, this.currentChannel = 0, this.cmdHistory = void 0, this.logger = void 0;
                var i = new St;
                this.channels = [null, new Lt(e, t, i), new Lt(e + 1, r, i)], this.cmdHistory = {
                    a: null,
                    b: null
                }, this.logger = i
            }
            var t = e.prototype;
            return t.getHandler = function (e) {
                return this.channels[e].getHandler()
            }, t.setHandler = function (e, t) {
                this.channels[e].setHandler(t)
            }, t.addData = function (e, t) {
                var r, i, a, n = !1;
                this.logger.time = e;
                for (var s = 0; s < t.length; s += 2)
                    if (i = 127 & t[s], a = 127 & t[s + 1], 0 !== i || 0 !== a) {
                        if (this.logger.log(gt.DATA, "[" + _t([t[s], t[s + 1]]) + "] -> (" + _t([i, a]) + ")"), (r = this.parseCmd(i, a)) || (r = this.parseMidrow(i, a)), r || (r = this.parsePAC(i, a)), r || (r = this.parseBackgroundAttributes(i, a)), !r && (n = this.parseChars(i, a))) {
                            var o = this.currentChannel;
                            if (o && o > 0) this.channels[o].insertChars(n);
                            else this.logger.log(gt.WARNING, "No channel found yet. TEXT-MODE?")
                        }
                        r || n || this.logger.log(gt.WARNING, "Couldn't parse cleaned data " + _t([i, a]) + " orig: " + _t([t[s], t[s + 1]]))
                    }
            }, t.parseCmd = function (e, t) {
                var r = this.cmdHistory;
                if (!((20 === e || 28 === e || 21 === e || 29 === e) && t >= 32 && t <= 47) && !((23 === e || 31 === e) && t >= 33 && t <= 35)) return !1;
                if (Ot(e, t, r)) return Dt(null, null, r), this.logger.log(gt.DEBUG, "Repeated command (" + _t([e, t]) + ") is dropped"), !0;
                var i = 20 === e || 21 === e || 23 === e ? 1 : 2,
                    a = this.channels[i];
                return 20 === e || 21 === e || 28 === e || 29 === e ? 32 === t ? a.ccRCL() : 33 === t ? a.ccBS() : 34 === t ? a.ccAOF() : 35 === t ? a.ccAON() : 36 === t ? a.ccDER() : 37 === t ? a.ccRU(2) : 38 === t ? a.ccRU(3) : 39 === t ? a.ccRU(4) : 40 === t ? a.ccFON() : 41 === t ? a.ccRDC() : 42 === t ? a.ccTR() : 43 === t ? a.ccRTD() : 44 === t ? a.ccEDM() : 45 === t ? a.ccCR() : 46 === t ? a.ccENM() : 47 === t && a.ccEOC() : a.ccTO(t - 32), Dt(e, t, r), this.currentChannel = i, !0
            }, t.parseMidrow = function (e, t) {
                var r = 0;
                if ((17 === e || 25 === e) && t >= 32 && t <= 47) {
                    if ((r = 17 === e ? 1 : 2) !== this.currentChannel) return this.logger.log(gt.ERROR, "Mismatch channel in midrow parsing"), !1;
                    var i = this.channels[r];
                    return !!i && (i.ccMIDROW(t), this.logger.log(gt.DEBUG, "MIDROW (" + _t([e, t]) + ")"), !0)
                }
                return !1
            }, t.parsePAC = function (e, t) {
                var r, i = this.cmdHistory;
                if (!((e >= 17 && e <= 23 || e >= 25 && e <= 31) && t >= 64 && t <= 127) && !((16 === e || 24 === e) && t >= 64 && t <= 95)) return !1;
                if (Ot(e, t, i)) return Dt(null, null, i), !0;
                var a = e <= 23 ? 1 : 2;
                r = t >= 64 && t <= 95 ? 1 === a ? mt[e] : bt[e] : 1 === a ? yt[e] : Tt[e];
                var n = this.channels[a];
                return !!n && (n.setPAC(this.interpretPAC(r, t)), Dt(e, t, i), this.currentChannel = a, !0)
            }, t.interpretPAC = function (e, t) {
                var r = t,
                    i = {
                        color: null,
                        italics: !1,
                        indent: null,
                        underline: !1,
                        row: e
                    };
                return r = t > 95 ? t - 96 : t - 64, i.underline = 1 == (1 & r), r <= 13 ? i.color = ["white", "green", "blue", "cyan", "red", "yellow", "magenta", "white"][Math.floor(r / 2)] : r <= 15 ? (i.italics = !0, i.color = "white") : i.indent = 4 * Math.floor((r - 16) / 2), i
            }, t.parseChars = function (e, t) {
                var r, i = null,
                    a = null;
                if (e >= 25 ? (r = 2, a = e - 8) : (r = 1, a = e), a >= 17 && a <= 19) {
                    var n = t;
                    n = 17 === a ? t + 80 : 18 === a ? t + 112 : t + 144, this.logger.log(gt.INFO, "Special char '" + vt(n) + "' in channel " + r), i = [n]
                } else e >= 32 && e <= 127 && (i = 0 === t ? [e] : [e, t]);
                if (i) {
                    var s = _t(i);
                    this.logger.log(gt.DEBUG, "Char codes =  " + s.join(",")), Dt(e, t, this.cmdHistory)
                }
                return i
            }, t.parseBackgroundAttributes = function (e, t) {
                var r;
                if (!((16 === e || 24 === e) && t >= 32 && t <= 47) && !((23 === e || 31 === e) && t >= 45 && t <= 47)) return !1;
                var i = {};
                16 === e || 24 === e ? (r = Math.floor((t - 32) / 2), i.background = Et[r], t % 2 == 1 && (i.background = i.background + "_semi")) : 45 === t ? i.background = "transparent" : (i.foreground = "black", 47 === t && (i.underline = !0));
                var a = e <= 23 ? 1 : 2;
                return this.channels[a].setBkgData(i), Dt(e, t, this.cmdHistory), !0
            }, t.reset = function () {
                for (var e = 0; e < Object.keys(this.channels).length; e++) {
                    var t = this.channels[e];
                    t && t.reset()
                }
                this.cmdHistory = {
                    a: null,
                    b: null
                }
            }, t.cueSplitAtTime = function (e) {
                for (var t = 0; t < this.channels.length; t++) {
                    var r = this.channels[t];
                    r && r.cueSplitAtTime(e)
                }
            }, e
        }(),
            It = function () {
                function e(e, t) {
                    this.timelineController = void 0, this.cueRanges = [], this.trackName = void 0, this.startTime = null, this.endTime = null, this.screen = null, this.timelineController = e, this.trackName = t
                }
                var t = e.prototype;
                return t.dispatchCue = function () {
                    null !== this.startTime && (this.timelineController.addCues(this.trackName, this.startTime, this.endTime, this.screen, this.cueRanges), this.startTime = null)
                }, t.newCue = function (e, t, r) {
                    (null === this.startTime || this.startTime > e) && (this.startTime = e), this.endTime = t, this.screen = r, this.timelineController.createCaptionsTrack(this.trackName)
                }, t.reset = function () {
                    this.cueRanges = []
                }, e
            }(),
            Pt = function (e, t, r) {
                return e.substr(r || 0, t.length) === t
            },
            xt = function (e) {
                for (var t = 5381, r = e.length; r;) t = 33 * t ^ e.charCodeAt(--r);
                return (t >>> 0).toString()
            },
            Mt = {
                parse: function (e, t, r, i, a, n) {
                    var s, o = Object(Fe.b)(new Uint8Array(e)).trim().replace(/\r\n|\n\r|\n|\r/g, "\n").split("\n"),
                        d = "00:00.000",
                        u = 0,
                        c = 0,
                        h = 0,
                        f = [],
                        g = !0,
                        p = !1,
                        v = new ht;
                    v.oncue = function (e) {
                        var t = r[i],
                            a = r.ccOffset;
                        t && t.new && (void 0 !== c ? a = r.ccOffset = t.start : function (e, t, r) {
                            var i = e[t],
                                a = e[i.prevCC];
                            if (!a || !a.new && i.new) return e.ccOffset = e.presentationOffset = i.start, void (i.new = !1);
                            for (; a && a.new;) e.ccOffset += i.start - a.start, i.new = !1, a = e[(i = a).prevCC];
                            e.presentationOffset = r
                        }(r, i, h)), h && (a = h - r.presentationOffset), p && (e.startTime += a - c, e.endTime += a - c), e.id = xt(e.startTime.toString()) + xt(e.endTime.toString()) + xt(e.text), e.text = decodeURIComponent(encodeURIComponent(e.text)), e.endTime > 0 && f.push(e)
                    }, v.onparsingerror = function (e) {
                        s = e
                    }, v.onflush = function () {
                        s && n ? n(s) : a(f)
                    }, o.forEach((function (e) {
                        if (g) {
                            if (Pt(e, "X-TIMESTAMP-MAP=")) {
                                g = !1, p = !0, e.substr(16).split(",").forEach((function (e) {
                                    Pt(e, "LOCAL:") ? d = e.substr(6) : Pt(e, "MPEGTS:") && (u = parseInt(e.substr(7)))
                                }));
                                try {
                                    t + (9e4 * r[i].start || 0) < 0 && (t += 8589934592), u -= t, c = function (e) {
                                        var t = parseInt(e.substr(-3)),
                                            r = parseInt(e.substr(-6, 2)),
                                            i = parseInt(e.substr(-9, 2)),
                                            a = e.length > 9 ? parseInt(e.substr(0, e.indexOf(":"))) : 0;
                                        if (!(Object(l.a)(t) && Object(l.a)(r) && Object(l.a)(i) && Object(l.a)(a))) throw Error("Malformed X-TIMESTAMP-MAP: Local:" + e);
                                        return t += 1e3 * r, t += 6e4 * i, t += 36e5 * a
                                    }(d) / 1e3, h = u / 9e4
                                } catch (e) {
                                    p = !1, s = e
                                }
                                return
                            }
                            "" === e && (g = !1)
                        }
                        v.parse(e + "\n")
                    })), v.flush()
                }
            };

        function Ft(e) {
            if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
            return e
        }

        function Ut(e, t) {
            return e && e.label === t.name && !(e.textTrack1 || e.textTrack2)
        }
        var Nt = function (e) {
            var t, r;

            function i(t) {
                var r;
                if ((r = e.call(this, t, d.a.MEDIA_ATTACHING, d.a.MEDIA_DETACHING, d.a.FRAG_PARSING_USERDATA, d.a.FRAG_DECRYPTED, d.a.MANIFEST_LOADING, d.a.MANIFEST_LOADED, d.a.FRAG_LOADED, d.a.INIT_PTS_FOUND) || this).media = null, r.config = void 0, r.enabled = !0, r.Cues = void 0, r.textTracks = [], r.tracks = [], r.initPTS = [], r.unparsedVttFrags = [], r.captionsTracks = {}, r.nonNativeCaptionsTracks = {}, r.captionsProperties = void 0, r.cea608Parser1 = void 0, r.cea608Parser2 = void 0, r.lastSn = -1, r.prevCC = -1, r.vttCCs = {
                    ccOffset: 0,
                    presentationOffset: 0,
                    0: {
                        start: 0,
                        prevCC: -1,
                        new: !1
                    }
                }, r.hls = t, r.config = t.config, r.Cues = t.config.cueHandler, r.captionsProperties = {
                    textTrack1: {
                        label: r.config.captionsTextTrack1Label,
                        languageCode: r.config.captionsTextTrack1LanguageCode
                    },
                    textTrack2: {
                        label: r.config.captionsTextTrack2Label,
                        languageCode: r.config.captionsTextTrack2LanguageCode
                    },
                    textTrack3: {
                        label: r.config.captionsTextTrack3Label,
                        languageCode: r.config.captionsTextTrack3LanguageCode
                    },
                    textTrack4: {
                        label: r.config.captionsTextTrack4Label,
                        languageCode: r.config.captionsTextTrack4LanguageCode
                    }
                }, r.config.enableCEA708Captions) {
                    var i = new It(Ft(r), "textTrack1"),
                        a = new It(Ft(r), "textTrack2"),
                        n = new It(Ft(r), "textTrack3"),
                        s = new It(Ft(r), "textTrack4");
                    r.cea608Parser1 = new Ct(1, i, a), r.cea608Parser2 = new Ct(3, n, s)
                }
                return r
            }
            r = e, (t = i).prototype = Object.create(r.prototype), t.prototype.constructor = t, t.__proto__ = r;
            var a = i.prototype;
            return a.addCues = function (e, t, r, i, a) {
                for (var n, s, o, l, u = !1, c = a.length; c--;) {
                    var h = a[c],
                        f = (n = h[0], s = h[1], o = t, l = r, Math.min(s, l) - Math.max(n, o));
                    if (f >= 0 && (h[0] = Math.min(h[0], t), h[1] = Math.max(h[1], r), u = !0, f / (r - t) > .5)) return
                }
                if (u || a.push([t, r]), this.config.renderTextTracksNatively) this.Cues.newCue(this.captionsTracks[e], t, r, i);
                else {
                    var g = this.Cues.newCue(null, t, r, i);
                    this.hls.trigger(d.a.CUES_PARSED, {
                        type: "captions",
                        cues: g,
                        track: e
                    })
                }
            }, a.onInitPtsFound = function (e) {
                var t = this,
                    r = e.frag,
                    i = e.id,
                    a = e.initPTS,
                    n = this.unparsedVttFrags;
                "main" === i && (this.initPTS[r.cc] = a), n.length && (this.unparsedVttFrags = [], n.forEach((function (e) {
                    t.onFragLoaded(e)
                })))
            }, a.getExistingTrack = function (e) {
                var t = this.media;
                if (t)
                    for (var r = 0; r < t.textTracks.length; r++) {
                        var i = t.textTracks[r];
                        if (i[e]) return i
                    }
                return null
            }, a.createCaptionsTrack = function (e) {
                this.config.renderTextTracksNatively ? this.createNativeTrack(e) : this.createNonNativeTrack(e)
            }, a.createNativeTrack = function (e) {
                if (!this.captionsTracks[e]) {
                    var t = this.captionsProperties,
                        r = this.captionsTracks,
                        i = this.media,
                        a = t[e],
                        n = a.label,
                        s = a.languageCode,
                        o = this.getExistingTrack(e);
                    if (o) r[e] = o, Ne(r[e]), Ue(r[e], i);
                    else {
                        var l = this.createTextTrack("captions", n, s);
                        l && (l[e] = !0, r[e] = l)
                    }
                }
            }, a.createNonNativeTrack = function (e) {
                if (!this.nonNativeCaptionsTracks[e]) {
                    var t = this.captionsProperties[e];
                    if (t) {
                        var r = {
                            _id: e,
                            label: t.label,
                            kind: "captions",
                            default: !!t.media && !!t.media.default,
                            closedCaptions: t.media
                        };
                        this.nonNativeCaptionsTracks[e] = r, this.hls.trigger(d.a.NON_NATIVE_TEXT_TRACKS_FOUND, {
                            tracks: [r]
                        })
                    }
                }
            }, a.createTextTrack = function (e, t, r) {
                var i = this.media;
                if (i) return i.addTextTrack(e, t, r)
            }, a.destroy = function () {
                e.prototype.destroy.call(this)
            }, a.onMediaAttaching = function (e) {
                this.media = e.media, this._cleanTracks()
            }, a.onMediaDetaching = function () {
                var e = this.captionsTracks;
                Object.keys(e).forEach((function (t) {
                    Ne(e[t]), delete e[t]
                })), this.nonNativeCaptionsTracks = {}
            }, a.onManifestLoading = function () {
                this.lastSn = -1, this.prevCC = -1, this.vttCCs = {
                    ccOffset: 0,
                    presentationOffset: 0,
                    0: {
                        start: 0,
                        prevCC: -1,
                        new: !1
                    }
                }, this._cleanTracks(), this.tracks = [], this.captionsTracks = {}, this.nonNativeCaptionsTracks = {}
            }, a._cleanTracks = function () {
                var e = this.media;
                if (e) {
                    var t = e.textTracks;
                    if (t)
                        for (var r = 0; r < t.length; r++) Ne(t[r])
                }
            }, a.onManifestLoaded = function (e) {
                var t = this;
                if (this.textTracks = [], this.unparsedVttFrags = this.unparsedVttFrags || [], this.initPTS = [], this.cea608Parser1 && this.cea608Parser2 && (this.cea608Parser1.reset(), this.cea608Parser2.reset()), this.config.enableWebVTT) {
                    var r = e.subtitles || [],
                        i = this.tracks && r && this.tracks.length === r.length;
                    if (this.tracks = e.subtitles || [], this.config.renderTextTracksNatively) {
                        var a = this.media ? this.media.textTracks : [];
                        this.tracks.forEach((function (e, r) {
                            var i;
                            if (r < a.length) {
                                for (var n = null, s = 0; s < a.length; s++)
                                    if (Ut(a[s], e)) {
                                        n = a[s];
                                        break
                                    } n && (i = n)
                            }
                            i || (i = t.createTextTrack("subtitles", e.name, e.lang)), e.default ? i.mode = t.hls.subtitleDisplay ? "showing" : "hidden" : i.mode = "disabled", t.textTracks.push(i)
                        }))
                    } else if (!i && this.tracks && this.tracks.length) {
                        var n = this.tracks.map((function (e) {
                            return {
                                label: e.name,
                                kind: e.type.toLowerCase(),
                                default: e.default,
                                subtitleTrack: e
                            }
                        }));
                        this.hls.trigger(d.a.NON_NATIVE_TEXT_TRACKS_FOUND, {
                            tracks: n
                        })
                    }
                }
                this.config.enableCEA708Captions && e.captions && e.captions.forEach((function (e) {
                    var r = /(?:CC|SERVICE)([1-4])/.exec(e.instreamId);
                    if (r) {
                        var i = "textTrack" + r[1],
                            a = t.captionsProperties[i];
                        a && (a.label = e.name, e.lang && (a.languageCode = e.lang), a.media = e)
                    }
                }))
            }, a.onFragLoaded = function (e) {
                var t = e.frag,
                    r = e.payload,
                    i = this.cea608Parser1,
                    a = this.cea608Parser2,
                    n = this.initPTS,
                    s = this.lastSn,
                    o = this.unparsedVttFrags;
                if ("main" === t.type) {
                    var u = t.sn;
                    t.sn !== s + 1 && i && a && (i.reset(), a.reset()), this.lastSn = u
                } else if ("subtitle" === t.type)
                    if (r.byteLength) {
                        if (!Object(l.a)(n[t.cc])) return o.push(e), void (n.length && this.hls.trigger(d.a.SUBTITLE_FRAG_PROCESSED, {
                            success: !1,
                            frag: t
                        }));
                        var c = t.decryptdata;
                        null != c && null != c.key && "AES-128" === c.method || this._parseVTTs(t, r)
                    } else this.hls.trigger(d.a.SUBTITLE_FRAG_PROCESSED, {
                        success: !1,
                        frag: t
                    })
            }, a._parseVTTs = function (e, t) {
                var r = this,
                    i = this.hls,
                    a = this.prevCC,
                    n = this.textTracks,
                    s = this.vttCCs;
                s[e.cc] || (s[e.cc] = {
                    start: e.start,
                    prevCC: a,
                    new: !0
                }, this.prevCC = e.cc), Mt.parse(t, this.initPTS[e.cc], s, e.cc, (function (t) {
                    if (r.config.renderTextTracksNatively) {
                        var a = n[e.level];
                        if ("disabled" === a.mode) return void i.trigger(d.a.SUBTITLE_FRAG_PROCESSED, {
                            success: !1,
                            frag: e
                        });
                        t.forEach((function (e) {
                            if (!a.cues.getCueById(e.id)) try {
                                if (a.addCue(e), !a.cues.getCueById(e.id)) throw new Error("addCue is failed for: " + e)
                            } catch (r) {
                                u.b.debug("Failed occurred on adding cues: " + r);
                                var t = new window.TextTrackCue(e.startTime, e.endTime, e.text);
                                t.id = e.id, a.addCue(t)
                            }
                        }))
                    } else {
                        var s = r.tracks[e.level].default ? "default" : "subtitles" + e.level;
                        i.trigger(d.a.CUES_PARSED, {
                            type: "subtitles",
                            cues: t,
                            track: s
                        })
                    }
                    i.trigger(d.a.SUBTITLE_FRAG_PROCESSED, {
                        success: !0,
                        frag: e
                    })
                }), (function (t) {
                    u.b.log("Failed to parse VTT cue: " + t), i.trigger(d.a.SUBTITLE_FRAG_PROCESSED, {
                        success: !1,
                        frag: e
                    })
                }))
            }, a.onFragDecrypted = function (e) {
                var t = e.frag,
                    r = e.payload;
                if ("subtitle" === t.type) {
                    if (!Object(l.a)(this.initPTS[t.cc])) return void this.unparsedVttFrags.push(e);
                    this._parseVTTs(t, r)
                }
            }, a.onFragParsingUserdata = function (e) {
                var t = this.cea608Parser1,
                    r = this.cea608Parser2;
                if (this.enabled && t && r)
                    for (var i = 0; i < e.samples.length; i++) {
                        var a = e.samples[i].bytes;
                        if (a) {
                            var n = this.extractCea608Data(a);
                            t.addData(e.samples[i].pts, n[0]), r.addData(e.samples[i].pts, n[1])
                        }
                    }
            }, a.extractCea608Data = function (e) {
                for (var t = 31 & e[0], r = 2, i = [
                    [],
                    []
                ], a = 0; a < t; a++) {
                    var n = e[r++],
                        s = 127 & e[r++],
                        o = 127 & e[r++],
                        l = 3 & n;
                    0 === s && 0 === o || 0 != (4 & n) && (0 !== l && 1 !== l || (i[l].push(s), i[l].push(o)))
                }
                return i
            }, i
        }(h);

        function Bt(e, t) {
            for (var r = 0; r < t.length; r++) {
                var i = t[r];
                i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), Object.defineProperty(e, i.key, i)
            }
        }

        function Gt(e) {
            for (var t = [], r = 0; r < e.length; r++) {
                var i = e[r];
                "subtitles" === i.kind && i.label && t.push(e[r])
            }
            return t
        }
        var Kt = function (e) {
            var t, r;

            function i(t) {
                var r;
                return (r = e.call(this, t, d.a.MEDIA_ATTACHED, d.a.MEDIA_DETACHING, d.a.MANIFEST_LOADED, d.a.SUBTITLE_TRACK_LOADED) || this).tracks = [], r.trackId = -1, r.media = null, r.stopped = !0, r.subtitleDisplay = !0, r.queuedDefaultTrack = null, r
            }
            r = e, (t = i).prototype = Object.create(r.prototype), t.prototype.constructor = t, t.__proto__ = r;
            var a, n, s, o = i.prototype;
            return o.destroy = function () {
                h.prototype.destroy.call(this)
            }, o.onMediaAttached = function (e) {
                var t = this;
                this.media = e.media, this.media && (Object(l.a)(this.queuedDefaultTrack) && (this.subtitleTrack = this.queuedDefaultTrack, this.queuedDefaultTrack = null), this.trackChangeListener = this._onTextTracksChanged.bind(this), this.useTextTrackPolling = !(this.media.textTracks && "onchange" in this.media.textTracks), this.useTextTrackPolling ? this.subtitlePollingInterval = setInterval((function () {
                    t.trackChangeListener()
                }), 500) : this.media.textTracks.addEventListener("change", this.trackChangeListener))
            }, o.onMediaDetaching = function () {
                this.media && (this.useTextTrackPolling ? clearInterval(this.subtitlePollingInterval) : this.media.textTracks.removeEventListener("change", this.trackChangeListener), Object(l.a)(this.subtitleTrack) && (this.queuedDefaultTrack = this.subtitleTrack), Gt(this.media.textTracks).forEach((function (e) {
                    Ne(e)
                })), this.subtitleTrack = -1, this.media = null)
            }, o.onManifestLoaded = function (e) {
                var t = this,
                    r = e.subtitles || [];
                this.tracks = r, this.hls.trigger(d.a.SUBTITLE_TRACKS_UPDATED, {
                    subtitleTracks: r
                }), r.forEach((function (e) {
                    e.default && (t.media ? t.subtitleTrack = e.id : t.queuedDefaultTrack = e.id)
                }))
            }, o.onSubtitleTrackLoaded = function (e) {
                var t = this,
                    r = e.id,
                    i = e.details,
                    a = this.trackId,
                    n = this.tracks,
                    s = n[a];
                if (r >= n.length || r !== a || !s || this.stopped) this._clearReloadTimer();
                else if (u.b.log("subtitle track " + r + " loaded"), i.live) {
                    var o = ae(s.details, i, e.stats.trequest);
                    u.b.log("Reloading live subtitle playlist in " + o + "ms"), this.timer = setTimeout((function () {
                        t._loadCurrentTrack()
                    }), o)
                } else this._clearReloadTimer()
            }, o.startLoad = function () {
                this.stopped = !1, this._loadCurrentTrack()
            }, o.stopLoad = function () {
                this.stopped = !0, this._clearReloadTimer()
            }, o._clearReloadTimer = function () {
                this.timer && (clearTimeout(this.timer), this.timer = null)
            }, o._loadCurrentTrack = function () {
                var e = this.trackId,
                    t = this.tracks,
                    r = this.hls,
                    i = t[e];
                e < 0 || !i || i.details && !i.details.live || (u.b.log("Loading subtitle track " + e), r.trigger(d.a.SUBTITLE_TRACK_LOADING, {
                    url: i.url,
                    id: e
                }))
            }, o._toggleTrackModes = function (e) {
                var t = this.media,
                    r = this.subtitleDisplay,
                    i = this.trackId;
                if (t) {
                    var a = Gt(t.textTracks);
                    if (-1 === e) [].slice.call(a).forEach((function (e) {
                        e.mode = "disabled"
                    }));
                    else {
                        var n = a[i];
                        n && (n.mode = "disabled")
                    }
                    var s = a[e];
                    s && (s.mode = r ? "showing" : "hidden")
                }
            }, o._setSubtitleTrackInternal = function (e) {
                var t = this.hls,
                    r = this.tracks;
                !Object(l.a)(e) || e < -1 || e >= r.length || (this.trackId = e, u.b.log("Switching to subtitle track " + e), t.trigger(d.a.SUBTITLE_TRACK_SWITCH, {
                    id: e
                }), this._loadCurrentTrack())
            }, o._onTextTracksChanged = function () {
                if (this.media && this.hls.config.renderTextTracksNatively) {
                    for (var e = -1, t = Gt(this.media.textTracks), r = 0; r < t.length; r++)
                        if ("hidden" === t[r].mode) e = r;
                        else if ("showing" === t[r].mode) {
                            e = r;
                            break
                        }
                    this.subtitleTrack = e
                }
            }, a = i, (n = [{
                key: "subtitleTracks",
                get: function () {
                    return this.tracks
                }
            }, {
                key: "subtitleTrack",
                get: function () {
                    return this.trackId
                },
                set: function (e) {
                    this.trackId !== e && (this._toggleTrackModes(e), this._setSubtitleTrackInternal(e))
                }
            }]) && Bt(a.prototype, n), s && Bt(a, s), i
        }(h),
            jt = r(7);
        var Ht, Vt = window.performance,
            Yt = function (e) {
                var t, r;

                function i(t, r) {
                    var i;
                    return (i = e.call(this, t, d.a.MEDIA_ATTACHED, d.a.MEDIA_DETACHING, d.a.ERROR, d.a.KEY_LOADED, d.a.FRAG_LOADED, d.a.SUBTITLE_TRACKS_UPDATED, d.a.SUBTITLE_TRACK_SWITCH, d.a.SUBTITLE_TRACK_LOADED, d.a.SUBTITLE_FRAG_PROCESSED, d.a.LEVEL_UPDATED) || this).fragmentTracker = r, i.config = t.config, i.state = pe, i.tracks = [], i.tracksBuffered = [], i.currentTrackId = -1, i.decrypter = new jt.a(t, t.config), i.lastAVStart = 0, i._onMediaSeeking = i.onMediaSeeking.bind(function (e) {
                        if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                        return e
                    }(i)), i
                }
                r = e, (t = i).prototype = Object.create(r.prototype), t.prototype.constructor = t, t.__proto__ = r;
                var a = i.prototype;
                return a.startLoad = function () {
                    this.stopLoad(), this.state = me;
                    var e = this.tracks[this.currentTrackId];
                    e && e.details && (this.setInterval(500), this.tick())
                }, a.onSubtitleFragProcessed = function (e) {
                    var t = e.frag,
                        r = e.success;
                    if (this.fragPrevious = t, this.state = me, r) {
                        var i = this.tracksBuffered[this.currentTrackId];
                        if (i) {
                            for (var a, n = t.start, s = 0; s < i.length; s++)
                                if (n >= i[s].start && n <= i[s].end) {
                                    a = i[s];
                                    break
                                } var o = t.start + t.duration;
                            a ? a.end = o : (a = {
                                start: n,
                                end: o
                            }, i.push(a))
                        }
                    }
                }, a.onMediaAttached = function (e) {
                    var t = e.media;
                    this.media = t, t.addEventListener("seeking", this._onMediaSeeking), this.state = me
                }, a.onMediaDetaching = function () {
                    var e = this;
                    this.media && (this.media.removeEventListener("seeking", this._onMediaSeeking), this.fragmentTracker.removeAllFragments(), this.currentTrackId = -1, this.tracks.forEach((function (t) {
                        e.tracksBuffered[t.id] = []
                    })), this.media = null, this.state = pe)
                }, a.onError = function (e) {
                    var t = e.frag;
                    t && "subtitle" === t.type && (this.fragCurrent && this.fragCurrent.loader && this.fragCurrent.loader.abort(), this.state = me)
                }, a.onSubtitleTracksUpdated = function (e) {
                    var t = this;
                    u.b.log("subtitle tracks updated"), this.tracksBuffered = [], this.tracks = e.subtitleTracks, this.tracks.forEach((function (e) {
                        t.tracksBuffered[e.id] = []
                    }))
                }, a.onSubtitleTrackSwitch = function (e) {
                    if (this.currentTrackId = e.id, this.tracks && this.tracks.length && -1 !== this.currentTrackId) {
                        var t = this.tracks[this.currentTrackId];
                        t && t.details && this.setInterval(500)
                    } else this.clearInterval()
                }, a.onSubtitleTrackLoaded = function (e) {
                    var t = e.id,
                        r = e.details,
                        i = this.currentTrackId,
                        a = this.tracks,
                        n = a[i];
                    t >= a.length || t !== i || !n || (r.live && function (e, t, r) {
                        void 0 === r && (r = 0);
                        var i = -1;
                        ie(e, t, (function (e, t, r) {
                            t.start = e.start, i = r
                        }));
                        var a = t.fragments;
                        if (i < 0) a.forEach((function (e) {
                            e.start += r
                        }));
                        else
                            for (var n = i + 1; n < a.length; n++) a[n].start = a[n - 1].start + a[n - 1].duration
                    }(n.details, r, this.lastAVStart), n.details = r, this.setInterval(500))
                }, a.onKeyLoaded = function () {
                    this.state === be && (this.state = me)
                }, a.onFragLoaded = function (e) {
                    var t = this.fragCurrent,
                        r = e.frag.decryptdata,
                        i = e.frag,
                        a = this.hls;
                    if (this.state === Te && t && "subtitle" === e.frag.type && t.sn === e.frag.sn && e.payload.byteLength > 0 && r && r.key && "AES-128" === r.method) {
                        var n = Vt.now();
                        this.decrypter.decrypt(e.payload, r.key.buffer, r.iv.buffer, (function (e) {
                            var t = Vt.now();
                            a.trigger(d.a.FRAG_DECRYPTED, {
                                frag: i,
                                payload: e,
                                stats: {
                                    tstart: n,
                                    tdecrypt: t
                                }
                            })
                        }))
                    }
                }, a.onLevelUpdated = function (e) {
                    var t = e.details.fragments;
                    this.lastAVStart = t.length ? t[0].start : 0
                }, a.doTick = function () {
                    if (this.media) switch (this.state) {
                        case me:
                            var e = this.config,
                                t = this.currentTrackId,
                                r = this.fragmentTracker,
                                i = this.media,
                                a = this.tracks;
                            if (!a || !a[t] || !a[t].details) break;
                            var n, s = e.maxBufferHole,
                                o = e.maxFragLookUpTolerance,
                                l = Math.min(e.maxBufferLength, e.maxMaxBufferLength),
                                c = H.bufferedInfo(this._getBuffered(), i.currentTime, s),
                                h = c.end,
                                f = c.len,
                                g = a[t].details,
                                p = g.fragments,
                                v = p.length,
                                m = p[v - 1].start + p[v - 1].duration;
                            if (f > l) return;
                            var y = this.fragPrevious;
                            h < m ? (y && g.hasProgramDateTime && (n = le(p, y.endProgramDateTime, o)), n || (n = de(y, p, h, o))) : n = p[v - 1], n && n.encrypted ? (u.b.log("Loading key for " + n.sn), this.state = be, this.hls.trigger(d.a.KEY_LOADING, {
                                frag: n
                            })) : n && r.getState(n) === U && (this.fragCurrent = n, this.state = Te, this.hls.trigger(d.a.FRAG_LOADING, {
                                frag: n
                            }))
                    } else this.state = me
                }, a.stopLoad = function () {
                    this.lastAVStart = 0, this.fragPrevious = null, e.prototype.stopLoad.call(this)
                }, a._getBuffered = function () {
                    return this.tracksBuffered[this.currentTrackId] || []
                }, a.onMediaSeeking = function () {
                    if (this.fragCurrent) {
                        var e = this.media ? this.media.currentTime : 0,
                            t = this.config.maxFragLookUpTolerance,
                            r = this.fragCurrent.start - t,
                            i = this.fragCurrent.start + this.fragCurrent.duration + t;
                        (e < r || e > i) && (this.fragCurrent.loader && this.fragCurrent.loader.abort(), this.fragmentTracker.removeFragment(this.fragCurrent), this.fragCurrent = null, this.fragPrevious = null, this.state = me, this.tick())
                    }
                }, i
            }(Oe);
        ! function (e) {
            e.WIDEVINE = "com.widevine.alpha", e.PLAYREADY = "com.microsoft.playready"
        }(Ht || (Ht = {}));
        var Wt = "undefined" != typeof window && window.navigator && window.navigator.requestMediaKeySystemAccess ? window.navigator.requestMediaKeySystemAccess.bind(window.navigator) : null;

        function qt(e, t) {
            for (var r = 0; r < t.length; r++) {
                var i = t[r];
                i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), Object.defineProperty(e, i.key, i)
            }
        }
        var Xt = function (e) {
            var t, r;

            function i(t) {
                var r;
                return (r = e.call(this, t, d.a.MEDIA_ATTACHED, d.a.MEDIA_DETACHED, d.a.MANIFEST_PARSED) || this)._widevineLicenseUrl = void 0, r._licenseXhrSetup = void 0, r._emeEnabled = void 0, r._requestMediaKeySystemAccess = void 0, r._drmSystemOptions = void 0, r._config = void 0, r._mediaKeysList = [], r._media = null, r._hasSetMediaKeys = !1, r._requestLicenseFailureCount = 0, r.mediaKeysPromise = null, r._onMediaEncrypted = function (e) {
                    if (u.b.log('Media is encrypted using "' + e.initDataType + '" init data type'), !r.mediaKeysPromise) return u.b.error("Fatal: Media is encrypted but no CDM access or no keys have been requested"), void r.hls.trigger(d.a.ERROR, {
                        type: o.b.KEY_SYSTEM_ERROR,
                        details: o.a.KEY_SYSTEM_NO_KEYS,
                        fatal: !0
                    });
                    var t = function (t) {
                        r._media && (r._attemptSetMediaKeys(t), r._generateRequestWithPreferredKeySession(e.initDataType, e.initData))
                    };
                    r.mediaKeysPromise.then(t).catch(t)
                }, r._config = t.config, r._widevineLicenseUrl = r._config.widevineLicenseUrl, r._licenseXhrSetup = r._config.licenseXhrSetup, r._emeEnabled = r._config.emeEnabled, r._requestMediaKeySystemAccess = r._config.requestMediaKeySystemAccessFunc, r._drmSystemOptions = t.config.drmSystemOptions, r
            }
            r = e, (t = i).prototype = Object.create(r.prototype), t.prototype.constructor = t, t.__proto__ = r;
            var a, n, s, l = i.prototype;
            return l.getLicenseServerUrl = function (e) {
                switch (e) {
                    case Ht.WIDEVINE:
                        if (!this._widevineLicenseUrl) break;
                        return this._widevineLicenseUrl
                }
                throw new Error('no license server URL configured for key-system "' + e + '"')
            }, l._attemptKeySystemAccess = function (e, t, r) {
                var i = this,
                    a = function (e, t, r, i) {
                        switch (e) {
                            case Ht.WIDEVINE:
                                return function (e, t, r) {
                                    var i = {
                                        audioCapabilities: [],
                                        videoCapabilities: []
                                    };
                                    return e.forEach((function (e) {
                                        i.audioCapabilities.push({
                                            contentType: 'audio/mp4; codecs="' + e + '"',
                                            robustness: r.audioRobustness || ""
                                        })
                                    })), t.forEach((function (e) {
                                        i.videoCapabilities.push({
                                            contentType: 'video/mp4; codecs="' + e + '"',
                                            robustness: r.videoRobustness || ""
                                        })
                                    })), [i]
                                }(t, r, i);
                            default:
                                throw new Error("Unknown key-system: " + e)
                        }
                    }(e, t, r, this._drmSystemOptions);
                u.b.log("Requesting encrypted media key-system access");
                var n = this.requestMediaKeySystemAccess(e, a);
                this.mediaKeysPromise = n.then((function (t) {
                    return i._onMediaKeySystemAccessObtained(e, t)
                })), n.catch((function (t) {
                    u.b.error('Failed to obtain key-system "' + e + '" access:', t)
                }))
            }, l._onMediaKeySystemAccessObtained = function (e, t) {
                var r = this;
                u.b.log('Access for key-system "' + e + '" obtained');
                var i = {
                    mediaKeysSessionInitialized: !1,
                    mediaKeySystemAccess: t,
                    mediaKeySystemDomain: e
                };
                this._mediaKeysList.push(i);
                var a = Promise.resolve().then((function () {
                    return t.createMediaKeys()
                })).then((function (t) {
                    return i.mediaKeys = t, u.b.log('Media-keys created for key-system "' + e + '"'), r._onMediaKeysCreated(), t
                }));
                return a.catch((function (e) {
                    u.b.error("Failed to create media-keys:", e)
                })), a
            }, l._onMediaKeysCreated = function () {
                var e = this;
                this._mediaKeysList.forEach((function (t) {
                    t.mediaKeysSession || (t.mediaKeysSession = t.mediaKeys.createSession(), e._onNewMediaKeySession(t.mediaKeysSession))
                }))
            }, l._onNewMediaKeySession = function (e) {
                var t = this;
                u.b.log("New key-system session " + e.sessionId), e.addEventListener("message", (function (r) {
                    t._onKeySessionMessage(e, r.message)
                }), !1)
            }, l._onKeySessionMessage = function (e, t) {
                u.b.log("Got EME message event, creating license request"), this._requestLicense(t, (function (t) {
                    u.b.log("Received license data (length: " + (t ? t.byteLength : t) + "), updating key-session"), e.update(t)
                }))
            }, l._attemptSetMediaKeys = function (e) {
                if (!this._media) throw new Error("Attempted to set mediaKeys without first attaching a media element");
                if (!this._hasSetMediaKeys) {
                    var t = this._mediaKeysList[0];
                    if (!t || !t.mediaKeys) return u.b.error("Fatal: Media is encrypted but no CDM access or no keys have been obtained yet"), void this.hls.trigger(d.a.ERROR, {
                        type: o.b.KEY_SYSTEM_ERROR,
                        details: o.a.KEY_SYSTEM_NO_KEYS,
                        fatal: !0
                    });
                    u.b.log("Setting keys for encrypted media"), this._media.setMediaKeys(t.mediaKeys), this._hasSetMediaKeys = !0
                }
            }, l._generateRequestWithPreferredKeySession = function (e, t) {
                var r = this,
                    i = this._mediaKeysList[0];
                if (!i) return u.b.error("Fatal: Media is encrypted but not any key-system access has been obtained yet"), void this.hls.trigger(d.a.ERROR, {
                    type: o.b.KEY_SYSTEM_ERROR,
                    details: o.a.KEY_SYSTEM_NO_ACCESS,
                    fatal: !0
                });
                if (i.mediaKeysSessionInitialized) u.b.warn("Key-Session already initialized but requested again");
                else {
                    var a = i.mediaKeysSession;
                    if (!a) return u.b.error("Fatal: Media is encrypted but no key-session existing"), void this.hls.trigger(d.a.ERROR, {
                        type: o.b.KEY_SYSTEM_ERROR,
                        details: o.a.KEY_SYSTEM_NO_SESSION,
                        fatal: !0
                    });
                    if (!t) return u.b.warn("Fatal: initData required for generating a key session is null"), void this.hls.trigger(d.a.ERROR, {
                        type: o.b.KEY_SYSTEM_ERROR,
                        details: o.a.KEY_SYSTEM_NO_INIT_DATA,
                        fatal: !0
                    });
                    u.b.log('Generating key-session request for "' + e + '" init data type'), i.mediaKeysSessionInitialized = !0, a.generateRequest(e, t).then((function () {
                        u.b.debug("Key-session generation succeeded")
                    })).catch((function (e) {
                        u.b.error("Error generating key-session request:", e), r.hls.trigger(d.a.ERROR, {
                            type: o.b.KEY_SYSTEM_ERROR,
                            details: o.a.KEY_SYSTEM_NO_SESSION,
                            fatal: !1
                        })
                    }))
                }
            }, l._createLicenseXhr = function (e, t, r) {
                var i = new XMLHttpRequest,
                    a = this._licenseXhrSetup;
                try {
                    if (a) try {
                        a(i, e)
                    } catch (t) {
                        i.open("POST", e, !0), a(i, e)
                    }
                    i.readyState || i.open("POST", e, !0)
                } catch (e) {
                    throw new Error("issue setting up KeySystem license XHR " + e)
                }
                return i.responseType = "arraybuffer", i.onreadystatechange = this._onLicenseRequestReadyStageChange.bind(this, i, e, t, r), i
            }, l._onLicenseRequestReadyStageChange = function (e, t, r, i) {
                switch (e.readyState) {
                    case 4:
                        if (200 === e.status) this._requestLicenseFailureCount = 0, u.b.log("License request succeeded"), "arraybuffer" !== e.responseType && u.b.warn("xhr response type was not set to the expected arraybuffer for license request"), i(e.response);
                        else {
                            if (u.b.error("License Request XHR failed (" + t + "). Status: " + e.status + " (" + e.statusText + ")"), this._requestLicenseFailureCount++, this._requestLicenseFailureCount > 3) return void this.hls.trigger(d.a.ERROR, {
                                type: o.b.KEY_SYSTEM_ERROR,
                                details: o.a.KEY_SYSTEM_LICENSE_REQUEST_FAILED,
                                fatal: !0
                            });
                            var a = 3 - this._requestLicenseFailureCount + 1;
                            u.b.warn("Retrying license request, " + a + " attempts left"), this._requestLicense(r, i)
                        }
                }
            }, l._generateLicenseRequestChallenge = function (e, t) {
                switch (e.mediaKeySystemDomain) {
                    case Ht.WIDEVINE:
                        return t
                }
                throw new Error("unsupported key-system: " + e.mediaKeySystemDomain)
            }, l._requestLicense = function (e, t) {
                u.b.log("Requesting content license for key-system");
                var r = this._mediaKeysList[0];
                if (!r) return u.b.error("Fatal error: Media is encrypted but no key-system access has been obtained yet"), void this.hls.trigger(d.a.ERROR, {
                    type: o.b.KEY_SYSTEM_ERROR,
                    details: o.a.KEY_SYSTEM_NO_ACCESS,
                    fatal: !0
                });
                try {
                    var i = this.getLicenseServerUrl(r.mediaKeySystemDomain),
                        a = this._createLicenseXhr(i, e, t);
                    u.b.log("Sending license request to URL: " + i);
                    var n = this._generateLicenseRequestChallenge(r, e);
                    a.send(n)
                } catch (e) {
                    u.b.error("Failure requesting DRM license: " + e), this.hls.trigger(d.a.ERROR, {
                        type: o.b.KEY_SYSTEM_ERROR,
                        details: o.a.KEY_SYSTEM_LICENSE_REQUEST_FAILED,
                        fatal: !0
                    })
                }
            }, l.onMediaAttached = function (e) {
                if (this._emeEnabled) {
                    var t = e.media;
                    this._media = t, t.addEventListener("encrypted", this._onMediaEncrypted)
                }
            }, l.onMediaDetached = function () {
                var e = this._media,
                    t = this._mediaKeysList;
                e && (e.removeEventListener("encrypted", this._onMediaEncrypted), this._media = null, this._mediaKeysList = [], Promise.all(t.map((function (e) {
                    if (e.mediaKeysSession) return e.mediaKeysSession.close().catch((function () { }))
                }))).then((function () {
                    return e.setMediaKeys(null)
                })).catch((function () { })))
            }, l.onManifestParsed = function (e) {
                if (this._emeEnabled) {
                    var t = e.levels.map((function (e) {
                        return e.audioCodec
                    })),
                        r = e.levels.map((function (e) {
                            return e.videoCodec
                        }));
                    this._attemptKeySystemAccess(Ht.WIDEVINE, t, r)
                }
            }, a = i, (n = [{
                key: "requestMediaKeySystemAccess",
                get: function () {
                    if (!this._requestMediaKeySystemAccess) throw new Error("No requestMediaKeySystemAccess function configured");
                    return this._requestMediaKeySystemAccess
                }
            }]) && qt(a.prototype, n), s && qt(a, s), i
        }(h);

        function zt(e, t) {
            var r = Object.keys(e);
            if (Object.getOwnPropertySymbols) {
                var i = Object.getOwnPropertySymbols(e);
                t && (i = i.filter((function (t) {
                    return Object.getOwnPropertyDescriptor(e, t).enumerable
                }))), r.push.apply(r, i)
            }
            return r
        }

        function Qt(e) {
            for (var t = 1; t < arguments.length; t++) {
                var r = null != arguments[t] ? arguments[t] : {};
                t % 2 ? zt(Object(r), !0).forEach((function (t) {
                    $t(e, t, r[t])
                })) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(r)) : zt(Object(r)).forEach((function (t) {
                    Object.defineProperty(e, t, Object.getOwnPropertyDescriptor(r, t))
                }))
            }
            return e
        }

        function $t(e, t, r) {
            return t in e ? Object.defineProperty(e, t, {
                value: r,
                enumerable: !0,
                configurable: !0,
                writable: !0
            }) : e[t] = r, e
        }
        var Jt = Qt(Qt({
            autoStartLoad: !0,
            startPosition: -1,
            defaultAudioCodec: void 0,
            debug: !1,
            capLevelOnFPSDrop: !1,
            capLevelToPlayerSize: !1,
            initialLiveManifestSize: 1,
            maxBufferLength: 30,
            maxBufferSize: 6e7,
            maxBufferHole: .5,
            lowBufferWatchdogPeriod: .5,
            highBufferWatchdogPeriod: 3,
            nudgeOffset: .1,
            nudgeMaxRetry: 3,
            maxFragLookUpTolerance: .25,
            liveSyncDurationCount: 3,
            liveMaxLatencyDurationCount: 1 / 0,
            liveSyncDuration: void 0,
            liveMaxLatencyDuration: void 0,
            liveDurationInfinity: !1,
            liveBackBufferLength: 1 / 0,
            maxMaxBufferLength: 600,
            enableWorker: !0,
            enableSoftwareAES: !0,
            manifestLoadingTimeOut: 1e4,
            manifestLoadingMaxRetry: 1,
            manifestLoadingRetryDelay: 1e3,
            manifestLoadingMaxRetryTimeout: 64e3,
            startLevel: void 0,
            levelLoadingTimeOut: 1e4,
            levelLoadingMaxRetry: 4,
            levelLoadingRetryDelay: 1e3,
            levelLoadingMaxRetryTimeout: 64e3,
            fragLoadingTimeOut: 2e4,
            fragLoadingMaxRetry: 6,
            fragLoadingRetryDelay: 1e3,
            fragLoadingMaxRetryTimeout: 64e3,
            startFragPrefetch: !1,
            fpsDroppedMonitoringPeriod: 5e3,
            fpsDroppedMonitoringThreshold: .2,
            appendErrorMaxRetry: 3,
            loader: $e,
            fLoader: void 0,
            pLoader: void 0,
            xhrSetup: void 0,
            licenseXhrSetup: void 0,
            abrController: Ve,
            bufferController: We,
            capLevelController: Xe,
            fpsController: Qe,
            stretchShortVideoTrack: !1,
            maxAudioFramesDrift: 1,
            forceKeyFrameOnDiscontinuity: !0,
            abrEwmaFastLive: 3,
            abrEwmaSlowLive: 9,
            abrEwmaFastVoD: 3,
            abrEwmaSlowVoD: 9,
            abrEwmaDefaultEstimate: 5e5,
            abrBandWidthFactor: .95,
            abrBandWidthUpFactor: .7,
            abrMaxWithRealBitrate: !1,
            maxStarvationDelay: 4,
            maxLoadingDelay: 4,
            minAutoBitrate: 0,
            emeEnabled: !1,
            widevineLicenseUrl: void 0,
            drmSystemOptions: {},
            requestMediaKeySystemAccessFunc: Wt,
            testBandwidth: !0
        }, {
            cueHandler: i,
            enableCEA708Captions: !0,
            enableWebVTT: !0,
            captionsTextTrack1Label: "English",
            captionsTextTrack1LanguageCode: "en",
            captionsTextTrack2Label: "Spanish",
            captionsTextTrack2LanguageCode: "es",
            captionsTextTrack3Label: "Unknown CC",
            captionsTextTrack3LanguageCode: "",
            captionsTextTrack4Label: "Unknown CC",
            captionsTextTrack4LanguageCode: "",
            renderTextTracksNatively: !0
        }), {}, {
            subtitleStreamController: Yt,
            subtitleTrackController: Kt,
            timelineController: Nt,
            audioStreamController: rt,
            audioTrackController: Ze,
            emeController: Xt
        });

        function Zt(e, t) {
            var r = Object.keys(e);
            if (Object.getOwnPropertySymbols) {
                var i = Object.getOwnPropertySymbols(e);
                t && (i = i.filter((function (t) {
                    return Object.getOwnPropertyDescriptor(e, t).enumerable
                }))), r.push.apply(r, i)
            }
            return r
        }

        function er(e) {
            for (var t = 1; t < arguments.length; t++) {
                var r = null != arguments[t] ? arguments[t] : {};
                t % 2 ? Zt(Object(r), !0).forEach((function (t) {
                    tr(e, t, r[t])
                })) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(r)) : Zt(Object(r)).forEach((function (t) {
                    Object.defineProperty(e, t, Object.getOwnPropertyDescriptor(r, t))
                }))
            }
            return e
        }

        function tr(e, t, r) {
            return t in e ? Object.defineProperty(e, t, {
                value: r,
                enumerable: !0,
                configurable: !0,
                writable: !0
            }) : e[t] = r, e
        }

        function rr(e) {
            if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
            return e
        }

        function ir(e, t) {
            for (var r = 0; r < t.length; r++) {
                var i = t[r];
                i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), Object.defineProperty(e, i.key, i)
            }
        }

        function ar(e, t, r) {
            return t && ir(e.prototype, t), r && ir(e, r), e
        }
        var nr = function (e) {
            var t, r;

            function i(t) {
                var r;
                void 0 === t && (t = {}), (r = e.call(this) || this).config = void 0, r._autoLevelCapping = void 0, r.abrController = void 0, r.capLevelController = void 0, r.levelController = void 0, r.streamController = void 0, r.networkControllers = void 0, r.audioTrackController = void 0, r.subtitleTrackController = void 0, r.emeController = void 0, r.coreComponents = void 0, r.media = null, r.url = null;
                var a = i.DefaultConfig;
                if ((t.liveSyncDurationCount || t.liveMaxLatencyDurationCount) && (t.liveSyncDuration || t.liveMaxLatencyDuration)) throw new Error("Illegal hls.js config: don't mix up liveSyncDurationCount/liveMaxLatencyDurationCount and liveSyncDuration/liveMaxLatencyDuration");
                r.config = er(er({}, a), t);
                var n = rr(r).config;
                if (void 0 !== n.liveMaxLatencyDurationCount && n.liveMaxLatencyDurationCount <= n.liveSyncDurationCount) throw new Error('Illegal hls.js config: "liveMaxLatencyDurationCount" must be gt "liveSyncDurationCount"');
                if (void 0 !== n.liveMaxLatencyDuration && (void 0 === n.liveSyncDuration || n.liveMaxLatencyDuration <= n.liveSyncDuration)) throw new Error('Illegal hls.js config: "liveMaxLatencyDuration" must be gt "liveSyncDuration"');
                Object(u.a)(n.debug), r._autoLevelCapping = -1;
                var s = r.abrController = new n.abrController(rr(r)),
                    o = new n.bufferController(rr(r)),
                    l = r.capLevelController = new n.capLevelController(rr(r)),
                    d = new n.fpsController(rr(r)),
                    c = new x(rr(r)),
                    h = new M(rr(r)),
                    f = new F(rr(r)),
                    g = new Be(rr(r)),
                    p = r.levelController = new Me(rr(r)),
                    v = new K(rr(r)),
                    m = [p, r.streamController = new Pe(rr(r), v)],
                    y = n.audioStreamController;
                y && m.push(new y(rr(r), v)), r.networkControllers = m;
                var b = [c, h, f, s, o, l, d, g, v];
                if (y = n.audioTrackController) {
                    var T = new y(rr(r));
                    r.audioTrackController = T, b.push(T)
                }
                if (y = n.subtitleTrackController) {
                    var E = new y(rr(r));
                    r.subtitleTrackController = E, m.push(E)
                }
                if (y = n.emeController) {
                    var S = new y(rr(r));
                    r.emeController = S, b.push(S)
                }
                return (y = n.subtitleStreamController) && m.push(new y(rr(r), v)), (y = n.timelineController) && b.push(new y(rr(r))), r.coreComponents = b, r
            }
            r = e, (t = i).prototype = Object.create(r.prototype), t.prototype.constructor = t, t.__proto__ = r, i.isSupported = function () {
                return function () {
                    var e = q();
                    if (!e) return !1;
                    var t = self.SourceBuffer || self.WebKitSourceBuffer,
                        r = e && "function" == typeof e.isTypeSupported && e.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"'),
                        i = !t || t.prototype && "function" == typeof t.prototype.appendBuffer && "function" == typeof t.prototype.remove;
                    return !!r && !!i
                }()
            }, ar(i, null, [{
                key: "version",
                get: function () {
                    return "0.14.17"
                }
            }, {
                key: "Events",
                get: function () {
                    return d.a
                }
            }, {
                key: "ErrorTypes",
                get: function () {
                    return o.b
                }
            }, {
                key: "ErrorDetails",
                get: function () {
                    return o.a
                }
            }, {
                key: "DefaultConfig",
                get: function () {
                    return i.defaultConfig ? i.defaultConfig : Jt
                },
                set: function (e) {
                    i.defaultConfig = e
                }
            }]);
            var a = i.prototype;
            return a.destroy = function () {
                u.b.log("destroy"), this.trigger(d.a.DESTROYING), this.detachMedia(), this.coreComponents.concat(this.networkControllers).forEach((function (e) {
                    e.destroy()
                })), this.url = null, this.removeAllListeners(), this._autoLevelCapping = -1
            }, a.attachMedia = function (e) {
                u.b.log("attachMedia"), this.media = e, this.trigger(d.a.MEDIA_ATTACHING, {
                    media: e
                })
            }, a.detachMedia = function () {
                u.b.log("detachMedia"), this.trigger(d.a.MEDIA_DETACHING), this.media = null
            }, a.loadSource = function (e) {
                e = s.buildAbsoluteURL(window.location.href, e, {
                    alwaysNormalize: !0
                }), u.b.log("loadSource:" + e), this.url = e, this.trigger(d.a.MANIFEST_LOADING, {
                    url: e
                })
            }, a.startLoad = function (e) {
                void 0 === e && (e = -1), u.b.log("startLoad(" + e + ")"), this.networkControllers.forEach((function (t) {
                    t.startLoad(e)
                }))
            }, a.stopLoad = function () {
                u.b.log("stopLoad"), this.networkControllers.forEach((function (e) {
                    e.stopLoad()
                }))
            }, a.swapAudioCodec = function () {
                u.b.log("swapAudioCodec"), this.streamController.swapAudioCodec()
            }, a.recoverMediaError = function () {
                u.b.log("recoverMediaError");
                var e = this.media;
                this.detachMedia(), e && this.attachMedia(e)
            }, a.removeLevel = function (e, t) {
                void 0 === t && (t = 0), this.levelController.removeLevel(e, t)
            }, ar(i, [{
                key: "levels",
                get: function () {
                    return this.levelController.levels
                }
            }, {
                key: "currentLevel",
                get: function () {
                    return this.streamController.currentLevel
                },
                set: function (e) {
                    u.b.log("set currentLevel:" + e), this.loadLevel = e, this.streamController.immediateLevelSwitch()
                }
            }, {
                key: "nextLevel",
                get: function () {
                    return this.streamController.nextLevel
                },
                set: function (e) {
                    u.b.log("set nextLevel:" + e), this.levelController.manualLevel = e, this.streamController.nextLevelSwitch()
                }
            }, {
                key: "loadLevel",
                get: function () {
                    return this.levelController.level
                },
                set: function (e) {
                    u.b.log("set loadLevel:" + e), this.levelController.manualLevel = e
                }
            }, {
                key: "nextLoadLevel",
                get: function () {
                    return this.levelController.nextLoadLevel
                },
                set: function (e) {
                    this.levelController.nextLoadLevel = e
                }
            }, {
                key: "firstLevel",
                get: function () {
                    return Math.max(this.levelController.firstLevel, this.minAutoLevel)
                },
                set: function (e) {
                    u.b.log("set firstLevel:" + e), this.levelController.firstLevel = e
                }
            }, {
                key: "startLevel",
                get: function () {
                    return this.levelController.startLevel
                },
                set: function (e) {
                    u.b.log("set startLevel:" + e), -1 !== e && (e = Math.max(e, this.minAutoLevel)), this.levelController.startLevel = e
                }
            }, {
                key: "capLevelToPlayerSize",
                set: function (e) {
                    var t = !!e;
                    t !== this.config.capLevelToPlayerSize && (t ? this.capLevelController.startCapping() : (this.capLevelController.stopCapping(), this.autoLevelCapping = -1, this.streamController.nextLevelSwitch()), this.config.capLevelToPlayerSize = t)
                }
            }, {
                key: "autoLevelCapping",
                get: function () {
                    return this._autoLevelCapping
                },
                set: function (e) {
                    u.b.log("set autoLevelCapping:" + e), this._autoLevelCapping = e
                }
            }, {
                key: "bandwidthEstimate",
                get: function () {
                    var e = this.abrController._bwEstimator;
                    return e ? e.getEstimate() : NaN
                }
            }, {
                key: "autoLevelEnabled",
                get: function () {
                    return -1 === this.levelController.manualLevel
                }
            }, {
                key: "manualLevel",
                get: function () {
                    return this.levelController.manualLevel
                }
            }, {
                key: "minAutoLevel",
                get: function () {
                    for (var e = this.levels, t = this.config.minAutoBitrate, r = e ? e.length : 0, i = 0; i < r; i++) {
                        if ((e[i].realBitrate ? Math.max(e[i].realBitrate, e[i].bitrate) : e[i].bitrate) > t) return i
                    }
                    return 0
                }
            }, {
                key: "maxAutoLevel",
                get: function () {
                    var e = this.levels,
                        t = this.autoLevelCapping;
                    return -1 === t && e && e.length ? e.length - 1 : t
                }
            }, {
                key: "nextAutoLevel",
                get: function () {
                    return Math.min(Math.max(this.abrController.nextAutoLevel, this.minAutoLevel), this.maxAutoLevel)
                },
                set: function (e) {
                    this.abrController.nextAutoLevel = Math.max(this.minAutoLevel, e)
                }
            }, {
                key: "audioTracks",
                get: function () {
                    var e = this.audioTrackController;
                    return e ? e.audioTracks : []
                }
            }, {
                key: "audioTrack",
                get: function () {
                    var e = this.audioTrackController;
                    return e ? e.audioTrack : -1
                },
                set: function (e) {
                    var t = this.audioTrackController;
                    t && (t.audioTrack = e)
                }
            }, {
                key: "liveSyncPosition",
                get: function () {
                    return this.streamController.liveSyncPosition
                }
            }, {
                key: "subtitleTracks",
                get: function () {
                    var e = this.subtitleTrackController;
                    return e ? e.subtitleTracks : []
                }
            }, {
                key: "subtitleTrack",
                get: function () {
                    var e = this.subtitleTrackController;
                    return e ? e.subtitleTrack : -1
                },
                set: function (e) {
                    var t = this.subtitleTrackController;
                    t && (t.subtitleTrack = e)
                }
            }, {
                key: "subtitleDisplay",
                get: function () {
                    var e = this.subtitleTrackController;
                    return !!e && e.subtitleDisplay
                },
                set: function (e) {
                    var t = this.subtitleTrackController;
                    t && (t.subtitleDisplay = e)
                }
            }]), i
        }(z);
        nr.defaultConfig = void 0
    }]).default
}));

////////////

! function (t, e) {
    "object" == typeof exports && "object" == typeof module ? module.exports = e() : "function" == typeof define && define.amd ? define([], e) : "object" == typeof exports ? exports.Clappr = e() : t.Clappr = e()
}(window, function () {
    return e = {}, f.m = d = [function (t, e, r) {
        "use strict";
        e.__esModule = !0, e.default = function (t, e) {
            if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
        }
    }, function (t, e, r) {
        "use strict";
        e.__esModule = !0;
        var i, n = r(39),
            a = (i = n) && i.__esModule ? i : {
                default: i
            };
        e.default = function (t, e) {
            if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
            return !e || "object" !== (void 0 === e ? "undefined" : (0, a.default)(e)) && "function" != typeof e ? t : e
        }
    }, function (t, e, r) {
        "use strict";
        e.__esModule = !0;
        var i = o(r(133)),
            n = o(r(76)),
            a = o(r(39));

        function o(t) {
            return t && t.__esModule ? t : {
                default: t
            }
        }
        e.default = function (t, e) {
            if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + (void 0 === e ? "undefined" : (0, a.default)(e)));
            t.prototype = (0, n.default)(e && e.prototype, {
                constructor: {
                    value: t,
                    enumerable: !1,
                    writable: !0,
                    configurable: !0
                }
            }), e && (i.default ? (0, i.default)(t, e) : t.__proto__ = e)
        }
    }, function (t, e, r) {
        "use strict";
        e.__esModule = !0;
        var i, n = r(75),
            a = (i = n) && i.__esModule ? i : {
                default: i
            };

        function o(t, e) {
            for (var r = 0; r < e.length; r++) {
                var i = e[r];
                i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), (0, a.default)(t, i.key, i)
            }
        }
        e.default = function (t, e, r) {
            return e && o(t.prototype, e), r && o(t, r), t
        }
    }, function (t, e, r) {
        "use strict";
        Object.defineProperty(e, "__esModule", {
            value: !0
        });
        var c = a(r(53)),
            i = a(r(0)),
            l = a(r(39)),
            f = a(r(29)),
            n = r(5);

        function a(t) {
            return t && t.__esModule ? t : {
                default: t
            }
        }

        function h(t, e, r, i) {
            if (!r) return !0;
            if ("object" === (void 0 === r ? "undefined" : (0, l.default)(r))) {
                for (var n in r) t[e].apply(t, [n, r[n]].concat(i));
                return !1
            }
            if (u.test(r)) {
                for (var a = r.split(u), o = 0, s = a.length; o < s; o++) t[e].apply(t, [a[o]].concat(i));
                return !1
            }
            return !0
        }

        function o(t, r, i, n) {
            var a = void 0,
                o = -1,
                s = t.length,
                l = r[0],
                u = r[1],
                d = r[2];
            ! function e() {
                try {
                    switch (r.length) {
                        case 0:
                            for (; ++o < s;)(a = t[o]).callback.call(a.ctx);
                            return;
                        case 1:
                            for (; ++o < s;)(a = t[o]).callback.call(a.ctx, l);
                            return;
                        case 2:
                            for (; ++o < s;)(a = t[o]).callback.call(a.ctx, l, u);
                            return;
                        case 3:
                            for (; ++o < s;)(a = t[o]).callback.call(a.ctx, l, u, d);
                            return;
                        default:
                            for (; ++o < s;)(a = t[o]).callback.apply(a.ctx, r);
                            return
                    }
                } catch (t) {
                    f.default.error.apply(f.default, [i, "error on event", n, "trigger", "-", t]), e()
                }
            }()
        }
        var s = Array.prototype.slice,
            u = /\s+/,
            d = (p.prototype.on = function (t, e, r) {
                return h(this, "on", t, [e, r]) && e && (this._events || (this._events = {}), (this._events[t] || (this._events[t] = [])).push({
                    callback: e,
                    context: r,
                    ctx: r || this
                })), this
            }, p.prototype.once = function (t, e, r) {
                var i = this,
                    n = void 0;
                return h(this, "once", t, [e, r]) && e ? (n = function () {
                    i.off(t, n), e.apply(this, arguments)
                }, this.on(t, n, r)) : this
            }, p.prototype.off = function (t, e, r) {
                var i, n, a = void 0,
                    o = void 0,
                    s = void 0,
                    l = void 0,
                    u = void 0,
                    d = void 0;
                if (!this._events || !h(this, "off", t, [e, r])) return this;
                if (!t && !e && !r) return this._events = void 0, this;
                for (l = 0, n = (i = t ? [t] : (0, c.default)(this._events)).length; l < n; l++)
                    if (t = i[l], s = this._events[t]) {
                        if (this._events[t] = a = [], e || r)
                            for (u = 0, d = s.length; u < d; u++) o = s[u], (e && e !== o.callback && e !== o.callback._callback || r && r !== o.context) && a.push(o);
                        a.length || delete this._events[t]
                    } return this
            }, p.prototype.trigger = function (t) {
                var e = this.name || this.constructor.name;
                if (f.default.debug.apply(f.default, [e].concat(Array.prototype.slice.call(arguments))), !this._events) return this;
                var r = s.call(arguments, 1);
                if (!h(this, "trigger", t, r)) return this;
                var i = this._events[t],
                    n = this._events.all;
                return i && o(i, r, e, t), n && o(n, arguments, e, t), this
            }, p.prototype.stopListening = function (t, e, r) {
                var i = this._listeningTo;
                if (!i) return this;
                var n = !e && !r;
                for (var a in r || "object" !== (void 0 === e ? "undefined" : (0, l.default)(e)) || (r = this), t && ((i = {})[t._listenId] = t), i) (t = i[a]).off(e, r, this), !n && 0 !== (0, c.default)(t._events).length || delete this._listeningTo[a];
                return this
            }, p.register = function (t) {
                p.Custom || (p.Custom = {});
                var e = "string" == typeof t && t.toUpperCase().trim();
                e && !p.Custom[e] ? p.Custom[e] = e.toLowerCase().split("_").map(function (t, e) {
                    return 0 === e ? t : t = t[0].toUpperCase() + t.slice(1)
                }).join("") : f.default.error("Events", "Error when register event: " + t)
            }, p.listAvailableCustomEvents = function () {
                return p.Custom || (p.Custom = {}), (0, c.default)(p.Custom).filter(function (t) {
                    return "string" == typeof p.Custom[t]
                })
            }, p);

        function p() {
            (0, i.default)(this, p)
        }
        e.default = d;
        var g = {
            listenTo: "on",
            listenToOnce: "once"
        };
        (0, c.default)(g).forEach(function (i) {
            d.prototype[i] = function (t, e, r) {
                return (this._listeningTo || (this._listeningTo = {}))[t._listenId || (t._listenId = (0, n.uniqueId)("l"))] = t, r || "object" !== (void 0 === e ? "undefined" : (0, l.default)(e)) || (r = this), t[g[i]](e, r, this), this
            }
        }), d.PLAYER_READY = "ready", d.PLAYER_RESIZE = "resize", d.PLAYER_FULLSCREEN = "fullscreen", d.PLAYER_PLAY = "play", d.PLAYER_PAUSE = "pause", d.PLAYER_STOP = "stop", d.PLAYER_ENDED = "ended", d.PLAYER_SEEK = "seek", d.PLAYER_ERROR = "playererror", d.ERROR = "error", d.PLAYER_TIMEUPDATE = "timeupdate", d.PLAYER_VOLUMEUPDATE = "volumeupdate", d.PLAYER_SUBTITLE_AVAILABLE = "subtitleavailable", d.PLAYBACK_PROGRESS = "playback:progress", d.PLAYBACK_TIMEUPDATE = "playback:timeupdate", d.PLAYBACK_READY = "playback:ready", d.PLAYBACK_BUFFERING = "playback:buffering", d.PLAYBACK_BUFFERFULL = "playback:bufferfull", d.PLAYBACK_SETTINGSUPDATE = "playback:settingsupdate", d.PLAYBACK_LOADEDMETADATA = "playback:loadedmetadata", d.PLAYBACK_HIGHDEFINITIONUPDATE = "playback:highdefinitionupdate", d.PLAYBACK_BITRATE = "playback:bitrate", d.PLAYBACK_LEVELS_AVAILABLE = "playback:levels:available", d.PLAYBACK_LEVEL_SWITCH_START = "playback:levels:switch:start", d.PLAYBACK_LEVEL_SWITCH_END = "playback:levels:switch:end", d.PLAYBACK_PLAYBACKSTATE = "playback:playbackstate", d.PLAYBACK_DVR = "playback:dvr", d.PLAYBACK_MEDIACONTROL_DISABLE = "playback:mediacontrol:disable", d.PLAYBACK_MEDIACONTROL_ENABLE = "playback:mediacontrol:enable", d.PLAYBACK_ENDED = "playback:ended", d.PLAYBACK_PLAY_INTENT = "playback:play:intent", d.PLAYBACK_PLAY = "playback:play", d.PLAYBACK_PAUSE = "playback:pause", d.PLAYBACK_SEEK = "playback:seek", d.PLAYBACK_SEEKED = "playback:seeked", d.PLAYBACK_STOP = "playback:stop", d.PLAYBACK_ERROR = "playback:error", d.PLAYBACK_STATS_ADD = "playback:stats:add", d.PLAYBACK_FRAGMENT_LOADED = "playback:fragment:loaded", d.PLAYBACK_LEVEL_SWITCH = "playback:level:switch", d.PLAYBACK_SUBTITLE_AVAILABLE = "playback:subtitle:available", d.PLAYBACK_SUBTITLE_CHANGED = "playback:subtitle:changed", d.CORE_CONTAINERS_CREATED = "core:containers:created", d.CORE_ACTIVE_CONTAINER_CHANGED = "core:active:container:changed", d.CORE_OPTIONS_CHANGE = "core:options:change", d.CORE_READY = "core:ready", d.CORE_FULLSCREEN = "core:fullscreen", d.CORE_RESIZE = "core:resize", d.CORE_SCREEN_ORIENTATION_CHANGED = "core:screen:orientation:changed", d.CORE_MOUSE_MOVE = "core:mousemove", d.CORE_MOUSE_LEAVE = "core:mouseleave", d.CONTAINER_PLAYBACKSTATE = "container:playbackstate", d.CONTAINER_PLAYBACKDVRSTATECHANGED = "container:dvr", d.CONTAINER_BITRATE = "container:bitrate", d.CONTAINER_STATS_REPORT = "container:stats:report", d.CONTAINER_DESTROYED = "container:destroyed", d.CONTAINER_READY = "container:ready", d.CONTAINER_ERROR = "container:error", d.CONTAINER_LOADEDMETADATA = "container:loadedmetadata", d.CONTAINER_SUBTITLE_AVAILABLE = "container:subtitle:available", d.CONTAINER_SUBTITLE_CHANGED = "container:subtitle:changed", d.CONTAINER_TIMEUPDATE = "container:timeupdate", d.CONTAINER_PROGRESS = "container:progress", d.CONTAINER_PLAY = "container:play", d.CONTAINER_STOP = "container:stop", d.CONTAINER_PAUSE = "container:pause", d.CONTAINER_ENDED = "container:ended", d.CONTAINER_CLICK = "container:click", d.CONTAINER_DBLCLICK = "container:dblclick", d.CONTAINER_CONTEXTMENU = "container:contextmenu", d.CONTAINER_MOUSE_ENTER = "container:mouseenter", d.CONTAINER_MOUSE_LEAVE = "container:mouseleave", d.CONTAINER_SEEK = "container:seek", d.CONTAINER_SEEKED = "container:seeked", d.CONTAINER_VOLUME = "container:volume", d.CONTAINER_FULLSCREEN = "container:fullscreen", d.CONTAINER_STATE_BUFFERING = "container:state:buffering", d.CONTAINER_STATE_BUFFERFULL = "container:state:bufferfull", d.CONTAINER_SETTINGSUPDATE = "container:settingsupdate", d.CONTAINER_HIGHDEFINITIONUPDATE = "container:highdefinitionupdate", d.CONTAINER_MEDIACONTROL_SHOW = "container:mediacontrol:show", d.CONTAINER_MEDIACONTROL_HIDE = "container:mediacontrol:hide", d.CONTAINER_MEDIACONTROL_DISABLE = "container:mediacontrol:disable", d.CONTAINER_MEDIACONTROL_ENABLE = "container:mediacontrol:enable", d.CONTAINER_STATS_ADD = "container:stats:add", d.CONTAINER_OPTIONS_CHANGE = "container:options:change", d.MEDIACONTROL_RENDERED = "mediacontrol:rendered", d.MEDIACONTROL_FULLSCREEN = "mediacontrol:fullscreen", d.MEDIACONTROL_SHOW = "mediacontrol:show", d.MEDIACONTROL_HIDE = "mediacontrol:hide", d.MEDIACONTROL_MOUSEMOVE_SEEKBAR = "mediacontrol:mousemove:seekbar", d.MEDIACONTROL_MOUSELEAVE_SEEKBAR = "mediacontrol:mouseleave:seekbar", d.MEDIACONTROL_PLAYING = "mediacontrol:playing", d.MEDIACONTROL_NOTPLAYING = "mediacontrol:notplaying", d.MEDIACONTROL_CONTAINERCHANGED = "mediacontrol:containerchanged", d.MEDIACONTROL_OPTIONS_CHANGE = "mediacontrol:options:change", t.exports = e.default
    }, function (t, e, r) {
        "use strict";
        Object.defineProperty(e, "__esModule", {
            value: !0
        }), e.SvgIcons = e.DoubleEventHandler = e.DomRecycler = e.cancelAnimationFrame = e.requestAnimationFrame = e.QueryString = e.Config = e.Fullscreen = void 0;
        var o = p(r(12)),
            i = p(r(3)),
            s = p(r(0)),
            l = p(r(1)),
            u = p(r(2)),
            n = p(r(75)),
            a = p(r(139));
        e.assign = g, e.extend = m, e.formatTime = v, e.seekStringToSeconds = T, e.uniqueId = k, e.isNumber = L, e.currentScriptUrl = R, e.getBrowserLanguage = O, e.now = P, e.removeArrayItem = D, e.listContainsIgnoreCase = function (e, t) {
            return void 0 !== e && void 0 !== t && void 0 !== t.find(function (t) {
                return e.toLowerCase() === t.toLowerCase()
            })
        }, e.canAutoPlayMedia = I, r(142);
        var d = p(r(14)),
            c = p(r(6)),
            f = p(r(150)),
            h = p(r(151));

        function p(t) {
            return t && t.__esModule ? t : {
                default: t
            }
        }

        function g(t, e) {
            if (e)
                for (var r in e) {
                    var i = (0, a.default)(e, r);
                    i ? (0, n.default)(t, r, i) : t[r] = e[r]
                }
            return t
        }

        function m(t, n) {
            var a, e = (a = t, (0, u.default)(o, a), o);

            function o() {
                (0, s.default)(this, o);
                for (var t = arguments.length, e = Array(t), r = 0; r < t; r++) e[r] = arguments[r];
                var i = (0, l.default)(this, a.call.apply(a, [this].concat(e)));
                return n.initialize && n.initialize.apply(i, e), i
            }
            return g(e.prototype, n), e
        }

        function v(t, e) {
            if (!isFinite(t)) return "--:--";
            t *= 1e3;
            var r = (t = parseInt(t / 1e3)) % 60,
                i = (t = parseInt(t / 60)) % 60,
                n = (t = parseInt(t / 60)) % 24,
                a = parseInt(t / 24),
                o = "";
            return a && 0 < a && (o += a + ":", n < 1 && (o += "00:")), (n && 0 < n || e) && (o += ("0" + n).slice(-2) + ":"), o += ("0" + i).slice(-2) + ":", (o += ("0" + r).slice(-2)).trim()
        }
        var y = e.Fullscreen = {
            fullscreenElement: function () {
                return document.fullscreenElement || document.webkitFullscreenElement || document.mozFullScreenElement || document.msFullscreenElement
            },
            requestFullscreen: function (t) {
                t.requestFullscreen ? t.requestFullscreen() : t.webkitRequestFullscreen ? t.webkitRequestFullscreen() : t.mozRequestFullScreen ? t.mozRequestFullScreen() : t.msRequestFullscreen ? t.msRequestFullscreen() : t.querySelector && t.querySelector("video") && t.querySelector("video").webkitEnterFullScreen ? t.querySelector("video").webkitEnterFullScreen() : t.webkitEnterFullScreen && t.webkitEnterFullScreen()
            },
            cancelFullscreen: function (t) {
                var e = 0 < arguments.length && void 0 !== t ? t : document;
                e.exitFullscreen ? e.exitFullscreen() : e.webkitCancelFullScreen ? e.webkitCancelFullScreen() : e.webkitExitFullscreen ? e.webkitExitFullscreen() : e.mozCancelFullScreen ? e.mozCancelFullScreen() : e.msExitFullscreen && e.msExitFullscreen()
            },
            fullscreenEnabled: function () {
                return !!(document.fullscreenEnabled || document.webkitFullscreenEnabled || document.mozFullScreenEnabled || document.msFullscreenEnabled)
            }
        },
            A = e.Config = (_._defaultConfig = function () {
                return {
                    volume: {
                        value: 100,
                        parse: parseInt
                    }
                }
            }, _._defaultValueFor = function (t) {
                try {
                    return this._defaultConfig()[t].parse(this._defaultConfig()[t].value)
                } catch (t) {
                    return
                }
            }, _._createKeyspace = function (t) {
                return "clappr." + document.domain + "." + t
            }, _.restore = function (t) {
                return d.default.hasLocalstorage && localStorage[this._createKeyspace(t)] ? this._defaultConfig()[t].parse(localStorage[this._createKeyspace(t)]) : this._defaultValueFor(t)
            }, _.persist = function (t, e) {
                if (d.default.hasLocalstorage) try {
                    return localStorage[this._createKeyspace(t)] = e, !0
                } catch (t) {
                    return !1
                }
            }, _);

        function _() {
            (0, s.default)(this, _)
        }
        var b = e.QueryString = (E.parse = function (t) {
            for (var e = void 0, r = /\+/g, i = /([^&=]+)=?([^&]*)/g, n = function (t) {
                return decodeURIComponent(t.replace(r, " "))
            }, a = {}; e = i.exec(t);) a[n(e[1]).toLowerCase()] = n(e[2]);
            return a
        }, (0, i.default)(E, null, [{
            key: "params",
            get: function () {
                var t = window.location.search.substring(1);
                return t !== this.query && (this._urlParams = this.parse(t), this.query = t), this._urlParams
            }
        }, {
            key: "hashParams",
            get: function () {
                var t = window.location.hash.substring(1);
                return t !== this.hash && (this._hashParams = this.parse(t), this.hash = t), this._hashParams
            }
        }]), E);

        function E() {
            (0, s.default)(this, E)
        }

        function T() {
            var t = 0 < arguments.length && void 0 !== arguments[0] ? arguments[0] : "t",
                i = 0,
                e = b.params[t] || b.hashParams[t] || "",
                r = e.match(/[0-9]+[hms]+/g) || [];
            if (0 < r.length) {
                var n = {
                    h: 3600,
                    m: 60,
                    s: 1
                };
                r.forEach(function (t) {
                    if (t) {
                        var e = t[t.length - 1],
                            r = parseInt(t.slice(0, t.length - 1), 10);
                        i += r * n[e]
                    }
                })
            } else e && (i = parseInt(e, 10));
            return i
        }
        var S = {};

        function k(t) {
            return S[t] || (S[t] = 0), t + ++S[t]
        }

        function L(t) {
            return 0 <= t - parseFloat(t) + 1
        }

        function R() {
            var t = document.getElementsByTagName("script");
            return t.length ? t[t.length - 1].src : ""
        }
        var C = e.requestAnimationFrame = (window.requestAnimationFrame || window.mozRequestAnimationFrame || window.webkitRequestAnimationFrame || function (t) {
            window.setTimeout(t, 1e3 / 60)
        }).bind(window),
            w = e.cancelAnimationFrame = (window.cancelAnimationFrame || window.mozCancelAnimationFrame || window.webkitCancelAnimationFrame || window.clearTimeout).bind(window);

        function O() {
            return window.navigator && window.navigator.language
        }

        function P() {
            return window.performance && window.performance.now ? performance.now() : Date.now()
        }

        function D(t, e) {
            var r = t.indexOf(e);
            0 <= r && t.splice(r, 1)
        }

        function I(i, t) {
            var e = (t = (0, o.default)({
                inline: !1,
                muted: !1,
                timeout: 250,
                type: "video",
                source: f.default.mp4,
                element: null
            }, t)).element ? t.element : document.createElement(t.type);
            e.muted = t.muted, !0 === t.muted && e.setAttribute("muted", "muted"), !0 === t.inline && e.setAttribute("playsinline", "playsinline"), e.src = t.source;
            var r = e.play(),
                n = setTimeout(function () {
                    a(!1, new Error("Timeout " + t.timeout + " ms has been reached"))
                }, t.timeout),
                a = function (t, e) {
                    var r = 1 < arguments.length && void 0 !== e ? e : null;
                    clearTimeout(n), i(t, r)
                };
            void 0 !== r ? r.then(function () {
                return a(!0)
            }).catch(function (t) {
                return a(!1, t)
            }) : a(!0)
        }
        var x = [],
            M = e.DomRecycler = (N.configure = function (t) {
                this.options = c.default.extend(this.options, t)
            }, N.create = function (t) {
                return this.options.recycleVideo && "video" === t && 0 < x.length ? x.shift() : (0, c.default)("<" + t + ">")
            }, N.garbage = function (t) {
                this.options.recycleVideo && "VIDEO" === t[0].tagName.toUpperCase() && (t.children().remove(), x.push(t))
            }, N);

        function N() {
            (0, s.default)(this, N)
        }
        M.options = {
            recycleVideo: !1
        };
        var F = e.DoubleEventHandler = (B.prototype.handle = function (t, e, r) {
            var i = !(2 < arguments.length && void 0 !== r) || r,
                n = (new Date).getTime(),
                a = n - this.lastTime;
            a < this.delay && 0 < a && (e(), i && t.preventDefault()), this.lastTime = n
        }, B);

        function B() {
            var t = 0 < arguments.length && void 0 !== arguments[0] ? arguments[0] : 500;
            (0, s.default)(this, B), this.delay = t, this.lastTime = 0
        }
        e.SvgIcons = h.default;
        e.default = {
            Config: A,
            Fullscreen: y,
            QueryString: b,
            DomRecycler: M,
            extend: m,
            formatTime: v,
            seekStringToSeconds: T,
            uniqueId: k,
            currentScriptUrl: R,
            isNumber: L,
            requestAnimationFrame: C,
            cancelAnimationFrame: w,
            getBrowserLanguage: O,
            now: P,
            removeArrayItem: D,
            canAutoPlayMedia: I,
            Media: f.default,
            DoubleEventHandler: F,
            SvgIcons: h.default
        }
    }, function (Ke, Le) {
        var Ne, Oe, Pe, Qe, nf, of, Re, Se, Te, Ue, Ve, We, Xe, Ye, Ze, $e, _e, af, bf, cf, ef, ff, gf, hf, jf, kf, lf, mf, pf, qf, rf, cn, Bn, Cn, Nq, Oq, Pq, Qq, Sq, Tq, Uq, Vq, Me = (Se = (Re = []).concat, Te = Re.filter, Ue = Re.slice, Ve = window.document, We = {}, Xe = {}, Ye = {
            "column-count": 1,
            columns: 1,
            "font-weight": 1,
            "line-height": 1,
            opacity: 1,
            "z-index": 1,
            zoom: 1
        }, Ze = /^\s*<(\w+|!)[^>]*>/, $e = /^<(\w+)\s*\/?>(?:<\/\1>|)$/, _e = /<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi, af = /^(?:body|html)$/i, bf = /([A-Z])/g, cf = ["val", "css", "html", "text", "data", "width", "height", "offset"], ef = Ve.createElement("table"), ff = Ve.createElement("tr"), gf = {
            tr: Ve.createElement("tbody"),
            tbody: ef,
            thead: ef,
            tfoot: ef,
            td: ff,
            th: ff,
            "*": Ve.createElement("div")
        }, hf = /complete|loaded|interactive/, jf = /^[\w-]*$/, lf = (kf = {}).toString, mf = {}, pf = Ve.createElement("div"), qf = {
            tabindex: "tabIndex",
            readonly: "readOnly",
            for: "htmlFor",
            class: "className",
            maxlength: "maxLength",
            cellspacing: "cellSpacing",
            cellpadding: "cellPadding",
            rowspan: "rowSpan",
            colspan: "colSpan",
            usemap: "useMap",
            frameborder: "frameBorder",
            contenteditable: "contentEditable"
        }, rf = Array.isArray || function (t) {
            return t instanceof Array
        }, mf.matches = function (t, e) {
            if (!e || !t || 1 !== t.nodeType) return !1;
            var r = t.matches || t.webkitMatchesSelector || t.mozMatchesSelector || t.oMatchesSelector || t.matchesSelector;
            if (r) return r.call(t, e);
            var i, n = t.parentNode,
                a = !n;
            return a && (n = pf).appendChild(t), i = ~mf.qsa(n, e).indexOf(t), a && pf.removeChild(t), i
        }, nf = function (t) {
            return t.replace(/-+(.)?/g, function (t, e) {
                return e ? e.toUpperCase() : ""
            })
        }, of = function (r) {
            return Te.call(r, function (t, e) {
                return r.indexOf(t) == e
            })
        }, mf.fragment = function (t, e, r) {
            var i, n, a;
            return $e.test(t) && (i = Pe(Ve.createElement(RegExp.$1))), i || (t.replace && (t = t.replace(_e, "<$1></$2>")), e === Ne && (e = Ze.test(t) && RegExp.$1), e in gf || (e = "*"), (a = gf[e]).innerHTML = "" + t, i = Pe.each(Ue.call(a.childNodes), function () {
                a.removeChild(this)
            })), xf(r) && (n = Pe(i), Pe.each(r, function (t, e) {
                -1 < cf.indexOf(t) ? n[t](e) : n.attr(t, e)
            })), i
        }, mf.Z = function (t, e) {
            return new Gf(t, e)
        }, mf.isZ = function (t) {
            return t instanceof mf.Z
        }, mf.init = function (t, e) {
            var r;
            if (!t) return mf.Z();
            if ("string" == typeof t)
                if ("<" == (t = t.trim())[0] && Ze.test(t)) r = mf.fragment(t, RegExp.$1, e), t = null;
                else {
                    if (e !== Ne) return Pe(e).find(t);
                    r = mf.qsa(Ve, t)
                }
            else {
                if (tf(t)) return Pe(Ve).ready(t);
                if (mf.isZ(t)) return t;
                if (rf(t)) r = function (t) {
                    return Te.call(t, function (t) {
                        return null != t
                    })
                }(t);
                else if (wf(t)) r = [t], t = null;
                else if (Ze.test(t)) r = mf.fragment(t.trim(), RegExp.$1, e), t = null;
                else {
                    if (e !== Ne) return Pe(e).find(t);
                    r = mf.qsa(Ve, t)
                }
            }
            return mf.Z(r, t)
        }, (Pe = function (t, e) {
            return mf.init(t, e)
        }).extend = function (e) {
            var r, t = Ue.call(arguments, 1);
            return "boolean" == typeof e && (r = e, e = t.shift()), t.forEach(function (t) {
                ! function t(e, r, i) {
                    for (Oe in r) i && (xf(r[Oe]) || rf(r[Oe])) ? (xf(r[Oe]) && !xf(e[Oe]) && (e[Oe] = {}), rf(r[Oe]) && !rf(e[Oe]) && (e[Oe] = []), t(e[Oe], r[Oe], i)) : r[Oe] !== Ne && (e[Oe] = r[Oe])
                }(e, t, r)
            }), e
        }, mf.qsa = function (t, e) {
            var r, i = "#" == e[0],
                n = !i && "." == e[0],
                a = i || n ? e.slice(1) : e,
                o = jf.test(a);
            return t.getElementById && o && i ? (r = t.getElementById(a)) ? [r] : [] : 1 !== t.nodeType && 9 !== t.nodeType && 11 !== t.nodeType ? [] : Ue.call(o && !i && t.getElementsByClassName ? n ? t.getElementsByClassName(a) : t.getElementsByTagName(e) : t.querySelectorAll(e))
        }, Pe.contains = Ve.documentElement.contains ? function (t, e) {
            return t !== e && t.contains(e)
        } : function (t, e) {
            for (; e && (e = e.parentNode);)
                if (e === t) return !0;
            return !1
        }, Pe.type = sf, Pe.isFunction = tf, Pe.isWindow = uf, Pe.isArray = rf, Pe.isPlainObject = xf, Pe.isEmptyObject = function (t) {
            var e;
            for (e in t) return !1;
            return !0
        }, Pe.isNumeric = function (t) {
            var e = Number(t),
                r = typeof t;
            return null != t && "boolean" != r && ("string" != r || t.length) && !isNaN(e) && isFinite(e) || !1
        }, Pe.inArray = function (t, e, r) {
            return Re.indexOf.call(e, t, r)
        }, Pe.camelCase = nf, Pe.trim = function (t) {
            return null == t ? "" : String.prototype.trim.call(t)
        }, Pe.uuid = 0, Pe.support = {}, Pe.expr = {}, Pe.noop = function () { }, Pe.map = function (t, e) {
            var r, i, n, a = [];
            if (yf(t))
                for (i = 0; i < t.length; i++) null != (r = e(t[i], i)) && a.push(r);
            else
                for (n in t) null != (r = e(t[n], n)) && a.push(r);
            return function (t) {
                return 0 < t.length ? Pe.fn.concat.apply([], t) : t
            }(a)
        }, Pe.each = function (t, e) {
            var r, i;
            if (yf(t)) {
                for (r = 0; r < t.length; r++)
                    if (!1 === e.call(t[r], r, t[r])) return t
            } else
                for (i in t)
                    if (!1 === e.call(t[i], i, t[i])) return t;
            return t
        }, Pe.grep = function (t, e) {
            return Te.call(t, e)
        }, window.JSON && (Pe.parseJSON = JSON.parse), Pe.each("Boolean Number String Function Array Date RegExp Object Error".split(" "), function (t, e) {
            kf["[object " + e + "]"] = e.toLowerCase()
        }), Pe.fn = {
            constructor: mf.Z,
            length: 0,
            forEach: Re.forEach,
            reduce: Re.reduce,
            push: Re.push,
            sort: Re.sort,
            splice: Re.splice,
            indexOf: Re.indexOf,
            concat: function () {
                var t, e, r = [];
                for (t = 0; t < arguments.length; t++) e = arguments[t], r[t] = mf.isZ(e) ? e.toArray() : e;
                return Se.apply(mf.isZ(this) ? this.toArray() : this, r)
            },
            map: function (r) {
                return Pe(Pe.map(this, function (t, e) {
                    return r.call(t, e, t)
                }))
            },
            slice: function () {
                return Pe(Ue.apply(this, arguments))
            },
            ready: function (t) {
                return hf.test(Ve.readyState) && Ve.body ? t(Pe) : Ve.addEventListener("DOMContentLoaded", function () {
                    t(Pe)
                }, !1), this
            },
            get: function (t) {
                return t === Ne ? Ue.call(this) : this[0 <= t ? t : t + this.length]
            },
            toArray: function () {
                return this.get()
            },
            size: function () {
                return this.length
            },
            remove: function () {
                return this.each(function () {
                    null != this.parentNode && this.parentNode.removeChild(this)
                })
            },
            each: function (r) {
                return Re.every.call(this, function (t, e) {
                    return !1 !== r.call(t, e, t)
                }), this
            },
            filter: function (e) {
                return tf(e) ? this.not(this.not(e)) : Pe(Te.call(this, function (t) {
                    return mf.matches(t, e)
                }))
            },
            add: function (t, e) {
                return Pe(of(this.concat(Pe(t, e))))
            },
            is: function (t) {
                return 0 < this.length && mf.matches(this[0], t)
            },
            not: function (e) {
                var r = [];
                if (tf(e) && e.call !== Ne) this.each(function (t) {
                    e.call(this, t) || r.push(this)
                });
                else {
                    var i = "string" == typeof e ? this.filter(e) : yf(e) && tf(e.item) ? Ue.call(e) : Pe(e);
                    this.forEach(function (t) {
                        i.indexOf(t) < 0 && r.push(t)
                    })
                }
                return Pe(r)
            },
            has: function (t) {
                return this.filter(function () {
                    return wf(t) ? Pe.contains(this, t) : Pe(this).find(t).size()
                })
            },
            eq: function (t) {
                return -1 === t ? this.slice(t) : this.slice(t, +t + 1)
            },
            first: function () {
                var t = this[0];
                return t && !wf(t) ? t : Pe(t)
            },
            last: function () {
                var t = this[this.length - 1];
                return t && !wf(t) ? t : Pe(t)
            },
            find: function (t) {
                var r = this;
                return t ? "object" == typeof t ? Pe(t).filter(function () {
                    var e = this;
                    return Re.some.call(r, function (t) {
                        return Pe.contains(t, e)
                    })
                }) : 1 == this.length ? Pe(mf.qsa(this[0], t)) : this.map(function () {
                    return mf.qsa(this, t)
                }) : Pe()
            },
            closest: function (r, i) {
                var n = [],
                    a = "object" == typeof r && Pe(r);
                return this.each(function (t, e) {
                    for (; e && !(a ? 0 <= a.indexOf(e) : mf.matches(e, r));) e = e !== i && !vf(e) && e.parentNode;
                    e && n.indexOf(e) < 0 && n.push(e)
                }), Pe(n)
            },
            parents: function (t) {
                for (var e = [], r = this; 0 < r.length;) r = Pe.map(r, function (t) {
                    if ((t = t.parentNode) && !vf(t) && e.indexOf(t) < 0) return e.push(t), t
                });
                return If(e, t)
            },
            parent: function (t) {
                return If(of(this.pluck("parentNode")), t)
            },
            children: function (t) {
                return If(this.map(function () {
                    return Ff(this)
                }), t)
            },
            contents: function () {
                return this.map(function () {
                    return this.contentDocument || Ue.call(this.childNodes)
                })
            },
            siblings: function (t) {
                return If(this.map(function (t, e) {
                    return Te.call(Ff(e.parentNode), function (t) {
                        return t !== e
                    })
                }), t)
            },
            empty: function () {
                return this.each(function () {
                    this.innerHTML = ""
                })
            },
            pluck: function (e) {
                return Pe.map(this, function (t) {
                    return t[e]
                })
            },
            show: function () {
                return this.each(function () {
                    "none" == this.style.display && (this.style.display = ""), "none" == getComputedStyle(this, "").getPropertyValue("display") && (this.style.display = function (t) {
                        var e, r;
                        return We[t] || (e = Ve.createElement(t), Ve.body.appendChild(e), r = getComputedStyle(e, "").getPropertyValue("display"), e.parentNode.removeChild(e), "none" == r && (r = "block"), We[t] = r), We[t]
                    }(this.nodeName))
                })
            },
            replaceWith: function (t) {
                return this.before(t).remove()
            },
            wrap: function (e) {
                var r = tf(e);
                if (this[0] && !r) var i = Pe(e).get(0),
                    n = i.parentNode || 1 < this.length;
                return this.each(function (t) {
                    Pe(this).wrapAll(r ? e.call(this, t) : n ? i.cloneNode(!0) : i)
                })
            },
            wrapAll: function (t) {
                if (this[0]) {
                    var e;
                    for (Pe(this[0]).before(t = Pe(t));
                        (e = t.children()).length;) t = e.first();
                    Pe(t).append(this)
                }
                return this
            },
            wrapInner: function (n) {
                var a = tf(n);
                return this.each(function (t) {
                    var e = Pe(this),
                        r = e.contents(),
                        i = a ? n.call(this, t) : n;
                    r.length ? r.wrapAll(i) : e.append(i)
                })
            },
            unwrap: function () {
                return this.parent().each(function () {
                    Pe(this).replaceWith(Pe(this).children())
                }), this
            },
            clone: function () {
                return this.map(function () {
                    return this.cloneNode(!0)
                })
            },
            hide: function () {
                return this.css("display", "none")
            },
            toggle: function (e) {
                return this.each(function () {
                    var t = Pe(this);
                    (e === Ne ? "none" == t.css("display") : e) ? t.show() : t.hide()
                })
            },
            prev: function (t) {
                return Pe(this.pluck("previousElementSibling")).filter(t || "*")
            },
            next: function (t) {
                return Pe(this.pluck("nextElementSibling")).filter(t || "*")
            },
            html: function (r) {
                return 0 in arguments ? this.each(function (t) {
                    var e = this.innerHTML;
                    Pe(this).empty().append(Jf(this, r, t, e))
                }) : 0 in this ? this[0].innerHTML : null
            },
            text: function (r) {
                return 0 in arguments ? this.each(function (t) {
                    var e = Jf(this, r, t, this.textContent);
                    this.textContent = null == e ? "" : "" + e
                }) : 0 in this ? this.pluck("textContent").join("") : null
            },
            attr: function (e, r) {
                var t;
                return "string" != typeof e || 1 in arguments ? this.each(function (t) {
                    if (1 === this.nodeType)
                        if (wf(e))
                            for (Oe in e) Kf(this, Oe, e[Oe]);
                        else Kf(this, e, Jf(this, r, t, this.getAttribute(e)))
                }) : 0 in this && 1 == this[0].nodeType && null != (t = this[0].getAttribute(e)) ? t : Ne
            },
            removeAttr: function (t) {
                return this.each(function () {
                    1 === this.nodeType && t.split(" ").forEach(function (t) {
                        Kf(this, t)
                    }, this)
                })
            },
            prop: function (e, r) {
                return e = qf[e] || e, 1 in arguments ? this.each(function (t) {
                    this[e] = Jf(this, r, t, this[e])
                }) : this[0] && this[0][e]
            },
            removeProp: function (t) {
                return t = qf[t] || t, this.each(function () {
                    delete this[t]
                })
            },
            data: function (t, e) {
                var r = "data-" + t.replace(bf, "-$1").toLowerCase(),
                    i = 1 in arguments ? this.attr(r, e) : this.attr(r);
                return null !== i ? Mf(i) : Ne
            },
            val: function (e) {
                return 0 in arguments ? (null == e && (e = ""), this.each(function (t) {
                    this.value = Jf(this, e, t, this.value)
                })) : this[0] && (this[0].multiple ? Pe(this[0]).find("option").filter(function () {
                    return this.selected
                }).pluck("value") : this[0].value)
            },
            offset: function (a) {
                if (a) return this.each(function (t) {
                    var e = Pe(this),
                        r = Jf(this, a, t, e.offset()),
                        i = e.offsetParent().offset(),
                        n = {
                            top: r.top - i.top,
                            left: r.left - i.left
                        };
                    "static" == e.css("position") && (n.position = "relative"), e.css(n)
                });
                if (!this.length) return null;
                if (Ve.documentElement !== this[0] && !Pe.contains(Ve.documentElement, this[0])) return {
                    top: 0,
                    left: 0
                };
                var t = this[0].getBoundingClientRect();
                return {
                    left: t.left + window.pageXOffset,
                    top: t.top + window.pageYOffset,
                    width: Math.round(t.width),
                    height: Math.round(t.height)
                }
            },
            css: function (t, e) {
                if (arguments.length < 2) {
                    var r = this[0];
                    if ("string" == typeof t) {
                        if (!r) return;
                        return r.style[nf(t)] || getComputedStyle(r, "").getPropertyValue(t)
                    }
                    if (rf(t)) {
                        if (!r) return;
                        var i = {},
                            n = getComputedStyle(r, "");
                        return Pe.each(t, function (t, e) {
                            i[e] = r.style[nf(e)] || n.getPropertyValue(e)
                        }), i
                    }
                }
                var a = "";
                if ("string" == sf(t)) e || 0 === e ? a = Bf(t) + ":" + Df(t, e) : this.each(function () {
                    this.style.removeProperty(Bf(t))
                });
                else
                    for (Oe in t) t[Oe] || 0 === t[Oe] ? a += Bf(Oe) + ":" + Df(Oe, t[Oe]) + ";" : this.each(function () {
                        this.style.removeProperty(Bf(Oe))
                    });
                return this.each(function () {
                    this.style.cssText += ";" + a
                })
            },
            index: function (t) {
                return t ? this.indexOf(Pe(t)[0]) : this.parent().children().indexOf(this[0])
            },
            hasClass: function (t) {
                return !!t && Re.some.call(this, function (t) {
                    return this.test(Lf(t))
                }, Cf(t))
            },
            addClass: function (r) {
                return r ? this.each(function (t) {
                    if ("className" in this) {
                        Qe = [];
                        var e = Lf(this);
                        Jf(this, r, t, e).split(/\s+/g).forEach(function (t) {
                            Pe(this).hasClass(t) || Qe.push(t)
                        }, this), Qe.length && Lf(this, e + (e ? " " : "") + Qe.join(" "))
                    }
                }) : this
            },
            removeClass: function (e) {
                return this.each(function (t) {
                    if ("className" in this) {
                        if (e === Ne) return Lf(this, "");
                        Qe = Lf(this), Jf(this, e, t, Qe).split(/\s+/g).forEach(function (t) {
                            Qe = Qe.replace(Cf(t), " ")
                        }), Lf(this, Qe.trim())
                    }
                })
            },
            toggleClass: function (r, i) {
                return r ? this.each(function (t) {
                    var e = Pe(this);
                    Jf(this, r, t, Lf(this)).split(/\s+/g).forEach(function (t) {
                        (i === Ne ? !e.hasClass(t) : i) ? e.addClass(t) : e.removeClass(t)
                    })
                }) : this
            },
            scrollTop: function (t) {
                if (this.length) {
                    var e = "scrollTop" in this[0];
                    return t === Ne ? e ? this[0].scrollTop : this[0].pageYOffset : this.each(e ? function () {
                        this.scrollTop = t
                    } : function () {
                        this.scrollTo(this.scrollX, t)
                    })
                }
            },
            scrollLeft: function (t) {
                if (this.length) {
                    var e = "scrollLeft" in this[0];
                    return t === Ne ? e ? this[0].scrollLeft : this[0].pageXOffset : this.each(e ? function () {
                        this.scrollLeft = t
                    } : function () {
                        this.scrollTo(t, this.scrollY)
                    })
                }
            },
            position: function () {
                if (this.length) {
                    var t = this[0],
                        e = this.offsetParent(),
                        r = this.offset(),
                        i = af.test(e[0].nodeName) ? {
                            top: 0,
                            left: 0
                        } : e.offset();
                    return r.top -= parseFloat(Pe(t).css("margin-top")) || 0, r.left -= parseFloat(Pe(t).css("margin-left")) || 0, i.top += parseFloat(Pe(e[0]).css("border-top-width")) || 0, i.left += parseFloat(Pe(e[0]).css("border-left-width")) || 0, {
                        top: r.top - i.top,
                        left: r.left - i.left
                    }
                }
            },
            offsetParent: function () {
                return this.map(function () {
                    for (var t = this.offsetParent || Ve.body; t && !af.test(t.nodeName) && "static" == Pe(t).css("position");) t = t.offsetParent;
                    return t
                })
            }
        }, Pe.fn.detach = Pe.fn.remove, ["width", "height"].forEach(function (i) {
            var n = i.replace(/./, function (t) {
                return t[0].toUpperCase()
            });
            Pe.fn[i] = function (e) {
                var t, r = this[0];
                return e === Ne ? uf(r) ? r["inner" + n] : vf(r) ? r.documentElement["scroll" + n] : (t = this.offset()) && t[i] : this.each(function (t) {
                    (r = Pe(this)).css(i, Jf(this, e, t, r[i]()))
                })
            }
        }), ["after", "prepend", "before", "append"].forEach(function (e, o) {
            var s = o % 2;
            Pe.fn[e] = function () {
                var r, i, n = Pe.map(arguments, function (t) {
                    var e = [];
                    return "array" == (r = sf(t)) ? (t.forEach(function (t) {
                        return t.nodeType !== Ne ? e.push(t) : Pe.zepto.isZ(t) ? e = e.concat(t.get()) : void (e = e.concat(mf.fragment(t)))
                    }), e) : "object" == r || null == t ? t : mf.fragment(t)
                }),
                    a = 1 < this.length;
                return n.length < 1 ? this : this.each(function (t, e) {
                    i = s ? e : e.parentNode, e = 0 == o ? e.nextSibling : 1 == o ? e.firstChild : 2 == o ? e : null;
                    var r = Pe.contains(Ve.documentElement, i);
                    n.forEach(function (t) {
                        if (a) t = t.cloneNode(!0);
                        else if (!i) return Pe(t).remove();
                        i.insertBefore(t, e), r && function t(e, r) {
                            r(e);
                            for (var i = 0, n = e.childNodes.length; i < n; i++) t(e.childNodes[i], r)
                        }(t, function (t) {
                            if (!(null == t.nodeName || "SCRIPT" !== t.nodeName.toUpperCase() || t.type && "text/javascript" !== t.type || t.src)) {
                                var e = t.ownerDocument ? t.ownerDocument.defaultView : window;
                                e.eval.call(e, t.innerHTML)
                            }
                        })
                    })
                })
            }, Pe.fn[s ? e + "To" : "insert" + (o ? "Before" : "After")] = function (t) {
                return Pe(t)[e](this), this
            }
        }), mf.Z.prototype = Gf.prototype = Pe.fn, mf.uniq = of, mf.deserializeValue = Mf, Pe.zepto = mf, Pe);

        function sf(t) {
            return null == t ? String(t) : kf[lf.call(t)] || "object"
        }

        function tf(t) {
            return "function" == sf(t)
        }

        function uf(t) {
            return null != t && t == t.window
        }

        function vf(t) {
            return null != t && t.nodeType == t.DOCUMENT_NODE
        }

        function wf(t) {
            return "object" == sf(t)
        }

        function xf(t) {
            return wf(t) && !uf(t) && Object.getPrototypeOf(t) == Object.prototype
        }

        function yf(t) {
            var e = !!t && "length" in t && t.length,
                r = Pe.type(t);
            return "function" != r && !uf(t) && ("array" == r || 0 === e || "number" == typeof e && 0 < e && e - 1 in t)
        }

        function Bf(t) {
            return t.replace(/::/g, "/").replace(/([A-Z]+)([A-Z][a-z])/g, "$1_$2").replace(/([a-z\d])([A-Z])/g, "$1_$2").replace(/_/g, "-").toLowerCase()
        }

        function Cf(t) {
            return t in Xe ? Xe[t] : Xe[t] = new RegExp("(^|\\s)" + t + "(\\s|$)")
        }

        function Df(t, e) {
            return "number" != typeof e || Ye[Bf(t)] ? e : e + "px"
        }

        function Ff(t) {
            return "children" in t ? Ue.call(t.children) : Pe.map(t.childNodes, function (t) {
                if (1 == t.nodeType) return t
            })
        }

        function Gf(t, e) {
            var r, i = t ? t.length : 0;
            for (r = 0; r < i; r++) this[r] = t[r];
            this.length = i, this.selector = e || ""
        }

        function If(t, e) {
            return null == e ? Pe(t) : Pe(t).filter(e)
        }

        function Jf(t, e, r, i) {
            return tf(e) ? e.call(t, r, i) : e
        }

        function Kf(t, e, r) {
            null == r ? t.removeAttribute(e) : t.setAttribute(e, r)
        }

        function Lf(t, e) {
            var r = t.className || "",
                i = r && r.baseVal !== Ne;
            if (e === Ne) return i ? r.baseVal : r;
            i ? r.baseVal = e : t.className = e
        }

        function Mf(e) {
            try {
                return e ? "true" == e || "false" != e && ("null" == e ? null : +e + "" == e ? +e : /^[\[\{]/.test(e) ? Pe.parseJSON(e) : e) : e
            } catch (t) {
                return e
            }
        }

        function Dn(t) {
            var n = [
                ["resolve", "done", Bn.Callbacks({
                    once: 1,
                    memory: 1
                }), "resolved"],
                ["reject", "fail", Bn.Callbacks({
                    once: 1,
                    memory: 1
                }), "rejected"],
                ["notify", "progress", Bn.Callbacks({
                    memory: 1
                })]
            ],
                a = "pending",
                o = {
                    state: function () {
                        return a
                    },
                    always: function () {
                        return s.done(arguments).fail(arguments), this
                    },
                    then: function () {
                        var e = arguments;
                        return Dn(function (a) {
                            Bn.each(n, function (t, i) {
                                var n = Bn.isFunction(e[t]) && e[t];
                                s[i[1]](function () {
                                    var t = n && n.apply(this, arguments);
                                    if (t && Bn.isFunction(t.promise)) t.promise().done(a.resolve).fail(a.reject).progress(a.notify);
                                    else {
                                        var e = this === o ? a.promise() : this,
                                            r = n ? [t] : arguments;
                                        a[i[0] + "With"](e, r)
                                    }
                                })
                            }), e = null
                        }).promise()
                    },
                    promise: function (t) {
                        return null != t ? Bn.extend(t, o) : o
                    }
                },
                s = {};
            return Bn.each(n, function (t, e) {
                var r = e[2],
                    i = e[3];
                o[e[1]] = r.add, i && r.add(function () {
                    a = i
                }, n[1 ^ t][2].disable, n[2][2].lock), s[e[0]] = function () {
                    return s[e[0] + "With"](this === s ? o : this, arguments), this
                }, s[e[0] + "With"] = r.fireWith
            }), o.promise(s), t && t.call(s, s), s
        }

        function Rq(t) {
            return !(!(t = Nq(t)).width() && !t.height()) && "none" !== t.css("display")
        }

        function Wq(t, e) {
            t = t.replace(/=#\]/g, '="#"]');
            var r, i, n = Tq.exec(t);
            if (n && n[2] in Sq && (r = Sq[n[2]], i = n[3], t = n[1], i)) {
                var a = Number(i);
                i = isNaN(a) ? i.replace(/^["']|["']$/g, "") : a
            }
            return e(t, r, i)
        }
        window.Zepto = Me, void 0 === window.$ && (window.$ = Me),
            function (Lk) {
                var Ok, Pk, Mk = +new Date,
                    Nk = window.document,
                    Qk = /<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,
                    Rk = /^(?:text|application)\/javascript/i,
                    Sk = /^(?:text|application)\/xml/i,
                    Tk = "application/json",
                    Uk = "text/html",
                    Vk = /^\s*$/,
                    Wk = Nk.createElement("a");

                function Yk(t, e, r, i) {
                    if (t.global) return function (t, e, r) {
                        var i = Lk.Event(e);
                        return Lk(t).trigger(i, r), !i.isDefaultPrevented()
                    }(e || Nk, r, i)
                }

                function _k(t, e) {
                    var r = e.context;
                    if (!1 === e.beforeSend.call(r, t, e) || !1 === Yk(e, r, "ajaxBeforeSend", [t, e])) return !1;
                    Yk(e, r, "ajaxSend", [t, e])
                }

                function al(t, e, r, i) {
                    var n = r.context,
                        a = "success";
                    r.success.call(n, t, a, e), i && i.resolveWith(n, [t, a, e]), Yk(r, n, "ajaxSuccess", [e, r, t]), cl(a, e, r)
                }

                function bl(t, e, r, i, n) {
                    var a = i.context;
                    i.error.call(a, r, e, t), n && n.rejectWith(a, [r, e, t]), Yk(i, a, "ajaxError", [r, i, t || e]), cl(e, r, i)
                }

                function cl(t, e, r) {
                    var i = r.context;
                    r.complete.call(i, e, t), Yk(r, i, "ajaxComplete", [e, r]),
                        function (t) {
                            t.global && !--Lk.active && Yk(t, null, "ajaxStop")
                        }(r)
                }

                function el() { }

                function gl(t, e) {
                    return "" == e ? t : (t + "&" + e).replace(/[&?]{1,2}/, "?")
                }

                function il(t, e, r, i) {
                    return Lk.isFunction(e) && (i = r, r = e, e = void 0), Lk.isFunction(r) || (i = r, r = void 0), {
                        url: t,
                        data: e,
                        success: r,
                        dataType: i
                    }
                }
                Wk.href = window.location.href, Lk.active = 0, Lk.ajaxJSONP = function (r, i) {
                    if (!("type" in r)) return Lk.ajax(r);

                    function t(t) {
                        Lk(s).triggerHandler("error", t || "abort")
                    }
                    var n, a, e = r.jsonpCallback,
                        o = (Lk.isFunction(e) ? e() : e) || "Zepto" + Mk++,
                        s = Nk.createElement("script"),
                        l = window[o],
                        u = {
                            abort: t
                        };
                    return i && i.promise(u), Lk(s).on("load error", function (t, e) {
                        clearTimeout(a), Lk(s).off().remove(), "error" != t.type && n ? al(n[0], u, r, i) : bl(null, e || "error", u, r, i), window[o] = l, n && Lk.isFunction(l) && l(n[0]), l = n = void 0
                    }), !1 === _k(u, r) ? t("abort") : (window[o] = function () {
                        n = arguments
                    }, s.src = r.url.replace(/\?(.+)=\?/, "?$1=" + o), Nk.head.appendChild(s), 0 < r.timeout && (a = setTimeout(function () {
                        t("timeout")
                    }, r.timeout))), u
                }, Lk.ajaxSettings = {
                    type: "GET",
                    beforeSend: el,
                    success: el,
                    error: el,
                    complete: el,
                    context: null,
                    global: !0,
                    xhr: function () {
                        return new window.XMLHttpRequest
                    },
                    accepts: {
                        script: "text/javascript, application/javascript, application/x-javascript",
                        json: Tk,
                        xml: "application/xml, text/xml",
                        html: Uk,
                        text: "text/plain"
                    },
                    crossDomain: !1,
                    timeout: 0,
                    processData: !0,
                    cache: !0,
                    dataFilter: el
                }, Lk.ajax = function (hm) {
                    var km, lm, im = Lk.extend({}, hm || {}),
                        jm = Lk.Deferred && Lk.Deferred();
                    for (Ok in Lk.ajaxSettings) void 0 === im[Ok] && (im[Ok] = Lk.ajaxSettings[Ok]);
                    ! function (t) {
                        t.global && 0 == Lk.active++ && Yk(t, null, "ajaxStart")
                    }(im), im.crossDomain || ((km = Nk.createElement("a")).href = im.url, km.href = km.href, im.crossDomain = Wk.protocol + "//" + Wk.host != km.protocol + "//" + km.host), im.url || (im.url = window.location.toString()), -1 < (lm = im.url.indexOf("#")) && (im.url = im.url.slice(0, lm)),
                        function (t) {
                            t.processData && t.data && "string" != Lk.type(t.data) && (t.data = Lk.param(t.data, t.traditional)), !t.data || t.type && "GET" != t.type.toUpperCase() && "jsonp" != t.dataType || (t.url = gl(t.url, t.data), t.data = void 0)
                        }(im);
                    var mm = im.dataType,
                        nm = /\?.+=\?/.test(im.url);
                    if (nm && (mm = "jsonp"), !1 !== im.cache && (hm && !0 === hm.cache || "script" != mm && "jsonp" != mm) || (im.url = gl(im.url, "_=" + Date.now())), "jsonp" == mm) return nm || (im.url = gl(im.url, im.jsonp ? im.jsonp + "=?" : !1 === im.jsonp ? "" : "callback=?")), Lk.ajaxJSONP(im, jm);

                    function qm(t, e) {
                        pm[t.toLowerCase()] = [t, e]
                    }
                    var um, om = im.accepts[mm],
                        pm = {},
                        rm = /^([\w-]+:)\/\//.test(im.url) ? RegExp.$1 : window.location.protocol,
                        sm = im.xhr(),
                        tm = sm.setRequestHeader;
                    if (jm && jm.promise(sm), im.crossDomain || qm("X-Requested-With", "XMLHttpRequest"), qm("Accept", om || "*/*"), (om = im.mimeType || om) && (-1 < om.indexOf(",") && (om = om.split(",", 2)[0]), sm.overrideMimeType && sm.overrideMimeType(om)), (im.contentType || !1 !== im.contentType && im.data && "GET" != im.type.toUpperCase()) && qm("Content-Type", im.contentType || "application/x-www-form-urlencoded"), im.headers)
                        for (Pk in im.headers) qm(Pk, im.headers[Pk]);
                    if (sm.setRequestHeader = qm, !(sm.onreadystatechange = function () {
                        if (4 == sm.readyState) {
                            sm.onreadystatechange = el, clearTimeout(um);
                            var ym, zm = !1;
                            if (200 <= sm.status && sm.status < 300 || 304 == sm.status || 0 == sm.status && "file:" == rm) {
                                if (mm = mm || function (t) {
                                    return t && (t = t.split(";", 2)[0]), t && (t == Uk ? "html" : t == Tk ? "json" : Rk.test(t) ? "script" : Sk.test(t) && "xml") || "text"
                                }(im.mimeType || sm.getResponseHeader("content-type")), "arraybuffer" == sm.responseType || "blob" == sm.responseType) ym = sm.response;
                                else {
                                    ym = sm.responseText;
                                    try {
                                        ym = function (t, e, r) {
                                            if (r.dataFilter == el) return t;
                                            var i = r.context;
                                            return r.dataFilter.call(i, t, e)
                                        }(ym, mm, im), "script" == mm ? eval(ym) : "xml" == mm ? ym = sm.responseXML : "json" == mm && (ym = Vk.test(ym) ? null : Lk.parseJSON(ym))
                                    } catch (t) {
                                        zm = t
                                    }
                                    if (zm) return bl(zm, "parsererror", sm, im, jm)
                                }
                                al(ym, sm, im, jm)
                            } else bl(sm.statusText || null, sm.status ? "error" : "abort", sm, im, jm)
                        }
                    }) === _k(sm, im)) return sm.abort(), bl(null, "abort", sm, im, jm), sm;
                    var vm = !("async" in im) || im.async;
                    if (sm.open(im.type, im.url, vm, im.username, im.password), im.xhrFields)
                        for (Pk in im.xhrFields) sm[Pk] = im.xhrFields[Pk];
                    for (Pk in pm) tm.apply(sm, pm[Pk]);
                    return 0 < im.timeout && (um = setTimeout(function () {
                        sm.onreadystatechange = el, sm.abort(), bl(null, "timeout", sm, im, jm)
                    }, im.timeout)), sm.send(im.data ? im.data : null), sm
                }, Lk.get = function () {
                    return Lk.ajax(il.apply(null, arguments))
                }, Lk.post = function () {
                    var t = il.apply(null, arguments);
                    return t.type = "POST", Lk.ajax(t)
                }, Lk.getJSON = function () {
                    var t = il.apply(null, arguments);
                    return t.dataType = "json", Lk.ajax(t)
                }, Lk.fn.load = function (t, e, r) {
                    if (!this.length) return this;
                    var i, n = this,
                        a = t.split(/\s/),
                        o = il(t, e, r),
                        s = o.success;
                    return 1 < a.length && (o.url = a[0], i = a[1]), o.success = function (t) {
                        n.html(i ? Lk("<div>").html(t.replace(Qk, "")).find(i) : t), s && s.apply(n, arguments)
                    }, Lk.ajax(o), this
                };
                var jl = encodeURIComponent;
                Lk.param = function (t, e) {
                    var r = [];
                    return r.add = function (t, e) {
                        Lk.isFunction(e) && (e = e()), null == e && (e = ""), this.push(jl(t) + "=" + jl(e))
                    },
                        function r(i, t, n, a) {
                            var o, s = Lk.isArray(t),
                                l = Lk.isPlainObject(t);
                            Lk.each(t, function (t, e) {
                                o = Lk.type(e), a && (t = n ? a : a + "[" + (l || "object" == o || "array" == o ? t : "") + "]"), !a && s ? i.add(e.name, e.value) : "array" == o || !n && "object" == o ? r(i, e, n, t) : i.add(t, e)
                            })
                        }(r, t, e), r.join("&").replace(/%20/g, "+")
                }
            }(Me), (cn = Me).Callbacks = function (i) {
                i = cn.extend({}, i);
                var e, r, n, a, o, s, l = [],
                    u = !i.once && [],
                    d = function (t) {
                        for (e = i.memory && t, r = !0, s = a || 0, a = 0, o = l.length, n = !0; l && s < o; ++s)
                            if (!1 === l[s].apply(t[0], t[1]) && i.stopOnFalse) {
                                e = !1;
                                break
                            } n = !1, l && (u ? u.length && d(u.shift()) : e ? l.length = 0 : c.disable())
                    },
                    c = {
                        add: function () {
                            if (l) {
                                var t = l.length,
                                    r = function (t) {
                                        cn.each(t, function (t, e) {
                                            "function" == typeof e ? i.unique && c.has(e) || l.push(e) : e && e.length && "string" != typeof e && r(e)
                                        })
                                    };
                                r(arguments), n ? o = l.length : e && (a = t, d(e))
                            }
                            return this
                        },
                        remove: function () {
                            return l && cn.each(arguments, function (t, e) {
                                for (var r; - 1 < (r = cn.inArray(e, l, r));) l.splice(r, 1), n && (r <= o && --o, r <= s && --s)
                            }), this
                        },
                        has: function (t) {
                            return !(!l || !(t ? -1 < cn.inArray(t, l) : l.length))
                        },
                        empty: function () {
                            return o = l.length = 0, this
                        },
                        disable: function () {
                            return l = u = e = void 0, this
                        },
                        disabled: function () {
                            return !l
                        },
                        lock: function () {
                            return u = void 0, e || c.disable(), this
                        },
                        locked: function () {
                            return !u
                        },
                        fireWith: function (t, e) {
                            return !l || r && !u || (e = [t, (e = e || []).slice ? e.slice() : e], n ? u.push(e) : d(e)), this
                        },
                        fire: function () {
                            return c.fireWith(this, arguments)
                        },
                        fired: function () {
                            return !!r
                        }
                    };
                return c
            }, Bn = Me, Cn = Array.prototype.slice, Bn.when = function (t) {
                function e(e, r, i) {
                    return function (t) {
                        r[e] = this, i[e] = 1 < arguments.length ? Cn.call(arguments) : t, i === n ? u.notifyWith(r, i) : --l || u.resolveWith(r, i)
                    }
                }
                var n, r, i, a = Cn.call(arguments),
                    o = a.length,
                    s = 0,
                    l = 1 !== o || t && Bn.isFunction(t.promise) ? o : 0,
                    u = 1 === l ? t : Dn();
                if (1 < o)
                    for (n = new Array(o), r = new Array(o), i = new Array(o); s < o; ++s) a[s] && Bn.isFunction(a[s].promise) ? a[s].promise().done(e(s, i, a)).fail(u.reject).progress(e(s, r, n)) : --l;
                return l || u.resolveWith(i, a), u.promise()
            }, Bn.Deferred = Dn,
            function (d) {
                function u(t) {
                    return "string" == typeof t
                }
                var c, e = 1,
                    f = Array.prototype.slice,
                    h = d.isFunction,
                    p = {},
                    a = {},
                    r = "onfocusin" in window,
                    i = {
                        focus: "focusin",
                        blur: "focusout"
                    },
                    g = {
                        mouseenter: "mouseover",
                        mouseleave: "mouseout"
                    };

                function m(t) {
                    return t._zid || (t._zid = e++)
                }

                function o(t, e, r, i) {
                    if ((e = v(e)).ns) var n = function (t) {
                        return new RegExp("(?:^| )" + t.replace(" ", " .* ?") + "(?: |$)")
                    }(e.ns);
                    return (p[m(t)] || []).filter(function (t) {
                        return t && (!e.e || t.e == e.e) && (!e.ns || n.test(t.ns)) && (!r || m(t.fn) === m(r)) && (!i || t.sel == i)
                    })
                }

                function v(t) {
                    var e = ("" + t).split(".");
                    return {
                        e: e[0],
                        ns: e.slice(1).sort().join(" ")
                    }
                }

                function y(t, e) {
                    return t.del && !r && t.e in i || !!e
                }

                function A(t) {
                    return g[t] || r && i[t] || t
                }

                function _(n, t, e, a, o, s, l) {
                    var r = m(n),
                        u = p[r] || (p[r] = []);
                    t.split(/\s/).forEach(function (t) {
                        if ("ready" == t) return d(document).ready(e);
                        var r = v(t);
                        r.fn = e, r.sel = o, r.e in g && (e = function (t) {
                            var e = t.relatedTarget;
                            if (!e || e !== this && !d.contains(this, e)) return r.fn.apply(this, arguments)
                        });
                        var i = (r.del = s) || e;
                        r.proxy = function (t) {
                            if (!(t = T(t)).isImmediatePropagationStopped()) {
                                t.data = a;
                                var e = i.apply(n, t._args == c ? [t] : [t].concat(t._args));
                                return !1 === e && (t.preventDefault(), t.stopPropagation()), e
                            }
                        }, r.i = u.length, u.push(r), "addEventListener" in n && n.addEventListener(A(r.e), r.proxy, y(r, l))
                    })
                }

                function b(e, t, r, i, n) {
                    var a = m(e);
                    (t || "").split(/\s/).forEach(function (t) {
                        o(e, t, r, i).forEach(function (t) {
                            delete p[a][t.i], "removeEventListener" in e && e.removeEventListener(A(t.e), t.proxy, y(t, n))
                        })
                    })
                }
                a.click = a.mousedown = a.mouseup = a.mousemove = "MouseEvents", d.event = {
                    add: _,
                    remove: b
                }, d.proxy = function (t, e) {
                    var r = 2 in arguments && f.call(arguments, 2);
                    if (h(t)) {
                        function i() {
                            return t.apply(e, r ? r.concat(f.call(arguments)) : arguments)
                        }
                        return i._zid = m(t), i
                    }
                    if (u(e)) return r ? (r.unshift(t[e], t), d.proxy.apply(null, r)) : d.proxy(t[e], t);
                    throw new TypeError("expected function")
                }, d.fn.bind = function (t, e, r) {
                    return this.on(t, e, r)
                }, d.fn.unbind = function (t, e) {
                    return this.off(t, e)
                }, d.fn.one = function (t, e, r, i) {
                    return this.on(t, e, r, i, 1)
                };
                var s = function () {
                    return !0
                },
                    E = function () {
                        return !1
                    },
                    n = /^([A-Z]|returnValue$|layer[XY]$|webkitMovement[XY]$)/,
                    t = {
                        preventDefault: "isDefaultPrevented",
                        stopImmediatePropagation: "isImmediatePropagationStopped",
                        stopPropagation: "isPropagationStopped"
                    };

                function T(i, n) {
                    return !n && i.isDefaultPrevented || (n || (n = i), d.each(t, function (t, e) {
                        var r = n[t];
                        i[t] = function () {
                            return this[e] = s, r && r.apply(n, arguments)
                        }, i[e] = E
                    }), i.timeStamp || (i.timeStamp = Date.now()), (n.defaultPrevented !== c ? n.defaultPrevented : "returnValue" in n ? !1 === n.returnValue : n.getPreventDefault && n.getPreventDefault()) && (i.isDefaultPrevented = s)), i
                }

                function S(t) {
                    var e, r = {
                        originalEvent: t
                    };
                    for (e in t) n.test(e) || t[e] === c || (r[e] = t[e]);
                    return T(r, t)
                }
                d.fn.delegate = function (t, e, r) {
                    return this.on(e, t, r)
                }, d.fn.undelegate = function (t, e, r) {
                    return this.off(e, t, r)
                }, d.fn.live = function (t, e) {
                    return d(document.body).delegate(this.selector, t, e), this
                }, d.fn.die = function (t, e) {
                    return d(document.body).undelegate(this.selector, t, e), this
                }, d.fn.on = function (e, n, r, a, o) {
                    var s, l, i = this;
                    return e && !u(e) ? (d.each(e, function (t, e) {
                        i.on(t, n, r, e, o)
                    }), i) : (u(n) || h(a) || !1 === a || (a = r, r = n, n = c), a !== c && !1 !== r || (a = r, r = c), !1 === a && (a = E), i.each(function (t, i) {
                        o && (s = function (t) {
                            return b(i, t.type, a), a.apply(this, arguments)
                        }), n && (l = function (t) {
                            var e, r = d(t.target).closest(n, i).get(0);
                            if (r && r !== i) return e = d.extend(S(t), {
                                currentTarget: r,
                                liveFired: i
                            }), (s || a).apply(r, [e].concat(f.call(arguments, 1)))
                        }), _(i, e, a, r, n, l || s)
                    }))
                }, d.fn.off = function (t, r, e) {
                    var i = this;
                    return t && !u(t) ? (d.each(t, function (t, e) {
                        i.off(t, r, e)
                    }), i) : (u(r) || h(e) || !1 === e || (e = r, r = c), !1 === e && (e = E), i.each(function () {
                        b(this, t, e, r)
                    }))
                }, d.fn.trigger = function (t, e) {
                    return (t = u(t) || d.isPlainObject(t) ? d.Event(t) : T(t))._args = e, this.each(function () {
                        t.type in i && "function" == typeof this[t.type] ? this[t.type]() : "dispatchEvent" in this ? this.dispatchEvent(t) : d(this).triggerHandler(t, e)
                    })
                }, d.fn.triggerHandler = function (r, i) {
                    var n, a;
                    return this.each(function (t, e) {
                        (n = S(u(r) ? d.Event(r) : r))._args = i, n.target = e, d.each(o(e, r.type || r), function (t, e) {
                            if (a = e.proxy(n), n.isImmediatePropagationStopped()) return !1
                        })
                    }), a
                }, "focusin focusout focus blur load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select keydown keypress keyup error".split(" ").forEach(function (e) {
                    d.fn[e] = function (t) {
                        return 0 in arguments ? this.bind(e, t) : this.trigger(e)
                    }
                }), d.Event = function (t, e) {
                    u(t) || (t = (e = t).type);
                    var r = document.createEvent(a[t] || "Events"),
                        i = !0;
                    if (e)
                        for (var n in e) "bubbles" == n ? i = !!e[n] : r[n] = e[n];
                    return r.initEvent(t, i, !0), T(r)
                }
            }(Me),
            function () {
                try {
                    getComputedStyle(void 0)
                } catch (t) {
                    var r = getComputedStyle;
                    window.getComputedStyle = function (t, e) {
                        try {
                            return r(t, e)
                        } catch (t) {
                            return null
                        }
                    }
                }
            }(), Oq = (Nq = Me).zepto, Pq = Oq.qsa, Qq = Oq.matches, Sq = Nq.expr[":"] = {
                visible: function () {
                    if (Rq(this)) return this
                },
                hidden: function () {
                    if (!Rq(this)) return this
                },
                selected: function () {
                    if (this.selected) return this
                },
                checked: function () {
                    if (this.checked) return this
                },
                parent: function () {
                    return this.parentNode
                },
                first: function (t) {
                    if (0 === t) return this
                },
                last: function (t, e) {
                    if (t === e.length - 1) return this
                },
                eq: function (t, e, r) {
                    if (t === r) return this
                },
                contains: function (t, e, r) {
                    if (-1 < Nq(this).text().indexOf(r)) return this
                },
                has: function (t, e, r) {
                    if (Oq.qsa(this, r).length) return this
                }
            }, Tq = new RegExp("(.*):(\\w+)(?:\\(([^)]+)\\))?$\\s*"), Uq = /^\s*>/, Vq = "Zepto" + +new Date, Oq.qsa = function (a, o) {
                return Wq(o, function (t, r, i) {
                    try {
                        var e;
                        !t && r ? t = "*" : Uq.test(t) && (e = Nq(a).addClass(Vq), t = "." + Vq + " " + t);
                        var n = Pq(a, t)
                    } catch (t) {
                        throw console.error("error performing selector: %o", o), t
                    } finally {
                        e && e.removeClass(Vq)
                    }
                    return r ? Oq.uniq(Nq.map(n, function (t, e) {
                        return r.call(t, e, n, i)
                    })) : n
                })
            }, Oq.matches = function (i, t) {
                return Wq(t, function (t, e, r) {
                    return (!t || Qq(i, t)) && (!e || e.call(i, null, r) === i)
                })
            }, Ke.exports = Me
    }, function (t, e, r) {
        "use strict";
        Object.defineProperty(e, "__esModule", {
            value: !0
        });

        function n(t) {
            return null === t ? "" : ("" + t).replace(o, function (t) {
                return a[t]
            })
        }

        function i(a, t) {
            var e, r = new RegExp([(l.escape || u).source, (l.interpolate || u).source, (l.evaluate || u).source].join("|") + "|$", "g"),
                o = 0,
                s = "__p+='";
            a.replace(r, function (t, e, r, i, n) {
                return s += a.slice(o, n).replace(c, function (t) {
                    return "\\" + d[t]
                }), e && (s += "'+\n((__t=(" + e + "))==null?'':escapeExpr(__t))+\n'"), r && (s += "'+\n((__t=(" + r + "))==null?'':__t)+\n'"), i && (s += "';\n" + i + "\n__p+='"), o = n + t.length, t
            }), s += "';\n", l.variable || (s = "with(obj||{}){\n" + s + "}\n"), s = "var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n" + s + "return __p;\n//# sourceURL=/microtemplates/source[" + f++ + "]";
            try {
                e = new Function(l.variable || "obj", "escapeExpr", s)
            } catch (t) {
                throw t.source = s, t
            }
            if (t) return e(t, n);

            function i(t) {
                return e.call(this, t, n)
            }
            return i.source = "function(" + (l.variable || "obj") + "){\n" + s + "}", i
        }
        var l = {
            evaluate: /<%([\s\S]+?)%>/g,
            interpolate: /<%=([\s\S]+?)%>/g,
            escape: /<%-([\s\S]+?)%>/g
        },
            u = /(.)^/,
            d = {
                "'": "'",
                "\\": "\\",
                "\r": "r",
                "\n": "n",
                "\t": "t",
                "\u2028": "u2028",
                "\u2029": "u2029"
            },
            c = /\\|'|\r|\n|\t|\u2028|\u2029/g,
            a = {
                "&": "&amp;",
                "<": "&lt;",
                ">": "&gt;",
                '"': "&quot;",
                "'": "&#x27;"
            },
            o = new RegExp("[&<>\"']", "g"),
            f = 0;
        i.settings = l, e.default = i, t.exports = e.default
    }, function (t, e) {
        t.exports = function (r) {
            var o = [];
            return o.toString = function () {
                return this.map(function (t) {
                    var e = function (t, e) {
                        var r = t[1] || "",
                            i = t[3];
                        if (!i) return r;
                        if (e && "function" == typeof btoa) {
                            var n = function (t) {
                                return "/*# sourceMappingURL=data:application/json;charset=utf-8;base64," + btoa(unescape(encodeURIComponent(JSON.stringify(t)))) + " */"
                            }(i),
                                a = i.sources.map(function (t) {
                                    return "/*# sourceURL=" + i.sourceRoot + t + " */"
                                });
                            return [r].concat(a).concat([n]).join("\n")
                        }
                        return [r].join("\n")
                    }(t, r);
                    return t[2] ? "@media " + t[2] + "{" + e + "}" : e
                }).join("")
            }, o.i = function (t, e) {
                "string" == typeof t && (t = [
                    [null, t, ""]
                ]);
                for (var r = {}, i = 0; i < this.length; i++) {
                    var n = this[i][0];
                    "number" == typeof n && (r[n] = !0)
                }
                for (i = 0; i < t.length; i++) {
                    var a = t[i];
                    "number" == typeof a[0] && r[a[0]] || (e && !a[2] ? a[2] = e : e && (a[2] = "(" + a[2] + ") and (" + e + ")"), o.push(a))
                }
            }, o
        }
    }, function (t, e) {
        var r = t.exports = {
            version: "2.4.0"
        };
        "number" == typeof __e && (__e = r)
    }, function (t, e, r) {
        var i, n, a, l = {},
            u = (i = function () {
                return window && document && document.all && !window.atob
            }, function () {
                return void 0 === n && (n = i.apply(this, arguments)), n
            }),
            o = (a = {}, function (t) {
                if ("function" == typeof t) return t();
                if (void 0 === a[t]) {
                    var e = function (t) {
                        return document.querySelector(t)
                    }.call(this, t);
                    if (window.HTMLIFrameElement && e instanceof window.HTMLIFrameElement) try {
                        e = e.contentDocument.head
                    } catch (t) {
                        e = null
                    }
                    a[t] = e
                }
                return a[t]
            }),
            s = null,
            d = 0,
            c = [],
            f = r(172);

        function h(t, e) {
            for (var r = 0; r < t.length; r++) {
                var i = t[r],
                    n = l[i.id];
                if (n) {
                    n.refs++;
                    for (var a = 0; a < n.parts.length; a++) n.parts[a](i.parts[a]);
                    for (; a < i.parts.length; a++) n.parts.push(A(i.parts[a], e))
                } else {
                    var o = [];
                    for (a = 0; a < i.parts.length; a++) o.push(A(i.parts[a], e));
                    l[i.id] = {
                        id: i.id,
                        refs: 1,
                        parts: o
                    }
                }
            }
        }

        function p(t, e) {
            for (var r = [], i = {}, n = 0; n < t.length; n++) {
                var a = t[n],
                    o = e.base ? a[0] + e.base : a[0],
                    s = {
                        css: a[1],
                        media: a[2],
                        sourceMap: a[3]
                    };
                i[o] ? i[o].parts.push(s) : r.push(i[o] = {
                    id: o,
                    parts: [s]
                })
            }
            return r
        }

        function g(t, e) {
            var r = o(t.insertInto);
            if (!r) throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");
            var i = c[c.length - 1];
            if ("top" === t.insertAt) i ? i.nextSibling ? r.insertBefore(e, i.nextSibling) : r.appendChild(e) : r.insertBefore(e, r.firstChild), c.push(e);
            else if ("bottom" === t.insertAt) r.appendChild(e);
            else {
                if ("object" != typeof t.insertAt || !t.insertAt.before) throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");
                var n = o(t.insertInto + " " + t.insertAt.before);
                r.insertBefore(e, n)
            }
        }

        function m(t) {
            if (null === t.parentNode) return !1;
            t.parentNode.removeChild(t);
            var e = c.indexOf(t);
            0 <= e && c.splice(e, 1)
        }

        function v(t) {
            var e = document.createElement("style");
            return t.attrs.type = "text/css", y(e, t.attrs), g(t, e), e
        }

        function y(e, r) {
            Object.keys(r).forEach(function (t) {
                e.setAttribute(t, r[t])
            })
        }

        function A(e, t) {
            var r, i, n, a;
            if (t.transform && e.css) {
                if (!(a = t.transform(e.css))) return function () { };
                e.css = a
            }
            if (t.singleton) {
                var o = d++;
                r = s || (s = v(t)), i = E.bind(null, r, o, !1), n = E.bind(null, r, o, !0)
            } else n = e.sourceMap && "function" == typeof URL && "function" == typeof URL.createObjectURL && "function" == typeof URL.revokeObjectURL && "function" == typeof Blob && "function" == typeof btoa ? (r = function (t) {
                var e = document.createElement("link");
                return t.attrs.type = "text/css", t.attrs.rel = "stylesheet", y(e, t.attrs), g(t, e), e
            }(t), i = function (t, e, r) {
                var i = r.css,
                    n = r.sourceMap,
                    a = void 0 === e.convertToAbsoluteUrls && n;
                (e.convertToAbsoluteUrls || a) && (i = f(i));
                n && (i += "\n/*# sourceMappingURL=data:application/json;base64," + btoa(unescape(encodeURIComponent(JSON.stringify(n)))) + " */");
                var o = new Blob([i], {
                    type: "text/css"
                }),
                    s = t.href;
                t.href = URL.createObjectURL(o), s && URL.revokeObjectURL(s)
            }.bind(null, r, t), function () {
                m(r), r.href && URL.revokeObjectURL(r.href)
            }) : (r = v(t), i = function (t, e) {
                var r = e.css,
                    i = e.media;
                i && t.setAttribute("media", i);
                if (t.styleSheet) t.styleSheet.cssText = r;
                else {
                    for (; t.firstChild;) t.removeChild(t.firstChild);
                    t.appendChild(document.createTextNode(r))
                }
            }.bind(null, r), function () {
                m(r)
            });
            return i(e),
                function (t) {
                    if (t) {
                        if (t.css === e.css && t.media === e.media && t.sourceMap === e.sourceMap) return;
                        i(e = t)
                    } else n()
                }
        }
        t.exports = function (t, o) {
            if ("undefined" != typeof DEBUG && DEBUG && "object" != typeof document) throw new Error("The style-loader cannot be used in a non-browser environment");
            (o = o || {}).attrs = "object" == typeof o.attrs ? o.attrs : {}, o.singleton || "boolean" == typeof o.singleton || (o.singleton = u()), o.insertInto || (o.insertInto = "head"), o.insertAt || (o.insertAt = "bottom");
            var s = p(t, o);
            return h(s, o),
                function (t) {
                    for (var e = [], r = 0; r < s.length; r++) {
                        var i = s[r];
                        (n = l[i.id]).refs--, e.push(n)
                    }
                    t && h(p(t, o), o);
                    for (r = 0; r < e.length; r++) {
                        var n;
                        if (0 === (n = e[r]).refs) {
                            for (var a = 0; a < n.parts.length; a++) n.parts[a]();
                            delete l[n.id]
                        }
                    }
                }
        };
        var _, b = (_ = [], function (t, e) {
            return _[t] = e, _.filter(Boolean).join("\n")
        });

        function E(t, e, r, i) {
            var n = r ? "" : i.css;
            if (t.styleSheet) t.styleSheet.cssText = b(e, n);
            else {
                var a = document.createTextNode(n),
                    o = t.childNodes;
                o[e] && t.removeChild(o[e]), o.length ? t.insertBefore(a, o[e]) : t.appendChild(a)
            }
        }
    }, function (t, e, r) {
        "use strict";
        Object.defineProperty(e, "__esModule", {
            value: !0
        });
        var i = f(r(12)),
            n = f(r(0)),
            a = f(r(1)),
            o = f(r(3)),
            s = f(r(2)),
            l = r(5),
            u = f(r(30)),
            d = f(r(20)),
            c = f(r(6));

        function f(t) {
            return t && t.__esModule ? t : {
                default: t
            }
        }
        var h, p = (h = u.default, (0, s.default)(g, h), (0, o.default)(g, [{
            key: "isAudioOnly",
            get: function () {
                return !1
            }
        }, {
            key: "isAdaptive",
            get: function () {
                return !1
            }
        }, {
            key: "ended",
            get: function () {
                return !1
            }
        }, {
            key: "i18n",
            get: function () {
                return this._i18n
            }
        }, {
            key: "buffering",
            get: function () {
                return !1
            }
        }, {
            key: "consented",
            get: function () {
                return this._consented
            }
        }]), g.prototype.consent = function () {
            this._consented = !0
        }, g.prototype.play = function () { }, g.prototype.pause = function () { }, g.prototype.stop = function () { }, g.prototype.seek = function (t) { }, g.prototype.seekPercentage = function (t) { }, g.prototype.getStartTimeOffset = function () {
            return 0
        }, g.prototype.getDuration = function () {
            return 0
        }, g.prototype.isPlaying = function () {
            return !1
        }, g.prototype.getPlaybackType = function () {
            return g.NO_OP
        }, g.prototype.isHighDefinitionInUse = function () {
            return !1
        }, g.prototype.volume = function (t) { }, g.prototype.configure = function (t) {
            this._options = c.default.extend(this._options, t)
        }, g.prototype.attemptAutoPlay = function () {
            var r = this;
            this.canAutoPlay(function (t, e) {
                t && r.play()
            })
        }, g.prototype.canAutoPlay = function (t) {
            t(!0, null)
        }, (0, o.default)(g, [{
            key: "isReady",
            get: function () {
                return !1
            }
        }, {
            key: "hasClosedCaptionsTracks",
            get: function () {
                return 0 < this.closedCaptionsTracks.length
            }
        }, {
            key: "closedCaptionsTracks",
            get: function () {
                return []
            }
        }, {
            key: "closedCaptionsTrackId",
            get: function () {
                return -1
            },
            set: function (t) { }
        }]), g);

        function g(t, e, r) {
            (0, n.default)(this, g);
            var i = (0, a.default)(this, h.call(this, t));
            return i.settings = {}, i._i18n = e, i.playerError = r, i._consented = !1, i
        }
        e.default = p, (0, i.default)(p.prototype, d.default), p.extend = function (t) {
            return (0, l.extend)(p, t)
        }, p.canPlay = function (t, e) {
            return !1
        }, p.VOD = "vod", p.AOD = "aod", p.LIVE = "live", p.NO_OP = "no_op", p.type = "playback", t.exports = e.default
    }, function (t, e, r) {
        t.exports = {
            default: r(102),
            __esModule: !0
        }
    }, function (t, e, r) {
        var i = r(50)("wks"),
            n = r(36),
            a = r(17).Symbol,
            o = "function" == typeof a;
        (t.exports = function (t) {
            return i[t] || (i[t] = o && a[t] || (o ? a : n)("Symbol." + t))
        }).store = i
    }, function (t, e, r) {
        "use strict";
        Object.defineProperty(e, "__esModule", {
            value: !0
        });
        var i, n = r(143),
            a = (i = n) && i.__esModule ? i : {
                default: i
            };
        e.default = a.default, t.exports = e.default
    }, function (t, e, r) {
        "use strict";
        Object.defineProperty(e, "__esModule", {
            value: !0
        });
        var i = u(r(0)),
            n = u(r(1)),
            a = u(r(3)),
            o = u(r(2)),
            s = r(5),
            l = u(r(4));

        function u(t) {
            return t && t.__esModule ? t : {
                default: t
            }
        }
        var d, c = (d = l.default, (0, o.default)(f, d), (0, a.default)(f, [{
            key: "options",
            get: function () {
                return this._options
            }
        }]), f);

        function f() {
            var t = 0 < arguments.length && void 0 !== arguments[0] ? arguments[0] : {};
            (0, i.default)(this, f);
            var e = (0, n.default)(this, d.call(this, t));
            return e._options = t, e.uniqueId = (0, s.uniqueId)("o"), e
        }
        e.default = c, t.exports = e.default
    }, function (t, e, r) {
        var g = r(17),
            m = r(9),
            v = r(44),
            y = r(26),
            A = "prototype",
            _ = function (t, e, r) {
                var i, n, a, o = t & _.F,
                    s = t & _.G,
                    l = t & _.S,
                    u = t & _.P,
                    d = t & _.B,
                    c = t & _.W,
                    f = s ? m : m[e] || (m[e] = {}),
                    h = f[A],
                    p = s ? g : l ? g[e] : (g[e] || {})[A];
                for (i in s && (r = e), r) (n = !o && p && void 0 !== p[i]) && i in f || (a = n ? p[i] : r[i], f[i] = s && "function" != typeof p[i] ? r[i] : d && n ? v(a, g) : c && p[i] == a ? function (i) {
                    function t(t, e, r) {
                        if (this instanceof i) {
                            switch (arguments.length) {
                                case 0:
                                    return new i;
                                case 1:
                                    return new i(t);
                                case 2:
                                    return new i(t, e)
                            }
                            return new i(t, e, r)
                        }
                        return i.apply(this, arguments)
                    }
                    return t[A] = i[A], t
                }(a) : u && "function" == typeof a ? v(Function.call, a) : a, u && ((f.virtual || (f.virtual = {}))[i] = a, t & _.R && h && !h[i] && y(h, i, a)))
            };
        _.F = 1, _.G = 2, _.S = 4, _.P = 8, _.B = 16, _.W = 32, _.U = 64, _.R = 128, t.exports = _
    }, function (t, e) {
        var r = t.exports = "undefined" != typeof window && window.Math == Math ? window : "undefined" != typeof self && self.Math == Math ? self : Function("return this")();
        "number" == typeof __g && (__g = r)
    }, function (t, e, r) {
        var i = r(21),
            n = r(65),
            a = r(45),
            o = Object.defineProperty;
        e.f = r(22) ? Object.defineProperty : function (t, e, r) {
            if (i(t), e = a(e, !0), i(r), n) try {
                return o(t, e, r)
            } catch (t) { }
            if ("get" in r || "set" in r) throw TypeError("Accessors not supported!");
            return "value" in r && (t[e] = r.value), t
        }
    }, function (t, e, r) {
        var i = r(68),
            n = r(47);
        t.exports = function (t) {
            return i(n(t))
        }
    }, function (t, e, r) {
        "use strict";
        Object.defineProperty(e, "__esModule", {
            value: !0
        });
        var d = i(r(12)),
            c = i(r(29)),
            f = i(r(25));

        function i(t) {
            return t && t.__esModule ? t : {
                default: t
            }
        }
        var n = {
            createError: function (t, e) {
                var r = 1 < arguments.length && void 0 !== e ? e : {
                    useCodePrefix: !0
                },
                    i = this.constructor && this.constructor.type || "",
                    n = this.name || i,
                    a = this.i18n || this.core && this.core.i18n || this.container && this.container.i18n,
                    o = n + ":" + (t && t.code || "unknown"),
                    s = {
                        description: "",
                        level: f.default.Levels.FATAL,
                        origin: n,
                        scope: i,
                        raw: {}
                    },
                    l = (0, d.default)({}, s, t, {
                        code: r.useCodePrefix ? o : t.code
                    });
                if (a && l.level == f.default.Levels.FATAL && !l.UI) {
                    var u = {
                        title: a.t("default_error_title"),
                        message: a.t("default_error_message")
                    };
                    l.UI = u
                }
                return this.playerError ? this.playerError.createError(l) : c.default.warn(n, "PlayerError is not defined. Error: ", l), l
            }
        };
        e.default = n, t.exports = e.default
    }, function (t, e, r) {
        var i = r(32);
        t.exports = function (t) {
            if (!i(t)) throw TypeError(t + " is not an object!");
            return t
        }
    }, function (t, e, r) {
        t.exports = !r(27)(function () {
            return 7 != Object.defineProperty({}, "a", {
                get: function () {
                    return 7
                }
            }).a
        })
    }, function (t, e) {
        var r = {}.hasOwnProperty;
        t.exports = function (t, e) {
            return r.call(t, e)
        }
    }, function (t, e, r) {
        "use strict";
        Object.defineProperty(e, "__esModule", {
            value: !0
        });
        var i = c(r(12)),
            n = c(r(0)),
            a = c(r(1)),
            o = c(r(3)),
            s = c(r(2)),
            l = r(5),
            u = c(r(30)),
            d = c(r(20));

        function c(t) {
            return t && t.__esModule ? t : {
                default: t
            }
        }
        var f, h = (f = u.default, (0, s.default)(p, f), (0, o.default)(p, [{
            key: "playerError",
            get: function () {
                return this.core.playerError
            }
        }]), p.prototype.bindEvents = function () { }, p.prototype.getExternalInterface = function () {
            return {}
        }, p.prototype.enable = function () {
            this.enabled || (this.bindEvents(), this.$el.show(), this.enabled = !0)
        }, p.prototype.disable = function () {
            this.stopListening(), this.$el.hide(), this.enabled = !1
        }, p.prototype.render = function () {
            return this
        }, p);

        function p(t) {
            (0, n.default)(this, p);
            var e = (0, a.default)(this, f.call(this, t.options));
            return e.core = t, e.enabled = !0, e.bindEvents(), e.render(), e
        }
        e.default = h, (0, i.default)(h.prototype, d.default), h.extend = function (t) {
            return (0, l.extend)(h, t)
        }, h.type = "core", t.exports = e.default
    }, function (t, e, r) {
        "use strict";
        Object.defineProperty(e, "__esModule", {
            value: !0
        });
        var i, n = r(80),
            a = (i = n) && i.__esModule ? i : {
                default: i
            };
        e.default = a.default, t.exports = e.default
    }, function (t, e, r) {
        var i = r(18),
            n = r(33);
        t.exports = r(22) ? function (t, e, r) {
            return i.f(t, e, n(1, r))
        } : function (t, e, r) {
            return t[e] = r, t
        }
    }, function (t, e) {
        t.exports = function (t) {
            try {
                return !!t()
            } catch (t) {
                return !0
            }
        }
    }, function (t, e, r) {
        var i = r(67),
            n = r(51);
        t.exports = Object.keys || function (t) {
            return i(t, n)
        }
    }, function (t, e, r) {
        "use strict";
        Object.defineProperty(e, "__esModule", {
            value: !0
        });
        var i, n = r(162),
            a = (i = n) && i.__esModule ? i : {
                default: i
            };
        e.default = a.default, t.exports = e.default
    }, function (t, e, r) {
        "use strict";
        Object.defineProperty(e, "__esModule", {
            value: !0
        });
        var i = d(r(0)),
            n = d(r(1)),
            a = d(r(3)),
            o = d(r(2)),
            s = d(r(6)),
            l = r(5),
            u = d(r(15));

        function d(t) {
            return t && t.__esModule ? t : {
                default: t
            }
        }
        var c, f = /^(\S+)\s*(.*)$/,
            h = (c = u.default, (0, o.default)(p, c), (0, a.default)(p, [{
                key: "tagName",
                get: function () {
                    return "div"
                }
            }, {
                key: "events",
                get: function () {
                    return {}
                }
            }, {
                key: "attributes",
                get: function () {
                    return {}
                }
            }]), p.prototype.$ = function (t) {
                return this.$el.find(t)
            }, p.prototype.render = function () {
                return this
            }, p.prototype.destroy = function () {
                return this.$el.remove(), this.stopListening(), this.undelegateEvents(), this
            }, p.prototype.setElement = function (t, e) {
                return this.$el && this.undelegateEvents(), this.$el = s.default.zepto.isZ(t) ? t : (0, s.default)(t), this.el = this.$el[0], !1 !== e && this.delegateEvents(), this
            }, p.prototype.delegateEvents = function (t) {
                if (!t && !(t = this.events)) return this;
                for (var e in this.undelegateEvents(), t) {
                    var r = t[e];
                    if (r && r.constructor !== Function && (r = this[t[e]]), r) {
                        var i = e.match(f),
                            n = i[1],
                            a = i[2];
                        n += ".delegateEvents" + this.cid, "" === a ? this.$el.on(n, r.bind(this)) : this.$el.on(n, a, r.bind(this))
                    }
                }
                return this
            }, p.prototype.undelegateEvents = function () {
                return this.$el.off(".delegateEvents" + this.cid), this
            }, p.prototype._ensureElement = function () {
                if (this.el) this.setElement(this.el, !1);
                else {
                    var t = s.default.extend({}, this.attributes);
                    this.id && (t.id = this.id), this.className && (t.class = this.className);
                    var e = l.DomRecycler.create(this.tagName).attr(t);
                    this.setElement(e, !1)
                }
            }, p);

        function p(t) {
            (0, i.default)(this, p);
            var e = (0, n.default)(this, c.call(this, t));
            return e.cid = (0, l.uniqueId)("c"), e._ensureElement(), e.delegateEvents(), e
        }
        e.default = h, t.exports = e.default
    }, function (t, e, r) {
        "use strict";
        Object.defineProperty(e, "__esModule", {
            value: !0
        });
        var i = n(r(0));

        function n(t) {
            return t && t.__esModule ? t : {
                default: t
            }
        }

        function a() {
            (0, i.default)(this, a)
        }
        var o = new (n(r(4)).default);
        (e.default = a).on = function (t, e, r) {
            o.on(t, e, r)
        }, a.once = function (t, e, r) {
            o.once(t, e, r)
        }, a.off = function (t, e, r) {
            o.off(t, e, r)
        }, a.trigger = function (t) {
            for (var e = arguments.length, r = Array(1 < e ? e - 1 : 0), i = 1; i < e; i++) r[i - 1] = arguments[i];
            o.trigger.apply(o, [t].concat(r))
        }, a.stopListening = function (t, e, r) {
            o.stopListening(t, e, r)
        }, t.exports = e.default
    }, function (t, e) {
        t.exports = function (t) {
            return "object" == typeof t ? null !== t : "function" == typeof t
        }
    }, function (t, e) {
        t.exports = function (t, e) {
            return {
                enumerable: !(1 & t),
                configurable: !(2 & t),
                writable: !(4 & t),
                value: e
            }
        }
    }, function (t, e) {
        t.exports = {}
    }, function (t, e, r) {
        "use strict";
        Object.defineProperty(e, "__esModule", {
            value: !0
        });
        var i = c(r(12)),
            n = c(r(0)),
            a = c(r(1)),
            o = c(r(3)),
            s = c(r(2)),
            l = r(5),
            u = c(r(15)),
            d = c(r(20));

        function c(t) {
            return t && t.__esModule ? t : {
                default: t
            }
        }
        var f, h = (f = u.default, (0, s.default)(p, f), (0, o.default)(p, [{
            key: "playerError",
            get: function () {
                return this.core.playerError
            }
        }]), p.prototype.bindEvents = function () { }, p.prototype.enable = function () {
            this.enabled || (this.bindEvents(), this.enabled = !0)
        }, p.prototype.disable = function () {
            this.enabled && (this.stopListening(), this.enabled = !1)
        }, p.prototype.getExternalInterface = function () {
            return {}
        }, p.prototype.destroy = function () {
            this.stopListening()
        }, p);

        function p(t) {
            (0, n.default)(this, p);
            var e = (0, a.default)(this, f.call(this, t.options));
            return e.core = t, e.enabled = !0, e.bindEvents(), e
        }
        e.default = h, (0, i.default)(h.prototype, d.default), h.extend = function (t) {
            return (0, l.extend)(h, t)
        }, h.type = "core", t.exports = e.default
    }, function (t, e) {
        var r = 0,
            i = Math.random();
        t.exports = function (t) {
            return "Symbol(".concat(void 0 === t ? "" : t, ")_", (++r + i).toString(36))
        }
    }, function (t, e) {
        e.f = {}.propertyIsEnumerable
    }, function (t, e, r) {
        var i = r(47);
        t.exports = function (t) {
            return Object(i(t))
        }
    }, function (t, e, r) {
        "use strict";
        e.__esModule = !0;
        var i = o(r(110)),
            n = o(r(120)),
            a = "function" == typeof n.default && "symbol" == typeof i.default ? function (t) {
                return typeof t
            } : function (t) {
                return t && "function" == typeof n.default && t.constructor === n.default && t !== n.default.prototype ? "symbol" : typeof t
            };

        function o(t) {
            return t && t.__esModule ? t : {
                default: t
            }
        }
        e.default = "function" == typeof n.default && "symbol" === a(i.default) ? function (t) {
            return void 0 === t ? "undefined" : a(t)
        } : function (t) {
            return t && "function" == typeof n.default && t.constructor === n.default && t !== n.default.prototype ? "symbol" : void 0 === t ? "undefined" : a(t)
        }
    }, function (t, e, r) {
        "use strict";
        Object.defineProperty(e, "__esModule", {
            value: !0
        });
        var i, n = r(0),
            a = (i = n) && i.__esModule ? i : {
                default: i
            };

        function o() {
            (0, a.default)(this, o), this.options = {}, this.playbackPlugins = [], this.currentSize = {
                width: 0,
                height: 0
            }
        }
        o._players = {}, o.getInstance = function (t) {
            return o._players[t] || (o._players[t] = new o)
        }, e.default = o, t.exports = e.default
    }, function (t, e, r) {
        "use strict";
        Object.defineProperty(e, "__esModule", {
            value: !0
        });
        var i, n = r(184),
            a = (i = n) && i.__esModule ? i : {
                default: i
            };
        e.default = a.default, t.exports = e.default
    }, function (t, e, r) {
        "use strict";
        Object.defineProperty(e, "__esModule", {
            value: !0
        });
        var i = c(r(12)),
            n = c(r(0)),
            a = c(r(1)),
            o = c(r(3)),
            s = c(r(2)),
            l = r(5),
            u = c(r(30)),
            d = c(r(20));

        function c(t) {
            return t && t.__esModule ? t : {
                default: t
            }
        }
        var f, h = (f = u.default, (0, s.default)(p, f), (0, o.default)(p, [{
            key: "playerError",
            get: function () {
                return this.container.playerError
            }
        }]), p.prototype.enable = function () {
            this.enabled || (this.bindEvents(), this.$el.show(), this.enabled = !0)
        }, p.prototype.disable = function () {
            this.stopListening(), this.$el.hide(), this.enabled = !1
        }, p.prototype.bindEvents = function () { }, p);

        function p(t) {
            (0, n.default)(this, p);
            var e = (0, a.default)(this, f.call(this, t.options));
            return e.container = t, e.enabled = !0, e.bindEvents(), e
        }
        e.default = h, (0, i.default)(h.prototype, d.default), h.extend = function (t) {
            return (0, l.extend)(h, t)
        }, h.type = "container", t.exports = e.default
    }, function (t, e, r) {
        "use strict";
        Object.defineProperty(e, "__esModule", {
            value: !0
        });
        var i = c(r(12)),
            n = c(r(0)),
            a = c(r(1)),
            o = c(r(3)),
            s = c(r(2)),
            l = c(r(15)),
            u = r(5),
            d = c(r(20));

        function c(t) {
            return t && t.__esModule ? t : {
                default: t
            }
        }
        var f, h = (f = l.default, (0, s.default)(p, f), (0, o.default)(p, [{
            key: "playerError",
            get: function () {
                return this.container.playerError
            }
        }]), p.prototype.enable = function () {
            this.enabled || (this.bindEvents(), this.enabled = !0)
        }, p.prototype.disable = function () {
            this.enabled && (this.stopListening(), this.enabled = !1)
        }, p.prototype.bindEvents = function () { }, p.prototype.destroy = function () {
            this.stopListening()
        }, p);

        function p(t) {
            (0, n.default)(this, p);
            var e = (0, a.default)(this, f.call(this, t.options));
            return e.container = t, e.enabled = !0, e.bindEvents(), e
        }
        e.default = h, (0, i.default)(h.prototype, d.default), h.extend = function (t) {
            return (0, u.extend)(h, t)
        }, h.type = "container", t.exports = e.default
    }, function (t, e, r) {
        var a = r(104);
        t.exports = function (i, n, t) {
            if (a(i), void 0 === n) return i;
            switch (t) {
                case 1:
                    return function (t) {
                        return i.call(n, t)
                    };
                case 2:
                    return function (t, e) {
                        return i.call(n, t, e)
                    };
                case 3:
                    return function (t, e, r) {
                        return i.call(n, t, e, r)
                    }
            }
            return function () {
                return i.apply(n, arguments)
            }
        }
    }, function (t, e, r) {
        var n = r(32);
        t.exports = function (t, e) {
            if (!n(t)) return t;
            var r, i;
            if (e && "function" == typeof (r = t.toString) && !n(i = r.call(t))) return i;
            if ("function" == typeof (r = t.valueOf) && !n(i = r.call(t))) return i;
            if (!e && "function" == typeof (r = t.toString) && !n(i = r.call(t))) return i;
            throw TypeError("Can't convert object to primitive value")
        }
    }, function (t, e) {
        var r = {}.toString;
        t.exports = function (t) {
            return r.call(t).slice(8, -1)
        }
    }, function (t, e) {
        t.exports = function (t) {
            if (null == t) throw TypeError("Can't call method on  " + t);
            return t
        }
    }, function (t, e) {
        var r = Math.ceil,
            i = Math.floor;
        t.exports = function (t) {
            return isNaN(t = +t) ? 0 : (0 < t ? i : r)(t)
        }
    }, function (t, e, r) {
        var i = r(50)("keys"),
            n = r(36);
        t.exports = function (t) {
            return i[t] || (i[t] = n(t))
        }
    }, function (t, e, r) {
        var i = r(17),
            n = "__core-js_shared__",
            a = i[n] || (i[n] = {});
        t.exports = function (t) {
            return a[t] || (a[t] = {})
        }
    }, function (t, e) {
        t.exports = "constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")
    }, function (t, e) {
        e.f = Object.getOwnPropertySymbols
    }, function (t, e, r) {
        t.exports = {
            default: r(108),
            __esModule: !0
        }
    }, function (t, e, r) {
        "use strict";
        var i = r(112)(!0);
        r(71)(String, "String", function (t) {
            this._t = String(t), this._i = 0
        }, function () {
            var t, e = this._t,
                r = this._i;
            return r >= e.length ? {
                value: void 0,
                done: !0
            } : (t = i(e, r), this._i += t.length, {
                value: t,
                done: !1
            })
        })
    }, function (t, e) {
        t.exports = !0
    }, function (t, e, i) {
        function n() { }
        var a = i(21),
            o = i(114),
            s = i(51),
            l = i(49)("IE_PROTO"),
            u = "prototype",
            d = function () {
                var t, e = i(66)("iframe"),
                    r = s.length;
                for (e.style.display = "none", i(115).appendChild(e), e.src = "javascript:", (t = e.contentWindow.document).open(), t.write("<script>document.F=Object<\/script>"), t.close(), d = t.F; r--;) delete d[u][s[r]];
                return d()
            };
        t.exports = Object.create || function (t, e) {
            var r;
            return null !== t ? (n[u] = a(t), r = new n, n[u] = null, r[l] = t) : r = d(), void 0 === e ? r : o(r, e)
        }
    }, function (t, e, r) {
        var i = r(18).f,
            n = r(23),
            a = r(13)("toStringTag");
        t.exports = function (t, e, r) {
            t && !n(t = r ? t : t.prototype, a) && i(t, a, {
                configurable: !0,
                value: e
            })
        }
    }, function (t, e, r) {
        e.f = r(13)
    }, function (t, e, r) {
        var i = r(17),
            n = r(9),
            a = r(55),
            o = r(58),
            s = r(18).f;
        t.exports = function (t) {
            var e = n.Symbol || (n.Symbol = a ? {} : i.Symbol || {});
            "_" == t.charAt(0) || t in e || s(e, t, {
                value: o.f(t)
            })
        }
    }, function (t, e, r) {
        var i = r(37),
            n = r(33),
            a = r(19),
            o = r(45),
            s = r(23),
            l = r(65),
            u = Object.getOwnPropertyDescriptor;
        e.f = r(22) ? u : function (t, e) {
            if (t = a(t), e = o(e, !0), l) try {
                return u(t, e)
            } catch (t) { }
            if (s(t, e)) return n(!i.f.call(t, e), t[e])
        }
    }, function (t, e, r) {
        "use strict";
        Object.defineProperty(e, "__esModule", {
            value: !0
        });
        var i, n = r(163),
            a = (i = n) && i.__esModule ? i : {
                default: i
            };
        e.default = {
            Kibo: a.default
        }, t.exports = e.default
    }, function (t, e, r) {
        "use strict";
        e.__esModule = !0;
        var i, n = r(84),
            a = (i = n) && i.__esModule ? i : {
                default: i
            };
        e.default = function (t) {
            if (Array.isArray(t)) {
                for (var e = 0, r = Array(t.length); e < t.length; e++) r[e] = t[e];
                return r
            }
            return (0, a.default)(t)
        }
    }, function (t, e) {
        var r, i, n = t.exports = {};

        function a() {
            throw new Error("setTimeout has not been defined")
        }

        function o() {
            throw new Error("clearTimeout has not been defined")
        }

        function s(e) {
            if (r === setTimeout) return setTimeout(e, 0);
            if ((r === a || !r) && setTimeout) return r = setTimeout, setTimeout(e, 0);
            try {
                return r(e, 0)
            } catch (t) {
                try {
                    return r.call(null, e, 0)
                } catch (t) {
                    return r.call(this, e, 0)
                }
            }
        } ! function () {
            try {
                r = "function" == typeof setTimeout ? setTimeout : a
            } catch (t) {
                r = a
            }
            try {
                i = "function" == typeof clearTimeout ? clearTimeout : o
            } catch (t) {
                i = o
            }
        }();
        var l, u = [],
            d = !1,
            c = -1;

        function f() {
            d && l && (d = !1, l.length ? u = l.concat(u) : c = -1, u.length && h())
        }

        function h() {
            if (!d) {
                var t = s(f);
                d = !0;
                for (var e = u.length; e;) {
                    for (l = u, u = []; ++c < e;) l && l[c].run();
                    c = -1, e = u.length
                }
                l = null, d = !1,
                    function (e) {
                        if (i === clearTimeout) return clearTimeout(e);
                        if ((i === o || !i) && clearTimeout) return i = clearTimeout, clearTimeout(e);
                        try {
                            i(e)
                        } catch (t) {
                            try {
                                return i.call(null, e)
                            } catch (t) {
                                return i.call(this, e)
                            }
                        }
                    }(t)
            }
        }

        function p(t, e) {
            this.fun = t, this.array = e
        }

        function g() { }
        n.nextTick = function (t) {
            var e = new Array(arguments.length - 1);
            if (1 < arguments.length)
                for (var r = 1; r < arguments.length; r++) e[r - 1] = arguments[r];
            u.push(new p(t, e)), 1 !== u.length || d || s(h)
        }, p.prototype.run = function () {
            this.fun.apply(null, this.array)
        }, n.title = "browser", n.browser = !0, n.env = {}, n.argv = [], n.version = "", n.versions = {}, n.on = g, n.addListener = g, n.once = g, n.off = g, n.removeListener = g, n.removeAllListeners = g, n.emit = g, n.binding = function (t) {
            throw new Error("process.binding is not supported")
        }, n.cwd = function () {
            return "/"
        }, n.chdir = function (t) {
            throw new Error("process.chdir is not supported")
        }, n.umask = function () {
            return 0
        }
    }, function (t, e, r) {
        "use strict";
        Object.defineProperty(e, "__esModule", {
            value: !0
        }), e.default = r(189), t.exports = e.default
    }, function (t, e, r) {
        t.exports = !r(22) && !r(27)(function () {
            return 7 != Object.defineProperty(r(66)("div"), "a", {
                get: function () {
                    return 7
                }
            }).a
        })
    }, function (t, e, r) {
        var i = r(32),
            n = r(17).document,
            a = i(n) && i(n.createElement);
        t.exports = function (t) {
            return a ? n.createElement(t) : {}
        }
    }, function (t, e, r) {
        var o = r(23),
            s = r(19),
            l = r(106)(!1),
            u = r(49)("IE_PROTO");
        t.exports = function (t, e) {
            var r, i = s(t),
                n = 0,
                a = [];
            for (r in i) r != u && o(i, r) && a.push(r);
            for (; e.length > n;) o(i, r = e[n++]) && (~l(a, r) || a.push(r));
            return a
        }
    }, function (t, e, r) {
        var i = r(46);
        t.exports = Object("z").propertyIsEnumerable(0) ? Object : function (t) {
            return "String" == i(t) ? t.split("") : Object(t)
        }
    }, function (t, e, r) {
        var i = r(48),
            n = Math.min;
        t.exports = function (t) {
            return 0 < t ? n(i(t), 9007199254740991) : 0
        }
    }, function (t, e, r) {
        var n = r(16),
            a = r(9),
            o = r(27);
        t.exports = function (t, e) {
            var r = (a.Object || {})[t] || Object[t],
                i = {};
            i[t] = e(r), n(n.S + n.F * o(function () {
                r(1)
            }), "Object", i)
        }
    }, function (t, e, r) {
        "use strict";

        function A() {
            return this
        }
        var _ = r(55),
            b = r(16),
            E = r(72),
            T = r(26),
            S = r(23),
            k = r(34),
            L = r(113),
            R = r(57),
            C = r(116),
            w = r(13)("iterator"),
            O = !([].keys && "next" in [].keys()),
            P = "values";
        t.exports = function (t, e, r, i, n, a, o) {
            L(r, e, i);

            function s(t) {
                if (!O && t in p) return p[t];
                switch (t) {
                    case "keys":
                    case P:
                        return function () {
                            return new r(this, t)
                        }
                }
                return function () {
                    return new r(this, t)
                }
            }
            var l, u, d, c = e + " Iterator",
                f = n == P,
                h = !1,
                p = t.prototype,
                g = p[w] || p["@@iterator"] || n && p[n],
                m = g || s(n),
                v = n ? f ? s("entries") : m : void 0,
                y = "Array" == e && p.entries || g;
            if (y && (d = C(y.call(new t))) !== Object.prototype && (R(d, c, !0), _ || S(d, w) || T(d, w, A)), f && g && g.name !== P && (h = !0, m = function () {
                return g.call(this)
            }), _ && !o || !O && !h && p[w] || T(p, w, m), k[e] = m, k[c] = A, n)
                if (l = {
                    values: f ? m : s(P),
                    keys: a ? m : s("keys"),
                    entries: v
                }, o)
                    for (u in l) u in p || E(p, u, l[u]);
                else b(b.P + b.F * (O || h), e, l);
            return l
        }
    }, function (t, e, r) {
        t.exports = r(26)
    }, function (t, e, r) {
        r(117);
        for (var i = r(17), n = r(26), a = r(34), o = r(13)("toStringTag"), s = ["NodeList", "DOMTokenList", "MediaList", "StyleSheetList", "CSSRuleList"], l = 0; l < 5; l++) {
            var u = s[l],
                d = i[u],
                c = d && d.prototype;
            c && !c[o] && n(c, o, u), a[u] = a.Array
        }
    }, function (t, e, r) {
        var i = r(67),
            n = r(51).concat("length", "prototype");
        e.f = Object.getOwnPropertyNames || function (t) {
            return i(t, n)
        }
    }, function (t, e, r) {
        t.exports = {
            default: r(131),
            __esModule: !0
        }
    }, function (t, e, r) {
        t.exports = {
            default: r(137),
            __esModule: !0
        }
    }, function (t, e, r) {
        var i = r(147),
            n = r(13)("iterator"),
            a = r(34);
        t.exports = r(9).getIteratorMethod = function (t) {
            if (null != t) return t[n] || t["@@iterator"] || a[i(t)]
        }
    }, function (t, e, r) {
        "use strict";
        Object.defineProperty(e, "__esModule", {
            value: !0
        });
        var i, n = r(166),
            a = (i = n) && i.__esModule ? i : {
                default: i
            };
        e.default = a.default, t.exports = e.default
    }, function (t, e, r) {
        "use strict";
        Object.defineProperty(e, "__esModule", {
            value: !0
        });
        var i = a(r(6)),
            n = a(r(7));

        function a(t) {
            return t && t.__esModule ? t : {
                default: t
            }
        }
        var o = {
            getStyleFor: function (t, e) {
                var r = 1 < arguments.length && void 0 !== e ? e : {
                    baseUrl: ""
                };
                return (0, i.default)('<style class="clappr-style"></style>').html((0, n.default)(t.toString())(r))
            }
        };
        e.default = o, t.exports = e.default
    }, function (t, e, r) {
        "use strict";
        Object.defineProperty(e, "__esModule", {
            value: !0
        });
        var i = d(r(0)),
            n = d(r(1)),
            a = d(r(3)),
            o = d(r(2)),
            s = d(r(4)),
            l = d(r(15)),
            u = d(r(29));

        function d(t) {
            return t && t.__esModule ? t : {
                default: t
            }
        }
        var c, f = (c = l.default, (0, o.default)(h, c), (0, a.default)(h, [{
            key: "name",
            get: function () {
                return "error"
            }
        }], [{
            key: "Levels",
            get: function () {
                return {
                    FATAL: "FATAL",
                    WARN: "WARN",
                    INFO: "INFO"
                }
            }
        }]), h.prototype.createError = function (t) {
            this.core ? this.core.trigger(s.default.ERROR, t) : u.default.warn(this.name, "Core is not set. Error: ", t)
        }, h);

        function h() {
            var t = 0 < arguments.length && void 0 !== arguments[0] ? arguments[0] : {},
                e = arguments[1];
            (0, i.default)(this, h);
            var r = (0, n.default)(this, c.call(this, t));
            return r.core = e, r
        }
        e.default = f, t.exports = e.default
    }, function (t, e, r) {
        "use strict";
        Object.defineProperty(e, "__esModule", {
            value: !0
        });
        var i, n = r(169),
            a = (i = n) && i.__esModule ? i : {
                default: i
            };
        e.default = a.default, t.exports = e.default
    }, function (t, e) {
        t.exports = function (t) {
            return "string" != typeof t ? t : (/^['"].*['"]$/.test(t) && (t = t.slice(1, -1)), /["'() \t\n]/.test(t) ? '"' + t.replace(/"/g, '\\"').replace(/\n/g, "\\n") + '"' : t)
        }
    }, function (t, e, r) {
        "use strict";
        Object.defineProperty(e, "__esModule", {
            value: !0
        });
        var i, n = r(177),
            a = (i = n) && i.__esModule ? i : {
                default: i
            };
        e.default = a.default, t.exports = e.default
    }, function (t, e, r) {
        t.exports = {
            default: r(178),
            __esModule: !0
        }
    }, function (t, e, r) {
        "use strict";
        Object.defineProperty(e, "__esModule", {
            value: !0
        });
        var i, n = r(188),
            a = (i = n) && i.__esModule ? i : {
                default: i
            };
        e.default = a.default, t.exports = e.default
    }, function (t, e, r) {
        "use strict";
        Object.defineProperty(e, "__esModule", {
            value: !0
        });
        var i, n = r(194),
            a = (i = n) && i.__esModule ? i : {
                default: i
            };
        e.default = a.default, t.exports = e.default
    }, function (t, e, r) {
        "use strict";
        Object.defineProperty(e, "__esModule", {
            value: !0
        });
        var i, n = r(195),
            a = (i = n) && i.__esModule ? i : {
                default: i
            };
        e.default = a.default, t.exports = e.default
    }, function (t, e, r) {
        "use strict";
        Object.defineProperty(e, "__esModule", {
            value: !0
        });
        var i, n = r(198),
            a = (i = n) && i.__esModule ? i : {
                default: i
            };
        e.default = a.default, t.exports = e.default
    }, function (t, e, r) {
        t.exports = {
            default: r(199),
            __esModule: !0
        }
    }, function (t, e, r) {
        "use strict";
        Object.defineProperty(e, "__esModule", {
            value: !0
        });
        var i, n = r(202),
            a = (i = n) && i.__esModule ? i : {
                default: i
            };
        e.default = a.default, t.exports = e.default
    }, function (t, e, r) {
        "use strict";
        Object.defineProperty(e, "__esModule", {
            value: !0
        });
        var i, n = r(205),
            a = (i = n) && i.__esModule ? i : {
                default: i
            };
        e.default = a.default, t.exports = e.default
    }, function (t, e, r) {
        "use strict";
        Object.defineProperty(e, "__esModule", {
            value: !0
        });
        var i, n = r(209),
            a = (i = n) && i.__esModule ? i : {
                default: i
            };
        e.default = a.default, t.exports = e.default
    }, function (t, e, r) {
        "use strict";
        Object.defineProperty(e, "__esModule", {
            value: !0
        });
        var i, n = r(215),
            a = (i = n) && i.__esModule ? i : {
                default: i
            };
        e.default = a.default, t.exports = e.default
    }, function (t, e, r) {
        "use strict";
        Object.defineProperty(e, "__esModule", {
            value: !0
        });
        var i, n = r(219),
            a = (i = n) && i.__esModule ? i : {
                default: i
            };
        e.default = a.default, t.exports = e.default
    }, function (t, e, r) {
        "use strict";
        Object.defineProperty(e, "__esModule", {
            value: !0
        });
        var i, n = r(225),
            a = (i = n) && i.__esModule ? i : {
                default: i
            };
        e.default = a.default, t.exports = e.default
    }, function (t, e, r) {
        "use strict";
        Object.defineProperty(e, "__esModule", {
            value: !0
        });
        var i, n = r(226),
            a = (i = n) && i.__esModule ? i : {
                default: i
            };
        e.default = a.default, t.exports = e.default
    }, function (t, e) {
        t.exports = "<%=baseUrl%>/a8c874b93b3d848f39a71260c57e3863.cur"
    }, function (t, e, r) {
        "use strict";
        Object.defineProperty(e, "__esModule", {
            value: !0
        });
        var i, n = r(230),
            a = (i = n) && i.__esModule ? i : {
                default: i
            };
        e.default = a.default, t.exports = e.default
    }, function (t, e, r) {
        "use strict";
        Object.defineProperty(e, "__esModule", {
            value: !0
        });
        var i, n = r(239),
            a = (i = n) && i.__esModule ? i : {
                default: i
            };
        e.default = a.default, t.exports = e.default
    }, function (t, e, r) {
        "use strict";
        Object.defineProperty(e, "__esModule", {
            value: !0
        });
        var i = j(r(101)),
            n = j(r(5)),
            a = j(r(4)),
            o = j(r(11)),
            s = j(r(43)),
            l = j(r(35)),
            u = j(r(24)),
            d = j(r(42)),
            c = j(r(15)),
            f = j(r(30)),
            h = j(r(14)),
            p = j(r(81)),
            g = j(r(78)),
            m = j(r(25)),
            v = j(r(83)),
            y = j(r(31)),
            A = j(r(40)),
            _ = j(r(64)),
            b = j(r(85)),
            E = j(r(87)),
            T = j(r(88)),
            S = j(r(86)),
            k = j(r(41)),
            L = j(r(90)),
            R = j(r(91)),
            C = j(r(96)),
            w = j(r(95)),
            O = j(r(98)),
            P = j(r(99)),
            D = j(r(29)),
            I = j(r(94)),
            x = j(r(92)),
            M = j(r(93)),
            N = j(r(79)),
            F = j(r(61)),
            B = j(r(7)),
            U = j(r(6));

        function j(t) {
            return t && t.__esModule ? t : {
                default: t
            }
        }
        e.default = {
            Player: i.default,
            Mediator: y.default,
            Events: a.default,
            Browser: h.default,
            PlayerInfo: A.default,
            MediaControl: C.default,
            ContainerPlugin: s.default,
            UIContainerPlugin: d.default,
            CorePlugin: l.default,
            UICorePlugin: u.default,
            Playback: o.default,
            Container: p.default,
            Core: g.default,
            PlayerError: m.default,
            Loader: v.default,
            BaseObject: c.default,
            UIObject: f.default,
            Utils: n.default,
            BaseFlashPlayback: _.default,
            Flash: b.default,
            FlasHLS: E.default,
            HLS: T.default,
            HTML5Audio: S.default,
            HTML5Video: k.default,
            HTMLImg: L.default,
            NoOp: R.default,
            ClickToPausePlugin: w.default,
            DVRControls: O.default,
            Favicon: P.default,
            Log: D.default,
            Poster: I.default,
            SpinnerThreeBouncePlugin: x.default,
            WaterMarkPlugin: M.default,
            Styler: N.default,
            Vendor: F.default,
            version: "0.3.13",
            template: B.default,
            $: U.default
        }, t.exports = e.default
    }, function (t, e, r) {
        "use strict";
        Object.defineProperty(e, "__esModule", {
            value: !0
        });
        var i = y(r(12)),
            a = y(r(53)),
            n = y(r(0)),
            o = y(r(1)),
            s = y(r(3)),
            l = y(r(2)),
            u = r(5),
            d = y(r(15)),
            c = y(r(4)),
            f = y(r(14)),
            h = y(r(164)),
            p = y(r(83)),
            g = y(r(40)),
            m = y(r(20)),
            v = y(r(6));

        function y(t) {
            return t && t.__esModule ? t : {
                default: t
            }
        }
        var A, _ = (0, u.currentScriptUrl)().replace(/\/[^/]+$/, ""),
            b = (A = d.default, (0, l.default)(E, A), (0, s.default)(E, [{
                key: "loader",
                set: function (t) {
                    this._loader = t
                },
                get: function () {
                    return this._loader || (this._loader = new p.default(this.options.plugins || {}, this.options.playerId)), this._loader
                }
            }, {
                key: "ended",
                get: function () {
                    return this.core.activeContainer.ended
                }
            }, {
                key: "buffering",
                get: function () {
                    return this.core.activeContainer.buffering
                }
            }, {
                key: "isReady",
                get: function () {
                    return !!this._ready
                }
            }, {
                key: "eventsMapping",
                get: function () {
                    return {
                        onReady: c.default.PLAYER_READY,
                        onResize: c.default.PLAYER_RESIZE,
                        onPlay: c.default.PLAYER_PLAY,
                        onPause: c.default.PLAYER_PAUSE,
                        onStop: c.default.PLAYER_STOP,
                        onEnded: c.default.PLAYER_ENDED,
                        onSeek: c.default.PLAYER_SEEK,
                        onError: c.default.PLAYER_ERROR,
                        onTimeUpdate: c.default.PLAYER_TIMEUPDATE,
                        onVolumeUpdate: c.default.PLAYER_VOLUMEUPDATE,
                        onSubtitleAvailable: c.default.PLAYER_SUBTITLE_AVAILABLE
                    }
                }
            }]), E.prototype.setParentId = function (t) {
                var e = document.querySelector(t);
                return e && this.attachTo(e), this
            }, E.prototype.attachTo = function (t) {
                return this.options.parentElement = t, this.core = this._coreFactory.create(), this._addEventListeners(), this
            }, E.prototype._addEventListeners = function () {
                return this.core.isReady ? this._onReady() : this.listenToOnce(this.core, c.default.CORE_READY, this._onReady), this.listenTo(this.core, c.default.CORE_ACTIVE_CONTAINER_CHANGED, this._containerChanged), this.listenTo(this.core, c.default.CORE_FULLSCREEN, this._onFullscreenChange), this.listenTo(this.core, c.default.CORE_RESIZE, this._onResize), this
            }, E.prototype._addContainerEventListeners = function () {
                var t = this.core.activeContainer;
                return t && (this.listenTo(t, c.default.CONTAINER_PLAY, this._onPlay), this.listenTo(t, c.default.CONTAINER_PAUSE, this._onPause), this.listenTo(t, c.default.CONTAINER_STOP, this._onStop), this.listenTo(t, c.default.CONTAINER_ENDED, this._onEnded), this.listenTo(t, c.default.CONTAINER_SEEK, this._onSeek), this.listenTo(t, c.default.CONTAINER_ERROR, this._onError), this.listenTo(t, c.default.CONTAINER_TIMEUPDATE, this._onTimeUpdate), this.listenTo(t, c.default.CONTAINER_VOLUME, this._onVolumeUpdate), this.listenTo(t, c.default.CONTAINER_SUBTITLE_AVAILABLE, this._onSubtitleAvailable)), this
            }, E.prototype._registerOptionEventListeners = function (t, e) {
                var i = this,
                    n = 0 < arguments.length && void 0 !== t ? t : {},
                    r = 1 < arguments.length && void 0 !== e ? e : {};
                return 0 < (0, a.default)(n).length && (0, a.default)(r).forEach(function (t) {
                    var e = i.eventsMapping[t];
                    e && i.off(e, r[t])
                }), (0, a.default)(n).forEach(function (t) {
                    var e = i.eventsMapping[t];
                    if (e) {
                        var r = n[t];
                        (r = "function" == typeof r && r) && i.on(e, r)
                    }
                }), this
            }, E.prototype._containerChanged = function () {
                this.stopListening(), this._addEventListeners()
            }, E.prototype._onReady = function () {
                this._ready = !0, this._addContainerEventListeners(), this.trigger(c.default.PLAYER_READY)
            }, E.prototype._onFullscreenChange = function (t) {
                this.trigger(c.default.PLAYER_FULLSCREEN, t)
            }, E.prototype._onVolumeUpdate = function (t) {
                this.trigger(c.default.PLAYER_VOLUMEUPDATE, t)
            }, E.prototype._onSubtitleAvailable = function () {
                this.trigger(c.default.PLAYER_SUBTITLE_AVAILABLE)
            }, E.prototype._onResize = function (t) {
                this.trigger(c.default.PLAYER_RESIZE, t)
            }, E.prototype._onPlay = function () {
                this.trigger(c.default.PLAYER_PLAY)
            }, E.prototype._onPause = function () {
                this.trigger(c.default.PLAYER_PAUSE)
            }, E.prototype._onStop = function () {
                this.trigger(c.default.PLAYER_STOP, this.getCurrentTime())
            }, E.prototype._onEnded = function () {
                this.trigger(c.default.PLAYER_ENDED)
            }, E.prototype._onSeek = function (t) {
                this.trigger(c.default.PLAYER_SEEK, t)
            }, E.prototype._onTimeUpdate = function (t) {
                this.trigger(c.default.PLAYER_TIMEUPDATE, t)
            }, E.prototype._onError = function (t) {
                this.trigger(c.default.PLAYER_ERROR, t)
            }, E.prototype._normalizeSources = function (t) {
                var e = t.sources || (void 0 !== t.source ? [t.source] : []);
                return 0 === e.length ? [{
                    source: "",
                    mimeType: ""
                }] : e
            }, E.prototype.resize = function (t) {
                return this.core.resize(t), this
            }, E.prototype.load = function (t, e, r) {
                return void 0 !== r && this.configure({
                    autoPlay: !!r
                }), this.core.load(t, e), this
            }, E.prototype.destroy = function () {
                return this.stopListening(), this.core.destroy(), this
            }, E.prototype.consent = function () {
                return this.core.getCurrentPlayback().consent(), this
            }, E.prototype.play = function () {
                return this.core.activeContainer.play(), this
            }, E.prototype.pause = function () {
                return this.core.activeContainer.pause(), this
            }, E.prototype.stop = function () {
                return this.core.activeContainer.stop(), this
            }, E.prototype.seek = function (t) {
                return this.core.activeContainer.seek(t), this
            }, E.prototype.seekPercentage = function (t) {
                return this.core.activeContainer.seekPercentage(t), this
            }, E.prototype.mute = function () {
                return this._mutedVolume = this.getVolume(), this.setVolume(0), this
            }, E.prototype.unmute = function () {
                return this.setVolume("number" == typeof this._mutedVolume ? this._mutedVolume : 100), this._mutedVolume = null, this
            }, E.prototype.isPlaying = function () {
                return this.core.activeContainer.isPlaying()
            }, E.prototype.isDvrEnabled = function () {
                return this.core.activeContainer.isDvrEnabled()
            }, E.prototype.isDvrInUse = function () {
                return this.core.activeContainer.isDvrInUse()
            }, E.prototype.configure = function (t) {
                var e = 0 < arguments.length && void 0 !== t ? t : {};
                return this._registerOptionEventListeners(e.events, this.options.events), this.core.configure(e), this
            }, E.prototype.getPlugin = function (e) {
                return this.core.plugins.concat(this.core.activeContainer.plugins).filter(function (t) {
                    return t.name === e
                })[0]
            }, E.prototype.getCurrentTime = function () {
                return this.core.activeContainer.getCurrentTime()
            }, E.prototype.getStartTimeOffset = function () {
                return this.core.activeContainer.getStartTimeOffset()
            }, E.prototype.getDuration = function () {
                return this.core.activeContainer.getDuration()
            }, E);

        function E(t) {
            (0, n.default)(this, E);
            var e = (0, o.default)(this, A.call(this, t)),
                r = {
                    playerId: (0, u.uniqueId)(""),
                    persistConfig: !0,
                    width: 640,
                    height: 360,
                    baseUrl: _,
                    allowUserInteraction: f.default.isMobile,
                    playback: {
                        recycleVideo: !0
                    }
                };
            return e._options = v.default.extend(r, t), e.options.sources = e._normalizeSources(t), e.options.chromeless || (e.options.allowUserInteraction = !0), e.options.allowUserInteraction || (e.options.disableKeyboardShortcuts = !0), e._registerOptionEventListeners(e.options.events), e._coreFactory = new h.default(e), e.playerInfo = g.default.getInstance(e.options.playerId), e.playerInfo.currentSize = {
                width: t.width,
                height: t.height
            }, e.playerInfo.options = e.options, e.options.parentId ? e.setParentId(e.options.parentId) : e.options.parent && e.attachTo(e.options.parent), e
        }
        e.default = b, (0, i.default)(b.prototype, m.default), t.exports = e.default
    }, function (t, e, r) {
        r(103), t.exports = r(9).Object.assign
    }, function (t, e, r) {
        var i = r(16);
        i(i.S + i.F, "Object", {
            assign: r(105)
        })
    }, function (t, e) {
        t.exports = function (t) {
            if ("function" != typeof t) throw TypeError(t + " is not a function!");
            return t
        }
    }, function (t, e, r) {
        "use strict";
        var f = r(28),
            h = r(52),
            p = r(37),
            g = r(38),
            m = r(68),
            n = Object.assign;
        t.exports = !n || r(27)(function () {
            var t = {},
                e = {},
                r = Symbol(),
                i = "abcdefghijklmnopqrst";
            return t[r] = 7, i.split("").forEach(function (t) {
                e[t] = t
            }), 7 != n({}, t)[r] || Object.keys(n({}, e)).join("") != i
        }) ? function (t, e) {
            for (var r = g(t), i = arguments.length, n = 1, a = h.f, o = p.f; n < i;)
                for (var s, l = m(arguments[n++]), u = a ? f(l).concat(a(l)) : f(l), d = u.length, c = 0; c < d;) o.call(l, s = u[c++]) && (r[s] = l[s]);
            return r
        } : n
    }, function (t, e, r) {
        var l = r(19),
            u = r(69),
            d = r(107);
        t.exports = function (s) {
            return function (t, e, r) {
                var i, n = l(t),
                    a = u(n.length),
                    o = d(r, a);
                if (s && e != e) {
                    for (; o < a;)
                        if ((i = n[o++]) != i) return !0
                } else
                    for (; o < a; o++)
                        if ((s || o in n) && n[o] === e) return s || o || 0;
                return !s && -1
            }
        }
    }, function (t, e, r) {
        var i = r(48),
            n = Math.max,
            a = Math.min;
        t.exports = function (t, e) {
            return (t = i(t)) < 0 ? n(t + e, 0) : a(t, e)
        }
    }, function (t, e, r) {
        r(109), t.exports = r(9).Object.keys
    }, function (t, e, r) {
        var i = r(38),
            n = r(28);
        r(70)("keys", function () {
            return function (t) {
                return n(i(t))
            }
        })
    }, function (t, e, r) {
        t.exports = {
            default: r(111),
            __esModule: !0
        }
    }, function (t, e, r) {
        r(54), r(73), t.exports = r(58).f("iterator")
    }, function (t, e, r) {
        var l = r(48),
            u = r(47);
        t.exports = function (s) {
            return function (t, e) {
                var r, i, n = String(u(t)),
                    a = l(e),
                    o = n.length;
                return a < 0 || o <= a ? s ? "" : void 0 : (r = n.charCodeAt(a)) < 55296 || 56319 < r || a + 1 === o || (i = n.charCodeAt(a + 1)) < 56320 || 57343 < i ? s ? n.charAt(a) : r : s ? n.slice(a, a + 2) : i - 56320 + (r - 55296 << 10) + 65536
            }
        }
    }, function (t, e, r) {
        "use strict";
        var i = r(56),
            n = r(33),
            a = r(57),
            o = {};
        r(26)(o, r(13)("iterator"), function () {
            return this
        }), t.exports = function (t, e, r) {
            t.prototype = i(o, {
                next: n(1, r)
            }), a(t, e + " Iterator")
        }
    }, function (t, e, r) {
        var o = r(18),
            s = r(21),
            l = r(28);
        t.exports = r(22) ? Object.defineProperties : function (t, e) {
            s(t);
            for (var r, i = l(e), n = i.length, a = 0; a < n;) o.f(t, r = i[a++], e[r]);
            return t
        }
    }, function (t, e, r) {
        t.exports = r(17).document && document.documentElement
    }, function (t, e, r) {
        var i = r(23),
            n = r(38),
            a = r(49)("IE_PROTO"),
            o = Object.prototype;
        t.exports = Object.getPrototypeOf || function (t) {
            return t = n(t), i(t, a) ? t[a] : "function" == typeof t.constructor && t instanceof t.constructor ? t.constructor.prototype : t instanceof Object ? o : null
        }
    }, function (t, e, r) {
        "use strict";
        var i = r(118),
            n = r(119),
            a = r(34),
            o = r(19);
        t.exports = r(71)(Array, "Array", function (t, e) {
            this._t = o(t), this._i = 0, this._k = e
        }, function () {
            var t = this._t,
                e = this._k,
                r = this._i++;
            return !t || r >= t.length ? (this._t = void 0, n(1)) : n(0, "keys" == e ? r : "values" == e ? t[r] : [r, t[r]])
        }, "values"), a.Arguments = a.Array, i("keys"), i("values"), i("entries")
    }, function (t, e) {
        t.exports = function () { }
    }, function (t, e) {
        t.exports = function (t, e) {
            return {
                value: e,
                done: !!t
            }
        }
    }, function (t, e, r) {
        t.exports = {
            default: r(121),
            __esModule: !0
        }
    }, function (t, e, r) {
        r(122), r(128), r(129), r(130), t.exports = r(9).Symbol
    }, function (t, e, r) {
        "use strict";

        function i(t) {
            var e = H[t] = w(F[j]);
            return e._k = t, e
        }

        function n(t, e) {
            k(t);
            for (var r, i = T(e = L(e)), n = 0, a = i.length; n < a;) J(t, r = i[n++], e[r]);
            return t
        }

        function a(t) {
            var e = G.call(this, t = R(t, !0));
            return !(this === z && d(H, t) && !d($, t)) && (!(e || !d(this, t) || !d(H, t) || d(this, K) && this[K][t]) || e)
        }

        function o(t, e) {
            if (t = L(t), e = R(e, !0), t !== z || !d(H, e) || d($, e)) {
                var r = x(t, e);
                return !r || !d(H, e) || d(t, K) && t[K][e] || (r.enumerable = !0), r
            }
        }

        function s(t) {
            for (var e, r = N(L(t)), i = [], n = 0; r.length > n;) d(H, e = r[n++]) || e == K || e == p || i.push(e);
            return i
        }

        function l(t) {
            for (var e, r = t === z, i = N(r ? $ : L(t)), n = [], a = 0; i.length > a;) !d(H, e = i[a++]) || r && !d(z, e) || n.push(H[e]);
            return n
        }
        var u = r(17),
            d = r(23),
            c = r(22),
            f = r(16),
            h = r(72),
            p = r(123).KEY,
            g = r(27),
            m = r(50),
            v = r(57),
            y = r(36),
            A = r(13),
            _ = r(58),
            b = r(59),
            E = r(124),
            T = r(125),
            S = r(126),
            k = r(21),
            L = r(19),
            R = r(45),
            C = r(33),
            w = r(56),
            O = r(127),
            P = r(60),
            D = r(18),
            I = r(28),
            x = P.f,
            M = D.f,
            N = O.f,
            F = u.Symbol,
            B = u.JSON,
            U = B && B.stringify,
            j = "prototype",
            K = A("_hidden"),
            V = A("toPrimitive"),
            G = {}.propertyIsEnumerable,
            Y = m("symbol-registry"),
            H = m("symbols"),
            $ = m("op-symbols"),
            z = Object[j],
            W = "function" == typeof F,
            q = u.QObject,
            X = !q || !q[j] || !q[j].findChild,
            Z = c && g(function () {
                return 7 != w(M({}, "a", {
                    get: function () {
                        return M(this, "a", {
                            value: 7
                        }).a
                    }
                })).a
            }) ? function (t, e, r) {
                var i = x(z, e);
                i && delete z[e], M(t, e, r), i && t !== z && M(z, e, i)
            } : M,
            Q = W && "symbol" == typeof F.iterator ? function (t) {
                return "symbol" == typeof t
            } : function (t) {
                return t instanceof F
            },
            J = function (t, e, r) {
                return t === z && J($, e, r), k(t), e = R(e, !0), k(r), d(H, e) ? (r.enumerable ? (d(t, K) && t[K][e] && (t[K][e] = !1), r = w(r, {
                    enumerable: C(0, !1)
                })) : (d(t, K) || M(t, K, C(1, {})), t[K][e] = !0), Z(t, e, r)) : M(t, e, r)
            };
        W || (h((F = function (t) {
            if (this instanceof F) throw TypeError("Symbol is not a constructor!");
            var e = y(0 < arguments.length ? t : void 0),
                r = function (t) {
                    this === z && r.call($, t), d(this, K) && d(this[K], e) && (this[K][e] = !1), Z(this, e, C(1, t))
                };
            return c && X && Z(z, e, {
                configurable: !0,
                set: r
            }), i(e)
        })[j], "toString", function () {
            return this._k
        }), P.f = o, D.f = J, r(74).f = O.f = s, r(37).f = a, r(52).f = l, c && !r(55) && h(z, "propertyIsEnumerable", a, !0), _.f = function (t) {
            return i(A(t))
        }), f(f.G + f.W + f.F * !W, {
            Symbol: F
        });
        for (var tt = "hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","), et = 0; tt.length > et;) A(tt[et++]);
        for (tt = I(A.store), et = 0; tt.length > et;) b(tt[et++]);
        f(f.S + f.F * !W, "Symbol", {
            for: function (t) {
                return d(Y, t += "") ? Y[t] : Y[t] = F(t)
            },
            keyFor: function (t) {
                if (Q(t)) return E(Y, t);
                throw TypeError(t + " is not a symbol!")
            },
            useSetter: function () {
                X = !0
            },
            useSimple: function () {
                X = !1
            }
        }), f(f.S + f.F * !W, "Object", {
            create: function (t, e) {
                return void 0 === e ? w(t) : n(w(t), e)
            },
            defineProperty: J,
            defineProperties: n,
            getOwnPropertyDescriptor: o,
            getOwnPropertyNames: s,
            getOwnPropertySymbols: l
        }), B && f(f.S + f.F * (!W || g(function () {
            var t = F();
            return "[null]" != U([t]) || "{}" != U({
                a: t
            }) || "{}" != U(Object(t))
        })), "JSON", {
            stringify: function (t) {
                if (void 0 !== t && !Q(t)) {
                    for (var e, r, i = [t], n = 1; n < arguments.length;) i.push(arguments[n++]);
                    return "function" == typeof (e = i[1]) && (r = e), !r && S(e) || (e = function (t, e) {
                        if (r && (e = r.call(this, t, e)), !Q(e)) return e
                    }), i[1] = e, U.apply(B, i)
                }
            }
        }), F[j][V] || r(26)(F[j], V, F[j].valueOf), v(F, "Symbol"), v(Math, "Math", !0), v(u.JSON, "JSON", !0)
    }, function (t, e, r) {
        function i(t) {
            s(t, n, {
                value: {
                    i: "O" + ++l,
                    w: {}
                }
            })
        }
        var n = r(36)("meta"),
            a = r(32),
            o = r(23),
            s = r(18).f,
            l = 0,
            u = Object.isExtensible || function () {
                return !0
            },
            d = !r(27)(function () {
                return u(Object.preventExtensions({}))
            }),
            c = t.exports = {
                KEY: n,
                NEED: !1,
                fastKey: function (t, e) {
                    if (!a(t)) return "symbol" == typeof t ? t : ("string" == typeof t ? "S" : "P") + t;
                    if (!o(t, n)) {
                        if (!u(t)) return "F";
                        if (!e) return "E";
                        i(t)
                    }
                    return t[n].i
                },
                getWeak: function (t, e) {
                    if (!o(t, n)) {
                        if (!u(t)) return !0;
                        if (!e) return !1;
                        i(t)
                    }
                    return t[n].w
                },
                onFreeze: function (t) {
                    return d && c.NEED && u(t) && !o(t, n) && i(t), t
                }
            }
    }, function (t, e, r) {
        var s = r(28),
            l = r(19);
        t.exports = function (t, e) {
            for (var r, i = l(t), n = s(i), a = n.length, o = 0; o < a;)
                if (i[r = n[o++]] === e) return r
        }
    }, function (t, e, r) {
        var s = r(28),
            l = r(52),
            u = r(37);
        t.exports = function (t) {
            var e = s(t),
                r = l.f;
            if (r)
                for (var i, n = r(t), a = u.f, o = 0; n.length > o;) a.call(t, i = n[o++]) && e.push(i);
            return e
        }
    }, function (t, e, r) {
        var i = r(46);
        t.exports = Array.isArray || function (t) {
            return "Array" == i(t)
        }
    }, function (t, e, r) {
        var i = r(19),
            n = r(74).f,
            a = {}.toString,
            o = "object" == typeof window && window && Object.getOwnPropertyNames ? Object.getOwnPropertyNames(window) : [];
        t.exports.f = function (t) {
            return o && "[object Window]" == a.call(t) ? function (t) {
                try {
                    return n(t)
                } catch (t) {
                    return o.slice()
                }
            }(t) : n(i(t))
        }
    }, function (t, e) { }, function (t, e, r) {
        r(59)("asyncIterator")
    }, function (t, e, r) {
        r(59)("observable")
    }, function (t, e, r) {
        r(132);
        var i = r(9).Object;
        t.exports = function (t, e, r) {
            return i.defineProperty(t, e, r)
        }
    }, function (t, e, r) {
        var i = r(16);
        i(i.S + i.F * !r(22), "Object", {
            defineProperty: r(18).f
        })
    }, function (t, e, r) {
        t.exports = {
            default: r(134),
            __esModule: !0
        }
    }, function (t, e, r) {
        r(135), t.exports = r(9).Object.setPrototypeOf
    }, function (t, e, r) {
        var i = r(16);
        i(i.S, "Object", {
            setPrototypeOf: r(136).set
        })
    }, function (t, e, n) {
        function a(t, e) {
            if (i(t), !r(e) && null !== e) throw TypeError(e + ": can't set as prototype!")
        }
        var r = n(32),
            i = n(21);
        t.exports = {
            set: Object.setPrototypeOf || ("__proto__" in {} ? function (t, r, i) {
                try {
                    (i = n(44)(Function.call, n(60).f(Object.prototype, "__proto__").set, 2))(t, []), r = !(t instanceof Array)
                } catch (t) {
                    r = !0
                }
                return function (t, e) {
                    return a(t, e), r ? t.__proto__ = e : i(t, e), t
                }
            }({}, !1) : void 0),
            check: a
        }
    }, function (t, e, r) {
        r(138);
        var i = r(9).Object;
        t.exports = function (t, e) {
            return i.create(t, e)
        }
    }, function (t, e, r) {
        var i = r(16);
        i(i.S, "Object", {
            create: r(56)
        })
    }, function (t, e, r) {
        t.exports = {
            default: r(140),
            __esModule: !0
        }
    }, function (t, e, r) {
        r(141);
        var i = r(9).Object;
        t.exports = function (t, e) {
            return i.getOwnPropertyDescriptor(t, e)
        }
    }, function (t, e, r) {
        var i = r(19),
            n = r(60).f;
        r(70)("getOwnPropertyDescriptor", function () {
            return function (t, e) {
                return n(i(t), e)
            }
        })
    }, function (t, e, r) {
        "use strict";
        Array.prototype.find || Object.defineProperty(Array.prototype, "find", {
            value: function (t, e) {
                if (null == this) throw new TypeError('"this" is null or not defined');
                var r = Object(this),
                    i = r.length >>> 0;
                if ("function" != typeof t) throw new TypeError("predicate must be a function");
                for (var n = e, a = 0; a < i;) {
                    var o = r[a];
                    if (t.call(n, o, a, r)) return o;
                    a++
                }
            }
        })
    }, function (t, e, r) {
        "use strict";
        Object.defineProperty(e, "__esModule", {
            value: !0
        }), e.getDevice = e.getViewportSize = e.getOsData = e.getBrowserData = e.getBrowserInfo = void 0;
        var d = n(r(144)),
            i = n(r(6)),
            c = n(r(148)),
            f = n(r(149));

        function n(t) {
            return t && t.__esModule ? t : {
                default: t
            }
        }
        var h = {},
            a = e.getBrowserInfo = function (t) {
                var e = t.match(/\b(playstation 4|nx|opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i) || [],
                    r = void 0;
                if (/trident/i.test(e[1])) return r = /\brv[ :]+(\d+)/g.exec(t) || [], {
                    name: "IE",
                    version: parseInt(r[1] || "")
                };
                if ("Chrome" === e[1]) {
                    if (null != (r = t.match(/\bOPR\/(\d+)/))) return {
                        name: "Opera",
                        version: parseInt(r[1])
                    };
                    if (null != (r = t.match(/\bEdge\/(\d+)/))) return {
                        name: "Edge",
                        version: parseInt(r[1])
                    }
                } else /android/i.test(t) && (r = t.match(/version\/(\d+)/i)) && (e.splice(1, 1, "Android WebView"), e.splice(2, 1, r[1]));
                return {
                    name: (e = e[2] ? [e[1], e[2]] : [navigator.appName, navigator.appVersion, "-?"])[0],
                    version: parseInt(e[1])
                }
            },
            o = e.getBrowserData = function () {
                var t = {},
                    e = h.userAgent.toLowerCase(),
                    r = !0,
                    i = !1,
                    n = void 0;
                try {
                    for (var a, o = (0, d.default)(c.default); !(r = (a = o.next()).done); r = !0) {
                        var s = a.value,
                            l = new RegExp(s.identifier.toLowerCase()).exec(e);
                        if (null != l && l[1]) {
                            if (t.name = s.name, t.group = s.group, s.versionIdentifier) {
                                var u = new RegExp(s.versionIdentifier.toLowerCase()).exec(e);
                                null != u && u[1] && p(u[1], t)
                            } else p(l[1], t);
                            break
                        }
                    }
                } catch (t) {
                    i = !0, n = t
                } finally {
                    try {
                        !r && o.return && o.return()
                    } finally {
                        if (i) throw n
                    }
                }
                return t
            },
            p = function (t, e) {
                var r = t.split(".", 2);
                e.fullVersion = t, r[0] && (e.majorVersion = parseInt(r[0])), r[1] && (e.minorVersion = parseInt(r[1]))
            },
            s = e.getOsData = function () {
                var t = {},
                    e = h.userAgent.toLowerCase(),
                    r = !0,
                    i = !1,
                    n = void 0;
                try {
                    for (var a, o = (0, d.default)(f.default); !(r = (a = o.next()).done); r = !0) {
                        var s = a.value,
                            l = new RegExp(s.identifier.toLowerCase()).exec(e);
                        if (null != l) {
                            if (t.name = s.name, t.group = s.group, s.version) g(s.version, s.versionSeparator ? s.versionSeparator : ".", t);
                            else if (l[1]) g(l[1], s.versionSeparator ? s.versionSeparator : ".", t);
                            else if (s.versionIdentifier) {
                                var u = new RegExp(s.versionIdentifier.toLowerCase()).exec(e);
                                null != u && u[1] && g(u[1], s.versionSeparator ? s.versionSeparator : ".", t)
                            }
                            break
                        }
                    }
                } catch (t) {
                    i = !0, n = t
                } finally {
                    try {
                        !r && o.return && o.return()
                    } finally {
                        if (i) throw n
                    }
                }
                return t
            },
            g = function (t, e, r) {
                var i = "[" == e.substr(0, 1) ? new RegExp(e, "g") : e,
                    n = t.split(i, 2);
                "." != e && (t = t.replace(new RegExp(e, "g"), ".")), r.fullVersion = t, n && n[0] && (r.majorVersion = parseInt(n[0])), n && n[1] && (r.minorVersion = parseInt(n[1]))
            },
            l = e.getViewportSize = function () {
                var t = {};
                return t.width = (0, i.default)(window).width(), t.height = (0, i.default)(window).height(), t
            },
            u = e.getDevice = function (t) {
                var e = /\((iP(?:hone|ad|od))?(?:[^;]*; ){0,2}([^)]+(?=\)))/.exec(t);
                return e && (e[1] || e[2]) || ""
            },
            m = a(navigator.userAgent);
        h.isEdge = /edge/i.test(navigator.userAgent), h.isChrome = /chrome|CriOS/i.test(navigator.userAgent) && !h.isEdge, h.isSafari = /safari/i.test(navigator.userAgent) && !h.isChrome && !h.isEdge, h.isFirefox = /firefox/i.test(navigator.userAgent), h.isLegacyIE = !!window.ActiveXObject, h.isIE = h.isLegacyIE || /trident.*rv:1\d/i.test(navigator.userAgent), h.isIE11 = /trident.*rv:11/i.test(navigator.userAgent), h.isChromecast = h.isChrome && /CrKey/i.test(navigator.userAgent), h.isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|Windows Phone|IEMobile|Mobile Safari|Opera Mini/i.test(navigator.userAgent), h.isiOS = /iPad|iPhone|iPod/i.test(navigator.userAgent), h.isAndroid = /Android/i.test(navigator.userAgent), h.isWindowsPhone = /Windows Phone/i.test(navigator.userAgent), h.isWin8App = /MSAppHost/i.test(navigator.userAgent), h.isWiiU = /WiiU/i.test(navigator.userAgent), h.isPS4 = /PlayStation 4/i.test(navigator.userAgent), h.hasLocalstorage = function () {
            try {
                return localStorage.setItem("clappr", "clappr"), localStorage.removeItem("clappr"), !0
            } catch (t) {
                return !1
            }
        }(), h.hasFlash = function () {
            try {
                return !!new ActiveXObject("ShockwaveFlash.ShockwaveFlash")
            } catch (t) {
                return !(!navigator.mimeTypes || void 0 === navigator.mimeTypes["application/x-shockwave-flash"] || !navigator.mimeTypes["application/x-shockwave-flash"].enabledPlugin)
            }
        }(), h.name = m.name, h.version = m.version, h.userAgent = navigator.userAgent, h.data = o(), h.os = s(), h.viewport = l(), h.device = u(h.userAgent), void 0 !== window.orientation && function () {
            switch (window.orientation) {
                case -90:
                case 90:
                    h.viewport.orientation = "landscape";
                    break;
                default:
                    h.viewport.orientation = "portrait"
            }
        }(), e.default = h
    }, function (t, e, r) {
        t.exports = {
            default: r(145),
            __esModule: !0
        }
    }, function (t, e, r) {
        r(73), r(54), t.exports = r(146)
    }, function (t, e, r) {
        var i = r(21),
            n = r(77);
        t.exports = r(9).getIterator = function (t) {
            var e = n(t);
            if ("function" != typeof e) throw TypeError(t + " is not iterable!");
            return i(e.call(t))
        }
    }, function (t, e, r) {
        var n = r(46),
            a = r(13)("toStringTag"),
            o = "Arguments" == n(function () {
                return arguments
            }());
        t.exports = function (t) {
            var e, r, i;
            return void 0 === t ? "Undefined" : null === t ? "Null" : "string" == typeof (r = function (t, e) {
                try {
                    return t[e]
                } catch (t) { }
            }(e = Object(t), a)) ? r : o ? n(e) : "Object" == (i = n(e)) && "function" == typeof e.callee ? "Arguments" : i
        }
    }, function (t, e, r) {
        "use strict";
        Object.defineProperty(e, "__esModule", {
            value: !0
        });
        e.default = [{
            name: "Chromium",
            group: "Chrome",
            identifier: "Chromium/([0-9.]*)"
        }, {
            name: "Chrome Mobile",
            group: "Chrome",
            identifier: "Chrome/([0-9.]*) Mobile",
            versionIdentifier: "Chrome/([0-9.]*)"
        }, {
            name: "Chrome",
            group: "Chrome",
            identifier: "Chrome/([0-9.]*)"
        }, {
            name: "Chrome for iOS",
            group: "Chrome",
            identifier: "CriOS/([0-9.]*)"
        }, {
            name: "Android Browser",
            group: "Chrome",
            identifier: "CrMo/([0-9.]*)"
        }, {
            name: "Firefox",
            group: "Firefox",
            identifier: "Firefox/([0-9.]*)"
        }, {
            name: "Opera Mini",
            group: "Opera",
            identifier: "Opera Mini/([0-9.]*)"
        }, {
            name: "Opera",
            group: "Opera",
            identifier: "Opera ([0-9.]*)"
        }, {
            name: "Opera",
            group: "Opera",
            identifier: "Opera/([0-9.]*)",
            versionIdentifier: "Version/([0-9.]*)"
        }, {
            name: "IEMobile",
            group: "Explorer",
            identifier: "IEMobile/([0-9.]*)"
        }, {
            name: "Internet Explorer",
            group: "Explorer",
            identifier: "MSIE ([a-zA-Z0-9.]*)"
        }, {
            name: "Internet Explorer",
            group: "Explorer",
            identifier: "Trident/([0-9.]*)",
            versionIdentifier: "rv:([0-9.]*)"
        }, {
            name: "Spartan",
            group: "Spartan",
            identifier: "Edge/([0-9.]*)",
            versionIdentifier: "Edge/([0-9.]*)"
        }, {
            name: "Safari",
            group: "Safari",
            identifier: "Safari/([0-9.]*)",
            versionIdentifier: "Version/([0-9.]*)"
        }], t.exports = e.default
    }, function (t, e, r) {
        "use strict";
        Object.defineProperty(e, "__esModule", {
            value: !0
        });
        e.default = [{
            name: "Windows 2000",
            group: "Windows",
            identifier: "Windows NT 5.0",
            version: "5.0"
        }, {
            name: "Windows XP",
            group: "Windows",
            identifier: "Windows NT 5.1",
            version: "5.1"
        }, {
            name: "Windows Vista",
            group: "Windows",
            identifier: "Windows NT 6.0",
            version: "6.0"
        }, {
            name: "Windows 7",
            group: "Windows",
            identifier: "Windows NT 6.1",
            version: "7.0"
        }, {
            name: "Windows 8",
            group: "Windows",
            identifier: "Windows NT 6.2",
            version: "8.0"
        }, {
            name: "Windows 8.1",
            group: "Windows",
            identifier: "Windows NT 6.3",
            version: "8.1"
        }, {
            name: "Windows 10",
            group: "Windows",
            identifier: "Windows NT 10.0",
            version: "10.0"
        }, {
            name: "Windows Phone",
            group: "Windows Phone",
            identifier: "Windows Phone ([0-9.]*)"
        }, {
            name: "Windows Phone",
            group: "Windows Phone",
            identifier: "Windows Phone OS ([0-9.]*)"
        }, {
            name: "Windows",
            group: "Windows",
            identifier: "Windows"
        }, {
            name: "Chrome OS",
            group: "Chrome OS",
            identifier: "CrOS"
        }, {
            name: "Android",
            group: "Android",
            identifier: "Android",
            versionIdentifier: "Android ([a-zA-Z0-9.-]*)"
        }, {
            name: "iPad",
            group: "iOS",
            identifier: "iPad",
            versionIdentifier: "OS ([0-9_]*)",
            versionSeparator: "[_|.]"
        }, {
            name: "iPod",
            group: "iOS",
            identifier: "iPod",
            versionIdentifier: "OS ([0-9_]*)",
            versionSeparator: "[_|.]"
        }, {
            name: "iPhone",
            group: "iOS",
            identifier: "iPhone OS",
            versionIdentifier: "OS ([0-9_]*)",
            versionSeparator: "[_|.]"
        }, {
            name: "Mac OS X High Sierra",
            group: "Mac OS",
            identifier: "Mac OS X (10([_|.])13([0-9_.]*))",
            versionSeparator: "[_|.]"
        }, {
            name: "Mac OS X Sierra",
            group: "Mac OS",
            identifier: "Mac OS X (10([_|.])12([0-9_.]*))",
            versionSeparator: "[_|.]"
        }, {
            name: "Mac OS X El Capitan",
            group: "Mac OS",
            identifier: "Mac OS X (10([_|.])11([0-9_.]*))",
            versionSeparator: "[_|.]"
        }, {
            name: "Mac OS X Yosemite",
            group: "Mac OS",
            identifier: "Mac OS X (10([_|.])10([0-9_.]*))",
            versionSeparator: "[_|.]"
        }, {
            name: "Mac OS X Mavericks",
            group: "Mac OS",
            identifier: "Mac OS X (10([_|.])9([0-9_.]*))",
            versionSeparator: "[_|.]"
        }, {
            name: "Mac OS X Mountain Lion",
            group: "Mac OS",
            identifier: "Mac OS X (10([_|.])8([0-9_.]*))",
            versionSeparator: "[_|.]"
        }, {
            name: "Mac OS X Lion",
            group: "Mac OS",
            identifier: "Mac OS X (10([_|.])7([0-9_.]*))",
            versionSeparator: "[_|.]"
        }, {
            name: "Mac OS X Snow Leopard",
            group: "Mac OS",
            identifier: "Mac OS X (10([_|.])6([0-9_.]*))",
            versionSeparator: "[_|.]"
        }, {
            name: "Mac OS X Leopard",
            group: "Mac OS",
            identifier: "Mac OS X (10([_|.])5([0-9_.]*))",
            versionSeparator: "[_|.]"
        }, {
            name: "Mac OS X Tiger",
            group: "Mac OS",
            identifier: "Mac OS X (10([_|.])4([0-9_.]*))",
            versionSeparator: "[_|.]"
        }, {
            name: "Mac OS X Panther",
            group: "Mac OS",
            identifier: "Mac OS X (10([_|.])3([0-9_.]*))",
            versionSeparator: "[_|.]"
        }, {
            name: "Mac OS X Jaguar",
            group: "Mac OS",
            identifier: "Mac OS X (10([_|.])2([0-9_.]*))",
            versionSeparator: "[_|.]"
        }, {
            name: "Mac OS X Puma",
            group: "Mac OS",
            identifier: "Mac OS X (10([_|.])1([0-9_.]*))",
            versionSeparator: "[_|.]"
        }, {
            name: "Mac OS X Cheetah",
            group: "Mac OS",
            identifier: "Mac OS X (10([_|.])0([0-9_.]*))",
            versionSeparator: "[_|.]"
        }, {
            name: "Mac OS",
            group: "Mac OS",
            identifier: "Mac OS"
        }, {
            name: "Ubuntu",
            group: "Linux",
            identifier: "Ubuntu",
            versionIdentifier: "Ubuntu/([0-9.]*)"
        }, {
            name: "Debian",
            group: "Linux",
            identifier: "Debian"
        }, {
            name: "Gentoo",
            group: "Linux",
            identifier: "Gentoo"
        }, {
            name: "Linux",
            group: "Linux",
            identifier: "Linux"
        }, {
            name: "BlackBerry",
            group: "BlackBerry",
            identifier: "BlackBerry"
        }], t.exports = e.default
    }, function (t, e, r) {
        "use strict";
        Object.defineProperty(e, "__esModule", {
            value: !0
        });
        var i = e.mp4 = "data:video/mp4;base64,AAAAHGZ0eXBpc29tAAACAGlzb21pc28ybXA0MQAAAAhmcmVlAAAC721kYXQhEAUgpBv/wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA3pwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcCEQBSCkG//AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADengAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcAAAAsJtb292AAAAbG12aGQAAAAAAAAAAAAAAAAAAAPoAAAALwABAAABAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAAAB7HRyYWsAAABcdGtoZAAAAAMAAAAAAAAAAAAAAAIAAAAAAAAALwAAAAAAAAAAAAAAAQEAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAACRlZHRzAAAAHGVsc3QAAAAAAAAAAQAAAC8AAAAAAAEAAAAAAWRtZGlhAAAAIG1kaGQAAAAAAAAAAAAAAAAAAKxEAAAIAFXEAAAAAAAtaGRscgAAAAAAAAAAc291bgAAAAAAAAAAAAAAAFNvdW5kSGFuZGxlcgAAAAEPbWluZgAAABBzbWhkAAAAAAAAAAAAAAAkZGluZgAAABxkcmVmAAAAAAAAAAEAAAAMdXJsIAAAAAEAAADTc3RibAAAAGdzdHNkAAAAAAAAAAEAAABXbXA0YQAAAAAAAAABAAAAAAAAAAAAAgAQAAAAAKxEAAAAAAAzZXNkcwAAAAADgICAIgACAASAgIAUQBUAAAAAAfQAAAHz+QWAgIACEhAGgICAAQIAAAAYc3R0cwAAAAAAAAABAAAAAgAABAAAAAAcc3RzYwAAAAAAAAABAAAAAQAAAAIAAAABAAAAHHN0c3oAAAAAAAAAAAAAAAIAAAFzAAABdAAAABRzdGNvAAAAAAAAAAEAAAAsAAAAYnVkdGEAAABabWV0YQAAAAAAAAAhaGRscgAAAAAAAAAAbWRpcmFwcGwAAAAAAAAAAAAAAAAtaWxzdAAAACWpdG9vAAAAHWRhdGEAAAABAAAAAExhdmY1Ni40MC4xMDE=";
        e.default = {
            mp4: i
        }
    }, function (t, e, r) {
        "use strict";
        Object.defineProperty(e, "__esModule", {
            value: !0
        }), e.volumeMute = e.volume = e.stop = e.reload = e.play = e.pause = e.hd = e.fullscreen = e.exitFullscreen = e.cc = void 0;
        var i = h(r(152)),
            n = h(r(153)),
            a = h(r(154)),
            o = h(r(155)),
            s = h(r(156)),
            l = h(r(157)),
            u = h(r(158)),
            d = h(r(159)),
            c = h(r(160)),
            f = h(r(161));

        function h(t) {
            return t && t.__esModule ? t : {
                default: t
            }
        }
        e.cc = c.default, e.exitFullscreen = u.default, e.fullscreen = l.default, e.hd = d.default, e.pause = n.default, e.play = i.default, e.reload = f.default, e.stop = a.default, e.volume = o.default, e.volumeMute = s.default;
        e.default = {
            cc: c.default,
            exitFullscreen: u.default,
            fullscreen: l.default,
            hd: d.default,
            pause: n.default,
            play: i.default,
            reload: f.default,
            stop: a.default,
            volume: o.default,
            volumeMute: s.default
        }
    }, function (t, e) {
        t.exports = '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill="#010101" d="M1.425.35L14.575 8l-13.15 7.65V.35z"></path></svg>'
    }, function (t, e) {
        t.exports = '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill-rule="evenodd" clip-rule="evenodd" fill="#010101" d="M1.712 14.76H6.43V1.24H1.71v13.52zm7.86-13.52v13.52h4.716V1.24H9.573z"></path></svg>'
    }, function (t, e) {
        t.exports = '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill-rule="evenodd" clip-rule="evenodd" fill="#010101" d="M1.712 1.24h12.6v13.52h-12.6z"></path></svg>'
    }, function (t, e) {
        t.exports = '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill-rule="evenodd" clip-rule="evenodd" fill="#010101" d="M11.5 11h-.002v1.502L7.798 10H4.5V6h3.297l3.7-2.502V4.5h.003V11zM11 4.49L7.953 6.5H5v3h2.953L11 11.51V4.49z"></path></svg>'
    }, function (t, e) {
        t.exports = '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill-rule="evenodd" clip-rule="evenodd" fill="#010101" d="M9.75 11.51L6.7 9.5H3.75v-3H6.7L9.75 4.49v.664l.497.498V3.498L6.547 6H3.248v4h3.296l3.7 2.502v-2.154l-.497.5v.662zm3-5.165L12.404 6l-1.655 1.653L9.093 6l-.346.345L10.402 8 8.747 9.654l.346.347 1.655-1.653L12.403 10l.348-.346L11.097 8l1.655-1.655z"></path></svg>'
    }, function (t, e) {
        t.exports = '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill="#010101" d="M7.156 8L4 11.156V8.5H3V13h4.5v-1H4.844L8 8.844 7.156 8zM8.5 3v1h2.657L8 7.157 8.846 8 12 4.844V7.5h1V3H8.5z"></path></svg>'
    }, function (t, e) {
        t.exports = '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill="#010101" d="M13.5 3.344l-.844-.844L9.5 5.656V3h-1v4.5H13v-1h-2.656L13.5 3.344zM3 9.5h2.656L2.5 12.656l.844.844L6.5 10.344V13h1V8.5H3v1z"></path></svg>'
    }, function (t, e) {
        t.exports = '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill="#010101" d="M5.375 7.062H2.637V4.26H.502v7.488h2.135V8.9h2.738v2.848h2.133V4.26H5.375v2.802zm5.97-2.81h-2.84v7.496h2.798c2.65 0 4.195-1.607 4.195-3.77v-.022c0-2.162-1.523-3.704-4.154-3.704zm2.06 3.758c0 1.21-.81 1.896-2.03 1.896h-.83V6.093h.83c1.22 0 2.03.696 2.03 1.896v.02z"></path></svg>'
    }, function (t, e) {
        t.exports = '<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 49 41.8" style="enable-background:new 0 0 49 41.8;" xml:space="preserve"><path d="M47.1,0H3.2C1.6,0,0,1.2,0,2.8v31.5C0,35.9,1.6,37,3.2,37h11.9l3.2,1.9l4.7,2.7c0.9,0.5,2-0.1,2-1.1V37h22.1 c1.6,0,1.9-1.1,1.9-2.7V2.8C49,1.2,48.7,0,47.1,0z M7.2,18.6c0-4.8,3.5-9.3,9.9-9.3c4.8,0,7.1,2.7,7.1,2.7l-2.5,4 c0,0-1.7-1.7-4.2-1.7c-2.8,0-4.3,2.1-4.3,4.3c0,2.1,1.5,4.4,4.5,4.4c2.5,0,4.9-2.1,4.9-2.1l2.2,4.2c0,0-2.7,2.9-7.6,2.9 C10.8,27.9,7.2,23.5,7.2,18.6z M36.9,27.9c-6.4,0-9.9-4.4-9.9-9.3c0-4.8,3.5-9.3,9.9-9.3C41.7,9.3,44,12,44,12l-2.5,4 c0,0-1.7-1.7-4.2-1.7c-2.8,0-4.3,2.1-4.3,4.3c0,2.1,1.5,4.4,4.5,4.4c2.5,0,4.9-2.1,4.9-2.1l2.2,4.2C44.5,25,41.9,27.9,36.9,27.9z"></path></svg>'
    }, function (t, e) {
        t.exports = '<svg fill="#FFFFFF" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg>'
    }, function (t, e, r) {
        "use strict";
        Object.defineProperty(e, "__esModule", {
            value: !0
        });
        var i, n = r(0),
            a = (i = n) && i.__esModule ? i : {
                default: i
            },
            o = r(61);
        var s = "font-weight: bold; font-size: 13px;",
            l = "color: #ff8000;" + s,
            u = "color: #ff0000;" + s,
            d = ["color: #0000ff;font-weight: bold; font-size: 13px;", "color: #006600;font-weight: bold; font-size: 13px;", l, u, u],
            c = ["debug", "info", "warn", "error", "disabled"],
            f = (h.prototype.debug = function (t) {
                this.log(t, 0, Array.prototype.slice.call(arguments, 1))
            }, h.prototype.info = function (t) {
                this.log(t, 1, Array.prototype.slice.call(arguments, 1))
            }, h.prototype.warn = function (t) {
                this.log(t, 2, Array.prototype.slice.call(arguments, 1))
            }, h.prototype.error = function (t) {
                this.log(t, 3, Array.prototype.slice.call(arguments, 1))
            }, h.prototype.onOff = function () {
                this.level === this.offLevel ? this.level = this.previousLevel : (this.previousLevel = this.level, this.level = this.offLevel), window.console && window.console.log && window.console.log("%c[Clappr.Log] set log level to " + c[this.level], l)
            }, h.prototype.level = function (t) {
                this.level = t
            }, h.prototype.log = function (t, e, r) {
                if (!(0 <= this.BLACKLIST.indexOf(r[0]) || e < this.level)) {
                    r || (r = t, t = null);
                    var i = d[e],
                        n = "";
                    t && (n = "[" + t + "]"), window.console && window.console.log && window.console.log.apply(console, ["%c[" + c[e] + "]" + n, i].concat(r))
                }
            }, h);

        function h() {
            var t = this,
                e = 0 < arguments.length && void 0 !== arguments[0] ? arguments[0] : 1,
                r = 1 < arguments.length && void 0 !== arguments[1] ? arguments[1] : 3;
            (0, a.default)(this, h), this.kibo = new o.Kibo, this.kibo.down(["ctrl shift d"], function () {
                return t.onOff()
            }), this.BLACKLIST = ["timeupdate", "playback:timeupdate", "playback:progress", "container:hover", "container:timeupdate", "container:progress"], this.level = e, this.offLevel = r
        } (e.default = f).LEVEL_DEBUG = 0, f.LEVEL_INFO = 1, f.LEVEL_WARN = 2, f.LEVEL_ERROR = 3, f.getInstance = function () {
            return void 0 === this._instance && (this._instance = new this, this._instance.previousLevel = this._instance.level, this._instance.level = this._instance.offLevel), this._instance
        }, f.setLevel = function (t) {
            this.getInstance().level = t
        }, f.debug = function () {
            this.getInstance().debug.apply(this.getInstance(), arguments)
        }, f.info = function () {
            this.getInstance().info.apply(this.getInstance(), arguments)
        }, f.warn = function () {
            this.getInstance().warn.apply(this.getInstance(), arguments)
        }, f.error = function () {
            this.getInstance().error.apply(this.getInstance(), arguments)
        }, t.exports = e.default
    }, function (t, e, r) {
        "use strict";
        Object.defineProperty(e, "__esModule", {
            value: !0
        });

        function s(t) {
            this.element = t || window.document, this.initialize()
        }
        s.KEY_NAMES_BY_CODE = {
            8: "backspace",
            9: "tab",
            13: "enter",
            16: "shift",
            17: "ctrl",
            18: "alt",
            20: "caps_lock",
            27: "esc",
            32: "space",
            37: "left",
            38: "up",
            39: "right",
            40: "down",
            48: "0",
            49: "1",
            50: "2",
            51: "3",
            52: "4",
            53: "5",
            54: "6",
            55: "7",
            56: "8",
            57: "9",
            65: "a",
            66: "b",
            67: "c",
            68: "d",
            69: "e",
            70: "f",
            71: "g",
            72: "h",
            73: "i",
            74: "j",
            75: "k",
            76: "l",
            77: "m",
            78: "n",
            79: "o",
            80: "p",
            81: "q",
            82: "r",
            83: "s",
            84: "t",
            85: "u",
            86: "v",
            87: "w",
            88: "x",
            89: "y",
            90: "z",
            112: "f1",
            113: "f2",
            114: "f3",
            115: "f4",
            116: "f5",
            117: "f6",
            118: "f7",
            119: "f8",
            120: "f9",
            121: "f10",
            122: "f11",
            123: "f12"
        }, s.KEY_CODES_BY_NAME = {},
            function () {
                for (var t in s.KEY_NAMES_BY_CODE) Object.prototype.hasOwnProperty.call(s.KEY_NAMES_BY_CODE, t) && (s.KEY_CODES_BY_NAME[s.KEY_NAMES_BY_CODE[t]] = +t)
            }(), s.MODIFIERS = ["shift", "ctrl", "alt"], s.registerEvent = document.addEventListener ? function (t, e, r) {
                t.addEventListener(e, r, !1)
            } : document.attachEvent ? function (t, e, r) {
                t.attachEvent("on" + e, r)
            } : void 0, s.unregisterEvent = document.removeEventListener ? function (t, e, r) {
                t.removeEventListener(e, r, !1)
            } : document.detachEvent ? function (t, e, r) {
                t.detachEvent("on" + e, r)
            } : void 0, s.stringContains = function (t, e) {
                return -1 !== t.indexOf(e)
            }, s.neatString = function (t) {
                return t.replace(/^\s+|\s+$/g, "").replace(/\s+/g, " ")
            }, s.capitalize = function (t) {
                return t.toLowerCase().replace(/^./, function (t) {
                    return t.toUpperCase()
                })
            }, s.isString = function (t) {
                return s.stringContains(Object.prototype.toString.call(t), "String")
            }, s.arrayIncludes = Array.prototype.indexOf ? function (t, e) {
                return -1 !== t.indexOf(e)
            } : function (t, e) {
                for (var r = 0; r < t.length; r++)
                    if (t[r] === e) return !0;
                return !1
            }, s.extractModifiers = function (t) {
                var e, r;
                for (e = [], r = 0; r < s.MODIFIERS.length; r++) s.stringContains(t, s.MODIFIERS[r]) && e.push(s.MODIFIERS[r]);
                return e
            }, s.extractKey = function (t) {
                var e, r;
                for (e = s.neatString(t).split(" "), r = 0; r < e.length; r++)
                    if (!s.arrayIncludes(s.MODIFIERS, e[r])) return e[r]
            }, s.modifiersAndKey = function (t) {
                var e, r;
                return s.stringContains(t, "any") ? s.neatString(t).split(" ").slice(0, 2).join(" ") : (e = s.extractModifiers(t), (r = s.extractKey(t)) && !s.arrayIncludes(s.MODIFIERS, r) && e.push(r), e.join(" "))
            }, s.keyName = function (t) {
                return s.KEY_NAMES_BY_CODE[t + ""]
            }, s.keyCode = function (t) {
                return +s.KEY_CODES_BY_NAME[t]
            }, s.prototype.initialize = function () {
                var t, e = this;
                for (this.lastKeyCode = -1, this.lastModifiers = {}, t = 0; t < s.MODIFIERS.length; t++) this.lastModifiers[s.MODIFIERS[t]] = !1;
                this.keysDown = {
                    any: []
                }, this.keysUp = {
                    any: []
                }, this.downHandler = this.handler("down"), this.upHandler = this.handler("up"), s.registerEvent(this.element, "keydown", this.downHandler), s.registerEvent(this.element, "keyup", this.upHandler), s.registerEvent(window, "unload", function t() {
                    s.unregisterEvent(e.element, "keydown", e.downHandler), s.unregisterEvent(e.element, "keyup", e.upHandler), s.unregisterEvent(window, "unload", t)
                })
            }, s.prototype.handler = function (n) {
                var a = this;
                return function (t) {
                    var e, r, i;
                    for (t = t || window.event, a.lastKeyCode = t.keyCode, e = 0; e < s.MODIFIERS.length; e++) a.lastModifiers[s.MODIFIERS[e]] = t[s.MODIFIERS[e] + "Key"];
                    for (s.arrayIncludes(s.MODIFIERS, s.keyName(a.lastKeyCode)) && (a.lastModifiers[s.keyName(a.lastKeyCode)] = !0), r = a["keys" + s.capitalize(n)], e = 0; e < r.any.length; e++) !1 === r.any[e](t) && t.preventDefault && t.preventDefault();
                    if (r[i = a.lastModifiersAndKey()])
                        for (e = 0; e < r[i].length; e++) !1 === r[i][e](t) && t.preventDefault && t.preventDefault()
                }
            }, s.prototype.registerKeys = function (t, e, r) {
                var i, n, a = this["keys" + s.capitalize(t)];
                for (s.isString(e) && (e = [e]), i = 0; i < e.length; i++) n = e[i], a[n = s.modifiersAndKey(n + "")] ? a[n].push(r) : a[n] = [r];
                return this
            }, s.prototype.unregisterKeys = function (t, e, r) {
                var i, n, a, o = this["keys" + s.capitalize(t)];
                for (s.isString(e) && (e = [e]), i = 0; i < e.length; i++)
                    if (a = e[i], a = s.modifiersAndKey(a + ""), null === r) delete o[a];
                    else if (o[a])
                        for (n = 0; n < o[a].length; n++)
                            if (String(o[a][n]) === String(r)) {
                                o[a].splice(n, 1);
                                break
                            } return this
            }, s.prototype.off = function (t) {
                return this.unregisterKeys("down", t, null)
            }, s.prototype.delegate = function (t, e, r) {
                return null !== r || void 0 !== r ? this.registerKeys(t, e, r) : this.unregisterKeys(t, e, r)
            }, s.prototype.down = function (t, e) {
                return this.delegate("down", t, e)
            }, s.prototype.up = function (t, e) {
                return this.delegate("up", t, e)
            }, s.prototype.lastKey = function (t) {
                return t ? this.lastModifiers[t] : s.keyName(this.lastKeyCode)
            }, s.prototype.lastModifiersAndKey = function () {
                var t, e;
                for (t = [], e = 0; e < s.MODIFIERS.length; e++) this.lastKey(s.MODIFIERS[e]) && t.push(s.MODIFIERS[e]);
                return s.arrayIncludes(t, this.lastKey()) || t.push(this.lastKey()), t.join(" ")
            }, e.default = s, t.exports = e.default
    }, function (t, e, r) {
        "use strict";
        Object.defineProperty(e, "__esModule", {
            value: !0
        });
        var i, n = r(165),
            a = (i = n) && i.__esModule ? i : {
                default: i
            };
        e.default = a.default, t.exports = e.default
    }, function (t, e, r) {
        "use strict";
        Object.defineProperty(e, "__esModule", {
            value: !0
        });
        var i = u(r(0)),
            n = u(r(1)),
            a = u(r(3)),
            o = u(r(2)),
            s = u(r(15)),
            l = u(r(78));

        function u(t) {
            return t && t.__esModule ? t : {
                default: t
            }
        }
        var d, c = (d = s.default, (0, o.default)(f, d), (0, a.default)(f, [{
            key: "loader",
            get: function () {
                return this.player.loader
            }
        }]), f.prototype.create = function () {
            return this.options.loader = this.loader, this.core = new l.default(this.options), this.addCorePlugins(), this.core.createContainers(this.options), this.core
        }, f.prototype.addCorePlugins = function () {
            var r = this;
            return this.loader.corePlugins.forEach(function (t) {
                var e = new t(r.core);
                r.core.addPlugin(e), r.setupExternalInterface(e)
            }), this.core
        }, f.prototype.setupExternalInterface = function (t) {
            var e = t.getExternalInterface();
            for (var r in e) this.player[r] = e[r].bind(t), this.core[r] = e[r].bind(t)
        }, f);

        function f(t) {
            (0, i.default)(this, f);
            var e = (0, n.default)(this, d.call(this));
            return e.player = t, e._options = t.options, e
        }
        e.default = c, t.exports = e.default
    }, function (t, e, r) {
        "use strict";
        Object.defineProperty(e, "__esModule", {
            value: !0
        });
        var i = b(r(12)),
            n = b(r(0)),
            a = b(r(1)),
            o = b(r(3)),
            s = b(r(2)),
            l = r(5),
            u = b(r(79)),
            d = b(r(4)),
            c = b(r(30)),
            f = b(r(24)),
            h = b(r(14)),
            p = b(r(167)),
            g = b(r(31)),
            m = b(r(40)),
            v = b(r(25)),
            y = b(r(20)),
            A = b(r(6));
        r(173);
        var _ = b(r(175));

        function b(t) {
            return t && t.__esModule ? t : {
                default: t
            }
        }
        var E, T = void 0,
            S = (E = c.default, (0, s.default)(k, E), (0, o.default)(k, [{
                key: "events",
                get: function () {
                    return {
                        webkitfullscreenchange: "handleFullscreenChange",
                        mousemove: "onMouseMove",
                        mouseleave: "onMouseLeave"
                    }
                }
            }, {
                key: "attributes",
                get: function () {
                    return {
                        "data-player": "",
                        tabindex: 9999
                    }
                }
            }, {
                key: "isReady",
                get: function () {
                    return !!this.ready
                }
            }, {
                key: "i18n",
                get: function () {
                    return this.getPlugin("strings") || {
                        t: function (t) {
                            return t
                        }
                    }
                }
            }, {
                key: "mediaControl",
                get: function () {
                    return this.getPlugin("media_control") || this.dummyMediaControl
                }
            }, {
                key: "dummyMediaControl",
                get: function () {
                    return this._dummyMediaControl || (this._dummyMediaControl = new f.default(this)), this._dummyMediaControl
                }
            }, {
                key: "activeContainer",
                get: function () {
                    return this._activeContainer
                },
                set: function (t) {
                    this._activeContainer = t, this.trigger(d.default.CORE_ACTIVE_CONTAINER_CHANGED, this._activeContainer)
                }
            }, {
                key: "activePlayback",
                get: function () {
                    return this.activeContainer && this.activeContainer.playback
                }
            }]), k.prototype.configureDomRecycler = function () {
                var t = this.options && this.options.playback && this.options.playback.recycleVideo;
                l.DomRecycler.configure({
                    recycleVideo: t
                })
            }, k.prototype.createContainers = function (t) {
                this.defer = A.default.Deferred(), this.defer.promise(this), this.containerFactory = new p.default(t, t.loader, this.i18n, this.playerError), this.prepareContainers()
            }, k.prototype.prepareContainers = function () {
                var e = this;
                this.containerFactory.createContainers().then(function (t) {
                    return e.setupContainers(t)
                }).then(function (t) {
                    return e.resolveOnContainersReady(t)
                })
            }, k.prototype.updateSize = function () {
                this.isFullscreen() ? this.setFullscreen() : this.setPlayerSize()
            }, k.prototype.setFullscreen = function () {
                h.default.isiOS || (this.$el.addClass("fullscreen"), this.$el.removeAttr("style"), this.playerInfo.previousSize = {
                    width: this.options.width,
                    height: this.options.height
                }, this.playerInfo.currentSize = {
                    width: (0, A.default)(window).width(),
                    height: (0, A.default)(window).height()
                })
            }, k.prototype.setPlayerSize = function () {
                this.$el.removeClass("fullscreen"), this.playerInfo.currentSize = this.playerInfo.previousSize, this.playerInfo.previousSize = {
                    width: (0, A.default)(window).width(),
                    height: (0, A.default)(window).height()
                }, this.resize(this.playerInfo.currentSize)
            }, k.prototype.resize = function (t) {
                (0, l.isNumber)(t.height) || (0, l.isNumber)(t.width) ? (this.el.style.height = t.height + "px", this.el.style.width = t.width + "px") : (this.el.style.height = "" + t.height, this.el.style.width = "" + t.width), this.playerInfo.previousSize = {
                    width: this.options.width,
                    height: this.options.height
                }, this.options.width = t.width, this.options.height = t.height, this.playerInfo.currentSize = t, this.triggerResize(this.playerInfo.currentSize)
            }, k.prototype.enableResizeObserver = function () {
                var t = this;
                this.resizeObserverInterval = setInterval(function () {
                    t.triggerResize({
                        width: t.el.clientWidth,
                        height: t.el.clientHeight
                    })
                }, 500)
            }, k.prototype.triggerResize = function (t) {
                !this.firstResize && this.oldHeight === t.height && this.oldWidth === t.width || (this.oldHeight = t.height, this.oldWidth = t.width, this.playerInfo.computedSize = t, this.firstResize = !1, g.default.trigger(this.options.playerId + ":" + d.default.PLAYER_RESIZE, t), this.trigger(d.default.CORE_RESIZE, t))
            }, k.prototype.disableResizeObserver = function () {
                this.resizeObserverInterval && clearInterval(this.resizeObserverInterval)
            }, k.prototype.resolveOnContainersReady = function (t) {
                var e = this;
                A.default.when.apply(A.default, t).done(function () {
                    e.defer.resolve(e), e.ready = !0, e.trigger(d.default.CORE_READY)
                })
            }, k.prototype.addPlugin = function (t) {
                this.plugins.push(t)
            }, k.prototype.hasPlugin = function (t) {
                return !!this.getPlugin(t)
            }, k.prototype.getPlugin = function (e) {
                return this.plugins.filter(function (t) {
                    return t.name === e
                })[0]
            }, k.prototype.load = function (t, e) {
                this.options.mimeType = e, t = t && t.constructor === Array ? t : [t], this.options.sources = t, this.containers.forEach(function (t) {
                    return t.destroy()
                }), this.containerFactory.options = A.default.extend(this.options, {
                    sources: t
                }), this.prepareContainers()
            }, k.prototype.destroy = function () {
                this.disableResizeObserver(), this.containers.forEach(function (t) {
                    return t.destroy()
                }), this.plugins.forEach(function (t) {
                    return t.destroy()
                }), this.$el.remove(), (0, A.default)(document).unbind("fullscreenchange", this._boundFullscreenHandler), (0, A.default)(document).unbind("MSFullscreenChange", this._boundFullscreenHandler), (0, A.default)(document).unbind("mozfullscreenchange", this._boundFullscreenHandler), this.stopListening()
            }, k.prototype.handleFullscreenChange = function () {
                this.trigger(d.default.CORE_FULLSCREEN, this.isFullscreen()), this.updateSize()
            }, k.prototype.handleWindowResize = function (t) {
                var e = window.innerWidth > window.innerHeight ? "landscape" : "portrait";
                this._screenOrientation !== e && (this._screenOrientation = e, this.triggerResize({
                    width: this.el.clientWidth,
                    height: this.el.clientHeight
                }), this.trigger(d.default.CORE_SCREEN_ORIENTATION_CHANGED, {
                    event: t,
                    orientation: this._screenOrientation
                }))
            }, k.prototype.removeContainer = function (e) {
                this.stopListening(e), this.containers = this.containers.filter(function (t) {
                    return t !== e
                })
            }, k.prototype.setupContainer = function (t) {
                this.listenTo(t, d.default.CONTAINER_DESTROYED, this.removeContainer), this.containers.push(t)
            }, k.prototype.setupContainers = function (t) {
                return t.forEach(this.setupContainer.bind(this)), this.trigger(d.default.CORE_CONTAINERS_CREATED), this.renderContainers(), this.activeContainer = t[0], this.render(), this.appendToParent(), this.containers
            }, k.prototype.renderContainers = function () {
                var e = this;
                this.containers.forEach(function (t) {
                    return e.el.appendChild(t.render().el)
                })
            }, k.prototype.createContainer = function (t, e) {
                var r = this.containerFactory.createContainer(t, e);
                return this.setupContainer(r), this.el.appendChild(r.render().el), r
            }, k.prototype.getCurrentContainer = function () {
                return this.activeContainer
            }, k.prototype.getCurrentPlayback = function () {
                return this.activePlayback
            }, k.prototype.getPlaybackType = function () {
                return this.activeContainer && this.activeContainer.getPlaybackType()
            }, k.prototype.isFullscreen = function () {
                var t = h.default.isiOS && this.activeContainer && this.activeContainer.el || this.el;
                return l.Fullscreen.fullscreenElement() === t
            }, k.prototype.toggleFullscreen = function () {
                this.isFullscreen() ? (l.Fullscreen.cancelFullscreen(), h.default.isiOS || this.$el.removeClass("fullscreen nocursor")) : (l.Fullscreen.requestFullscreen(h.default.isiOS ? this.activeContainer.el : this.el), h.default.isiOS || this.$el.addClass("fullscreen"))
            }, k.prototype.onMouseMove = function (t) {
                this.trigger(d.default.CORE_MOUSE_MOVE, t)
            }, k.prototype.onMouseLeave = function (t) {
                this.trigger(d.default.CORE_MOUSE_LEAVE, t)
            }, k.prototype.configure = function (t) {
                var e = this;
                this._options = A.default.extend(this._options, t), this.configureDomRecycler();
                var r = t.source || t.sources;
                r && this.load(r, t.mimeType || this.options.mimeType), this.trigger(d.default.CORE_OPTIONS_CHANGE, t), this.containers.forEach(function (t) {
                    return t.configure(e.options)
                })
            }, k.prototype.appendToParent = function () {
                this.$el.parent() && this.$el.parent().length || this.$el.appendTo(this.options.parentElement)
            }, k.prototype.render = function () {
                T || (T = u.default.getStyleFor(_.default, {
                    baseUrl: this.options.baseUrl
                })), (0, A.default)("head").append(T), this.options.width = this.options.width || this.$el.width(), this.options.height = this.options.height || this.$el.height();
                var t = {
                    width: this.options.width,
                    height: this.options.height
                };
                return this.playerInfo.previousSize = this.playerInfo.currentSize = this.playerInfo.computedSize = t, this.updateSize(), this.previousSize = {
                    width: this.$el.width(),
                    height: this.$el.height()
                }, this.enableResizeObserver(), this
            }, k);

        function k(t) {
            (0, n.default)(this, k);
            var e = (0, a.default)(this, E.call(this, t));
            return e.playerError = new v.default(t, e), e.configureDomRecycler(), e.playerInfo = m.default.getInstance(t.playerId), e.firstResize = !0, e.plugins = [], e.containers = [], e._boundFullscreenHandler = function () {
                return e.handleFullscreenChange()
            }, (0, A.default)(document).bind("fullscreenchange", e._boundFullscreenHandler), (0, A.default)(document).bind("MSFullscreenChange", e._boundFullscreenHandler), (0, A.default)(document).bind("mozfullscreenchange", e._boundFullscreenHandler), h.default.isMobile && (0, A.default)(window).bind("resize", function (t) {
                e.handleWindowResize(t)
            }), e
        }
        e.default = S, (0, i.default)(S.prototype, y.default), t.exports = e.default
    }, function (t, e, r) {
        "use strict";
        Object.defineProperty(e, "__esModule", {
            value: !0
        });
        var i, n = r(168),
            a = (i = n) && i.__esModule ? i : {
                default: i
            };
        e.default = a.default, t.exports = e.default
    }, function (t, e, r) {
        "use strict";
        Object.defineProperty(e, "__esModule", {
            value: !0
        });
        var s = f(r(39)),
            a = f(r(0)),
            o = f(r(1)),
            i = f(r(3)),
            n = f(r(2)),
            l = f(r(15)),
            u = f(r(4)),
            d = f(r(81)),
            c = f(r(6));

        function f(t) {
            return t && t.__esModule ? t : {
                default: t
            }
        }
        var h, p = (h = l.default, (0, n.default)(g, h), (0, i.default)(g, [{
            key: "options",
            get: function () {
                return this._options
            },
            set: function (t) {
                this._options = t
            }
        }]), g.prototype.createContainers = function () {
            var e = this;
            return c.default.Deferred(function (t) {
                t.resolve(e.options.sources.map(function (t) {
                    return e.createContainer(t)
                }))
            })
        }, g.prototype.findPlaybackPlugin = function (e, r) {
            return this.loader.playbackPlugins.filter(function (t) {
                return t.canPlay(e, r)
            })[0]
        }, g.prototype.createContainer = function (t) {
            var e = null,
                r = this.options.mimeType;
            "object" === (void 0 === t ? "undefined" : (0, s.default)(t)) ? (e = t.source.toString(), t.mimeType && (r = t.mimeType)) : e = t.toString(), e.match(/^\/\//) && (e = window.location.protocol + e);
            var i = c.default.extend({}, this.options, {
                src: e,
                mimeType: r
            }),
                n = new (this.findPlaybackPlugin(e, r))(i, this._i18n, this.playerError);
            i = c.default.extend({}, i, {
                playback: n
            });
            var a = new d.default(i, this._i18n, this.playerError),
                o = c.default.Deferred();
            return o.promise(a), this.addContainerPlugins(a), this.listenToOnce(a, u.default.CONTAINER_READY, function () {
                return o.resolve(a)
            }), a
        }, g.prototype.addContainerPlugins = function (e) {
            this.loader.containerPlugins.forEach(function (t) {
                e.addPlugin(new t(e))
            })
        }, g);

        function g(t, e, r, i) {
            (0, a.default)(this, g);
            var n = (0, o.default)(this, h.call(this, t));
            return n._i18n = r, n.loader = e, n.playerError = i, n
        }
        e.default = p, t.exports = e.default
    }, function (t, e, r) {
        "use strict";
        Object.defineProperty(e, "__esModule", {
            value: !0
        });
        var i = h(r(12)),
            n = h(r(0)),
            a = h(r(1)),
            o = h(r(3)),
            s = h(r(2)),
            l = h(r(4)),
            u = h(r(30)),
            d = h(r(20)),
            c = r(5);
        r(170);
        var f = h(r(6));

        function h(t) {
            return t && t.__esModule ? t : {
                default: t
            }
        }
        var p, g = (p = u.default, (0, s.default)(m, p), (0, o.default)(m, [{
            key: "name",
            get: function () {
                return "Container"
            }
        }, {
            key: "attributes",
            get: function () {
                return {
                    class: "container",
                    "data-container": ""
                }
            }
        }, {
            key: "events",
            get: function () {
                return {
                    click: "clicked",
                    dblclick: "dblClicked",
                    touchend: "dblTap",
                    contextmenu: "onContextMenu",
                    mouseenter: "mouseEnter",
                    mouseleave: "mouseLeave"
                }
            }
        }, {
            key: "ended",
            get: function () {
                return this.playback.ended
            }
        }, {
            key: "buffering",
            get: function () {
                return this.playback.buffering
            }
        }, {
            key: "i18n",
            get: function () {
                return this._i18n
            }
        }, {
            key: "hasClosedCaptionsTracks",
            get: function () {
                return this.playback.hasClosedCaptionsTracks
            }
        }, {
            key: "closedCaptionsTracks",
            get: function () {
                return this.playback.closedCaptionsTracks
            }
        }, {
            key: "closedCaptionsTrackId",
            get: function () {
                return this.playback.closedCaptionsTrackId
            },
            set: function (t) {
                this.playback.closedCaptionsTrackId = t
            }
        }]), m.prototype.bindEvents = function () {
            this.listenTo(this.playback, l.default.PLAYBACK_PROGRESS, this.onProgress), this.listenTo(this.playback, l.default.PLAYBACK_TIMEUPDATE, this.timeUpdated), this.listenTo(this.playback, l.default.PLAYBACK_READY, this.ready), this.listenTo(this.playback, l.default.PLAYBACK_BUFFERING, this.onBuffering), this.listenTo(this.playback, l.default.PLAYBACK_BUFFERFULL, this.bufferfull), this.listenTo(this.playback, l.default.PLAYBACK_SETTINGSUPDATE, this.settingsUpdate), this.listenTo(this.playback, l.default.PLAYBACK_LOADEDMETADATA, this.loadedMetadata), this.listenTo(this.playback, l.default.PLAYBACK_HIGHDEFINITIONUPDATE, this.highDefinitionUpdate), this.listenTo(this.playback, l.default.PLAYBACK_BITRATE, this.updateBitrate), this.listenTo(this.playback, l.default.PLAYBACK_PLAYBACKSTATE, this.playbackStateChanged), this.listenTo(this.playback, l.default.PLAYBACK_DVR, this.playbackDvrStateChanged), this.listenTo(this.playback, l.default.PLAYBACK_MEDIACONTROL_DISABLE, this.disableMediaControl), this.listenTo(this.playback, l.default.PLAYBACK_MEDIACONTROL_ENABLE, this.enableMediaControl), this.listenTo(this.playback, l.default.PLAYBACK_SEEKED, this.onSeeked), this.listenTo(this.playback, l.default.PLAYBACK_ENDED, this.onEnded), this.listenTo(this.playback, l.default.PLAYBACK_PLAY, this.playing), this.listenTo(this.playback, l.default.PLAYBACK_PAUSE, this.paused), this.listenTo(this.playback, l.default.PLAYBACK_STOP, this.stopped), this.listenTo(this.playback, l.default.PLAYBACK_ERROR, this.error), this.listenTo(this.playback, l.default.PLAYBACK_SUBTITLE_AVAILABLE, this.subtitleAvailable), this.listenTo(this.playback, l.default.PLAYBACK_SUBTITLE_CHANGED, this.subtitleChanged)
        }, m.prototype.subtitleAvailable = function () {
            this.trigger(l.default.CONTAINER_SUBTITLE_AVAILABLE)
        }, m.prototype.subtitleChanged = function (t) {
            this.trigger(l.default.CONTAINER_SUBTITLE_CHANGED, t)
        }, m.prototype.playbackStateChanged = function (t) {
            this.trigger(l.default.CONTAINER_PLAYBACKSTATE, t)
        }, m.prototype.playbackDvrStateChanged = function (t) {
            this.settings = this.playback.settings, this.dvrInUse = t, this.trigger(l.default.CONTAINER_PLAYBACKDVRSTATECHANGED, t)
        }, m.prototype.updateBitrate = function (t) {
            this.trigger(l.default.CONTAINER_BITRATE, t)
        }, m.prototype.statsReport = function (t) {
            this.trigger(l.default.CONTAINER_STATS_REPORT, t)
        }, m.prototype.getPlaybackType = function () {
            return this.playback.getPlaybackType()
        }, m.prototype.isDvrEnabled = function () {
            return !!this.playback.dvrEnabled
        }, m.prototype.isDvrInUse = function () {
            return !!this.dvrInUse
        }, m.prototype.destroy = function () {
            this.trigger(l.default.CONTAINER_DESTROYED, this, this.name), this.stopListening(), this.plugins.forEach(function (t) {
                return t.destroy()
            }), this.$el.remove()
        }, m.prototype.setStyle = function (t) {
            this.$el.css(t)
        }, m.prototype.animate = function (t, e) {
            return this.$el.animate(t, e).promise()
        }, m.prototype.ready = function () {
            this.isReady = !0, this.trigger(l.default.CONTAINER_READY, this.name)
        }, m.prototype.isPlaying = function () {
            return this.playback.isPlaying()
        }, m.prototype.getStartTimeOffset = function () {
            return this.playback.getStartTimeOffset()
        }, m.prototype.getCurrentTime = function () {
            return this.currentTime
        }, m.prototype.getDuration = function () {
            return this.playback.getDuration()
        }, m.prototype.error = function (t) {
            this.isReady || this.ready(), this.trigger(l.default.CONTAINER_ERROR, t, this.name)
        }, m.prototype.loadedMetadata = function (t) {
            this.trigger(l.default.CONTAINER_LOADEDMETADATA, t)
        }, m.prototype.timeUpdated = function (t) {
            this.currentTime = t.current, this.trigger(l.default.CONTAINER_TIMEUPDATE, t, this.name)
        }, m.prototype.onProgress = function () {
            for (var t = arguments.length, e = Array(t), r = 0; r < t; r++) e[r] = arguments[r];
            this.trigger.apply(this, [l.default.CONTAINER_PROGRESS].concat(e, [this.name]))
        }, m.prototype.playing = function () {
            this.trigger(l.default.CONTAINER_PLAY, this.name)
        }, m.prototype.paused = function () {
            this.trigger(l.default.CONTAINER_PAUSE, this.name)
        }, m.prototype.play = function () {
            this.playback.play()
        }, m.prototype.stop = function () {
            this.playback.stop(), this.currentTime = 0
        }, m.prototype.pause = function () {
            this.playback.pause()
        }, m.prototype.onEnded = function () {
            this.trigger(l.default.CONTAINER_ENDED, this, this.name), this.currentTime = 0
        }, m.prototype.stopped = function () {
            this.trigger(l.default.CONTAINER_STOP)
        }, m.prototype.clicked = function () {
            var t = this;
            this.options.chromeless && !this.options.allowUserInteraction || (this.clickTimer = setTimeout(function () {
                t.clickTimer && t.trigger(l.default.CONTAINER_CLICK, t, t.name)
            }, this.clickDelay))
        }, m.prototype.cancelClicked = function () {
            clearTimeout(this.clickTimer), this.clickTimer = null
        }, m.prototype.dblClicked = function () {
            this.options.chromeless && !this.options.allowUserInteraction || (this.cancelClicked(), this.trigger(l.default.CONTAINER_DBLCLICK, this, this.name))
        }, m.prototype.dblTap = function (t) {
            var e = this;
            this.options.chromeless && !this.options.allowUserInteraction || this.dblTapHandler.handle(t, function () {
                e.cancelClicked(), e.trigger(l.default.CONTAINER_DBLCLICK, e, e.name)
            })
        }, m.prototype.onContextMenu = function (t) {
            this.options.chromeless && !this.options.allowUserInteraction || this.trigger(l.default.CONTAINER_CONTEXTMENU, t, this.name)
        }, m.prototype.seek = function (t) {
            this.trigger(l.default.CONTAINER_SEEK, t, this.name), this.playback.seek(t)
        }, m.prototype.onSeeked = function () {
            this.trigger(l.default.CONTAINER_SEEKED, this.name)
        }, m.prototype.seekPercentage = function (t) {
            var e = this.getDuration();
            if (0 <= t && t <= 100) {
                var r = e * (t / 100);
                this.seek(r)
            }
        }, m.prototype.setVolume = function (t) {
            this.volume = parseFloat(t), this.trigger(l.default.CONTAINER_VOLUME, this.volume, this.name), this.playback.volume(this.volume)
        }, m.prototype.fullscreen = function () {
            this.trigger(l.default.CONTAINER_FULLSCREEN, this.name)
        }, m.prototype.onBuffering = function () {
            this.trigger(l.default.CONTAINER_STATE_BUFFERING, this.name)
        }, m.prototype.bufferfull = function () {
            this.trigger(l.default.CONTAINER_STATE_BUFFERFULL, this.name)
        }, m.prototype.addPlugin = function (t) {
            this.plugins.push(t)
        }, m.prototype.hasPlugin = function (t) {
            return !!this.getPlugin(t)
        }, m.prototype.getPlugin = function (e) {
            return this.plugins.filter(function (t) {
                return t.name === e
            })[0]
        }, m.prototype.mouseEnter = function () {
            this.options.chromeless && !this.options.allowUserInteraction || this.trigger(l.default.CONTAINER_MOUSE_ENTER)
        }, m.prototype.mouseLeave = function () {
            this.options.chromeless && !this.options.allowUserInteraction || this.trigger(l.default.CONTAINER_MOUSE_LEAVE)
        }, m.prototype.settingsUpdate = function () {
            this.settings = this.playback.settings, this.trigger(l.default.CONTAINER_SETTINGSUPDATE)
        }, m.prototype.highDefinitionUpdate = function (t) {
            this.trigger(l.default.CONTAINER_HIGHDEFINITIONUPDATE, t)
        }, m.prototype.isHighDefinitionInUse = function () {
            return this.playback.isHighDefinitionInUse()
        }, m.prototype.disableMediaControl = function () {
            this.mediaControlDisabled || (this.mediaControlDisabled = !0, this.trigger(l.default.CONTAINER_MEDIACONTROL_DISABLE))
        }, m.prototype.enableMediaControl = function () {
            this.mediaControlDisabled && (this.mediaControlDisabled = !1, this.trigger(l.default.CONTAINER_MEDIACONTROL_ENABLE))
        }, m.prototype.updateStyle = function () {
            !this.options.chromeless || this.options.allowUserInteraction ? this.$el.removeClass("chromeless") : this.$el.addClass("chromeless")
        }, m.prototype.configure = function (t) {
            this._options = f.default.extend(this._options, t), this.updateStyle(), this.playback.configure(this.options), this.trigger(l.default.CONTAINER_OPTIONS_CHANGE)
        }, m.prototype.render = function () {
            return this.$el.append(this.playback.render().el), this.updateStyle(), this
        }, m);

        function m(t, e, r) {
            (0, n.default)(this, m);
            var i = (0, a.default)(this, p.call(this, t));
            return i._i18n = e, i.currentTime = 0, i.volume = 100, i.playback = t.playback, i.playerError = r, i.settings = f.default.extend({}, i.playback.settings), i.isReady = !1, i.mediaControlDisabled = !1, i.plugins = [i.playback], i.dblTapHandler = new c.DoubleEventHandler(500), i.clickTimer = null, i.clickDelay = 200, i.bindEvents(), i
        }
        e.default = g, (0, i.default)(g.prototype, d.default), t.exports = e.default
    }, function (t, e, r) {
        var i = r(171);
        "string" == typeof i && (i = [
            [t.i, i, ""]
        ]);
        var n = {
            singleton: !0,
            hmr: !0,
            transform: void 0,
            insertInto: void 0
        };
        r(10)(i, n);
        i.locals && (t.exports = i.locals)
    }, function (t, e, r) {
        (t.exports = r(8)(!1)).push([t.i, ".container[data-container]{position:absolute;background-color:#000;height:100%;width:100%;max-width:100%}.container[data-container] .chromeless{cursor:default}[data-player]:not(.nocursor) .container[data-container]:not(.chromeless).pointer-enabled{cursor:pointer}", ""])
    }, function (t, e) {
        t.exports = function (t) {
            var e = "undefined" != typeof window && window.location;
            if (!e) throw new Error("fixUrls requires window.location");
            if (!t || "string" != typeof t) return t;
            var n = e.protocol + "//" + e.host,
                a = n + e.pathname.replace(/\/[^\/]*$/, "/");
            return t.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi, function (t, e) {
                var r, i = e.trim().replace(/^"(.*)"$/, function (t, e) {
                    return e
                }).replace(/^'(.*)'$/, function (t, e) {
                    return e
                });
                return /^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(i) ? t : (r = 0 === i.indexOf("//") ? i : 0 === i.indexOf("/") ? n + i : a + i.replace(/^\.\//, ""), "url(" + JSON.stringify(r) + ")")
            })
        }
    }, function (t, e, r) {
        var i = r(174);
        "string" == typeof i && (i = [
            [t.i, i, ""]
        ]);
        var n = {
            singleton: !0,
            hmr: !0,
            transform: void 0,
            insertInto: void 0
        };
        r(10)(i, n);
        i.locals && (t.exports = i.locals)
    }, function (t, e, r) {
        (t.exports = r(8)(!1)).push([t.i, '[data-player]{-webkit-touch-callout:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;-o-user-select:none;user-select:none;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;-webkit-transform:translateZ(0);transform:translateZ(0);position:relative;margin:0;padding:0;border:0;font-style:normal;font-weight:400;text-align:center;overflow:hidden;font-size:100%;font-family:Roboto,Open Sans,Arial,sans-serif;text-shadow:0 0 0;box-sizing:border-box}[data-player] a,[data-player] abbr,[data-player] acronym,[data-player] address,[data-player] applet,[data-player] article,[data-player] aside,[data-player] audio,[data-player] b,[data-player] big,[data-player] blockquote,[data-player] canvas,[data-player] caption,[data-player] center,[data-player] cite,[data-player] code,[data-player] dd,[data-player] del,[data-player] details,[data-player] dfn,[data-player] div,[data-player] dl,[data-player] dt,[data-player] em,[data-player] embed,[data-player] fieldset,[data-player] figcaption,[data-player] figure,[data-player] footer,[data-player] form,[data-player] h1,[data-player] h2,[data-player] h3,[data-player] h4,[data-player] h5,[data-player] h6,[data-player] header,[data-player] hgroup,[data-player] i,[data-player] iframe,[data-player] img,[data-player] ins,[data-player] kbd,[data-player] label,[data-player] legend,[data-player] li,[data-player] mark,[data-player] menu,[data-player] nav,[data-player] object,[data-player] ol,[data-player] output,[data-player] p,[data-player] pre,[data-player] q,[data-player] ruby,[data-player] s,[data-player] samp,[data-player] section,[data-player] small,[data-player] span,[data-player] strike,[data-player] strong,[data-player] sub,[data-player] summary,[data-player] sup,[data-player] table,[data-player] tbody,[data-player] td,[data-player] tfoot,[data-player] th,[data-player] thead,[data-player] time,[data-player] tr,[data-player] tt,[data-player] u,[data-player] ul,[data-player] var,[data-player] video{margin:0;padding:0;border:0;font:inherit;font-size:100%;vertical-align:baseline}[data-player] table{border-collapse:collapse;border-spacing:0}[data-player] caption,[data-player] td,[data-player] th{text-align:left;font-weight:400;vertical-align:middle}[data-player] blockquote,[data-player] q{quotes:none}[data-player] blockquote:after,[data-player] blockquote:before,[data-player] q:after,[data-player] q:before{content:"";content:none}[data-player] a img{border:none}[data-player]:focus{outline:0}[data-player] *{max-width:none;box-sizing:inherit;float:none}[data-player] div{display:block}[data-player].fullscreen{width:100%!important;height:100%!important;top:0;left:0}[data-player].nocursor{cursor:none}.clappr-style{display:none!important}', ""])
    }, function (t, e, r) {
        var i = r(82);
        (t.exports = r(8)(!1)).push([t.i, '@font-face{font-family:Roboto;font-style:normal;font-weight:400;src:local("Roboto"),local("Roboto-Regular"),url(' + i(r(176)) + ') format("truetype")}', ""])
    }, function (t, e) {
        t.exports = "<%=baseUrl%>/38861cba61c66739c1452c3a71e39852.ttf"
    }, function (t, e, r) {
        "use strict";
        Object.defineProperty(e, "__esModule", {
            value: !0
        });
        var n = D(r(76)),
            a = D(r(62)),
            o = D(r(0)),
            s = D(r(1)),
            i = D(r(2)),
            l = D(r(15)),
            u = D(r(40)),
            d = D(r(41)),
            c = D(r(85)),
            f = D(r(86)),
            h = D(r(87)),
            p = D(r(88)),
            g = D(r(90)),
            m = D(r(91)),
            v = D(r(92)),
            y = D(r(213)),
            A = D(r(93)),
            _ = D(r(94)),
            b = D(r(223)),
            E = D(r(95)),
            T = D(r(96)),
            S = D(r(98)),
            k = D(r(234)),
            L = D(r(99)),
            R = D(r(240)),
            C = D(r(245)),
            w = D(r(246)),
            O = D(r(247)),
            P = D(r(248));

        function D(t) {
            return t && t.__esModule ? t : {
                default: t
            }
        }
        var I, x = (I = l.default, (0, i.default)(M, I), M.prototype.groupPluginsByType = function (t) {
            return Array.isArray(t) && (t = t.reduce(function (t, e) {
                return t[e.type] || (t[e.type] = []), t[e.type].push(e), t
            }, {})), t
        }, M.prototype.removeDups = function (t) {
            var e = t.reduceRight(function (t, e) {
                return t[e.prototype.name] && delete t[e.prototype.name], t[e.prototype.name] = e, t
            }, (0, n.default)(null)),
                r = [];
            for (var i in e) r.unshift(e[i]);
            return r
        }, M.prototype.addExternalPlugins = function (t) {
            (t = this.groupPluginsByType(t)).playback && (this.playbackPlugins = this.removeDups(t.playback.concat(this.playbackPlugins))), t.container && (this.containerPlugins = this.removeDups(t.container.concat(this.containerPlugins))), t.core && (this.corePlugins = this.removeDups(t.core.concat(this.corePlugins))), u.default.getInstance(this.playerId).playbackPlugins = this.playbackPlugins
        }, M.prototype.validateExternalPluginsType = function (t) {
            ["playback", "container", "core"].forEach(function (r) {
                (t[r] || []).forEach(function (t) {
                    var e = "external " + t.type + " plugin on " + r + " array";
                    if (t.type !== r) throw new ReferenceError(e)
                })
            })
        }, M);

        function M() {
            var t = 0 < arguments.length && void 0 !== arguments[0] ? arguments[0] : [],
                e = 1 < arguments.length && void 0 !== arguments[1] ? arguments[1] : 0,
                r = 2 < arguments.length && void 0 !== arguments[2] && arguments[2];
            (0, o.default)(this, M);
            var i = (0, s.default)(this, I.call(this));
            return i.playerId = e, i.playbackPlugins = [], r || (i.playbackPlugins = [].concat((0, a.default)(i.playbackPlugins), [p.default])), i.playbackPlugins = [].concat((0, a.default)(i.playbackPlugins), [d.default, f.default]), r || (i.playbackPlugins = [].concat((0, a.default)(i.playbackPlugins), [c.default, h.default])), i.playbackPlugins = [].concat((0, a.default)(i.playbackPlugins), [g.default, m.default]), i.containerPlugins = [v.default, A.default, _.default, y.default, b.default, E.default], i.corePlugins = [T.default, S.default, k.default, L.default, R.default, C.default, w.default, P.default, O.default], Array.isArray(t) || i.validateExternalPluginsType(t), i.addExternalPlugins(t), i
        }
        e.default = x, t.exports = e.default
    }, function (t, e, r) {
        r(54), r(179), t.exports = r(9).Array.from
    }, function (t, e, r) {
        "use strict";
        var p = r(44),
            i = r(16),
            g = r(38),
            m = r(180),
            v = r(181),
            y = r(69),
            A = r(182),
            _ = r(77);
        i(i.S + i.F * !r(183)(function (t) {
            Array.from(t)
        }), "Array", {
            from: function (t, e, r) {
                var i, n, a, o, s = g(t),
                    l = "function" == typeof this ? this : Array,
                    u = arguments.length,
                    d = 1 < u ? e : void 0,
                    c = void 0 !== d,
                    f = 0,
                    h = _(s);
                if (c && (d = p(d, 2 < u ? r : void 0, 2)), null == h || l == Array && v(h))
                    for (n = new l(i = y(s.length)); f < i; f++) A(n, f, c ? d(s[f], f) : s[f]);
                else
                    for (o = h.call(s), n = new l; !(a = o.next()).done; f++) A(n, f, c ? m(o, d, [a.value, f], !0) : a.value);
                return n.length = f, n
            }
        })
    }, function (t, e, r) {
        var a = r(21);
        t.exports = function (e, t, r, i) {
            try {
                return i ? t(a(r)[0], r[1]) : t(r)
            } catch (t) {
                var n = e.return;
                throw void 0 !== n && a(n.call(e)), t
            }
        }
    }, function (t, e, r) {
        var i = r(34),
            n = r(13)("iterator"),
            a = Array.prototype;
        t.exports = function (t) {
            return void 0 !== t && (i.Array === t || a[n] === t)
        }
    }, function (t, e, r) {
        "use strict";
        var i = r(18),
            n = r(33);
        t.exports = function (t, e, r) {
            e in t ? i.f(t, e, n(0, r)) : t[e] = r
        }
    }, function (t, e, r) {
        var a = r(13)("iterator"),
            o = !1;
        try {
            var i = [7][a]();
            i.return = function () {
                o = !0
            }, Array.from(i, function () {
                throw 2
            })
        } catch (t) { }
        t.exports = function (t, e) {
            if (!e && !o) return !1;
            var r = !1;
            try {
                var i = [7],
                    n = i[a]();
                n.next = function () {
                    return {
                        done: r = !0
                    }
                }, i[a] = function () {
                    return n
                }, t(i)
            } catch (t) { }
            return r
        }
    }, function (k, L, R) {
        "use strict";
        (function (i) {
            Object.defineProperty(L, "__esModule", {
                value: !0
            });
            var t = v(R(84)),
                s = v(R(0)),
                l = v(R(1)),
                e = v(R(3)),
                r = v(R(2)),
                n = v(R(62)),
                a = v(R(53)),
                o = R(5),
                u = v(R(11)),
                d = v(R(14)),
                c = v(R(25)),
                f = v(R(4)),
                h = v(R(29)),
                p = v(R(6)),
                g = v(R(7)),
                m = v(R(185));

            function v(t) {
                return t && t.__esModule ? t : {
                    default: t
                }
            }
            R(186);
            var y = {
                mp4: ["avc1.42E01E", "avc1.58A01E", "avc1.4D401E", "avc1.64001E", "mp4v.20.8", "mp4v.20.240", "mp4a.40.2"].map(function (t) {
                    return 'video/mp4; codecs="' + t + ', mp4a.40.2"'
                }),
                ogg: ['video/ogg; codecs="theora, vorbis"', 'video/ogg; codecs="dirac"', 'video/ogg; codecs="theora, speex"'],
                "3gpp": ['video/3gpp; codecs="mp4v.20.8, samr"'],
                webm: ['video/webm; codecs="vp8, vorbis"'],
                mkv: ['video/x-matroska; codecs="theora, vorbis"'],
                m3u8: ["application/x-mpegurl"]
            };
            y.ogv = y.ogg, y["3gp"] = y["3gpp"];
            var A, _ = {
                wav: ["audio/wav"],
                mp3: ["audio/mp3", 'audio/mpeg;codecs="mp3"'],
                aac: ['audio/mp4;codecs="mp4a.40.5"'],
                oga: ["audio/ogg"]
            },
                b = (0, a.default)(_).reduce(function (t, e) {
                    return [].concat((0, n.default)(t), (0, n.default)(_[e]))
                }, []),
                E = {
                    code: "unknown",
                    message: "unknown"
                },
                T = (A = u.default, (0, r.default)(S, A), (0, e.default)(S, [{
                    key: "name",
                    get: function () {
                        return "html5_video"
                    }
                }, {
                    key: "tagName",
                    get: function () {
                        return this.isAudioOnly ? "audio" : "video"
                    }
                }, {
                    key: "isAudioOnly",
                    get: function () {
                        var t = this.options.src,
                            e = S._mimeTypesForUrl(t, _, this.options.mimeType);
                        return this.options.playback && this.options.playback.audioOnly || this.options.audioOnly || 0 <= b.indexOf(e[0])
                    }
                }, {
                    key: "attributes",
                    get: function () {
                        return {
                            "data-html5-video": ""
                        }
                    }
                }, {
                    key: "events",
                    get: function () {
                        return {
                            canplay: "_onCanPlay",
                            canplaythrough: "_handleBufferingEvents",
                            durationchange: "_onDurationChange",
                            ended: "_onEnded",
                            error: "_onError",
                            loadeddata: "_onLoadedData",
                            loadedmetadata: "_onLoadedMetadata",
                            pause: "_onPause",
                            playing: "_onPlaying",
                            progress: "_onProgress",
                            seeking: "_onSeeking",
                            seeked: "_onSeeked",
                            stalled: "_handleBufferingEvents",
                            timeupdate: "_onTimeUpdate",
                            waiting: "_onWaiting"
                        }
                    }
                }, {
                    key: "ended",
                    get: function () {
                        return this.el.ended
                    }
                }, {
                    key: "buffering",
                    get: function () {
                        return this._isBuffering
                    }
                }]), S.prototype.configure = function (t) {
                    A.prototype.configure.call(this, t), this.el.loop = !!t.loop
                }, S.prototype.attemptAutoPlay = function () {
                    var r = this;
                    this.canAutoPlay(function (t, e) {
                        e && h.default.warn(r.name, "autoplay error.", {
                            result: t,
                            error: e
                        }), t && i.nextTick(function () {
                            return !r._destroyed && r.play()
                        })
                    })
                }, S.prototype.canAutoPlay = function (t) {
                    this.options.disableCanAutoPlay && t(!0, null);
                    var e = {
                        timeout: this.options.autoPlayTimeout || 500,
                        inline: this.options.playback.playInline || !1,
                        muted: this.options.mute || !1
                    };
                    d.default.isMobile && o.DomRecycler.options.recycleVideo && (e.element = this.el), (0, o.canAutoPlayMedia)(t, e)
                }, S.prototype._setupExternalTracks = function (t) {
                    this._externalTracks = t.map(function (t) {
                        return {
                            kind: t.kind || "subtitles",
                            label: t.label,
                            lang: t.lang,
                            src: t.src
                        }
                    })
                }, S.prototype._setupSrc = function (t) {
                    this.el.src !== t && (this._ccIsSetup = !1, this.el.src = t, this._src = this.el.src)
                }, S.prototype._onLoadedMetadata = function (t) {
                    this._handleBufferingEvents(), this.trigger(f.default.PLAYBACK_LOADEDMETADATA, {
                        duration: t.target.duration,
                        data: t
                    }), this._updateSettings();
                    var e = void 0 === this._options.autoSeekFromUrl || this._options.autoSeekFromUrl;
                    this.getPlaybackType() !== u.default.LIVE && e && this._checkInitialSeek()
                }, S.prototype._onDurationChange = function () {
                    this._updateSettings(), this._onTimeUpdate(), this._onProgress()
                }, S.prototype._updateSettings = function () {
                    this.getPlaybackType() === u.default.VOD || this.getPlaybackType() === u.default.AOD ? this.settings.left = ["playpause", "position", "duration"] : this.settings.left = ["playstop"], this.settings.seekEnabled = this.isSeekEnabled(), this.trigger(f.default.PLAYBACK_SETTINGSUPDATE)
                }, S.prototype.isSeekEnabled = function () {
                    return isFinite(this.getDuration())
                }, S.prototype.getPlaybackType = function () {
                    var t = "audio" === this.tagName ? u.default.AOD : u.default.VOD;
                    return 0 <= [0, void 0, 1 / 0].indexOf(this.el.duration) ? u.default.LIVE : t
                }, S.prototype.isHighDefinitionInUse = function () {
                    return !1
                }, S.prototype.consent = function () {
                    this.isPlaying() || (A.prototype.consent.call(this), this.el.load())
                }, S.prototype.play = function () {
                    this.trigger(f.default.PLAYBACK_PLAY_INTENT), this._stopped = !1, this._setupSrc(this._src), this._handleBufferingEvents();
                    var t = this.el.play();
                    t && t.catch && t.catch(function () { })
                }, S.prototype.pause = function () {
                    this.el.pause()
                }, S.prototype.stop = function () {
                    this.pause(), this._stopped = !0, this.el.removeAttribute("src"), this.el.load(), this._stopPlayheadMovingChecks(), this._handleBufferingEvents(), this.trigger(f.default.PLAYBACK_STOP)
                }, S.prototype.volume = function (t) {
                    0 === t ? (this.$el.attr({
                        muted: "true"
                    }), this.el.muted = !0) : (this.$el.attr({
                        muted: null
                    }), this.el.muted = !1, this.el.volume = t / 100)
                }, S.prototype.mute = function () {
                    this.el.muted = !0
                }, S.prototype.unmute = function () {
                    this.el.muted = !1
                }, S.prototype.isMuted = function () {
                    return !0 === this.el.muted || 0 === this.el.volume
                }, S.prototype.isPlaying = function () {
                    return !this.el.paused && !this.el.ended
                }, S.prototype._startPlayheadMovingChecks = function () {
                    null === this._playheadMovingTimer && (this._playheadMovingTimeOnCheck = null, this._determineIfPlayheadMoving(), this._playheadMovingTimer = setInterval(this._determineIfPlayheadMoving.bind(this), 500))
                }, S.prototype._stopPlayheadMovingChecks = function () {
                    null !== this._playheadMovingTimer && (clearInterval(this._playheadMovingTimer), this._playheadMovingTimer = null, this._playheadMoving = !1)
                }, S.prototype._determineIfPlayheadMoving = function () {
                    var t = this._playheadMovingTimeOnCheck,
                        e = this.el.currentTime;
                    this._playheadMoving = t !== e, this._playheadMovingTimeOnCheck = e, this._handleBufferingEvents()
                }, S.prototype._onWaiting = function () {
                    this._loadStarted = !0, this._handleBufferingEvents()
                }, S.prototype._onLoadedData = function () {
                    this._loadStarted = !0, this._handleBufferingEvents()
                }, S.prototype._onCanPlay = function () {
                    this._handleBufferingEvents()
                }, S.prototype._onPlaying = function () {
                    this._checkForClosedCaptions(), this._startPlayheadMovingChecks(), this._handleBufferingEvents(), this.trigger(f.default.PLAYBACK_PLAY)
                }, S.prototype._onPause = function () {
                    this._stopPlayheadMovingChecks(), this._handleBufferingEvents(), this.trigger(f.default.PLAYBACK_PAUSE)
                }, S.prototype._onSeeking = function () {
                    this._handleBufferingEvents(), this.trigger(f.default.PLAYBACK_SEEK)
                }, S.prototype._onSeeked = function () {
                    this._handleBufferingEvents(), this.trigger(f.default.PLAYBACK_SEEKED)
                }, S.prototype._onEnded = function () {
                    this._handleBufferingEvents(), this.trigger(f.default.PLAYBACK_ENDED, this.name)
                }, S.prototype._handleBufferingEvents = function () {
                    var t = !this.el.ended && !this.el.paused,
                        e = this._loadStarted && !this.el.ended && !this._stopped && (t && !this._playheadMoving || this.el.readyState < this.el.HAVE_FUTURE_DATA);
                    this._isBuffering !== e && ((this._isBuffering = e) ? this.trigger(f.default.PLAYBACK_BUFFERING, this.name) : this.trigger(f.default.PLAYBACK_BUFFERFULL, this.name))
                }, S.prototype._onError = function () {
                    var t = this.el.error || E,
                        e = t.code,
                        r = t.message,
                        i = e === E.code,
                        n = this.createError({
                            code: e,
                            description: r,
                            raw: this.el.error,
                            level: i ? c.default.Levels.WARN : c.default.Levels.FATAL
                        });
                    i ? h.default.warn(this.name, "HTML5 unknown error: ", n) : this.trigger(f.default.PLAYBACK_ERROR, n)
                }, S.prototype.destroy = function () {
                    this._destroyed = !0, this.handleTextTrackChange && this.el.textTracks.removeEventListener("change", this.handleTextTrackChange), A.prototype.destroy.call(this), this.el.removeAttribute("src"), this.el.load(), this._src = null, o.DomRecycler.garbage(this.$el)
                }, S.prototype.seek = function (t) {
                    this.el.currentTime = t
                }, S.prototype.seekPercentage = function (t) {
                    var e = this.el.duration * (t / 100);
                    this.seek(e)
                }, S.prototype._checkInitialSeek = function () {
                    var t = (0, o.seekStringToSeconds)();
                    0 !== t && this.seek(t)
                }, S.prototype.getCurrentTime = function () {
                    return this.el.currentTime
                }, S.prototype.getDuration = function () {
                    return this.el.duration
                }, S.prototype._onTimeUpdate = function () {
                    this.getPlaybackType() === u.default.LIVE ? this.trigger(f.default.PLAYBACK_TIMEUPDATE, {
                        current: 1,
                        total: 1
                    }, this.name) : this.trigger(f.default.PLAYBACK_TIMEUPDATE, {
                        current: this.el.currentTime,
                        total: this.el.duration
                    }, this.name)
                }, S.prototype._onProgress = function () {
                    if (this.el.buffered.length) {
                        for (var t = [], e = 0, r = 0; r < this.el.buffered.length; r++) t = [].concat((0, n.default)(t), [{
                            start: this.el.buffered.start(r),
                            end: this.el.buffered.end(r)
                        }]), this.el.currentTime >= t[r].start && this.el.currentTime <= t[r].end && (e = r);
                        var i = {
                            start: t[e].start,
                            current: t[e].end,
                            total: this.el.duration
                        };
                        this.trigger(f.default.PLAYBACK_PROGRESS, i, t)
                    }
                }, S.prototype._typeFor = function (t) {
                    var e = S._mimeTypesForUrl(t, y, this.options.mimeType);
                    return 0 === e.length && (e = S._mimeTypesForUrl(t, _, this.options.mimeType)), (e[0] || "").split(";")[0]
                }, S.prototype._ready = function () {
                    this._isReadyState || (this._isReadyState = !0, this.trigger(f.default.PLAYBACK_READY, this.name))
                }, S.prototype._checkForClosedCaptions = function () {
                    if (this.isHTML5Video && !this._ccIsSetup) {
                        if (this.hasClosedCaptionsTracks) {
                            this.trigger(f.default.PLAYBACK_SUBTITLE_AVAILABLE);
                            var t = this.closedCaptionsTrackId;
                            this.closedCaptionsTrackId = t, this.handleTextTrackChange = this._handleTextTrackChange.bind(this), this.el.textTracks.addEventListener("change", this.handleTextTrackChange)
                        }
                        this._ccIsSetup = !0
                    }
                }, S.prototype._handleTextTrackChange = function () {
                    var t = this.closedCaptionsTracks.find(function (t) {
                        return "showing" === t.track.mode
                    }) || {
                        id: -1
                    };
                    this._ccTrackId !== t.id && (this._ccTrackId = t.id, this.trigger(f.default.PLAYBACK_SUBTITLE_CHANGED, {
                        id: t.id
                    }))
                }, S.prototype.render = function () {
                    return this.options.playback.disableContextMenu && this.$el.on("contextmenu", function () {
                        return !1
                    }), this._externalTracks && 0 < this._externalTracks.length && this.$el.html(this.template({
                        tracks: this._externalTracks
                    })), this._ready(), this
                }, (0, e.default)(S, [{
                    key: "isReady",
                    get: function () {
                        return this._isReadyState
                    }
                }, {
                    key: "isHTML5Video",
                    get: function () {
                        return this.name === S.prototype.name
                    }
                }, {
                    key: "closedCaptionsTracks",
                    get: function () {
                        var e = 0;
                        return (this.el.textTracks ? (0, t.default)(this.el.textTracks) : []).filter(function (t) {
                            return "subtitles" === t.kind || "captions" === t.kind
                        }).map(function (t) {
                            return {
                                id: e++,
                                name: t.label,
                                track: t
                            }
                        })
                    }
                }, {
                    key: "closedCaptionsTrackId",
                    get: function () {
                        return this._ccTrackId
                    },
                    set: function (e) {
                        if ((0, o.isNumber)(e)) {
                            var t = this.closedCaptionsTracks,
                                r = void 0;
                            if (-1 !== e) {
                                if (!(r = t.find(function (t) {
                                    return t.id === e
                                }))) return;
                                if ("showing" === r.track.mode) return
                            }
                            t.filter(function (t) {
                                return "hidden" !== t.track.mode
                            }).forEach(function (t) {
                                return t.track.mode = "hidden"
                            }), r && (r.track.mode = "showing"), this._ccTrackId = e, this.trigger(f.default.PLAYBACK_SUBTITLE_CHANGED, {
                                id: e
                            })
                        }
                    }
                }, {
                    key: "template",
                    get: function () {
                        return (0, g.default)(m.default)
                    }
                }]), S);

            function S() {
                (0, s.default)(this, S);
                for (var t = arguments.length, e = Array(t), r = 0; r < t; r++) e[r] = arguments[r];
                var i = (0, l.default)(this, A.call.apply(A, [this].concat(e)));
                i._destroyed = !1, i._loadStarted = !1, i._isBuffering = !1, i._playheadMoving = !1, i._playheadMovingTimer = null, i._stopped = !1, i._ccTrackId = -1, i._setupSrc(i.options.src), i.options.playback || (i.options.playback = i.options || {}), i.options.playback.disableContextMenu = i.options.playback.disableContextMenu || i.options.disableVideoTagContextMenu;
                var n = i.options.playback,
                    a = n.preload || (d.default.isSafari ? "auto" : i.options.preload),
                    o = void 0;
                return i.options.poster && ("string" == typeof i.options.poster ? o = i.options.poster : "string" == typeof i.options.poster.url && (o = i.options.poster.url)), p.default.extend(i.el, {
                    muted: i.options.mute,
                    defaultMuted: i.options.mute,
                    loop: i.options.loop,
                    poster: o,
                    preload: a || "metadata",
                    controls: (n.controls || i.options.useVideoTagDefaultControls) && "controls",
                    crossOrigin: n.crossOrigin,
                    "x-webkit-playsinline": n.playInline
                }), n.playInline && i.$el.attr({
                    playsinline: "playsinline"
                }), n.crossOrigin && i.$el.attr({
                    crossorigin: n.crossOrigin
                }), i.settings = {
                    default: ["seekbar"]
                }, i.settings.left = ["playpause", "position", "duration"], i.settings.right = ["fullscreen", "volume", "hd-indicator"], n.externalTracks && i._setupExternalTracks(n.externalTracks), i.options.autoPlay && i.attemptAutoPlay(), i
            } (L.default = T)._mimeTypesForUrl = function (t, e, r) {
                var i = (t.split("?")[0].match(/.*\.(.*)$/) || [])[1],
                    n = r || i && e[i.toLowerCase()] || [];
                return n.constructor === Array ? n : [n]
            }, T._canPlay = function (t, e, r, i) {
                var n = T._mimeTypesForUrl(r, e, i),
                    a = document.createElement(t);
                return !!n.filter(function (t) {
                    return !!a.canPlayType(t).replace(/no/, "")
                })[0]
            }, T.canPlay = function (t, e) {
                return T._canPlay("audio", _, t, e) || T._canPlay("video", y, t, e)
            }, k.exports = L.default
        }).call(this, R(63))
    }, function (t, e) {
        t.exports = '<% for (var i = 0; i < tracks.length; i++) { %>\n  <track data-html5-video-track="<%= i %>" kind="<%= tracks[i].kind %>" label="<%= tracks[i].label %>" srclang="<%= tracks[i].lang %>" src="<%= tracks[i].src %>" />\n<% }; %>\n'
    }, function (t, e, r) {
        var i = r(187);
        "string" == typeof i && (i = [
            [t.i, i, ""]
        ]);
        var n = {
            singleton: !0,
            hmr: !0,
            transform: void 0,
            insertInto: void 0
        };
        r(10)(i, n);
        i.locals && (t.exports = i.locals)
    }, function (t, e, r) {
        (t.exports = r(8)(!1)).push([t.i, "[data-html5-video]{position:absolute;height:100%;width:100%;display:block}", ""])
    }, function (t, e, r) {
        "use strict";
        Object.defineProperty(e, "__esModule", {
            value: !0
        });
        var n = m(r(0)),
            a = m(r(1)),
            i = m(r(3)),
            o = m(r(2)),
            s = r(5),
            l = m(r(64)),
            u = m(r(14)),
            d = m(r(31)),
            c = m(r(7)),
            f = m(r(6)),
            h = m(r(4)),
            p = m(r(11)),
            g = m(r(193));

        function m(t) {
            return t && t.__esModule ? t : {
                default: t
            }
        }
        var v, y = (v = l.default, (0, o.default)(A, v), (0, i.default)(A, [{
            key: "name",
            get: function () {
                return "flash"
            }
        }, {
            key: "swfPath",
            get: function () {
                return (0, c.default)(g.default)({
                    baseUrl: this._baseUrl
                })
            }
        }, {
            key: "ended",
            get: function () {
                return "ENDED" === this._currentState
            }
        }, {
            key: "buffering",
            get: function () {
                return !!this._bufferingState && "ENDED" !== this._currentState
            }
        }]), A.prototype._bootstrap = function () {
            var t = this;
            this.el.playerPlay ? (this.el.width = "100%", this.el.height = "100%", "PLAYING" === this._currentState ? this._firstPlay() : (this._currentState = "IDLE", this._autoPlay && this.play()), (0, f.default)('<div style="position: absolute; top: 0; left: 0; width: 100%; height: 100%" />').insertAfter(this.$el), 0 < this.getDuration() ? this._metadataLoaded() : d.default.once(this.uniqueId + ":timeupdate", this._metadataLoaded, this)) : (this._attempts = this._attempts || 0, ++this._attempts <= 60 ? setTimeout(function () {
                return t._bootstrap()
            }, 50) : this.trigger(h.default.PLAYBACK_ERROR, {
                message: "Max number of attempts reached"
            }, this.name))
        }, A.prototype._metadataLoaded = function () {
            this._isReadyState = !0, this.trigger(h.default.PLAYBACK_READY, this.name), this.trigger(h.default.PLAYBACK_SETTINGSUPDATE, this.name)
        }, A.prototype.getPlaybackType = function () {
            return p.default.VOD
        }, A.prototype.isHighDefinitionInUse = function () {
            return !1
        }, A.prototype._updateTime = function () {
            this.trigger(h.default.PLAYBACK_TIMEUPDATE, {
                current: this.el.getPosition(),
                total: this.el.getDuration()
            }, this.name)
        }, A.prototype._addListeners = function () {
            d.default.on(this.uniqueId + ":progress", this._progress, this), d.default.on(this.uniqueId + ":timeupdate", this._updateTime, this), d.default.on(this.uniqueId + ":statechanged", this._checkState, this), d.default.on(this.uniqueId + ":flashready", this._bootstrap, this)
        }, A.prototype.stopListening = function () {
            v.prototype.stopListening.call(this), d.default.off(this.uniqueId + ":progress"), d.default.off(this.uniqueId + ":timeupdate"), d.default.off(this.uniqueId + ":statechanged"), d.default.off(this.uniqueId + ":flashready")
        }, A.prototype._checkState = function () {
            this._isIdle || "PAUSED" === this._currentState || ("PLAYING_BUFFERING" !== this._currentState && "PLAYING_BUFFERING" === this.el.getState() ? (this._bufferingState = !0, this.trigger(h.default.PLAYBACK_BUFFERING, this.name), this._currentState = "PLAYING_BUFFERING") : "PLAYING" === this.el.getState() ? (this._bufferingState = !1, this.trigger(h.default.PLAYBACK_BUFFERFULL, this.name), this._currentState = "PLAYING") : "IDLE" === this.el.getState() ? this._currentState = "IDLE" : "ENDED" === this.el.getState() && (this.trigger(h.default.PLAYBACK_ENDED, this.name), this.trigger(h.default.PLAYBACK_TIMEUPDATE, {
                current: 0,
                total: this.el.getDuration()
            }, this.name), this._currentState = "ENDED", this._isIdle = !0))
        }, A.prototype._progress = function () {
            "IDLE" !== this._currentState && "ENDED" !== this._currentState && this.trigger(h.default.PLAYBACK_PROGRESS, {
                start: 0,
                current: this.el.getBytesLoaded(),
                total: this.el.getBytesTotal()
            })
        }, A.prototype._firstPlay = function () {
            var t = this;
            this.el.playerPlay ? (this._isIdle = !1, this.el.playerPlay(this._src), this.listenToOnce(this, h.default.PLAYBACK_BUFFERFULL, function () {
                return t._checkInitialSeek()
            }), this._currentState = "PLAYING") : this.listenToOnce(this, h.default.PLAYBACK_READY, this._firstPlay)
        }, A.prototype._checkInitialSeek = function () {
            var t = (0, s.seekStringToSeconds)(window.location.href);
            0 !== t && this.seekSeconds(t)
        }, A.prototype.play = function () {
            this.trigger(h.default.PLAYBACK_PLAY_INTENT), "PAUSED" === this._currentState || "PLAYING_BUFFERING" === this._currentState ? (this._currentState = "PLAYING", this.el.playerResume(), this.trigger(h.default.PLAYBACK_PLAY, this.name)) : "PLAYING" !== this._currentState && (this._firstPlay(), this.trigger(h.default.PLAYBACK_PLAY, this.name))
        }, A.prototype.volume = function (t) {
            var e = this;
            this.isReady ? this.el.playerVolume(t) : this.listenToOnce(this, h.default.PLAYBACK_BUFFERFULL, function () {
                return e.volume(t)
            })
        }, A.prototype.pause = function () {
            this._currentState = "PAUSED", this.el.playerPause(), this.trigger(h.default.PLAYBACK_PAUSE, this.name)
        }, A.prototype.stop = function () {
            this.el.playerStop(), this.trigger(h.default.PLAYBACK_STOP), this.trigger(h.default.PLAYBACK_TIMEUPDATE, {
                current: 0,
                total: 0
            }, this.name)
        }, A.prototype.isPlaying = function () {
            return !!(this.isReady && -1 < this._currentState.indexOf("PLAYING"))
        }, A.prototype.getDuration = function () {
            return this.el.getDuration()
        }, A.prototype.seekPercentage = function (t) {
            var e = this;
            if (0 < this.el.getDuration()) {
                var r = this.el.getDuration() * (t / 100);
                this.seek(r)
            } else this.listenToOnce(this, h.default.PLAYBACK_BUFFERFULL, function () {
                return e.seekPercentage(t)
            })
        }, A.prototype.seek = function (t) {
            var e = this;
            this.isReady && this.el.playerSeek ? (this.el.playerSeek(t), this.trigger(h.default.PLAYBACK_TIMEUPDATE, {
                current: t,
                total: this.el.getDuration()
            }, this.name), "PAUSED" === this._currentState && this.el.playerPause()) : this.listenToOnce(this, h.default.PLAYBACK_BUFFERFULL, function () {
                return e.seek(t)
            })
        }, A.prototype.destroy = function () {
            clearInterval(this.bootstrapId), v.prototype.stopListening.call(this), this.$el.remove()
        }, (0, i.default)(A, [{
            key: "isReady",
            get: function () {
                return this._isReadyState
            }
        }]), A);

        function A() {
            (0, n.default)(this, A);
            for (var t = arguments.length, e = Array(t), r = 0; r < t; r++) e[r] = arguments[r];
            var i = (0, a.default)(this, v.call.apply(v, [this].concat(e)));
            return i._src = i.options.src, i._baseUrl = i.options.baseUrl, i._autoPlay = i.options.autoPlay, i.settings = {
                default: ["seekbar"]
            }, i.settings.left = ["playpause", "position", "duration"], i.settings.right = ["fullscreen", "volume"], i.settings.seekEnabled = !0, i._isReadyState = !1, i._addListeners(), i
        } (e.default = y).canPlay = function (t) {
            if (u.default.hasFlash && t && t.constructor === String) {
                var e = t.split("?")[0].match(/.*\.(.*)$/) || [];
                return 1 < e.length && !u.default.isMobile && e[1].toLowerCase().match(/^(mp4|mov|f4v|3gpp|3gp)$/)
            }
            return !1
        }, t.exports = e.default
    }, function (t, e, r) {
        "use strict";
        Object.defineProperty(e, "__esModule", {
            value: !0
        });
        var i = c(r(0)),
            n = c(r(3)),
            a = c(r(1)),
            o = c(r(2)),
            s = c(r(11)),
            l = c(r(7)),
            u = c(r(14)),
            d = c(r(190));

        function c(t) {
            return t && t.__esModule ? t : {
                default: t
            }
        }
        r(191);
        var f, h = (f = s.default, (0, o.default)(p, f), p.prototype.setElement = function (t) {
            this.$el = t, this.el = t[0]
        }, p.prototype.render = function () {
            return this.$el.attr("data", this.swfPath), this.$el.html(this.template({
                cid: this.cid,
                swfPath: this.swfPath,
                baseUrl: this.baseUrl,
                playbackId: this.uniqueId,
                wmode: this.wmode,
                callbackName: "window.Clappr.flashlsCallbacks." + this.cid
            })), u.default.isIE && (this.$("embed").remove(), u.default.isLegacyIE && this.$el.attr("classid", "clsid:d27cdb6e-ae6d-11cf-96b8-444553540000")), this.el.id = this.cid, this
        }, (0, n.default)(p, [{
            key: "tagName",
            get: function () {
                return "object"
            }
        }, {
            key: "swfPath",
            get: function () {
                return ""
            }
        }, {
            key: "wmode",
            get: function () {
                return "transparent"
            }
        }, {
            key: "template",
            get: function () {
                return (0, l.default)(d.default)
            }
        }, {
            key: "attributes",
            get: function () {
                var t = "application/x-shockwave-flash";
                return u.default.isLegacyIE && (t = ""), {
                    class: "clappr-flash-playback",
                    type: t,
                    width: "100%",
                    height: "100%",
                    data: this.swfPath,
                    "data-flash-playback": this.name
                }
            }
        }]), p);

        function p() {
            return (0, i.default)(this, p), (0, a.default)(this, f.apply(this, arguments))
        }
        e.default = h, t.exports = e.default
    }, function (t, e) {
        t.exports = '<param name="movie" value="<%= swfPath %>">\n<param name="quality" value="autohigh">\n<param name="swliveconnect" value="true">\n<param name="allowScriptAccess" value="always">\n<param name="bgcolor" value="#000000">\n<param name="allowFullScreen" value="false">\n<param name="wmode" value="<%= wmode %>">\n<param name="tabindex" value="1">\n<param name="FlashVars" value="playbackId=<%= playbackId %>&callback=<%= callbackName %>">\n<embed\n  name="<%= cid %>"\n  type="application/x-shockwave-flash"\n  disabled="disabled"\n  tabindex="-1"\n  enablecontextmenu="false"\n  allowScriptAccess="always"\n  quality="autohigh"\n  pluginspage="http://www.macromedia.com/go/getflashplayer"\n  wmode="<%= wmode %>"\n  swliveconnect="true"\n  allowfullscreen="false"\n  bgcolor="#000000"\n  FlashVars="playbackId=<%= playbackId %>&callback=<%= callbackName %>"\n  data="<%= swfPath %>"\n  src="<%= swfPath %>"\n  width="100%"\n  height="100%">\n</embed>\n'
    }, function (t, e, r) {
        var i = r(192);
        "string" == typeof i && (i = [
            [t.i, i, ""]
        ]);
        var n = {
            singleton: !0,
            hmr: !0,
            transform: void 0,
            insertInto: void 0
        };
        r(10)(i, n);
        i.locals && (t.exports = i.locals)
    }, function (t, e, r) {
        (t.exports = r(8)(!1)).push([t.i, ".clappr-flash-playback[data-flash-playback]{display:block;position:absolute;top:0;left:0;height:100%;width:100%;pointer-events:none}", ""])
    }, function (t, e) {
        t.exports = "<%=baseUrl%>/4b76590b32dab62bc95c1b7951efae78.swf"
    }, function (t, e, r) {
        "use strict";
        Object.defineProperty(e, "__esModule", {
            value: !0
        });
        var i = d(r(0)),
            n = d(r(3)),
            a = d(r(1)),
            o = d(r(2)),
            s = d(r(4)),
            l = d(r(11)),
            u = d(r(41));

        function d(t) {
            return t && t.__esModule ? t : {
                default: t
            }
        }
        var c, f = (c = u.default, (0, o.default)(h, c), h.prototype.updateSettings = function () {
            this.settings.left = ["playpause", "position", "duration"], this.settings.seekEnabled = this.isSeekEnabled(), this.trigger(s.default.PLAYBACK_SETTINGSUPDATE)
        }, h.prototype.getPlaybackType = function () {
            return l.default.AOD
        }, (0, n.default)(h, [{
            key: "name",
            get: function () {
                return "html5_audio"
            }
        }, {
            key: "tagName",
            get: function () {
                return "audio"
            }
        }, {
            key: "isAudioOnly",
            get: function () {
                return !0
            }
        }]), h);

        function h() {
            return (0, i.default)(this, h), (0, a.default)(this, c.apply(this, arguments))
        } (e.default = f).canPlay = function (t, e) {
            return u.default._canPlay("audio", {
                wav: ["audio/wav"],
                mp3: ["audio/mp3", 'audio/mpeg;codecs="mp3"'],
                aac: ['audio/mp4;codecs="mp4a.40.5"'],
                oga: ["audio/ogg"]
            }, t, e)
        }, t.exports = e.default
    }, function (t, e, r) {
        "use strict";
        Object.defineProperty(e, "__esModule", {
            value: !0
        });
        var n = v(r(0)),
            a = v(r(1)),
            i = v(r(3)),
            o = v(r(2)),
            s = v(r(64)),
            l = v(r(4)),
            u = v(r(7)),
            d = v(r(11)),
            c = v(r(31)),
            f = v(r(14)),
            h = v(r(25)),
            p = v(r(196)),
            g = v(r(197)),
            m = v(r(6));

        function v(t) {
            return t && t.__esModule ? t : {
                default: t
            }
        }
        var y, A = (y = s.default, (0, o.default)(_, y), (0, i.default)(_, [{
            key: "name",
            get: function () {
                return "flashls"
            }
        }, {
            key: "swfPath",
            get: function () {
                return (0, u.default)(g.default)({
                    baseUrl: this._baseUrl
                })
            }
        }, {
            key: "levels",
            get: function () {
                return this._levels || []
            }
        }, {
            key: "currentLevel",
            get: function () {
                return null === this._currentLevel || void 0 === this._currentLevel ? -1 : this._currentLevel
            },
            set: function (t) {
                this._currentLevel = t, this.trigger(l.default.PLAYBACK_LEVEL_SWITCH_START), this.el.playerSetCurrentLevel(t)
            }
        }, {
            key: "ended",
            get: function () {
                return this._hasEnded
            }
        }, {
            key: "buffering",
            get: function () {
                return !!this._bufferingState && !this._hasEnded
            }
        }]), _.prototype._initHlsParameters = function (t) {
            this._autoStartLoad = void 0 === t.autoStartLoad || t.autoStartLoad, this._capLevelToStage = void 0 !== t.capLevelToStage && t.capLevelToStage, this._maxLevelCappingMode = void 0 === t.maxLevelCappingMode ? "downscale" : t.maxLevelCappingMode, this._minBufferLength = void 0 === t.minBufferLength ? -1 : t.minBufferLength, this._minBufferLengthCapping = void 0 === t.minBufferLengthCapping ? -1 : t.minBufferLengthCapping, this._maxBufferLength = void 0 === t.maxBufferLength ? 120 : t.maxBufferLength, this._maxBackBufferLength = void 0 === t.maxBackBufferLength ? 30 : t.maxBackBufferLength, this._lowBufferLength = void 0 === t.lowBufferLength ? 3 : t.lowBufferLength, this._mediaTimePeriod = void 0 === t.mediaTimePeriod ? 100 : t.mediaTimePeriod, this._fpsDroppedMonitoringPeriod = void 0 === t.fpsDroppedMonitoringPeriod ? 5e3 : t.fpsDroppedMonitoringPeriod, this._fpsDroppedMonitoringThreshold = void 0 === t.fpsDroppedMonitoringThreshold ? .2 : t.fpsDroppedMonitoringThreshold, this._capLevelonFPSDrop = void 0 !== t.capLevelonFPSDrop && t.capLevelonFPSDrop, this._smoothAutoSwitchonFPSDrop = void 0 === t.smoothAutoSwitchonFPSDrop ? this.capLevelonFPSDrop : t.smoothAutoSwitchonFPSDrop, this._switchDownOnLevelError = void 0 === t.switchDownOnLevelError || t.switchDownOnLevelError, this._seekMode = void 0 === t.seekMode ? "ACCURATE" : t.seekMode, this._keyLoadMaxRetry = void 0 === t.keyLoadMaxRetry ? 3 : t.keyLoadMaxRetry, this._keyLoadMaxRetryTimeout = void 0 === t.keyLoadMaxRetryTimeout ? 64e3 : t.keyLoadMaxRetryTimeout, this._fragmentLoadMaxRetry = void 0 === t.fragmentLoadMaxRetry ? 3 : t.fragmentLoadMaxRetry, this._fragmentLoadMaxRetryTimeout = void 0 === t.fragmentLoadMaxRetryTimeout ? 4e3 : t.fragmentLoadMaxRetryTimeout, this._fragmentLoadSkipAfterMaxRetry = void 0 === t.fragmentLoadSkipAfterMaxRetry || t.fragmentLoadSkipAfterMaxRetry, this._maxSkippedFragments = void 0 === t.maxSkippedFragments ? 5 : t.maxSkippedFragments, this._flushLiveURLCache = void 0 !== t.flushLiveURLCache && t.flushLiveURLCache, this._initialLiveManifestSize = void 0 === t.initialLiveManifestSize ? 1 : t.initialLiveManifestSize, this._manifestLoadMaxRetry = void 0 === t.manifestLoadMaxRetry ? 3 : t.manifestLoadMaxRetry, this._manifestLoadMaxRetryTimeout = void 0 === t.manifestLoadMaxRetryTimeout ? 64e3 : t.manifestLoadMaxRetryTimeout, this._manifestRedundantLoadmaxRetry = void 0 === t.manifestRedundantLoadmaxRetry ? 3 : t.manifestRedundantLoadmaxRetry, this._startFromBitrate = void 0 === t.startFromBitrate ? -1 : t.startFromBitrate, this._startFromLevel = void 0 === t.startFromLevel ? -1 : t.startFromLevel, this._autoStartMaxDuration = void 0 === t.autoStartMaxDuration ? -1 : t.autoStartMaxDuration, this._seekFromLevel = void 0 === t.seekFromLevel ? -1 : t.seekFromLevel, this._useHardwareVideoDecoder = void 0 !== t.useHardwareVideoDecoder && t.useHardwareVideoDecoder, this._hlsLogEnabled = void 0 === t.hlsLogEnabled || t.hlsLogEnabled, this._logDebug = void 0 !== t.logDebug && t.logDebug, this._logDebug2 = void 0 !== t.logDebug2 && t.logDebug2, this._logWarn = void 0 === t.logWarn || t.logWarn, this._logError = void 0 === t.logError || t.logError, this._hlsMinimumDvrSize = void 0 === t.hlsMinimumDvrSize ? 60 : t.hlsMinimumDvrSize
        }, _.prototype._addListeners = function () {
            var i = this;
            c.default.on(this.cid + ":flashready", function () {
                return i._bootstrap()
            }), c.default.on(this.cid + ":timeupdate", function (t) {
                return i._updateTime(t)
            }), c.default.on(this.cid + ":playbackstate", function (t) {
                return i._setPlaybackState(t)
            }), c.default.on(this.cid + ":levelchanged", function (t) {
                return i._levelChanged(t)
            }), c.default.on(this.cid + ":error", function (t, e, r) {
                return i._flashPlaybackError(t, e, r)
            }), c.default.on(this.cid + ":fragmentloaded", function (t) {
                return i._onFragmentLoaded(t)
            }), c.default.on(this.cid + ":levelendlist", function (t) {
                return i._onLevelEndlist(t)
            })
        }, _.prototype.stopListening = function () {
            y.prototype.stopListening.call(this), c.default.off(this.cid + ":flashready"), c.default.off(this.cid + ":timeupdate"), c.default.off(this.cid + ":playbackstate"), c.default.off(this.cid + ":levelchanged"), c.default.off(this.cid + ":playbackerror"), c.default.off(this.cid + ":fragmentloaded"), c.default.off(this.cid + ":manifestloaded"), c.default.off(this.cid + ":levelendlist")
        }, _.prototype._bootstrap = function () {
            var t = this;
            if (this.el.playerLoad) this.el.width = "100%", this.el.height = "100%", this._isReadyState = !0, this._srcLoaded = !1, this._currentState = "IDLE", this._setFlashSettings(), this._updatePlaybackType(), (this._autoPlay || this._shouldPlayOnManifestLoaded) && this.play(), this.trigger(l.default.PLAYBACK_READY, this.name);
            else if (this._bootstrapAttempts = this._bootstrapAttempts || 0, ++this._bootstrapAttempts <= 60) setTimeout(function () {
                return t._bootstrap()
            }, 50);
            else {
                var e = this.createError({
                    code: "playerLoadFail_maxNumberAttemptsReached",
                    description: this.name + " error: Max number of attempts reached",
                    level: h.default.Levels.FATAL,
                    raw: {}
                });
                this.trigger(l.default.PLAYBACK_ERROR, e)
            }
        }, _.prototype._setFlashSettings = function () {
            this.el.playerSetAutoStartLoad(this._autoStartLoad), this.el.playerSetCapLevelToStage(this._capLevelToStage), this.el.playerSetMaxLevelCappingMode(this._maxLevelCappingMode), this.el.playerSetMinBufferLength(this._minBufferLength), this.el.playerSetMinBufferLengthCapping(this._minBufferLengthCapping), this.el.playerSetMaxBufferLength(this._maxBufferLength), this.el.playerSetMaxBackBufferLength(this._maxBackBufferLength), this.el.playerSetLowBufferLength(this._lowBufferLength), this.el.playerSetMediaTimePeriod(this._mediaTimePeriod), this.el.playerSetFpsDroppedMonitoringPeriod(this._fpsDroppedMonitoringPeriod), this.el.playerSetFpsDroppedMonitoringThreshold(this._fpsDroppedMonitoringThreshold), this.el.playerSetCapLevelonFPSDrop(this._capLevelonFPSDrop), this.el.playerSetSmoothAutoSwitchonFPSDrop(this._smoothAutoSwitchonFPSDrop), this.el.playerSetSwitchDownOnLevelError(this._switchDownOnLevelError), this.el.playerSetSeekMode(this._seekMode), this.el.playerSetKeyLoadMaxRetry(this._keyLoadMaxRetry), this.el.playerSetKeyLoadMaxRetryTimeout(this._keyLoadMaxRetryTimeout), this.el.playerSetFragmentLoadMaxRetry(this._fragmentLoadMaxRetry), this.el.playerSetFragmentLoadMaxRetryTimeout(this._fragmentLoadMaxRetryTimeout), this.el.playerSetFragmentLoadSkipAfterMaxRetry(this._fragmentLoadSkipAfterMaxRetry), this.el.playerSetMaxSkippedFragments(this._maxSkippedFragments), this.el.playerSetFlushLiveURLCache(this._flushLiveURLCache), this.el.playerSetInitialLiveManifestSize(this._initialLiveManifestSize), this.el.playerSetManifestLoadMaxRetry(this._manifestLoadMaxRetry), this.el.playerSetManifestLoadMaxRetryTimeout(this._manifestLoadMaxRetryTimeout), this.el.playerSetManifestRedundantLoadmaxRetry(this._manifestRedundantLoadmaxRetry), this.el.playerSetStartFromBitrate(this._startFromBitrate), this.el.playerSetStartFromLevel(this._startFromLevel), this.el.playerSetAutoStartMaxDuration(this._autoStartMaxDuration), this.el.playerSetSeekFromLevel(this._seekFromLevel), this.el.playerSetUseHardwareVideoDecoder(this._useHardwareVideoDecoder), this.el.playerSetLogInfo(this._hlsLogEnabled), this.el.playerSetLogDebug(this._logDebug), this.el.playerSetLogDebug2(this._logDebug2), this.el.playerSetLogWarn(this._logWarn), this.el.playerSetLogError(this._logError)
        }, _.prototype.setAutoStartLoad = function (t) {
            this._autoStartLoad = t, this.el.playerSetAutoStartLoad(this._autoStartLoad)
        }, _.prototype.setCapLevelToStage = function (t) {
            this._capLevelToStage = t, this.el.playerSetCapLevelToStage(this._capLevelToStage)
        }, _.prototype.setMaxLevelCappingMode = function (t) {
            this._maxLevelCappingMode = t, this.el.playerSetMaxLevelCappingMode(this._maxLevelCappingMode)
        }, _.prototype.setSetMinBufferLength = function (t) {
            this._minBufferLength = t, this.el.playerSetMinBufferLength(this._minBufferLength)
        }, _.prototype.setMinBufferLengthCapping = function (t) {
            this._minBufferLengthCapping = t, this.el.playerSetMinBufferLengthCapping(this._minBufferLengthCapping)
        }, _.prototype.setMaxBufferLength = function (t) {
            this._maxBufferLength = t, this.el.playerSetMaxBufferLength(this._maxBufferLength)
        }, _.prototype.setMaxBackBufferLength = function (t) {
            this._maxBackBufferLength = t, this.el.playerSetMaxBackBufferLength(this._maxBackBufferLength)
        }, _.prototype.setLowBufferLength = function (t) {
            this._lowBufferLength = t, this.el.playerSetLowBufferLength(this._lowBufferLength)
        }, _.prototype.setMediaTimePeriod = function (t) {
            this._mediaTimePeriod = t, this.el.playerSetMediaTimePeriod(this._mediaTimePeriod)
        }, _.prototype.setFpsDroppedMonitoringPeriod = function (t) {
            this._fpsDroppedMonitoringPeriod = t, this.el.playerSetFpsDroppedMonitoringPeriod(this._fpsDroppedMonitoringPeriod)
        }, _.prototype.setFpsDroppedMonitoringThreshold = function (t) {
            this._fpsDroppedMonitoringThreshold = t, this.el.playerSetFpsDroppedMonitoringThreshold(this._fpsDroppedMonitoringThreshold)
        }, _.prototype.setCapLevelonFPSDrop = function (t) {
            this._capLevelonFPSDrop = t, this.el.playerSetCapLevelonFPSDrop(this._capLevelonFPSDrop)
        }, _.prototype.setSmoothAutoSwitchonFPSDrop = function (t) {
            this._smoothAutoSwitchonFPSDrop = t, this.el.playerSetSmoothAutoSwitchonFPSDrop(this._smoothAutoSwitchonFPSDrop)
        }, _.prototype.setSwitchDownOnLevelError = function (t) {
            this._switchDownOnLevelError = t, this.el.playerSetSwitchDownOnLevelError(this._switchDownOnLevelError)
        }, _.prototype.setSeekMode = function (t) {
            this._seekMode = t, this.el.playerSetSeekMode(this._seekMode)
        }, _.prototype.setKeyLoadMaxRetry = function (t) {
            this._keyLoadMaxRetry = t, this.el.playerSetKeyLoadMaxRetry(this._keyLoadMaxRetry)
        }, _.prototype.setKeyLoadMaxRetryTimeout = function (t) {
            this._keyLoadMaxRetryTimeout = t, this.el.playerSetKeyLoadMaxRetryTimeout(this._keyLoadMaxRetryTimeout)
        }, _.prototype.setFragmentLoadMaxRetry = function (t) {
            this._fragmentLoadMaxRetry = t, this.el.playerSetFragmentLoadMaxRetry(this._fragmentLoadMaxRetry)
        }, _.prototype.setFragmentLoadMaxRetryTimeout = function (t) {
            this._fragmentLoadMaxRetryTimeout = t, this.el.playerSetFragmentLoadMaxRetryTimeout(this._fragmentLoadMaxRetryTimeout)
        }, _.prototype.setFragmentLoadSkipAfterMaxRetry = function (t) {
            this._fragmentLoadSkipAfterMaxRetry = t, this.el.playerSetFragmentLoadSkipAfterMaxRetry(this._fragmentLoadSkipAfterMaxRetry)
        }, _.prototype.setMaxSkippedFragments = function (t) {
            this._maxSkippedFragments = t, this.el.playerSetMaxSkippedFragments(this._maxSkippedFragments)
        }, _.prototype.setFlushLiveURLCache = function (t) {
            this._flushLiveURLCache = t, this.el.playerSetFlushLiveURLCache(this._flushLiveURLCache)
        }, _.prototype.setInitialLiveManifestSize = function (t) {
            this._initialLiveManifestSize = t, this.el.playerSetInitialLiveManifestSize(this._initialLiveManifestSize)
        }, _.prototype.setManifestLoadMaxRetry = function (t) {
            this._manifestLoadMaxRetry = t, this.el.playerSetManifestLoadMaxRetry(this._manifestLoadMaxRetry)
        }, _.prototype.setManifestLoadMaxRetryTimeout = function (t) {
            this._manifestLoadMaxRetryTimeout = t, this.el.playerSetManifestLoadMaxRetryTimeout(this._manifestLoadMaxRetryTimeout)
        }, _.prototype.setManifestRedundantLoadmaxRetry = function (t) {
            this._manifestRedundantLoadmaxRetry = t, this.el.playerSetManifestRedundantLoadmaxRetry(this._manifestRedundantLoadmaxRetry)
        }, _.prototype.setStartFromBitrate = function (t) {
            this._startFromBitrate = t, this.el.playerSetStartFromBitrate(this._startFromBitrate)
        }, _.prototype.setStartFromLevel = function (t) {
            this._startFromLevel = t, this.el.playerSetStartFromLevel(this._startFromLevel)
        }, _.prototype.setAutoStartMaxDuration = function (t) {
            this._autoStartMaxDuration = t, this.el.playerSetAutoStartMaxDuration(this._autoStartMaxDuration)
        }, _.prototype.setSeekFromLevel = function (t) {
            this._seekFromLevel = t, this.el.playerSetSeekFromLevel(this._seekFromLevel)
        }, _.prototype.setUseHardwareVideoDecoder = function (t) {
            this._useHardwareVideoDecoder = t, this.el.playerSetUseHardwareVideoDecoder(this._useHardwareVideoDecoder)
        }, _.prototype.setSetLogInfo = function (t) {
            this._hlsLogEnabled = t, this.el.playerSetLogInfo(this._hlsLogEnabled)
        }, _.prototype.setLogDebug = function (t) {
            this._logDebug = t, this.el.playerSetLogDebug(this._logDebug)
        }, _.prototype.setLogDebug2 = function (t) {
            this._logDebug2 = t, this.el.playerSetLogDebug2(this._logDebug2)
        }, _.prototype.setLogWarn = function (t) {
            this._logWarn = t, this.el.playerSetLogWarn(this._logWarn)
        }, _.prototype.setLogError = function (t) {
            this._logError = t, this.el.playerSetLogError(this._logError)
        }, _.prototype._levelChanged = function (t) {
            var e = this.el.getLevels()[t];
            e && (this.highDefinition = 720 <= e.height || 2e3 <= e.bitrate / 1e3, this.trigger(l.default.PLAYBACK_HIGHDEFINITIONUPDATE, this.highDefinition), this._levels && 0 !== this._levels.length || this._fillLevels(), this.trigger(l.default.PLAYBACK_BITRATE, {
                height: e.height,
                width: e.width,
                bandwidth: e.bitrate,
                bitrate: e.bitrate,
                level: t
            }), this.trigger(l.default.PLAYBACK_LEVEL_SWITCH_END))
        }, _.prototype._updateTime = function (t) {
            if ("IDLE" !== this._currentState) {
                var e = this._normalizeDuration(t.duration),
                    r = Math.min(Math.max(t.position, 0), e),
                    i = this._dvrEnabled,
                    n = this._playbackType === d.default.LIVE;
                this._dvrEnabled = n && e > this._hlsMinimumDvrSize, 100 !== e && (this._dvrEnabled !== i && (this._updateSettings(), this.trigger(l.default.PLAYBACK_SETTINGSUPDATE, this.name)), n && !this._dvrEnabled && (r = e), this.trigger(l.default.PLAYBACK_TIMEUPDATE, {
                    current: r,
                    total: e
                }, this.name))
            }
        }, _.prototype.play = function () {
            this.trigger(l.default.PLAYBACK_PLAY_INTENT), "PAUSED" === this._currentState ? this.el.playerResume() : this._srcLoaded || "PLAYING" === this._currentState ? this.el.playerPlay() : this._firstPlay()
        }, _.prototype.getPlaybackType = function () {
            return this._playbackType ? this._playbackType : null
        }, _.prototype.getCurrentTime = function () {
            return this.el.getPosition()
        }, _.prototype.getCurrentLevelIndex = function () {
            return this._currentLevel
        }, _.prototype.getCurrentLevel = function () {
            return this.levels[this.currentLevel]
        }, _.prototype.getCurrentBitrate = function () {
            return this.levels[this.currentLevel].bitrate
        }, _.prototype.setCurrentLevel = function (t) {
            this.currentLevel = t
        }, _.prototype.isHighDefinitionInUse = function () {
            return this.highDefinition
        }, _.prototype.getLevels = function () {
            return this.levels
        }, _.prototype._setPlaybackState = function (t) {
            0 <= ["PLAYING_BUFFERING", "PAUSED_BUFFERING"].indexOf(t) ? (this._bufferingState = !0, this.trigger(l.default.PLAYBACK_BUFFERING, this.name), this._updateCurrentState(t)) : 0 <= ["PLAYING", "PAUSED"].indexOf(t) ? (0 <= ["PLAYING_BUFFERING", "PAUSED_BUFFERING", "IDLE"].indexOf(this._currentState) && (this._bufferingState = !1, this.trigger(l.default.PLAYBACK_BUFFERFULL, this.name)), this._updateCurrentState(t)) : "IDLE" === t && (this._srcLoaded = !1, this._loop && 0 <= ["PLAYING_BUFFERING", "PLAYING"].indexOf(this._currentState) ? (this.play(), this.seek(0)) : (this._updateCurrentState(t), this._hasEnded = !0, this.trigger(l.default.PLAYBACK_TIMEUPDATE, {
                current: 0,
                total: this.getDuration()
            }, this.name), this.trigger(l.default.PLAYBACK_ENDED, this.name)))
        }, _.prototype._updateCurrentState = function (t) {
            "IDLE" !== (this._currentState = t) && (this._hasEnded = !1), this._updatePlaybackType(), "PLAYING" === t ? this.trigger(l.default.PLAYBACK_PLAY, this.name) : "PAUSED" === t && this.trigger(l.default.PLAYBACK_PAUSE, this.name)
        }, _.prototype._updatePlaybackType = function () {
            this._playbackType = this.el.getType(), this._playbackType && (this._playbackType = this._playbackType.toLowerCase(), this._playbackType === d.default.VOD ? this._startReportingProgress() : this._stopReportingProgress()), this.trigger(l.default.PLAYBACK_PLAYBACKSTATE, {
                type: this._playbackType
            })
        }, _.prototype._startReportingProgress = function () {
            this._reportingProgress || (this._reportingProgress = !0)
        }, _.prototype._stopReportingProgress = function () {
            this._reportingProgress = !1
        }, _.prototype._onFragmentLoaded = function (t) {
            if (this.trigger(l.default.PLAYBACK_FRAGMENT_LOADED, t), this._reportingProgress && this.getCurrentTime()) {
                var e = this.getCurrentTime() + this.el.getbufferLength();
                this.trigger(l.default.PLAYBACK_PROGRESS, {
                    start: this.getCurrentTime(),
                    current: e,
                    total: this.el.getDuration()
                })
            }
        }, _.prototype._onLevelEndlist = function () {
            this._updatePlaybackType()
        }, _.prototype._firstPlay = function () {
            var r = this;
            this._shouldPlayOnManifestLoaded = !0, this.el.playerLoad && (c.default.once(this.cid + ":manifestloaded", function (t, e) {
                return r._manifestLoaded(t, e)
            }), this._setFlashSettings(), this.el.playerLoad(this._src), this._srcLoaded = !0)
        }, _.prototype.volume = function (t) {
            var e = this;
            this.isReady ? this.el.playerVolume(t) : this.listenToOnce(this, l.default.PLAYBACK_BUFFERFULL, function () {
                return e.volume(t)
            })
        }, _.prototype.pause = function () {
            this._playbackType === d.default.LIVE && !this._dvrEnabled || (this.el.playerPause(), this._playbackType === d.default.LIVE && this._dvrEnabled && this._updateDvr(!0))
        }, _.prototype.stop = function () {
            this._srcLoaded = !1, this.el.playerStop(), this.trigger(l.default.PLAYBACK_STOP), this.trigger(l.default.PLAYBACK_TIMEUPDATE, {
                current: 0,
                total: 0
            }, this.name)
        }, _.prototype.isPlaying = function () {
            return !!this._currentState && !!this._currentState.match(/playing/i)
        }, _.prototype.getDuration = function () {
            return this._normalizeDuration(this.el.getDuration())
        }, _.prototype._normalizeDuration = function (t) {
            return this._playbackType === d.default.LIVE && (t = Math.max(0, t - 10)), t
        }, _.prototype.seekPercentage = function (t) {
            var e = this.el.getDuration(),
                r = 0;
            0 < t && (r = e * t / 100), this.seek(r)
        }, _.prototype.seek = function (t) {
            var e = this.getDuration();
            if (this._playbackType === d.default.LIVE) {
                var r = 3 < e - t;
                this._updateDvr(r)
            }
            this.el.playerSeek(t), this.trigger(l.default.PLAYBACK_TIMEUPDATE, {
                current: t,
                total: e
            }, this.name)
        }, _.prototype._updateDvr = function (t) {
            var e = !!this._dvrInUse;
            this._dvrInUse = t, this._dvrInUse !== e && (this._updateSettings(), this.trigger(l.default.PLAYBACK_DVR, this._dvrInUse), this.trigger(l.default.PLAYBACK_STATS_ADD, {
                dvr: this._dvrInUse
            }))
        }, _.prototype._flashPlaybackError = function (t, e, r) {
            var i = {
                code: t,
                description: r,
                level: h.default.Levels.FATAL,
                raw: {
                    code: t,
                    url: e,
                    message: r
                }
            },
                n = this.createError(i);
            this.trigger(l.default.PLAYBACK_ERROR, n), this.trigger(l.default.PLAYBACK_STOP)
        }, _.prototype._manifestLoaded = function (t, e) {
            this._shouldPlayOnManifestLoaded && (this._shouldPlayOnManifestLoaded = !1, this.el.playerPlay()), this._fillLevels(), this.trigger(l.default.PLAYBACK_LOADEDMETADATA, {
                duration: t,
                data: e
            })
        }, _.prototype._fillLevels = function () {
            var t = this.el.getLevels(),
                e = t.length;
            this._levels = [];
            for (var r = 0; r < e; r++) this._levels.push({
                id: r,
                label: t[r].height + "p",
                level: t[r]
            });
            this.trigger(l.default.PLAYBACK_LEVELS_AVAILABLE, this._levels)
        }, _.prototype.destroy = function () {
            this.stopListening(), this.$el.remove()
        }, _.prototype._updateSettings = function () {
            this.settings = m.default.extend({}, this._defaultSettings), this._playbackType === d.default.VOD || this._dvrInUse ? (this.settings.left = ["playpause", "position", "duration"], this.settings.seekEnabled = !0) : this._dvrEnabled ? (this.settings.left = ["playpause"], this.settings.seekEnabled = !0) : this.settings.seekEnabled = !1
        }, _.prototype._createCallbacks = function () {
            var r = this;
            window.Clappr || (window.Clappr = {}), window.Clappr.flashlsCallbacks || (window.Clappr.flashlsCallbacks = {}), this.flashlsEvents = new p.default(this.cid), window.Clappr.flashlsCallbacks[this.cid] = function (t, e) {
                r.flashlsEvents[t].apply(r.flashlsEvents, e)
            }
        }, _.prototype.render = function () {
            return y.prototype.render.call(this), this._createCallbacks(), this
        }, (0, i.default)(_, [{
            key: "isReady",
            get: function () {
                return this._isReadyState
            }
        }, {
            key: "dvrEnabled",
            get: function () {
                return !!this._dvrEnabled
            }
        }]), _);

        function _() {
            (0, n.default)(this, _);
            for (var t = arguments.length, e = Array(t), r = 0; r < t; r++) e[r] = arguments[r];
            var i = (0, a.default)(this, y.call.apply(y, [this].concat(e)));
            return i._src = i.options.src, i._baseUrl = i.options.baseUrl, i._initHlsParameters(i.options), i.highDefinition = !1, i._autoPlay = i.options.autoPlay, i._loop = i.options.loop, i._defaultSettings = {
                left: ["playstop"],
                default: ["seekbar"],
                right: ["fullscreen", "volume", "hd-indicator"],
                seekEnabled: !1
            }, i.settings = m.default.extend({}, i._defaultSettings), i._playbackType = d.default.LIVE, i._hasEnded = !1, i._addListeners(), i
        } (e.default = A).canPlay = function (t, e) {
            var r = t.split("?")[0].match(/.*\.(.*)$/) || [];
            return f.default.hasFlash && (1 < r.length && "m3u8" === r[1].toLowerCase() || "application/x-mpegURL" === e || "application/vnd.apple.mpegurl" === e)
        }, t.exports = e.default
    }, function (t, e, r) {
        "use strict";
        Object.defineProperty(e, "__esModule", {
            value: !0
        });
        var i = a(r(0)),
            n = a(r(31));

        function a(t) {
            return t && t.__esModule ? t : {
                default: t
            }
        }
        var o = (s.prototype.ready = function () {
            n.default.trigger(this.instanceId + ":flashready")
        }, s.prototype.videoSize = function (t, e) {
            n.default.trigger(this.instanceId + ":videosizechanged", t, e)
        }, s.prototype.complete = function () {
            n.default.trigger(this.instanceId + ":complete")
        }, s.prototype.error = function (t, e, r) {
            n.default.trigger(this.instanceId + ":error", t, e, r)
        }, s.prototype.manifest = function (t, e) {
            n.default.trigger(this.instanceId + ":manifestloaded", t, e)
        }, s.prototype.audioLevelLoaded = function (t) {
            n.default.trigger(this.instanceId + ":audiolevelloaded", t)
        }, s.prototype.levelLoaded = function (t) {
            n.default.trigger(this.instanceId + ":levelloaded", t)
        }, s.prototype.levelEndlist = function (t) {
            n.default.trigger(this.instanceId + ":levelendlist", t)
        }, s.prototype.fragmentLoaded = function (t) {
            n.default.trigger(this.instanceId + ":fragmentloaded", t)
        }, s.prototype.fragmentPlaying = function (t) {
            n.default.trigger(this.instanceId + ":fragmentplaying", t)
        }, s.prototype.position = function (t) {
            n.default.trigger(this.instanceId + ":timeupdate", t)
        }, s.prototype.state = function (t) {
            n.default.trigger(this.instanceId + ":playbackstate", t)
        }, s.prototype.seekState = function (t) {
            n.default.trigger(this.instanceId + ":seekstate", t)
        }, s.prototype.switch = function (t) {
            n.default.trigger(this.instanceId + ":levelchanged", t)
        }, s.prototype.audioTracksListChange = function (t) {
            n.default.trigger(this.instanceId + ":audiotracklistchanged", t)
        }, s.prototype.audioTrackChange = function (t) {
            n.default.trigger(this.instanceId + ":audiotrackchanged", t)
        }, s);

        function s(t) {
            (0, i.default)(this, s), this.instanceId = t
        }
        e.default = o, t.exports = e.default
    }, function (t, e) {
        t.exports = "<%=baseUrl%>/8fa12a459188502b9f0d39b8a67d9e6c.swf"
    }, function (t, e, r) {
        "use strict";
        Object.defineProperty(e, "__esModule", {
            value: !0
        });
        var n = g(r(62)),
            a = g(r(89)),
            o = g(r(200)),
            s = g(r(0)),
            l = g(r(1)),
            i = g(r(3)),
            u = g(r(2)),
            d = g(r(41)),
            v = g(r(201)),
            c = g(r(4)),
            y = g(r(11)),
            f = r(5),
            h = g(r(29)),
            p = g(r(25));

        function g(t) {
            return t && t.__esModule ? t : {
                default: t
            }
        }
        var m, A = (m = d.default, (0, u.default)(_, m), (0, i.default)(_, [{
            key: "name",
            get: function () {
                return "hls"
            }
        }, {
            key: "levels",
            get: function () {
                return this._levels || []
            }
        }, {
            key: "currentLevel",
            get: function () {
                return null === this._currentLevel || void 0 === this._currentLevel ? -1 : this._currentLevel
            },
            set: function (t) {
                this._currentLevel = t, this.trigger(c.default.PLAYBACK_LEVEL_SWITCH_START), this.options.playback.hlsUseNextLevel ? this._hls.nextLevel = this._currentLevel : this._hls.currentLevel = this._currentLevel
            }
        }, {
            key: "isReady",
            get: function () {
                return this._isReadyState
            }
        }, {
            key: "_startTime",
            get: function () {
                return this._playbackType === y.default.LIVE && "EVENT" !== this._playlistType ? this._extrapolatedStartTime : this._playableRegionStartTime
            }
        }, {
            key: "_now",
            get: function () {
                return (0, f.now)()
            }
        }, {
            key: "_extrapolatedStartTime",
            get: function () {
                if (!this._localStartTimeCorrelation) return this._playableRegionStartTime;
                var t = this._localStartTimeCorrelation,
                    e = this._now - t.local,
                    r = (t.remote + e) / 1e3;
                return Math.min(r, this._playableRegionStartTime + this._extrapolatedWindowDuration)
            }
        }, {
            key: "_extrapolatedEndTime",
            get: function () {
                var t = this._playableRegionStartTime + this._playableRegionDuration;
                if (!this._localEndTimeCorrelation) return t;
                var e = this._localEndTimeCorrelation,
                    r = this._now - e.local,
                    i = (e.remote + r) / 1e3;
                return Math.max(t - this._extrapolatedWindowDuration, Math.min(i, t))
            }
        }, {
            key: "_duration",
            get: function () {
                return this._extrapolatedEndTime - this._startTime
            }
        }, {
            key: "_extrapolatedWindowDuration",
            get: function () {
                return null === this._segmentTargetDuration ? 0 : this._extrapolatedWindowNumSegments * this._segmentTargetDuration
            }
        }], [{
            key: "HLSJS",
            get: function () {
                return v.default
            }
        }]), _.prototype._setup = function () {
            var r = this;
            this._ccIsSetup = !1, this._ccTracksUpdated = !1, this._hls = new v.default((0, f.assign)({}, this.options.playback.hlsjsConfig)), this._hls.on(v.default.Events.MEDIA_ATTACHED, function () {
                return r._hls.loadSource(r.options.src)
            }), this._hls.on(v.default.Events.LEVEL_LOADED, function (t, e) {
                return r._updatePlaybackType(t, e)
            }), this._hls.on(v.default.Events.LEVEL_UPDATED, function (t, e) {
                return r._onLevelUpdated(t, e)
            }), this._hls.on(v.default.Events.LEVEL_SWITCHING, function (t, e) {
                return r._onLevelSwitch(t, e)
            }), this._hls.on(v.default.Events.FRAG_LOADED, function (t, e) {
                return r._onFragmentLoaded(t, e)
            }), this._hls.on(v.default.Events.ERROR, function (t, e) {
                return r._onHLSJSError(t, e)
            }), this._hls.on(v.default.Events.SUBTITLE_TRACK_LOADED, function (t, e) {
                return r._onSubtitleLoaded(t, e)
            }), this._hls.on(v.default.Events.SUBTITLE_TRACKS_UPDATED, function () {
                return r._ccTracksUpdated = !0
            }), this._hls.attachMedia(this.el)
        }, _.prototype.render = function () {
            return this._ready(), m.prototype.render.call(this)
        }, _.prototype._ready = function () {
            this._isReadyState = !0, this.trigger(c.default.PLAYBACK_READY, this.name)
        }, _.prototype._recover = function (t, e, r) {
            if (this._recoveredDecodingError)
                if (this._recoveredAudioCodecError) {
                    h.default.error("hlsjs: failed to recover", {
                        evt: t,
                        data: e
                    }), r.level = p.default.Levels.FATAL;
                    var i = this.createError(r);
                    this.trigger(c.default.PLAYBACK_ERROR, i), this.stop()
                } else this._recoveredAudioCodecError = !0, this._hls.swapAudioCodec(), this._hls.recoverMediaError();
            else this._recoveredDecodingError = !0, this._hls.recoverMediaError()
        }, _.prototype._setupSrc = function (t) { }, _.prototype._startTimeUpdateTimer = function () {
            var t = this;
            this._timeUpdateTimer || (this._timeUpdateTimer = setInterval(function () {
                t._onDurationChange(), t._onTimeUpdate()
            }, 100))
        }, _.prototype._stopTimeUpdateTimer = function () {
            this._timeUpdateTimer && (clearInterval(this._timeUpdateTimer), this._timeUpdateTimer = null)
        }, _.prototype.getProgramDateTime = function () {
            return this._programDateTime
        }, _.prototype.getDuration = function () {
            return this._duration
        }, _.prototype.getCurrentTime = function () {
            return Math.max(0, this.el.currentTime - this._startTime)
        }, _.prototype.getStartTimeOffset = function () {
            return this._startTime
        }, _.prototype.seekPercentage = function (t) {
            var e = this._duration;
            0 < t && (e = this._duration * (t / 100)), this.seek(e)
        }, _.prototype.seek = function (t) {
            t < 0 && (h.default.warn("Attempt to seek to a negative time. Resetting to live point. Use seekToLivePoint() to seek to the live point."), t = this.getDuration()), this.dvrEnabled && this._updateDvr(t < this.getDuration() - 3), t += this._startTime, m.prototype.seek.call(this, t)
        }, _.prototype.seekToLivePoint = function () {
            this.seek(this.getDuration())
        }, _.prototype._updateDvr = function (t) {
            this.trigger(c.default.PLAYBACK_DVR, t), this.trigger(c.default.PLAYBACK_STATS_ADD, {
                dvr: t
            })
        }, _.prototype._updateSettings = function () {
            this._playbackType === y.default.VOD ? this.settings.left = ["playpause", "position", "duration"] : this.dvrEnabled ? this.settings.left = ["playpause"] : this.settings.left = ["playstop"], this.settings.seekEnabled = this.isSeekEnabled(), this.trigger(c.default.PLAYBACK_SETTINGSUPDATE)
        }, _.prototype._onHLSJSError = function (t, e) {
            var r = {
                code: e.type + "_" + e.details,
                description: this.name + " error: type: " + e.type + ", details: " + e.details,
                raw: e
            },
                i = void 0;
            if (e.response && (r.description += ", response: " + (0, a.default)(e.response)), e.fatal)
                if (0 < this._recoverAttemptsRemaining) switch (this._recoverAttemptsRemaining -= 1, e.type) {
                    case v.default.ErrorTypes.NETWORK_ERROR:
                        switch (e.details) {
                            case v.default.ErrorDetails.MANIFEST_LOAD_ERROR:
                            case v.default.ErrorDetails.MANIFEST_LOAD_TIMEOUT:
                            case v.default.ErrorDetails.MANIFEST_PARSING_ERROR:
                            case v.default.ErrorDetails.LEVEL_LOAD_ERROR:
                            case v.default.ErrorDetails.LEVEL_LOAD_TIMEOUT:
                                h.default.error("hlsjs: unrecoverable network fatal error.", {
                                    evt: t,
                                    data: e
                                }), i = this.createError(r), this.trigger(c.default.PLAYBACK_ERROR, i), this.stop();
                                break;
                            default:
                                h.default.warn("hlsjs: trying to recover from network error.", {
                                    evt: t,
                                    data: e
                                }), r.level = p.default.Levels.WARN, this.createError(r), this._hls.startLoad()
                        }
                        break;
                    case v.default.ErrorTypes.MEDIA_ERROR:
                        h.default.warn("hlsjs: trying to recover from media error.", {
                            evt: t,
                            data: e
                        }), r.level = p.default.Levels.WARN, this.createError(r), this._recover(t, e, r);
                        break;
                    default:
                        h.default.error("hlsjs: could not recover from error.", {
                            evt: t,
                            data: e
                        }), i = this.createError(r), this.trigger(c.default.PLAYBACK_ERROR, i), this.stop()
                } else h.default.error("hlsjs: could not recover from error after maximum number of attempts.", {
                    evt: t,
                    data: e
                }), i = this.createError(r), this.trigger(c.default.PLAYBACK_ERROR, i), this.stop();
            else {
                if (this.options.playback.triggerFatalErrorOnResourceDenied && this._keyIsDenied(e)) return h.default.error("hlsjs: could not load decrypt key.", {
                    evt: t,
                    data: e
                }), i = this.createError(r), this.trigger(c.default.PLAYBACK_ERROR, i), void this.stop();
                r.level = p.default.Levels.WARN, this.createError(r), h.default.warn("hlsjs: non-fatal error occurred", {
                    evt: t,
                    data: e
                })
            }
        }, _.prototype._keyIsDenied = function (t) {
            return t.type === v.default.ErrorTypes.NETWORK_ERROR && t.details === v.default.ErrorDetails.KEY_LOAD_ERROR && t.response && 400 <= t.response.code
        }, _.prototype._onTimeUpdate = function () {
            var t = {
                current: this.getCurrentTime(),
                total: this.getDuration(),
                firstFragDateTime: this.getProgramDateTime()
            };
            this._lastTimeUpdate && t.current === this._lastTimeUpdate.current && t.total === this._lastTimeUpdate.total || (this._lastTimeUpdate = t, this.trigger(c.default.PLAYBACK_TIMEUPDATE, t, this.name))
        }, _.prototype._onDurationChange = function () {
            var t = this.getDuration();
            this._lastDuration !== t && (this._lastDuration = t, m.prototype._onDurationChange.call(this))
        }, _.prototype._onProgress = function () {
            if (this.el.buffered.length) {
                for (var t = [], e = 0, r = 0; r < this.el.buffered.length; r++) t = [].concat((0, n.default)(t), [{
                    start: Math.max(0, this.el.buffered.start(r) - this._playableRegionStartTime),
                    end: Math.max(0, this.el.buffered.end(r) - this._playableRegionStartTime)
                }]), this.el.currentTime >= t[r].start && this.el.currentTime <= t[r].end && (e = r);
                var i = {
                    start: t[e].start,
                    current: t[e].end,
                    total: this.getDuration()
                };
                this.trigger(c.default.PLAYBACK_PROGRESS, i, t)
            }
        }, _.prototype.play = function () {
            this._hls || this._setup(), m.prototype.play.call(this), this._startTimeUpdateTimer()
        }, _.prototype.pause = function () {
            this._hls && (m.prototype.pause.call(this), this.dvrEnabled && this._updateDvr(!0))
        }, _.prototype.stop = function () {
            this._stopTimeUpdateTimer(), this._hls && (m.prototype.stop.call(this), this._hls.destroy(), delete this._hls)
        }, _.prototype.destroy = function () {
            this._stopTimeUpdateTimer(), this._hls && (this._hls.destroy(), delete this._hls), m.prototype.destroy.call(this)
        }, _.prototype._updatePlaybackType = function (t, e) {
            this._playbackType = e.details.live ? y.default.LIVE : y.default.VOD, this._onLevelUpdated(t, e), this._ccTracksUpdated && this._playbackType === y.default.LIVE && this.hasClosedCaptionsTracks && this._onSubtitleLoaded()
        }, _.prototype._fillLevels = function () {
            this._levels = this._hls.levels.map(function (t, e) {
                return {
                    id: e,
                    level: t,
                    label: t.bitrate / 1e3 + "Kbps"
                }
            }), this.trigger(c.default.PLAYBACK_LEVELS_AVAILABLE, this._levels)
        }, _.prototype._onLevelUpdated = function (t, e) {
            this._segmentTargetDuration = e.details.targetduration, this._playlistType = e.details.type || null;
            var r = !1,
                i = !1,
                n = e.details.fragments,
                a = this._playableRegionStartTime,
                o = this._playableRegionDuration;
            if (0 !== n.length) {
                if (n[0].rawProgramDateTime && (this._programDateTime = n[0].rawProgramDateTime), this._playableRegionStartTime !== n[0].start && (r = !0, this._playableRegionStartTime = n[0].start), r)
                    if (this._localStartTimeCorrelation) {
                        var s = this._localStartTimeCorrelation,
                            l = this._now - s.local,
                            u = (s.remote + l) / 1e3;
                        u < n[0].start ? this._localStartTimeCorrelation = {
                            local: this._now,
                            remote: 1e3 * n[0].start
                        } : u > a + this._extrapolatedWindowDuration && (this._localStartTimeCorrelation = {
                            local: this._now,
                            remote: 1e3 * Math.max(n[0].start, a + this._extrapolatedWindowDuration)
                        })
                    } else this._localStartTimeCorrelation = {
                        local: this._now,
                        remote: 1e3 * (n[0].start + this._extrapolatedWindowDuration / 2)
                    };
                var d = e.details.totalduration;
                if (this._playbackType === y.default.LIVE) {
                    var c = e.details.targetduration * ((this.options.playback.hlsjsConfig || {}).liveSyncDurationCount || v.default.DefaultConfig.liveSyncDurationCount);
                    c <= d ? (d -= c, this._durationExcludesAfterLiveSyncPoint = !0) : this._durationExcludesAfterLiveSyncPoint = !1
                }
                d !== this._playableRegionDuration && (i = !0, this._playableRegionDuration = d);
                var f = n[0].start + d,
                    h = a + o;
                if (f !== h)
                    if (this._localEndTimeCorrelation) {
                        var p = this._localEndTimeCorrelation,
                            g = this._now - p.local,
                            m = (p.remote + g) / 1e3;
                        f < m ? this._localEndTimeCorrelation = {
                            local: this._now,
                            remote: 1e3 * f
                        } : m < f - this._extrapolatedWindowDuration ? this._localEndTimeCorrelation = {
                            local: this._now,
                            remote: 1e3 * (f - this._extrapolatedWindowDuration)
                        } : h < m && (this._localEndTimeCorrelation = {
                            local: this._now,
                            remote: 1e3 * h
                        })
                    } else this._localEndTimeCorrelation = {
                        local: this._now,
                        remote: 1e3 * f
                    };
                i && this._onDurationChange(), r && this._onProgress()
            }
        }, _.prototype._onFragmentLoaded = function (t, e) {
            this.trigger(c.default.PLAYBACK_FRAGMENT_LOADED, e)
        }, _.prototype._onSubtitleLoaded = function () {
            if (!this._ccIsSetup) {
                this.trigger(c.default.PLAYBACK_SUBTITLE_AVAILABLE);
                var t = this._playbackType === y.default.LIVE ? -1 : this.closedCaptionsTrackId;
                this.closedCaptionsTrackId = t, this._ccIsSetup = !0
            }
        }, _.prototype._onLevelSwitch = function (t, e) {
            this.levels.length || this._fillLevels(), this.trigger(c.default.PLAYBACK_LEVEL_SWITCH_END), this.trigger(c.default.PLAYBACK_LEVEL_SWITCH, e);
            var r = this._hls.levels[e.level];
            r && (this.highDefinition = 720 <= r.height || 2e3 <= r.bitrate / 1e3, this.trigger(c.default.PLAYBACK_HIGHDEFINITIONUPDATE, this.highDefinition), this.trigger(c.default.PLAYBACK_BITRATE, {
                height: r.height,
                width: r.width,
                bandwidth: r.bitrate,
                bitrate: r.bitrate,
                level: e.level
            }))
        }, _.prototype.getPlaybackType = function () {
            return this._playbackType
        }, _.prototype.isSeekEnabled = function () {
            return this._playbackType === y.default.VOD || this.dvrEnabled
        }, (0, i.default)(_, [{
            key: "dvrEnabled",
            get: function () {
                return this._durationExcludesAfterLiveSyncPoint && this._duration >= this._minDvrSize && this.getPlaybackType() === y.default.LIVE
            }
        }]), _);

        function _() {
            (0, s.default)(this, _);
            for (var t = arguments.length, e = Array(t), r = 0; r < t; r++) e[r] = arguments[r];
            var i = (0, l.default)(this, m.call.apply(m, [this].concat(e)));
            return i.options.playback = (0, o.default)({}, i.options, i.options.playback), i._minDvrSize = void 0 === i.options.hlsMinimumDvrSize ? 60 : i.options.hlsMinimumDvrSize, i._extrapolatedWindowNumSegments = i.options.playback && void 0 !== i.options.playback.extrapolatedWindowNumSegments ? i.options.playback.extrapolatedWindowNumSegments : 2, i._playbackType = y.default.VOD, i._lastTimeUpdate = {
                current: 0,
                total: 0
            }, i._lastDuration = null, i._playableRegionStartTime = 0, i._localStartTimeCorrelation = null, i._localEndTimeCorrelation = null, i._playableRegionDuration = 0, i._programDateTime = 0, i._durationExcludesAfterLiveSyncPoint = !1, i._segmentTargetDuration = null, i._playlistType = null, i._recoverAttemptsRemaining = i.options.hlsRecoverAttempts || 16, i
        } (e.default = A).canPlay = function (t, e) {
            var r = t.split("?")[0].match(/.*\.(.*)$/) || [],
                i = 1 < r.length && "m3u8" === r[1].toLowerCase() || (0, f.listContainsIgnoreCase)(e, ["application/vnd.apple.mpegurl", "application/x-mpegURL"]);
            return !(!v.default.isSupported() || !i)
        }, t.exports = e.default
    }, function (t, e, r) {
        var i = r(9),
            n = i.JSON || (i.JSON = {
                stringify: JSON.stringify
            });
        t.exports = function (t) {
            return n.stringify.apply(n, arguments)
        }
    }, function (t, e, r) {
        "use strict";
        e.__esModule = !0;
        var i, n = r(12),
            a = (i = n) && i.__esModule ? i : {
                default: i
            };
        e.default = a.default || function (t) {
            for (var e = 1; e < arguments.length; e++) {
                var r = arguments[e];
                for (var i in r) Object.prototype.hasOwnProperty.call(r, i) && (t[i] = r[i])
            }
            return t
        }
    }, function (t, e, r) {
        var i;
        "undefined" != typeof window && (i = function () {
            return (i = {}, n.m = r = {
                "./node_modules/eventemitter3/index.js": function (t, e, r) {
                    "use strict";
                    var i = Object.prototype.hasOwnProperty,
                        h = "~";

                    function n() { }

                    function s(t, e, r) {
                        this.fn = t, this.context = e, this.once = r || !1
                    }

                    function a(t, e, r, i, n) {
                        if ("function" != typeof r) throw new TypeError("The listener must be a function");
                        var a = new s(r, i || t, n),
                            o = h ? h + e : e;
                        return t._events[o] ? t._events[o].fn ? t._events[o] = [t._events[o], a] : t._events[o].push(a) : (t._events[o] = a, t._eventsCount++), t
                    }

                    function u(t, e) {
                        0 == --t._eventsCount ? t._events = new n : delete t._events[e]
                    }

                    function o() {
                        this._events = new n, this._eventsCount = 0
                    }
                    Object.create && (n.prototype = Object.create(null), (new n).__proto__ || (h = !1)), o.prototype.eventNames = function () {
                        var t, e, r = [];
                        if (0 === this._eventsCount) return r;
                        for (e in t = this._events) i.call(t, e) && r.push(h ? e.slice(1) : e);
                        return Object.getOwnPropertySymbols ? r.concat(Object.getOwnPropertySymbols(t)) : r
                    }, o.prototype.listeners = function (t) {
                        var e = h ? h + t : t,
                            r = this._events[e];
                        if (!r) return [];
                        if (r.fn) return [r.fn];
                        for (var i = 0, n = r.length, a = new Array(n); i < n; i++) a[i] = r[i].fn;
                        return a
                    }, o.prototype.listenerCount = function (t) {
                        var e = h ? h + t : t,
                            r = this._events[e];
                        return r ? r.fn ? 1 : r.length : 0
                    }, o.prototype.emit = function (t, e, r, i, n, a) {
                        var o = h ? h + t : t;
                        if (!this._events[o]) return !1;
                        var s, l, u = this._events[o],
                            d = arguments.length;
                        if (u.fn) {
                            switch (u.once && this.removeListener(t, u.fn, void 0, !0), d) {
                                case 1:
                                    return u.fn.call(u.context), !0;
                                case 2:
                                    return u.fn.call(u.context, e), !0;
                                case 3:
                                    return u.fn.call(u.context, e, r), !0;
                                case 4:
                                    return u.fn.call(u.context, e, r, i), !0;
                                case 5:
                                    return u.fn.call(u.context, e, r, i, n), !0;
                                case 6:
                                    return u.fn.call(u.context, e, r, i, n, a), !0
                            }
                            for (l = 1, s = new Array(d - 1); l < d; l++) s[l - 1] = arguments[l];
                            u.fn.apply(u.context, s)
                        } else {
                            var c, f = u.length;
                            for (l = 0; l < f; l++) switch (u[l].once && this.removeListener(t, u[l].fn, void 0, !0), d) {
                                case 1:
                                    u[l].fn.call(u[l].context);
                                    break;
                                case 2:
                                    u[l].fn.call(u[l].context, e);
                                    break;
                                case 3:
                                    u[l].fn.call(u[l].context, e, r);
                                    break;
                                case 4:
                                    u[l].fn.call(u[l].context, e, r, i);
                                    break;
                                default:
                                    if (!s)
                                        for (c = 1, s = new Array(d - 1); c < d; c++) s[c - 1] = arguments[c];
                                    u[l].fn.apply(u[l].context, s)
                            }
                        }
                        return !0
                    }, o.prototype.on = function (t, e, r) {
                        return a(this, t, e, r, !1)
                    }, o.prototype.once = function (t, e, r) {
                        return a(this, t, e, r, !0)
                    }, o.prototype.removeListener = function (t, e, r, i) {
                        var n = h ? h + t : t;
                        if (!this._events[n]) return this;
                        if (!e) return u(this, n), this;
                        var a = this._events[n];
                        if (a.fn) a.fn !== e || i && !a.once || r && a.context !== r || u(this, n);
                        else {
                            for (var o = 0, s = [], l = a.length; o < l; o++)(a[o].fn !== e || i && !a[o].once || r && a[o].context !== r) && s.push(a[o]);
                            s.length ? this._events[n] = 1 === s.length ? s[0] : s : u(this, n)
                        }
                        return this
                    }, o.prototype.removeAllListeners = function (t) {
                        var e;
                        return t ? (e = h ? h + t : t, this._events[e] && u(this, e)) : (this._events = new n, this._eventsCount = 0), this
                    }, o.prototype.off = o.prototype.removeListener, o.prototype.addListener = o.prototype.on, o.prefixed = h, o.EventEmitter = o, t.exports = o
                },
                "./node_modules/url-toolkit/src/url-toolkit.js": function (t, e, r) {
                    var i, d, n, a, c;
                    i = /^((?:[a-zA-Z0-9+\-.]+:)?)(\/\/[^\/?#]*)?((?:[^\/\?#]*\/)*.*?)??(;.*?)?(\?.*?)?(#.*?)?$/, d = /^([^\/?#]*)(.*)$/, n = /(?:\/|^)\.(?=\/)/g, a = /(?:\/|^)\.\.\/(?!\.\.\/).*?(?=\/)/g, c = {
                        buildAbsoluteURL: function (t, e, r) {
                            if (r = r || {}, t = t.trim(), !(e = e.trim())) {
                                if (!r.alwaysNormalize) return t;
                                var i = c.parseURL(t);
                                if (!i) throw new Error("Error trying to parse base URL.");
                                return i.path = c.normalizePath(i.path), c.buildURLFromParts(i)
                            }
                            var n = c.parseURL(e);
                            if (!n) throw new Error("Error trying to parse relative URL.");
                            if (n.scheme) return r.alwaysNormalize ? (n.path = c.normalizePath(n.path), c.buildURLFromParts(n)) : e;
                            var a = c.parseURL(t);
                            if (!a) throw new Error("Error trying to parse base URL.");
                            if (!a.netLoc && a.path && "/" !== a.path[0]) {
                                var o = d.exec(a.path);
                                a.netLoc = o[1], a.path = o[2]
                            }
                            a.netLoc && !a.path && (a.path = "/");
                            var s = {
                                scheme: a.scheme,
                                netLoc: n.netLoc,
                                path: null,
                                params: n.params,
                                query: n.query,
                                fragment: n.fragment
                            };
                            if (!n.netLoc && (s.netLoc = a.netLoc, "/" !== n.path[0]))
                                if (n.path) {
                                    var l = a.path,
                                        u = l.substring(0, l.lastIndexOf("/") + 1) + n.path;
                                    s.path = c.normalizePath(u)
                                } else s.path = a.path, n.params || (s.params = a.params, n.query || (s.query = a.query));
                            return null === s.path && (s.path = r.alwaysNormalize ? c.normalizePath(n.path) : n.path), c.buildURLFromParts(s)
                        },
                        parseURL: function (t) {
                            var e = i.exec(t);
                            return e ? {
                                scheme: e[1] || "",
                                netLoc: e[2] || "",
                                path: e[3] || "",
                                params: e[4] || "",
                                query: e[5] || "",
                                fragment: e[6] || ""
                            } : null
                        },
                        normalizePath: function (t) {
                            for (t = t.split("").reverse().join("").replace(n, ""); t.length !== (t = t.replace(a, "")).length;);
                            return t.split("").reverse().join("")
                        },
                        buildURLFromParts: function (t) {
                            return t.scheme + t.netLoc + t.path + t.params + t.query + t.fragment
                        }
                    }, t.exports = c
                },
                "./node_modules/webworkify-webpack/index.js": function (t, e, h) {
                    function l(r) {
                        var i = {};

                        function n(t) {
                            if (i[t]) return i[t].exports;
                            var e = i[t] = {
                                i: t,
                                l: !1,
                                exports: {}
                            };
                            return r[t].call(e.exports, e, e.exports, n), e.l = !0, e.exports
                        }
                        n.m = r, n.c = i, n.i = function (t) {
                            return t
                        }, n.d = function (t, e, r) {
                            n.o(t, e) || Object.defineProperty(t, e, {
                                configurable: !1,
                                enumerable: !0,
                                get: r
                            })
                        }, n.r = function (t) {
                            Object.defineProperty(t, "__esModule", {
                                value: !0
                            })
                        }, n.n = function (t) {
                            var e = t && t.__esModule ? function () {
                                return t.default
                            } : function () {
                                return t
                            };
                            return n.d(e, "a", e), e
                        }, n.o = function (t, e) {
                            return Object.prototype.hasOwnProperty.call(t, e)
                        }, n.p = "/", n.oe = function (t) {
                            throw console.error(t), t
                        };
                        var t = n(n.s = ENTRY_MODULE);
                        return t.default || t
                    }
                    var p = "[\\.|\\-|\\+|\\w|/|@]+",
                        g = "\\(\\s*(/\\*.*?\\*/)?\\s*.*?(" + p + ").*?\\)";

                    function m(t) {
                        return (t + "").replace(/[.?*+^$[\]\\(){}|-]/g, "\\$&")
                    }

                    function f(t, e, r) {
                        var i = {};
                        i[r] = [];
                        var n = e.toString(),
                            a = n.match(/^function\s?\w*\(\w+,\s*\w+,\s*(\w+)\)/);
                        if (!a) return i;
                        for (var o, s = a[1], l = new RegExp("(\\\\n|\\W)" + m(s) + g, "g"); o = l.exec(n);) "dll-reference" !== o[3] && i[r].push(o[3]);
                        for (l = new RegExp("\\(" + m(s) + '\\("(dll-reference\\s(' + p + '))"\\)\\)' + g, "g"); o = l.exec(n);) t[o[2]] || (i[r].push(o[1]), t[o[2]] = h(o[1]).m), i[o[2]] = i[o[2]] || [], i[o[2]].push(o[4]);
                        for (var u, d = Object.keys(i), c = 0; c < d.length; c++)
                            for (var f = 0; f < i[d[c]].length; f++) u = i[d[c]][f], isNaN(1 * u) || (i[d[c]][f] = 1 * i[d[c]][f]);
                        return i
                    }

                    function v(r) {
                        return Object.keys(r).reduce(function (t, e) {
                            return t || 0 < r[e].length
                        }, !1)
                    }
                    t.exports = function (t, e) {
                        e = e || {};
                        var r = {
                            main: h.m
                        },
                            i = e.all ? {
                                main: Object.keys(r.main)
                            } : function (t, e) {
                                for (var r = {
                                    main: [e]
                                }, i = {
                                    main: []
                                }, n = {
                                    main: {}
                                }; v(r);)
                                    for (var a = Object.keys(r), o = 0; o < a.length; o++) {
                                        var s = a[o],
                                            l = r[s].pop();
                                        if (n[s] = n[s] || {}, !n[s][l] && t[s][l]) {
                                            n[s][l] = !0, i[s] = i[s] || [], i[s].push(l);
                                            for (var u = f(t, t[s][l], s), d = Object.keys(u), c = 0; c < d.length; c++) r[d[c]] = r[d[c]] || [], r[d[c]] = r[d[c]].concat(u[d[c]])
                                        }
                                    }
                                return i
                            }(r, t),
                            n = "";
                        Object.keys(i).filter(function (t) {
                            return "main" !== t
                        }).forEach(function (e) {
                            for (var t = 0; i[e][t];) t++;
                            i[e].push(t), r[e][t] = "(function(module, exports, __webpack_require__) { module.exports = __webpack_require__; })", n = n + "var " + e + " = (" + l.toString().replace("ENTRY_MODULE", JSON.stringify(t)) + ")({" + i[e].map(function (t) {
                                return JSON.stringify(t) + ": " + r[e][t].toString()
                            }).join(",") + "});\n"
                        }), n = n + "new ((" + l.toString().replace("ENTRY_MODULE", JSON.stringify(t)) + ")({" + i.main.map(function (t) {
                            return JSON.stringify(t) + ": " + r.main[t].toString()
                        }).join(",") + "}))(self);";
                        var a = new window.Blob([n], {
                            type: "text/javascript"
                        });
                        if (e.bare) return a;
                        var o = (window.URL || window.webkitURL || window.mozURL || window.msURL).createObjectURL(a),
                            s = new window.Worker(o);
                        return s.objectURL = o, s
                    }
                },
                "./src/crypt/decrypter.js": function (t, e, r) {
                    "use strict";
                    r.r(e);
                    var s = function () {
                        function t(t, e) {
                            this.subtle = t, this.aesIV = e
                        }
                        return t.prototype.decrypt = function (t, e) {
                            return this.subtle.decrypt({
                                name: "AES-CBC",
                                iv: this.aesIV
                            }, e, t)
                        }, t
                    }(),
                        l = function () {
                            function t(t, e) {
                                this.subtle = t, this.key = e
                            }
                            return t.prototype.expandKey = function () {
                                return this.subtle.importKey("raw", this.key, {
                                    name: "AES-CBC"
                                }, !1, ["encrypt", "decrypt"])
                            }, t
                        }();
                    var u = function () {
                        function t() {
                            this.rcon = [0, 1, 2, 4, 8, 16, 32, 64, 128, 27, 54], this.subMix = [new Uint32Array(256), new Uint32Array(256), new Uint32Array(256), new Uint32Array(256)], this.invSubMix = [new Uint32Array(256), new Uint32Array(256), new Uint32Array(256), new Uint32Array(256)], this.sBox = new Uint32Array(256), this.invSBox = new Uint32Array(256), this.key = new Uint32Array(0), this.initTable()
                        }
                        var e = t.prototype;
                        return e.uint8ArrayToUint32Array_ = function (t) {
                            for (var e = new DataView(t), r = new Uint32Array(4), i = 0; i < 4; i++) r[i] = e.getUint32(4 * i);
                            return r
                        }, e.initTable = function () {
                            var t = this.sBox,
                                e = this.invSBox,
                                r = this.subMix,
                                i = r[0],
                                n = r[1],
                                a = r[2],
                                o = r[3],
                                s = this.invSubMix,
                                l = s[0],
                                u = s[1],
                                d = s[2],
                                c = s[3],
                                f = new Uint32Array(256),
                                h = 0,
                                p = 0,
                                g = 0;
                            for (g = 0; g < 256; g++) f[g] = g < 128 ? g << 1 : g << 1 ^ 283;
                            for (g = 0; g < 256; g++) {
                                var m = p ^ p << 1 ^ p << 2 ^ p << 3 ^ p << 4;
                                m = m >>> 8 ^ 255 & m ^ 99;
                                var v = f[e[t[h] = m] = h],
                                    y = f[v],
                                    A = f[y],
                                    _ = 257 * f[m] ^ 16843008 * m;
                                i[h] = _ << 24 | _ >>> 8, n[h] = _ << 16 | _ >>> 16, a[h] = _ << 8 | _ >>> 24, o[h] = _, _ = 16843009 * A ^ 65537 * y ^ 257 * v ^ 16843008 * h, l[m] = _ << 24 | _ >>> 8, u[m] = _ << 16 | _ >>> 16, d[m] = _ << 8 | _ >>> 24, c[m] = _, h ? (h = v ^ f[f[f[A ^ v]]], p ^= f[f[p]]) : h = p = 1
                            }
                        }, e.expandKey = function (t) {
                            for (var e = this.uint8ArrayToUint32Array_(t), r = !0, i = 0; i < e.length && r;) r = e[i] === this.key[i], i++;
                            if (!r) {
                                this.key = e;
                                var n = this.keySize = e.length;
                                if (4 !== n && 6 !== n && 8 !== n) throw new Error("Invalid aes key size=" + n);
                                var a, o, s, l, u = this.ksRows = 4 * (n + 6 + 1),
                                    d = this.keySchedule = new Uint32Array(u),
                                    c = this.invKeySchedule = new Uint32Array(u),
                                    f = this.sBox,
                                    h = this.rcon,
                                    p = this.invSubMix,
                                    g = p[0],
                                    m = p[1],
                                    v = p[2],
                                    y = p[3];
                                for (a = 0; a < u; a++) a < n ? s = d[a] = e[a] : (l = s, a % n == 0 ? (l = f[(l = l << 8 | l >>> 24) >>> 24] << 24 | f[l >>> 16 & 255] << 16 | f[l >>> 8 & 255] << 8 | f[255 & l], l ^= h[a / n | 0] << 24) : 6 < n && a % n == 4 && (l = f[l >>> 24] << 24 | f[l >>> 16 & 255] << 16 | f[l >>> 8 & 255] << 8 | f[255 & l]), d[a] = s = (d[a - n] ^ l) >>> 0);
                                for (o = 0; o < u; o++) a = u - o, l = 3 & o ? d[a] : d[a - 4], c[o] = o < 4 || a <= 4 ? l : g[f[l >>> 24]] ^ m[f[l >>> 16 & 255]] ^ v[f[l >>> 8 & 255]] ^ y[f[255 & l]], c[o] = c[o] >>> 0
                            }
                        }, e.networkToHostOrderSwap = function (t) {
                            return t << 24 | (65280 & t) << 8 | (16711680 & t) >> 8 | t >>> 24
                        }, e.decrypt = function (t, e, r, i) {
                            for (var n, a, o, s, l, u, d, c, f, h, p, g, m, v, y = this.keySize + 6, A = this.invKeySchedule, _ = this.invSBox, b = this.invSubMix, E = b[0], T = b[1], S = b[2], k = b[3], L = this.uint8ArrayToUint32Array_(r), R = L[0], C = L[1], w = L[2], O = L[3], P = new Int32Array(t), D = new Int32Array(P.length), I = this.networkToHostOrderSwap; e < P.length;) {
                                for (f = I(P[e]), h = I(P[e + 1]), p = I(P[e + 2]), g = I(P[e + 3]), l = f ^ A[0], u = g ^ A[1], d = p ^ A[2], c = h ^ A[3], m = 4, v = 1; v < y; v++) n = E[l >>> 24] ^ T[u >> 16 & 255] ^ S[d >> 8 & 255] ^ k[255 & c] ^ A[m], a = E[u >>> 24] ^ T[d >> 16 & 255] ^ S[c >> 8 & 255] ^ k[255 & l] ^ A[m + 1], o = E[d >>> 24] ^ T[c >> 16 & 255] ^ S[l >> 8 & 255] ^ k[255 & u] ^ A[m + 2], s = E[c >>> 24] ^ T[l >> 16 & 255] ^ S[u >> 8 & 255] ^ k[255 & d] ^ A[m + 3], l = n, u = a, d = o, c = s, m += 4;
                                n = _[l >>> 24] << 24 ^ _[u >> 16 & 255] << 16 ^ _[d >> 8 & 255] << 8 ^ _[255 & c] ^ A[m], a = _[u >>> 24] << 24 ^ _[d >> 16 & 255] << 16 ^ _[c >> 8 & 255] << 8 ^ _[255 & l] ^ A[m + 1], o = _[d >>> 24] << 24 ^ _[c >> 16 & 255] << 16 ^ _[l >> 8 & 255] << 8 ^ _[255 & u] ^ A[m + 2], s = _[c >>> 24] << 24 ^ _[l >> 16 & 255] << 16 ^ _[u >> 8 & 255] << 8 ^ _[255 & d] ^ A[m + 3], m += 3, D[e] = I(n ^ R), D[e + 1] = I(s ^ C), D[e + 2] = I(o ^ w), D[e + 3] = I(a ^ O), R = f, C = h, w = p, O = g, e += 4
                            }
                            return i ? function (t) {
                                var e = t.byteLength,
                                    r = e && new DataView(t).getUint8(e - 1);
                                return r ? t.slice(0, e - r) : t
                            }(D.buffer) : D.buffer
                        }, e.destroy = function () {
                            this.key = void 0, this.keySize = void 0, this.ksRows = void 0, this.sBox = void 0, this.invSBox = void 0, this.subMix = void 0, this.invSubMix = void 0, this.keySchedule = void 0, this.invKeySchedule = void 0, this.rcon = void 0
                        }, t
                    }(),
                        a = r("./src/errors.ts"),
                        d = r("./src/utils/logger.js"),
                        o = r("./src/events.js"),
                        i = r("./src/utils/get-self-scope.js"),
                        c = Object(i.getSelfScope)(),
                        n = function () {
                            function t(t, e, r) {
                                var i = (void 0 === r ? {} : r).removePKCS7Padding,
                                    n = void 0 === i || i;
                                if (this.logEnabled = !0, this.observer = t, this.config = e, this.removePKCS7Padding = n) try {
                                    var a = c.crypto;
                                    a && (this.subtle = a.subtle || a.webkitSubtle)
                                } catch (t) { }
                                this.disableWebCrypto = !this.subtle
                            }
                            var e = t.prototype;
                            return e.isSync = function () {
                                return this.disableWebCrypto && this.config.enableSoftwareAES
                            }, e.decrypt = function (e, r, i, n) {
                                var a = this;
                                if (this.disableWebCrypto && this.config.enableSoftwareAES) {
                                    this.logEnabled && (d.logger.log("JS AES decrypt"), this.logEnabled = !1);
                                    var t = this.decryptor;
                                    t || (this.decryptor = t = new u), t.expandKey(r), n(t.decrypt(e, 0, i, this.removePKCS7Padding))
                                } else {
                                    this.logEnabled && (d.logger.log("WebCrypto AES decrypt"), this.logEnabled = !1);
                                    var o = this.subtle;
                                    this.key !== r && (this.key = r, this.fastAesKey = new l(o, r)), this.fastAesKey.expandKey().then(function (t) {
                                        new s(o, i).decrypt(e, t).catch(function (t) {
                                            a.onWebCryptoError(t, e, r, i, n)
                                        }).then(function (t) {
                                            n(t)
                                        })
                                    }).catch(function (t) {
                                        a.onWebCryptoError(t, e, r, i, n)
                                    })
                                }
                            }, e.onWebCryptoError = function (t, e, r, i, n) {
                                this.config.enableSoftwareAES ? (d.logger.log("WebCrypto Error, disable WebCrypto API"), this.disableWebCrypto = !0, this.logEnabled = !0, this.decrypt(e, r, i, n)) : (d.logger.error("decrypting error : " + t.message), this.observer.trigger(o.default.ERROR, {
                                    type: a.ErrorTypes.MEDIA_ERROR,
                                    details: a.ErrorDetails.FRAG_DECRYPT_ERROR,
                                    fatal: !0,
                                    reason: t.message
                                }))
                            }, e.destroy = function () {
                                var t = this.decryptor;
                                t && (t.destroy(), this.decryptor = void 0)
                            }, t
                        }();
                    e.default = n
                },
                "./src/demux/demuxer-inline.js": function (t, e, r) {
                    "use strict";
                    r.r(e);
                    var J = r("./src/events.js"),
                        tt = r("./src/errors.ts"),
                        g = r("./src/crypt/decrypter.js"),
                        p = r("./src/polyfills/number-isFinite.js"),
                        et = r("./src/utils/logger.js"),
                        i = r("./src/utils/get-self-scope.js");

                    function n(t, e) {
                        return 255 === t[e] && 240 == (246 & t[e + 1])
                    }

                    function d(t, e) {
                        return 1 & t[e + 1] ? 7 : 9
                    }

                    function c(t, e) {
                        return (3 & t[e + 3]) << 11 | t[e + 4] << 3 | (224 & t[e + 5]) >>> 5
                    }

                    function m(t, e) {
                        return !!(e + 1 < t.length && n(t, e))
                    }

                    function a(t, e) {
                        if (m(t, e)) {
                            var r = d(t, e);
                            e + 5 < t.length && (r = c(t, e));
                            var i = e + r;
                            if (i === t.length || i + 1 < t.length && n(t, i)) return !0
                        }
                        return !1
                    }

                    function v(t, e, r, i, n) {
                        if (!t.samplerate) {
                            var a = function (t, e, r, i) {
                                var n, a, o, s, l, u = navigator.userAgent.toLowerCase(),
                                    d = i,
                                    c = [96e3, 88200, 64e3, 48e3, 44100, 32e3, 24e3, 22050, 16e3, 12e3, 11025, 8e3, 7350];
                                if (n = 1 + ((192 & e[r + 2]) >>> 6), a = (60 & e[r + 2]) >>> 2, !(c.length - 1 < a)) return s = (1 & e[r + 2]) << 2, s |= (192 & e[r + 3]) >>> 6, et.logger.log("manifest codec:" + i + ",ADTS data:type:" + n + ",sampleingIndex:" + a + "[" + c[a] + "Hz],channelConfig:" + s), o = /firefox/i.test(u) ? 6 <= a ? (n = 5, l = new Array(4), a - 3) : (n = 2, l = new Array(2), a) : -1 !== u.indexOf("android") ? (n = 2, l = new Array(2), a) : (n = 5, l = new Array(4), i && (-1 !== i.indexOf("mp4a.40.29") || -1 !== i.indexOf("mp4a.40.5")) || !i && 6 <= a ? a - 3 : ((i && -1 !== i.indexOf("mp4a.40.2") && (6 <= a && 1 == s || /vivaldi/i.test(u)) || !i && 1 == s) && (n = 2, l = new Array(2)), a)), l[0] = n << 3, l[0] |= (14 & a) >> 1, l[1] |= (1 & a) << 7, l[1] |= s << 3, 5 === n && (l[1] |= (14 & o) >> 1, l[2] = (1 & o) << 7, l[2] |= 8, l[3] = 0), {
                                    config: l,
                                    samplerate: c[a],
                                    channelCount: s,
                                    codec: "mp4a.40." + n,
                                    manifestCodec: d
                                };
                                t.trigger(J.default.ERROR, {
                                    type: tt.ErrorTypes.MEDIA_ERROR,
                                    details: tt.ErrorDetails.FRAG_PARSING_ERROR,
                                    fatal: !0,
                                    reason: "invalid ADTS sampling index:" + a
                                })
                            }(e, r, i, n);
                            t.config = a.config, t.samplerate = a.samplerate, t.channelCount = a.channelCount, t.codec = a.codec, t.manifestCodec = a.manifestCodec, et.logger.log("parsed codec:" + t.codec + ",rate:" + a.samplerate + ",nb channel:" + a.channelCount)
                        }
                    }

                    function y(t) {
                        return 9216e4 / t
                    }

                    function A(t, e, r, i, n) {
                        var a = function (t, e, r, i, n) {
                            var a, o, s = t.length;
                            if (a = d(t, e), o = c(t, e), 0 < (o -= a) && e + a + o <= s) return {
                                headerLength: a,
                                frameLength: o,
                                stamp: r + i * n
                            }
                        }(e, r, i, n, y(t.samplerate));
                        if (a) {
                            var o = a.stamp,
                                s = a.headerLength,
                                l = a.frameLength,
                                u = {
                                    unit: e.subarray(r + s, r + s + l),
                                    pts: o,
                                    dts: o
                                };
                            return t.samples.push(u), {
                                sample: u,
                                length: l + s
                            }
                        }
                    }
                    var R = r("./src/demux/id3.js"),
                        T = function () {
                            function t(t, e, r) {
                                this.observer = t, this.config = r, this.remuxer = e
                            }
                            var e = t.prototype;
                            return e.resetInitSegment = function (t, e, r, i) {
                                this._audioTrack = {
                                    container: "audio/adts",
                                    type: "audio",
                                    id: 0,
                                    sequenceNumber: 0,
                                    isAAC: !0,
                                    samples: [],
                                    len: 0,
                                    manifestCodec: e,
                                    duration: i,
                                    inputTimeScale: 9e4
                                }
                            }, e.resetTimeStamp = function () { }, t.probe = function (t) {
                                if (!t) return !1;
                                for (var e = (R.default.getID3Data(t, 0) || []).length, r = t.length; e < r; e++)
                                    if (a(t, e)) return et.logger.log("ADTS sync word found !"), !0;
                                return !1
                            }, e.append = function (t, e, r, i) {
                                for (var n = this._audioTrack, a = R.default.getID3Data(t, 0) || [], o = R.default.getTimeStamp(a), s = Object(p.isFiniteNumber)(o) ? 90 * o : 9e4 * e, l = 0, u = s, d = t.length, c = a.length, f = [{
                                    pts: u,
                                    dts: u,
                                    data: a
                                }]; c < d - 1;)
                                    if (m(t, c) && c + 5 < d) {
                                        v(n, this.observer, t, c, n.manifestCodec);
                                        var h = A(n, t, c, s, l);
                                        if (!h) {
                                            et.logger.log("Unable to parse AAC frame");
                                            break
                                        }
                                        c += h.length, u = h.sample.pts, l++
                                    } else R.default.isHeader(t, c) ? (a = R.default.getID3Data(t, c), f.push({
                                        pts: u,
                                        dts: u,
                                        data: a
                                    }), c += a.length) : c++;
                                this.remuxer.remux(n, {
                                    samples: []
                                }, {
                                    samples: f,
                                    inputTimeScale: 9e4
                                }, {
                                    samples: []
                                }, e, r, i)
                            }, e.destroy = function () { }, t
                        }(),
                        S = r("./src/demux/mp4demuxer.js"),
                        _ = {
                            BitratesMap: [32, 64, 96, 128, 160, 192, 224, 256, 288, 320, 352, 384, 416, 448, 32, 48, 56, 64, 80, 96, 112, 128, 160, 192, 224, 256, 320, 384, 32, 40, 48, 56, 64, 80, 96, 112, 128, 160, 192, 224, 256, 320, 32, 48, 56, 64, 80, 96, 112, 128, 144, 160, 176, 192, 224, 256, 8, 16, 24, 32, 40, 48, 56, 64, 80, 96, 112, 128, 144, 160],
                            SamplingRateMap: [44100, 48e3, 32e3, 22050, 24e3, 16e3, 11025, 12e3, 8e3],
                            SamplesCoefficients: [
                                [0, 72, 144, 12],
                                [0, 0, 0, 0],
                                [0, 72, 144, 12],
                                [0, 144, 144, 12]
                            ],
                            BytesInSlot: [0, 1, 1, 4],
                            appendFrame: function (t, e, r, i, n) {
                                if (!(r + 24 > e.length)) {
                                    var a = this.parseHeader(e, r);
                                    if (a && r + a.frameLength <= e.length) {
                                        var o = i + n * (9e4 * a.samplesPerFrame / a.sampleRate),
                                            s = {
                                                unit: e.subarray(r, r + a.frameLength),
                                                pts: o,
                                                dts: o
                                            };
                                        return t.config = [], t.channelCount = a.channelCount, t.samplerate = a.sampleRate, t.samples.push(s), {
                                            sample: s,
                                            length: a.frameLength
                                        }
                                    }
                                }
                            },
                            parseHeader: function (t, e) {
                                var r = t[e + 1] >> 3 & 3,
                                    i = t[e + 1] >> 1 & 3,
                                    n = t[e + 2] >> 4 & 15,
                                    a = t[e + 2] >> 2 & 3,
                                    o = t[e + 2] >> 1 & 1;
                                if (1 != r && 0 != n && 15 != n && 3 != a) {
                                    var s = 3 == r ? 3 - i : 3 == i ? 3 : 4,
                                        l = 1e3 * _.BitratesMap[14 * s + n - 1],
                                        u = 3 == r ? 0 : 2 == r ? 1 : 2,
                                        d = _.SamplingRateMap[3 * u + a],
                                        c = t[e + 3] >> 6 == 3 ? 1 : 2,
                                        f = _.SamplesCoefficients[r][i],
                                        h = _.BytesInSlot[i],
                                        p = 8 * f * h;
                                    return {
                                        sampleRate: d,
                                        channelCount: c,
                                        frameLength: parseInt(f * l / d + o, 10) * h,
                                        samplesPerFrame: p
                                    }
                                }
                            },
                            isHeaderPattern: function (t, e) {
                                return 255 === t[e] && 224 == (224 & t[e + 1]) && 0 != (6 & t[e + 1])
                            },
                            isHeader: function (t, e) {
                                return !!(e + 1 < t.length && this.isHeaderPattern(t, e))
                            },
                            probe: function (t, e) {
                                if (e + 1 < t.length && this.isHeaderPattern(t, e)) {
                                    var r = this.parseHeader(t, e),
                                        i = 4;
                                    r && r.frameLength && (i = r.frameLength);
                                    var n = e + i;
                                    if (n === t.length || n + 1 < t.length && this.isHeaderPattern(t, n)) return !0
                                }
                                return !1
                            }
                        },
                        b = _,
                        C = function () {
                            function t(t) {
                                this.data = t, this.bytesAvailable = t.byteLength, this.word = 0, this.bitsAvailable = 0
                            }
                            var e = t.prototype;
                            return e.loadWord = function () {
                                var t = this.data,
                                    e = this.bytesAvailable,
                                    r = t.byteLength - e,
                                    i = new Uint8Array(4),
                                    n = Math.min(4, e);
                                if (0 === n) throw new Error("no bytes available");
                                i.set(t.subarray(r, r + n)), this.word = new DataView(i.buffer).getUint32(0), this.bitsAvailable = 8 * n, this.bytesAvailable -= n
                            }, e.skipBits = function (t) {
                                var e;
                                this.bitsAvailable > t || (t -= this.bitsAvailable, t -= (e = t >> 3) >> 3, this.bytesAvailable -= e, this.loadWord()), this.word <<= t, this.bitsAvailable -= t
                            }, e.readBits = function (t) {
                                var e = Math.min(this.bitsAvailable, t),
                                    r = this.word >>> 32 - e;
                                return 32 < t && et.logger.error("Cannot read more than 32 bits at a time"), this.bitsAvailable -= e, 0 < this.bitsAvailable ? this.word <<= e : 0 < this.bytesAvailable && this.loadWord(), 0 < (e = t - e) && this.bitsAvailable ? r << e | this.readBits(e) : r
                            }, e.skipLZ = function () {
                                var t;
                                for (t = 0; t < this.bitsAvailable; ++t)
                                    if (0 != (this.word & 2147483648 >>> t)) return this.word <<= t, this.bitsAvailable -= t, t;
                                return this.loadWord(), t + this.skipLZ()
                            }, e.skipUEG = function () {
                                this.skipBits(1 + this.skipLZ())
                            }, e.skipEG = function () {
                                this.skipBits(1 + this.skipLZ())
                            }, e.readUEG = function () {
                                var t = this.skipLZ();
                                return this.readBits(t + 1) - 1
                            }, e.readEG = function () {
                                var t = this.readUEG();
                                return 1 & t ? 1 + t >>> 1 : -1 * (t >>> 1)
                            }, e.readBoolean = function () {
                                return 1 === this.readBits(1)
                            }, e.readUByte = function () {
                                return this.readBits(8)
                            }, e.readUShort = function () {
                                return this.readBits(16)
                            }, e.readUInt = function () {
                                return this.readBits(32)
                            }, e.skipScalingList = function (t) {
                                var e, r = 8,
                                    i = 8;
                                for (e = 0; e < t; e++) 0 !== i && (i = (r + this.readEG() + 256) % 256), r = 0 === i ? r : i
                            }, e.readSPS = function () {
                                var t, e, r, i, n, a, o, s = 0,
                                    l = 0,
                                    u = 0,
                                    d = 0,
                                    c = this.readUByte.bind(this),
                                    f = this.readBits.bind(this),
                                    h = this.readUEG.bind(this),
                                    p = this.readBoolean.bind(this),
                                    g = this.skipBits.bind(this),
                                    m = this.skipEG.bind(this),
                                    v = this.skipUEG.bind(this),
                                    y = this.skipScalingList.bind(this);
                                if (c(), t = c(), f(5), g(3), c(), v(), 100 === t || 110 === t || 122 === t || 244 === t || 44 === t || 83 === t || 86 === t || 118 === t || 128 === t) {
                                    var A = h();
                                    if (3 === A && g(1), v(), v(), g(1), p())
                                        for (a = 3 !== A ? 8 : 12, o = 0; o < a; o++) p() && y(o < 6 ? 16 : 64)
                                }
                                v();
                                var _ = h();
                                if (0 === _) h();
                                else if (1 === _)
                                    for (g(1), m(), m(), e = h(), o = 0; o < e; o++) m();
                                v(), g(1), r = h(), i = h(), 0 === (n = f(1)) && g(1), g(1), p() && (s = h(), l = h(), u = h(), d = h());
                                var b = [1, 1];
                                if (p() && p()) switch (c()) {
                                    case 1:
                                        b = [1, 1];
                                        break;
                                    case 2:
                                        b = [12, 11];
                                        break;
                                    case 3:
                                        b = [10, 11];
                                        break;
                                    case 4:
                                        b = [16, 11];
                                        break;
                                    case 5:
                                        b = [40, 33];
                                        break;
                                    case 6:
                                        b = [24, 11];
                                        break;
                                    case 7:
                                        b = [20, 11];
                                        break;
                                    case 8:
                                        b = [32, 11];
                                        break;
                                    case 9:
                                        b = [80, 33];
                                        break;
                                    case 10:
                                        b = [18, 11];
                                        break;
                                    case 11:
                                        b = [15, 11];
                                        break;
                                    case 12:
                                        b = [64, 33];
                                        break;
                                    case 13:
                                        b = [160, 99];
                                        break;
                                    case 14:
                                        b = [4, 3];
                                        break;
                                    case 15:
                                        b = [3, 2];
                                        break;
                                    case 16:
                                        b = [2, 1];
                                        break;
                                    case 255:
                                        b = [c() << 8 | c(), c() << 8 | c()]
                                }
                                return {
                                    width: Math.ceil(16 * (r + 1) - 2 * s - 2 * l),
                                    height: (2 - n) * (i + 1) * 16 - (n ? 2 : 4) * (u + d),
                                    pixelRatio: b
                                }
                            }, e.readSliceType = function () {
                                return this.readUByte(), this.readUEG(), this.readUEG()
                            }, t
                        }(),
                        o = function () {
                            function t(t, e, r, i) {
                                this.decryptdata = r, this.discardEPB = i, this.decrypter = new g.default(t, e, {
                                    removePKCS7Padding: !1
                                })
                            }
                            var e = t.prototype;
                            return e.decryptBuffer = function (t, e) {
                                this.decrypter.decrypt(t, this.decryptdata.key.buffer, this.decryptdata.iv.buffer, e)
                            }, e.decryptAacSample = function (e, r, i, n) {
                                var a = e[r].unit,
                                    t = a.subarray(16, a.length - a.length % 16),
                                    o = t.buffer.slice(t.byteOffset, t.byteOffset + t.length),
                                    s = this;
                                this.decryptBuffer(o, function (t) {
                                    t = new Uint8Array(t), a.set(t, 16), n || s.decryptAacSamples(e, r + 1, i)
                                })
                            }, e.decryptAacSamples = function (t, e, r) {
                                for (; ; e++) {
                                    if (e >= t.length) return void r();
                                    if (!(t[e].unit.length < 32)) {
                                        var i = this.decrypter.isSync();
                                        if (this.decryptAacSample(t, e, r, i), !i) return
                                    }
                                }
                            }, e.getAvcEncryptedData = function (t) {
                                for (var e = 16 * Math.floor((t.length - 48) / 160) + 16, r = new Int8Array(e), i = 0, n = 32; n <= t.length - 16; n += 160, i += 16) r.set(t.subarray(n, n + 16), i);
                                return r
                            }, e.getAvcDecryptedUnit = function (t, e) {
                                e = new Uint8Array(e);
                                for (var r = 0, i = 32; i <= t.length - 16; i += 160, r += 16) t.set(e.subarray(r, r + 16), i);
                                return t
                            }, e.decryptAvcSample = function (e, r, i, n, a, o) {
                                var s = this.discardEPB(a.data),
                                    t = this.getAvcEncryptedData(s),
                                    l = this;
                                this.decryptBuffer(t.buffer, function (t) {
                                    a.data = l.getAvcDecryptedUnit(s, t), o || l.decryptAvcSamples(e, r, i + 1, n)
                                })
                            }, e.decryptAvcSamples = function (t, e, r, i) {
                                for (; ; e++, r = 0) {
                                    if (e >= t.length) return void i();
                                    for (var n = t[e].units; !(r >= n.length); r++) {
                                        var a = n[r];
                                        if (!(a.length <= 48 || 1 !== a.type && 5 !== a.type)) {
                                            var o = this.decrypter.isSync();
                                            if (this.decryptAvcSample(t, e, r, i, a, o), !o) return
                                        }
                                    }
                                }
                            }, t
                        }(),
                        s = {
                            video: 1,
                            audio: 2,
                            id3: 3,
                            text: 4
                        },
                        k = function () {
                            function P(t, e, r, i) {
                                this.observer = t, this.config = r, this.typeSupported = i, this.remuxer = e, this.sampleAes = null
                            }
                            var t = P.prototype;
                            return t.setDecryptData = function (t) {
                                null != t && null != t.key && "SAMPLE-AES" === t.method ? this.sampleAes = new o(this.observer, this.config, t, this.discardEPB) : this.sampleAes = null
                            }, P.probe = function (t) {
                                var e = P._syncOffset(t);
                                return !(e < 0) && (e && et.logger.warn("MPEG2-TS detected but first sync word found @ offset " + e + ", junk ahead ?"), !0)
                            }, P._syncOffset = function (t) {
                                for (var e = Math.min(1e3, t.length - 564), r = 0; r < e;) {
                                    if (71 === t[r] && 71 === t[r + 188] && 71 === t[r + 376]) return r;
                                    r++
                                }
                                return -1
                            }, P.createTrack = function (t, e) {
                                return {
                                    container: "video" === t || "audio" === t ? "video/mp2t" : void 0,
                                    type: t,
                                    id: s[t],
                                    pid: -1,
                                    inputTimeScale: 9e4,
                                    sequenceNumber: 0,
                                    samples: [],
                                    dropped: "video" === t ? 0 : void 0,
                                    isAAC: "audio" === t || void 0,
                                    duration: "audio" === t ? e : void 0
                                }
                            }, t.resetInitSegment = function (t, e, r, i) {
                                this.pmtParsed = !1, this._pmtId = -1, this._avcTrack = P.createTrack("video", i), this._audioTrack = P.createTrack("audio", i), this._id3Track = P.createTrack("id3", i), this._txtTrack = P.createTrack("text", i), this.aacOverFlow = null, this.aacLastPTS = null, this.avcSample = null, this.audioCodec = e, this.videoCodec = r, this._duration = i
                            }, t.resetTimeStamp = function () { }, t.append = function (t, e, r, i) {
                                var n, a, o, s, l, u = t.length,
                                    d = !1;
                                this.contiguous = r;
                                var c = this.pmtParsed,
                                    f = this._avcTrack,
                                    h = this._audioTrack,
                                    p = this._id3Track,
                                    g = f.pid,
                                    m = h.pid,
                                    v = p.pid,
                                    y = this._pmtId,
                                    A = f.pesData,
                                    _ = h.pesData,
                                    b = p.pesData,
                                    E = this._parsePAT,
                                    T = this._parsePMT,
                                    S = this._parsePES,
                                    k = this._parseAVCPES.bind(this),
                                    L = this._parseAACPES.bind(this),
                                    R = this._parseMPEGPES.bind(this),
                                    C = this._parseID3PES.bind(this),
                                    w = P._syncOffset(t);
                                for (u -= (u + w) % 188, n = w; n < u; n += 188)
                                    if (71 === t[n]) {
                                        if (a = !!(64 & t[n + 1]), o = ((31 & t[n + 1]) << 8) + t[n + 2], 1 < (48 & t[n + 3]) >> 4) {
                                            if ((s = n + 5 + t[n + 4]) === n + 188) continue
                                        } else s = n + 4;
                                        switch (o) {
                                            case g:
                                                a && (A && (l = S(A)) && k(l, !1), A = {
                                                    data: [],
                                                    size: 0
                                                }), A && (A.data.push(t.subarray(s, n + 188)), A.size += n + 188 - s);
                                                break;
                                            case m:
                                                a && (_ && (l = S(_)) && (h.isAAC ? L(l) : R(l)), _ = {
                                                    data: [],
                                                    size: 0
                                                }), _ && (_.data.push(t.subarray(s, n + 188)), _.size += n + 188 - s);
                                                break;
                                            case v:
                                                a && (b && (l = S(b)) && C(l), b = {
                                                    data: [],
                                                    size: 0
                                                }), b && (b.data.push(t.subarray(s, n + 188)), b.size += n + 188 - s);
                                                break;
                                            case 0:
                                                a && (s += t[s] + 1), y = this._pmtId = E(t, s);
                                                break;
                                            case y:
                                                a && (s += t[s] + 1);
                                                var O = T(t, s, !0 === this.typeSupported.mpeg || !0 === this.typeSupported.mp3, null != this.sampleAes);
                                                0 < (g = O.avc) && (f.pid = g), 0 < (m = O.audio) && (h.pid = m, h.isAAC = O.isAAC), 0 < (v = O.id3) && (p.pid = v), d && !c && (et.logger.log("reparse from beginning"), d = !1, n = w - 188), c = this.pmtParsed = !0;
                                                break;
                                            case 17:
                                            case 8191:
                                                break;
                                            default:
                                                d = !0
                                        }
                                    } else this.observer.trigger(J.default.ERROR, {
                                        type: tt.ErrorTypes.MEDIA_ERROR,
                                        details: tt.ErrorDetails.FRAG_PARSING_ERROR,
                                        fatal: !1,
                                        reason: "TS packet did not start with 0x47"
                                    });
                                A && (l = S(A)) ? (k(l, !0), f.pesData = null) : f.pesData = A, _ && (l = S(_)) ? (h.isAAC ? L(l) : R(l), h.pesData = null) : (_ && _.size && et.logger.log("last AAC PES packet truncated,might overlap between fragments"), h.pesData = _), b && (l = S(b)) ? (C(l), p.pesData = null) : p.pesData = b, null == this.sampleAes ? this.remuxer.remux(h, f, p, this._txtTrack, e, r, i) : this.decryptAndRemux(h, f, p, this._txtTrack, e, r, i)
                            }, t.decryptAndRemux = function (t, e, r, i, n, a, o) {
                                if (t.samples && t.isAAC) {
                                    var s = this;
                                    this.sampleAes.decryptAacSamples(t.samples, 0, function () {
                                        s.decryptAndRemuxAvc(t, e, r, i, n, a, o)
                                    })
                                } else this.decryptAndRemuxAvc(t, e, r, i, n, a, o)
                            }, t.decryptAndRemuxAvc = function (t, e, r, i, n, a, o) {
                                if (e.samples) {
                                    var s = this;
                                    this.sampleAes.decryptAvcSamples(e.samples, 0, 0, function () {
                                        s.remuxer.remux(t, e, r, i, n, a, o)
                                    })
                                } else this.remuxer.remux(t, e, r, i, n, a, o)
                            }, t.destroy = function () {
                                this._initPTS = this._initDTS = void 0, this._duration = 0
                            }, t._parsePAT = function (t, e) {
                                return (31 & t[e + 10]) << 8 | t[e + 11]
                            }, t._parsePMT = function (t, e, r, i) {
                                var n, a, o = {
                                    audio: -1,
                                    avc: -1,
                                    id3: -1,
                                    isAAC: !0
                                };
                                for (n = e + 3 + ((15 & t[e + 1]) << 8 | t[e + 2]) - 4, e += 12 + ((15 & t[e + 10]) << 8 | t[e + 11]); e < n;) {
                                    switch (a = (31 & t[e + 1]) << 8 | t[e + 2], t[e]) {
                                        case 207:
                                            if (!i) {
                                                et.logger.log("unknown stream type:" + t[e]);
                                                break
                                            }
                                        case 15:
                                            -1 === o.audio && (o.audio = a);
                                            break;
                                        case 21:
                                            -1 === o.id3 && (o.id3 = a);
                                            break;
                                        case 219:
                                            if (!i) {
                                                et.logger.log("unknown stream type:" + t[e]);
                                                break
                                            }
                                        case 27:
                                            -1 === o.avc && (o.avc = a);
                                            break;
                                        case 3:
                                        case 4:
                                            r ? -1 === o.audio && (o.audio = a, o.isAAC = !1) : et.logger.log("MPEG audio found, not supported in this browser for now");
                                            break;
                                        case 36:
                                            et.logger.warn("HEVC stream type found, not supported for now");
                                            break;
                                        default:
                                            et.logger.log("unknown stream type:" + t[e])
                                    }
                                    e += 5 + ((15 & t[e + 3]) << 8 | t[e + 4])
                                }
                                return o
                            }, t._parsePES = function (t) {
                                var e, r, i, n, a, o, s, l, u = 0,
                                    d = t.data;
                                if (!t || 0 === t.size) return null;
                                for (; d[0].length < 19 && 1 < d.length;) {
                                    var c = new Uint8Array(d[0].length + d[1].length);
                                    c.set(d[0]), c.set(d[1], d[0].length), d[0] = c, d.splice(1, 1)
                                }
                                if (1 !== ((e = d[0])[0] << 16) + (e[1] << 8) + e[2]) return null;
                                if ((i = (e[4] << 8) + e[5]) && i > t.size - 6) return null;
                                if (192 & (r = e[7]) && (4294967295 < (o = 536870912 * (14 & e[9]) + 4194304 * (255 & e[10]) + 16384 * (254 & e[11]) + 128 * (255 & e[12]) + (254 & e[13]) / 2) && (o -= 8589934592), 64 & r ? (4294967295 < (s = 536870912 * (14 & e[14]) + 4194304 * (255 & e[15]) + 16384 * (254 & e[16]) + 128 * (255 & e[17]) + (254 & e[18]) / 2) && (s -= 8589934592), 54e5 < o - s && (et.logger.warn(Math.round((o - s) / 9e4) + "s delta between PTS and DTS, align them"), o = s)) : s = o), l = (n = e[8]) + 9, t.size <= l) return null;
                                t.size -= l, a = new Uint8Array(t.size);
                                for (var f = 0, h = d.length; f < h; f++) {
                                    var p = (e = d[f]).byteLength;
                                    if (l) {
                                        if (p < l) {
                                            l -= p;
                                            continue
                                        }
                                        e = e.subarray(l), p -= l, l = 0
                                    }
                                    a.set(e, u), u += p
                                }
                                return i && (i -= n + 3), {
                                    data: a,
                                    pts: o,
                                    dts: s,
                                    len: i
                                }
                            }, t.pushAccesUnit = function (t, e) {
                                if (t.units.length && t.frame) {
                                    var r = e.samples,
                                        i = r.length;
                                    if (isNaN(t.pts)) {
                                        if (!i) return void e.dropped++;
                                        var n = r[i - 1];
                                        t.pts = n.pts, t.dts = n.dts
                                    } !this.config.forceKeyFrameOnDiscontinuity || !0 === t.key || e.sps && (i || this.contiguous) ? (t.id = i, r.push(t)) : e.dropped++
                                }
                                t.debug.length && et.logger.log(t.pts + "/" + t.dts + ":" + t.debug)
                            }, t._parseAVCPES = function (v, t) {
                                function y(t, e, r, i) {
                                    return {
                                        key: t,
                                        pts: e,
                                        dts: r,
                                        units: [],
                                        debug: i
                                    }
                                }
                                var A, _, b, E = this,
                                    T = this._avcTrack,
                                    e = this._parseAVCNALu(v.data),
                                    S = this.avcSample,
                                    k = !1,
                                    L = this.pushAccesUnit.bind(this);
                                v.data = null, S && e.length && !T.audFound && (L(S, T), S = this.avcSample = y(!1, v.pts, v.dts, "")), e.forEach(function (t) {
                                    switch (t.type) {
                                        case 1:
                                            _ = !0, S || (S = E.avcSample = y(!0, v.pts, v.dts, "")), S.frame = !0;
                                            var e = t.data;
                                            if (k && 4 < e.length) {
                                                var r = new C(e).readSliceType();
                                                2 !== r && 4 !== r && 7 !== r && 9 !== r || (S.key = !0)
                                            }
                                            break;
                                        case 5:
                                            _ = !0, S || (S = E.avcSample = y(!0, v.pts, v.dts, "")), S.key = !0, S.frame = !0;
                                            break;
                                        case 6:
                                            _ = !0, (A = new C(E.discardEPB(t.data))).readUByte();
                                            for (var i = 0, n = 0, a = !1, o = 0; !a && 1 < A.bytesAvailable;) {
                                                for (i = 0; i += o = A.readUByte(), 255 === o;);
                                                for (n = 0; n += o = A.readUByte(), 255 === o;);
                                                if (4 === i && 0 !== A.bytesAvailable) {
                                                    if (a = !0, 181 === A.readUByte())
                                                        if (49 === A.readUShort())
                                                            if (1195456820 === A.readUInt())
                                                                if (3 === A.readUByte()) {
                                                                    var s = A.readUByte(),
                                                                        l = 31 & s,
                                                                        u = [s, A.readUByte()];
                                                                    for (b = 0; b < l; b++) u.push(A.readUByte()), u.push(A.readUByte()), u.push(A.readUByte());
                                                                    E._insertSampleInOrder(E._txtTrack.samples, {
                                                                        type: 3,
                                                                        pts: v.pts,
                                                                        bytes: u
                                                                    })
                                                                }
                                                } else if (5 === i && 0 !== A.bytesAvailable) {
                                                    if (a = !0, 16 < n) {
                                                        var d = [];
                                                        for (b = 0; b < 16; b++) d.push(A.readUByte().toString(16)), 3 !== b && 5 !== b && 7 !== b && 9 !== b || d.push("-");
                                                        var c = n - 16,
                                                            f = new Uint8Array(c);
                                                        for (b = 0; b < c; b++) f[b] = A.readUByte();
                                                        E._insertSampleInOrder(E._txtTrack.samples, {
                                                            pts: v.pts,
                                                            payloadType: i,
                                                            uuid: d.join(""),
                                                            userDataBytes: f,
                                                            userData: Object(R.utf8ArrayToStr)(f.buffer)
                                                        })
                                                    }
                                                } else if (n < A.bytesAvailable)
                                                    for (b = 0; b < n; b++) A.readUByte()
                                            }
                                            break;
                                        case 7:
                                            if (k = _ = !0, !T.sps) {
                                                var h = (A = new C(t.data)).readSPS();
                                                T.width = h.width, T.height = h.height, T.pixelRatio = h.pixelRatio, T.sps = [t.data], T.duration = E._duration;
                                                var p = t.data.subarray(1, 4),
                                                    g = "avc1.";
                                                for (b = 0; b < 3; b++) {
                                                    var m = p[b].toString(16);
                                                    m.length < 2 && (m = "0" + m), g += m
                                                }
                                                T.codec = g
                                            }
                                            break;
                                        case 8:
                                            _ = !0, T.pps || (T.pps = [t.data]);
                                            break;
                                        case 9:
                                            _ = !1, T.audFound = !0, S && L(S, T), S = E.avcSample = y(!1, v.pts, v.dts, "");
                                            break;
                                        case 12:
                                            _ = !1;
                                            break;
                                        default:
                                            _ = !1, S && (S.debug += "unknown NAL " + t.type + " ")
                                    }
                                    S && _ && S.units.push(t)
                                }), t && S && (L(S, T), this.avcSample = null)
                            }, t._insertSampleInOrder = function (t, e) {
                                var r = t.length;
                                if (0 < r) {
                                    if (e.pts >= t[r - 1].pts) t.push(e);
                                    else
                                        for (var i = r - 1; 0 <= i; i--)
                                            if (e.pts < t[i].pts) {
                                                t.splice(i, 0, e);
                                                break
                                            }
                                } else t.push(e)
                            }, t._getLastNalUnit = function () {
                                var t, e = this.avcSample;
                                if (!e || 0 === e.units.length) {
                                    var r = this._avcTrack.samples;
                                    e = r[r.length - 1]
                                }
                                if (e) {
                                    var i = e.units;
                                    t = i[i.length - 1]
                                }
                                return t
                            }, t._parseAVCNALu = function (t) {
                                var e, r, i, n, a = 0,
                                    o = t.byteLength,
                                    s = this._avcTrack,
                                    l = s.naluState || 0,
                                    u = l,
                                    d = [],
                                    c = -1;
                                for (-1 === l && (n = 31 & t[c = 0], l = 0, a = 1); a < o;)
                                    if (e = t[a++], l)
                                        if (1 !== l)
                                            if (e)
                                                if (1 === e) {
                                                    if (0 <= c) i = {
                                                        data: t.subarray(c, a - l - 1),
                                                        type: n
                                                    }, d.push(i);
                                                    else {
                                                        var f = this._getLastNalUnit();
                                                        if (f && (u && a <= 4 - u && f.state && (f.data = f.data.subarray(0, f.data.byteLength - u)), 0 < (r = a - l - 1))) {
                                                            var h = new Uint8Array(f.data.byteLength + r);
                                                            h.set(f.data, 0), h.set(t.subarray(0, r), f.data.byteLength), f.data = h
                                                        }
                                                    }
                                                    l = a < o ? (n = 31 & t[c = a], 0) : -1
                                                } else l = 0;
                                            else l = 3;
                                        else l = e ? 0 : 2;
                                    else l = e ? 0 : 1;
                                if (0 <= c && 0 <= l && (i = {
                                    data: t.subarray(c, o),
                                    type: n,
                                    state: l
                                }, d.push(i)), 0 === d.length) {
                                    var p = this._getLastNalUnit();
                                    if (p) {
                                        var g = new Uint8Array(p.data.byteLength + t.byteLength);
                                        g.set(p.data, 0), g.set(t, p.data.byteLength), p.data = g
                                    }
                                }
                                return s.naluState = l, d
                            }, t.discardEPB = function (t) {
                                for (var e, r, i = t.byteLength, n = [], a = 1; a < i - 2;) 0 === t[a] && 0 === t[a + 1] && 3 === t[a + 2] ? (n.push(a + 2), a += 2) : a++;
                                if (0 === n.length) return t;
                                e = i - n.length, r = new Uint8Array(e);
                                var o = 0;
                                for (a = 0; a < e; o++, a++) o === n[0] && (o++, n.shift()), r[a] = t[o];
                                return r
                            }, t._parseAACPES = function (t) {
                                var e, r, i, n, a, o, s, l = this._audioTrack,
                                    u = t.data,
                                    d = t.pts,
                                    c = this.aacOverFlow,
                                    f = this.aacLastPTS;
                                if (c) {
                                    var h = new Uint8Array(c.byteLength + u.byteLength);
                                    h.set(c, 0), h.set(u, c.byteLength), u = h
                                }
                                for (i = 0, a = u.length; i < a - 1 && !m(u, i); i++);
                                if (i && (s = i < a - 1 ? (o = "AAC PES did not start with ADTS header,offset:" + i, !1) : (o = "no ADTS header found in AAC PES", !0), et.logger.warn("parsing error:" + o), this.observer.trigger(J.default.ERROR, {
                                    type: tt.ErrorTypes.MEDIA_ERROR,
                                    details: tt.ErrorDetails.FRAG_PARSING_ERROR,
                                    fatal: s,
                                    reason: o
                                }), s)) return;
                                if (v(l, this.observer, u, i, this.audioCodec), r = 0, e = y(l.samplerate), c && f) {
                                    var p = f + e;
                                    1 < Math.abs(p - d) && (et.logger.log("AAC: align PTS for overlapping frames by " + Math.round((p - d) / 90)), d = p)
                                }
                                for (; i < a;) {
                                    if (m(u, i)) {
                                        if (i + 5 < a) {
                                            var g = A(l, u, i, d, r);
                                            if (g) {
                                                i += g.length, n = g.sample.pts, r++;
                                                continue
                                            }
                                        }
                                        break
                                    }
                                    i++
                                }
                                c = i < a ? u.subarray(i, a) : null, this.aacOverFlow = c, this.aacLastPTS = n
                            }, t._parseMPEGPES = function (t) {
                                for (var e = t.data, r = e.length, i = 0, n = 0, a = t.pts; n < r;)
                                    if (b.isHeader(e, n)) {
                                        var o = b.appendFrame(this._audioTrack, e, n, a, i);
                                        if (!o) break;
                                        n += o.length, i++
                                    } else n++
                            }, t._parseID3PES = function (t) {
                                this._id3Track.samples.push(t)
                            }, P
                        }(),
                        L = function () {
                            function t(t, e, r) {
                                this.observer = t, this.config = r, this.remuxer = e
                            }
                            var e = t.prototype;
                            return e.resetInitSegment = function (t, e, r, i) {
                                this._audioTrack = {
                                    container: "audio/mpeg",
                                    type: "audio",
                                    id: -1,
                                    sequenceNumber: 0,
                                    isAAC: !1,
                                    samples: [],
                                    len: 0,
                                    manifestCodec: e,
                                    duration: i,
                                    inputTimeScale: 9e4
                                }
                            }, e.resetTimeStamp = function () { }, t.probe = function (t) {
                                var e, r, i = R.default.getID3Data(t, 0);
                                if (i && void 0 !== R.default.getTimeStamp(i))
                                    for (e = i.length, r = Math.min(t.length - 1, e + 100); e < r; e++)
                                        if (b.probe(t, e)) return et.logger.log("MPEG Audio sync word found !"), !0;
                                return !1
                            }, e.append = function (t, e, r, i) {
                                for (var n = R.default.getID3Data(t, 0), a = R.default.getTimeStamp(n), o = a ? 90 * a : 9e4 * e, s = n.length, l = t.length, u = 0, d = 0, c = this._audioTrack, f = [{
                                    pts: o,
                                    dts: o,
                                    data: n
                                }]; s < l;)
                                    if (b.isHeader(t, s)) {
                                        var h = b.appendFrame(c, t, s, o, u);
                                        if (!h) break;
                                        s += h.length, d = h.sample.pts, u++
                                    } else R.default.isHeader(t, s) ? (n = R.default.getID3Data(t, s), f.push({
                                        pts: d,
                                        dts: d,
                                        data: n
                                    }), s += n.length) : s++;
                                this.remuxer.remux(c, {
                                    samples: []
                                }, {
                                    samples: f,
                                    inputTimeScale: 9e4
                                }, {
                                    samples: []
                                }, e, r, i)
                            }, e.destroy = function () { }, t
                        }(),
                        Y = function () {
                            function t() { }
                            return t.getSilentFrame = function (t, e) {
                                switch (t) {
                                    case "mp4a.40.2":
                                        if (1 === e) return new Uint8Array([0, 200, 0, 128, 35, 128]);
                                        if (2 === e) return new Uint8Array([33, 0, 73, 144, 2, 25, 0, 35, 128]);
                                        if (3 === e) return new Uint8Array([0, 200, 0, 128, 32, 132, 1, 38, 64, 8, 100, 0, 142]);
                                        if (4 === e) return new Uint8Array([0, 200, 0, 128, 32, 132, 1, 38, 64, 8, 100, 0, 128, 44, 128, 8, 2, 56]);
                                        if (5 === e) return new Uint8Array([0, 200, 0, 128, 32, 132, 1, 38, 64, 8, 100, 0, 130, 48, 4, 153, 0, 33, 144, 2, 56]);
                                        if (6 === e) return new Uint8Array([0, 200, 0, 128, 32, 132, 1, 38, 64, 8, 100, 0, 130, 48, 4, 153, 0, 33, 144, 2, 0, 178, 0, 32, 8, 224]);
                                        break;
                                    default:
                                        if (1 === e) return new Uint8Array([1, 64, 34, 128, 163, 78, 230, 128, 186, 8, 0, 0, 0, 28, 6, 241, 193, 10, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 94]);
                                        if (2 === e) return new Uint8Array([1, 64, 34, 128, 163, 94, 230, 128, 186, 8, 0, 0, 0, 0, 149, 0, 6, 241, 161, 10, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 94]);
                                        if (3 === e) return new Uint8Array([1, 64, 34, 128, 163, 94, 230, 128, 186, 8, 0, 0, 0, 0, 149, 0, 6, 241, 161, 10, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 94])
                                }
                                return null
                            }, t
                        }(),
                        l = Math.pow(2, 32) - 1,
                        rt = function () {
                            function f() { }
                            return f.init = function () {
                                var t;
                                for (t in f.types = {
                                    avc1: [],
                                    avcC: [],
                                    btrt: [],
                                    dinf: [],
                                    dref: [],
                                    esds: [],
                                    ftyp: [],
                                    hdlr: [],
                                    mdat: [],
                                    mdhd: [],
                                    mdia: [],
                                    mfhd: [],
                                    minf: [],
                                    moof: [],
                                    moov: [],
                                    mp4a: [],
                                    ".mp3": [],
                                    mvex: [],
                                    mvhd: [],
                                    pasp: [],
                                    sdtp: [],
                                    stbl: [],
                                    stco: [],
                                    stsc: [],
                                    stsd: [],
                                    stsz: [],
                                    stts: [],
                                    tfdt: [],
                                    tfhd: [],
                                    traf: [],
                                    trak: [],
                                    trun: [],
                                    trex: [],
                                    tkhd: [],
                                    vmhd: [],
                                    smhd: []
                                }) f.types.hasOwnProperty(t) && (f.types[t] = [t.charCodeAt(0), t.charCodeAt(1), t.charCodeAt(2), t.charCodeAt(3)]);
                                var e = new Uint8Array([0, 0, 0, 0, 0, 0, 0, 0, 118, 105, 100, 101, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 86, 105, 100, 101, 111, 72, 97, 110, 100, 108, 101, 114, 0]),
                                    r = new Uint8Array([0, 0, 0, 0, 0, 0, 0, 0, 115, 111, 117, 110, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 83, 111, 117, 110, 100, 72, 97, 110, 100, 108, 101, 114, 0]);
                                f.HDLR_TYPES = {
                                    video: e,
                                    audio: r
                                };
                                var i = new Uint8Array([0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 12, 117, 114, 108, 32, 0, 0, 0, 1]),
                                    n = new Uint8Array([0, 0, 0, 0, 0, 0, 0, 0]);
                                f.STTS = f.STSC = f.STCO = n, f.STSZ = new Uint8Array([0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]), f.VMHD = new Uint8Array([0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0]), f.SMHD = new Uint8Array([0, 0, 0, 0, 0, 0, 0, 0]), f.STSD = new Uint8Array([0, 0, 0, 0, 0, 0, 0, 1]);
                                var a = new Uint8Array([105, 115, 111, 109]),
                                    o = new Uint8Array([97, 118, 99, 49]),
                                    s = new Uint8Array([0, 0, 0, 1]);
                                f.FTYP = f.box(f.types.ftyp, a, s, a, o), f.DINF = f.box(f.types.dinf, f.box(f.types.dref, i))
                            }, f.box = function (t) {
                                for (var e, r = Array.prototype.slice.call(arguments, 1), i = 8, n = r.length, a = n; n--;) i += r[n].byteLength;
                                for ((e = new Uint8Array(i))[0] = i >> 24 & 255, e[1] = i >> 16 & 255, e[2] = i >> 8 & 255, e[3] = 255 & i, e.set(t, 4), n = 0, i = 8; n < a; n++) e.set(r[n], i), i += r[n].byteLength;
                                return e
                            }, f.hdlr = function (t) {
                                return f.box(f.types.hdlr, f.HDLR_TYPES[t])
                            }, f.mdat = function (t) {
                                return f.box(f.types.mdat, t)
                            }, f.mdhd = function (t, e) {
                                e *= t;
                                var r = Math.floor(e / (1 + l)),
                                    i = Math.floor(e % (1 + l));
                                return f.box(f.types.mdhd, new Uint8Array([1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 0, 0, 0, 0, 0, 0, 0, 3, t >> 24 & 255, t >> 16 & 255, t >> 8 & 255, 255 & t, r >> 24, r >> 16 & 255, r >> 8 & 255, 255 & r, i >> 24, i >> 16 & 255, i >> 8 & 255, 255 & i, 85, 196, 0, 0]))
                            }, f.mdia = function (t) {
                                return f.box(f.types.mdia, f.mdhd(t.timescale, t.duration), f.hdlr(t.type), f.minf(t))
                            }, f.mfhd = function (t) {
                                return f.box(f.types.mfhd, new Uint8Array([0, 0, 0, 0, t >> 24, t >> 16 & 255, t >> 8 & 255, 255 & t]))
                            }, f.minf = function (t) {
                                return "audio" === t.type ? f.box(f.types.minf, f.box(f.types.smhd, f.SMHD), f.DINF, f.stbl(t)) : f.box(f.types.minf, f.box(f.types.vmhd, f.VMHD), f.DINF, f.stbl(t))
                            }, f.moof = function (t, e, r) {
                                return f.box(f.types.moof, f.mfhd(t), f.traf(r, e))
                            }, f.moov = function (t) {
                                for (var e = t.length, r = []; e--;) r[e] = f.trak(t[e]);
                                return f.box.apply(null, [f.types.moov, f.mvhd(t[0].timescale, t[0].duration)].concat(r).concat(f.mvex(t)))
                            }, f.mvex = function (t) {
                                for (var e = t.length, r = []; e--;) r[e] = f.trex(t[e]);
                                return f.box.apply(null, [f.types.mvex].concat(r))
                            }, f.mvhd = function (t, e) {
                                e *= t;
                                var r = Math.floor(e / (1 + l)),
                                    i = Math.floor(e % (1 + l)),
                                    n = new Uint8Array([1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 0, 0, 0, 0, 0, 0, 0, 3, t >> 24 & 255, t >> 16 & 255, t >> 8 & 255, 255 & t, r >> 24, r >> 16 & 255, r >> 8 & 255, 255 & r, i >> 24, i >> 16 & 255, i >> 8 & 255, 255 & i, 0, 1, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 64, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 255, 255, 255, 255]);
                                return f.box(f.types.mvhd, n)
                            }, f.sdtp = function (t) {
                                var e, r, i = t.samples || [],
                                    n = new Uint8Array(4 + i.length);
                                for (r = 0; r < i.length; r++) e = i[r].flags, n[r + 4] = e.dependsOn << 4 | e.isDependedOn << 2 | e.hasRedundancy;
                                return f.box(f.types.sdtp, n)
                            }, f.stbl = function (t) {
                                return f.box(f.types.stbl, f.stsd(t), f.box(f.types.stts, f.STTS), f.box(f.types.stsc, f.STSC), f.box(f.types.stsz, f.STSZ), f.box(f.types.stco, f.STCO))
                            }, f.avc1 = function (t) {
                                var e, r, i, n = [],
                                    a = [];
                                for (e = 0; e < t.sps.length; e++) i = (r = t.sps[e]).byteLength, n.push(i >>> 8 & 255), n.push(255 & i), n = n.concat(Array.prototype.slice.call(r));
                                for (e = 0; e < t.pps.length; e++) i = (r = t.pps[e]).byteLength, a.push(i >>> 8 & 255), a.push(255 & i), a = a.concat(Array.prototype.slice.call(r));
                                var o = f.box(f.types.avcC, new Uint8Array([1, n[3], n[4], n[5], 255, 224 | t.sps.length].concat(n).concat([t.pps.length]).concat(a))),
                                    s = t.width,
                                    l = t.height,
                                    u = t.pixelRatio[0],
                                    d = t.pixelRatio[1];
                                return f.box(f.types.avc1, new Uint8Array([0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, s >> 8 & 255, 255 & s, l >> 8 & 255, 255 & l, 0, 72, 0, 0, 0, 72, 0, 0, 0, 0, 0, 0, 0, 1, 18, 100, 97, 105, 108, 121, 109, 111, 116, 105, 111, 110, 47, 104, 108, 115, 46, 106, 115, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 24, 17, 17]), o, f.box(f.types.btrt, new Uint8Array([0, 28, 156, 128, 0, 45, 198, 192, 0, 45, 198, 192])), f.box(f.types.pasp, new Uint8Array([u >> 24, u >> 16 & 255, u >> 8 & 255, 255 & u, d >> 24, d >> 16 & 255, d >> 8 & 255, 255 & d])))
                            }, f.esds = function (t) {
                                var e = t.config.length;
                                return new Uint8Array([0, 0, 0, 0, 3, 23 + e, 0, 1, 0, 4, 15 + e, 64, 21, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 5].concat([e]).concat(t.config).concat([6, 1, 2]))
                            }, f.mp4a = function (t) {
                                var e = t.samplerate;
                                return f.box(f.types.mp4a, new Uint8Array([0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, t.channelCount, 0, 16, 0, 0, 0, 0, e >> 8 & 255, 255 & e, 0, 0]), f.box(f.types.esds, f.esds(t)))
                            }, f.mp3 = function (t) {
                                var e = t.samplerate;
                                return f.box(f.types[".mp3"], new Uint8Array([0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, t.channelCount, 0, 16, 0, 0, 0, 0, e >> 8 & 255, 255 & e, 0, 0]))
                            }, f.stsd = function (t) {
                                return "audio" === t.type ? t.isAAC || "mp3" !== t.codec ? f.box(f.types.stsd, f.STSD, f.mp4a(t)) : f.box(f.types.stsd, f.STSD, f.mp3(t)) : f.box(f.types.stsd, f.STSD, f.avc1(t))
                            }, f.tkhd = function (t) {
                                var e = t.id,
                                    r = t.duration * t.timescale,
                                    i = t.width,
                                    n = t.height,
                                    a = Math.floor(r / (1 + l)),
                                    o = Math.floor(r % (1 + l));
                                return f.box(f.types.tkhd, new Uint8Array([1, 0, 0, 7, 0, 0, 0, 0, 0, 0, 0, 2, 0, 0, 0, 0, 0, 0, 0, 3, e >> 24 & 255, e >> 16 & 255, e >> 8 & 255, 255 & e, 0, 0, 0, 0, a >> 24, a >> 16 & 255, a >> 8 & 255, 255 & a, o >> 24, o >> 16 & 255, o >> 8 & 255, 255 & o, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 64, 0, 0, 0, i >> 8 & 255, 255 & i, 0, 0, n >> 8 & 255, 255 & n, 0, 0]))
                            }, f.traf = function (t, e) {
                                var r = f.sdtp(t),
                                    i = t.id,
                                    n = Math.floor(e / (1 + l)),
                                    a = Math.floor(e % (1 + l));
                                return f.box(f.types.traf, f.box(f.types.tfhd, new Uint8Array([0, 0, 0, 0, i >> 24, i >> 16 & 255, i >> 8 & 255, 255 & i])), f.box(f.types.tfdt, new Uint8Array([1, 0, 0, 0, n >> 24, n >> 16 & 255, n >> 8 & 255, 255 & n, a >> 24, a >> 16 & 255, a >> 8 & 255, 255 & a])), f.trun(t, r.length + 16 + 20 + 8 + 16 + 8 + 8), r)
                            }, f.trak = function (t) {
                                return t.duration = t.duration || 4294967295, f.box(f.types.trak, f.tkhd(t), f.mdia(t))
                            }, f.trex = function (t) {
                                var e = t.id;
                                return f.box(f.types.trex, new Uint8Array([0, 0, 0, 0, e >> 24, e >> 16 & 255, e >> 8 & 255, 255 & e, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 1]))
                            }, f.trun = function (t, e) {
                                var r, i, n, a, o, s, l = t.samples || [],
                                    u = l.length,
                                    d = 12 + 16 * u,
                                    c = new Uint8Array(d);
                                for (e += 8 + d, c.set([0, 0, 15, 1, u >>> 24 & 255, u >>> 16 & 255, u >>> 8 & 255, 255 & u, e >>> 24 & 255, e >>> 16 & 255, e >>> 8 & 255, 255 & e], 0), r = 0; r < u; r++) n = (i = l[r]).duration, a = i.size, o = i.flags, s = i.cts, c.set([n >>> 24 & 255, n >>> 16 & 255, n >>> 8 & 255, 255 & n, a >>> 24 & 255, a >>> 16 & 255, a >>> 8 & 255, 255 & a, o.isLeading << 2 | o.dependsOn, o.isDependedOn << 6 | o.hasRedundancy << 4 | o.paddingValue << 1 | o.isNonSync, 61440 & o.degradPrio, 15 & o.degradPrio, s >>> 24 & 255, s >>> 16 & 255, s >>> 8 & 255, 255 & s], 12 + 16 * r);
                                return f.box(f.types.trun, c)
                            }, f.initSegment = function (t) {
                                f.types || f.init();
                                var e, r = f.moov(t);
                                return (e = new Uint8Array(f.FTYP.byteLength + r.byteLength)).set(f.FTYP), e.set(r, f.FTYP.byteLength), e
                            }, f
                        }();

                    function u(t, e, r, i) {
                        void 0 === r && (r = 1), void 0 === i && (i = !1);
                        var n = t * e * r;
                        return i ? Math.round(n) : n
                    }

                    function it(t, e) {
                        return void 0 === e && (e = !1), u(t, 1e3, 1 / 9e4, e)
                    }

                    function f(t, e) {
                        return void 0 === e && (e = 1), u(t, 9e4, 1 / e)
                    }
                    var E, H = f(10),
                        nt = f(.2),
                        w = function () {
                            function t(t, e, r, i) {
                                this.observer = t, this.config = e, this.typeSupported = r;
                                var n = navigator.userAgent;
                                this.isSafari = i && -1 < i.indexOf("Apple") && n && !n.match("CriOS"), this.ISGenerated = !1
                            }
                            var e = t.prototype;
                            return e.destroy = function () { }, e.resetTimeStamp = function (t) {
                                this._initPTS = this._initDTS = t
                            }, e.resetInitSegment = function () {
                                this.ISGenerated = !1
                            }, e.remux = function (t, e, r, i, n, a, o) {
                                if (this.ISGenerated || this.generateIS(t, e, n), this.ISGenerated) {
                                    var s = t.samples.length,
                                        l = e.samples.length,
                                        u = n,
                                        d = n;
                                    if (s && l) {
                                        var c = (t.samples[0].pts - e.samples[0].pts) / e.inputTimeScale;
                                        u += Math.max(0, c), d += Math.max(0, -c)
                                    }
                                    if (s) {
                                        t.timescale || (et.logger.warn("regenerate InitSegment as audio detected"), this.generateIS(t, e, n));
                                        var f, h = this.remuxAudio(t, u, a, o);
                                        if (l) h && (f = h.endPTS - h.startPTS), e.timescale || (et.logger.warn("regenerate InitSegment as video detected"), this.generateIS(t, e, n)), this.remuxVideo(e, d, a, f, o)
                                    } else if (l) {
                                        var p = this.remuxVideo(e, d, a, 0, o);
                                        p && t.codec && this.remuxEmptyAudio(t, u, a, p)
                                    }
                                }
                                r.samples.length && this.remuxID3(r, n), i.samples.length && this.remuxText(i, n), this.observer.trigger(J.default.FRAG_PARSED)
                            }, e.generateIS = function (t, e, r) {
                                var i, n, a = this.observer,
                                    o = t.samples,
                                    s = e.samples,
                                    l = this.typeSupported,
                                    u = "audio/mp4",
                                    d = {},
                                    c = {
                                        tracks: d
                                    },
                                    f = void 0 === this._initPTS;
                                if (f && (i = n = 1 / 0), t.config && o.length && (t.timescale = t.samplerate, et.logger.log("audio sampling rate : " + t.samplerate), t.isAAC || (l.mpeg ? (u = "audio/mpeg", t.codec = "") : l.mp3 && (t.codec = "mp3")), d.audio = {
                                    container: u,
                                    codec: t.codec,
                                    initSegment: !t.isAAC && l.mpeg ? new Uint8Array : rt.initSegment([t]),
                                    metadata: {
                                        channelCount: t.channelCount
                                    }
                                }, f && (i = n = o[0].pts - t.inputTimeScale * r)), e.sps && e.pps && s.length) {
                                    var h = e.inputTimeScale;
                                    e.timescale = h, d.video = {
                                        container: "video/mp4",
                                        codec: e.codec,
                                        initSegment: rt.initSegment([e]),
                                        metadata: {
                                            width: e.width,
                                            height: e.height
                                        }
                                    }, f && (i = Math.min(i, s[0].pts - h * r), n = Math.min(n, s[0].dts - h * r), this.observer.trigger(J.default.INIT_PTS_FOUND, {
                                        initPTS: i
                                    }))
                                }
                                Object.keys(d).length ? (a.trigger(J.default.FRAG_PARSING_INIT_SEGMENT, c), this.ISGenerated = !0, f && (this._initPTS = i, this._initDTS = n)) : a.trigger(J.default.ERROR, {
                                    type: tt.ErrorTypes.MEDIA_ERROR,
                                    details: tt.ErrorDetails.FRAG_PARSING_ERROR,
                                    fatal: !1,
                                    reason: "no audio/video samples found"
                                })
                            }, e.remuxVideo = function (t, e, r, i, n) {
                                var a, o, s, l, u, d, c, f = 8,
                                    h = t.timescale,
                                    p = t.samples,
                                    g = [],
                                    m = p.length,
                                    v = this._PTSNormalize,
                                    y = this._initPTS,
                                    A = this.nextAvcDts,
                                    _ = this.isSafari;
                                if (0 !== m) {
                                    _ && (r |= p.length && A && (n && Math.abs(e - A / h) < .1 || Math.abs(p[0].pts - A - y) < h / 5)), r || (A = e * h), p.forEach(function (t) {
                                        t.pts = v(t.pts - y, A), t.dts = v(t.dts - y, A)
                                    }), p.sort(function (t, e) {
                                        var r = t.dts - e.dts,
                                            i = t.pts - e.pts;
                                        return r || i || t.id - e.id
                                    });
                                    var b = p.reduce(function (t, e) {
                                        return Math.max(Math.min(t, e.pts - e.dts), -1 * nt)
                                    }, 0);
                                    if (b < 0) {
                                        et.logger.warn("PTS < DTS detected in video samples, shifting DTS by " + it(b, !0) + " ms to overcome this issue");
                                        for (var E = 0; E < p.length; E++) p[E].dts += b
                                    }
                                    var T = p[0];
                                    u = Math.max(T.dts, 0), l = Math.max(T.pts, 0);
                                    var S = u - A;
                                    r && S && (1 < S ? et.logger.log("AVC: " + it(S, !0) + " ms hole between fragments detected,filling it") : S < -1 && et.logger.log("AVC: " + it(-S, !0) + " ms overlapping between fragments detected"), u = A, p[0].dts = u, l = Math.max(l - S, A), p[0].pts = l, et.logger.log("Video: PTS/DTS adjusted: " + it(l, !0) + "/" + it(u, !0) + ", delta: " + it(S, !0) + " ms")), T = p[p.length - 1], c = Math.max(T.dts, 0), d = Math.max(T.pts, 0, c), _ && (a = Math.round((c - u) / (p.length - 1)));
                                    for (var k = 0, L = 0, R = 0; R < m; R++) {
                                        for (var C = p[R], w = C.units, O = w.length, P = 0, D = 0; D < O; D++) P += w[D].data.length;
                                        L += P, k += O, C.length = P, C.dts = _ ? u + R * a : Math.max(C.dts, u), C.pts = Math.max(C.pts, C.dts)
                                    }
                                    var I = L + 4 * k + 8;
                                    try {
                                        o = new Uint8Array(I)
                                    } catch (t) {
                                        return void this.observer.trigger(J.default.ERROR, {
                                            type: tt.ErrorTypes.MUX_ERROR,
                                            details: tt.ErrorDetails.REMUX_ALLOC_ERROR,
                                            fatal: !1,
                                            bytes: I,
                                            reason: "fail allocating video mdat " + I
                                        })
                                    }
                                    var x = new DataView(o.buffer);
                                    x.setUint32(0, I), o.set(rt.types.mdat, 4);
                                    for (var M = 0; M < m; M++) {
                                        for (var N = p[M], F = N.units, B = 0, U = void 0, j = 0, K = F.length; j < K; j++) {
                                            var V = F[j],
                                                G = V.data,
                                                Y = V.data.byteLength;
                                            x.setUint32(f, Y), f += 4, o.set(G, f), f += Y, B += 4 + Y
                                        }
                                        if (_) U = Math.max(0, a * Math.round((N.pts - N.dts) / a));
                                        else {
                                            if (M < m - 1) a = p[M + 1].dts - N.dts;
                                            else {
                                                var H = this.config,
                                                    $ = N.dts - p[0 < M ? M - 1 : M].dts;
                                                if (H.stretchShortVideoTrack) {
                                                    var z = H.maxBufferHole,
                                                        W = Math.floor(z * h),
                                                        q = (i ? l + i * h : this.nextAudioPts) - N.pts;
                                                    W < q ? ((a = q - $) < 0 && (a = $), et.logger.log("It is approximately " + it(q, !1) + " ms to the next segment; using duration " + it(a, !1) + " ms for the last video frame.")) : a = $
                                                } else a = $
                                            }
                                            U = Math.round(N.pts - N.dts)
                                        }
                                        g.push({
                                            size: B,
                                            duration: a,
                                            cts: U,
                                            flags: {
                                                isLeading: 0,
                                                isDependedOn: 0,
                                                hasRedundancy: 0,
                                                degradPrio: 0,
                                                dependsOn: N.key ? 2 : 1,
                                                isNonSync: N.key ? 0 : 1
                                            }
                                        })
                                    }
                                    this.nextAvcDts = c + a;
                                    var X = t.dropped;
                                    if (t.nbNalu = 0, t.dropped = 0, g.length && -1 < navigator.userAgent.toLowerCase().indexOf("chrome")) {
                                        var Z = g[0].flags;
                                        Z.dependsOn = 2, Z.isNonSync = 0
                                    }
                                    t.samples = g, s = rt.moof(t.sequenceNumber++, u, t), t.samples = [];
                                    var Q = {
                                        data1: s,
                                        data2: o,
                                        startPTS: l / h,
                                        endPTS: (d + a) / h,
                                        startDTS: u / h,
                                        endDTS: this.nextAvcDts / h,
                                        type: "video",
                                        hasAudio: !1,
                                        hasVideo: !0,
                                        nb: g.length,
                                        dropped: X
                                    };
                                    return this.observer.trigger(J.default.FRAG_PARSING_DATA, Q), Q
                                }
                            }, e.remuxAudio = function (t, e, r, i) {
                                var n, a, o, s, l, u, d = t.inputTimeScale,
                                    c = t.timescale,
                                    f = d / c,
                                    h = (t.isAAC ? 1024 : 1152) * f,
                                    p = this._PTSNormalize,
                                    g = this._initPTS,
                                    m = !t.isAAC && this.typeSupported.mpeg,
                                    v = m ? 0 : 8,
                                    y = t.samples,
                                    A = [],
                                    _ = this.nextAudioPts;
                                if (r |= y.length && _ && (i && Math.abs(e - _ / d) < .1 || Math.abs(y[0].pts - _ - g) < 20 * h), y.forEach(function (t) {
                                    t.pts = t.dts = p(t.pts - g, e * d)
                                }), 0 !== (y = y.filter(function (t) {
                                    return 0 <= t.pts
                                })).length) {
                                    if (r || (_ = i ? e * d : y[0].pts), t.isAAC)
                                        for (var b = this.config.maxAudioFramesDrift, E = 0, T = _; E < y.length;) {
                                            var S, k = y[E];
                                            if ((S = k.pts - T) <= -b * h) et.logger.warn("Dropping 1 audio frame @ " + it(T, !0) + " ms due to " + it(S, !0) + " ms overlap."), y.splice(E, 1);
                                            else if (b * h <= S && S < H && T) {
                                                var L = Math.round(S / h);
                                                et.logger.warn("Injecting " + L + " audio frames @ " + it(T, !0) + " ms due to " + it(T, !0) + " ms gap.");
                                                for (var R = 0; R < L; R++) {
                                                    var C = Math.max(T, 0);
                                                    (a = Y.getSilentFrame(t.manifestCodec || t.codec, t.channelCount)) || (et.logger.log("Unable to get silent frame for given audio codec; duplicating last frame instead."), a = k.unit.subarray()), y.splice(E, 0, {
                                                        unit: a,
                                                        pts: C,
                                                        dts: C
                                                    }), T += h, E++
                                                }
                                                k.pts = k.dts = T, T += h, E++
                                            } else Math.abs(S), k.pts = k.dts = T, T += h, E++
                                        }
                                    for (var w = y.length, O = 0; w--;) O += y[w].unit.byteLength;
                                    for (var P = 0, D = y.length; P < D; P++) {
                                        var I = y[P],
                                            x = I.unit,
                                            M = I.pts;
                                        if (void 0 !== u) n.duration = Math.round((M - u) / f);
                                        else {
                                            var N = M - _,
                                                F = 0;
                                            if (r && t.isAAC && N) {
                                                if (0 < N && N < H) F = Math.round((M - _) / h), et.logger.log(it(N, !0) + " ms hole between AAC samples detected,filling it"), 0 < F && ((a = Y.getSilentFrame(t.manifestCodec || t.codec, t.channelCount)) || (a = x.subarray()), O += F * a.length);
                                                else if (N < -12) {
                                                    et.logger.log("drop overlapping AAC sample, expected/parsed/delta: " + it(_, !0) + " ms / " + it(M, !0) + " ms / " + it(-N, !0) + " ms"), O -= x.byteLength;
                                                    continue
                                                }
                                                M = _
                                            }
                                            if (l = M, !(0 < O)) return;
                                            O += v;
                                            try {
                                                o = new Uint8Array(O)
                                            } catch (t) {
                                                return void this.observer.trigger(J.default.ERROR, {
                                                    type: tt.ErrorTypes.MUX_ERROR,
                                                    details: tt.ErrorDetails.REMUX_ALLOC_ERROR,
                                                    fatal: !1,
                                                    bytes: O,
                                                    reason: "fail allocating audio mdat " + O
                                                })
                                            }
                                            m || (new DataView(o.buffer).setUint32(0, O), o.set(rt.types.mdat, 4));
                                            for (var B = 0; B < F; B++)(a = Y.getSilentFrame(t.manifestCodec || t.codec, t.channelCount)) || (et.logger.log("Unable to get silent frame for given audio codec; duplicating this frame instead."), a = x.subarray()), o.set(a, v), v += a.byteLength, n = {
                                                size: a.byteLength,
                                                cts: 0,
                                                duration: 1024,
                                                flags: {
                                                    isLeading: 0,
                                                    isDependedOn: 0,
                                                    hasRedundancy: 0,
                                                    degradPrio: 0,
                                                    dependsOn: 1
                                                }
                                            }, A.push(n)
                                        }
                                        o.set(x, v);
                                        var U = x.byteLength;
                                        v += U, n = {
                                            size: U,
                                            cts: 0,
                                            duration: 0,
                                            flags: {
                                                isLeading: 0,
                                                isDependedOn: 0,
                                                hasRedundancy: 0,
                                                degradPrio: 0,
                                                dependsOn: 1
                                            }
                                        }, A.push(n), u = M
                                    }
                                    var j = 0;
                                    if (2 <= (w = A.length) && (j = A[w - 2].duration, n.duration = j), w) {
                                        this.nextAudioPts = _ = u + f * j, t.samples = A, s = m ? new Uint8Array : rt.moof(t.sequenceNumber++, l / f, t), t.samples = [];
                                        var K = l / d,
                                            V = _ / d,
                                            G = {
                                                data1: s,
                                                data2: o,
                                                startPTS: K,
                                                endPTS: V,
                                                startDTS: K,
                                                endDTS: V,
                                                type: "audio",
                                                hasAudio: !0,
                                                hasVideo: !1,
                                                nb: w
                                            };
                                        return this.observer.trigger(J.default.FRAG_PARSING_DATA, G), G
                                    }
                                    return null
                                }
                            }, e.remuxEmptyAudio = function (t, e, r, i) {
                                var n = t.inputTimeScale,
                                    a = n / (t.samplerate ? t.samplerate : n),
                                    o = this.nextAudioPts,
                                    s = (void 0 !== o ? o : i.startDTS * n) + this._initDTS,
                                    l = i.endDTS * n + this._initDTS,
                                    u = 1024 * a,
                                    d = Math.ceil((l - s) / u),
                                    c = Y.getSilentFrame(t.manifestCodec || t.codec, t.channelCount);
                                if (et.logger.warn("remux empty Audio"), c) {
                                    for (var f = [], h = 0; h < d; h++) {
                                        var p = s + h * u;
                                        f.push({
                                            unit: c,
                                            pts: p,
                                            dts: p
                                        })
                                    }
                                    t.samples = f, this.remuxAudio(t, e, r)
                                } else et.logger.trace("Unable to remuxEmptyAudio since we were unable to get a silent frame for given audio codec!")
                            }, e.remuxID3 = function (t) {
                                var e, r = t.samples.length,
                                    i = t.inputTimeScale,
                                    n = this._initPTS,
                                    a = this._initDTS;
                                if (r) {
                                    for (var o = 0; o < r; o++)(e = t.samples[o]).pts = (e.pts - n) / i, e.dts = (e.dts - a) / i;
                                    this.observer.trigger(J.default.FRAG_PARSING_METADATA, {
                                        samples: t.samples
                                    })
                                }
                                t.samples = []
                            }, e.remuxText = function (t) {
                                t.samples.sort(function (t, e) {
                                    return t.pts - e.pts
                                });
                                var e, r = t.samples.length,
                                    i = t.inputTimeScale,
                                    n = this._initPTS;
                                if (r) {
                                    for (var a = 0; a < r; a++)(e = t.samples[a]).pts = (e.pts - n) / i;
                                    this.observer.trigger(J.default.FRAG_PARSING_USERDATA, {
                                        samples: t.samples
                                    })
                                }
                                t.samples = []
                            }, e._PTSNormalize = function (t, e) {
                                var r;
                                if (void 0 === e) return t;
                                for (r = e < t ? -8589934592 : 8589934592; 4294967296 < Math.abs(t - e);) t += r;
                                return t
                            }, t
                        }(),
                        O = function () {
                            function t(t) {
                                this.observer = t
                            }
                            var e = t.prototype;
                            return e.destroy = function () { }, e.resetTimeStamp = function () { }, e.resetInitSegment = function () { }, e.remux = function (t, e, r, i, n, a, o, s) {
                                var l = this.observer,
                                    u = "";
                                t && (u += "audio"), e && (u += "video"), l.trigger(J.default.FRAG_PARSING_DATA, {
                                    data1: s,
                                    startPTS: n,
                                    startDTS: n,
                                    type: u,
                                    hasAudio: !!t,
                                    hasVideo: !!e,
                                    nb: 1,
                                    dropped: 0
                                }), l.trigger(J.default.FRAG_PARSED)
                            }, t
                        }(),
                        h = Object(i.getSelfScope)();
                    try {
                        E = h.performance.now.bind(h.performance)
                    } catch (t) {
                        et.logger.debug("Unable to use Performance API on this environment"), E = h.Date.now
                    }
                    var P = function () {
                        function t(t, e, r, i) {
                            this.observer = t, this.typeSupported = e, this.config = r, this.vendor = i
                        }
                        var e = t.prototype;
                        return e.destroy = function () {
                            var t = this.demuxer;
                            t && t.destroy()
                        }, e.push = function (t, r, i, n, a, o, s, l, u, d, c, f) {
                            var h = this;
                            if (0 < t.byteLength && null != r && null != r.key && "AES-128" === r.method) {
                                var e = this.decrypter;
                                null == e && (e = this.decrypter = new g.default(this.observer, this.config));
                                var p = E();
                                e.decrypt(t, r.key.buffer, r.iv.buffer, function (t) {
                                    var e = E();
                                    h.observer.trigger(J.default.FRAG_DECRYPTED, {
                                        stats: {
                                            tstart: p,
                                            tdecrypt: e
                                        }
                                    }), h.pushDecrypted(new Uint8Array(t), r, new Uint8Array(i), n, a, o, s, l, u, d, c, f)
                                })
                            } else this.pushDecrypted(new Uint8Array(t), r, new Uint8Array(i), n, a, o, s, l, u, d, c, f)
                        }, e.pushDecrypted = function (t, e, r, i, n, a, o, s, l, u, d, c) {
                            var f = this.demuxer;
                            if (!f || (o || s) && !this.probe(t)) {
                                for (var h = this.observer, p = this.typeSupported, g = this.config, m = [{
                                    demux: k,
                                    remux: w
                                }, {
                                    demux: S.default,
                                    remux: O
                                }, {
                                    demux: T,
                                    remux: w
                                }, {
                                    demux: L,
                                    remux: w
                                }], v = 0, y = m.length; v < y; v++) {
                                    var A = m[v],
                                        _ = A.demux.probe;
                                    if (_(t)) {
                                        var b = this.remuxer = new A.remux(h, g, p, this.vendor);
                                        f = new A.demux(h, b, g, p), this.probe = _;
                                        break
                                    }
                                }
                                if (!f) return void h.trigger(J.default.ERROR, {
                                    type: tt.ErrorTypes.MEDIA_ERROR,
                                    details: tt.ErrorDetails.FRAG_PARSING_ERROR,
                                    fatal: !0,
                                    reason: "no demux matching with content found"
                                });
                                this.demuxer = f
                            }
                            var E = this.remuxer;
                            (o || s) && (f.resetInitSegment(r, i, n, u), E.resetInitSegment()), o && (f.resetTimeStamp(c), E.resetTimeStamp(c)), "function" == typeof f.setDecryptData && f.setDecryptData(e), f.append(t, a, l, d)
                        }, t
                    }();
                    e.default = P
                },
                "./src/demux/demuxer-worker.js": function (t, e, r) {
                    "use strict";
                    r.r(e);
                    var o = r("./src/demux/demuxer-inline.js"),
                        s = r("./src/events.js"),
                        l = r("./src/utils/logger.js"),
                        u = r("./node_modules/eventemitter3/index.js");
                    e.default = function (n) {
                        var a = new u.EventEmitter;
                        a.trigger = function (t) {
                            for (var e = arguments.length, r = new Array(1 < e ? e - 1 : 0), i = 1; i < e; i++) r[i - 1] = arguments[i];
                            a.emit.apply(a, [t, t].concat(r))
                        }, a.off = function (t) {
                            for (var e = arguments.length, r = new Array(1 < e ? e - 1 : 0), i = 1; i < e; i++) r[i - 1] = arguments[i];
                            a.removeListener.apply(a, [t].concat(r))
                        };

                        function i(t, e) {
                            n.postMessage({
                                event: t,
                                data: e
                            })
                        }
                        n.addEventListener("message", function (t) {
                            var e = t.data;
                            switch (e.cmd) {
                                case "init":
                                    var r = JSON.parse(e.config);
                                    n.demuxer = new o.default(a, e.typeSupported, r, e.vendor), Object(l.enableLogs)(r.debug), i("init", null);
                                    break;
                                case "demux":
                                    n.demuxer.push(e.data, e.decryptdata, e.initSegment, e.audioCodec, e.videoCodec, e.timeOffset, e.discontinuity, e.trackSwitch, e.contiguous, e.duration, e.accurateTimeOffset, e.defaultInitPTS)
                            }
                        }), a.on(s.default.FRAG_DECRYPTED, i), a.on(s.default.FRAG_PARSING_INIT_SEGMENT, i), a.on(s.default.FRAG_PARSED, i), a.on(s.default.ERROR, i), a.on(s.default.FRAG_PARSING_METADATA, i), a.on(s.default.FRAG_PARSING_USERDATA, i), a.on(s.default.INIT_PTS_FOUND, i), a.on(s.default.FRAG_PARSING_DATA, function (t, e) {
                            var r = [],
                                i = {
                                    event: t,
                                    data: e
                                };
                            e.data1 && (i.data1 = e.data1.buffer, r.push(e.data1.buffer), delete e.data1), e.data2 && (i.data2 = e.data2.buffer, r.push(e.data2.buffer), delete e.data2), n.postMessage(i, r)
                        })
                    }
                },
                "./src/demux/id3.js": function (t, e, r) {
                    "use strict";
                    r.r(e), r.d(e, "utf8ArrayToStr", function () {
                        return n
                    });
                    var c, f = r("./src/utils/get-self-scope.js"),
                        i = function () {
                            function s() { }
                            return s.isHeader = function (t, e) {
                                return e + 10 <= t.length && 73 === t[e] && 68 === t[e + 1] && 51 === t[e + 2] && t[e + 3] < 255 && t[e + 4] < 255 && t[e + 6] < 128 && t[e + 7] < 128 && t[e + 8] < 128 && t[e + 9] < 128
                            }, s.isFooter = function (t, e) {
                                return e + 10 <= t.length && 51 === t[e] && 68 === t[e + 1] && 73 === t[e + 2] && t[e + 3] < 255 && t[e + 4] < 255 && t[e + 6] < 128 && t[e + 7] < 128 && t[e + 8] < 128 && t[e + 9] < 128
                            }, s.getID3Data = function (t, e) {
                                for (var r = e, i = 0; s.isHeader(t, e);) {
                                    i += 10, i += s._readSize(t, e + 6), s.isFooter(t, e + 10) && (i += 10), e += i
                                }
                                if (0 < i) return t.subarray(r, r + i)
                            }, s._readSize = function (t, e) {
                                var r = 0;
                                return r = (127 & t[e]) << 21, r |= (127 & t[e + 1]) << 14, r |= (127 & t[e + 2]) << 7, r |= 127 & t[e + 3]
                            }, s.getTimeStamp = function (t) {
                                for (var e = s.getID3Frames(t), r = 0; r < e.length; r++) {
                                    var i = e[r];
                                    if (s.isTimeStampFrame(i)) return s._readTimeStamp(i)
                                }
                            }, s.isTimeStampFrame = function (t) {
                                return t && "PRIV" === t.key && "com.apple.streaming.transportStreamTimestamp" === t.info
                            }, s._getFrameData = function (t) {
                                var e = String.fromCharCode(t[0], t[1], t[2], t[3]),
                                    r = s._readSize(t, 4);
                                return {
                                    type: e,
                                    size: r,
                                    data: t.subarray(10, 10 + r)
                                }
                            }, s.getID3Frames = function (t) {
                                for (var e = 0, r = []; s.isHeader(t, e);) {
                                    for (var i = s._readSize(t, e + 6), n = (e += 10) + i; e + 8 < n;) {
                                        var a = s._getFrameData(t.subarray(e)),
                                            o = s._decodeFrame(a);
                                        o && r.push(o), e += a.size + 10
                                    }
                                    s.isFooter(t, e) && (e += 10)
                                }
                                return r
                            }, s._decodeFrame = function (t) {
                                return "PRIV" === t.type ? s._decodePrivFrame(t) : "T" === t.type[0] ? s._decodeTextFrame(t) : "W" === t.type[0] ? s._decodeURLFrame(t) : void 0
                            }, s._readTimeStamp = function (t) {
                                if (8 === t.data.byteLength) {
                                    var e = new Uint8Array(t.data),
                                        r = 1 & e[3],
                                        i = (e[4] << 23) + (e[5] << 15) + (e[6] << 7) + e[7];
                                    return i /= 45, r && (i += 47721858.84), Math.round(i)
                                }
                            }, s._decodePrivFrame = function (t) {
                                if (!(t.size < 2)) {
                                    var e = s._utf8ArrayToStr(t.data, !0),
                                        r = new Uint8Array(t.data.subarray(e.length + 1));
                                    return {
                                        key: t.type,
                                        info: e,
                                        data: r.buffer
                                    }
                                }
                            }, s._decodeTextFrame = function (t) {
                                if (!(t.size < 2)) {
                                    if ("TXXX" === t.type) {
                                        var e = 1,
                                            r = s._utf8ArrayToStr(t.data.subarray(e), !0);
                                        e += r.length + 1;
                                        var i = s._utf8ArrayToStr(t.data.subarray(e));
                                        return {
                                            key: t.type,
                                            info: r,
                                            data: i
                                        }
                                    }
                                    var n = s._utf8ArrayToStr(t.data.subarray(1));
                                    return {
                                        key: t.type,
                                        data: n
                                    }
                                }
                            }, s._decodeURLFrame = function (t) {
                                if ("WXXX" === t.type) {
                                    if (t.size < 2) return;
                                    var e = 1,
                                        r = s._utf8ArrayToStr(t.data.subarray(e));
                                    e += r.length + 1;
                                    var i = s._utf8ArrayToStr(t.data.subarray(e));
                                    return {
                                        key: t.type,
                                        info: r,
                                        data: i
                                    }
                                }
                                var n = s._utf8ArrayToStr(t.data);
                                return {
                                    key: t.type,
                                    data: n
                                }
                            }, s._utf8ArrayToStr = function (t, e) {
                                void 0 === e && (e = !1);
                                var r = function () {
                                    var t = Object(f.getSelfScope)();
                                    c || void 0 === t.TextDecoder || (c = new t.TextDecoder("utf-8"));
                                    return c
                                }();
                                if (r) {
                                    var i = r.decode(t);
                                    if (e) {
                                        var n = i.indexOf("\0");
                                        return -1 !== n ? i.substring(0, n) : i
                                    }
                                    return i.replace(/\0/g, "")
                                }
                                for (var a, o, s, l = t.length, u = "", d = 0; d < l;) {
                                    if (0 === (a = t[d++]) && e) return u;
                                    if (0 !== a && 3 !== a) switch (a >> 4) {
                                        case 0:
                                        case 1:
                                        case 2:
                                        case 3:
                                        case 4:
                                        case 5:
                                        case 6:
                                        case 7:
                                            u += String.fromCharCode(a);
                                            break;
                                        case 12:
                                        case 13:
                                            o = t[d++], u += String.fromCharCode((31 & a) << 6 | 63 & o);
                                            break;
                                        case 14:
                                            o = t[d++], s = t[d++], u += String.fromCharCode((15 & a) << 12 | (63 & o) << 6 | (63 & s) << 0)
                                    }
                                }
                                return u
                            }, s
                        }();
                    var n = i._utf8ArrayToStr;
                    e.default = i
                },
                "./src/demux/mp4demuxer.js": function (t, e, r) {
                    "use strict";
                    r.r(e);
                    var f = r("./src/utils/logger.js"),
                        l = r("./src/events.js"),
                        s = Math.pow(2, 32) - 1,
                        i = function () {
                            function g(t, e) {
                                this.observer = t, this.remuxer = e
                            }
                            var t = g.prototype;
                            return t.resetTimeStamp = function (t) {
                                this.initPTS = t
                            }, t.resetInitSegment = function (t, e, r, i) {
                                if (t && t.byteLength) {
                                    var n = this.initData = g.parseInitSegment(t);
                                    null == e && (e = "mp4a.40.5"), null == r && (r = "avc1.42e01e");
                                    var a = {};
                                    n.audio && n.video ? a.audiovideo = {
                                        container: "video/mp4",
                                        codec: e + "," + r,
                                        initSegment: i ? t : null
                                    } : (n.audio && (a.audio = {
                                        container: "audio/mp4",
                                        codec: e,
                                        initSegment: i ? t : null
                                    }), n.video && (a.video = {
                                        container: "video/mp4",
                                        codec: r,
                                        initSegment: i ? t : null
                                    })), this.observer.trigger(l.default.FRAG_PARSING_INIT_SEGMENT, {
                                        tracks: a
                                    })
                                } else e && (this.audioCodec = e), r && (this.videoCodec = r)
                            }, g.probe = function (t) {
                                return 0 < g.findBox({
                                    data: t,
                                    start: 0,
                                    end: Math.min(t.length, 16384)
                                }, ["moof"]).length
                            }, g.bin2str = function (t) {
                                return String.fromCharCode.apply(null, t)
                            }, g.readUint16 = function (t, e) {
                                t.data && (e += t.start, t = t.data);
                                var r = t[e] << 8 | t[e + 1];
                                return r < 0 ? 65536 + r : r
                            }, g.readUint32 = function (t, e) {
                                t.data && (e += t.start, t = t.data);
                                var r = t[e] << 24 | t[e + 1] << 16 | t[e + 2] << 8 | t[e + 3];
                                return r < 0 ? 4294967296 + r : r
                            }, g.writeUint32 = function (t, e, r) {
                                t.data && (e += t.start, t = t.data), t[e] = r >> 24, t[e + 1] = r >> 16 & 255, t[e + 2] = r >> 8 & 255, t[e + 3] = 255 & r
                            }, g.findBox = function (t, e) {
                                var r, i, n, a, o, s, l = [];
                                if (t.data ? (o = t.start, n = t.end, t = t.data) : (o = 0, n = t.byteLength), !e.length) return null;
                                for (r = o; r < n;) s = 1 < (i = g.readUint32(t, r)) ? r + i : n, g.bin2str(t.subarray(r + 4, r + 8)) === e[0] && (1 === e.length ? l.push({
                                    data: t,
                                    start: r + 8,
                                    end: s
                                }) : (a = g.findBox({
                                    data: t,
                                    start: r + 8,
                                    end: s
                                }, e.slice(1))).length && (l = l.concat(a))), r = s;
                                return l
                            }, g.parseSegmentIndex = function (t) {
                                var e, r = g.findBox(t, ["moov"])[0],
                                    i = r ? r.end : null,
                                    n = 0,
                                    a = g.findBox(t, ["sidx"]);
                                if (!a || !a[0]) return null;
                                e = [];
                                var o = (a = a[0]).data[0],
                                    s = g.readUint32(a, n = 0 === o ? 8 : 16);
                                n += 4;
                                n += 0 === o ? 8 : 16, n += 2;
                                var l = a.end + 0,
                                    u = g.readUint16(a, n);
                                n += 2;
                                for (var d = 0; d < u; d++) {
                                    var c = n,
                                        f = g.readUint32(a, c);
                                    c += 4;
                                    var h = 2147483647 & f;
                                    if (1 == (2147483648 & f) >>> 31) return void console.warn("SIDX has hierarchical references (not supported)");
                                    var p = g.readUint32(a, c);
                                    c += 4, e.push({
                                        referenceSize: h,
                                        subsegmentDuration: p,
                                        info: {
                                            duration: p / s,
                                            start: l,
                                            end: l + h - 1
                                        }
                                    }), l += h, n = c += 4
                                }
                                return {
                                    earliestPresentationTime: 0,
                                    timescale: s,
                                    version: o,
                                    referencesCount: u,
                                    references: e,
                                    moovEndOffset: i
                                }
                            }, g.parseInitSegment = function (t) {
                                var c = [];
                                return g.findBox(t, ["moov", "trak"]).forEach(function (t) {
                                    var e = g.findBox(t, ["tkhd"])[0];
                                    if (e) {
                                        var r = e.data[e.start],
                                            i = 0 === r ? 12 : 20,
                                            n = g.readUint32(e, i),
                                            a = g.findBox(t, ["mdia", "mdhd"])[0];
                                        if (a) {
                                            r = a.data[a.start];
                                            var o = g.readUint32(a, i = 0 === r ? 12 : 20),
                                                s = g.findBox(t, ["mdia", "hdlr"])[0];
                                            if (s) {
                                                var l = {
                                                    soun: "audio",
                                                    vide: "video"
                                                }[g.bin2str(s.data.subarray(s.start + 8, s.start + 12))];
                                                if (l) {
                                                    var u = g.findBox(t, ["mdia", "minf", "stbl", "stsd"]);
                                                    if (u.length) {
                                                        u = u[0];
                                                        var d = g.bin2str(u.data.subarray(u.start + 12, u.start + 16));
                                                        f.logger.log("MP4Demuxer:" + l + ":" + d + " found")
                                                    }
                                                    c[n] = {
                                                        timescale: o,
                                                        type: l
                                                    }, c[l] = {
                                                        timescale: o,
                                                        id: n
                                                    }
                                                }
                                            }
                                        }
                                    }
                                }), c
                            }, g.getStartDTS = function (n, t) {
                                var e, r, i;
                                return e = g.findBox(t, ["moof", "traf"]), r = [].concat.apply([], e.map(function (i) {
                                    return g.findBox(i, ["tfhd"]).map(function (t) {
                                        var e, r;
                                        return e = g.readUint32(t, 4), r = n[e].timescale || 9e4, g.findBox(i, ["tfdt"]).map(function (t) {
                                            var e, r;
                                            return e = t.data[t.start], r = g.readUint32(t, 4), 1 === e && (r *= Math.pow(2, 32), r += g.readUint32(t, 8)), r
                                        })[0] / r
                                    })
                                })), i = Math.min.apply(null, r), isFinite(i) ? i : 0
                            }, g.offsetStartDTS = function (i, t, o) {
                                g.findBox(t, ["moof", "traf"]).map(function (r) {
                                    return g.findBox(r, ["tfhd"]).map(function (t) {
                                        var e = g.readUint32(t, 4),
                                            a = i[e].timescale || 9e4;
                                        g.findBox(r, ["tfdt"]).map(function (t) {
                                            var e = t.data[t.start],
                                                r = g.readUint32(t, 4);
                                            if (0 === e) g.writeUint32(t, 4, r - o * a);
                                            else {
                                                r *= Math.pow(2, 32), r += g.readUint32(t, 8), r -= o * a, r = Math.max(r, 0);
                                                var i = Math.floor(r / (1 + s)),
                                                    n = Math.floor(r % (1 + s));
                                                g.writeUint32(t, 4, i), g.writeUint32(t, 8, n)
                                            }
                                        })
                                    })
                                })
                            }, t.append = function (t, e, r, i) {
                                var n = this.initData;
                                n || (this.resetInitSegment(t, this.audioCodec, this.videoCodec, !1), n = this.initData);
                                var a, o = this.initPTS;
                                if (void 0 === o) {
                                    var s = g.getStartDTS(n, t);
                                    this.initPTS = o = s - e, this.observer.trigger(l.default.INIT_PTS_FOUND, {
                                        initPTS: o
                                    })
                                }
                                g.offsetStartDTS(n, t, o), a = g.getStartDTS(n, t), this.remuxer.remux(n.audio, n.video, null, null, a, r, i, t)
                            }, t.destroy = function () { }, g
                        }();
                    e.default = i
                },
                "./src/errors.ts": function (t, e, r) {
                    "use strict";
                    var i, n, a, o;
                    r.r(e), r.d(e, "ErrorTypes", function () {
                        return i
                    }), r.d(e, "ErrorDetails", function () {
                        return a
                    }), (n = i || (i = {})).NETWORK_ERROR = "networkError", n.MEDIA_ERROR = "mediaError", n.KEY_SYSTEM_ERROR = "keySystemError", n.MUX_ERROR = "muxError", n.OTHER_ERROR = "otherError", (o = a || (a = {})).KEY_SYSTEM_NO_KEYS = "keySystemNoKeys", o.KEY_SYSTEM_NO_ACCESS = "keySystemNoAccess", o.KEY_SYSTEM_NO_SESSION = "keySystemNoSession", o.KEY_SYSTEM_LICENSE_REQUEST_FAILED = "keySystemLicenseRequestFailed", o.KEY_SYSTEM_NO_INIT_DATA = "keySystemNoInitData", o.MANIFEST_LOAD_ERROR = "manifestLoadError", o.MANIFEST_LOAD_TIMEOUT = "manifestLoadTimeOut", o.MANIFEST_PARSING_ERROR = "manifestParsingError", o.MANIFEST_INCOMPATIBLE_CODECS_ERROR = "manifestIncompatibleCodecsError", o.LEVEL_LOAD_ERROR = "levelLoadError", o.LEVEL_LOAD_TIMEOUT = "levelLoadTimeOut", o.LEVEL_SWITCH_ERROR = "levelSwitchError", o.AUDIO_TRACK_LOAD_ERROR = "audioTrackLoadError", o.AUDIO_TRACK_LOAD_TIMEOUT = "audioTrackLoadTimeOut", o.FRAG_LOAD_ERROR = "fragLoadError", o.FRAG_LOAD_TIMEOUT = "fragLoadTimeOut", o.FRAG_DECRYPT_ERROR = "fragDecryptError", o.FRAG_PARSING_ERROR = "fragParsingError", o.REMUX_ALLOC_ERROR = "remuxAllocError", o.KEY_LOAD_ERROR = "keyLoadError", o.KEY_LOAD_TIMEOUT = "keyLoadTimeOut", o.BUFFER_ADD_CODEC_ERROR = "bufferAddCodecError", o.BUFFER_APPEND_ERROR = "bufferAppendError", o.BUFFER_APPENDING_ERROR = "bufferAppendingError", o.BUFFER_STALLED_ERROR = "bufferStalledError", o.BUFFER_FULL_ERROR = "bufferFullError", o.BUFFER_SEEK_OVER_HOLE = "bufferSeekOverHole", o.BUFFER_NUDGE_ON_STALL = "bufferNudgeOnStall", o.INTERNAL_EXCEPTION = "internalException"
                },
                "./src/events.js": function (t, e, r) {
                    "use strict";
                    r.r(e);
                    e.default = {
                        MEDIA_ATTACHING: "hlsMediaAttaching",
                        MEDIA_ATTACHED: "hlsMediaAttached",
                        MEDIA_DETACHING: "hlsMediaDetaching",
                        MEDIA_DETACHED: "hlsMediaDetached",
                        BUFFER_RESET: "hlsBufferReset",
                        BUFFER_CODECS: "hlsBufferCodecs",
                        BUFFER_CREATED: "hlsBufferCreated",
                        BUFFER_APPENDING: "hlsBufferAppending",
                        BUFFER_APPENDED: "hlsBufferAppended",
                        BUFFER_EOS: "hlsBufferEos",
                        BUFFER_FLUSHING: "hlsBufferFlushing",
                        BUFFER_FLUSHED: "hlsBufferFlushed",
                        MANIFEST_LOADING: "hlsManifestLoading",
                        MANIFEST_LOADED: "hlsManifestLoaded",
                        MANIFEST_PARSED: "hlsManifestParsed",
                        LEVEL_SWITCHING: "hlsLevelSwitching",
                        LEVEL_SWITCHED: "hlsLevelSwitched",
                        LEVEL_LOADING: "hlsLevelLoading",
                        LEVEL_LOADED: "hlsLevelLoaded",
                        LEVEL_UPDATED: "hlsLevelUpdated",
                        LEVEL_PTS_UPDATED: "hlsLevelPtsUpdated",
                        AUDIO_TRACKS_UPDATED: "hlsAudioTracksUpdated",
                        AUDIO_TRACK_SWITCHING: "hlsAudioTrackSwitching",
                        AUDIO_TRACK_SWITCHED: "hlsAudioTrackSwitched",
                        AUDIO_TRACK_LOADING: "hlsAudioTrackLoading",
                        AUDIO_TRACK_LOADED: "hlsAudioTrackLoaded",
                        SUBTITLE_TRACKS_UPDATED: "hlsSubtitleTracksUpdated",
                        SUBTITLE_TRACK_SWITCH: "hlsSubtitleTrackSwitch",
                        SUBTITLE_TRACK_LOADING: "hlsSubtitleTrackLoading",
                        SUBTITLE_TRACK_LOADED: "hlsSubtitleTrackLoaded",
                        SUBTITLE_FRAG_PROCESSED: "hlsSubtitleFragProcessed",
                        INIT_PTS_FOUND: "hlsInitPtsFound",
                        FRAG_LOADING: "hlsFragLoading",
                        FRAG_LOAD_PROGRESS: "hlsFragLoadProgress",
                        FRAG_LOAD_EMERGENCY_ABORTED: "hlsFragLoadEmergencyAborted",
                        FRAG_LOADED: "hlsFragLoaded",
                        FRAG_DECRYPTED: "hlsFragDecrypted",
                        FRAG_PARSING_INIT_SEGMENT: "hlsFragParsingInitSegment",
                        FRAG_PARSING_USERDATA: "hlsFragParsingUserdata",
                        FRAG_PARSING_METADATA: "hlsFragParsingMetadata",
                        FRAG_PARSING_DATA: "hlsFragParsingData",
                        FRAG_PARSED: "hlsFragParsed",
                        FRAG_BUFFERED: "hlsFragBuffered",
                        FRAG_CHANGED: "hlsFragChanged",
                        FPS_DROP: "hlsFpsDrop",
                        FPS_DROP_LEVEL_CAPPING: "hlsFpsDropLevelCapping",
                        ERROR: "hlsError",
                        DESTROYING: "hlsDestroying",
                        KEY_LOADING: "hlsKeyLoading",
                        KEY_LOADED: "hlsKeyLoaded",
                        STREAM_STATE_TRANSITION: "hlsStreamStateTransition",
                        LIVE_BACK_BUFFER_REACHED: "hlsLiveBackBufferReached"
                    }
                },
                "./src/hls.ts": function (t, e, r) {
                    "use strict";
                    r.r(e);
                    var i = {};
                    r.r(i), r.d(i, "newCue", function () {
                        return ve
                    });
                    var m, n, a, o, s = r("./node_modules/url-toolkit/src/url-toolkit.js"),
                        f = r("./src/errors.ts"),
                        I = r("./src/polyfills/number-isFinite.js"),
                        x = r("./src/events.js"),
                        M = r("./src/utils/logger.js"),
                        l = {
                            hlsEventGeneric: !0,
                            hlsHandlerDestroying: !0,
                            hlsHandlerDestroyed: !0
                        },
                        u = function () {
                            function t(t) {
                                this.hls = void 0, this.handledEvents = void 0, this.useGenericHandler = void 0, this.hls = t, this.onEvent = this.onEvent.bind(this);
                                for (var e = arguments.length, r = new Array(1 < e ? e - 1 : 0), i = 1; i < e; i++) r[i - 1] = arguments[i];
                                this.handledEvents = r, this.useGenericHandler = !0, this.registerListeners()
                            }
                            var e = t.prototype;
                            return e.destroy = function () {
                                this.onHandlerDestroying(), this.unregisterListeners(), this.onHandlerDestroyed()
                            }, e.onHandlerDestroying = function () { }, e.onHandlerDestroyed = function () { }, e.isEventHandler = function () {
                                return "object" == typeof this.handledEvents && this.handledEvents.length && "function" == typeof this.onEvent
                            }, e.registerListeners = function () {
                                this.isEventHandler() && this.handledEvents.forEach(function (t) {
                                    if (l[t]) throw new Error("Forbidden event-name: " + t);
                                    this.hls.on(t, this.onEvent)
                                }, this)
                            }, e.unregisterListeners = function () {
                                this.isEventHandler() && this.handledEvents.forEach(function (t) {
                                    this.hls.off(t, this.onEvent)
                                }, this)
                            }, e.onEvent = function (t, e) {
                                this.onEventGeneric(t, e)
                            }, e.onEventGeneric = function (e, t) {
                                try {
                                    (function (t, e) {
                                        var r = "on" + t.replace("hls", "");
                                        if ("function" != typeof this[r]) throw new Error("Event " + t + " has no generic handler in this " + this.constructor.name + " class (tried " + r + ")");
                                        return this[r].bind(this, e)
                                    }).call(this, e, t).call()
                                } catch (t) {
                                    M.logger.error("An internal error happened while handling event " + e + '. Error message: "' + t.message + '". Here is a stacktrace:', t), this.hls.trigger(x.default.ERROR, {
                                        type: f.ErrorTypes.OTHER_ERROR,
                                        details: f.ErrorDetails.INTERNAL_EXCEPTION,
                                        fatal: !1,
                                        event: e,
                                        err: t
                                    })
                                }
                            }, t
                        }();
                    (n = m || (m = {})).MANIFEST = "manifest", n.LEVEL = "level", n.AUDIO_TRACK = "audioTrack", n.SUBTITLE_TRACK = "subtitleTrack", (o = a || (a = {})).MAIN = "main", o.AUDIO = "audio", o.SUBTITLE = "subtitle";
                    var d = r("./src/demux/mp4demuxer.js");

                    function c(t, e) {
                        for (var r = 0; r < e.length; r++) {
                            var i = e[r];
                            i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), Object.defineProperty(t, i.key, i)
                        }
                    }
                    var h, p, R = function () {
                        function t(t, e) {
                            this._uri = null, this.baseuri = void 0, this.reluri = void 0, this.method = null, this.key = null, this.iv = null, this.baseuri = t, this.reluri = e
                        }
                        return function (t, e, r) {
                            e && c(t.prototype, e), r && c(t, r)
                        }(t, [{
                            key: "uri",
                            get: function () {
                                return !this._uri && this.reluri && (this._uri = Object(s.buildAbsoluteURL)(this.baseuri, this.reluri, {
                                    alwaysNormalize: !0
                                })), this._uri
                            }
                        }]), t
                    }();

                    function g(t, e) {
                        for (var r = 0; r < e.length; r++) {
                            var i = e[r];
                            i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), Object.defineProperty(t, i.key, i)
                        }
                    } (p = h || (h = {})).AUDIO = "audio", p.VIDEO = "video";
                    var C = function () {
                        function t() {
                            var t;
                            this._url = null, this._byteRange = null, this._decryptdata = null, this._elementaryStreams = ((t = {})[h.AUDIO] = !1, t[h.VIDEO] = !1, t), this.deltaPTS = 0, this.rawProgramDateTime = null, this.programDateTime = null, this.title = null, this.tagList = [], this.cc = void 0, this.type = void 0, this.relurl = void 0, this.baseurl = void 0, this.duration = void 0, this.start = void 0, this.sn = 0, this.urlId = 0, this.level = 0, this.levelkey = void 0, this.loader = void 0
                        }
                        var e = t.prototype;
                        return e.setByteRange = function (t, e) {
                            var r = t.split("@", 2),
                                i = [];
                            1 === r.length ? i[0] = e ? e.byteRangeEndOffset : 0 : i[0] = parseInt(r[1]), i[1] = parseInt(r[0]) + i[0], this._byteRange = i
                        }, e.addElementaryStream = function (t) {
                            this._elementaryStreams[t] = !0
                        }, e.hasElementaryStream = function (t) {
                            return !0 === this._elementaryStreams[t]
                        }, e.createInitializationVector = function (t) {
                            for (var e = new Uint8Array(16), r = 12; r < 16; r++) e[r] = t >> 8 * (15 - r) & 255;
                            return e
                        }, e.setDecryptDataFromLevelKey = function (t, e) {
                            var r = t;
                            return t && t.method && t.uri && !t.iv && ((r = new R(t.baseuri, t.reluri)).method = t.method, r.iv = this.createInitializationVector(e)), r
                        },
                            function (t, e, r) {
                                e && g(t.prototype, e), r && g(t, r)
                            }(t, [{
                                key: "url",
                                get: function () {
                                    return !this._url && this.relurl && (this._url = Object(s.buildAbsoluteURL)(this.baseurl, this.relurl, {
                                        alwaysNormalize: !0
                                    })), this._url
                                },
                                set: function (t) {
                                    this._url = t
                                }
                            }, {
                                key: "byteRange",
                                get: function () {
                                    return this._byteRange ? this._byteRange : []
                                }
                            }, {
                                key: "byteRangeStartOffset",
                                get: function () {
                                    return this.byteRange[0]
                                }
                            }, {
                                key: "byteRangeEndOffset",
                                get: function () {
                                    return this.byteRange[1]
                                }
                            }, {
                                key: "decryptdata",
                                get: function () {
                                    if (!this.levelkey && !this._decryptdata) return null;
                                    if (!this._decryptdata && this.levelkey) {
                                        var t = this.sn;
                                        "number" != typeof t && (this.levelkey && "AES-128" === this.levelkey.method && !this.levelkey.iv && M.logger.warn('missing IV for initialization segment with method="' + this.levelkey.method + '" - compliance issue'), t = 0), this._decryptdata = this.setDecryptDataFromLevelKey(this.levelkey, t)
                                    }
                                    return this._decryptdata
                                }
                            }, {
                                key: "endProgramDateTime",
                                get: function () {
                                    if (null === this.programDateTime) return null;
                                    if (!Object(I.isFiniteNumber)(this.programDateTime)) return null;
                                    var t = Object(I.isFiniteNumber)(this.duration) ? this.duration : 0;
                                    return this.programDateTime + 1e3 * t
                                }
                            }, {
                                key: "encrypted",
                                get: function () {
                                    return !(!this.decryptdata || null === this.decryptdata.uri || null !== this.decryptdata.key)
                                }
                            }]), t
                    }();

                    function v(t, e) {
                        for (var r = 0; r < e.length; r++) {
                            var i = e[r];
                            i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), Object.defineProperty(t, i.key, i)
                        }
                    }
                    var w = function () {
                        function t(t) {
                            this.endCC = 0, this.endSN = 0, this.fragments = [], this.initSegment = null, this.live = !0, this.needSidxRanges = !1, this.startCC = 0, this.startSN = 0, this.startTimeOffset = null, this.targetduration = 0, this.totalduration = 0, this.type = null, this.url = t, this.version = null
                        }
                        return function (t, e, r) {
                            e && v(t.prototype, e), r && v(t, r)
                        }(t, [{
                            key: "hasProgramDateTime",
                            get: function () {
                                return !(!this.fragments[0] || !Object(I.isFiniteNumber)(this.fragments[0].programDateTime))
                            }
                        }]), t
                    }(),
                        y = /^(\d+)x(\d+)$/,
                        A = /\s*(.+?)\s*=((?:\".*?\")|.*?)(?:,|$)/g,
                        O = function () {
                            function r(t) {
                                for (var e in "string" == typeof t && (t = r.parseAttrList(t)), t) t.hasOwnProperty(e) && (this[e] = t[e])
                            }
                            var t = r.prototype;
                            return t.decimalInteger = function (t) {
                                var e = parseInt(this[t], 10);
                                return e > Number.MAX_SAFE_INTEGER ? 1 / 0 : e
                            }, t.hexadecimalInteger = function (t) {
                                if (this[t]) {
                                    var e = (this[t] || "0x").slice(2);
                                    e = (1 & e.length ? "0" : "") + e;
                                    for (var r = new Uint8Array(e.length / 2), i = 0; i < e.length / 2; i++) r[i] = parseInt(e.slice(2 * i, 2 * i + 2), 16);
                                    return r
                                }
                                return null
                            }, t.hexadecimalIntegerAsNumber = function (t) {
                                var e = parseInt(this[t], 16);
                                return e > Number.MAX_SAFE_INTEGER ? 1 / 0 : e
                            }, t.decimalFloatingPoint = function (t) {
                                return parseFloat(this[t])
                            }, t.enumeratedString = function (t) {
                                return this[t]
                            }, t.decimalResolution = function (t) {
                                var e = y.exec(this[t]);
                                if (null !== e) return {
                                    width: parseInt(e[1], 10),
                                    height: parseInt(e[2], 10)
                                }
                            }, r.parseAttrList = function (t) {
                                var e, r = {};
                                for (A.lastIndex = 0; null !== (e = A.exec(t));) {
                                    var i = e[2];
                                    0 === i.indexOf('"') && i.lastIndexOf('"') === i.length - 1 && (i = i.slice(1, -1)), r[e[1]] = i
                                }
                                return r
                            }, r
                        }(),
                        _ = {
                            audio: {
                                a3ds: !0,
                                "ac-3": !0,
                                "ac-4": !0,
                                alac: !0,
                                alaw: !0,
                                dra1: !0,
                                "dts+": !0,
                                "dts-": !0,
                                dtsc: !0,
                                dtse: !0,
                                dtsh: !0,
                                "ec-3": !0,
                                enca: !0,
                                g719: !0,
                                g726: !0,
                                m4ae: !0,
                                mha1: !0,
                                mha2: !0,
                                mhm1: !0,
                                mhm2: !0,
                                mlpa: !0,
                                mp4a: !0,
                                "raw ": !0,
                                Opus: !0,
                                samr: !0,
                                sawb: !0,
                                sawp: !0,
                                sevc: !0,
                                sqcp: !0,
                                ssmv: !0,
                                twos: !0,
                                ulaw: !0
                            },
                            video: {
                                avc1: !0,
                                avc2: !0,
                                avc3: !0,
                                avc4: !0,
                                avcp: !0,
                                drac: !0,
                                dvav: !0,
                                dvhe: !0,
                                encv: !0,
                                hev1: !0,
                                hvc1: !0,
                                mjp2: !0,
                                mp4v: !0,
                                mvc1: !0,
                                mvc2: !0,
                                mvc3: !0,
                                mvc4: !0,
                                resv: !0,
                                rv60: !0,
                                s263: !0,
                                svc1: !0,
                                svc2: !0,
                                "vc-1": !0,
                                vp08: !0,
                                vp09: !0
                            }
                        };

                    function b(t, e) {
                        return MediaSource.isTypeSupported((e || "video") + '/mp4;codecs="' + t + '"')
                    }
                    var E = /#EXT-X-STREAM-INF:([^\n\r]*)[\r\n]+([^\r\n]+)/g,
                        T = /#EXT-X-MEDIA:(.*)/g,
                        P = new RegExp([/#EXTINF:\s*(\d*(?:\.\d+)?)(?:,(.*)\s+)?/.source, /|(?!#)([\S+ ?]+)/.source, /|#EXT-X-BYTERANGE:*(.+)/.source, /|#EXT-X-PROGRAM-DATE-TIME:(.+)/.source, /|#.*/.source].join(""), "g"),
                        D = /(?:(?:#(EXTM3U))|(?:#EXT-X-(PLAYLIST-TYPE):(.+))|(?:#EXT-X-(MEDIA-SEQUENCE): *(\d+))|(?:#EXT-X-(TARGETDURATION): *(\d+))|(?:#EXT-X-(KEY):(.+))|(?:#EXT-X-(START):(.+))|(?:#EXT-X-(ENDLIST))|(?:#EXT-X-(DISCONTINUITY-SEQ)UENCE:(\d+))|(?:#EXT-X-(DIS)CONTINUITY))|(?:#EXT-X-(VERSION):(\d+))|(?:#EXT-X-(MAP):(.+))|(?:(#)([^:]*):(.*))|(?:(#)(.*))(?:.*)\r?\n?/,
                        N = /\.(mp4|m4s|m4v|m4a)$/i,
                        S = function () {
                            function d() { }
                            return d.findGroup = function (t, e) {
                                for (var r = 0; r < t.length; r++) {
                                    var i = t[r];
                                    if (i.id === e) return i
                                }
                            }, d.convertAVC1ToAVCOTI = function (t) {
                                var e, r = t.split(".");
                                return 2 < r.length ? (e = r.shift() + ".", e += parseInt(r.shift()).toString(16), e += ("000" + parseInt(r.shift()).toString(16)).substr(-4)) : e = t, e
                            }, d.resolve = function (t, e) {
                                return s.buildAbsoluteURL(e, t, {
                                    alwaysNormalize: !0
                                })
                            }, d.parseMasterPlaylist = function (t, e) {
                                var r, i = [];

                                function n(i, n) {
                                    ["video", "audio"].forEach(function (e) {
                                        var r = i.filter(function (t) {
                                            return function (t, e) {
                                                var r = _[e];
                                                return !!r && !0 === r[t.slice(0, 4)]
                                            }(t, e)
                                        });
                                        if (r.length) {
                                            var t = r.filter(function (t) {
                                                return 0 === t.lastIndexOf("avc1", 0) || 0 === t.lastIndexOf("mp4a", 0)
                                            });
                                            n[e + "Codec"] = 0 < t.length ? t[0] : r[0], i = i.filter(function (t) {
                                                return -1 === r.indexOf(t)
                                            })
                                        }
                                    }), n.unknownCodecs = i
                                }
                                for (E.lastIndex = 0; null != (r = E.exec(t));) {
                                    var a = {},
                                        o = a.attrs = new O(r[1]);
                                    a.url = d.resolve(r[2], e);
                                    var s = o.decimalResolution("RESOLUTION");
                                    s && (a.width = s.width, a.height = s.height), a.bitrate = o.decimalInteger("AVERAGE-BANDWIDTH") || o.decimalInteger("BANDWIDTH"), a.name = o.NAME, n([].concat((o.CODECS || "").split(/[ ,]+/)), a), a.videoCodec && -1 !== a.videoCodec.indexOf("avc1") && (a.videoCodec = d.convertAVC1ToAVCOTI(a.videoCodec)), i.push(a)
                                }
                                return i
                            }, d.parseMasterPlaylistMedia = function (t, e, r, i) {
                                var n;
                                void 0 === i && (i = []);
                                var a = [],
                                    o = 0;
                                for (T.lastIndex = 0; null !== (n = T.exec(t));) {
                                    var s = new O(n[1]);
                                    if (s.TYPE === r) {
                                        var l = {
                                            id: o++,
                                            groupId: s["GROUP-ID"],
                                            name: s.NAME || s.LANGUAGE,
                                            type: r,
                                            default: "YES" === s.DEFAULT,
                                            autoselect: "YES" === s.AUTOSELECT,
                                            forced: "YES" === s.FORCED,
                                            lang: s.LANGUAGE
                                        };
                                        if (s.URI && (l.url = d.resolve(s.URI, e)), i.length) {
                                            var u = d.findGroup(i, l.groupId);
                                            l.audioCodec = u ? u.codec : i[0].codec
                                        }
                                        a.push(l)
                                    }
                                }
                                return a
                            }, d.parseLevelPlaylist = function (t, e, r, i, n) {
                                var a, o, s, l = 0,
                                    u = 0,
                                    d = new w(e),
                                    c = 0,
                                    f = null,
                                    h = new C,
                                    p = null;
                                for (P.lastIndex = 0; null !== (a = P.exec(t));) {
                                    var g = a[1];
                                    if (g) {
                                        h.duration = parseFloat(g);
                                        var m = (" " + a[2]).slice(1);
                                        h.title = m || null, h.tagList.push(m ? ["INF", g, m] : ["INF", g])
                                    } else if (a[3]) {
                                        if (Object(I.isFiniteNumber)(h.duration)) {
                                            var v = l++;
                                            h.type = i, h.start = u, s && (h.levelkey = s), h.sn = v, h.level = r, h.cc = c, h.urlId = n, h.baseurl = e, h.relurl = (" " + a[3]).slice(1), F(h, f), d.fragments.push(h), u += (f = h).duration, h = new C
                                        }
                                    } else if (a[4]) {
                                        var y = (" " + a[4]).slice(1);
                                        f ? h.setByteRange(y, f) : h.setByteRange(y)
                                    } else if (a[5]) h.rawProgramDateTime = (" " + a[5]).slice(1), h.tagList.push(["PROGRAM-DATE-TIME", h.rawProgramDateTime]), null === p && (p = d.fragments.length);
                                    else {
                                        if (!(a = a[0].match(D))) {
                                            M.logger.warn("No matches on slow regex match for level playlist!");
                                            continue
                                        }
                                        for (o = 1; o < a.length && void 0 === a[o]; o++);
                                        var A = (" " + a[o + 1]).slice(1),
                                            _ = (" " + a[o + 2]).slice(1);
                                        switch (a[o]) {
                                            case "#":
                                                h.tagList.push(_ ? [A, _] : [A]);
                                                break;
                                            case "PLAYLIST-TYPE":
                                                d.type = A.toUpperCase();
                                                break;
                                            case "MEDIA-SEQUENCE":
                                                l = d.startSN = parseInt(A);
                                                break;
                                            case "TARGETDURATION":
                                                d.targetduration = parseFloat(A);
                                                break;
                                            case "VERSION":
                                                d.version = parseInt(A);
                                                break;
                                            case "EXTM3U":
                                                break;
                                            case "ENDLIST":
                                                d.live = !1;
                                                break;
                                            case "DIS":
                                                c++, h.tagList.push(["DIS"]);
                                                break;
                                            case "DISCONTINUITY-SEQ":
                                                c = parseInt(A);
                                                break;
                                            case "KEY":
                                                var b = new O(A),
                                                    E = b.enumeratedString("METHOD"),
                                                    T = b.URI,
                                                    S = b.hexadecimalInteger("IV");
                                                E && (s = new R(e, T), T && 0 <= ["AES-128", "SAMPLE-AES", "SAMPLE-AES-CENC"].indexOf(E) && (s.method = E, s.key = null, s.iv = S));
                                                break;
                                            case "START":
                                                var k = new O(A).decimalFloatingPoint("TIME-OFFSET");
                                                Object(I.isFiniteNumber)(k) && (d.startTimeOffset = k);
                                                break;
                                            case "MAP":
                                                var L = new O(A);
                                                h.relurl = L.URI, L.BYTERANGE && h.setByteRange(L.BYTERANGE), h.baseurl = e, h.level = r, h.type = i, h.sn = "initSegment", d.initSegment = h, (h = new C).rawProgramDateTime = d.initSegment.rawProgramDateTime;
                                                break;
                                            default:
                                                M.logger.warn("line parsed but not handled: " + a)
                                        }
                                    }
                                }
                                return (h = f) && !h.relurl && (d.fragments.pop(), u -= h.duration), d.totalduration = u, d.averagetargetduration = u / d.fragments.length, d.endSN = l - 1, d.startCC = d.fragments[0] ? d.fragments[0].cc : 0, d.endCC = c, !d.initSegment && d.fragments.length && d.fragments.every(function (t) {
                                    return N.test(t.relurl)
                                }) && (M.logger.warn("MP4 fragments found but no init segment (probably no MAP, incomplete M3U8), trying to fetch SIDX"), (h = new C).relurl = d.fragments[0].relurl, h.baseurl = e, h.level = r, h.type = i, h.sn = "initSegment", d.initSegment = h, d.needSidxRanges = !0), p && function (t, e) {
                                    for (var r = t[e], i = e - 1; 0 <= i; i--) {
                                        var n = t[i];
                                        n.programDateTime = r.programDateTime - 1e3 * n.duration, r = n
                                    }
                                }(d.fragments, p), d
                            }, d
                        }();

                    function F(t, e) {
                        t.rawProgramDateTime ? t.programDateTime = Date.parse(t.rawProgramDateTime) : e && e.programDateTime && (t.programDateTime = e.endProgramDateTime), Object(I.isFiniteNumber)(t.programDateTime) || (t.programDateTime = null, t.rawProgramDateTime = null)
                    }
                    var k = window.performance,
                        L = function (r) {
                            function g(t) {
                                var e;
                                return (e = r.call(this, t, x.default.MANIFEST_LOADING, x.default.LEVEL_LOADING, x.default.AUDIO_TRACK_LOADING, x.default.SUBTITLE_TRACK_LOADING) || this).loaders = {}, e
                            } ! function (t, e) {
                                t.prototype = Object.create(e.prototype), (t.prototype.constructor = t).__proto__ = e
                            }(g, r), g.canHaveQualityLevels = function (t) {
                                return t !== m.AUDIO_TRACK && t !== m.SUBTITLE_TRACK
                            }, g.mapContextToLevelType = function (t) {
                                switch (t.type) {
                                    case m.AUDIO_TRACK:
                                        return a.AUDIO;
                                    case m.SUBTITLE_TRACK:
                                        return a.SUBTITLE;
                                    default:
                                        return a.MAIN
                                }
                            }, g.getResponseUrl = function (t, e) {
                                var r = t.url;
                                return void 0 !== r && 0 !== r.indexOf("data:") || (r = e.url), r
                            };
                            var t = g.prototype;
                            return t.createInternalLoader = function (t) {
                                var e = this.hls.config,
                                    r = e.pLoader,
                                    i = e.loader,
                                    n = new (r || i)(e);
                                return t.loader = n, this.loaders[t.type] = n
                            }, t.getInternalLoader = function (t) {
                                return this.loaders[t.type]
                            }, t.resetInternalLoader = function (t) {
                                this.loaders[t] && delete this.loaders[t]
                            }, t.destroyInternalLoaders = function () {
                                for (var t in this.loaders) {
                                    var e = this.loaders[t];
                                    e && e.destroy(), this.resetInternalLoader(t)
                                }
                            }, t.destroy = function () {
                                this.destroyInternalLoaders(), r.prototype.destroy.call(this)
                            }, t.onManifestLoading = function (t) {
                                this.load({
                                    url: t.url,
                                    type: m.MANIFEST,
                                    level: 0,
                                    id: null,
                                    responseType: "text"
                                })
                            }, t.onLevelLoading = function (t) {
                                this.load({
                                    url: t.url,
                                    type: m.LEVEL,
                                    level: t.level,
                                    id: t.id,
                                    responseType: "text"
                                })
                            }, t.onAudioTrackLoading = function (t) {
                                this.load({
                                    url: t.url,
                                    type: m.AUDIO_TRACK,
                                    level: null,
                                    id: t.id,
                                    responseType: "text"
                                })
                            }, t.onSubtitleTrackLoading = function (t) {
                                this.load({
                                    url: t.url,
                                    type: m.SUBTITLE_TRACK,
                                    level: null,
                                    id: t.id,
                                    responseType: "text"
                                })
                            }, t.load = function (t) {
                                var e = this.hls.config;
                                M.logger.debug("Loading playlist of type " + t.type + ", level: " + t.level + ", id: " + t.id);
                                var r, i, n, a, o = this.getInternalLoader(t);
                                if (o) {
                                    var s = o.context;
                                    if (s && s.url === t.url) return M.logger.trace("playlist request ongoing"), !1;
                                    M.logger.warn("aborting previous loader for type: " + t.type), o.abort()
                                }
                                switch (t.type) {
                                    case m.MANIFEST:
                                        r = e.manifestLoadingMaxRetry, i = e.manifestLoadingTimeOut, n = e.manifestLoadingRetryDelay, a = e.manifestLoadingMaxRetryTimeout;
                                        break;
                                    case m.LEVEL:
                                        n = a = r = 0, i = e.levelLoadingTimeOut;
                                        break;
                                    default:
                                        r = e.levelLoadingMaxRetry, i = e.levelLoadingTimeOut, n = e.levelLoadingRetryDelay, a = e.levelLoadingMaxRetryTimeout
                                }
                                o = this.createInternalLoader(t);
                                var l = {
                                    timeout: i,
                                    maxRetry: r,
                                    retryDelay: n,
                                    maxRetryDelay: a
                                },
                                    u = {
                                        onSuccess: this.loadsuccess.bind(this),
                                        onError: this.loaderror.bind(this),
                                        onTimeout: this.loadtimeout.bind(this)
                                    };
                                return M.logger.debug("Calling internal loader delegate for URL: " + t.url), o.load(t, l, u), !0
                            }, t.loadsuccess = function (t, e, r, i) {
                                if (void 0 === i && (i = null), r.isSidxRequest) return this._handleSidxRequest(t, r), void this._handlePlaylistLoaded(t, e, r, i);
                                if (this.resetInternalLoader(r.type), "string" != typeof t.data) throw new Error('expected responseType of "text" for PlaylistLoader');
                                var n = t.data;
                                e.tload = k.now(), 0 === n.indexOf("#EXTM3U") ? 0 < n.indexOf("#EXTINF:") || 0 < n.indexOf("#EXT-X-TARGETDURATION:") ? this._handleTrackOrLevelPlaylist(t, e, r, i) : this._handleMasterPlaylist(t, e, r, i) : this._handleManifestParsingError(t, r, "no EXTM3U delimiter", i)
                            }, t.loaderror = function (t, e, r) {
                                void 0 === r && (r = null), this._handleNetworkError(e, r, !1, t)
                            }, t.loadtimeout = function (t, e, r) {
                                void 0 === r && (r = null), this._handleNetworkError(e, r, !0)
                            }, t._handleMasterPlaylist = function (t, e, r, i) {
                                var n = this.hls,
                                    a = t.data,
                                    o = g.getResponseUrl(t, r),
                                    s = S.parseMasterPlaylist(a, o);
                                if (s.length) {
                                    var l = s.map(function (t) {
                                        return {
                                            id: t.attrs.AUDIO,
                                            codec: t.audioCodec
                                        }
                                    }),
                                        u = S.parseMasterPlaylistMedia(a, o, "AUDIO", l),
                                        d = S.parseMasterPlaylistMedia(a, o, "SUBTITLES");
                                    if (u.length) {
                                        var c = !1;
                                        u.forEach(function (t) {
                                            t.url || (c = !0)
                                        }), !1 === c && s[0].audioCodec && !s[0].attrs.AUDIO && (M.logger.log("audio codec signaled in quality level, but no embedded audio track signaled, create one"), u.unshift({
                                            type: "main",
                                            name: "main",
                                            default: !1,
                                            autoselect: !1,
                                            forced: !1,
                                            id: -1
                                        }))
                                    }
                                    n.trigger(x.default.MANIFEST_LOADED, {
                                        levels: s,
                                        audioTracks: u,
                                        subtitles: d,
                                        url: o,
                                        stats: e,
                                        networkDetails: i
                                    })
                                } else this._handleManifestParsingError(t, r, "no level found in manifest", i)
                            }, t._handleTrackOrLevelPlaylist = function (t, e, r, i) {
                                var n = this.hls,
                                    a = r.id,
                                    o = r.level,
                                    s = r.type,
                                    l = g.getResponseUrl(t, r),
                                    u = Object(I.isFiniteNumber)(a) ? a : 0,
                                    d = Object(I.isFiniteNumber)(o) ? o : u,
                                    c = g.mapContextToLevelType(r),
                                    f = S.parseLevelPlaylist(t.data, l, d, c, u);
                                if (f.tload = e.tload, s === m.MANIFEST) {
                                    var h = {
                                        url: l,
                                        details: f
                                    };
                                    n.trigger(x.default.MANIFEST_LOADED, {
                                        levels: [h],
                                        audioTracks: [],
                                        url: l,
                                        stats: e,
                                        networkDetails: i
                                    })
                                }
                                if (e.tparsed = k.now(), f.needSidxRanges) {
                                    var p = f.initSegment.url;
                                    this.load({
                                        url: p,
                                        isSidxRequest: !0,
                                        type: s,
                                        level: o,
                                        levelDetails: f,
                                        id: a,
                                        rangeStart: 0,
                                        rangeEnd: 2048,
                                        responseType: "arraybuffer"
                                    })
                                } else r.levelDetails = f, this._handlePlaylistLoaded(t, e, r, i)
                            }, t._handleSidxRequest = function (t, e) {
                                if ("string" == typeof t.data) throw new Error("sidx request must be made with responseType of array buffer");
                                var r = d.default.parseSegmentIndex(new Uint8Array(t.data));
                                if (r) {
                                    var i = r.references,
                                        n = e.levelDetails;
                                    i.forEach(function (t, e) {
                                        var r = t.info;
                                        if (n) {
                                            var i = n.fragments[e];
                                            0 === i.byteRange.length && i.setByteRange(String(1 + r.end - r.start) + "@" + String(r.start))
                                        }
                                    }), n && n.initSegment.setByteRange(String(r.moovEndOffset) + "@0")
                                }
                            }, t._handleManifestParsingError = function (t, e, r, i) {
                                this.hls.trigger(x.default.ERROR, {
                                    type: f.ErrorTypes.NETWORK_ERROR,
                                    details: f.ErrorDetails.MANIFEST_PARSING_ERROR,
                                    fatal: !0,
                                    url: t.url,
                                    reason: r,
                                    networkDetails: i
                                })
                            }, t._handleNetworkError = function (t, e, r, i) {
                                var n, a;
                                void 0 === r && (r = !1), void 0 === i && (i = null), M.logger.info("A network error occured while loading a " + t.type + "-type playlist");
                                var o = this.getInternalLoader(t);
                                switch (t.type) {
                                    case m.MANIFEST:
                                        n = r ? f.ErrorDetails.MANIFEST_LOAD_TIMEOUT : f.ErrorDetails.MANIFEST_LOAD_ERROR, a = !0;
                                        break;
                                    case m.LEVEL:
                                        n = r ? f.ErrorDetails.LEVEL_LOAD_TIMEOUT : f.ErrorDetails.LEVEL_LOAD_ERROR, a = !1;
                                        break;
                                    case m.AUDIO_TRACK:
                                        n = r ? f.ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT : f.ErrorDetails.AUDIO_TRACK_LOAD_ERROR, a = !1;
                                        break;
                                    default:
                                        a = !1
                                }
                                o && (o.abort(), this.resetInternalLoader(t.type));
                                var s = {
                                    type: f.ErrorTypes.NETWORK_ERROR,
                                    details: n,
                                    fatal: a,
                                    url: t.url,
                                    loader: o,
                                    context: t,
                                    networkDetails: e
                                };
                                i && (s.response = i), this.hls.trigger(x.default.ERROR, s)
                            }, t._handlePlaylistLoaded = function (t, e, r, i) {
                                var n = r.type,
                                    a = r.level,
                                    o = r.id,
                                    s = r.levelDetails;
                                if (s && s.targetduration)
                                    if (g.canHaveQualityLevels(r.type)) this.hls.trigger(x.default.LEVEL_LOADED, {
                                        details: s,
                                        level: a || 0,
                                        id: o || 0,
                                        stats: e,
                                        networkDetails: i
                                    });
                                    else switch (n) {
                                        case m.AUDIO_TRACK:
                                            this.hls.trigger(x.default.AUDIO_TRACK_LOADED, {
                                                details: s,
                                                id: o,
                                                stats: e,
                                                networkDetails: i
                                            });
                                            break;
                                        case m.SUBTITLE_TRACK:
                                            this.hls.trigger(x.default.SUBTITLE_TRACK_LOADED, {
                                                details: s,
                                                id: o,
                                                stats: e,
                                                networkDetails: i
                                            })
                                    } else this._handleManifestParsingError(t, r, "invalid target duration", i)
                            }, g
                        }(u);
                    var B = function (i) {
                        function t(t) {
                            var e;
                            return (e = i.call(this, t, x.default.FRAG_LOADING) || this).loaders = {}, e
                        } ! function (t, e) {
                            t.prototype = Object.create(e.prototype), (t.prototype.constructor = t).__proto__ = e
                        }(t, i);
                        var e = t.prototype;
                        return e.destroy = function () {
                            var t = this.loaders;
                            for (var e in t) {
                                var r = t[e];
                                r && r.destroy()
                            }
                            this.loaders = {}, i.prototype.destroy.call(this)
                        }, e.onFragLoading = function (t) {
                            var e = t.frag,
                                r = e.type,
                                i = this.loaders,
                                n = this.hls.config,
                                a = n.fLoader,
                                o = n.loader;
                            e.loaded = 0;
                            var s, l, u, d = i[r];
                            d && (M.logger.warn("abort previous fragment loader for type: " + r), d.abort()), d = i[r] = e.loader = n.fLoader ? new a(n) : new o(n), s = {
                                url: e.url,
                                frag: e,
                                responseType: "arraybuffer",
                                progressData: !1
                            };
                            var c = e.byteRangeStartOffset,
                                f = e.byteRangeEndOffset;
                            Object(I.isFiniteNumber)(c) && Object(I.isFiniteNumber)(f) && (s.rangeStart = c, s.rangeEnd = f), l = {
                                timeout: n.fragLoadingTimeOut,
                                maxRetry: 0,
                                retryDelay: 0,
                                maxRetryDelay: n.fragLoadingMaxRetryTimeout
                            }, u = {
                                onSuccess: this.loadsuccess.bind(this),
                                onError: this.loaderror.bind(this),
                                onTimeout: this.loadtimeout.bind(this),
                                onProgress: this.loadprogress.bind(this)
                            }, d.load(s, l, u)
                        }, e.loadsuccess = function (t, e, r, i) {
                            void 0 === i && (i = null);
                            var n = t.data,
                                a = r.frag;
                            a.loader = void 0, this.loaders[a.type] = void 0, this.hls.trigger(x.default.FRAG_LOADED, {
                                payload: n,
                                frag: a,
                                stats: e,
                                networkDetails: i
                            })
                        }, e.loaderror = function (t, e, r) {
                            void 0 === r && (r = null);
                            var i = e.frag,
                                n = i.loader;
                            n && n.abort(), this.loaders[i.type] = void 0, this.hls.trigger(x.default.ERROR, {
                                type: f.ErrorTypes.NETWORK_ERROR,
                                details: f.ErrorDetails.FRAG_LOAD_ERROR,
                                fatal: !1,
                                frag: e.frag,
                                response: t,
                                networkDetails: r
                            })
                        }, e.loadtimeout = function (t, e, r) {
                            void 0 === r && (r = null);
                            var i = e.frag,
                                n = i.loader;
                            n && n.abort(), this.loaders[i.type] = void 0, this.hls.trigger(x.default.ERROR, {
                                type: f.ErrorTypes.NETWORK_ERROR,
                                details: f.ErrorDetails.FRAG_LOAD_TIMEOUT,
                                fatal: !1,
                                frag: e.frag,
                                networkDetails: r
                            })
                        }, e.loadprogress = function (t, e, r, i) {
                            void 0 === i && (i = null);
                            var n = e.frag;
                            n.loaded = t.loaded, this.hls.trigger(x.default.FRAG_LOAD_PROGRESS, {
                                frag: n,
                                stats: t,
                                networkDetails: i
                            })
                        }, t
                    }(u);
                    var U = function (r) {
                        function t(t) {
                            var e;
                            return (e = r.call(this, t, x.default.KEY_LOADING) || this).loaders = {}, e.decryptkey = null, e.decrypturl = null, e
                        } ! function (t, e) {
                            t.prototype = Object.create(e.prototype), (t.prototype.constructor = t).__proto__ = e
                        }(t, r);
                        var e = t.prototype;
                        return e.destroy = function () {
                            for (var t in this.loaders) {
                                var e = this.loaders[t];
                                e && e.destroy()
                            }
                            this.loaders = {}, r.prototype.destroy.call(this)
                        }, e.onKeyLoading = function (t) {
                            var e = t.frag,
                                r = e.type,
                                i = this.loaders[r];
                            if (e.decryptdata) {
                                var n = e.decryptdata.uri;
                                if (n !== this.decrypturl || null === this.decryptkey) {
                                    var a = this.hls.config;
                                    if (i && (M.logger.warn("abort previous key loader for type:" + r), i.abort()), !n) return void M.logger.warn("key uri is falsy");
                                    e.loader = this.loaders[r] = new a.loader(a), this.decrypturl = n, this.decryptkey = null;
                                    var o = {
                                        url: n,
                                        frag: e,
                                        responseType: "arraybuffer"
                                    },
                                        s = {
                                            timeout: a.fragLoadingTimeOut,
                                            maxRetry: 0,
                                            retryDelay: a.fragLoadingRetryDelay,
                                            maxRetryDelay: a.fragLoadingMaxRetryTimeout
                                        },
                                        l = {
                                            onSuccess: this.loadsuccess.bind(this),
                                            onError: this.loaderror.bind(this),
                                            onTimeout: this.loadtimeout.bind(this)
                                        };
                                    e.loader.load(o, s, l)
                                } else this.decryptkey && (e.decryptdata.key = this.decryptkey, this.hls.trigger(x.default.KEY_LOADED, {
                                    frag: e
                                }))
                            } else M.logger.warn("Missing decryption data on fragment in onKeyLoading")
                        }, e.loadsuccess = function (t, e, r) {
                            var i = r.frag;
                            i.decryptdata ? (this.decryptkey = i.decryptdata.key = new Uint8Array(t.data), i.loader = void 0, delete this.loaders[i.type], this.hls.trigger(x.default.KEY_LOADED, {
                                frag: i
                            })) : M.logger.error("after key load, decryptdata unset")
                        }, e.loaderror = function (t, e) {
                            var r = e.frag,
                                i = r.loader;
                            i && i.abort(), delete this.loaders[r.type], this.hls.trigger(x.default.ERROR, {
                                type: f.ErrorTypes.NETWORK_ERROR,
                                details: f.ErrorDetails.KEY_LOAD_ERROR,
                                fatal: !1,
                                frag: r,
                                response: t
                            })
                        }, e.loadtimeout = function (t, e) {
                            var r = e.frag,
                                i = r.loader;
                            i && i.abort(), delete this.loaders[r.type], this.hls.trigger(x.default.ERROR, {
                                type: f.ErrorTypes.NETWORK_ERROR,
                                details: f.ErrorDetails.KEY_LOAD_TIMEOUT,
                                fatal: !1,
                                frag: r
                            })
                        }, t
                    }(u);
                    var j = "NOT_LOADED",
                        K = "APPENDING",
                        V = "PARTIAL",
                        G = "OK",
                        Y = function (r) {
                            function t(t) {
                                var e;
                                return (e = r.call(this, t, x.default.BUFFER_APPENDED, x.default.FRAG_BUFFERED, x.default.FRAG_LOADED) || this).bufferPadding = .2, e.fragments = Object.create(null), e.timeRanges = Object.create(null), e.config = t.config, e
                            } ! function (t, e) {
                                t.prototype = Object.create(e.prototype), (t.prototype.constructor = t).__proto__ = e
                            }(t, r);
                            var e = t.prototype;
                            return e.destroy = function () {
                                this.fragments = Object.create(null), this.timeRanges = Object.create(null), this.config = null, u.prototype.destroy.call(this), r.prototype.destroy.call(this)
                            }, e.getBufferedFrag = function (i, n) {
                                var a = this.fragments,
                                    t = Object.keys(a).filter(function (t) {
                                        var e = a[t];
                                        if (e.body.type !== n) return !1;
                                        if (!e.buffered) return !1;
                                        var r = e.body;
                                        return r.startPTS <= i && i <= r.endPTS
                                    });
                                if (0 === t.length) return null;
                                var e = t.pop();
                                return a[e].body
                            }, e.detectEvictedFragments = function (n, a) {
                                var o, s, l = this;
                                Object.keys(this.fragments).forEach(function (t) {
                                    var e = l.fragments[t];
                                    if (!0 === e.buffered) {
                                        var r = e.range[n];
                                        if (r) {
                                            o = r.time;
                                            for (var i = 0; i < o.length; i++)
                                                if (s = o[i], !1 === l.isTimeBuffered(s.startPTS, s.endPTS, a)) {
                                                    l.removeFragment(e.body);
                                                    break
                                                }
                                        }
                                    }
                                })
                            }, e.detectPartialFragments = function (r) {
                                var i = this,
                                    t = this.getFragmentKey(r),
                                    n = this.fragments[t];
                                n && (n.buffered = !0, Object.keys(this.timeRanges).forEach(function (t) {
                                    if (r.hasElementaryStream(t)) {
                                        var e = i.timeRanges[t];
                                        n.range[t] = i.getBufferedTimes(r.startPTS, r.endPTS, e)
                                    }
                                }))
                            }, e.getBufferedTimes = function (t, e, r) {
                                for (var i, n, a = [], o = !1, s = 0; s < r.length; s++) {
                                    if (i = r.start(s) - this.bufferPadding, n = r.end(s) + this.bufferPadding, i <= t && e <= n) {
                                        a.push({
                                            startPTS: Math.max(t, r.start(s)),
                                            endPTS: Math.min(e, r.end(s))
                                        });
                                        break
                                    }
                                    if (t < n && i < e) a.push({
                                        startPTS: Math.max(t, r.start(s)),
                                        endPTS: Math.min(e, r.end(s))
                                    }), o = !0;
                                    else if (e <= i) break
                                }
                                return {
                                    time: a,
                                    partial: o
                                }
                            }, e.getFragmentKey = function (t) {
                                return t.type + "_" + t.level + "_" + t.urlId + "_" + t.sn
                            }, e.getPartialFragment = function (r) {
                                var i, n, a, o = this,
                                    s = null,
                                    l = 0;
                                return Object.keys(this.fragments).forEach(function (t) {
                                    var e = o.fragments[t];
                                    o.isPartial(e) && (n = e.body.startPTS - o.bufferPadding, a = e.body.endPTS + o.bufferPadding, n <= r && r <= a && (i = Math.min(r - n, a - r), l <= i && (s = e.body, l = i)))
                                }), s
                            }, e.getState = function (t) {
                                var e = this.getFragmentKey(t),
                                    r = this.fragments[e],
                                    i = j;
                                return void 0 !== r && (i = r.buffered ? !0 === this.isPartial(r) ? V : G : K), i
                            }, e.isPartial = function (t) {
                                return !0 === t.buffered && (void 0 !== t.range.video && !0 === t.range.video.partial || void 0 !== t.range.audio && !0 === t.range.audio.partial)
                            }, e.isTimeBuffered = function (t, e, r) {
                                for (var i, n, a = 0; a < r.length; a++) {
                                    if (i = r.start(a) - this.bufferPadding, n = r.end(a) + this.bufferPadding, i <= t && e <= n) return !0;
                                    if (e <= i) return !1
                                }
                                return !1
                            }, e.onFragLoaded = function (t) {
                                var e = t.frag;
                                Object(I.isFiniteNumber)(e.sn) && !e.bitrateTest && (this.fragments[this.getFragmentKey(e)] = {
                                    body: e,
                                    range: Object.create(null),
                                    buffered: !1
                                })
                            }, e.onBufferAppended = function (t) {
                                var r = this;
                                this.timeRanges = t.timeRanges, Object.keys(this.timeRanges).forEach(function (t) {
                                    var e = r.timeRanges[t];
                                    r.detectEvictedFragments(t, e)
                                })
                            }, e.onFragBuffered = function (t) {
                                this.detectPartialFragments(t.frag)
                            }, e.hasFragment = function (t) {
                                var e = this.getFragmentKey(t);
                                return void 0 !== this.fragments[e]
                            }, e.removeFragment = function (t) {
                                var e = this.getFragmentKey(t);
                                delete this.fragments[e]
                            }, e.removeAllFragments = function () {
                                this.fragments = Object.create(null)
                            }, t
                        }(u),
                        H = {
                            search: function (t, e) {
                                for (var r = 0, i = t.length - 1, n = null, a = null; r <= i;) {
                                    var o = e(a = t[n = (r + i) / 2 | 0]);
                                    if (0 < o) r = n + 1;
                                    else {
                                        if (!(o < 0)) return a;
                                        i = n - 1
                                    }
                                }
                                return null
                            }
                        },
                        $ = function () {
                            function t() { }
                            return t.isBuffered = function (t, e) {
                                try {
                                    if (t)
                                        for (var r = t.buffered, i = 0; i < r.length; i++)
                                            if (e >= r.start(i) && e <= r.end(i)) return !0
                                } catch (t) { }
                                return !1
                            }, t.bufferInfo = function (t, e, r) {
                                try {
                                    if (t) {
                                        var i, n = t.buffered,
                                            a = [];
                                        for (i = 0; i < n.length; i++) a.push({
                                            start: n.start(i),
                                            end: n.end(i)
                                        });
                                        return this.bufferedInfo(a, e, r)
                                    }
                                } catch (t) { }
                                return {
                                    len: 0,
                                    start: e,
                                    end: e,
                                    nextStart: void 0
                                }
                            }, t.bufferedInfo = function (t, e, r) {
                                t.sort(function (t, e) {
                                    var r = t.start - e.start;
                                    return r || e.end - t.end
                                });
                                var i = [];
                                if (r)
                                    for (var n = 0; n < t.length; n++) {
                                        var a = i.length;
                                        if (a) {
                                            var o = i[a - 1].end;
                                            t[n].start - o < r ? t[n].end > o && (i[a - 1].end = t[n].end) : i.push(t[n])
                                        } else i.push(t[n])
                                    } else i = t;
                                for (var s, l = 0, u = e, d = e, c = 0; c < i.length; c++) {
                                    var f = i[c].start,
                                        h = i[c].end;
                                    if (f <= e + r && e < h) u = f, l = (d = h) - e;
                                    else if (e + r < f) {
                                        s = f;
                                        break
                                    }
                                }
                                return {
                                    len: l,
                                    start: u,
                                    end: d,
                                    nextStart: s
                                }
                            }, t
                        }(),
                        z = r("./node_modules/eventemitter3/index.js"),
                        W = r("./node_modules/webworkify-webpack/index.js"),
                        q = r("./src/demux/demuxer-inline.js");

                    function X() {
                        return window.MediaSource || window.WebKitMediaSource
                    }
                    var Z = r("./src/utils/get-self-scope.js");
                    var Q = function (t) {
                        function e() {
                            return t.apply(this, arguments) || this
                        }
                        return function (t, e) {
                            t.prototype = Object.create(e.prototype), (t.prototype.constructor = t).__proto__ = e
                        }(e, t), e.prototype.trigger = function (t) {
                            for (var e = arguments.length, r = new Array(1 < e ? e - 1 : 0), i = 1; i < e; i++) r[i - 1] = arguments[i];
                            this.emit.apply(this, [t, t].concat(r))
                        }, e
                    }(z.EventEmitter),
                        J = Object(Z.getSelfScope)(),
                        tt = X() || {
                            isTypeSupported: function () {
                                return !1
                            }
                        },
                        et = function () {
                            function t(r, t) {
                                var i = this;
                                this.hls = r, this.id = t;

                                function e(t, e) {
                                    (e = e || {}).frag = i.frag, e.id = i.id, r.trigger(t, e)
                                }
                                var n = this.observer = new Q,
                                    a = r.config;
                                n.on(x.default.FRAG_DECRYPTED, e), n.on(x.default.FRAG_PARSING_INIT_SEGMENT, e), n.on(x.default.FRAG_PARSING_DATA, e), n.on(x.default.FRAG_PARSED, e), n.on(x.default.ERROR, e), n.on(x.default.FRAG_PARSING_METADATA, e), n.on(x.default.FRAG_PARSING_USERDATA, e), n.on(x.default.INIT_PTS_FOUND, e);
                                var o = {
                                    mp4: tt.isTypeSupported("video/mp4"),
                                    mpeg: tt.isTypeSupported("audio/mpeg"),
                                    mp3: tt.isTypeSupported('audio/mp4; codecs="mp3"')
                                },
                                    s = navigator.vendor;
                                if (a.enableWorker && "undefined" != typeof Worker) {
                                    var l;
                                    M.logger.log("demuxing in webworker");
                                    try {
                                        l = this.w = W("./src/demux/demuxer-worker.js"), this.onwmsg = this.onWorkerMessage.bind(this), l.addEventListener("message", this.onwmsg), l.onerror = function (t) {
                                            r.trigger(x.default.ERROR, {
                                                type: f.ErrorTypes.OTHER_ERROR,
                                                details: f.ErrorDetails.INTERNAL_EXCEPTION,
                                                fatal: !0,
                                                event: "demuxerWorker",
                                                err: {
                                                    message: t.message + " (" + t.filename + ":" + t.lineno + ")"
                                                }
                                            })
                                        }, l.postMessage({
                                            cmd: "init",
                                            typeSupported: o,
                                            vendor: s,
                                            id: t,
                                            config: JSON.stringify(a)
                                        })
                                    } catch (t) {
                                        M.logger.warn("Error in worker:", t), M.logger.error("Error while initializing DemuxerWorker, fallback on DemuxerInline"), l && J.URL.revokeObjectURL(l.objectURL), this.demuxer = new q.default(n, o, a, s), this.w = void 0
                                    }
                                } else this.demuxer = new q.default(n, o, a, s)
                            }
                            var e = t.prototype;
                            return e.destroy = function () {
                                var t = this.w;
                                if (t) t.removeEventListener("message", this.onwmsg), t.terminate(), this.w = null;
                                else {
                                    var e = this.demuxer;
                                    e && (e.destroy(), this.demuxer = null)
                                }
                                var r = this.observer;
                                r && (r.removeAllListeners(), this.observer = null)
                            }, e.push = function (t, e, r, i, n, a, o, s) {
                                var l = this.w,
                                    u = Object(I.isFiniteNumber)(n.startPTS) ? n.startPTS : n.start,
                                    d = n.decryptdata,
                                    c = this.frag,
                                    f = !(c && n.cc === c.cc),
                                    h = !(c && n.level === c.level),
                                    p = c && n.sn === c.sn + 1,
                                    g = !h && p;
                                if (f && M.logger.log(this.id + ":discontinuity detected"), h && M.logger.log(this.id + ":switch detected"), this.frag = n, l) l.postMessage({
                                    cmd: "demux",
                                    data: t,
                                    decryptdata: d,
                                    initSegment: e,
                                    audioCodec: r,
                                    videoCodec: i,
                                    timeOffset: u,
                                    discontinuity: f,
                                    trackSwitch: h,
                                    contiguous: g,
                                    duration: a,
                                    accurateTimeOffset: o,
                                    defaultInitPTS: s
                                }, t instanceof ArrayBuffer ? [t] : []);
                                else {
                                    var m = this.demuxer;
                                    m && m.push(t, d, e, r, i, u, f, h, g, a, o, s)
                                }
                            }, e.onWorkerMessage = function (t) {
                                var e = t.data,
                                    r = this.hls;
                                switch (e.event) {
                                    case "init":
                                        J.URL.revokeObjectURL(this.w.objectURL);
                                        break;
                                    case x.default.FRAG_PARSING_DATA:
                                        e.data.data1 = new Uint8Array(e.data1), e.data2 && (e.data.data2 = new Uint8Array(e.data2));
                                    default:
                                        e.data = e.data || {}, e.data.frag = this.frag, e.data.id = this.id, r.trigger(e.event, e.data)
                                }
                            }, t
                        }();

                    function rt(t, e, r) {
                        switch (e) {
                            case "audio":
                                t.audioGroupIds || (t.audioGroupIds = []), t.audioGroupIds.push(r);
                                break;
                            case "text":
                                t.textGroupIds || (t.textGroupIds = []), t.textGroupIds.push(r)
                        }
                    }

                    function it(t, e, r) {
                        var i = t[e],
                            n = t[r],
                            a = n.startPTS;
                        Object(I.isFiniteNumber)(a) ? e < r ? (i.duration = a - i.start, i.duration < 0 && M.logger.warn("negative duration computed for frag " + i.sn + ",level " + i.level + ", there should be some duration drift between playlist and fragment!")) : (n.duration = i.start - a, n.duration < 0 && M.logger.warn("negative duration computed for frag " + n.sn + ",level " + n.level + ", there should be some duration drift between playlist and fragment!")) : n.start = e < r ? i.start + i.duration : Math.max(i.start - n.duration, 0)
                    }

                    function nt(t, e, r, i, n, a) {
                        var o = r;
                        if (Object(I.isFiniteNumber)(e.startPTS)) {
                            var s = Math.abs(e.startPTS - r);
                            Object(I.isFiniteNumber)(e.deltaPTS) ? e.deltaPTS = Math.max(s, e.deltaPTS) : e.deltaPTS = s, o = Math.max(r, e.startPTS), r = Math.min(r, e.startPTS), i = Math.max(i, e.endPTS), n = Math.min(n, e.startDTS), a = Math.max(a, e.endDTS)
                        }
                        var l = r - e.start;
                        e.start = e.startPTS = r, e.maxStartPTS = o, e.endPTS = i, e.startDTS = n, e.endDTS = a, e.duration = i - r;
                        var u, d, c, f = e.sn;
                        if (!t || f < t.startSN || f > t.endSN) return 0;
                        for (u = f - t.startSN, (d = t.fragments)[u] = e, c = u; 0 < c; c--) it(d, c, c - 1);
                        for (c = u; c < d.length - 1; c++) it(d, c, c + 1);
                        return t.PTSKnown = !0, l
                    }

                    function at(t, r) {
                        r.initSegment && t.initSegment && (r.initSegment = t.initSegment);
                        var i, n = 0;
                        if (ot(t, r, function (t, e) {
                            n = t.cc - e.cc, Object(I.isFiniteNumber)(t.startPTS) && (e.start = e.startPTS = t.startPTS, e.endPTS = t.endPTS, e.duration = t.duration, e.backtracked = t.backtracked, e.dropped = t.dropped, i = e), r.PTSKnown = !0
                        }), r.PTSKnown) {
                            if (n) {
                                M.logger.log("discontinuity sliding from playlist, take drift into account");
                                for (var e = r.fragments, a = 0; a < e.length; a++) e[a].cc += n
                            }
                            i ? nt(r, i, i.startPTS, i.endPTS, i.startDTS, i.endDTS) : function (t, e) {
                                var r = e.startSN - t.startSN,
                                    i = t.fragments,
                                    n = e.fragments;
                                if (r < 0 || r > i.length) return;
                                for (var a = 0; a < n.length; a++) n[a].start += i[r].start
                            }(t, r), r.PTSKnown = t.PTSKnown
                        }
                    }

                    function ot(t, e, r) {
                        if (t && e)
                            for (var i = Math.max(t.startSN, e.startSN) - e.startSN, n = Math.min(t.endSN, e.endSN) - e.startSN, a = e.startSN - t.startSN, o = i; o <= n; o++) {
                                var s = t.fragments[a + o],
                                    l = e.fragments[o];
                                if (!s || !l) break;
                                r(s, l, o)
                            }
                    }

                    function st(t, e, r) {
                        var i = 1e3 * (e.averagetargetduration ? e.averagetargetduration : e.targetduration),
                            n = i / 2;
                        return t && e.endSN === t.endSN && (i = n), r && (i = Math.max(n, i - (window.performance.now() - r))), Math.round(i)
                    }
                    var lt = {
                        toString: function (t) {
                            for (var e = "", r = t.length, i = 0; i < r; i++) e += "[" + t.start(i).toFixed(3) + "," + t.end(i).toFixed(3) + "]";
                            return e
                        }
                    };

                    function ut(r, t) {
                        t.fragments.forEach(function (t) {
                            if (t) {
                                var e = t.start + r;
                                t.start = t.startPTS = e, t.endPTS = e + t.duration
                            }
                        }), t.PTSKnown = !0
                    }

                    function dt(t, e, r) {
                        ! function (t, e, r) {
                            if (function (t, e, r) {
                                var i = !1;
                                return e && e.details && r && (r.endCC > r.startCC || t && t.cc < r.startCC) && (i = !0), i
                            }(t, r, e)) {
                                var i = function (t, e) {
                                    var r = t.fragments,
                                        i = e.fragments;
                                    if (i.length && r.length) {
                                        var n = function (t, e) {
                                            for (var r = null, i = 0; i < t.length; i += 1) {
                                                var n = t[i];
                                                if (n && n.cc === e) {
                                                    r = n;
                                                    break
                                                }
                                            }
                                            return r
                                        }(r, i[0].cc);
                                        if (n && (!n || n.startPTS)) return n;
                                        M.logger.log("No frag in previous level to align on")
                                    } else M.logger.log("No fragments to align")
                                }(r.details, e);
                                i && (M.logger.log("Adjusting PTS using last level due to CC increase within current level"), ut(i.start, e))
                            }
                        }(t, r, e), !r.PTSKnown && e && function (t, e) {
                            if (e && e.fragments.length) {
                                if (!t.hasProgramDateTime || !e.hasProgramDateTime) return;
                                var r = e.fragments[0].programDateTime,
                                    i = (t.fragments[0].programDateTime - r) / 1e3 + e.fragments[0].start;
                                Object(I.isFiniteNumber)(i) && (M.logger.log("adjusting PTS using programDateTime delta, sliding:" + i.toFixed(3)), ut(i, t))
                            }
                        }(r, e.details)
                    }

                    function ct(t, e, r) {
                        if (null === e || !Array.isArray(t) || !t.length || !Object(I.isFiniteNumber)(e)) return null;
                        var i, n, a, o, s;
                        if (e < (t[0].programDateTime || 0)) return null;
                        if ((t[t.length - 1].endProgramDateTime || 0) <= e) return null;
                        r = r || 0;
                        for (var l = 0; l < t.length; ++l) {
                            var u = t[l];
                            if (i = e, n = r, a = u, void 0, o = 1e3 * Math.min(n, a.duration + (a.deltaPTS ? a.deltaPTS : 0)), s = a.endProgramDateTime || 0, i < s - o) return u
                        }
                        return null
                    }

                    function ft(t, e, r, i) {
                        void 0 === r && (r = 0), void 0 === i && (i = 0);
                        var n = t ? e[t.sn - e[0].sn + 1] : null;
                        return n && !ht(r, i, n) ? n : H.search(e, ht.bind(null, r, i))
                    }

                    function ht(t, e, r) {
                        void 0 === t && (t = 0), void 0 === e && (e = 0);
                        var i = Math.min(e, r.duration + (r.deltaPTS ? r.deltaPTS : 0));
                        return r.start + r.duration - i <= t ? 1 : r.start - i > t && r.start ? -1 : 0
                    }
                    var pt = function () {
                        function t(t, e, r, i) {
                            this.config = t, this.media = e, this.fragmentTracker = r, this.hls = i, this.nudgeRetry = 0, this.stallReported = !1, this.stalled = null, this.moved = !1, this.seeking = !1
                        }
                        var e = t.prototype;
                        return e.poll = function (t) {
                            var e = this.config,
                                r = this.media,
                                i = this.stalled,
                                n = r.currentTime,
                                a = r.seeking,
                                o = this.seeking && !a,
                                s = !this.seeking && a;
                            if (this.seeking = a, n === t) {
                                if ((s || o) && (this.stalled = null), !r.paused && !r.ended && 0 !== r.playbackRate && r.buffered.length) {
                                    var l = $.bufferInfo(r, n, 0),
                                        u = 0 < l.len,
                                        d = l.nextStart || 0;
                                    if (u || d) {
                                        if (a) {
                                            if (2 < l.len || (!d || 2 < d - n)) return;
                                            this.moved = !1
                                        }
                                        if (!this.moved && this.stalled) {
                                            var c = Math.max(d, l.start || 0) - n;
                                            if (0 < c && c <= 2) return void this._trySkipBufferHole(null)
                                        }
                                        var f = self.performance.now();
                                        if (null !== i) {
                                            var h = f - i;
                                            !a && 250 <= h && this._reportStall(l.len);
                                            var p = $.bufferInfo(r, n, e.maxBufferHole);
                                            this._tryFixBufferStall(p, h)
                                        } else this.stalled = f
                                    }
                                }
                            } else if (this.moved = !0, null !== i) {
                                if (this.stallReported) {
                                    var g = self.performance.now() - i;
                                    M.logger.warn("playback not stuck anymore @" + n + ", after " + Math.round(g) + "ms"), this.stallReported = !1
                                }
                                this.stalled = null, this.nudgeRetry = 0
                            }
                        }, e._tryFixBufferStall = function (t, e) {
                            var r = this.config,
                                i = this.fragmentTracker,
                                n = this.media.currentTime,
                                a = i.getPartialFragment(n);
                            if (a && this._trySkipBufferHole(a)) return;
                            t.len > r.maxBufferHole && e > 1e3 * r.highBufferWatchdogPeriod && (M.logger.warn("Trying to nudge playhead over buffer-hole"), this.stalled = null, this._tryNudgeBuffer())
                        }, e._reportStall = function (t) {
                            var e = this.hls,
                                r = this.media;
                            this.stallReported || (this.stallReported = !0, M.logger.warn("Playback stalling at @" + r.currentTime + " due to low buffer"), e.trigger(x.default.ERROR, {
                                type: f.ErrorTypes.MEDIA_ERROR,
                                details: f.ErrorDetails.BUFFER_STALLED_ERROR,
                                fatal: !1,
                                buffer: t
                            }))
                        }, e._trySkipBufferHole = function (t) {
                            for (var e = this.config, r = this.hls, i = this.media, n = i.currentTime, a = 0, o = 0; o < i.buffered.length; o++) {
                                var s = i.buffered.start(o);
                                if (n + e.maxBufferHole >= a && n < s) {
                                    var l = Math.max(s + .05, i.currentTime + .1);
                                    return M.logger.warn("skipping hole, adjusting currentTime from " + n + " to " + l), this.moved = !0, this.stalled = null, i.currentTime = l, t && r.trigger(x.default.ERROR, {
                                        type: f.ErrorTypes.MEDIA_ERROR,
                                        details: f.ErrorDetails.BUFFER_SEEK_OVER_HOLE,
                                        fatal: !1,
                                        reason: "fragment loaded with buffer holes, seeking from " + n + " to " + l,
                                        frag: t
                                    }), l
                                }
                                a = i.buffered.end(o)
                            }
                            return 0
                        }, e._tryNudgeBuffer = function () {
                            var t = this.config,
                                e = this.hls,
                                r = this.media,
                                i = r.currentTime,
                                n = (this.nudgeRetry || 0) + 1;
                            if ((this.nudgeRetry = n) < t.nudgeMaxRetry) {
                                var a = i + n * t.nudgeOffset;
                                M.logger.warn("Nudging 'currentTime' from " + i + " to " + a), r.currentTime = a, e.trigger(x.default.ERROR, {
                                    type: f.ErrorTypes.MEDIA_ERROR,
                                    details: f.ErrorDetails.BUFFER_NUDGE_ON_STALL,
                                    fatal: !1
                                })
                            } else M.logger.error("Playhead still not moving while enough data buffered @" + i + " after " + t.nudgeMaxRetry + " nudges"), e.trigger(x.default.ERROR, {
                                type: f.ErrorTypes.MEDIA_ERROR,
                                details: f.ErrorDetails.BUFFER_STALLED_ERROR,
                                fatal: !0
                            })
                        }, t
                    }();
                    var gt = function (a) {
                        function t(t) {
                            for (var e, r = arguments.length, i = new Array(1 < r ? r - 1 : 0), n = 1; n < r; n++) i[n - 1] = arguments[n];
                            return (e = a.call.apply(a, [this, t].concat(i)) || this)._boundTick = void 0, e._tickTimer = null, e._tickInterval = null, e._tickCallCount = 0, e._boundTick = e.tick.bind(function (t) {
                                if (void 0 === t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                                return t
                            }(e)), e
                        } ! function (t, e) {
                            t.prototype = Object.create(e.prototype), (t.prototype.constructor = t).__proto__ = e
                        }(t, a);
                        var e = t.prototype;
                        return e.onHandlerDestroying = function () {
                            this.clearNextTick(), this.clearInterval()
                        }, e.hasInterval = function () {
                            return !!this._tickInterval
                        }, e.hasNextTick = function () {
                            return !!this._tickTimer
                        }, e.setInterval = function (t) {
                            return !this._tickInterval && (this._tickInterval = self.setInterval(this._boundTick, t), !0)
                        }, e.clearInterval = function () {
                            return !!this._tickInterval && (self.clearInterval(this._tickInterval), !(this._tickInterval = null))
                        }, e.clearNextTick = function () {
                            return !!this._tickTimer && (self.clearTimeout(this._tickTimer), !(this._tickTimer = null))
                        }, e.tick = function () {
                            this._tickCallCount++, 1 === this._tickCallCount && (this.doTick(), 1 < this._tickCallCount && (this.clearNextTick(), this._tickTimer = self.setTimeout(this._boundTick, 0)), this._tickCallCount = 0)
                        }, e.doTick = function () { }, t
                    }(u);
                    var mt = "STOPPED",
                        vt = "STARTING",
                        yt = "IDLE",
                        At = "PAUSED",
                        _t = "KEY_LOADING",
                        bt = "FRAG_LOADING",
                        Et = "FRAG_LOADING_WAITING_RETRY",
                        Tt = "WAITING_TRACK",
                        St = "PARSING",
                        kt = "PARSED",
                        Lt = "BUFFER_FLUSHING",
                        Rt = "ENDED",
                        Ct = "ERROR",
                        wt = "WAITING_INIT_PTS",
                        Ot = "WAITING_LEVEL",
                        Pt = function (t) {
                            function e() {
                                return t.apply(this, arguments) || this
                            } ! function (t, e) {
                                t.prototype = Object.create(e.prototype), (t.prototype.constructor = t).__proto__ = e
                            }(e, t);
                            var r = e.prototype;
                            return r.doTick = function () { }, r.startLoad = function () { }, r.stopLoad = function () {
                                var t = this.fragCurrent;
                                t && (t.loader && t.loader.abort(), this.fragmentTracker.removeFragment(t)), this.demuxer && (this.demuxer.destroy(), this.demuxer = null), this.fragCurrent = null, this.fragPrevious = null, this.clearInterval(), this.clearNextTick(), this.state = mt
                            }, r._streamEnded = function (t, e) {
                                var r = this.fragCurrent,
                                    i = this.fragmentTracker;
                                if (e.live || !r || r.backtracked || r.sn !== e.endSN || t.nextStart) return !1;
                                var n = i.getState(r);
                                return n === V || n === G
                            }, r.onMediaSeeking = function () {
                                var t = this.config,
                                    e = this.media,
                                    r = this.mediaBuffer,
                                    i = this.state,
                                    n = e ? e.currentTime : null,
                                    a = $.bufferInfo(r || e, n, this.config.maxBufferHole);
                                if (Object(I.isFiniteNumber)(n) && M.logger.log("media seeking to " + n.toFixed(3)), i === bt) {
                                    var o = this.fragCurrent;
                                    if (0 === a.len && o) {
                                        var s = t.maxFragLookUpTolerance,
                                            l = o.start - s,
                                            u = o.start + o.duration + s;
                                        n < l || u < n ? (o.loader && (M.logger.log("seeking outside of buffer while fragment load in progress, cancel fragment load"), o.loader.abort()), this.fragCurrent = null, this.fragPrevious = null, this.state = yt) : M.logger.log("seeking outside of buffer but within currently loaded fragment range")
                                    }
                                } else i === Rt && (0 === a.len && (this.fragPrevious = null, this.fragCurrent = null), this.state = yt);
                                e && (this.lastCurrentTime = n), this.loadedmetadata || (this.nextLoadPosition = this.startPosition = n), this.tick()
                            }, r.onMediaEnded = function () {
                                this.startPosition = this.lastCurrentTime = 0
                            }, r.onHandlerDestroying = function () {
                                this.stopLoad(), t.prototype.onHandlerDestroying.call(this)
                            }, r.onHandlerDestroyed = function () {
                                this.state = mt, this.fragmentTracker = null
                            }, r.computeLivePosition = function (t, e) {
                                var r = void 0 !== this.config.liveSyncDuration ? this.config.liveSyncDuration : this.config.liveSyncDurationCount * e.targetduration;
                                return t + Math.max(0, e.totalduration - r)
                            }, e
                        }(gt);

                    function Dt(t, e) {
                        for (var r = 0; r < e.length; r++) {
                            var i = e[r];
                            i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), Object.defineProperty(t, i.key, i)
                        }
                    }
                    var It = function (i) {
                        function t(t, e) {
                            var r;
                            return (r = i.call(this, t, x.default.MEDIA_ATTACHED, x.default.MEDIA_DETACHING, x.default.MANIFEST_LOADING, x.default.MANIFEST_PARSED, x.default.LEVEL_LOADED, x.default.KEY_LOADED, x.default.FRAG_LOADED, x.default.FRAG_LOAD_EMERGENCY_ABORTED, x.default.FRAG_PARSING_INIT_SEGMENT, x.default.FRAG_PARSING_DATA, x.default.FRAG_PARSED, x.default.ERROR, x.default.AUDIO_TRACK_SWITCHING, x.default.AUDIO_TRACK_SWITCHED, x.default.BUFFER_CREATED, x.default.BUFFER_APPENDED, x.default.BUFFER_FLUSHED) || this).fragmentTracker = e, r.config = t.config, r.audioCodecSwap = !1, r._state = mt, r.stallReported = !1, r.gapController = null, r.altAudio = !1, r
                        } ! function (t, e) {
                            t.prototype = Object.create(e.prototype), (t.prototype.constructor = t).__proto__ = e
                        }(t, i);
                        var e = t.prototype;
                        return e.startLoad = function (t) {
                            if (this.levels) {
                                var e = this.lastCurrentTime,
                                    r = this.hls;
                                if (this.stopLoad(), this.setInterval(100), this.level = -1, this.fragLoadError = 0, !this.startFragRequested) {
                                    var i = r.startLevel; - 1 === i && (i = 0, this.bitrateTest = !0), this.level = r.nextLoadLevel = i, this.loadedmetadata = !1
                                }
                                0 < e && -1 === t && (M.logger.log("override startPosition with lastCurrentTime @" + e.toFixed(3)), t = e), this.state = yt, this.nextLoadPosition = this.startPosition = this.lastCurrentTime = t, this.tick()
                            } else this.forceStartLoad = !0, this.state = mt
                        }, e.stopLoad = function () {
                            this.forceStartLoad = !1, i.prototype.stopLoad.call(this)
                        }, e.doTick = function () {
                            switch (this.state) {
                                case Lt:
                                    this.fragLoadError = 0;
                                    break;
                                case yt:
                                    this._doTickIdle();
                                    break;
                                case Ot:
                                    var t = this.levels[this.level];
                                    t && t.details && (this.state = yt);
                                    break;
                                case Et:
                                    var e = window.performance.now(),
                                        r = this.retryDate;
                                    (!r || r <= e || this.media && this.media.seeking) && (M.logger.log("mediaController: retryDate reached, switch back to IDLE state"), this.state = yt)
                            }
                            this._checkBuffer(), this._checkFragmentChanged()
                        }, e._doTickIdle = function () {
                            var t = this.hls,
                                e = t.config,
                                r = this.media;
                            if (void 0 !== this.levelLastLoaded && (r || !this.startFragRequested && e.startFragPrefetch)) {
                                var i;
                                i = this.loadedmetadata ? r.currentTime : this.nextLoadPosition;
                                var n = t.nextLoadLevel,
                                    a = this.levels[n];
                                if (a) {
                                    var o, s = a.bitrate;
                                    o = s ? Math.max(8 * e.maxBufferSize / s, e.maxBufferLength) : e.maxBufferLength, o = Math.min(o, e.maxMaxBufferLength);
                                    var l = $.bufferInfo(this.mediaBuffer ? this.mediaBuffer : r, i, e.maxBufferHole),
                                        u = l.len;
                                    if (!(o <= u)) {
                                        M.logger.trace("buffer length of " + u.toFixed(3) + " is below max of " + o.toFixed(3) + ". checking for more payload ..."), this.level = t.nextLoadLevel = n;
                                        var d = a.details;
                                        if (!d || d.live && this.levelLastLoaded !== n) this.state = Ot;
                                        else {
                                            if (this._streamEnded(l, d)) {
                                                var c = {};
                                                return this.altAudio && (c.type = "video"), this.hls.trigger(x.default.BUFFER_EOS, c), void (this.state = Rt)
                                            }
                                            this._fetchPayloadOrEos(i, l, d)
                                        }
                                    }
                                }
                            }
                        }, e._fetchPayloadOrEos = function (t, e, r) {
                            var i = this.fragPrevious,
                                n = this.level,
                                a = r.fragments,
                                o = a.length;
                            if (0 !== o) {
                                var s, l = a[0].start,
                                    u = a[o - 1].start + a[o - 1].duration,
                                    d = e.end;
                                if (r.initSegment && !r.initSegment.data) s = r.initSegment;
                                else if (r.live) {
                                    var c = this.config.initialLiveManifestSize;
                                    if (o < c) return void M.logger.warn("Can not start playback of a level, reason: not enough fragments " + o + " < " + c);
                                    if (null === (s = this._ensureFragmentAtLivePoint(r, d, l, u, i, a, o))) return
                                } else d < l && (s = a[0]);
                                s || (s = this._findFragment(l, i, o, a, d, u, r)), s && (s.encrypted ? (M.logger.log("Loading key for " + s.sn + " of [" + r.startSN + " ," + r.endSN + "],level " + n), this._loadKey(s)) : (M.logger.log("Loading " + s.sn + " of [" + r.startSN + " ," + r.endSN + "],level " + n + ", currentTime:" + t.toFixed(3) + ",bufferEnd:" + d.toFixed(3)), this._loadFragment(s)))
                            }
                        }, e._ensureFragmentAtLivePoint = function (t, e, r, i, n, a, o) {
                            var s, l = this.hls.config,
                                u = this.media,
                                d = void 0 !== l.liveMaxLatencyDuration ? l.liveMaxLatencyDuration : l.liveMaxLatencyDurationCount * t.targetduration;
                            if (e < Math.max(r - l.maxFragLookUpTolerance, i - d)) {
                                var c = this.liveSyncPosition = this.computeLivePosition(r, t);
                                e = c, u && !u.paused && u.readyState && u.duration > c && c > u.currentTime && (M.logger.log("buffer end: " + e.toFixed(3) + " is located too far from the end of live sliding playlist, reset currentTime to : " + c.toFixed(3)), u.currentTime = c), this.nextLoadPosition = c
                            }
                            if (t.PTSKnown && i < e && u && u.readyState) return null;
                            if (this.startFragRequested && !t.PTSKnown) {
                                if (n)
                                    if (t.hasProgramDateTime) M.logger.log("live playlist, switching playlist, load frag with same PDT: " + n.programDateTime), s = ct(a, n.endProgramDateTime, l.maxFragLookUpTolerance);
                                    else {
                                        var f = n.sn + 1;
                                        if (f >= t.startSN && f <= t.endSN) {
                                            var h = a[f - t.startSN];
                                            n.cc === h.cc && (s = h, M.logger.log("live playlist, switching playlist, load frag with next SN: " + s.sn))
                                        }
                                        s || (s = H.search(a, function (t) {
                                            return n.cc - t.cc
                                        })) && M.logger.log("live playlist, switching playlist, load frag with same CC: " + s.sn)
                                    } s || (s = a[Math.min(o - 1, Math.round(o / 2))], M.logger.log("live playlist, switching playlist, unknown, load middle frag : " + s.sn))
                            }
                            return s
                        }, e._findFragment = function (t, e, r, i, n, a, o) {
                            var s, l = this.hls.config;
                            n < a ? s = ft(e, i, n, n > a - l.maxFragLookUpTolerance ? 0 : l.maxFragLookUpTolerance) : s = i[r - 1];
                            if (s) {
                                var u = s.sn - o.startSN,
                                    d = e && s.level === e.level,
                                    c = i[u - 1],
                                    f = i[1 + u];
                                if (e && s.sn === e.sn)
                                    if (d && !s.backtracked)
                                        if (s.sn < o.endSN) {
                                            var h = e.deltaPTS;
                                            h && h > l.maxBufferHole && e.dropped && u ? (s = c, M.logger.warn("Previous fragment was dropped with large PTS gap between audio and video. Maybe fragment is not starting with a keyframe? Loading previous one to try to overcome this")) : (s = f, M.logger.log("Re-loading fragment with SN: " + s.sn))
                                        } else s = null;
                                    else s.backtracked && (f && f.backtracked ? (M.logger.warn("Already backtracked from fragment " + f.sn + ", will not backtrack to fragment " + s.sn + ". Loading fragment " + f.sn), s = f) : (M.logger.warn("Loaded fragment with dropped frames, backtracking 1 segment to find a keyframe"), s.dropped = 0, c ? (s = c).backtracked = !0 : u && (s = null)))
                            }
                            return s
                        }, e._loadKey = function (t) {
                            this.state = _t, this.hls.trigger(x.default.KEY_LOADING, {
                                frag: t
                            })
                        }, e._loadFragment = function (t) {
                            var e = this.fragmentTracker.getState(t);
                            "initSegment" !== (this.fragCurrent = t).sn && (this.startFragRequested = !0), Object(I.isFiniteNumber)(t.sn) && !t.bitrateTest && (this.nextLoadPosition = t.start + t.duration), t.backtracked || e === j || e === V ? (t.autoLevel = this.hls.autoLevelEnabled, t.bitrateTest = this.bitrateTest, this.hls.trigger(x.default.FRAG_LOADING, {
                                frag: t
                            }), this.demuxer || (this.demuxer = new et(this.hls, "main")), this.state = bt) : e === K && this._reduceMaxBufferLength(t.duration) && this.fragmentTracker.removeFragment(t)
                        }, e.getBufferedFrag = function (t) {
                            return this.fragmentTracker.getBufferedFrag(t, a.MAIN)
                        }, e.followingBufferedFrag = function (t) {
                            return t ? this.getBufferedFrag(t.endPTS + .5) : null
                        }, e._checkFragmentChanged = function () {
                            var t, e, r = this.media;
                            if (r && r.readyState && !1 === r.seeking && ((e = r.currentTime) > this.lastCurrentTime && (this.lastCurrentTime = e), $.isBuffered(r, e) ? t = this.getBufferedFrag(e) : $.isBuffered(r, e + .1) && (t = this.getBufferedFrag(e + .1)), t)) {
                                var i = t;
                                if (i !== this.fragPlaying) {
                                    this.hls.trigger(x.default.FRAG_CHANGED, {
                                        frag: i
                                    });
                                    var n = i.level;
                                    this.fragPlaying && this.fragPlaying.level === n || this.hls.trigger(x.default.LEVEL_SWITCHED, {
                                        level: n
                                    }), this.fragPlaying = i
                                }
                            }
                        }, e.immediateLevelSwitch = function () {
                            if (M.logger.log("immediateLevelSwitch"), !this.immediateSwitch) {
                                this.immediateSwitch = !0;
                                var t, e = this.media;
                                e ? (t = e.paused, e.pause()) : t = !0, this.previouslyPaused = t
                            }
                            var r = this.fragCurrent;
                            r && r.loader && r.loader.abort(), this.fragCurrent = null, this.flushMainBuffer(0, Number.POSITIVE_INFINITY)
                        }, e.immediateLevelSwitchEnd = function () {
                            var t = this.media;
                            t && t.buffered.length && (this.immediateSwitch = !1, $.isBuffered(t, t.currentTime) && (t.currentTime -= 1e-4), this.previouslyPaused || t.play())
                        }, e.nextLevelSwitch = function () {
                            var t = this.media;
                            if (t && t.readyState) {
                                var e, r, i;
                                if ((r = this.getBufferedFrag(t.currentTime)) && 1 < r.startPTS && this.flushMainBuffer(0, r.startPTS - 1), t.paused) e = 0;
                                else {
                                    var n = this.hls.nextLoadLevel,
                                        a = this.levels[n],
                                        o = this.fragLastKbps;
                                    e = o && this.fragCurrent ? this.fragCurrent.duration * a.bitrate / (1e3 * o) + 1 : 0
                                }
                                if ((i = this.getBufferedFrag(t.currentTime + e)) && (i = this.followingBufferedFrag(i))) {
                                    var s = this.fragCurrent;
                                    s && s.loader && s.loader.abort(), this.fragCurrent = null, this.flushMainBuffer(i.maxStartPTS, Number.POSITIVE_INFINITY)
                                }
                            }
                        }, e.flushMainBuffer = function (t, e) {
                            this.state = Lt;
                            var r = {
                                startOffset: t,
                                endOffset: e
                            };
                            this.altAudio && (r.type = "video"), this.hls.trigger(x.default.BUFFER_FLUSHING, r)
                        }, e.onMediaAttached = function (t) {
                            var e = this.media = this.mediaBuffer = t.media;
                            this.onvseeking = this.onMediaSeeking.bind(this), this.onvseeked = this.onMediaSeeked.bind(this), this.onvended = this.onMediaEnded.bind(this), e.addEventListener("seeking", this.onvseeking), e.addEventListener("seeked", this.onvseeked), e.addEventListener("ended", this.onvended);
                            var r = this.config;
                            this.levels && r.autoStartLoad && this.hls.startLoad(r.startPosition), this.gapController = new pt(r, e, this.fragmentTracker, this.hls)
                        }, e.onMediaDetaching = function () {
                            var t = this.media;
                            t && t.ended && (M.logger.log("MSE detaching and video ended, reset startPosition"), this.startPosition = this.lastCurrentTime = 0);
                            var e = this.levels;
                            e && e.forEach(function (t) {
                                t.details && t.details.fragments.forEach(function (t) {
                                    t.backtracked = void 0
                                })
                            }), t && (t.removeEventListener("seeking", this.onvseeking), t.removeEventListener("seeked", this.onvseeked), t.removeEventListener("ended", this.onvended), this.onvseeking = this.onvseeked = this.onvended = null), this.fragmentTracker.removeAllFragments(), this.media = this.mediaBuffer = null, this.loadedmetadata = !1, this.stopLoad()
                        }, e.onMediaSeeked = function () {
                            var t = this.media,
                                e = t ? t.currentTime : void 0;
                            Object(I.isFiniteNumber)(e) && M.logger.log("media seeked to " + e.toFixed(3)), this.tick()
                        }, e.onManifestLoading = function () {
                            M.logger.log("trigger BUFFER_RESET"), this.hls.trigger(x.default.BUFFER_RESET), this.fragmentTracker.removeAllFragments(), this.stalled = !1, this.startPosition = this.lastCurrentTime = 0
                        }, e.onManifestParsed = function (t) {
                            var e, r = !1,
                                i = !1;
                            t.levels.forEach(function (t) {
                                (e = t.audioCodec) && (-1 !== e.indexOf("mp4a.40.2") && (r = !0), -1 !== e.indexOf("mp4a.40.5") && (i = !0))
                            }), this.audioCodecSwitch = r && i, this.audioCodecSwitch && M.logger.log("both AAC/HE-AAC audio found in levels; declaring level codec as HE-AAC"), this.altAudio = t.altAudio, this.levels = t.levels, this.startFragRequested = !1;
                            var n = this.config;
                            (n.autoStartLoad || this.forceStartLoad) && this.hls.startLoad(n.startPosition)
                        }, e.onLevelLoaded = function (t) {
                            var e = t.details,
                                r = t.level,
                                i = this.levels[this.levelLastLoaded],
                                n = this.levels[r],
                                a = e.totalduration,
                                o = 0;
                            if (M.logger.log("level " + r + " loaded [" + e.startSN + "," + e.endSN + "],duration:" + a), e.live) {
                                var s = n.details;
                                s && 0 < e.fragments.length ? (at(s, e), o = e.fragments[0].start, this.liveSyncPosition = this.computeLivePosition(o, s), e.PTSKnown && Object(I.isFiniteNumber)(o) ? M.logger.log("live playlist sliding:" + o.toFixed(3)) : (M.logger.log("live playlist - outdated PTS, unknown sliding"), dt(this.fragPrevious, i, e))) : (M.logger.log("live playlist - first load, unknown sliding"), e.PTSKnown = !1, dt(this.fragPrevious, i, e))
                            } else e.PTSKnown = !1;
                            if (n.details = e, this.levelLastLoaded = r, this.hls.trigger(x.default.LEVEL_UPDATED, {
                                details: e,
                                level: r
                            }), !1 === this.startFragRequested) {
                                if (-1 === this.startPosition || -1 === this.lastCurrentTime) {
                                    var l = e.startTimeOffset;
                                    Object(I.isFiniteNumber)(l) ? (l < 0 && (M.logger.log("negative start time offset " + l + ", count from end of last fragment"), l = o + a + l), M.logger.log("start time offset found in playlist, adjust startPosition to " + l), this.startPosition = l) : e.live ? (this.startPosition = this.computeLivePosition(o, e), M.logger.log("configure startPosition to " + this.startPosition)) : this.startPosition = 0, this.lastCurrentTime = this.startPosition
                                }
                                this.nextLoadPosition = this.startPosition
                            }
                            this.state === Ot && (this.state = yt), this.tick()
                        }, e.onKeyLoaded = function () {
                            this.state === _t && (this.state = yt, this.tick())
                        }, e.onFragLoaded = function (t) {
                            var e = this.fragCurrent,
                                r = this.hls,
                                i = this.levels,
                                n = this.media,
                                a = t.frag;
                            if (this.state === bt && e && "main" === a.type && a.level === e.level && a.sn === e.sn) {
                                var o = t.stats,
                                    s = i[e.level],
                                    l = s.details;
                                if (this.bitrateTest = !1, this.stats = o, M.logger.log("Loaded " + e.sn + " of [" + l.startSN + " ," + l.endSN + "],level " + e.level), a.bitrateTest && r.nextLoadLevel) this.state = yt, this.startFragRequested = !1, o.tparsed = o.tbuffered = window.performance.now(), r.trigger(x.default.FRAG_BUFFERED, {
                                    stats: o,
                                    frag: e,
                                    id: "main"
                                }), this.tick();
                                else if ("initSegment" === a.sn) this.state = yt, o.tparsed = o.tbuffered = window.performance.now(), l.initSegment.data = t.payload, r.trigger(x.default.FRAG_BUFFERED, {
                                    stats: o,
                                    frag: e,
                                    id: "main"
                                }), this.tick();
                                else {
                                    M.logger.log("Parsing " + e.sn + " of [" + l.startSN + " ," + l.endSN + "],level " + e.level + ", cc " + e.cc), this.state = St, this.pendingBuffering = !0, this.appended = !1, a.bitrateTest && (a.bitrateTest = !1, this.fragmentTracker.onFragLoaded({
                                        frag: a
                                    }));
                                    var u = !(n && n.seeking) && (l.PTSKnown || !l.live),
                                        d = l.initSegment ? l.initSegment.data : [],
                                        c = this._getAudioCodec(s);
                                    (this.demuxer = this.demuxer || new et(this.hls, "main")).push(t.payload, d, c, s.videoCodec, e, l.totalduration, u)
                                }
                            }
                            this.fragLoadError = 0
                        }, e.onFragParsingInitSegment = function (t) {
                            var e = this.fragCurrent,
                                r = t.frag;
                            if (e && "main" === t.id && r.sn === e.sn && r.level === e.level && this.state === St) {
                                var i, n, a = t.tracks;
                                if (a.audio && this.altAudio && delete a.audio, n = a.audio) {
                                    var o = this.levels[this.level].audioCodec,
                                        s = navigator.userAgent.toLowerCase();
                                    o && this.audioCodecSwap && (M.logger.log("swapping playlist audio codec"), o = -1 !== o.indexOf("mp4a.40.5") ? "mp4a.40.2" : "mp4a.40.5"), this.audioCodecSwitch && 1 !== n.metadata.channelCount && -1 === s.indexOf("firefox") && (o = "mp4a.40.5"), -1 !== s.indexOf("android") && "audio/mpeg" !== n.container && (o = "mp4a.40.2", M.logger.log("Android: force audio codec to " + o)), n.levelCodec = o, n.id = t.id
                                }
                                for (i in (n = a.video) && (n.levelCodec = this.levels[this.level].videoCodec, n.id = t.id), this.hls.trigger(x.default.BUFFER_CODECS, a), a) {
                                    n = a[i], M.logger.log("main track:" + i + ",container:" + n.container + ",codecs[level/parsed]=[" + n.levelCodec + "/" + n.codec + "]");
                                    var l = n.initSegment;
                                    l && (this.appended = !0, this.pendingBuffering = !0, this.hls.trigger(x.default.BUFFER_APPENDING, {
                                        type: i,
                                        data: l,
                                        parent: "main",
                                        content: "initSegment"
                                    }))
                                }
                                this.tick()
                            }
                        }, e.onFragParsingData = function (e) {
                            var r = this,
                                t = this.fragCurrent,
                                i = e.frag;
                            if (t && "main" === e.id && i.sn === t.sn && i.level === t.level && ("audio" !== e.type || !this.altAudio) && this.state === St) {
                                var n = this.levels[this.level],
                                    a = t;
                                if (Object(I.isFiniteNumber)(e.endPTS) || (e.endPTS = e.startPTS + t.duration, e.endDTS = e.startDTS + t.duration), !0 === e.hasAudio && a.addElementaryStream(h.AUDIO), !0 === e.hasVideo && a.addElementaryStream(h.VIDEO), M.logger.log("Parsed " + e.type + ",PTS:[" + e.startPTS.toFixed(3) + "," + e.endPTS.toFixed(3) + "],DTS:[" + e.startDTS.toFixed(3) + "/" + e.endDTS.toFixed(3) + "],nb:" + e.nb + ",dropped:" + (e.dropped || 0)), "video" === e.type)
                                    if (a.dropped = e.dropped, a.dropped)
                                        if (a.backtracked) M.logger.warn("Already backtracked on this fragment, appending with the gap", a.sn);
                                        else {
                                            var o = n.details;
                                            if (!o || a.sn !== o.startSN) return M.logger.warn("missing video frame(s), backtracking fragment", a.sn), this.fragmentTracker.removeFragment(a), a.backtracked = !0, this.nextLoadPosition = e.startPTS, this.state = yt, this.fragPrevious = a, void this.tick();
                                            M.logger.warn("missing video frame(s) on first frag, appending with gap", a.sn)
                                        }
                                    else a.backtracked = !1;
                                var s = nt(n.details, a, e.startPTS, e.endPTS, e.startDTS, e.endDTS),
                                    l = this.hls;
                                l.trigger(x.default.LEVEL_PTS_UPDATED, {
                                    details: n.details,
                                    level: this.level,
                                    drift: s,
                                    type: e.type,
                                    start: e.startPTS,
                                    end: e.endPTS
                                }), [e.data1, e.data2].forEach(function (t) {
                                    t && t.length && r.state === St && (r.appended = !0, r.pendingBuffering = !0, l.trigger(x.default.BUFFER_APPENDING, {
                                        type: e.type,
                                        data: t,
                                        parent: "main",
                                        content: "data"
                                    }))
                                }), this.tick()
                            }
                        }, e.onFragParsed = function (t) {
                            var e = this.fragCurrent,
                                r = t.frag;
                            e && "main" === t.id && r.sn === e.sn && r.level === e.level && this.state === St && (this.stats.tparsed = window.performance.now(), this.state = kt, this._checkAppendedParsed())
                        }, e.onAudioTrackSwitching = function (t) {
                            var e = !!t.url,
                                r = t.id;
                            if (!e) {
                                if (this.mediaBuffer !== this.media) {
                                    M.logger.log("switching on main audio, use media.buffered to schedule main fragment loading"), this.mediaBuffer = this.media;
                                    var i = this.fragCurrent;
                                    i.loader && (M.logger.log("switching to main audio track, cancel main fragment load"), i.loader.abort()), this.fragCurrent = null, this.fragPrevious = null, this.demuxer && (this.demuxer.destroy(), this.demuxer = null), this.state = yt
                                }
                                var n = this.hls;
                                n.trigger(x.default.BUFFER_FLUSHING, {
                                    startOffset: 0,
                                    endOffset: Number.POSITIVE_INFINITY,
                                    type: "audio"
                                }), n.trigger(x.default.AUDIO_TRACK_SWITCHED, {
                                    id: r
                                }), this.altAudio = !1
                            }
                        }, e.onAudioTrackSwitched = function (t) {
                            var e = t.id,
                                r = !!this.hls.audioTracks[e].url;
                            if (r) {
                                var i = this.videoBuffer;
                                i && this.mediaBuffer !== i && (M.logger.log("switching on alternate audio, use video.buffered to schedule main fragment loading"), this.mediaBuffer = i)
                            }
                            this.altAudio = r, this.tick()
                        }, e.onBufferCreated = function (t) {
                            var e, r, i = t.tracks,
                                n = !1;
                            for (var a in i) {
                                var o = i[a];
                                "main" === o.id ? (e = o, "video" === (r = a) && (this.videoBuffer = i[a].buffer)) : n = !0
                            }
                            n && e ? (M.logger.log("alternate track found, use " + r + ".buffered to schedule main fragment loading"), this.mediaBuffer = e.buffer) : this.mediaBuffer = this.media
                        }, e.onBufferAppended = function (t) {
                            if ("main" === t.parent) {
                                var e = this.state;
                                e !== St && e !== kt || (this.pendingBuffering = 0 < t.pending, this._checkAppendedParsed())
                            }
                        }, e._checkAppendedParsed = function () {
                            if (!(this.state !== kt || this.appended && this.pendingBuffering)) {
                                var t = this.fragCurrent;
                                if (t) {
                                    var e = this.mediaBuffer ? this.mediaBuffer : this.media;
                                    M.logger.log("main buffered : " + lt.toString(e.buffered)), this.fragPrevious = t;
                                    var r = this.stats;
                                    r.tbuffered = window.performance.now(), this.fragLastKbps = Math.round(8 * r.total / (r.tbuffered - r.tfirst)), this.hls.trigger(x.default.FRAG_BUFFERED, {
                                        stats: r,
                                        frag: t,
                                        id: "main"
                                    }), this.state = yt
                                }
                                this.tick()
                            }
                        }, e.onError = function (t) {
                            var e = t.frag || this.fragCurrent;
                            if (!e || "main" === e.type) {
                                var r = !!this.media && $.isBuffered(this.media, this.media.currentTime) && $.isBuffered(this.media, this.media.currentTime + .5);
                                switch (t.details) {
                                    case f.ErrorDetails.FRAG_LOAD_ERROR:
                                    case f.ErrorDetails.FRAG_LOAD_TIMEOUT:
                                    case f.ErrorDetails.KEY_LOAD_ERROR:
                                    case f.ErrorDetails.KEY_LOAD_TIMEOUT:
                                        if (!t.fatal)
                                            if (this.fragLoadError + 1 <= this.config.fragLoadingMaxRetry) {
                                                var i = Math.min(Math.pow(2, this.fragLoadError) * this.config.fragLoadingRetryDelay, this.config.fragLoadingMaxRetryTimeout);
                                                M.logger.warn("mediaController: frag loading failed, retry in " + i + " ms"), this.retryDate = window.performance.now() + i, this.loadedmetadata || (this.startFragRequested = !1, this.nextLoadPosition = this.startPosition), this.fragLoadError++, this.state = Et
                                            } else M.logger.error("mediaController: " + t.details + " reaches max retry, redispatch as fatal ..."), t.fatal = !0, this.state = Ct;
                                        break;
                                    case f.ErrorDetails.LEVEL_LOAD_ERROR:
                                    case f.ErrorDetails.LEVEL_LOAD_TIMEOUT:
                                        this.state !== Ct && (t.fatal ? (this.state = Ct, M.logger.warn("streamController: " + t.details + ",switch to " + this.state + " state ...")) : t.levelRetry || this.state !== Ot || (this.state = yt));
                                        break;
                                    case f.ErrorDetails.BUFFER_FULL_ERROR:
                                        "main" !== t.parent || this.state !== St && this.state !== kt || (r ? (this._reduceMaxBufferLength(this.config.maxBufferLength), this.state = yt) : (M.logger.warn("buffer full error also media.currentTime is not buffered, flush everything"), this.fragCurrent = null, this.flushMainBuffer(0, Number.POSITIVE_INFINITY)))
                                }
                            }
                        }, e._reduceMaxBufferLength = function (t) {
                            var e = this.config;
                            return e.maxMaxBufferLength >= t && (e.maxMaxBufferLength /= 2, M.logger.warn("main:reduce max buffer length to " + e.maxMaxBufferLength + "s"), !0)
                        }, e._checkBuffer = function () {
                            var t = this.media;
                            if (t && 0 !== t.readyState) {
                                var e = (this.mediaBuffer ? this.mediaBuffer : t).buffered;
                                !this.loadedmetadata && e.length ? (this.loadedmetadata = !0, this._seekToStartPos()) : this.immediateSwitch ? this.immediateLevelSwitchEnd() : this.gapController.poll(this.lastCurrentTime, e)
                            }
                        }, e.onFragLoadEmergencyAborted = function () {
                            this.state = yt, this.loadedmetadata || (this.startFragRequested = !1, this.nextLoadPosition = this.startPosition), this.tick()
                        }, e.onBufferFlushed = function () {
                            var t = this.mediaBuffer ? this.mediaBuffer : this.media;
                            t && this.fragmentTracker.detectEvictedFragments(h.VIDEO, t.buffered), this.state = yt, this.fragPrevious = null
                        }, e.swapAudioCodec = function () {
                            this.audioCodecSwap = !this.audioCodecSwap
                        }, e._seekToStartPos = function () {
                            var t = this.media,
                                e = t.currentTime,
                                r = t.seeking ? e : this.startPosition;
                            e !== r && 0 <= r && (M.logger.log("target start position not buffered, seek to buffered.start(0) " + r + " from current time " + e + " "), t.currentTime = r)
                        }, e._getAudioCodec = function (t) {
                            var e = this.config.defaultAudioCodec || t.audioCodec;
                            return this.audioCodecSwap && (M.logger.log("swapping playlist audio codec"), e && (e = -1 !== e.indexOf("mp4a.40.5") ? "mp4a.40.2" : "mp4a.40.5")), e
                        },
                            function (t, e, r) {
                                e && Dt(t.prototype, e), r && Dt(t, r)
                            }(t, [{
                                key: "state",
                                set: function (t) {
                                    if (this.state !== t) {
                                        var e = this.state;
                                        this._state = t, M.logger.log("main stream-controller: " + e + "->" + t), this.hls.trigger(x.default.STREAM_STATE_TRANSITION, {
                                            previousState: e,
                                            nextState: t
                                        })
                                    }
                                },
                                get: function () {
                                    return this._state
                                }
                            }, {
                                key: "currentLevel",
                                get: function () {
                                    var t = this.media;
                                    if (t) {
                                        var e = this.getBufferedFrag(t.currentTime);
                                        if (e) return e.level
                                    }
                                    return -1
                                }
                            }, {
                                key: "nextBufferedFrag",
                                get: function () {
                                    var t = this.media;
                                    return t ? this.followingBufferedFrag(this.getBufferedFrag(t.currentTime)) : null
                                }
                            }, {
                                key: "nextLevel",
                                get: function () {
                                    var t = this.nextBufferedFrag;
                                    return t ? t.level : -1
                                }
                            }, {
                                key: "liveSyncPosition",
                                get: function () {
                                    return this._liveSyncPosition
                                },
                                set: function (t) {
                                    this._liveSyncPosition = t
                                }
                            }]), t
                    }(Pt);

                    function xt(t, e) {
                        for (var r = 0; r < e.length; r++) {
                            var i = e[r];
                            i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), Object.defineProperty(t, i.key, i)
                        }
                    }
                    window.performance;
                    var Mt, Nt = function (r) {
                        function t(t) {
                            var e;
                            return (e = r.call(this, t, x.default.MANIFEST_LOADED, x.default.LEVEL_LOADED, x.default.AUDIO_TRACK_SWITCHED, x.default.FRAG_LOADED, x.default.ERROR) || this).canload = !1, e.currentLevelIndex = null, e.manualLevelIndex = -1, e.timer = null, Mt = /chrome|firefox/.test(navigator.userAgent.toLowerCase()), e
                        } ! function (t, e) {
                            t.prototype = Object.create(e.prototype), (t.prototype.constructor = t).__proto__ = e
                        }(t, r);
                        var e = t.prototype;
                        return e.onHandlerDestroying = function () {
                            this.clearTimer(), this.manualLevelIndex = -1
                        }, e.clearTimer = function () {
                            null !== this.timer && (clearTimeout(this.timer), this.timer = null)
                        }, e.startLoad = function () {
                            var t = this._levels;
                            this.canload = !0, this.levelRetryCount = 0, t && t.forEach(function (t) {
                                t.loadError = 0;
                                var e = t.details;
                                e && e.live && (t.details = void 0)
                            }), null !== this.timer && this.loadLevel()
                        }, e.stopLoad = function () {
                            this.canload = !1
                        }, e.onManifestLoaded = function (t) {
                            var e, r = [],
                                i = [],
                                n = {},
                                a = null,
                                o = !1,
                                s = !1;
                            if (t.levels.forEach(function (t) {
                                var e = t.attrs;
                                t.loadError = 0, t.fragmentError = !1, o = o || !!t.videoCodec, s = s || !!t.audioCodec, Mt && t.audioCodec && -1 !== t.audioCodec.indexOf("mp4a.40.34") && (t.audioCodec = void 0), (a = n[t.bitrate]) ? a.url.push(t.url) : (t.url = [t.url], t.urlId = 0, n[t.bitrate] = t, r.push(t)), e && (e.AUDIO && (s = !0, rt(a || t, "audio", e.AUDIO)), e.SUBTITLES && rt(a || t, "text", e.SUBTITLES))
                            }), o && s && (r = r.filter(function (t) {
                                return !!t.videoCodec
                            })), r = r.filter(function (t) {
                                var e = t.audioCodec,
                                    r = t.videoCodec;
                                return (!e || b(e, "audio")) && (!r || b(r, "video"))
                            }), t.audioTracks && (i = t.audioTracks.filter(function (t) {
                                return !t.audioCodec || b(t.audioCodec, "audio")
                            })).forEach(function (t, e) {
                                t.id = e
                            }), 0 < r.length) {
                                e = r[0].bitrate, r.sort(function (t, e) {
                                    return t.bitrate - e.bitrate
                                }), this._levels = r;
                                for (var l = 0; l < r.length; l++)
                                    if (r[l].bitrate === e) {
                                        this._firstLevel = l, M.logger.log("manifest loaded," + r.length + " level(s) found, first bitrate:" + e);
                                        break
                                    } this.hls.trigger(x.default.MANIFEST_PARSED, {
                                        levels: r,
                                        audioTracks: i,
                                        firstLevel: this._firstLevel,
                                        stats: t.stats,
                                        audio: s,
                                        video: o,
                                        altAudio: i.some(function (t) {
                                            return !!t.url
                                        })
                                    })
                            } else this.hls.trigger(x.default.ERROR, {
                                type: f.ErrorTypes.MEDIA_ERROR,
                                details: f.ErrorDetails.MANIFEST_INCOMPATIBLE_CODECS_ERROR,
                                fatal: !0,
                                url: this.hls.url,
                                reason: "no level with compatible codecs found in manifest"
                            })
                        }, e.setLevelInternal = function (t) {
                            var e = this._levels,
                                r = this.hls;
                            if (0 <= t && t < e.length) {
                                if (this.clearTimer(), this.currentLevelIndex !== t) {
                                    M.logger.log("switching to level " + t);
                                    var i = e[this.currentLevelIndex = t];
                                    i.level = t, r.trigger(x.default.LEVEL_SWITCHING, i)
                                }
                                var n = e[t],
                                    a = n.details;
                                if (!a || a.live) {
                                    var o = n.urlId;
                                    r.trigger(x.default.LEVEL_LOADING, {
                                        url: n.url[o],
                                        level: t,
                                        id: o
                                    })
                                }
                            } else r.trigger(x.default.ERROR, {
                                type: f.ErrorTypes.OTHER_ERROR,
                                details: f.ErrorDetails.LEVEL_SWITCH_ERROR,
                                level: t,
                                fatal: !1,
                                reason: "invalid level idx"
                            })
                        }, e.onError = function (t) {
                            if (t.fatal) t.type === f.ErrorTypes.NETWORK_ERROR && this.clearTimer();
                            else {
                                var e, r = !1,
                                    i = !1;
                                switch (t.details) {
                                    case f.ErrorDetails.FRAG_LOAD_ERROR:
                                    case f.ErrorDetails.FRAG_LOAD_TIMEOUT:
                                    case f.ErrorDetails.KEY_LOAD_ERROR:
                                    case f.ErrorDetails.KEY_LOAD_TIMEOUT:
                                        e = t.frag.level, i = !0;
                                        break;
                                    case f.ErrorDetails.LEVEL_LOAD_ERROR:
                                    case f.ErrorDetails.LEVEL_LOAD_TIMEOUT:
                                        e = t.context.level, r = !0;
                                        break;
                                    case f.ErrorDetails.REMUX_ALLOC_ERROR:
                                        e = t.level, r = !0
                                }
                                void 0 !== e && this.recoverLevel(t, e, r, i)
                            }
                        }, e.recoverLevel = function (t, e, r, i) {
                            var n, a, o, s = this,
                                l = this.hls.config,
                                u = t.details,
                                d = this._levels[e];
                            if (d.loadError++, d.fragmentError = i, r) {
                                if (!(this.levelRetryCount + 1 <= l.levelLoadingMaxRetry)) return M.logger.error("level controller, cannot recover from " + u + " error"), this.currentLevelIndex = null, this.clearTimer(), void (t.fatal = !0);
                                a = Math.min(Math.pow(2, this.levelRetryCount) * l.levelLoadingRetryDelay, l.levelLoadingMaxRetryTimeout), this.timer = setTimeout(function () {
                                    return s.loadLevel()
                                }, a), t.levelRetry = !0, this.levelRetryCount++, M.logger.warn("level controller, " + u + ", retry in " + a + " ms, current retry count is " + this.levelRetryCount)
                            } (r || i) && (1 < (n = d.url.length) && d.loadError < n ? (d.urlId = (d.urlId + 1) % n, d.details = void 0, M.logger.warn("level controller, " + u + " for level " + e + ": switching to redundant URL-id " + d.urlId)) : -1 === this.manualLevelIndex ? (o = 0 === e ? this._levels.length - 1 : e - 1, M.logger.warn("level controller, " + u + ": switch to " + o), this.hls.nextAutoLevel = this.currentLevelIndex = o) : i && (M.logger.warn("level controller, " + u + ": reload a fragment"), this.currentLevelIndex = null))
                        }, e.onFragLoaded = function (t) {
                            var e = t.frag;
                            if (void 0 !== e && "main" === e.type) {
                                var r = this._levels[e.level];
                                void 0 !== r && (r.fragmentError = !1, r.loadError = 0, this.levelRetryCount = 0)
                            }
                        }, e.onLevelLoaded = function (t) {
                            var e = this,
                                r = t.level,
                                i = t.details;
                            if (r === this.currentLevelIndex) {
                                var n = this._levels[r];
                                if (n.fragmentError || (n.loadError = 0, this.levelRetryCount = 0), i.live) {
                                    var a = st(n.details, i, t.stats.trequest);
                                    M.logger.log("live playlist, reload in " + Math.round(a) + " ms"), this.timer = setTimeout(function () {
                                        return e.loadLevel()
                                    }, a)
                                } else this.clearTimer()
                            }
                        }, e.onAudioTrackSwitched = function (t) {
                            var e = this.hls.audioTracks[t.id].groupId,
                                r = this.hls.levels[this.currentLevelIndex];
                            if (r && r.audioGroupIds) {
                                for (var i = -1, n = 0; n < r.audioGroupIds.length; n++)
                                    if (r.audioGroupIds[n] === e) {
                                        i = n;
                                        break
                                    } i !== r.urlId && (r.urlId = i, this.startLoad())
                            }
                        }, e.loadLevel = function () {
                            if (M.logger.debug("call to loadLevel"), null !== this.currentLevelIndex && this.canload) {
                                var t = this._levels[this.currentLevelIndex];
                                if ("object" == typeof t && 0 < t.url.length) {
                                    var e = this.currentLevelIndex,
                                        r = t.urlId,
                                        i = t.url[r];
                                    M.logger.log("Attempt loading level index " + e + " with URL-id " + r), this.hls.trigger(x.default.LEVEL_LOADING, {
                                        url: i,
                                        level: e,
                                        id: r
                                    })
                                }
                            }
                        },
                            function (t, e, r) {
                                e && xt(t.prototype, e), r && xt(t, r)
                            }(t, [{
                                key: "levels",
                                get: function () {
                                    return this._levels
                                }
                            }, {
                                key: "level",
                                get: function () {
                                    return this.currentLevelIndex
                                },
                                set: function (t) {
                                    var e = this._levels;
                                    e && (t = Math.min(t, e.length - 1), this.currentLevelIndex === t && e[t].details || this.setLevelInternal(t))
                                }
                            }, {
                                key: "manualLevel",
                                get: function () {
                                    return this.manualLevelIndex
                                },
                                set: function (t) {
                                    this.manualLevelIndex = t, void 0 === this._startLevel && (this._startLevel = t), -1 !== t && (this.level = t)
                                }
                            }, {
                                key: "firstLevel",
                                get: function () {
                                    return this._firstLevel
                                },
                                set: function (t) {
                                    this._firstLevel = t
                                }
                            }, {
                                key: "startLevel",
                                get: function () {
                                    if (void 0 !== this._startLevel) return this._startLevel;
                                    var t = this.hls.config.startLevel;
                                    return void 0 !== t ? t : this._firstLevel
                                },
                                set: function (t) {
                                    this._startLevel = t
                                }
                            }, {
                                key: "nextLoadLevel",
                                get: function () {
                                    return -1 !== this.manualLevelIndex ? this.manualLevelIndex : this.hls.nextAutoLevel
                                },
                                set: function (t) {
                                    this.level = t, -1 === this.manualLevelIndex && (this.hls.nextAutoLevel = t)
                                }
                            }]), t
                    }(u),
                        Ft = r("./src/demux/id3.js");

                    function Bt(t, e) {
                        var r;
                        try {
                            r = new Event("addtrack")
                        } catch (t) {
                            (r = document.createEvent("Event")).initEvent("addtrack", !1, !1)
                        }
                        r.track = t, e.dispatchEvent(r)
                    }

                    function Ut(t) {
                        if (t && t.cues)
                            for (; 0 < t.cues.length;) t.removeCue(t.cues[0])
                    }
                    var jt = function (r) {
                        function t(t) {
                            var e;
                            return (e = r.call(this, t, x.default.MEDIA_ATTACHED, x.default.MEDIA_DETACHING, x.default.FRAG_PARSING_METADATA, x.default.LIVE_BACK_BUFFER_REACHED) || this).id3Track = void 0, e.media = void 0, e
                        } ! function (t, e) {
                            t.prototype = Object.create(e.prototype), (t.prototype.constructor = t).__proto__ = e
                        }(t, r);
                        var e = t.prototype;
                        return e.destroy = function () {
                            u.prototype.destroy.call(this)
                        }, e.onMediaAttached = function (t) {
                            this.media = t.media, this.media
                        }, e.onMediaDetaching = function () {
                            Ut(this.id3Track), this.id3Track = void 0, this.media = void 0
                        }, e.getID3Track = function (t) {
                            for (var e = 0; e < t.length; e++) {
                                var r = t[e];
                                if ("metadata" === r.kind && "id3" === r.label) return Bt(r, this.media), r
                            }
                            return this.media.addTextTrack("metadata", "id3")
                        }, e.onFragParsingMetadata = function (t) {
                            var e = t.frag,
                                r = t.samples;
                            this.id3Track || (this.id3Track = this.getID3Track(this.media.textTracks), this.id3Track.mode = "hidden");
                            for (var i = window.WebKitDataCue || window.VTTCue || window.TextTrackCue, n = 0; n < r.length; n++) {
                                var a = Ft.default.getID3Frames(r[n].data);
                                if (a) {
                                    var o = r[n].pts,
                                        s = n < r.length - 1 ? r[n + 1].pts : e.endPTS;
                                    o === s ? s += 1e-4 : s < o && (M.logger.warn("detected an id3 sample with endTime < startTime, adjusting endTime to (startTime + 0.25)"), s = o + .25);
                                    for (var l = 0; l < a.length; l++) {
                                        var u = a[l];
                                        if (!Ft.default.isTimeStampFrame(u)) {
                                            var d = new i(o, s, "");
                                            d.value = u, this.id3Track.addCue(d)
                                        }
                                    }
                                }
                            }
                        }, e.onLiveBackBufferReached = function (t) {
                            var e = t.bufferEnd,
                                r = this.id3Track;
                            if (r && r.cues && r.cues.length) {
                                var i = function (t, e) {
                                    if (e < t[0].endTime) return t[0];
                                    if (e > t[t.length - 1].endTime) return t[t.length - 1];
                                    for (var r = 0, i = t.length - 1; r <= i;) {
                                        var n = Math.floor((i + r) / 2);
                                        if (e < t[n].endTime) i = n - 1;
                                        else {
                                            if (!(e > t[n].endTime)) return t[n];
                                            r = n + 1
                                        }
                                    }
                                    return t[r].endTime - e < e - t[i].endTime ? t[r] : t[i]
                                }(r.cues, e);
                                if (i)
                                    for (; r.cues[0] !== i;) r.removeCue(r.cues[0])
                            }
                        }, t
                    }(u);
                    var Kt = function () {
                        function t(t) {
                            this.alpha_ = void 0, this.estimate_ = void 0, this.totalWeight_ = void 0, this.alpha_ = t ? Math.exp(Math.log(.5) / t) : 0, this.estimate_ = 0, this.totalWeight_ = 0
                        }
                        var e = t.prototype;
                        return e.sample = function (t, e) {
                            var r = Math.pow(this.alpha_, t);
                            this.estimate_ = e * (1 - r) + r * this.estimate_, this.totalWeight_ += t
                        }, e.getTotalWeight = function () {
                            return this.totalWeight_
                        }, e.getEstimate = function () {
                            if (this.alpha_) {
                                var t = 1 - Math.pow(this.alpha_, this.totalWeight_);
                                return this.estimate_ / t
                            }
                            return this.estimate_
                        }, t
                    }(),
                        Vt = function () {
                            function t(t, e, r, i) {
                                this.hls = void 0, this.defaultEstimate_ = void 0, this.minWeight_ = void 0, this.minDelayMs_ = void 0, this.slow_ = void 0, this.fast_ = void 0, this.hls = t, this.defaultEstimate_ = i, this.minWeight_ = .001, this.minDelayMs_ = 50, this.slow_ = new Kt(e), this.fast_ = new Kt(r)
                            }
                            var e = t.prototype;
                            return e.sample = function (t, e) {
                                var r = (t = Math.max(t, this.minDelayMs_)) / 1e3,
                                    i = 8 * e / r;
                                this.fast_.sample(r, i), this.slow_.sample(r, i)
                            }, e.canEstimate = function () {
                                var t = this.fast_;
                                return t && t.getTotalWeight() >= this.minWeight_
                            }, e.getEstimate = function () {
                                return this.canEstimate() ? Math.min(this.fast_.getEstimate(), this.slow_.getEstimate()) : this.defaultEstimate_
                            }, e.destroy = function () { }, t
                        }();

                    function Gt(t, e) {
                        for (var r = 0; r < e.length; r++) {
                            var i = e[r];
                            i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), Object.defineProperty(t, i.key, i)
                        }
                    }
                    var Yt = window.performance,
                        Ht = function (r) {
                            function t(t) {
                                var e;
                                return (e = r.call(this, t, x.default.FRAG_LOADING, x.default.FRAG_LOADED, x.default.FRAG_BUFFERED, x.default.ERROR) || this).lastLoadedFragLevel = 0, e._nextAutoLevel = -1, e.hls = t, e.timer = null, e._bwEstimator = null, e.onCheck = e._abandonRulesCheck.bind(function (t) {
                                    if (void 0 === t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                                    return t
                                }(e)), e
                            } ! function (t, e) {
                                t.prototype = Object.create(e.prototype), (t.prototype.constructor = t).__proto__ = e
                            }(t, r);
                            var e = t.prototype;
                            return e.destroy = function () {
                                this.clearTimer(), u.prototype.destroy.call(this)
                            }, e.onFragLoading = function (t) {
                                var e = t.frag;
                                if ("main" === e.type && (this.timer || (this.fragCurrent = e, this.timer = setInterval(this.onCheck, 100)), !this._bwEstimator)) {
                                    var r, i, n = this.hls,
                                        a = n.config,
                                        o = e.level;
                                    i = n.levels[o].details.live ? (r = a.abrEwmaFastLive, a.abrEwmaSlowLive) : (r = a.abrEwmaFastVoD, a.abrEwmaSlowVoD), this._bwEstimator = new Vt(n, i, r, a.abrEwmaDefaultEstimate)
                                }
                            }, e._abandonRulesCheck = function () {
                                var t = this.hls,
                                    e = t.media,
                                    r = this.fragCurrent;
                                if (r) {
                                    var i = r.loader,
                                        n = t.minAutoLevel;
                                    if (!i || i.stats && i.stats.aborted) return M.logger.warn("frag loader destroy or aborted, disarm abandonRules"), this.clearTimer(), void (this._nextAutoLevel = -1);
                                    var a = i.stats;
                                    if (e && a && (!e.paused && 0 !== e.playbackRate || !e.readyState) && r.autoLevel && r.level) {
                                        var o = Yt.now() - a.trequest,
                                            s = Math.abs(e.playbackRate);
                                        if (o > 500 * r.duration / s) {
                                            var l = t.levels,
                                                u = Math.max(1, a.bw ? a.bw / 8 : 1e3 * a.loaded / o),
                                                d = l[r.level],
                                                c = d.realBitrate ? Math.max(d.realBitrate, d.bitrate) : d.bitrate,
                                                f = a.total ? a.total : Math.max(a.loaded, Math.round(r.duration * c / 8)),
                                                h = e.currentTime,
                                                p = (f - a.loaded) / u,
                                                g = ($.bufferInfo(e, h, t.config.maxBufferHole).end - h) / s;
                                            if (g < 2 * r.duration / s && g < p) {
                                                var m;
                                                for (m = r.level - 1; n < m; m--) {
                                                    var v = l[m].realBitrate ? Math.max(l[m].realBitrate, l[m].bitrate) : l[m].bitrate;
                                                    if (r.duration * v / (6.4 * u) < g) break
                                                }
                                                void 0 < p && (M.logger.warn("loading too slow, abort fragment loading and switch to level " + m + ":fragLoadedDelay[" + m + "]<fragLoadedDelay[" + (r.level - 1) + "];bufferStarvationDelay:" + (void 0).toFixed(1) + "<" + p.toFixed(1) + ":" + g.toFixed(1)), t.nextLoadLevel = m, this._bwEstimator.sample(o, a.loaded), i.abort(), this.clearTimer(), t.trigger(x.default.FRAG_LOAD_EMERGENCY_ABORTED, {
                                                    frag: r,
                                                    stats: a
                                                }))
                                            }
                                        }
                                    }
                                }
                            }, e.onFragLoaded = function (t) {
                                var e = t.frag;
                                if ("main" === e.type && Object(I.isFiniteNumber)(e.sn)) {
                                    if (this.clearTimer(), this.lastLoadedFragLevel = e.level, this._nextAutoLevel = -1, this.hls.config.abrMaxWithRealBitrate) {
                                        var r = this.hls.levels[e.level],
                                            i = (r.loaded ? r.loaded.bytes : 0) + t.stats.loaded,
                                            n = (r.loaded ? r.loaded.duration : 0) + t.frag.duration;
                                        r.loaded = {
                                            bytes: i,
                                            duration: n
                                        }, r.realBitrate = Math.round(8 * i / n)
                                    }
                                    if (t.frag.bitrateTest) {
                                        var a = t.stats;
                                        a.tparsed = a.tbuffered = a.tload, this.onFragBuffered(t)
                                    }
                                }
                            }, e.onFragBuffered = function (t) {
                                var e = t.stats,
                                    r = t.frag;
                                if (!0 !== e.aborted && "main" === r.type && Object(I.isFiniteNumber)(r.sn) && (!r.bitrateTest || e.tload === e.tbuffered)) {
                                    var i = e.tparsed - e.trequest;
                                    M.logger.log("latency/loading/parsing/append/kbps:" + Math.round(e.tfirst - e.trequest) + "/" + Math.round(e.tload - e.tfirst) + "/" + Math.round(e.tparsed - e.tload) + "/" + Math.round(e.tbuffered - e.tparsed) + "/" + Math.round(8 * e.loaded / (e.tbuffered - e.trequest))), this._bwEstimator.sample(i, e.loaded), e.bwEstimate = this._bwEstimator.getEstimate(), r.bitrateTest ? this.bitrateTestDelay = i / 1e3 : this.bitrateTestDelay = 0
                                }
                            }, e.onError = function (t) {
                                switch (t.details) {
                                    case f.ErrorDetails.FRAG_LOAD_ERROR:
                                    case f.ErrorDetails.FRAG_LOAD_TIMEOUT:
                                        this.clearTimer()
                                }
                            }, e.clearTimer = function () {
                                clearInterval(this.timer), this.timer = null
                            }, e._findBestLevel = function (t, e, r, i, n, a, o, s, l) {
                                for (var u = n; i <= u; u--) {
                                    var d = l[u];
                                    if (d) {
                                        var c = d.details,
                                            f = c ? c.totalduration / c.fragments.length : e,
                                            h = !!c && c.live,
                                            p = void 0;
                                        p = u <= t ? o * r : s * r;
                                        var g = l[u].realBitrate ? Math.max(l[u].realBitrate, l[u].bitrate) : l[u].bitrate,
                                            m = g * f / p;
                                        if (M.logger.trace("level/adjustedbw/bitrate/avgDuration/maxFetchDuration/fetchDuration: " + u + "/" + Math.round(p) + "/" + g + "/" + f + "/" + a + "/" + m), g < p && (!m || h && !this.bitrateTestDelay || m < a)) return u
                                    }
                                }
                                return -1
                            },
                                function (t, e, r) {
                                    e && Gt(t.prototype, e), r && Gt(t, r)
                                }(t, [{
                                    key: "nextAutoLevel",
                                    get: function () {
                                        var t = this._nextAutoLevel,
                                            e = this._bwEstimator;
                                        if (!(-1 === t || e && e.canEstimate())) return t;
                                        var r = this._nextABRAutoLevel;
                                        return -1 !== t && (r = Math.min(t, r)), r
                                    },
                                    set: function (t) {
                                        this._nextAutoLevel = t
                                    }
                                }, {
                                    key: "_nextABRAutoLevel",
                                    get: function () {
                                        var t = this.hls,
                                            e = t.maxAutoLevel,
                                            r = t.levels,
                                            i = t.config,
                                            n = t.minAutoLevel,
                                            a = t.media,
                                            o = this.lastLoadedFragLevel,
                                            s = this.fragCurrent ? this.fragCurrent.duration : 0,
                                            l = a ? a.currentTime : 0,
                                            u = a && 0 !== a.playbackRate ? Math.abs(a.playbackRate) : 1,
                                            d = this._bwEstimator ? this._bwEstimator.getEstimate() : i.abrEwmaDefaultEstimate,
                                            c = ($.bufferInfo(a, l, i.maxBufferHole).end - l) / u,
                                            f = this._findBestLevel(o, s, d, n, e, c, i.abrBandWidthFactor, i.abrBandWidthUpFactor, r);
                                        if (0 <= f) return f;
                                        M.logger.trace("rebuffering expected to happen, lets try to find a quality level minimizing the rebuffering");
                                        var h = s ? Math.min(s, i.maxStarvationDelay) : i.maxStarvationDelay,
                                            p = i.abrBandWidthFactor,
                                            g = i.abrBandWidthUpFactor;
                                        if (0 == c) {
                                            var m = this.bitrateTestDelay;
                                            if (m) h = (s ? Math.min(s, i.maxLoadingDelay) : i.maxLoadingDelay) - m, M.logger.trace("bitrate test took " + Math.round(1e3 * m) + "ms, set first fragment max fetchDuration to " + Math.round(1e3 * h) + " ms"), p = g = 1
                                        }
                                        return f = this._findBestLevel(o, s, d, n, e, c + h, p, g, r), Math.max(f, 0)
                                    }
                                }]), t
                        }(u);
                    var $t = X(),
                        zt = function (e) {
                            function t(t) {
                                var s;
                                return (s = e.call(this, t, x.default.MEDIA_ATTACHING, x.default.MEDIA_DETACHING, x.default.MANIFEST_PARSED, x.default.BUFFER_RESET, x.default.BUFFER_APPENDING, x.default.BUFFER_CODECS, x.default.BUFFER_EOS, x.default.BUFFER_FLUSHING, x.default.LEVEL_PTS_UPDATED, x.default.LEVEL_UPDATED) || this)._msDuration = null, s._levelDuration = null, s._levelTargetDuration = 10, s._live = null, s._objectUrl = null, s._needsFlush = !1, s._needsEos = !1, s.config = void 0, s.audioTimestampOffset = void 0, s.bufferCodecEventsExpected = 0, s._bufferCodecEventsTotal = 0, s.media = null, s.mediaSource = null, s.segments = [], s.parent = void 0, s.appending = !1, s.appended = 0, s.appendError = 0, s.flushBufferCounter = 0, s.tracks = {}, s.pendingTracks = {}, s.sourceBuffer = {}, s.flushRange = [], s._onMediaSourceOpen = function () {
                                    M.logger.log("media source opened"), s.hls.trigger(x.default.MEDIA_ATTACHED, {
                                        media: s.media
                                    });
                                    var t = s.mediaSource;
                                    t && t.removeEventListener("sourceopen", s._onMediaSourceOpen), s.checkPendingTracks()
                                }, s._onMediaSourceClose = function () {
                                    M.logger.log("media source closed")
                                }, s._onMediaSourceEnded = function () {
                                    M.logger.log("media source ended")
                                }, s._onSBUpdateEnd = function () {
                                    if (s.audioTimestampOffset && s.sourceBuffer.audio) {
                                        var t = s.sourceBuffer.audio;
                                        M.logger.warn("change mpeg audio timestamp offset from " + t.timestampOffset + " to " + s.audioTimestampOffset), t.timestampOffset = s.audioTimestampOffset, delete s.audioTimestampOffset
                                    }
                                    s._needsFlush && s.doFlush(), s._needsEos && s.checkEos(), s.appending = !1;
                                    var r = s.parent,
                                        e = s.segments.reduce(function (t, e) {
                                            return e.parent === r ? t + 1 : t
                                        }, 0),
                                        i = {},
                                        n = s.sourceBuffer;
                                    for (var a in n) {
                                        var o = n[a];
                                        if (!o) throw Error("handling source buffer update end error: source buffer for " + a + " uninitilized and unable to update buffered TimeRanges.");
                                        i[a] = o.buffered
                                    }
                                    s.hls.trigger(x.default.BUFFER_APPENDED, {
                                        parent: r,
                                        pending: e,
                                        timeRanges: i
                                    }), s._needsFlush || s.doAppending(), s.updateMediaElementDuration(), 0 === e && s.flushLiveBackBuffer()
                                }, s._onSBUpdateError = function (t) {
                                    M.logger.error("sourceBuffer error:", t), s.hls.trigger(x.default.ERROR, {
                                        type: f.ErrorTypes.MEDIA_ERROR,
                                        details: f.ErrorDetails.BUFFER_APPENDING_ERROR,
                                        fatal: !1
                                    })
                                }, s.config = t.config, s
                            } ! function (t, e) {
                                t.prototype = Object.create(e.prototype), (t.prototype.constructor = t).__proto__ = e
                            }(t, e);
                            var r = t.prototype;
                            return r.destroy = function () {
                                u.prototype.destroy.call(this)
                            }, r.onLevelPtsUpdated = function (t) {
                                var e = t.type,
                                    r = this.tracks.audio;
                                if ("audio" === e && r && "audio/mpeg" === r.container) {
                                    var i = this.sourceBuffer.audio;
                                    if (!i) throw Error("Level PTS Updated and source buffer for audio uninitalized");
                                    if (.1 < Math.abs(i.timestampOffset - t.start)) {
                                        var n = i.updating;
                                        try {
                                            i.abort()
                                        } catch (t) {
                                            M.logger.warn("can not abort audio buffer: " + t)
                                        }
                                        n ? this.audioTimestampOffset = t.start : (M.logger.warn("change mpeg audio timestamp offset from " + i.timestampOffset + " to " + t.start), i.timestampOffset = t.start)
                                    }
                                }
                            }, r.onManifestParsed = function (t) {
                                this.bufferCodecEventsExpected = this._bufferCodecEventsTotal = t.altAudio ? 2 : 1, M.logger.log(this.bufferCodecEventsExpected + " bufferCodec event(s) expected")
                            }, r.onMediaAttaching = function (t) {
                                var e = this.media = t.media;
                                if (e && $t) {
                                    var r = this.mediaSource = new $t;
                                    r.addEventListener("sourceopen", this._onMediaSourceOpen), r.addEventListener("sourceended", this._onMediaSourceEnded), r.addEventListener("sourceclose", this._onMediaSourceClose), e.src = window.URL.createObjectURL(r), this._objectUrl = e.src
                                }
                            }, r.onMediaDetaching = function () {
                                M.logger.log("media source detaching");
                                var t = this.mediaSource;
                                if (t) {
                                    if ("open" === t.readyState) try {
                                        t.endOfStream()
                                    } catch (t) {
                                        M.logger.warn("onMediaDetaching:" + t.message + " while calling endOfStream")
                                    }
                                    t.removeEventListener("sourceopen", this._onMediaSourceOpen), t.removeEventListener("sourceended", this._onMediaSourceEnded), t.removeEventListener("sourceclose", this._onMediaSourceClose), this.media && (this._objectUrl && window.URL.revokeObjectURL(this._objectUrl), this.media.src === this._objectUrl ? (this.media.removeAttribute("src"), this.media.load()) : M.logger.warn("media.src was changed by a third party - skip cleanup")), this.mediaSource = null, this.media = null, this._objectUrl = null, this.bufferCodecEventsExpected = this._bufferCodecEventsTotal, this.pendingTracks = {}, this.tracks = {}, this.sourceBuffer = {}, this.flushRange = [], this.segments = [], this.appended = 0
                                }
                                this.hls.trigger(x.default.MEDIA_DETACHED)
                            }, r.checkPendingTracks = function () {
                                var t = this.bufferCodecEventsExpected,
                                    e = this.pendingTracks,
                                    r = Object.keys(e).length;
                                (r && !t || 2 === r) && (this.createSourceBuffers(e), this.pendingTracks = {}, this.doAppending())
                            }, r.onBufferReset = function () {
                                var t = this.sourceBuffer;
                                for (var e in t) {
                                    var r = t[e];
                                    try {
                                        r && (this.mediaSource && this.mediaSource.removeSourceBuffer(r), r.removeEventListener("updateend", this._onSBUpdateEnd), r.removeEventListener("error", this._onSBUpdateError))
                                    } catch (t) { }
                                }
                                this.sourceBuffer = {}, this.flushRange = [], this.segments = [], this.appended = 0
                            }, r.onBufferCodecs = function (e) {
                                var r = this;
                                Object.keys(this.sourceBuffer).length || (Object.keys(e).forEach(function (t) {
                                    r.pendingTracks[t] = e[t]
                                }), this.bufferCodecEventsExpected = Math.max(this.bufferCodecEventsExpected - 1, 0), this.mediaSource && "open" === this.mediaSource.readyState && this.checkPendingTracks())
                            }, r.createSourceBuffers = function (t) {
                                var e = this.sourceBuffer,
                                    r = this.mediaSource;
                                if (!r) throw Error("createSourceBuffers called when mediaSource was null");
                                for (var i in t)
                                    if (!e[i]) {
                                        var n = t[i];
                                        if (!n) throw Error("source buffer exists for track " + i + ", however track does not");
                                        var a = n.levelCodec || n.codec,
                                            o = n.container + ";codecs=" + a;
                                        M.logger.log("creating sourceBuffer(" + o + ")");
                                        try {
                                            var s = e[i] = r.addSourceBuffer(o);
                                            s.addEventListener("updateend", this._onSBUpdateEnd), s.addEventListener("error", this._onSBUpdateError), this.tracks[i] = {
                                                buffer: s,
                                                codec: a,
                                                id: n.id,
                                                container: n.container,
                                                levelCodec: n.levelCodec
                                            }
                                        } catch (t) {
                                            M.logger.error("error while trying to add sourceBuffer:" + t.message), this.hls.trigger(x.default.ERROR, {
                                                type: f.ErrorTypes.MEDIA_ERROR,
                                                details: f.ErrorDetails.BUFFER_ADD_CODEC_ERROR,
                                                fatal: !1,
                                                err: t,
                                                mimeType: o
                                            })
                                        }
                                    } this.hls.trigger(x.default.BUFFER_CREATED, {
                                        tracks: this.tracks
                                    })
                            }, r.onBufferAppending = function (t) {
                                this._needsFlush || (this.segments ? this.segments.push(t) : this.segments = [t], this.doAppending())
                            }, r.onBufferEos = function (t) {
                                for (var e in this.sourceBuffer)
                                    if (!t.type || t.type === e) {
                                        var r = this.sourceBuffer[e];
                                        r && !r.ended && (r.ended = !0, M.logger.log(e + " sourceBuffer now EOS"))
                                    } this.checkEos()
                            }, r.checkEos = function () {
                                var t = this.sourceBuffer,
                                    e = this.mediaSource;
                                if (e && "open" === e.readyState) {
                                    for (var r in t) {
                                        var i = t[r];
                                        if (i) {
                                            if (!i.ended) return;
                                            if (i.updating) return void (this._needsEos = !0)
                                        }
                                    }
                                    M.logger.log("all media data are available, signal endOfStream() to MediaSource and stop loading fragment");
                                    try {
                                        e.endOfStream()
                                    } catch (t) {
                                        M.logger.warn("exception while calling mediaSource.endOfStream()")
                                    }
                                    this._needsEos = !1
                                } else this._needsEos = !1
                            }, r.onBufferFlushing = function (t) {
                                t.type ? this.flushRange.push({
                                    start: t.startOffset,
                                    end: t.endOffset,
                                    type: t.type
                                }) : (this.flushRange.push({
                                    start: t.startOffset,
                                    end: t.endOffset,
                                    type: "video"
                                }), this.flushRange.push({
                                    start: t.startOffset,
                                    end: t.endOffset,
                                    type: "audio"
                                })), this.flushBufferCounter = 0, this.doFlush()
                            }, r.flushLiveBackBuffer = function () {
                                if (this._live) {
                                    var t = this.config.liveBackBufferLength;
                                    if (isFinite(t) && !(t < 0))
                                        if (this.media)
                                            for (var e = this.media.currentTime, r = this.sourceBuffer, i = Object.keys(r), n = e - Math.max(t, this._levelTargetDuration), a = i.length - 1; 0 <= a; a--) {
                                                var o = i[a],
                                                    s = r[o];
                                                if (s) {
                                                    var l = s.buffered;
                                                    0 < l.length && n > l.start(0) && this.removeBufferRange(o, s, 0, n) && this.hls.trigger(x.default.LIVE_BACK_BUFFER_REACHED, {
                                                        bufferEnd: n
                                                    })
                                                }
                                            } else M.logger.error("flushLiveBackBuffer called without attaching media")
                                }
                            }, r.onLevelUpdated = function (t) {
                                var e = t.details;
                                0 < e.fragments.length && (this._levelDuration = e.totalduration + e.fragments[0].start, this._levelTargetDuration = e.averagetargetduration || e.targetduration || 10, this._live = e.live, this.updateMediaElementDuration())
                            }, r.updateMediaElementDuration = function () {
                                var t, e = this.config;
                                if (null !== this._levelDuration && this.media && this.mediaSource && this.sourceBuffer && 0 !== this.media.readyState && "open" === this.mediaSource.readyState) {
                                    for (var r in this.sourceBuffer) {
                                        var i = this.sourceBuffer[r];
                                        if (i && !0 === i.updating) return
                                    }
                                    t = this.media.duration, null === this._msDuration && (this._msDuration = this.mediaSource.duration), !0 === this._live && !0 === e.liveDurationInfinity ? (M.logger.log("Media Source duration is set to Infinity"), this._msDuration = this.mediaSource.duration = 1 / 0) : (this._levelDuration > this._msDuration && this._levelDuration > t || !Object(I.isFiniteNumber)(t)) && (M.logger.log("Updating Media Source duration to " + this._levelDuration.toFixed(3)), this._msDuration = this.mediaSource.duration = this._levelDuration)
                                }
                            }, r.doFlush = function () {
                                for (; this.flushRange.length;) {
                                    var t = this.flushRange[0];
                                    if (!this.flushBuffer(t.start, t.end, t.type)) return void (this._needsFlush = !0);
                                    this.flushRange.shift(), this.flushBufferCounter = 0
                                }
                                if (0 === this.flushRange.length) {
                                    this._needsFlush = !1;
                                    var e = 0,
                                        r = this.sourceBuffer;
                                    try {
                                        for (var i in r) {
                                            var n = r[i];
                                            n && (e += n.buffered.length)
                                        }
                                    } catch (t) {
                                        M.logger.error("error while accessing sourceBuffer.buffered")
                                    }
                                    this.appended = e, this.hls.trigger(x.default.BUFFER_FLUSHED)
                                }
                            }, r.doAppending = function () {
                                var e = this.config,
                                    r = this.hls,
                                    i = this.segments,
                                    t = this.sourceBuffer;
                                if (Object.keys(t).length) {
                                    if (!this.media || this.media.error) return this.segments = [], void M.logger.error("trying to append although a media error occured, flush segment and abort");
                                    if (!this.appending) {
                                        var n = i.shift();
                                        if (n) try {
                                            var a = t[n.type];
                                            if (!a) return void this._onSBUpdateEnd();
                                            if (a.updating) return void i.unshift(n);
                                            a.ended = !1, this.parent = n.parent, a.appendBuffer(n.data), this.appendError = 0, this.appended++, this.appending = !0
                                        } catch (t) {
                                            M.logger.error("error while trying to append buffer:" + t.message), i.unshift(n);
                                            var o = {
                                                type: f.ErrorTypes.MEDIA_ERROR,
                                                parent: n.parent,
                                                details: "",
                                                fatal: !1
                                            };
                                            22 === t.code ? (this.segments = [], o.details = f.ErrorDetails.BUFFER_FULL_ERROR) : (this.appendError++, o.details = f.ErrorDetails.BUFFER_APPEND_ERROR, this.appendError > e.appendErrorMaxRetry && (M.logger.log("fail " + e.appendErrorMaxRetry + " times to append segment in sourceBuffer"), this.segments = [], o.fatal = !0)), r.trigger(x.default.ERROR, o)
                                        }
                                    }
                                }
                            }, r.flushBuffer = function (t, e, r) {
                                var i = this.sourceBuffer;
                                if (!Object.keys(i).length) return !0;
                                var n = "null";
                                if (this.media && (n = this.media.currentTime.toFixed(3)), M.logger.log("flushBuffer,pos/start/end: " + n + "/" + t + "/" + e), this.flushBufferCounter >= this.appended) return M.logger.warn("abort flushing too many retries"), !0;
                                var a = i[r];
                                if (a) {
                                    if (a.ended = !1, a.updating) return M.logger.warn("cannot flush, sb updating in progress"), !1;
                                    if (this.removeBufferRange(r, a, t, e)) return this.flushBufferCounter++, !1
                                }
                                return M.logger.log("buffer flushed"), !0
                            }, r.removeBufferRange = function (t, e, r, i) {
                                try {
                                    for (var n = 0; n < e.buffered.length; n++) {
                                        var a = e.buffered.start(n),
                                            o = e.buffered.end(n),
                                            s = Math.max(a, r),
                                            l = Math.min(o, i);
                                        if (.5 < Math.min(l, o) - s) {
                                            var u = "null";
                                            return this.media && (u = this.media.currentTime.toString()), M.logger.log("sb remove " + t + " [" + s + "," + l + "], of [" + a + "," + o + "], pos:" + u), e.remove(s, l), !0
                                        }
                                    }
                                } catch (t) {
                                    M.logger.warn("removeBufferRange failed", t)
                                }
                                return !1
                            }, t
                        }(u);

                    function Wt(t, e) {
                        for (var r = 0; r < e.length; r++) {
                            var i = e[r];
                            i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), Object.defineProperty(t, i.key, i)
                        }
                    }
                    var qt = function (r) {
                        function n(t) {
                            var e;
                            return (e = r.call(this, t, x.default.FPS_DROP_LEVEL_CAPPING, x.default.MEDIA_ATTACHING, x.default.MANIFEST_PARSED, x.default.BUFFER_CODECS, x.default.MEDIA_DETACHING) || this).autoLevelCapping = Number.POSITIVE_INFINITY, e.firstLevel = null, e.levels = [], e.media = null, e.restrictedLevels = [], e.timer = null, e
                        } ! function (t, e) {
                            t.prototype = Object.create(e.prototype), (t.prototype.constructor = t).__proto__ = e
                        }(n, r);
                        var t = n.prototype;
                        return t.destroy = function () {
                            this.hls.config.capLevelToPlayerSize && (this.media = null, this.stopCapping())
                        }, t.onFpsDropLevelCapping = function (t) {
                            n.isLevelAllowed(t.droppedLevel, this.restrictedLevels) && this.restrictedLevels.push(t.droppedLevel)
                        }, t.onMediaAttaching = function (t) {
                            this.media = t.media instanceof window.HTMLVideoElement ? t.media : null
                        }, t.onManifestParsed = function (t) {
                            var e = this.hls;
                            this.restrictedLevels = [], this.levels = t.levels, this.firstLevel = t.firstLevel, e.config.capLevelToPlayerSize && t.video && this.startCapping()
                        }, t.onBufferCodecs = function (t) {
                            this.hls.config.capLevelToPlayerSize && t.video && this.startCapping()
                        }, t.onLevelsUpdated = function (t) {
                            this.levels = t.levels
                        }, t.onMediaDetaching = function () {
                            this.stopCapping()
                        }, t.detectPlayerSize = function () {
                            if (this.media) {
                                var t = this.levels ? this.levels.length : 0;
                                if (t) {
                                    var e = this.hls;
                                    e.autoLevelCapping = this.getMaxLevel(t - 1), e.autoLevelCapping > this.autoLevelCapping && e.streamController.nextLevelSwitch(), this.autoLevelCapping = e.autoLevelCapping
                                }
                            }
                        }, t.getMaxLevel = function (r) {
                            var i = this;
                            if (!this.levels) return -1;
                            var t = this.levels.filter(function (t, e) {
                                return n.isLevelAllowed(e, i.restrictedLevels) && e <= r
                            });
                            return n.getMaxLevelByMediaSize(t, this.mediaWidth, this.mediaHeight)
                        }, t.startCapping = function () {
                            this.timer || (this.autoLevelCapping = Number.POSITIVE_INFINITY, this.hls.firstLevel = this.getMaxLevel(this.firstLevel), clearInterval(this.timer), this.timer = setInterval(this.detectPlayerSize.bind(this), 1e3), this.detectPlayerSize())
                        }, t.stopCapping = function () {
                            this.restrictedLevels = [], this.firstLevel = null, this.autoLevelCapping = Number.POSITIVE_INFINITY, this.timer && (this.timer = clearInterval(this.timer), this.timer = null)
                        }, n.isLevelAllowed = function (t, e) {
                            return void 0 === e && (e = []), -1 === e.indexOf(t)
                        }, n.getMaxLevelByMediaSize = function (t, e, r) {
                            if (!t || t && !t.length) return -1;
                            for (var i, n, a = t.length - 1, o = 0; o < t.length; o += 1) {
                                var s = t[o];
                                if ((s.width >= e || s.height >= r) && (i = s, !(n = t[o + 1]) || i.width !== n.width || i.height !== n.height)) {
                                    a = o;
                                    break
                                }
                            }
                            return a
                        },
                            function (t, e, r) {
                                e && Wt(t.prototype, e), r && Wt(t, r)
                            }(n, [{
                                key: "mediaWidth",
                                get: function () {
                                    var t, e = this.media;
                                    return e && (t = e.width || e.clientWidth || e.offsetWidth, t *= n.contentScaleFactor), t
                                }
                            }, {
                                key: "mediaHeight",
                                get: function () {
                                    var t, e = this.media;
                                    return e && (t = e.height || e.clientHeight || e.offsetHeight, t *= n.contentScaleFactor), t
                                }
                            }], [{
                                key: "contentScaleFactor",
                                get: function () {
                                    var t = 1;
                                    try {
                                        t = window.devicePixelRatio
                                    } catch (t) { }
                                    return t
                                }
                            }]), n
                    }(u);
                    var Xt = window.performance,
                        Zt = function (e) {
                            function t(t) {
                                return e.call(this, t, x.default.MEDIA_ATTACHING) || this
                            } ! function (t, e) {
                                t.prototype = Object.create(e.prototype), (t.prototype.constructor = t).__proto__ = e
                            }(t, e);
                            var r = t.prototype;
                            return r.destroy = function () {
                                this.timer && clearInterval(this.timer), this.isVideoPlaybackQualityAvailable = !1
                            }, r.onMediaAttaching = function (t) {
                                var e = this.hls.config;
                                e.capLevelOnFPSDrop && ("function" == typeof (this.video = t.media instanceof window.HTMLVideoElement ? t.media : null).getVideoPlaybackQuality && (this.isVideoPlaybackQualityAvailable = !0), clearInterval(this.timer), this.timer = setInterval(this.checkFPSInterval.bind(this), e.fpsDroppedMonitoringPeriod))
                            }, r.checkFPS = function (t, e, r) {
                                var i = Xt.now();
                                if (e) {
                                    if (this.lastTime) {
                                        var n = i - this.lastTime,
                                            a = r - this.lastDroppedFrames,
                                            o = e - this.lastDecodedFrames,
                                            s = 1e3 * a / n,
                                            l = this.hls;
                                        if (l.trigger(x.default.FPS_DROP, {
                                            currentDropped: a,
                                            currentDecoded: o,
                                            totalDroppedFrames: r
                                        }), 0 < s && a > l.config.fpsDroppedMonitoringThreshold * o) {
                                            var u = l.currentLevel;
                                            M.logger.warn("drop FPS ratio greater than max allowed value for currentLevel: " + u), 0 < u && (-1 === l.autoLevelCapping || l.autoLevelCapping >= u) && (u -= 1, l.trigger(x.default.FPS_DROP_LEVEL_CAPPING, {
                                                level: u,
                                                droppedLevel: l.currentLevel
                                            }), l.autoLevelCapping = u, l.streamController.nextLevelSwitch())
                                        }
                                    }
                                    this.lastTime = i, this.lastDroppedFrames = r, this.lastDecodedFrames = e
                                }
                            }, r.checkFPSInterval = function () {
                                var t = this.video;
                                if (t)
                                    if (this.isVideoPlaybackQualityAvailable) {
                                        var e = t.getVideoPlaybackQuality();
                                        this.checkFPS(t, e.totalVideoFrames, e.droppedVideoFrames)
                                    } else this.checkFPS(t, t.webkitDecodedFrameCount, t.webkitDroppedFrameCount)
                            }, t
                        }(u),
                        Qt = window,
                        Jt = Qt.performance,
                        te = Qt.XMLHttpRequest,
                        ee = function () {
                            function t(t) {
                                t && t.xhrSetup && (this.xhrSetup = t.xhrSetup)
                            }
                            var e = t.prototype;
                            return e.destroy = function () {
                                this.abort(), this.loader = null
                            }, e.abort = function () {
                                var t = this.loader;
                                t && 4 !== t.readyState && (this.stats.aborted = !0, t.abort()), window.clearTimeout(this.requestTimeout), this.requestTimeout = null, window.clearTimeout(this.retryTimeout), this.retryTimeout = null
                            }, e.load = function (t, e, r) {
                                this.context = t, this.config = e, this.callbacks = r, this.stats = {
                                    trequest: Jt.now(),
                                    retry: 0
                                }, this.retryDelay = e.retryDelay, this.loadInternal()
                            }, e.loadInternal = function () {
                                var e, r = this.context;
                                e = this.loader = new te;
                                var t = this.stats;
                                t.tfirst = 0, t.loaded = 0;
                                var i = this.xhrSetup;
                                try {
                                    if (i) try {
                                        i(e, r.url)
                                    } catch (t) {
                                        e.open("GET", r.url, !0), i(e, r.url)
                                    }
                                    e.readyState || e.open("GET", r.url, !0)
                                } catch (t) {
                                    return void this.callbacks.onError({
                                        code: e.status,
                                        text: t.message
                                    }, r, e)
                                }
                                r.rangeEnd && e.setRequestHeader("Range", "bytes=" + r.rangeStart + "-" + (r.rangeEnd - 1)), e.onreadystatechange = this.readystatechange.bind(this), e.onprogress = this.loadprogress.bind(this), e.responseType = r.responseType, this.requestTimeout = window.setTimeout(this.loadtimeout.bind(this), this.config.timeout), e.send()
                            }, e.readystatechange = function (t) {
                                var e = t.currentTarget,
                                    r = e.readyState,
                                    i = this.stats,
                                    n = this.context,
                                    a = this.config;
                                if (!i.aborted && 2 <= r)
                                    if (window.clearTimeout(this.requestTimeout), 0 === i.tfirst && (i.tfirst = Math.max(Jt.now(), i.trequest)), 4 === r) {
                                        var o = e.status;
                                        if (200 <= o && o < 300) {
                                            var s, l;
                                            i.tload = Math.max(i.tfirst, Jt.now()), l = "arraybuffer" === n.responseType ? (s = e.response).byteLength : (s = e.responseText).length, i.loaded = i.total = l;
                                            var u = {
                                                url: e.responseURL,
                                                data: s
                                            };
                                            this.callbacks.onSuccess(u, i, n, e)
                                        } else i.retry >= a.maxRetry || 400 <= o && o < 499 ? (M.logger.error(o + " while loading " + n.url), this.callbacks.onError({
                                            code: o,
                                            text: e.statusText
                                        }, n, e)) : (M.logger.warn(o + " while loading " + n.url + ", retrying in " + this.retryDelay + "..."), this.destroy(), this.retryTimeout = window.setTimeout(this.loadInternal.bind(this), this.retryDelay), this.retryDelay = Math.min(2 * this.retryDelay, a.maxRetryDelay), i.retry++)
                                    } else this.requestTimeout = window.setTimeout(this.loadtimeout.bind(this), a.timeout)
                            }, e.loadtimeout = function () {
                                M.logger.warn("timeout while loading " + this.context.url), this.callbacks.onTimeout(this.stats, this.context, null)
                            }, e.loadprogress = function (t) {
                                var e = t.currentTarget,
                                    r = this.stats;
                                r.loaded = t.loaded, t.lengthComputable && (r.total = t.total);
                                var i = this.callbacks.onProgress;
                                i && i(r, this.context, null, e)
                            }, t
                        }();

                    function re(t, e) {
                        for (var r = 0; r < e.length; r++) {
                            var i = e[r];
                            i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), Object.defineProperty(t, i.key, i)
                        }
                    }
                    var ie = function (r) {
                        function t(t) {
                            var e;
                            return (e = r.call(this, t, x.default.MANIFEST_LOADING, x.default.MANIFEST_PARSED, x.default.AUDIO_TRACK_LOADED, x.default.AUDIO_TRACK_SWITCHED, x.default.LEVEL_LOADED, x.default.ERROR) || this)._trackId = -1, e._selectDefaultTrack = !0, e.tracks = [], e.trackIdBlacklist = Object.create(null), e.audioGroupId = null, e
                        } ! function (t, e) {
                            t.prototype = Object.create(e.prototype), (t.prototype.constructor = t).__proto__ = e
                        }(t, r);
                        var e = t.prototype;
                        return e.onManifestLoading = function () {
                            this.tracks = [], this._trackId = -1, this._selectDefaultTrack = !0
                        }, e.onManifestParsed = function (t) {
                            var e = this.tracks = t.audioTracks || [];
                            this.hls.trigger(x.default.AUDIO_TRACKS_UPDATED, {
                                audioTracks: e
                            }), this._selectAudioGroup(this.hls.nextLoadLevel)
                        }, e.onAudioTrackLoaded = function (t) {
                            if (t.id >= this.tracks.length) M.logger.warn("Invalid audio track id:", t.id);
                            else {
                                if (M.logger.log("audioTrack " + t.id + " loaded"), this.tracks[t.id].details = t.details, t.details.live && !this.hasInterval()) {
                                    var e = 1e3 * t.details.targetduration;
                                    this.setInterval(e)
                                } !t.details.live && this.hasInterval() && this.clearInterval()
                            }
                        }, e.onAudioTrackSwitched = function (t) {
                            var e = this.tracks[t.id].groupId;
                            e && this.audioGroupId !== e && (this.audioGroupId = e)
                        }, e.onLevelLoaded = function (t) {
                            this._selectAudioGroup(t.level)
                        }, e.onError = function (t) {
                            t.type === f.ErrorTypes.NETWORK_ERROR && (t.fatal && this.clearInterval(), t.details === f.ErrorDetails.AUDIO_TRACK_LOAD_ERROR && (M.logger.warn("Network failure on audio-track id:", t.context.id), this._handleLoadError()))
                        }, e._setAudioTrack = function (t) {
                            if (this._trackId === t && this.tracks[this._trackId].details) M.logger.debug("Same id as current audio-track passed, and track details available -> no-op");
                            else if (t < 0 || t >= this.tracks.length) M.logger.warn("Invalid id passed to audio-track controller");
                            else {
                                var e = this.tracks[t];
                                M.logger.log("Now switching to audio-track index " + t), this.clearInterval(), this._trackId = t;
                                var r = e.url,
                                    i = e.type,
                                    n = e.id;
                                this.hls.trigger(x.default.AUDIO_TRACK_SWITCHING, {
                                    id: n,
                                    type: i,
                                    url: r
                                }), this._loadTrackDetailsIfNeeded(e)
                            }
                        }, e.doTick = function () {
                            this._updateTrack(this._trackId)
                        }, e._selectAudioGroup = function (t) {
                            var e = this.hls.levels[t];
                            if (e && e.audioGroupIds) {
                                var r = e.audioGroupIds[e.urlId];
                                this.audioGroupId !== r && (this.audioGroupId = r, this._selectInitialAudioTrack())
                            }
                        }, e._selectInitialAudioTrack = function () {
                            var e = this,
                                t = this.tracks;
                            if (t.length) {
                                var r = this.tracks[this._trackId],
                                    i = null;
                                if (r && (i = r.name), this._selectDefaultTrack) {
                                    var n = t.filter(function (t) {
                                        return t.default
                                    });
                                    n.length ? t = n : M.logger.warn("No default audio tracks defined")
                                }
                                var a = !1,
                                    o = function () {
                                        t.forEach(function (t) {
                                            a || e.audioGroupId && t.groupId !== e.audioGroupId || i && i !== t.name || (e._setAudioTrack(t.id), a = !0)
                                        })
                                    };
                                o(), a || (i = null, o()), a || (M.logger.error("No track found for running audio group-ID: " + this.audioGroupId), this.hls.trigger(x.default.ERROR, {
                                    type: f.ErrorTypes.MEDIA_ERROR,
                                    details: f.ErrorDetails.AUDIO_TRACK_LOAD_ERROR,
                                    fatal: !0
                                }))
                            }
                        }, e._needsTrackLoading = function (t) {
                            var e = t.details,
                                r = t.url;
                            return !(e && !e.live) && !!r
                        }, e._loadTrackDetailsIfNeeded = function (t) {
                            if (this._needsTrackLoading(t)) {
                                var e = t.url,
                                    r = t.id;
                                M.logger.log("loading audio-track playlist for id: " + r), this.hls.trigger(x.default.AUDIO_TRACK_LOADING, {
                                    url: e,
                                    id: r
                                })
                            }
                        }, e._updateTrack = function (t) {
                            if (!(t < 0 || t >= this.tracks.length)) {
                                this.clearInterval(), this._trackId = t, M.logger.log("trying to update audio-track " + t);
                                var e = this.tracks[t];
                                this._loadTrackDetailsIfNeeded(e)
                            }
                        }, e._handleLoadError = function () {
                            this.trackIdBlacklist[this._trackId] = !0;
                            var t = this._trackId,
                                e = this.tracks[t],
                                r = e.name,
                                i = e.language,
                                n = e.groupId;
                            M.logger.warn("Loading failed on audio track id: " + t + ", group-id: " + n + ', name/language: "' + r + '" / "' + i + '"');
                            for (var a = t, o = 0; o < this.tracks.length; o++) {
                                if (!this.trackIdBlacklist[o])
                                    if (this.tracks[o].name === r) {
                                        a = o;
                                        break
                                    }
                            }
                            a !== t ? (M.logger.log("Attempting audio-track fallback id:", a, "group-id:", this.tracks[a].groupId), this._setAudioTrack(a)) : M.logger.warn('No fallback audio-track found for name/language: "' + r + '" / "' + i + '"')
                        },
                            function (t, e, r) {
                                e && re(t.prototype, e), r && re(t, r)
                            }(t, [{
                                key: "audioTracks",
                                get: function () {
                                    return this.tracks
                                }
                            }, {
                                key: "audioTrack",
                                get: function () {
                                    return this._trackId
                                },
                                set: function (t) {
                                    this._setAudioTrack(t), this._selectDefaultTrack = !1
                                }
                            }]), t
                    }(gt);

                    function ne(t, e) {
                        for (var r = 0; r < e.length; r++) {
                            var i = e[r];
                            i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), Object.defineProperty(t, i.key, i)
                        }
                    }

                    function ae() {
                        return {
                            decode: function (t) {
                                if (!t) return "";
                                if ("string" != typeof t) throw new Error("Error - expected string data.");
                                return decodeURIComponent(encodeURIComponent(t))
                            }
                        }
                    }
                    var oe = window.performance,
                        se = function (i) {
                            function t(t, e) {
                                var r;
                                return (r = i.call(this, t, x.default.MEDIA_ATTACHED, x.default.MEDIA_DETACHING, x.default.AUDIO_TRACKS_UPDATED, x.default.AUDIO_TRACK_SWITCHING, x.default.AUDIO_TRACK_LOADED, x.default.KEY_LOADED, x.default.FRAG_LOADED, x.default.FRAG_PARSING_INIT_SEGMENT, x.default.FRAG_PARSING_DATA, x.default.FRAG_PARSED, x.default.ERROR, x.default.BUFFER_RESET, x.default.BUFFER_CREATED, x.default.BUFFER_APPENDED, x.default.BUFFER_FLUSHED, x.default.INIT_PTS_FOUND) || this).fragmentTracker = e, r.config = t.config, r.audioCodecSwap = !1, r._state = mt, r.initPTS = [], r.waitingFragment = null, r.videoTrackCC = null, r
                            } ! function (t, e) {
                                t.prototype = Object.create(e.prototype), (t.prototype.constructor = t).__proto__ = e
                            }(t, i);
                            var e = t.prototype;
                            return e.onInitPtsFound = function (t) {
                                var e = t.id,
                                    r = t.frag.cc,
                                    i = t.initPTS;
                                "main" === e && (this.initPTS[r] = i, this.videoTrackCC = r, M.logger.log("InitPTS for cc: " + r + " found from video track: " + i), this.state === wt && this.tick())
                            }, e.startLoad = function (t) {
                                if (this.tracks) {
                                    var e = this.lastCurrentTime;
                                    this.stopLoad(), this.setInterval(100), (this.fragLoadError = 0) < e && -1 === t ? (M.logger.log("audio:override startPosition with lastCurrentTime @" + e.toFixed(3)), this.state = yt) : (this.lastCurrentTime = this.startPosition ? this.startPosition : t, this.state = vt), this.nextLoadPosition = this.startPosition = this.lastCurrentTime, this.tick()
                                } else this.startPosition = t, this.state = mt
                            }, e.doTick = function () {
                                var t, e, r, i = this.hls,
                                    n = i.config;
                                switch (this.state) {
                                    case Ct:
                                    case At:
                                    case Lt:
                                        break;
                                    case vt:
                                        this.state = Tt, this.loadedmetadata = !1;
                                        break;
                                    case yt:
                                        var a = this.tracks;
                                        if (!a) break;
                                        if (!this.media && (this.startFragRequested || !n.startFragPrefetch)) break;
                                        if (this.loadedmetadata) t = this.media.currentTime;
                                        else if (void 0 === (t = this.nextLoadPosition)) break;
                                        var o = this.mediaBuffer ? this.mediaBuffer : this.media,
                                            s = this.videoBuffer ? this.videoBuffer : this.media,
                                            l = $.bufferInfo(o, t, n.maxBufferHole),
                                            u = $.bufferInfo(s, t, n.maxBufferHole),
                                            d = l.len,
                                            c = l.end,
                                            f = this.fragPrevious,
                                            h = Math.min(n.maxBufferLength, n.maxMaxBufferLength),
                                            p = Math.max(h, u.len),
                                            g = this.audioSwitch,
                                            m = this.trackId;
                                        if ((d < p || g) && m < a.length) {
                                            if (void 0 === (r = a[m].details)) {
                                                this.state = Tt;
                                                break
                                            }
                                            if (!g && this._streamEnded(l, r)) return this.hls.trigger(x.default.BUFFER_EOS, {
                                                type: "audio"
                                            }), void (this.state = Rt);
                                            var v, y = r.fragments,
                                                A = y.length,
                                                _ = y[0].start,
                                                b = y[A - 1].start + y[A - 1].duration;
                                            if (g)
                                                if (r.live && !r.PTSKnown) M.logger.log("switching audiotrack, live stream, unknown PTS,load first fragment"), c = 0;
                                                else if (c = t, r.PTSKnown && t < _) {
                                                    if (!(l.end > _ || l.nextStart)) return;
                                                    M.logger.log("alt audio track ahead of main track, seek to start of alt audio track"), this.media.currentTime = _ + .05
                                                }
                                            if (r.initSegment && !r.initSegment.data) v = r.initSegment;
                                            else if (c <= _) {
                                                if (v = y[0], null !== this.videoTrackCC && v.cc !== this.videoTrackCC && (v = function (t, e) {
                                                    return H.search(t, function (t) {
                                                        return t.cc < e ? 1 : t.cc > e ? -1 : 0
                                                    })
                                                }(y, this.videoTrackCC)), r.live && v.loadIdx && v.loadIdx === this.fragLoadIdx) {
                                                    var E = l.nextStart ? l.nextStart : _;
                                                    return M.logger.log("no alt audio available @currentTime:" + this.media.currentTime + ", seeking @" + (E + .05)), void (this.media.currentTime = E + .05)
                                                }
                                            } else {
                                                var T, S = n.maxFragLookUpTolerance,
                                                    k = f ? y[f.sn - y[0].sn + 1] : void 0,
                                                    L = function (t) {
                                                        var e = Math.min(S, t.duration);
                                                        return t.start + t.duration - e <= c ? 1 : t.start - e > c && t.start ? -1 : 0
                                                    };
                                                (T = c < b ? (b - S < c && (S = 0), k && !L(k) ? k : H.search(y, L)) : y[A - 1]) && (_ = (v = T).start, f && v.level === f.level && v.sn === f.sn && (v.sn < r.endSN ? (v = y[v.sn + 1 - r.startSN], M.logger.log("SN just loaded, load next one: " + v.sn)) : v = null))
                                            }
                                            v && (v.encrypted ? (M.logger.log("Loading key for " + v.sn + " of [" + r.startSN + " ," + r.endSN + "],track " + m), this.state = _t, i.trigger(x.default.KEY_LOADING, {
                                                frag: v
                                            })) : (M.logger.log("Loading " + v.sn + ", cc: " + v.cc + " of [" + r.startSN + " ," + r.endSN + "],track " + m + ", currentTime:" + t + ",bufferEnd:" + c.toFixed(3)), this.fragCurrent = v, !g && this.fragmentTracker.getState(v) !== j || ("initSegment" !== v.sn && (this.startFragRequested = !0), Object(I.isFiniteNumber)(v.sn) && (this.nextLoadPosition = v.start + v.duration), i.trigger(x.default.FRAG_LOADING, {
                                                frag: v
                                            }), this.state = bt)))
                                        }
                                        break;
                                    case Tt:
                                        (e = this.tracks[this.trackId]) && e.details && (this.state = yt);
                                        break;
                                    case Et:
                                        var R = oe.now(),
                                            C = this.retryDate,
                                            w = (o = this.media) && o.seeking;
                                        (!C || C <= R || w) && (M.logger.log("audioStreamController: retryDate reached, switch back to IDLE state"), this.state = yt);
                                        break;
                                    case wt:
                                        var O = this.videoTrackCC;
                                        if (void 0 === this.initPTS[O]) break;
                                        var P = this.waitingFragment;
                                        if (P) {
                                            var D = P.frag.cc;
                                            O !== D ? (e = this.tracks[this.trackId]).details && e.details.live && (M.logger.warn("Waiting fragment CC (" + D + ") does not match video track CC (" + O + ")"), this.waitingFragment = null, this.state = yt) : (this.state = bt, this.onFragLoaded(this.waitingFragment), this.waitingFragment = null)
                                        } else this.state = yt
                                }
                            }, e.onMediaAttached = function (t) {
                                var e = this.media = this.mediaBuffer = t.media;
                                this.onvseeking = this.onMediaSeeking.bind(this), this.onvended = this.onMediaEnded.bind(this), e.addEventListener("seeking", this.onvseeking), e.addEventListener("ended", this.onvended);
                                var r = this.config;
                                this.tracks && r.autoStartLoad && this.startLoad(r.startPosition)
                            }, e.onMediaDetaching = function () {
                                var t = this.media;
                                t && t.ended && (M.logger.log("MSE detaching and video ended, reset startPosition"), this.startPosition = this.lastCurrentTime = 0), t && (t.removeEventListener("seeking", this.onvseeking), t.removeEventListener("ended", this.onvended), this.onvseeking = this.onvseeked = this.onvended = null), this.media = this.mediaBuffer = this.videoBuffer = null, this.loadedmetadata = !1, this.fragmentTracker.removeAllFragments(), this.stopLoad()
                            }, e.onAudioTracksUpdated = function (t) {
                                M.logger.log("audio tracks updated"), this.tracks = t.audioTracks
                            }, e.onAudioTrackSwitching = function (t) {
                                var e = !!t.url;
                                this.trackId = t.id, this.fragCurrent = null, this.state = At, this.waitingFragment = null, e ? this.setInterval(100) : this.demuxer && (this.demuxer.destroy(), this.demuxer = null), e && (this.audioSwitch = !0, this.state = yt), this.tick()
                            }, e.onAudioTrackLoaded = function (t) {
                                var e = t.details,
                                    r = t.id,
                                    i = this.tracks[r],
                                    n = e.totalduration,
                                    a = 0;
                                if (M.logger.log("track " + r + " loaded [" + e.startSN + "," + e.endSN + "],duration:" + n), e.live) {
                                    var o = i.details;
                                    o && 0 < e.fragments.length ? (at(o, e), a = e.fragments[0].start, e.PTSKnown ? M.logger.log("live audio playlist sliding:" + a.toFixed(3)) : M.logger.log("live audio playlist - outdated PTS, unknown sliding")) : (e.PTSKnown = !1, M.logger.log("live audio playlist - first load, unknown sliding"))
                                } else e.PTSKnown = !1;
                                if (i.details = e, !this.startFragRequested) {
                                    if (-1 === this.startPosition) {
                                        var s = e.startTimeOffset;
                                        Object(I.isFiniteNumber)(s) ? (M.logger.log("start time offset found in playlist, adjust startPosition to " + s), this.startPosition = s) : e.live ? (this.startPosition = this.computeLivePosition(a, e), M.logger.log("compute startPosition for audio-track to " + this.startPosition)) : this.startPosition = 0
                                    }
                                    this.nextLoadPosition = this.startPosition
                                }
                                this.state === Tt && (this.state = yt), this.tick()
                            }, e.onKeyLoaded = function () {
                                this.state === _t && (this.state = yt, this.tick())
                            }, e.onFragLoaded = function (t) {
                                var e = this.fragCurrent,
                                    r = t.frag;
                                if (this.state === bt && e && "audio" === r.type && r.level === e.level && r.sn === e.sn) {
                                    var i = this.tracks[this.trackId],
                                        n = i.details,
                                        a = n.totalduration,
                                        o = e.level,
                                        s = e.sn,
                                        l = e.cc,
                                        u = this.config.defaultAudioCodec || i.audioCodec || "mp4a.40.2",
                                        d = this.stats = t.stats;
                                    if ("initSegment" === s) this.state = yt, d.tparsed = d.tbuffered = oe.now(), n.initSegment.data = t.payload, this.hls.trigger(x.default.FRAG_BUFFERED, {
                                        stats: d,
                                        frag: e,
                                        id: "audio"
                                    }), this.tick();
                                    else {
                                        this.state = St, this.appended = !1, this.demuxer || (this.demuxer = new et(this.hls, "audio"));
                                        var c = this.initPTS[l],
                                            f = n.initSegment ? n.initSegment.data : [];
                                        if (n.initSegment || void 0 !== c) {
                                            this.pendingBuffering = !0, M.logger.log("Demuxing " + s + " of [" + n.startSN + " ," + n.endSN + "],track " + o);
                                            this.demuxer.push(t.payload, f, u, null, e, a, !1, c)
                                        } else M.logger.log("unknown video PTS for continuity counter " + l + ", waiting for video PTS before demuxing audio frag " + s + " of [" + n.startSN + " ," + n.endSN + "],track " + o), this.waitingFragment = t, this.state = wt
                                    }
                                }
                                this.fragLoadError = 0
                            }, e.onFragParsingInitSegment = function (t) {
                                var e = this.fragCurrent,
                                    r = t.frag;
                                if (e && "audio" === t.id && r.sn === e.sn && r.level === e.level && this.state === St) {
                                    var i, n = t.tracks;
                                    if (n.video && delete n.video, i = n.audio) {
                                        i.levelCodec = i.codec, i.id = t.id, this.hls.trigger(x.default.BUFFER_CODECS, n), M.logger.log("audio track:audio,container:" + i.container + ",codecs[level/parsed]=[" + i.levelCodec + "/" + i.codec + "]");
                                        var a = i.initSegment;
                                        if (a) {
                                            var o = {
                                                type: "audio",
                                                data: a,
                                                parent: "audio",
                                                content: "initSegment"
                                            };
                                            this.audioSwitch ? this.pendingData = [o] : (this.appended = !0, this.pendingBuffering = !0, this.hls.trigger(x.default.BUFFER_APPENDING, o))
                                        }
                                        this.tick()
                                    }
                                }
                            }, e.onFragParsingData = function (e) {
                                var r = this,
                                    t = this.fragCurrent,
                                    i = e.frag;
                                if (t && "audio" === e.id && "audio" === e.type && i.sn === t.sn && i.level === t.level && this.state === St) {
                                    var n = this.trackId,
                                        a = this.tracks[n],
                                        o = this.hls;
                                    Object(I.isFiniteNumber)(e.endPTS) || (e.endPTS = e.startPTS + t.duration, e.endDTS = e.startDTS + t.duration), t.addElementaryStream(h.AUDIO), M.logger.log("parsed " + e.type + ",PTS:[" + e.startPTS.toFixed(3) + "," + e.endPTS.toFixed(3) + "],DTS:[" + e.startDTS.toFixed(3) + "/" + e.endDTS.toFixed(3) + "],nb:" + e.nb), nt(a.details, t, e.startPTS, e.endPTS);
                                    var s = this.audioSwitch,
                                        l = this.media,
                                        u = !1;
                                    if (s)
                                        if (l && l.readyState) {
                                            var d = l.currentTime;
                                            M.logger.log("switching audio track : currentTime:" + d), d >= e.startPTS && (M.logger.log("switching audio track : flushing all audio"), this.state = Lt, o.trigger(x.default.BUFFER_FLUSHING, {
                                                startOffset: 0,
                                                endOffset: Number.POSITIVE_INFINITY,
                                                type: "audio"
                                            }), u = !0, this.audioSwitch = !1, o.trigger(x.default.AUDIO_TRACK_SWITCHED, {
                                                id: n
                                            }))
                                        } else this.audioSwitch = !1, o.trigger(x.default.AUDIO_TRACK_SWITCHED, {
                                            id: n
                                        });
                                    var c = this.pendingData;
                                    if (!c) return M.logger.warn("Apparently attempt to enqueue media payload without codec initialization data upfront"), void o.trigger(x.default.ERROR, {
                                        type: f.ErrorTypes.MEDIA_ERROR,
                                        details: null,
                                        fatal: !0
                                    });
                                    this.audioSwitch || ([e.data1, e.data2].forEach(function (t) {
                                        t && t.length && c.push({
                                            type: e.type,
                                            data: t,
                                            parent: "audio",
                                            content: "data"
                                        })
                                    }), !u && c.length && (c.forEach(function (t) {
                                        r.state === St && (r.pendingBuffering = !0, r.hls.trigger(x.default.BUFFER_APPENDING, t))
                                    }), this.pendingData = [], this.appended = !0)), this.tick()
                                }
                            }, e.onFragParsed = function (t) {
                                var e = this.fragCurrent,
                                    r = t.frag;
                                e && "audio" === t.id && r.sn === e.sn && r.level === e.level && this.state === St && (this.stats.tparsed = oe.now(), this.state = kt, this._checkAppendedParsed())
                            }, e.onBufferReset = function () {
                                this.mediaBuffer = this.videoBuffer = null, this.loadedmetadata = !1
                            }, e.onBufferCreated = function (t) {
                                var e = t.tracks.audio;
                                e && (this.mediaBuffer = e.buffer, this.loadedmetadata = !0), t.tracks.video && (this.videoBuffer = t.tracks.video.buffer)
                            }, e.onBufferAppended = function (t) {
                                if ("audio" === t.parent) {
                                    var e = this.state;
                                    e !== St && e !== kt || (this.pendingBuffering = 0 < t.pending, this._checkAppendedParsed())
                                }
                            }, e._checkAppendedParsed = function () {
                                if (!(this.state !== kt || this.appended && this.pendingBuffering)) {
                                    var t = this.fragCurrent,
                                        e = this.stats,
                                        r = this.hls;
                                    if (t) {
                                        this.fragPrevious = t, e.tbuffered = oe.now(), r.trigger(x.default.FRAG_BUFFERED, {
                                            stats: e,
                                            frag: t,
                                            id: "audio"
                                        });
                                        var i = this.mediaBuffer ? this.mediaBuffer : this.media;
                                        i && M.logger.log("audio buffered : " + lt.toString(i.buffered)), this.audioSwitch && this.appended && (this.audioSwitch = !1, r.trigger(x.default.AUDIO_TRACK_SWITCHED, {
                                            id: this.trackId
                                        })), this.state = yt
                                    }
                                    this.tick()
                                }
                            }, e.onError = function (t) {
                                var e = t.frag;
                                if (!e || "audio" === e.type) switch (t.details) {
                                    case f.ErrorDetails.FRAG_LOAD_ERROR:
                                    case f.ErrorDetails.FRAG_LOAD_TIMEOUT:
                                        var r = t.frag;
                                        if (r && "audio" !== r.type) break;
                                        if (!t.fatal) {
                                            var i = this.fragLoadError;
                                            i ? i++ : i = 1;
                                            var n = this.config;
                                            if (i <= n.fragLoadingMaxRetry) {
                                                this.fragLoadError = i;
                                                var a = Math.min(Math.pow(2, i - 1) * n.fragLoadingRetryDelay, n.fragLoadingMaxRetryTimeout);
                                                M.logger.warn("AudioStreamController: frag loading failed, retry in " + a + " ms"), this.retryDate = oe.now() + a, this.state = Et
                                            } else M.logger.error("AudioStreamController: " + t.details + " reaches max retry, redispatch as fatal ..."), t.fatal = !0, this.state = Ct
                                        }
                                        break;
                                    case f.ErrorDetails.AUDIO_TRACK_LOAD_ERROR:
                                    case f.ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT:
                                    case f.ErrorDetails.KEY_LOAD_ERROR:
                                    case f.ErrorDetails.KEY_LOAD_TIMEOUT:
                                        this.state !== Ct && (this.state = t.fatal ? Ct : yt, M.logger.warn("AudioStreamController: " + t.details + " while loading frag, now switching to " + this.state + " state ..."));
                                        break;
                                    case f.ErrorDetails.BUFFER_FULL_ERROR:
                                        if ("audio" === t.parent && (this.state === St || this.state === kt)) {
                                            var o = this.mediaBuffer,
                                                s = this.media.currentTime;
                                            if (o && $.isBuffered(o, s) && $.isBuffered(o, s + .5)) {
                                                var l = this.config;
                                                l.maxMaxBufferLength >= l.maxBufferLength && (l.maxMaxBufferLength /= 2, M.logger.warn("AudioStreamController: reduce max buffer length to " + l.maxMaxBufferLength + "s")), this.state = yt
                                            } else M.logger.warn("AudioStreamController: buffer full error also media.currentTime is not buffered, flush audio buffer"), this.fragCurrent = null, this.state = Lt, this.hls.trigger(x.default.BUFFER_FLUSHING, {
                                                startOffset: 0,
                                                endOffset: Number.POSITIVE_INFINITY,
                                                type: "audio"
                                            })
                                        }
                                }
                            }, e.onBufferFlushed = function () {
                                var e = this,
                                    t = this.pendingData;
                                t && t.length ? (M.logger.log("AudioStreamController: appending pending audio data after buffer flushed"), t.forEach(function (t) {
                                    e.hls.trigger(x.default.BUFFER_APPENDING, t)
                                }), this.appended = !0, this.pendingData = [], this.state = kt) : (this.state = yt, this.fragPrevious = null, this.tick())
                            },
                                function (t, e, r) {
                                    e && ne(t.prototype, e), r && ne(t, r)
                                }(t, [{
                                    key: "state",
                                    set: function (t) {
                                        if (this.state !== t) {
                                            var e = this.state;
                                            this._state = t, M.logger.log("audio stream:" + e + "->" + t)
                                        }
                                    },
                                    get: function () {
                                        return this._state
                                    }
                                }]), t
                        }(Pt),
                        le = function () {
                            if ("undefined" != typeof window && window.VTTCue) return window.VTTCue;
                            var A = {
                                "": !0,
                                lr: !0,
                                rl: !0
                            },
                                e = {
                                    start: !0,
                                    middle: !0,
                                    end: !0,
                                    left: !0,
                                    right: !0
                                };

                            function _(t) {
                                return "string" == typeof t && (!!e[t.toLowerCase()] && t.toLowerCase())
                            }

                            function b(t) {
                                for (var e = 1; e < arguments.length; e++) {
                                    var r = arguments[e];
                                    for (var i in r) t[i] = r[i]
                                }
                                return t
                            }

                            function t(t, e, r) {
                                var i = this,
                                    n = {
                                        enumerable: !0
                                    };
                                i.hasBeenReset = !1;
                                var a = "",
                                    o = !1,
                                    s = t,
                                    l = e,
                                    u = r,
                                    d = null,
                                    c = "",
                                    f = !0,
                                    h = "auto",
                                    p = "start",
                                    g = 50,
                                    m = "middle",
                                    v = 50,
                                    y = "middle";
                                Object.defineProperty(i, "id", b({}, n, {
                                    get: function () {
                                        return a
                                    },
                                    set: function (t) {
                                        a = "" + t
                                    }
                                })), Object.defineProperty(i, "pauseOnExit", b({}, n, {
                                    get: function () {
                                        return o
                                    },
                                    set: function (t) {
                                        o = !!t
                                    }
                                })), Object.defineProperty(i, "startTime", b({}, n, {
                                    get: function () {
                                        return s
                                    },
                                    set: function (t) {
                                        if ("number" != typeof t) throw new TypeError("Start time must be set to a number.");
                                        s = t, this.hasBeenReset = !0
                                    }
                                })), Object.defineProperty(i, "endTime", b({}, n, {
                                    get: function () {
                                        return l
                                    },
                                    set: function (t) {
                                        if ("number" != typeof t) throw new TypeError("End time must be set to a number.");
                                        l = t, this.hasBeenReset = !0
                                    }
                                })), Object.defineProperty(i, "text", b({}, n, {
                                    get: function () {
                                        return u
                                    },
                                    set: function (t) {
                                        u = "" + t, this.hasBeenReset = !0
                                    }
                                })), Object.defineProperty(i, "region", b({}, n, {
                                    get: function () {
                                        return d
                                    },
                                    set: function (t) {
                                        d = t, this.hasBeenReset = !0
                                    }
                                })), Object.defineProperty(i, "vertical", b({}, n, {
                                    get: function () {
                                        return c
                                    },
                                    set: function (t) {
                                        var e = function (t) {
                                            return "string" == typeof t && (!!A[t.toLowerCase()] && t.toLowerCase())
                                        }(t);
                                        if (!1 === e) throw new SyntaxError("An invalid or illegal string was specified.");
                                        c = e, this.hasBeenReset = !0
                                    }
                                })), Object.defineProperty(i, "snapToLines", b({}, n, {
                                    get: function () {
                                        return f
                                    },
                                    set: function (t) {
                                        f = !!t, this.hasBeenReset = !0
                                    }
                                })), Object.defineProperty(i, "line", b({}, n, {
                                    get: function () {
                                        return h
                                    },
                                    set: function (t) {
                                        if ("number" != typeof t && "auto" !== t) throw new SyntaxError("An invalid number or illegal string was specified.");
                                        h = t, this.hasBeenReset = !0
                                    }
                                })), Object.defineProperty(i, "lineAlign", b({}, n, {
                                    get: function () {
                                        return p
                                    },
                                    set: function (t) {
                                        var e = _(t);
                                        if (!e) throw new SyntaxError("An invalid or illegal string was specified.");
                                        p = e, this.hasBeenReset = !0
                                    }
                                })), Object.defineProperty(i, "position", b({}, n, {
                                    get: function () {
                                        return g
                                    },
                                    set: function (t) {
                                        if (t < 0 || 100 < t) throw new Error("Position must be between 0 and 100.");
                                        g = t, this.hasBeenReset = !0
                                    }
                                })), Object.defineProperty(i, "positionAlign", b({}, n, {
                                    get: function () {
                                        return m
                                    },
                                    set: function (t) {
                                        var e = _(t);
                                        if (!e) throw new SyntaxError("An invalid or illegal string was specified.");
                                        m = e, this.hasBeenReset = !0
                                    }
                                })), Object.defineProperty(i, "size", b({}, n, {
                                    get: function () {
                                        return v
                                    },
                                    set: function (t) {
                                        if (t < 0 || 100 < t) throw new Error("Size must be between 0 and 100.");
                                        v = t, this.hasBeenReset = !0
                                    }
                                })), Object.defineProperty(i, "align", b({}, n, {
                                    get: function () {
                                        return y
                                    },
                                    set: function (t) {
                                        var e = _(t);
                                        if (!e) throw new SyntaxError("An invalid or illegal string was specified.");
                                        y = e, this.hasBeenReset = !0
                                    }
                                })), i.displayState = void 0
                            }
                            return t.prototype.getCueAsHTML = function () {
                                return window.WebVTT.convertCueToDOMTree(window, this.text)
                            }, t
                        }();

                    function ue() {
                        this.window = window, this.state = "INITIAL", this.buffer = "", this.decoder = new ae, this.regionList = []
                    }

                    function de() {
                        this.values = Object.create(null)
                    }

                    function ce(t, e, r, i) {
                        var n = i ? t.split(i) : [t];
                        for (var a in n)
                            if ("string" == typeof n[a]) {
                                var o = n[a].split(r);
                                if (2 === o.length) e(o[0], o[1])
                            }
                    }
                    de.prototype = {
                        set: function (t, e) {
                            this.get(t) || "" === e || (this.values[t] = e)
                        },
                        get: function (t, e, r) {
                            return r ? this.has(t) ? this.values[t] : e[r] : this.has(t) ? this.values[t] : e
                        },
                        has: function (t) {
                            return t in this.values
                        },
                        alt: function (t, e, r) {
                            for (var i = 0; i < r.length; ++i)
                                if (e === r[i]) {
                                    this.set(t, e);
                                    break
                                }
                        },
                        integer: function (t, e) {
                            /^-?\d+$/.test(e) && this.set(t, parseInt(e, 10))
                        },
                        percent: function (t, e) {
                            return !!(e.match(/^([\d]{1,3})(\.[\d]*)?%$/) && 0 <= (e = parseFloat(e)) && e <= 100) && (this.set(t, e), !0)
                        }
                    };
                    var fe = new le(0, 0, 0),
                        he = "middle" === fe.align ? "middle" : "center";

                    function pe(e, t, o) {
                        var r = e;

                        function i() {
                            var t = function (t) {
                                function e(t, e, r, i) {
                                    return 3600 * (0 | t) + 60 * (0 | e) + (0 | r) + (0 | i) / 1e3
                                }
                                var r = t.match(/^(\d+):(\d{2})(:\d{2})?\.(\d{3})/);
                                return r ? r[3] ? e(r[1], r[2], r[3].replace(":", ""), r[4]) : 59 < r[1] ? e(r[1], r[2], 0, r[4]) : e(0, r[1], r[2], r[4]) : null
                            }(e);
                            if (null === t) throw new Error("Malformed timestamp: " + r);
                            return e = e.replace(/^[^\sa-zA-Z-]+/, ""), t
                        }

                        function n() {
                            e = e.replace(/^\s+/, "")
                        }
                        if (n(), t.startTime = i(), n(), "--\x3e" !== e.substr(0, 3)) throw new Error("Malformed time stamp (time stamps must be separated by '--\x3e'): " + r);
                        e = e.substr(3), n(), t.endTime = i(), n(),
                            function (t, e) {
                                var a = new de;
                                ce(t, function (t, e) {
                                    switch (t) {
                                        case "region":
                                            for (var r = o.length - 1; 0 <= r; r--)
                                                if (o[r].id === e) {
                                                    a.set(t, o[r].region);
                                                    break
                                                } break;
                                        case "vertical":
                                            a.alt(t, e, ["rl", "lr"]);
                                            break;
                                        case "line":
                                            var i = e.split(","),
                                                n = i[0];
                                            a.integer(t, n), a.percent(t, n) && a.set("snapToLines", !1), a.alt(t, n, ["auto"]), 2 === i.length && a.alt("lineAlign", i[1], ["start", he, "end"]);
                                            break;
                                        case "position":
                                            i = e.split(","), a.percent(t, i[0]), 2 === i.length && a.alt("positionAlign", i[1], ["start", he, "end", "line-left", "line-right", "auto"]);
                                            break;
                                        case "size":
                                            a.percent(t, e);
                                            break;
                                        case "align":
                                            a.alt(t, e, ["start", he, "end", "left", "right"])
                                    }
                                }, /:/, /\s/), e.region = a.get("region", null), e.vertical = a.get("vertical", "");
                                var r = a.get("line", "auto");
                                "auto" === r && -1 === fe.line && (r = -1), e.line = r, e.lineAlign = a.get("lineAlign", "start"), e.snapToLines = a.get("snapToLines", !0), e.size = a.get("size", 100), e.align = a.get("align", he);
                                var i = a.get("position", "auto");
                                "auto" === i && 50 === fe.position && (i = "start" === e.align || "left" === e.align ? 0 : "end" === e.align || "right" === e.align ? 100 : 50), e.position = i
                            }(e, t)
                    }

                    function ge(t) {
                        return t.replace(/<br(?: \/)?>/gi, "\n")
                    }
                    ue.prototype = {
                        parse: function (t) {
                            var i = this;

                            function e() {
                                var t = i.buffer,
                                    e = 0;
                                for (t = ge(t); e < t.length && "\r" !== t[e] && "\n" !== t[e];) ++e;
                                var r = t.substr(0, e);
                                return "\r" === t[e] && ++e, "\n" === t[e] && ++e, i.buffer = t.substr(e), r
                            }
                            t && (i.buffer += i.decoder.decode(t, {
                                stream: !0
                            }));
                            try {
                                var r;
                                if ("INITIAL" === i.state) {
                                    if (!/\r\n|\n/.test(i.buffer)) return this;
                                    var n = (r = e()).match(/^(ï»¿)?WEBVTT([ \t].*)?$/);
                                    if (!n || !n[0]) throw new Error("Malformed WebVTT signature.");
                                    i.state = "HEADER"
                                }
                                for (var a = !1; i.buffer;) {
                                    if (!/\r\n|\n/.test(i.buffer)) return this;
                                    switch (a ? a = !1 : r = e(), i.state) {
                                        case "HEADER":
                                            /:/.test(r) ? ce(r, function (t, e) { }, /:/) : r || (i.state = "ID");
                                            continue;
                                        case "NOTE":
                                            r || (i.state = "ID");
                                            continue;
                                        case "ID":
                                            if (/^NOTE($|[ \t])/.test(r)) {
                                                i.state = "NOTE";
                                                break
                                            }
                                            if (!r) continue;
                                            if (i.cue = new le(0, 0, ""), i.state = "CUE", -1 === r.indexOf("--\x3e")) {
                                                i.cue.id = r;
                                                continue
                                            }
                                        case "CUE":
                                            try {
                                                pe(r, i.cue, i.regionList)
                                            } catch (t) {
                                                i.cue = null, i.state = "BADCUE";
                                                continue
                                            }
                                            i.state = "CUETEXT";
                                            continue;
                                        case "CUETEXT":
                                            var o = -1 !== r.indexOf("--\x3e");
                                            if (!r || o && (a = !0)) {
                                                i.oncue && i.oncue(i.cue), i.cue = null, i.state = "ID";
                                                continue
                                            }
                                            i.cue.text && (i.cue.text += "\n"), i.cue.text += r;
                                            continue;
                                        case "BADCUE":
                                            r || (i.state = "ID");
                                            continue
                                    }
                                }
                            } catch (t) {
                                "CUETEXT" === i.state && i.cue && i.oncue && i.oncue(i.cue), i.cue = null, i.state = "INITIAL" === i.state ? "BADWEBVTT" : "BADCUE"
                            }
                            return this
                        },
                        flush: function () {
                            try {
                                if (this.buffer += this.decoder.decode(), !this.cue && "HEADER" !== this.state || (this.buffer += "\n\n", this.parse()), "INITIAL" === this.state) throw new Error("Malformed WebVTT signature.")
                            } catch (t) {
                                throw t
                            }
                            return this.onflush && this.onflush(), this
                        }
                    };
                    var me = ue;

                    function ve(t, e, r, i) {
                        for (var n, a, o, s, l, u = window.VTTCue || TextTrackCue, d = 0; d < i.rows.length; d++)
                            if (o = !0, s = 0, l = "", !(n = i.rows[d]).isEmpty()) {
                                for (var c = 0; c < n.chars.length; c++) n.chars[c].uchar.match(/\s/) && o ? s++ : (l += n.chars[c].uchar, o = !1);
                                (n.cueStartTime = e) === r && (r += 1e-4), a = new u(e, r, ge(l.trim())), 16 <= s ? s-- : s++, navigator.userAgent.match(/Firefox\//) ? a.line = d + 1 : a.line = 7 < d ? d - 2 : d + 1, a.align = "left", a.position = Math.max(0, Math.min(100, s / 32 * 100)), t.addCue(a)
                            }
                    }

                    function ye(t) {
                        var e = t;
                        return be.hasOwnProperty(t) && (e = be[t]), String.fromCharCode(e)
                    }
                    var Ae, _e, be = {
                        42: 225,
                        92: 233,
                        94: 237,
                        95: 243,
                        96: 250,
                        123: 231,
                        124: 247,
                        125: 209,
                        126: 241,
                        127: 9608,
                        128: 174,
                        129: 176,
                        130: 189,
                        131: 191,
                        132: 8482,
                        133: 162,
                        134: 163,
                        135: 9834,
                        136: 224,
                        137: 32,
                        138: 232,
                        139: 226,
                        140: 234,
                        141: 238,
                        142: 244,
                        143: 251,
                        144: 193,
                        145: 201,
                        146: 211,
                        147: 218,
                        148: 220,
                        149: 252,
                        150: 8216,
                        151: 161,
                        152: 42,
                        153: 8217,
                        154: 9473,
                        155: 169,
                        156: 8480,
                        157: 8226,
                        158: 8220,
                        159: 8221,
                        160: 192,
                        161: 194,
                        162: 199,
                        163: 200,
                        164: 202,
                        165: 203,
                        166: 235,
                        167: 206,
                        168: 207,
                        169: 239,
                        170: 212,
                        171: 217,
                        172: 249,
                        173: 219,
                        174: 171,
                        175: 187,
                        176: 195,
                        177: 227,
                        178: 205,
                        179: 204,
                        180: 236,
                        181: 210,
                        182: 242,
                        183: 213,
                        184: 245,
                        185: 123,
                        186: 125,
                        187: 92,
                        188: 94,
                        189: 95,
                        190: 124,
                        191: 8764,
                        192: 196,
                        193: 228,
                        194: 214,
                        195: 246,
                        196: 223,
                        197: 165,
                        198: 164,
                        199: 9475,
                        200: 197,
                        201: 229,
                        202: 216,
                        203: 248,
                        204: 9487,
                        205: 9491,
                        206: 9495,
                        207: 9499
                    },
                        Ee = {
                            17: 1,
                            18: 3,
                            21: 5,
                            22: 7,
                            23: 9,
                            16: 11,
                            19: 12,
                            20: 14
                        },
                        Te = {
                            17: 2,
                            18: 4,
                            21: 6,
                            22: 8,
                            23: 10,
                            19: 13,
                            20: 15
                        },
                        Se = {
                            25: 1,
                            26: 3,
                            29: 5,
                            30: 7,
                            31: 9,
                            24: 11,
                            27: 12,
                            28: 14
                        },
                        ke = {
                            25: 2,
                            26: 4,
                            29: 6,
                            30: 8,
                            31: 10,
                            27: 13,
                            28: 15
                        },
                        Le = ["white", "green", "blue", "cyan", "red", "yellow", "magenta", "black", "transparent"];
                    (_e = Ae || (Ae = {}))[_e.ERROR = 0] = "ERROR", _e[_e.TEXT = 1] = "TEXT", _e[_e.WARNING = 2] = "WARNING", _e[_e.INFO = 2] = "INFO", _e[_e.DEBUG = 3] = "DEBUG", _e[_e.DATA = 3] = "DATA";

                    function Re(t) {
                        for (var e = [], r = 0; r < t.length; r++) e.push(t[r].toString(16));
                        return e
                    }

                    function Ce(t, e, r) {
                        return t.substr(r || 0, e.length) === e
                    }

                    function we(t) {
                        for (var e = 5381, r = t.length; r;) e = 33 * e ^ t.charCodeAt(--r);
                        return (e >>> 0).toString()
                    }
                    var Oe = {
                        verboseFilter: {
                            DATA: 3,
                            DEBUG: 3,
                            INFO: 2,
                            WARNING: 2,
                            TEXT: 1,
                            ERROR: 0
                        },
                        time: null,
                        verboseLevel: 0,
                        setTime: function (t) {
                            this.time = t
                        },
                        log: function (t, e) {
                            this.verboseFilter[t];
                            this.verboseLevel
                        }
                    },
                        Pe = function () {
                            function t(t, e, r, i, n) {
                                this.foreground = void 0, this.underline = void 0, this.italics = void 0, this.background = void 0, this.flash = void 0, this.foreground = t || "white", this.underline = e || !1, this.italics = r || !1, this.background = i || "black", this.flash = n || !1
                            }
                            var e = t.prototype;
                            return e.reset = function () {
                                this.foreground = "white", this.underline = !1, this.italics = !1, this.background = "black", this.flash = !1
                            }, e.setStyles = function (t) {
                                for (var e = ["foreground", "underline", "italics", "background", "flash"], r = 0; r < e.length; r++) {
                                    var i = e[r];
                                    t.hasOwnProperty(i) && (this[i] = t[i])
                                }
                            }, e.isDefault = function () {
                                return "white" === this.foreground && !this.underline && !this.italics && "black" === this.background && !this.flash
                            }, e.equals = function (t) {
                                return this.foreground === t.foreground && this.underline === t.underline && this.italics === t.italics && this.background === t.background && this.flash === t.flash
                            }, e.copy = function (t) {
                                this.foreground = t.foreground, this.underline = t.underline, this.italics = t.italics, this.background = t.background, this.flash = t.flash
                            }, e.toString = function () {
                                return "color=" + this.foreground + ", underline=" + this.underline + ", italics=" + this.italics + ", background=" + this.background + ", flash=" + this.flash
                            }, t
                        }(),
                        De = function () {
                            function t(t, e, r, i, n, a) {
                                this.uchar = void 0, this.penState = void 0, this.uchar = t || " ", this.penState = new Pe(e, r, i, n, a)
                            }
                            var e = t.prototype;
                            return e.reset = function () {
                                this.uchar = " ", this.penState.reset()
                            }, e.setChar = function (t, e) {
                                this.uchar = t, this.penState.copy(e)
                            }, e.setPenState = function (t) {
                                this.penState.copy(t)
                            }, e.equals = function (t) {
                                return this.uchar === t.uchar && this.penState.equals(t.penState)
                            }, e.copy = function (t) {
                                this.uchar = t.uchar, this.penState.copy(t.penState)
                            }, e.isEmpty = function () {
                                return " " === this.uchar && this.penState.isDefault()
                            }, t
                        }(),
                        Ie = function () {
                            function t() {
                                this.chars = void 0, this.pos = void 0, this.currPenState = void 0, this.cueStartTime = void 0, this.chars = [];
                                for (var t = 0; t < 100; t++) this.chars.push(new De);
                                this.pos = 0, this.currPenState = new Pe
                            }
                            var e = t.prototype;
                            return e.equals = function (t) {
                                for (var e = !0, r = 0; r < 100; r++)
                                    if (!this.chars[r].equals(t.chars[r])) {
                                        e = !1;
                                        break
                                    } return e
                            }, e.copy = function (t) {
                                for (var e = 0; e < 100; e++) this.chars[e].copy(t.chars[e])
                            }, e.isEmpty = function () {
                                for (var t = !0, e = 0; e < 100; e++)
                                    if (!this.chars[e].isEmpty()) {
                                        t = !1;
                                        break
                                    } return t
                            }, e.setCursor = function (t) {
                                this.pos !== t && (this.pos = t), this.pos < 0 ? (Oe.log("ERROR", "Negative cursor position " + this.pos), this.pos = 0) : 100 < this.pos && (Oe.log("ERROR", "Too large cursor position " + this.pos), this.pos = 100)
                            }, e.moveCursor = function (t) {
                                var e = this.pos + t;
                                if (1 < t)
                                    for (var r = this.pos + 1; r < e + 1; r++) this.chars[r].setPenState(this.currPenState);
                                this.setCursor(e)
                            }, e.backSpace = function () {
                                this.moveCursor(-1), this.chars[this.pos].setChar(" ", this.currPenState)
                            }, e.insertChar = function (t) {
                                144 <= t && this.backSpace();
                                var e = ye(t);
                                100 <= this.pos ? Oe.log("ERROR", "Cannot insert " + t.toString(16) + " (" + e + ") at position " + this.pos + ". Skipping it!") : (this.chars[this.pos].setChar(e, this.currPenState), this.moveCursor(1))
                            }, e.clearFromPos = function (t) {
                                var e;
                                for (e = t; e < 100; e++) this.chars[e].reset()
                            }, e.clear = function () {
                                this.clearFromPos(0), this.pos = 0, this.currPenState.reset()
                            }, e.clearToEndOfRow = function () {
                                this.clearFromPos(this.pos)
                            }, e.getTextString = function () {
                                for (var t = [], e = !0, r = 0; r < 100; r++) {
                                    var i = this.chars[r].uchar;
                                    " " !== i && (e = !1), t.push(i)
                                }
                                return e ? "" : t.join("")
                            }, e.setPenStyles = function (t) {
                                this.currPenState.setStyles(t), this.chars[this.pos].setPenState(this.currPenState)
                            }, t
                        }(),
                        xe = function () {
                            function t() {
                                this.rows = void 0, this.currRow = void 0, this.nrRollUpRows = void 0, this.lastOutputScreen = void 0, this.rows = [];
                                for (var t = 0; t < 15; t++) this.rows.push(new Ie);
                                this.currRow = 14, this.nrRollUpRows = null, this.reset()
                            }
                            var e = t.prototype;
                            return e.reset = function () {
                                for (var t = 0; t < 15; t++) this.rows[t].clear();
                                this.currRow = 14
                            }, e.equals = function (t) {
                                for (var e = !0, r = 0; r < 15; r++)
                                    if (!this.rows[r].equals(t.rows[r])) {
                                        e = !1;
                                        break
                                    } return e
                            }, e.copy = function (t) {
                                for (var e = 0; e < 15; e++) this.rows[e].copy(t.rows[e])
                            }, e.isEmpty = function () {
                                for (var t = !0, e = 0; e < 15; e++)
                                    if (!this.rows[e].isEmpty()) {
                                        t = !1;
                                        break
                                    } return t
                            }, e.backSpace = function () {
                                this.rows[this.currRow].backSpace()
                            }, e.clearToEndOfRow = function () {
                                this.rows[this.currRow].clearToEndOfRow()
                            }, e.insertChar = function (t) {
                                this.rows[this.currRow].insertChar(t)
                            }, e.setPen = function (t) {
                                this.rows[this.currRow].setPenStyles(t)
                            }, e.moveCursor = function (t) {
                                this.rows[this.currRow].moveCursor(t)
                            }, e.setCursor = function (t) {
                                Oe.log("INFO", "setCursor: " + t), this.rows[this.currRow].setCursor(t)
                            }, e.setPAC = function (t) {
                                Oe.log("INFO", "pacData = " + JSON.stringify(t));
                                var e = t.row - 1;
                                if (this.nrRollUpRows && e < this.nrRollUpRows - 1 && (e = this.nrRollUpRows - 1), this.nrRollUpRows && this.currRow !== e) {
                                    for (var r = 0; r < 15; r++) this.rows[r].clear();
                                    var i = this.currRow + 1 - this.nrRollUpRows,
                                        n = this.lastOutputScreen;
                                    if (n) {
                                        var a = n.rows[i].cueStartTime;
                                        if (a && Oe.time && a < Oe.time)
                                            for (var o = 0; o < this.nrRollUpRows; o++) this.rows[e - this.nrRollUpRows + o + 1].copy(n.rows[i + o])
                                    }
                                }
                                this.currRow = e;
                                var s = this.rows[this.currRow];
                                if (null !== t.indent) {
                                    var l = t.indent,
                                        u = Math.max(l - 1, 0);
                                    s.setCursor(t.indent), t.color = s.chars[u].penState.foreground
                                }
                                var d = {
                                    foreground: t.color,
                                    underline: t.underline,
                                    italics: t.italics,
                                    background: "black",
                                    flash: !1
                                };
                                this.setPen(d)
                            }, e.setBkgData = function (t) {
                                Oe.log("INFO", "bkgData = " + JSON.stringify(t)), this.backSpace(), this.setPen(t), this.insertChar(32)
                            }, e.setRollUpRows = function (t) {
                                this.nrRollUpRows = t
                            }, e.rollUp = function () {
                                if (null !== this.nrRollUpRows) {
                                    Oe.log("TEXT", this.getDisplayText());
                                    var t = this.currRow + 1 - this.nrRollUpRows,
                                        e = this.rows.splice(t, 1)[0];
                                    e.clear(), this.rows.splice(this.currRow, 0, e), Oe.log("INFO", "Rolling up")
                                } else Oe.log("DEBUG", "roll_up but nrRollUpRows not set yet")
                            }, e.getDisplayText = function (t) {
                                t = t || !1;
                                for (var e = [], r = "", i = -1, n = 0; n < 15; n++) {
                                    var a = this.rows[n].getTextString();
                                    a && (i = n + 1, t ? e.push("Row " + i + ": '" + a + "'") : e.push(a.trim()))
                                }
                                return 0 < e.length && (r = t ? "[" + e.join(" | ") + "]" : e.join("\n")), r
                            }, e.getTextAndFormat = function () {
                                return this.rows
                            }, t
                        }(),
                        Me = function () {
                            function t(t, e) {
                                this.chNr = void 0, this.outputFilter = void 0, this.mode = void 0, this.verbose = void 0, this.displayedMemory = void 0, this.nonDisplayedMemory = void 0, this.lastOutputScreen = void 0, this.currRollUpRow = void 0, this.writeScreen = void 0, this.cueStartTime = void 0, this.lastCueEndTime = void 0, this.chNr = t, this.outputFilter = e, this.mode = null, this.verbose = 0, this.displayedMemory = new xe, this.nonDisplayedMemory = new xe, this.lastOutputScreen = new xe, this.currRollUpRow = this.displayedMemory.rows[14], this.writeScreen = this.displayedMemory, this.mode = null, this.cueStartTime = null
                            }
                            var e = t.prototype;
                            return e.reset = function () {
                                this.mode = null, this.displayedMemory.reset(), this.nonDisplayedMemory.reset(), this.lastOutputScreen.reset(), this.currRollUpRow = this.displayedMemory.rows[14], this.writeScreen = this.displayedMemory, this.mode = null, this.cueStartTime = null
                            }, e.getHandler = function () {
                                return this.outputFilter
                            }, e.setHandler = function (t) {
                                this.outputFilter = t
                            }, e.setPAC = function (t) {
                                this.writeScreen.setPAC(t)
                            }, e.setBkgData = function (t) {
                                this.writeScreen.setBkgData(t)
                            }, e.setMode = function (t) {
                                t !== this.mode && (this.mode = t, Oe.log("INFO", "MODE=" + t), "MODE_POP-ON" === this.mode ? this.writeScreen = this.nonDisplayedMemory : (this.writeScreen = this.displayedMemory, this.writeScreen.reset()), "MODE_ROLL-UP" !== this.mode && (this.displayedMemory.nrRollUpRows = null, this.nonDisplayedMemory.nrRollUpRows = null), this.mode = t)
                            }, e.insertChars = function (t) {
                                for (var e = 0; e < t.length; e++) this.writeScreen.insertChar(t[e]);
                                var r = this.writeScreen === this.displayedMemory ? "DISP" : "NON_DISP";
                                Oe.log("INFO", r + ": " + this.writeScreen.getDisplayText(!0)), "MODE_PAINT-ON" !== this.mode && "MODE_ROLL-UP" !== this.mode || (Oe.log("TEXT", "DISPLAYED: " + this.displayedMemory.getDisplayText(!0)), this.outputDataUpdate())
                            }, e.ccRCL = function () {
                                Oe.log("INFO", "RCL - Resume Caption Loading"), this.setMode("MODE_POP-ON")
                            }, e.ccBS = function () {
                                Oe.log("INFO", "BS - BackSpace"), "MODE_TEXT" !== this.mode && (this.writeScreen.backSpace(), this.writeScreen === this.displayedMemory && this.outputDataUpdate())
                            }, e.ccAOF = function () { }, e.ccAON = function () { }, e.ccDER = function () {
                                Oe.log("INFO", "DER- Delete to End of Row"), this.writeScreen.clearToEndOfRow(), this.outputDataUpdate()
                            }, e.ccRU = function (t) {
                                Oe.log("INFO", "RU(" + t + ") - Roll Up"), this.writeScreen = this.displayedMemory, this.setMode("MODE_ROLL-UP"), this.writeScreen.setRollUpRows(t)
                            }, e.ccFON = function () {
                                Oe.log("INFO", "FON - Flash On"), this.writeScreen.setPen({
                                    flash: !0
                                })
                            }, e.ccRDC = function () {
                                Oe.log("INFO", "RDC - Resume Direct Captioning"), this.setMode("MODE_PAINT-ON")
                            }, e.ccTR = function () {
                                Oe.log("INFO", "TR"), this.setMode("MODE_TEXT")
                            }, e.ccRTD = function () {
                                Oe.log("INFO", "RTD"), this.setMode("MODE_TEXT")
                            }, e.ccEDM = function () {
                                Oe.log("INFO", "EDM - Erase Displayed Memory"), this.displayedMemory.reset(), this.outputDataUpdate(!0)
                            }, e.ccCR = function () {
                                Oe.log("INFO", "CR - Carriage Return"), this.writeScreen.rollUp(), this.outputDataUpdate(!0)
                            }, e.ccENM = function () {
                                Oe.log("INFO", "ENM - Erase Non-displayed Memory"), this.nonDisplayedMemory.reset()
                            }, e.ccEOC = function () {
                                if (Oe.log("INFO", "EOC - End Of Caption"), "MODE_POP-ON" === this.mode) {
                                    var t = this.displayedMemory;
                                    this.displayedMemory = this.nonDisplayedMemory, this.nonDisplayedMemory = t, this.writeScreen = this.nonDisplayedMemory, Oe.log("TEXT", "DISP: " + this.displayedMemory.getDisplayText())
                                }
                                this.outputDataUpdate(!0)
                            }, e.ccTO = function (t) {
                                Oe.log("INFO", "TO(" + t + ") - Tab Offset"), this.writeScreen.moveCursor(t)
                            }, e.ccMIDROW = function (t) {
                                var e = {
                                    flash: !1
                                };
                                if (e.underline = t % 2 == 1, e.italics = 46 <= t, e.italics) e.foreground = "white";
                                else {
                                    var r = Math.floor(t / 2) - 16;
                                    e.foreground = ["white", "green", "blue", "cyan", "red", "yellow", "magenta"][r]
                                }
                                Oe.log("INFO", "MIDROW: " + JSON.stringify(e)), this.writeScreen.setPen(e)
                            }, e.outputDataUpdate = function (t) {
                                void 0 === t && (t = !1);
                                var e = Oe.time;
                                null !== e && this.outputFilter && (null !== this.cueStartTime || this.displayedMemory.isEmpty() ? this.displayedMemory.equals(this.lastOutputScreen) || (this.outputFilter.newCue(this.cueStartTime, e, this.lastOutputScreen), t && this.outputFilter.dispatchCue && this.outputFilter.dispatchCue(), this.cueStartTime = this.displayedMemory.isEmpty() ? null : e) : this.cueStartTime = e, this.lastOutputScreen.copy(this.displayedMemory))
                            }, e.cueSplitAtTime = function (t) {
                                this.outputFilter && (this.displayedMemory.isEmpty() || (this.outputFilter.newCue && this.outputFilter.newCue(this.cueStartTime, t, this.displayedMemory), this.cueStartTime = t))
                            }, t
                        }(),
                        Ne = function () {
                            function t(t, e, r) {
                                this.field = void 0, this.outputs = void 0, this.channels = void 0, this.currChNr = void 0, this.lastCmdA = void 0, this.lastCmdB = void 0, this.lastTime = void 0, this.dataCounters = void 0, this.field = t || 1, this.outputs = [e, r], this.channels = [new Me(1, e), new Me(2, r)], this.currChNr = -1, this.lastCmdA = null, this.lastCmdB = null, this.lastTime = null, this.dataCounters = {
                                    padding: 0,
                                    char: 0,
                                    cmd: 0,
                                    other: 0
                                }
                            }
                            var e = t.prototype;
                            return e.getHandler = function (t) {
                                return this.channels[t].getHandler()
                            }, e.setHandler = function (t, e) {
                                this.channels[t].setHandler(e)
                            }, e.addData = function (t, e) {
                                var r, i, n, a = !1;
                                this.lastTime = t, Oe.setTime(t);
                                for (var o = 0; o < e.length; o += 2)
                                    if (i = 127 & e[o], n = 127 & e[o + 1], 0 != i || 0 != n) {
                                        if (Oe.log("DATA", "[" + Re([e[o], e[o + 1]]) + "] -> (" + Re([i, n]) + ")"), (r = this.parseCmd(i, n)) || (r = this.parseMidrow(i, n)), r || (r = this.parsePAC(i, n)), r || (r = this.parseBackgroundAttributes(i, n)), !r)
                                            if (a = this.parseChars(i, n))
                                                if (this.currChNr && 0 <= this.currChNr) this.channels[this.currChNr - 1].insertChars(a);
                                                else Oe.log("WARNING", "No channel found yet. TEXT-MODE?");
                                        r ? this.dataCounters.cmd += 2 : a ? this.dataCounters.char += 2 : (this.dataCounters.other += 2, Oe.log("WARNING", "Couldn't parse cleaned data " + Re([i, n]) + " orig: " + Re([e[o], e[o + 1]])))
                                    } else this.dataCounters.padding += 2
                            }, e.parseCmd = function (t, e) {
                                var r = null;
                                if (!((20 === t || 28 === t) && 32 <= e && e <= 47) && !((23 === t || 31 === t) && 33 <= e && e <= 35)) return !1;
                                if (t === this.lastCmdA && e === this.lastCmdB) return this.lastCmdA = null, this.lastCmdB = null, Oe.log("DEBUG", "Repeated command (" + Re([t, e]) + ") is dropped"), !0;
                                r = 20 === t || 23 === t ? 1 : 2;
                                var i = this.channels[r - 1];
                                return 20 === t || 28 === t ? 32 === e ? i.ccRCL() : 33 === e ? i.ccBS() : 34 === e ? i.ccAOF() : 35 === e ? i.ccAON() : 36 === e ? i.ccDER() : 37 === e ? i.ccRU(2) : 38 === e ? i.ccRU(3) : 39 === e ? i.ccRU(4) : 40 === e ? i.ccFON() : 41 === e ? i.ccRDC() : 42 === e ? i.ccTR() : 43 === e ? i.ccRTD() : 44 === e ? i.ccEDM() : 45 === e ? i.ccCR() : 46 === e ? i.ccENM() : 47 === e && i.ccEOC() : i.ccTO(e - 32), this.lastCmdA = t, this.lastCmdB = e, this.currChNr = r, !0
                            }, e.parseMidrow = function (t, e) {
                                var r = null;
                                return (17 === t || 25 === t) && 32 <= e && e <= 47 && ((r = 17 === t ? 1 : 2) !== this.currChNr ? (Oe.log("ERROR", "Mismatch channel in midrow parsing"), !1) : (this.channels[r - 1].ccMIDROW(e), Oe.log("DEBUG", "MIDROW (" + Re([t, e]) + ")"), !0))
                            }, e.parsePAC = function (t, e) {
                                var r, i = null;
                                if (!((17 <= t && t <= 23 || 25 <= t && t <= 31) && 64 <= e && e <= 127) && !((16 === t || 24 === t) && 64 <= e && e <= 95)) return !1;
                                if (t === this.lastCmdA && e === this.lastCmdB) return this.lastCmdA = null, !(this.lastCmdB = null);
                                r = t <= 23 ? 1 : 2, i = 64 <= e && e <= 95 ? 1 == r ? Ee[t] : Se[t] : 1 == r ? Te[t] : ke[t];
                                var n = this.interpretPAC(i, e);
                                return this.channels[r - 1].setPAC(n), this.lastCmdA = t, this.lastCmdB = e, this.currChNr = r, !0
                            }, e.interpretPAC = function (t, e) {
                                var r = e,
                                    i = {
                                        color: null,
                                        italics: !1,
                                        indent: null,
                                        underline: !1,
                                        row: t
                                    };
                                return r = 95 < e ? e - 96 : e - 64, i.underline = 1 == (1 & r), r <= 13 ? i.color = ["white", "green", "blue", "cyan", "red", "yellow", "magenta", "white"][Math.floor(r / 2)] : r <= 15 ? (i.italics = !0, i.color = "white") : i.indent = 4 * Math.floor((r - 16) / 2), i
                            }, e.parseChars = function (t, e) {
                                var r = null,
                                    i = null,
                                    n = null;
                                if (17 <= (n = 25 <= t ? (r = 2, t - 8) : (r = 1, t)) && n <= 19) {
                                    var a = e;
                                    a = 17 === n ? e + 80 : 18 === n ? e + 112 : e + 144, Oe.log("INFO", "Special char '" + ye(a) + "' in channel " + r), i = [a]
                                } else 32 <= t && t <= 127 && (i = 0 === e ? [t] : [t, e]);
                                if (i) {
                                    var o = Re(i);
                                    Oe.log("DEBUG", "Char codes =  " + o.join(",")), this.lastCmdA = null, this.lastCmdB = null
                                }
                                return i
                            }, e.parseBackgroundAttributes = function (t, e) {
                                var r, i, n;
                                return ((16 === t || 24 === t) && 32 <= e && e <= 47 || (23 === t || 31 === t) && 45 <= e && e <= 47) && (r = {}, 16 === t || 24 === t ? (i = Math.floor((e - 32) / 2), r.background = Le[i], e % 2 == 1 && (r.background = r.background + "_semi")) : 45 === e ? r.background = "transparent" : (r.foreground = "black", 47 === e && (r.underline = !0)), n = t < 24 ? 1 : 2, this.channels[n - 1].setBkgData(r), this.lastCmdA = null, !(this.lastCmdB = null))
                            }, e.reset = function () {
                                for (var t = 0; t < this.channels.length; t++) this.channels[t] && this.channels[t].reset();
                                this.lastCmdA = null, this.lastCmdB = null
                            }, e.cueSplitAtTime = function (t) {
                                for (var e = 0; e < this.channels.length; e++) this.channels[e] && this.channels[e].cueSplitAtTime(t)
                            }, t
                        }(),
                        Fe = function () {
                            function t(t, e) {
                                this.timelineController = void 0, this.trackName = void 0, this.startTime = void 0, this.endTime = void 0, this.screen = void 0, this.timelineController = t, this.trackName = e, this.startTime = null, this.endTime = null, this.screen = null
                            }
                            var e = t.prototype;
                            return e.dispatchCue = function () {
                                null !== this.startTime && (this.timelineController.addCues(this.trackName, this.startTime, this.endTime, this.screen), this.startTime = null)
                            }, e.newCue = function (t, e, r) {
                                (null === this.startTime || this.startTime > t) && (this.startTime = t), this.endTime = e, this.screen = r, this.timelineController.createCaptionsTrack(this.trackName)
                            }, t
                        }(),
                        Be = {
                            parse: function (t, e, i, n, r, a) {
                                var o, s = Object(Ft.utf8ArrayToStr)(new Uint8Array(t)).trim().replace(/\r\n|\n\r|\n|\r/g, "\n").split("\n"),
                                    l = "00:00.000",
                                    u = 0,
                                    d = 0,
                                    c = 0,
                                    f = [],
                                    h = !0,
                                    p = !1,
                                    g = new me;
                                g.oncue = function (t) {
                                    var e = i[n],
                                        r = i.ccOffset;
                                    e && e.new && (void 0 !== d ? r = i.ccOffset = e.start : function (t, e, r) {
                                        var i = t[e],
                                            n = t[i.prevCC];
                                        if (!n || !n.new && i.new) return t.ccOffset = t.presentationOffset = i.start, i.new = !1;
                                        for (; n && n.new;) t.ccOffset += i.start - n.start, i.new = !1, n = t[(i = n).prevCC];
                                        t.presentationOffset = r
                                    }(i, n, c)), c && (r = c - i.presentationOffset), p && (t.startTime += r - d, t.endTime += r - d), t.id = we(t.startTime.toString()) + we(t.endTime.toString()) + we(t.text), t.text = decodeURIComponent(encodeURIComponent(t.text)), 0 < t.endTime && f.push(t)
                                }, g.onparsingerror = function (t) {
                                    o = t
                                }, g.onflush = function () {
                                    o && a ? a(o) : r(f)
                                }, s.forEach(function (t) {
                                    if (h) {
                                        if (Ce(t, "X-TIMESTAMP-MAP=")) {
                                            p = !(h = !1), t.substr(16).split(",").forEach(function (t) {
                                                Ce(t, "LOCAL:") ? l = t.substr(6) : Ce(t, "MPEGTS:") && (u = parseInt(t.substr(7)))
                                            });
                                            try {
                                                e + (9e4 * i[n].start || 0) < 0 && (e += 8589934592), u -= e, d = function (t) {
                                                    var e = parseInt(t.substr(-3)),
                                                        r = parseInt(t.substr(-6, 2)),
                                                        i = parseInt(t.substr(-9, 2)),
                                                        n = 9 < t.length ? parseInt(t.substr(0, t.indexOf(":"))) : 0;
                                                    if (!(Object(I.isFiniteNumber)(e) && Object(I.isFiniteNumber)(r) && Object(I.isFiniteNumber)(i) && Object(I.isFiniteNumber)(n))) throw Error("Malformed X-TIMESTAMP-MAP: Local:" + t);
                                                    return e += 1e3 * r, e += 6e4 * i, e += 36e5 * n
                                                }(l) / 1e3, c = u / 9e4
                                            } catch (t) {
                                                p = !1, o = t
                                            }
                                            return
                                        }
                                        "" === t && (h = !1)
                                    }
                                    g.parse(t + "\n")
                                }), g.flush()
                            }
                        };

                    function Ue(t) {
                        if (void 0 === t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                        return t
                    }
                    var je = function (n) {
                        function t(t) {
                            var e;
                            if ((e = n.call(this, t, x.default.MEDIA_ATTACHING, x.default.MEDIA_DETACHING, x.default.FRAG_PARSING_USERDATA, x.default.FRAG_DECRYPTED, x.default.MANIFEST_LOADING, x.default.MANIFEST_LOADED, x.default.FRAG_LOADED, x.default.INIT_PTS_FOUND) || this).media = null, e.config = void 0, e.enabled = !0, e.Cues = void 0, e.textTracks = [], e.tracks = [], e.initPTS = [], e.unparsedVttFrags = [], e.cueRanges = [], e.captionsTracks = {}, e.captionsProperties = void 0, e.cea608Parser = void 0, e.lastSn = -1, e.prevCC = -1, e.vttCCs = null, e.hls = t, e.config = t.config, e.Cues = t.config.cueHandler, e.captionsProperties = {
                                textTrack1: {
                                    label: e.config.captionsTextTrack1Label,
                                    languageCode: e.config.captionsTextTrack1LanguageCode
                                },
                                textTrack2: {
                                    label: e.config.captionsTextTrack2Label,
                                    languageCode: e.config.captionsTextTrack2LanguageCode
                                }
                            }, e.config.enableCEA708Captions) {
                                var r = new Fe(Ue(e), "textTrack1"),
                                    i = new Fe(Ue(e), "textTrack2");
                                e.cea608Parser = new Ne(0, r, i)
                            }
                            return e
                        } ! function (t, e) {
                            t.prototype = Object.create(e.prototype), (t.prototype.constructor = t).__proto__ = e
                        }(t, n);
                        var e = t.prototype;
                        return e.addCues = function (t, e, r, i) {
                            for (var n, a, o, s, l = this.cueRanges, u = !1, d = l.length; d--;) {
                                var c = l[d],
                                    f = (n = c[0], a = c[1], o = e, s = r, Math.min(a, s) - Math.max(n, o));
                                if (0 <= f && (c[0] = Math.min(c[0], e), c[1] = Math.max(c[1], r), u = !0, .5 < f / (r - e))) return
                            }
                            u || l.push([e, r]), this.Cues.newCue(this.captionsTracks[t], e, r, i)
                        }, e.onInitPtsFound = function (t) {
                            var e = this,
                                r = t.frag,
                                i = t.id,
                                n = t.initPTS,
                                a = this.unparsedVttFrags;
                            "main" === i && (this.initPTS[r.cc] = n), a.length && (this.unparsedVttFrags = [], a.forEach(function (t) {
                                e.onFragLoaded(t)
                            }))
                        }, e.getExistingTrack = function (t) {
                            var e = this.media;
                            if (e)
                                for (var r = 0; r < e.textTracks.length; r++) {
                                    var i = e.textTracks[r];
                                    if (i[t]) return i
                                }
                            return null
                        }, e.createCaptionsTrack = function (t) {
                            var e = this.captionsProperties,
                                r = this.captionsTracks,
                                i = this.media,
                                n = e[t],
                                a = n.label,
                                o = n.languageCode;
                            if (!r[t]) {
                                var s = this.getExistingTrack(t);
                                if (s) r[t] = s, Ut(r[t]), Bt(r[t], i);
                                else {
                                    var l = this.createTextTrack("captions", a, o);
                                    l && (l[t] = !0, r[t] = l)
                                }
                            }
                        }, e.createTextTrack = function (t, e, r) {
                            var i = this.media;
                            if (i) return i.addTextTrack(t, e, r)
                        }, e.destroy = function () {
                            n.prototype.destroy.call(this)
                        }, e.onMediaAttaching = function (t) {
                            this.media = t.media, this._cleanTracks()
                        }, e.onMediaDetaching = function () {
                            var e = this.captionsTracks;
                            Object.keys(e).forEach(function (t) {
                                Ut(e[t]), delete e[t]
                            })
                        }, e.onManifestLoading = function () {
                            this.lastSn = -1, this.prevCC = -1, this.vttCCs = {
                                ccOffset: 0,
                                presentationOffset: 0,
                                0: {
                                    start: 0,
                                    prevCC: -1,
                                    new: !1
                                }
                            }, this._cleanTracks()
                        }, e._cleanTracks = function () {
                            var t = this.media;
                            if (t) {
                                var e = t.textTracks;
                                if (e)
                                    for (var r = 0; r < e.length; r++) Ut(e[r])
                            }
                        }, e.onManifestLoaded = function (t) {
                            var s = this;
                            if (this.textTracks = [], this.unparsedVttFrags = this.unparsedVttFrags || [], this.initPTS = [], this.cueRanges = [], this.config.enableWebVTT) {
                                this.tracks = t.subtitles || [];
                                var l = this.media ? this.media.textTracks : [];
                                this.tracks.forEach(function (t, e) {
                                    var r, i, n;
                                    if (e < l.length) {
                                        for (var a = null, o = 0; o < l.length; o++)
                                            if (i = l[o], n = t, i && i.label === n.name && !i.textTrack1 && !i.textTrack2) {
                                                a = l[o];
                                                break
                                            } a && (r = a)
                                    }
                                    r || (r = s.createTextTrack("subtitles", t.name, t.lang)), t.default ? r.mode = s.hls.subtitleDisplay ? "showing" : "hidden" : r.mode = "disabled", s.textTracks.push(r)
                                })
                            }
                        }, e.onFragLoaded = function (t) {
                            var e = t.frag,
                                r = t.payload,
                                i = this.cea608Parser,
                                n = this.initPTS,
                                a = this.lastSn,
                                o = this.unparsedVttFrags;
                            if ("main" === e.type) {
                                var s = e.sn;
                                e.sn !== a + 1 && i && i.reset(), this.lastSn = s
                            } else if ("subtitle" === e.type)
                                if (r.byteLength) {
                                    if (!Object(I.isFiniteNumber)(n[e.cc])) return o.push(t), void (n.length && this.hls.trigger(x.default.SUBTITLE_FRAG_PROCESSED, {
                                        success: !1,
                                        frag: e
                                    }));
                                    var l = e.decryptdata;
                                    null != l && null != l.key && "AES-128" === l.method || this._parseVTTs(e, r)
                                } else this.hls.trigger(x.default.SUBTITLE_FRAG_PROCESSED, {
                                    success: !1,
                                    frag: e
                                })
                        }, e._parseVTTs = function (e, t) {
                            var r = this.hls,
                                i = this.prevCC,
                                n = this.textTracks,
                                a = this.vttCCs;
                            a[e.cc] || (a[e.cc] = {
                                start: e.start,
                                prevCC: i,
                                new: !0
                            }, this.prevCC = e.cc), Be.parse(t, this.initPTS[e.cc], a, e.cc, function (t) {
                                var i = n[e.level];
                                "disabled" !== i.mode ? (t.forEach(function (e) {
                                    if (!i.cues.getCueById(e.id)) try {
                                        if (i.addCue(e), !i.cues.getCueById(e.id)) throw new Error("addCue is failed for: " + e)
                                    } catch (t) {
                                        M.logger.debug("Failed occurred on adding cues: " + t);
                                        var r = new window.TextTrackCue(e.startTime, e.endTime, e.text);
                                        r.id = e.id, i.addCue(r)
                                    }
                                }), r.trigger(x.default.SUBTITLE_FRAG_PROCESSED, {
                                    success: !0,
                                    frag: e
                                })) : r.trigger(x.default.SUBTITLE_FRAG_PROCESSED, {
                                    success: !1,
                                    frag: e
                                })
                            }, function (t) {
                                M.logger.log("Failed to parse VTT cue: " + t), r.trigger(x.default.SUBTITLE_FRAG_PROCESSED, {
                                    success: !1,
                                    frag: e
                                })
                            })
                        }, e.onFragDecrypted = function (t) {
                            var e = t.frag,
                                r = t.payload;
                            if ("subtitle" === e.type) {
                                if (!Object(I.isFiniteNumber)(this.initPTS[e.cc])) return void this.unparsedVttFrags.push(t);
                                this._parseVTTs(e, r)
                            }
                        }, e.onFragParsingUserdata = function (t) {
                            if (this.enabled && this.cea608Parser)
                                for (var e = 0; e < t.samples.length; e++) {
                                    var r = t.samples[e].bytes;
                                    if (r) {
                                        var i = this.extractCea608Data(r);
                                        this.cea608Parser.addData(t.samples[e].pts, i)
                                    }
                                }
                        }, e.extractCea608Data = function (t) {
                            for (var e, r, i, n = 31 & t[0], a = 2, o = [], s = 0; s < n; s++) e = t[a++], r = 127 & t[a++], i = 127 & t[a++], 0 == r && 0 == i || 0 != (4 & e) && 0 == (3 & e) && (o.push(r), o.push(i));
                            return o
                        }, t
                    }(u);

                    function Ke(t, e) {
                        for (var r = 0; r < e.length; r++) {
                            var i = e[r];
                            i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), Object.defineProperty(t, i.key, i)
                        }
                    }

                    function Ve(t) {
                        for (var e = [], r = 0; r < t.length; r++) {
                            var i = t[r];
                            "subtitles" === i.kind && i.label && e.push(t[r])
                        }
                        return e
                    }
                    var Ge = function (r) {
                        function t(t) {
                            var e;
                            return (e = r.call(this, t, x.default.MEDIA_ATTACHED, x.default.MEDIA_DETACHING, x.default.MANIFEST_LOADED, x.default.SUBTITLE_TRACK_LOADED) || this).tracks = [], e.trackId = -1, e.media = null, e.stopped = !0, e.subtitleDisplay = !0, e.queuedDefaultTrack = null, e
                        } ! function (t, e) {
                            t.prototype = Object.create(e.prototype), (t.prototype.constructor = t).__proto__ = e
                        }(t, r);
                        var e = t.prototype;
                        return e.destroy = function () {
                            u.prototype.destroy.call(this)
                        }, e.onMediaAttached = function (t) {
                            var e = this;
                            this.media = t.media, this.media && (Object(I.isFiniteNumber)(this.queuedDefaultTrack) && (this.subtitleTrack = this.queuedDefaultTrack, this.queuedDefaultTrack = null), this.trackChangeListener = this._onTextTracksChanged.bind(this), this.useTextTrackPolling = !(this.media.textTracks && "onchange" in this.media.textTracks), this.useTextTrackPolling ? this.subtitlePollingInterval = setInterval(function () {
                                e.trackChangeListener()
                            }, 500) : this.media.textTracks.addEventListener("change", this.trackChangeListener))
                        }, e.onMediaDetaching = function () {
                            this.media && (this.useTextTrackPolling ? clearInterval(this.subtitlePollingInterval) : this.media.textTracks.removeEventListener("change", this.trackChangeListener), Object(I.isFiniteNumber)(this.subtitleTrack) && (this.queuedDefaultTrack = this.subtitleTrack), Ve(this.media.textTracks).forEach(function (t) {
                                Ut(t)
                            }), this.subtitleTrack = -1, this.media = null)
                        }, e.onManifestLoaded = function (t) {
                            var e = this,
                                r = t.subtitles || [];
                            this.tracks = r, this.hls.trigger(x.default.SUBTITLE_TRACKS_UPDATED, {
                                subtitleTracks: r
                            }), r.forEach(function (t) {
                                t.default && (e.media ? e.subtitleTrack = t.id : e.queuedDefaultTrack = t.id)
                            })
                        }, e.onSubtitleTrackLoaded = function (t) {
                            var e = this,
                                r = t.id,
                                i = t.details,
                                n = this.trackId,
                                a = this.tracks,
                                o = a[n];
                            if (r >= a.length || r !== n || !o || this.stopped) this._clearReloadTimer();
                            else if (M.logger.log("subtitle track " + r + " loaded"), i.live) {
                                var s = st(o.details, i, t.stats.trequest);
                                M.logger.log("Reloading live subtitle playlist in " + s + "ms"), this.timer = setTimeout(function () {
                                    e._loadCurrentTrack()
                                }, s)
                            } else this._clearReloadTimer()
                        }, e.startLoad = function () {
                            this.stopped = !1, this._loadCurrentTrack()
                        }, e.stopLoad = function () {
                            this.stopped = !0, this._clearReloadTimer()
                        }, e._clearReloadTimer = function () {
                            this.timer && (clearTimeout(this.timer), this.timer = null)
                        }, e._loadCurrentTrack = function () {
                            var t = this.trackId,
                                e = this.tracks,
                                r = this.hls,
                                i = e[t];
                            t < 0 || !i || i.details && !i.details.live || (M.logger.log("Loading subtitle track " + t), r.trigger(x.default.SUBTITLE_TRACK_LOADING, {
                                url: i.url,
                                id: t
                            }))
                        }, e._toggleTrackModes = function (t) {
                            var e = this.media,
                                r = this.subtitleDisplay,
                                i = this.trackId;
                            if (e) {
                                var n = Ve(e.textTracks);
                                if (-1 === t) [].slice.call(n).forEach(function (t) {
                                    t.mode = "disabled"
                                });
                                else {
                                    var a = n[i];
                                    a && (a.mode = "disabled")
                                }
                                var o = n[t];
                                o && (o.mode = r ? "showing" : "hidden")
                            }
                        }, e._setSubtitleTrackInternal = function (t) {
                            var e = this.hls,
                                r = this.tracks;
                            !Object(I.isFiniteNumber)(t) || t < -1 || t >= r.length || (this.trackId = t, M.logger.log("Switching to subtitle track " + t), e.trigger(x.default.SUBTITLE_TRACK_SWITCH, {
                                id: t
                            }), this._loadCurrentTrack())
                        }, e._onTextTracksChanged = function () {
                            if (this.media) {
                                for (var t = -1, e = Ve(this.media.textTracks), r = 0; r < e.length; r++)
                                    if ("hidden" === e[r].mode) t = r;
                                    else if ("showing" === e[r].mode) {
                                        t = r;
                                        break
                                    }
                                this.subtitleTrack = t
                            }
                        },
                            function (t, e, r) {
                                e && Ke(t.prototype, e), r && Ke(t, r)
                            }(t, [{
                                key: "subtitleTracks",
                                get: function () {
                                    return this.tracks
                                }
                            }, {
                                key: "subtitleTrack",
                                get: function () {
                                    return this.trackId
                                },
                                set: function (t) {
                                    this.trackId !== t && (this._toggleTrackModes(t), this._setSubtitleTrackInternal(t))
                                }
                            }]), t
                    }(u),
                        Ye = r("./src/crypt/decrypter.js");
                    var He, $e, ze = window.performance,
                        We = function (i) {
                            function t(t, e) {
                                var r;
                                return (r = i.call(this, t, x.default.MEDIA_ATTACHED, x.default.MEDIA_DETACHING, x.default.ERROR, x.default.KEY_LOADED, x.default.FRAG_LOADED, x.default.SUBTITLE_TRACKS_UPDATED, x.default.SUBTITLE_TRACK_SWITCH, x.default.SUBTITLE_TRACK_LOADED, x.default.SUBTITLE_FRAG_PROCESSED, x.default.LEVEL_UPDATED) || this).fragmentTracker = e, r.config = t.config, r.state = mt, r.tracks = [], r.tracksBuffered = [], r.currentTrackId = -1, r.decrypter = new Ye.default(t, t.config), r.lastAVStart = 0, r._onMediaSeeking = r.onMediaSeeking.bind(function (t) {
                                    if (void 0 === t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                                    return t
                                }(r)), r
                            } ! function (t, e) {
                                t.prototype = Object.create(e.prototype), (t.prototype.constructor = t).__proto__ = e
                            }(t, i);
                            var e = t.prototype;
                            return e.onSubtitleFragProcessed = function (t) {
                                var e = t.frag,
                                    r = t.success;
                                if (this.fragPrevious = e, this.state = yt, r) {
                                    var i = this.tracksBuffered[this.currentTrackId];
                                    if (i) {
                                        for (var n, a = e.start, o = 0; o < i.length; o++)
                                            if (a >= i[o].start && a <= i[o].end) {
                                                n = i[o];
                                                break
                                            } var s = e.start + e.duration;
                                        n ? n.end = s : (n = {
                                            start: a,
                                            end: s
                                        }, i.push(n))
                                    }
                                }
                            }, e.onMediaAttached = function (t) {
                                var e = t.media;
                                (this.media = e).addEventListener("seeking", this._onMediaSeeking), this.state = yt
                            }, e.onMediaDetaching = function () {
                                var e = this;
                                this.media && (this.media.removeEventListener("seeking", this._onMediaSeeking), this.fragmentTracker.removeAllFragments(), this.currentTrackId = -1, this.tracks.forEach(function (t) {
                                    e.tracksBuffered[t.id] = []
                                }), this.media = null, this.state = mt)
                            }, e.onError = function (t) {
                                var e = t.frag;
                                e && "subtitle" === e.type && (this.state = yt)
                            }, e.onSubtitleTracksUpdated = function (t) {
                                var e = this;
                                M.logger.log("subtitle tracks updated"), this.tracksBuffered = [], this.tracks = t.subtitleTracks, this.tracks.forEach(function (t) {
                                    e.tracksBuffered[t.id] = []
                                })
                            }, e.onSubtitleTrackSwitch = function (t) {
                                if (this.currentTrackId = t.id, this.tracks && this.tracks.length && -1 !== this.currentTrackId) {
                                    var e = this.tracks[this.currentTrackId];
                                    e && e.details && this.setInterval(500)
                                } else this.clearInterval()
                            }, e.onSubtitleTrackLoaded = function (t) {
                                var e = t.id,
                                    r = t.details,
                                    i = this.currentTrackId,
                                    n = this.tracks,
                                    a = n[i];
                                e >= n.length || e !== i || !a || (r.live && function (t, e, r) {
                                    void 0 === r && (r = 0);
                                    var i = -1;
                                    ot(t, e, function (t, e, r) {
                                        e.start = t.start, i = r
                                    });
                                    var n = e.fragments;
                                    if (i < 0) n.forEach(function (t) {
                                        t.start += r
                                    });
                                    else
                                        for (var a = i + 1; a < n.length; a++) n[a].start = n[a - 1].start + n[a - 1].duration
                                }(a.details, r, this.lastAVStart), a.details = r, this.setInterval(500))
                            }, e.onKeyLoaded = function () {
                                this.state === _t && (this.state = yt)
                            }, e.onFragLoaded = function (t) {
                                var e = this.fragCurrent,
                                    r = t.frag.decryptdata,
                                    i = t.frag,
                                    n = this.hls;
                                if (this.state === bt && e && "subtitle" === t.frag.type && e.sn === t.frag.sn && 0 < t.payload.byteLength && r && r.key && "AES-128" === r.method) {
                                    var a = ze.now();
                                    this.decrypter.decrypt(t.payload, r.key.buffer, r.iv.buffer, function (t) {
                                        var e = ze.now();
                                        n.trigger(x.default.FRAG_DECRYPTED, {
                                            frag: i,
                                            payload: t,
                                            stats: {
                                                tstart: a,
                                                tdecrypt: e
                                            }
                                        })
                                    })
                                }
                            }, e.onLevelUpdated = function (t) {
                                var e = t.details.fragments;
                                this.lastAVStart = e.length ? e[0].start : 0
                            }, e.doTick = function () {
                                if (this.media) switch (this.state) {
                                    case yt:
                                        var t = this.config,
                                            e = this.currentTrackId,
                                            r = this.fragmentTracker,
                                            i = this.media,
                                            n = this.tracks;
                                        if (!n || !n[e] || !n[e].details) break;
                                        var a, o = t.maxBufferHole,
                                            s = t.maxFragLookUpTolerance,
                                            l = Math.min(t.maxBufferLength, t.maxMaxBufferLength),
                                            u = $.bufferedInfo(this._getBuffered(), i.currentTime, o),
                                            d = u.end,
                                            c = u.len,
                                            f = n[e].details,
                                            h = f.fragments,
                                            p = h.length,
                                            g = h[p - 1].start + h[p - 1].duration;
                                        if (l < c) return;
                                        var m = this.fragPrevious;
                                        d < g ? (m && f.hasProgramDateTime && (a = ct(h, m.endProgramDateTime, s)), a || (a = ft(m, h, d, s))) : a = h[p - 1], a && a.encrypted ? (M.logger.log("Loading key for " + a.sn), this.state = _t, this.hls.trigger(x.default.KEY_LOADING, {
                                            frag: a
                                        })) : a && r.getState(a) === j && (this.fragCurrent = a, this.state = bt, this.hls.trigger(x.default.FRAG_LOADING, {
                                            frag: a
                                        }))
                                } else this.state = yt
                            }, e.stopLoad = function () {
                                this.lastAVStart = 0, i.prototype.stopLoad.call(this)
                            }, e._getBuffered = function () {
                                return this.tracksBuffered[this.currentTrackId] || []
                            }, e.onMediaSeeking = function () {
                                this.fragPrevious = null
                            }, t
                        }(Pt);
                    ($e = He || (He = {})).WIDEVINE = "com.widevine.alpha", $e.PLAYREADY = "com.microsoft.playready";
                    var qe = "undefined" != typeof window && window.navigator && window.navigator.requestMediaKeySystemAccess ? window.navigator.requestMediaKeySystemAccess.bind(window.navigator) : null;

                    function Xe(t, e) {
                        for (var r = 0; r < e.length; r++) {
                            var i = e[r];
                            i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), Object.defineProperty(t, i.key, i)
                        }
                    }
                    var Ze = function (r) {
                        function t(t) {
                            var e;
                            return (e = r.call(this, t, x.default.MEDIA_ATTACHED, x.default.MEDIA_DETACHED, x.default.MANIFEST_PARSED) || this)._widevineLicenseUrl = void 0, e._licenseXhrSetup = void 0, e._emeEnabled = void 0, e._requestMediaKeySystemAccess = void 0, e._config = void 0, e._mediaKeysList = [], e._media = null, e._hasSetMediaKeys = !1, e._requestLicenseFailureCount = 0, e._onMediaEncrypted = function (t) {
                                M.logger.log('Media is encrypted using "' + t.initDataType + '" init data type'), e._attemptSetMediaKeys(), e._generateRequestWithPreferredKeySession(t.initDataType, t.initData)
                            }, e._config = t.config, e._widevineLicenseUrl = e._config.widevineLicenseUrl, e._licenseXhrSetup = e._config.licenseXhrSetup, e._emeEnabled = e._config.emeEnabled, e._requestMediaKeySystemAccess = e._config.requestMediaKeySystemAccessFunc, e
                        } ! function (t, e) {
                            t.prototype = Object.create(e.prototype), (t.prototype.constructor = t).__proto__ = e
                        }(t, r);
                        var e = t.prototype;
                        return e.getLicenseServerUrl = function (t) {
                            switch (t) {
                                case He.WIDEVINE:
                                    if (!this._widevineLicenseUrl) break;
                                    return this._widevineLicenseUrl
                            }
                            throw new Error('no license server URL configured for key-system "' + t + '"')
                        }, e._attemptKeySystemAccess = function (e, t, r) {
                            var i = this,
                                n = function (t, e, r) {
                                    switch (t) {
                                        case He.WIDEVINE:
                                            return function (t, e) {
                                                var r = {
                                                    videoCapabilities: []
                                                };
                                                return e.forEach(function (t) {
                                                    r.videoCapabilities.push({
                                                        contentType: 'video/mp4; codecs="' + t + '"'
                                                    })
                                                }), [r]
                                            }(0, r);
                                        default:
                                            throw new Error("Unknown key-system: " + t)
                                    }
                                }(e, 0, r);
                            M.logger.log("Requesting encrypted media key-system access"), this.requestMediaKeySystemAccess(e, n).then(function (t) {
                                i._onMediaKeySystemAccessObtained(e, t)
                            }).catch(function (t) {
                                M.logger.error('Failed to obtain key-system "' + e + '" access:', t)
                            })
                        }, e._onMediaKeySystemAccessObtained = function (e, t) {
                            var r = this;
                            M.logger.log('Access for key-system "' + e + '" obtained');
                            var i = {
                                mediaKeysSessionInitialized: !1,
                                mediaKeySystemAccess: t,
                                mediaKeySystemDomain: e
                            };
                            this._mediaKeysList.push(i), t.createMediaKeys().then(function (t) {
                                i.mediaKeys = t, M.logger.log('Media-keys created for key-system "' + e + '"'), r._onMediaKeysCreated()
                            }).catch(function (t) {
                                M.logger.error("Failed to create media-keys:", t)
                            })
                        }, e._onMediaKeysCreated = function () {
                            var e = this;
                            this._mediaKeysList.forEach(function (t) {
                                t.mediaKeysSession || (t.mediaKeysSession = t.mediaKeys.createSession(), e._onNewMediaKeySession(t.mediaKeysSession))
                            })
                        }, e._onNewMediaKeySession = function (e) {
                            var r = this;
                            M.logger.log("New key-system session " + e.sessionId), e.addEventListener("message", function (t) {
                                r._onKeySessionMessage(e, t.message)
                            }, !1)
                        }, e._onKeySessionMessage = function (e, t) {
                            M.logger.log("Got EME message event, creating license request"), this._requestLicense(t, function (t) {
                                M.logger.log("Received license data (length: " + (t ? t.byteLength : t) + "), updating key-session"), e.update(t)
                            })
                        }, e._attemptSetMediaKeys = function () {
                            if (!this._media) throw new Error("Attempted to set mediaKeys without first attaching a media element");
                            if (!this._hasSetMediaKeys) {
                                var t = this._mediaKeysList[0];
                                if (!t || !t.mediaKeys) return M.logger.error("Fatal: Media is encrypted but no CDM access or no keys have been obtained yet"), void this.hls.trigger(x.default.ERROR, {
                                    type: f.ErrorTypes.KEY_SYSTEM_ERROR,
                                    details: f.ErrorDetails.KEY_SYSTEM_NO_KEYS,
                                    fatal: !0
                                });
                                M.logger.log("Setting keys for encrypted media"), this._media.setMediaKeys(t.mediaKeys), this._hasSetMediaKeys = !0
                            }
                        }, e._generateRequestWithPreferredKeySession = function (t, e) {
                            var r = this,
                                i = this._mediaKeysList[0];
                            if (!i) return M.logger.error("Fatal: Media is encrypted but not any key-system access has been obtained yet"), void this.hls.trigger(x.default.ERROR, {
                                type: f.ErrorTypes.KEY_SYSTEM_ERROR,
                                details: f.ErrorDetails.KEY_SYSTEM_NO_ACCESS,
                                fatal: !0
                            });
                            if (i.mediaKeysSessionInitialized) M.logger.warn("Key-Session already initialized but requested again");
                            else {
                                var n = i.mediaKeysSession;
                                if (!n) return M.logger.error("Fatal: Media is encrypted but no key-session existing"), void this.hls.trigger(x.default.ERROR, {
                                    type: f.ErrorTypes.KEY_SYSTEM_ERROR,
                                    details: f.ErrorDetails.KEY_SYSTEM_NO_SESSION,
                                    fatal: !0
                                });
                                if (!e) return M.logger.warn("Fatal: initData required for generating a key session is null"), void this.hls.trigger(x.default.ERROR, {
                                    type: f.ErrorTypes.KEY_SYSTEM_ERROR,
                                    details: f.ErrorDetails.KEY_SYSTEM_NO_INIT_DATA,
                                    fatal: !0
                                });
                                M.logger.log('Generating key-session request for "' + t + '" init data type'), i.mediaKeysSessionInitialized = !0, n.generateRequest(t, e).then(function () {
                                    M.logger.debug("Key-session generation succeeded")
                                }).catch(function (t) {
                                    M.logger.error("Error generating key-session request:", t), r.hls.trigger(x.default.ERROR, {
                                        type: f.ErrorTypes.KEY_SYSTEM_ERROR,
                                        details: f.ErrorDetails.KEY_SYSTEM_NO_SESSION,
                                        fatal: !1
                                    })
                                })
                            }
                        }, e._createLicenseXhr = function (e, t, r) {
                            var i = new XMLHttpRequest,
                                n = this._licenseXhrSetup;
                            try {
                                if (n) try {
                                    n(i, e)
                                } catch (t) {
                                    i.open("POST", e, !0), n(i, e)
                                }
                                i.readyState || i.open("POST", e, !0)
                            } catch (t) {
                                throw new Error("issue setting up KeySystem license XHR " + t)
                            }
                            return i.responseType = "arraybuffer", i.onreadystatechange = this._onLicenseRequestReadyStageChange.bind(this, i, e, t, r), i
                        }, e._onLicenseRequestReadyStageChange = function (t, e, r, i) {
                            switch (t.readyState) {
                                case 4:
                                    if (200 === t.status) this._requestLicenseFailureCount = 0, M.logger.log("License request succeeded"), "arraybuffer" !== t.responseType && M.logger.warn("xhr response type was not set to the expected arraybuffer for license request"), i(t.response);
                                    else {
                                        if (M.logger.error("License Request XHR failed (" + e + "). Status: " + t.status + " (" + t.statusText + ")"), this._requestLicenseFailureCount++, 3 < this._requestLicenseFailureCount) return void this.hls.trigger(x.default.ERROR, {
                                            type: f.ErrorTypes.KEY_SYSTEM_ERROR,
                                            details: f.ErrorDetails.KEY_SYSTEM_LICENSE_REQUEST_FAILED,
                                            fatal: !0
                                        });
                                        var n = 3 - this._requestLicenseFailureCount + 1;
                                        M.logger.warn("Retrying license request, " + n + " attempts left"), this._requestLicense(r, i)
                                    }
                            }
                        }, e._generateLicenseRequestChallenge = function (t, e) {
                            switch (t.mediaKeySystemDomain) {
                                case He.WIDEVINE:
                                    return e
                            }
                            throw new Error("unsupported key-system: " + t.mediaKeySystemDomain)
                        }, e._requestLicense = function (t, e) {
                            M.logger.log("Requesting content license for key-system");
                            var r = this._mediaKeysList[0];
                            if (!r) return M.logger.error("Fatal error: Media is encrypted but no key-system access has been obtained yet"), void this.hls.trigger(x.default.ERROR, {
                                type: f.ErrorTypes.KEY_SYSTEM_ERROR,
                                details: f.ErrorDetails.KEY_SYSTEM_NO_ACCESS,
                                fatal: !0
                            });
                            try {
                                var i = this.getLicenseServerUrl(r.mediaKeySystemDomain),
                                    n = this._createLicenseXhr(i, t, e);
                                M.logger.log("Sending license request to URL: " + i);
                                var a = this._generateLicenseRequestChallenge(r, t);
                                n.send(a)
                            } catch (t) {
                                M.logger.error("Failure requesting DRM license: " + t), this.hls.trigger(x.default.ERROR, {
                                    type: f.ErrorTypes.KEY_SYSTEM_ERROR,
                                    details: f.ErrorDetails.KEY_SYSTEM_LICENSE_REQUEST_FAILED,
                                    fatal: !0
                                })
                            }
                        }, e.onMediaAttached = function (t) {
                            if (this._emeEnabled) {
                                var e = t.media;
                                (this._media = e).addEventListener("encrypted", this._onMediaEncrypted)
                            }
                        }, e.onMediaDetached = function () {
                            this._media && (this._media.removeEventListener("encrypted", this._onMediaEncrypted), this._media = null)
                        }, e.onManifestParsed = function (t) {
                            if (this._emeEnabled) {
                                var e = t.levels.map(function (t) {
                                    return t.audioCodec
                                }),
                                    r = t.levels.map(function (t) {
                                        return t.videoCodec
                                    });
                                this._attemptKeySystemAccess(He.WIDEVINE, e, r)
                            }
                        },
                            function (t, e, r) {
                                e && Xe(t.prototype, e), r && Xe(t, r)
                            }(t, [{
                                key: "requestMediaKeySystemAccess",
                                get: function () {
                                    if (!this._requestMediaKeySystemAccess) throw new Error("No requestMediaKeySystemAccess function configured");
                                    return this._requestMediaKeySystemAccess
                                }
                            }]), t
                    }(u);

                    function Qe(t, e, r) {
                        return e in t ? Object.defineProperty(t, e, {
                            value: r,
                            enumerable: !0,
                            configurable: !0,
                            writable: !0
                        }) : t[e] = r, t
                    }
                    var Je = function (e) {
                        for (var t = 1; t < arguments.length; t++) {
                            var r = null != arguments[t] ? arguments[t] : {},
                                i = Object.keys(r);
                            "function" == typeof Object.getOwnPropertySymbols && (i = i.concat(Object.getOwnPropertySymbols(r).filter(function (t) {
                                return Object.getOwnPropertyDescriptor(r, t).enumerable
                            }))), i.forEach(function (t) {
                                Qe(e, t, r[t])
                            })
                        }
                        return e
                    }({
                        autoStartLoad: !0,
                        startPosition: -1,
                        defaultAudioCodec: void 0,
                        debug: !1,
                        capLevelOnFPSDrop: !1,
                        capLevelToPlayerSize: !1,
                        initialLiveManifestSize: 1,
                        maxBufferLength: 30,
                        maxBufferSize: 6e7,
                        maxBufferHole: .5,
                        lowBufferWatchdogPeriod: .5,
                        highBufferWatchdogPeriod: 3,
                        nudgeOffset: .1,
                        nudgeMaxRetry: 3,
                        maxFragLookUpTolerance: .25,
                        liveSyncDurationCount: 3,
                        liveMaxLatencyDurationCount: 1 / 0,
                        liveSyncDuration: void 0,
                        liveMaxLatencyDuration: void 0,
                        liveDurationInfinity: !1,
                        liveBackBufferLength: 1 / 0,
                        maxMaxBufferLength: 600,
                        enableWorker: !0,
                        enableSoftwareAES: !0,
                        manifestLoadingTimeOut: 1e4,
                        manifestLoadingMaxRetry: 1,
                        manifestLoadingRetryDelay: 1e3,
                        manifestLoadingMaxRetryTimeout: 64e3,
                        startLevel: void 0,
                        levelLoadingTimeOut: 1e4,
                        levelLoadingMaxRetry: 4,
                        levelLoadingRetryDelay: 1e3,
                        levelLoadingMaxRetryTimeout: 64e3,
                        fragLoadingTimeOut: 2e4,
                        fragLoadingMaxRetry: 6,
                        fragLoadingRetryDelay: 1e3,
                        fragLoadingMaxRetryTimeout: 64e3,
                        startFragPrefetch: !1,
                        fpsDroppedMonitoringPeriod: 5e3,
                        fpsDroppedMonitoringThreshold: .2,
                        appendErrorMaxRetry: 3,
                        loader: ee,
                        fLoader: void 0,
                        pLoader: void 0,
                        xhrSetup: void 0,
                        licenseXhrSetup: void 0,
                        abrController: Ht,
                        bufferController: zt,
                        capLevelController: qt,
                        fpsController: Zt,
                        stretchShortVideoTrack: !1,
                        maxAudioFramesDrift: 1,
                        forceKeyFrameOnDiscontinuity: !0,
                        abrEwmaFastLive: 3,
                        abrEwmaSlowLive: 9,
                        abrEwmaFastVoD: 3,
                        abrEwmaSlowVoD: 9,
                        abrEwmaDefaultEstimate: 5e5,
                        abrBandWidthFactor: .95,
                        abrBandWidthUpFactor: .7,
                        abrMaxWithRealBitrate: !1,
                        maxStarvationDelay: 4,
                        maxLoadingDelay: 4,
                        minAutoBitrate: 0,
                        emeEnabled: !1,
                        widevineLicenseUrl: void 0,
                        requestMediaKeySystemAccessFunc: qe
                    }, function () {
                        0;
                        return {
                            cueHandler: i,
                            enableCEA708Captions: !0,
                            enableWebVTT: !0,
                            captionsTextTrack1Label: "English",
                            captionsTextTrack1LanguageCode: "en",
                            captionsTextTrack2Label: "Spanish",
                            captionsTextTrack2LanguageCode: "es"
                        }
                    }(), {
                        subtitleStreamController: We,
                        subtitleTrackController: Ge,
                        timelineController: je,
                        audioStreamController: se,
                        audioTrackController: ie,
                        emeController: Ze
                    });

                    function tr(t, e, r) {
                        return e in t ? Object.defineProperty(t, e, {
                            value: r,
                            enumerable: !0,
                            configurable: !0,
                            writable: !0
                        }) : t[e] = r, t
                    }

                    function er(t) {
                        if (void 0 === t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                        return t
                    }

                    function rr(t, e) {
                        for (var r = 0; r < e.length; r++) {
                            var i = e[r];
                            i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), Object.defineProperty(t, i.key, i)
                        }
                    }

                    function ir(t, e, r) {
                        return e && rr(t.prototype, e), r && rr(t, r), t
                    }
                    r.d(e, "default", function () {
                        return nr
                    });
                    var nr = function (_) {
                        function b(t) {
                            var e;
                            void 0 === t && (t = {}), (e = _.call(this) || this).config = void 0, e._autoLevelCapping = void 0, e.abrController = void 0, e.capLevelController = void 0, e.levelController = void 0, e.streamController = void 0, e.networkControllers = void 0, e.audioTrackController = void 0, e.subtitleTrackController = void 0, e.emeController = void 0, e.coreComponents = void 0, e.media = null, e.url = null;
                            var r = b.DefaultConfig;
                            if ((t.liveSyncDurationCount || t.liveMaxLatencyDurationCount) && (t.liveSyncDuration || t.liveMaxLatencyDuration)) throw new Error("Illegal hls.js config: don't mix up liveSyncDurationCount/liveMaxLatencyDurationCount and liveSyncDuration/liveMaxLatencyDuration");
                            e.config = function (e) {
                                for (var t = 1; t < arguments.length; t++) {
                                    var r = null != arguments[t] ? arguments[t] : {},
                                        i = Object.keys(r);
                                    "function" == typeof Object.getOwnPropertySymbols && (i = i.concat(Object.getOwnPropertySymbols(r).filter(function (t) {
                                        return Object.getOwnPropertyDescriptor(r, t).enumerable
                                    }))), i.forEach(function (t) {
                                        tr(e, t, r[t])
                                    })
                                }
                                return e
                            }({}, r, t);
                            var i = er(e).config;
                            if (void 0 !== i.liveMaxLatencyDurationCount && i.liveMaxLatencyDurationCount <= i.liveSyncDurationCount) throw new Error('Illegal hls.js config: "liveMaxLatencyDurationCount" must be gt "liveSyncDurationCount"');
                            if (void 0 !== i.liveMaxLatencyDuration && (void 0 === i.liveSyncDuration || i.liveMaxLatencyDuration <= i.liveSyncDuration)) throw new Error('Illegal hls.js config: "liveMaxLatencyDuration" must be gt "liveSyncDuration"');
                            Object(M.enableLogs)(i.debug), e._autoLevelCapping = -1;
                            var n = e.abrController = new i.abrController(er(e)),
                                a = new i.bufferController(er(e)),
                                o = e.capLevelController = new i.capLevelController(er(e)),
                                s = new i.fpsController(er(e)),
                                l = new L(er(e)),
                                u = new B(er(e)),
                                d = new U(er(e)),
                                c = new jt(er(e)),
                                f = e.levelController = new Nt(er(e)),
                                h = new Y(er(e)),
                                p = [f, e.streamController = new It(er(e), h)],
                                g = i.audioStreamController;
                            g && p.push(new g(er(e), h)), e.networkControllers = p;
                            var m = [l, u, d, n, a, o, s, c, h];
                            if (g = i.audioTrackController) {
                                var v = new g(er(e));
                                e.audioTrackController = v, m.push(v)
                            }
                            if (g = i.subtitleTrackController) {
                                var y = new g(er(e));
                                e.subtitleTrackController = y, p.push(y)
                            }
                            if (g = i.emeController) {
                                var A = new g(er(e));
                                e.emeController = A, m.push(A)
                            }
                            return (g = i.subtitleStreamController) && p.push(new g(er(e), h)), (g = i.timelineController) && m.push(new g(er(e))), e.coreComponents = m, e
                        } ! function (t, e) {
                            t.prototype = Object.create(e.prototype), (t.prototype.constructor = t).__proto__ = e
                        }(b, _), b.isSupported = function () {
                            return function () {
                                var t = X();
                                if (!t) return !1;
                                var e = self.SourceBuffer || self.WebKitSourceBuffer,
                                    r = t && "function" == typeof t.isTypeSupported && t.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"'),
                                    i = !e || e.prototype && "function" == typeof e.prototype.appendBuffer && "function" == typeof e.prototype.remove;
                                return !!r && !!i
                            }()
                        }, ir(b, null, [{
                            key: "version",
                            get: function () {
                                return "0.13.2"
                            }
                        }, {
                            key: "Events",
                            get: function () {
                                return x.default
                            }
                        }, {
                            key: "ErrorTypes",
                            get: function () {
                                return f.ErrorTypes
                            }
                        }, {
                            key: "ErrorDetails",
                            get: function () {
                                return f.ErrorDetails
                            }
                        }, {
                            key: "DefaultConfig",
                            get: function () {
                                return b.defaultConfig ? b.defaultConfig : Je
                            },
                            set: function (t) {
                                b.defaultConfig = t
                            }
                        }]);
                        var t = b.prototype;
                        return t.destroy = function () {
                            M.logger.log("destroy"), this.trigger(x.default.DESTROYING), this.detachMedia(), this.coreComponents.concat(this.networkControllers).forEach(function (t) {
                                t.destroy()
                            }), this.url = null, this.removeAllListeners(), this._autoLevelCapping = -1
                        }, t.attachMedia = function (t) {
                            M.logger.log("attachMedia"), this.media = t, this.trigger(x.default.MEDIA_ATTACHING, {
                                media: t
                            })
                        }, t.detachMedia = function () {
                            M.logger.log("detachMedia"), this.trigger(x.default.MEDIA_DETACHING), this.media = null
                        }, t.loadSource = function (t) {
                            t = s.buildAbsoluteURL(window.location.href, t, {
                                alwaysNormalize: !0
                            }), M.logger.log("loadSource:" + t), this.url = t, this.trigger(x.default.MANIFEST_LOADING, {
                                url: t
                            })
                        }, t.startLoad = function (e) {
                            void 0 === e && (e = -1), M.logger.log("startLoad(" + e + ")"), this.networkControllers.forEach(function (t) {
                                t.startLoad(e)
                            })
                        }, t.stopLoad = function () {
                            M.logger.log("stopLoad"), this.networkControllers.forEach(function (t) {
                                t.stopLoad()
                            })
                        }, t.swapAudioCodec = function () {
                            M.logger.log("swapAudioCodec"), this.streamController.swapAudioCodec()
                        }, t.recoverMediaError = function () {
                            M.logger.log("recoverMediaError");
                            var t = this.media;
                            this.detachMedia(), t && this.attachMedia(t)
                        }, ir(b, [{
                            key: "levels",
                            get: function () {
                                return this.levelController.levels
                            }
                        }, {
                            key: "currentLevel",
                            get: function () {
                                return this.streamController.currentLevel
                            },
                            set: function (t) {
                                M.logger.log("set currentLevel:" + t), this.loadLevel = t, this.streamController.immediateLevelSwitch()
                            }
                        }, {
                            key: "nextLevel",
                            get: function () {
                                return this.streamController.nextLevel
                            },
                            set: function (t) {
                                M.logger.log("set nextLevel:" + t), this.levelController.manualLevel = t, this.streamController.nextLevelSwitch()
                            }
                        }, {
                            key: "loadLevel",
                            get: function () {
                                return this.levelController.level
                            },
                            set: function (t) {
                                M.logger.log("set loadLevel:" + t), this.levelController.manualLevel = t
                            }
                        }, {
                            key: "nextLoadLevel",
                            get: function () {
                                return this.levelController.nextLoadLevel
                            },
                            set: function (t) {
                                this.levelController.nextLoadLevel = t
                            }
                        }, {
                            key: "firstLevel",
                            get: function () {
                                return Math.max(this.levelController.firstLevel, this.minAutoLevel)
                            },
                            set: function (t) {
                                M.logger.log("set firstLevel:" + t), this.levelController.firstLevel = t
                            }
                        }, {
                            key: "startLevel",
                            get: function () {
                                return this.levelController.startLevel
                            },
                            set: function (t) {
                                M.logger.log("set startLevel:" + t), -1 !== t && (t = Math.max(t, this.minAutoLevel)), this.levelController.startLevel = t
                            }
                        }, {
                            key: "capLevelToPlayerSize",
                            set: function (t) {
                                var e = !!t;
                                e !== this.config.capLevelToPlayerSize && (e ? this.capLevelController.startCapping() : (this.capLevelController.stopCapping(), this.autoLevelCapping = -1, this.streamController.nextLevelSwitch()), this.config.capLevelToPlayerSize = e)
                            }
                        }, {
                            key: "autoLevelCapping",
                            get: function () {
                                return this._autoLevelCapping
                            },
                            set: function (t) {
                                M.logger.log("set autoLevelCapping:" + t), this._autoLevelCapping = t
                            }
                        }, {
                            key: "bandwidthEstimate",
                            get: function () {
                                var t = this.abrController._bwEstimator;
                                return t ? t.getEstimate() : NaN
                            }
                        }, {
                            key: "autoLevelEnabled",
                            get: function () {
                                return -1 === this.levelController.manualLevel
                            }
                        }, {
                            key: "manualLevel",
                            get: function () {
                                return this.levelController.manualLevel
                            }
                        }, {
                            key: "minAutoLevel",
                            get: function () {
                                for (var t = this.levels, e = this.config.minAutoBitrate, r = t ? t.length : 0, i = 0; i < r; i++) {
                                    if (e < (t[i].realBitrate ? Math.max(t[i].realBitrate, t[i].bitrate) : t[i].bitrate)) return i
                                }
                                return 0
                            }
                        }, {
                            key: "maxAutoLevel",
                            get: function () {
                                var t = this.levels,
                                    e = this.autoLevelCapping;
                                return -1 === e && t && t.length ? t.length - 1 : e
                            }
                        }, {
                            key: "nextAutoLevel",
                            get: function () {
                                return Math.min(Math.max(this.abrController.nextAutoLevel, this.minAutoLevel), this.maxAutoLevel)
                            },
                            set: function (t) {
                                this.abrController.nextAutoLevel = Math.max(this.minAutoLevel, t)
                            }
                        }, {
                            key: "audioTracks",
                            get: function () {
                                var t = this.audioTrackController;
                                return t ? t.audioTracks : []
                            }
                        }, {
                            key: "audioTrack",
                            get: function () {
                                var t = this.audioTrackController;
                                return t ? t.audioTrack : -1
                            },
                            set: function (t) {
                                var e = this.audioTrackController;
                                e && (e.audioTrack = t)
                            }
                        }, {
                            key: "liveSyncPosition",
                            get: function () {
                                return this.streamController.liveSyncPosition
                            }
                        }, {
                            key: "subtitleTracks",
                            get: function () {
                                var t = this.subtitleTrackController;
                                return t ? t.subtitleTracks : []
                            }
                        }, {
                            key: "subtitleTrack",
                            get: function () {
                                var t = this.subtitleTrackController;
                                return t ? t.subtitleTrack : -1
                            },
                            set: function (t) {
                                var e = this.subtitleTrackController;
                                e && (e.subtitleTrack = t)
                            }
                        }, {
                            key: "subtitleDisplay",
                            get: function () {
                                var t = this.subtitleTrackController;
                                return !!t && t.subtitleDisplay
                            },
                            set: function (t) {
                                var e = this.subtitleTrackController;
                                e && (e.subtitleDisplay = t)
                            }
                        }]), b
                    }(Q);
                    nr.defaultConfig = void 0
                },
                "./src/polyfills/number-isFinite.js": function (t, e, r) {
                    "use strict";
                    r.r(e), r.d(e, "isFiniteNumber", function () {
                        return i
                    });
                    var i = Number.isFinite || function (t) {
                        return "number" == typeof t && isFinite(t)
                    }
                },
                "./src/utils/get-self-scope.js": function (t, e, r) {
                    "use strict";

                    function i() {
                        return "undefined" == typeof window ? self : window
                    }
                    r.r(e), r.d(e, "getSelfScope", function () {
                        return i
                    })
                },
                "./src/utils/logger.js": function (t, e, r) {
                    "use strict";
                    r.r(e), r.d(e, "enableLogs", function () {
                        return u
                    }), r.d(e, "logger", function () {
                        return d
                    });
                    var i = r("./src/utils/get-self-scope.js");

                    function a() { }
                    var n = {
                        trace: a,
                        debug: a,
                        log: a,
                        warn: a,
                        info: a,
                        error: a
                    },
                        o = n;
                    var s = Object(i.getSelfScope)();

                    function l(e) {
                        for (var t = arguments.length, r = new Array(1 < t ? t - 1 : 0), i = 1; i < t; i++) r[i - 1] = arguments[i];
                        r.forEach(function (t) {
                            o[t] = e[t] ? e[t].bind(e) : function (i) {
                                var n = s.console[i];
                                return n ? function () {
                                    for (var t = arguments.length, e = new Array(t), r = 0; r < t; r++) e[r] = arguments[r];
                                    e[0] && (e[0] = function (t, e) {
                                        return e = "[" + t + "] > " + e
                                    }(i, e[0])), n.apply(s.console, e)
                                } : a
                            }(t)
                        })
                    }
                    var u = function (t) {
                        if (s.console && !0 === t || "object" == typeof t) {
                            l(t, "debug", "log", "info", "warn", "error");
                            try {
                                o.log()
                            } catch (t) {
                                o = n
                            }
                        } else o = n
                    },
                        d = o
                }
            }, n.c = i, n.d = function (t, e, r) {
                n.o(t, e) || Object.defineProperty(t, e, {
                    enumerable: !0,
                    get: r
                })
            }, n.r = function (t) {
                "undefined" != typeof Symbol && Symbol.toStringTag && Object.defineProperty(t, Symbol.toStringTag, {
                    value: "Module"
                }), Object.defineProperty(t, "__esModule", {
                    value: !0
                })
            }, n.t = function (e, t) {
                if (1 & t && (e = n(e)), 8 & t) return e;
                if (4 & t && "object" == typeof e && e && e.__esModule) return e;
                var r = Object.create(null);
                if (n.r(r), Object.defineProperty(r, "default", {
                    enumerable: !0,
                    value: e
                }), 2 & t && "string" != typeof e)
                    for (var i in e) n.d(r, i, function (t) {
                        return e[t]
                    }.bind(null, i));
                return r
            }, n.n = function (t) {
                var e = t && t.__esModule ? function () {
                    return t.default
                } : function () {
                    return t
                };
                return n.d(e, "a", e), e
            }, n.o = function (t, e) {
                return Object.prototype.hasOwnProperty.call(t, e)
            }, n.p = "/dist/", n(n.s = "./src/hls.ts")).default;

            function n(t) {
                if (i[t]) return i[t].exports;
                var e = i[t] = {
                    i: t,
                    l: !1,
                    exports: {}
                };
                return r[t].call(e.exports, e, e.exports, n), e.l = !0, e.exports
            }
            var r, i
        }, t.exports = i())
    }, function (t, e, r) {
        "use strict";
        Object.defineProperty(e, "__esModule", {
            value: !0
        });
        var i = u(r(0)),
            n = u(r(1)),
            a = u(r(3)),
            o = u(r(2)),
            s = u(r(11)),
            l = u(r(4));

        function u(t) {
            return t && t.__esModule ? t : {
                default: t
            }
        }
        r(203);
        var d, c = (d = s.default, (0, o.default)(f, d), f.prototype.getPlaybackType = function () {
            return s.default.NO_OP
        }, (0, a.default)(f, [{
            key: "name",
            get: function () {
                return "html_img"
            }
        }, {
            key: "tagName",
            get: function () {
                return "img"
            }
        }, {
            key: "attributes",
            get: function () {
                return {
                    "data-html-img": ""
                }
            }
        }, {
            key: "events",
            get: function () {
                return {
                    load: "_onLoad",
                    abort: "_onError",
                    error: "_onError"
                }
            }
        }]), f.prototype.render = function () {
            return this.trigger(l.default.PLAYBACK_READY, this.name), this
        }, f.prototype._onLoad = function () {
            this.trigger(l.default.PLAYBACK_ENDED, this.name)
        }, f.prototype._onError = function (t) {
            var e = "error" === t.type ? "load error" : "loading aborted";
            this.trigger(l.default.PLAYBACK_ERROR, {
                message: e
            }, this.name)
        }, f);

        function f(t) {
            (0, i.default)(this, f);
            var e = (0, n.default)(this, d.call(this, t));
            return e.el.src = t.src, e
        } (e.default = c).canPlay = function (t) {
            return /\.(png|jpg|jpeg|gif|bmp|tiff|pgm|pnm|webp)(|\?.*)$/i.test(t)
        }, t.exports = e.default
    }, function (t, e, r) {
        var i = r(204);
        "string" == typeof i && (i = [
            [t.i, i, ""]
        ]);
        var n = {
            singleton: !0,
            hmr: !0,
            transform: void 0,
            insertInto: void 0
        };
        r(10)(i, n);
        i.locals && (t.exports = i.locals)
    }, function (t, e, r) {
        (t.exports = r(8)(!1)).push([t.i, "[data-html-img]{max-width:100%;max-height:100%}", ""])
    }, function (t, e, r) {
        "use strict";
        Object.defineProperty(e, "__esModule", {
            value: !0
        });
        var n = f(r(0)),
            a = f(r(1)),
            i = f(r(3)),
            o = f(r(2)),
            s = r(5),
            l = f(r(11)),
            u = f(r(7)),
            d = f(r(4)),
            c = f(r(206));

        function f(t) {
            return t && t.__esModule ? t : {
                default: t
            }
        }
        r(207);
        var h, p = (h = l.default, (0, o.default)(g, h), (0, i.default)(g, [{
            key: "name",
            get: function () {
                return "no_op"
            }
        }, {
            key: "template",
            get: function () {
                return (0, u.default)(c.default)
            }
        }, {
            key: "attributes",
            get: function () {
                return {
                    "data-no-op": ""
                }
            }
        }]), g.prototype.render = function () {
            var t = this.options.playbackNotSupportedMessage || this.i18n.t("playback_not_supported");
            this.$el.html(this.template({
                message: t
            })), this.trigger(d.default.PLAYBACK_READY, this.name);
            var e = !(!this.options.poster || !this.options.poster.showForNoOp);
            return !this.options.autoPlay && e || this._animate(), this
        }, g.prototype._noise = function () {
            if (this._noiseFrameNum = (this._noiseFrameNum + 1) % 5, !this._noiseFrameNum) {
                var e = this.context.createImageData(this.context.canvas.width, this.context.canvas.height),
                    r = void 0;
                try {
                    r = new Uint32Array(e.data.buffer)
                } catch (t) {
                    r = new Uint32Array(this.context.canvas.width * this.context.canvas.height * 4);
                    for (var i = e.data, n = 0; n < i.length; n++) r[n] = i[n]
                }
                for (var t = r.length, a = 6 * Math.random() + 4, o = 0, s = 0, l = 0; l < t;) o < 0 && (o = a * Math.random(), s = 255 * Math.pow(Math.random(), .4) << 24), o -= 1, r[l++] = s;
                this.context.putImageData(e, 0, 0)
            }
        }, g.prototype._loop = function () {
            var t = this;
            this._stop || (this._noise(), this._animationHandle = (0, s.requestAnimationFrame)(function () {
                return t._loop()
            }))
        }, g.prototype.destroy = function () {
            this._animationHandle && ((0, s.cancelAnimationFrame)(this._animationHandle), this._stop = !0)
        }, g.prototype._animate = function () {
            this.canvas = this.$el.find("canvas[data-no-op-canvas]")[0], this.context = this.canvas.getContext("2d"), this._loop()
        }, g);

        function g() {
            (0, n.default)(this, g);
            for (var t = arguments.length, e = Array(t), r = 0; r < t; r++) e[r] = arguments[r];
            var i = (0, a.default)(this, h.call.apply(h, [this].concat(e)));
            return i._noiseFrameNum = -1, i
        } (e.default = p).canPlay = function (t) {
            return !0
        }, t.exports = e.default
    }, function (t, e) {
        t.exports = "<canvas data-no-op-canvas></canvas>\n<p data-no-op-msg><%=message%><p>\n"
    }, function (t, e, r) {
        var i = r(208);
        "string" == typeof i && (i = [
            [t.i, i, ""]
        ]);
        var n = {
            singleton: !0,
            hmr: !0,
            transform: void 0,
            insertInto: void 0
        };
        r(10)(i, n);
        i.locals && (t.exports = i.locals)
    }, function (t, e, r) {
        (t.exports = r(8)(!1)).push([t.i, "[data-no-op]{position:absolute;height:100%;width:100%;text-align:center}[data-no-op] p[data-no-op-msg]{position:absolute;text-align:center;font-size:25px;left:0;right:0;color:#fff;padding:10px;top:50%;-webkit-transform:translateY(-50%);transform:translateY(-50%);max-height:100%;overflow:auto}[data-no-op] canvas[data-no-op-canvas]{background-color:#777;height:100%;width:100%}", ""])
    }, function (t, e, r) {
        "use strict";
        Object.defineProperty(e, "__esModule", {
            value: !0
        });
        var i = c(r(0)),
            n = c(r(1)),
            a = c(r(3)),
            o = c(r(2)),
            s = c(r(42)),
            l = c(r(4)),
            u = c(r(7)),
            d = c(r(210));

        function c(t) {
            return t && t.__esModule ? t : {
                default: t
            }
        }
        r(211);
        var f, h = (f = s.default, (0, o.default)(p, f), (0, a.default)(p, [{
            key: "name",
            get: function () {
                return "spinner"
            }
        }, {
            key: "attributes",
            get: function () {
                return {
                    "data-spinner": "",
                    class: "spinner-three-bounce"
                }
            }
        }]), p.prototype.onBuffering = function () {
            this.show()
        }, p.prototype.onBufferFull = function () {
            this.hide()
        }, p.prototype.onStop = function () {
            this.hide()
        }, p.prototype.show = function () {
            var t = this;
            null === this.showTimeout && (this.showTimeout = setTimeout(function () {
                return t.$el.show()
            }, 300))
        }, p.prototype.hide = function () {
            null !== this.showTimeout && (clearTimeout(this.showTimeout), this.showTimeout = null), this.$el.hide()
        }, p.prototype.render = function () {
            return this.$el.html(this.template()), this.container.$el.append(this.$el), this.$el.hide(), this.container.buffering && this.onBuffering(), this
        }, p);

        function p(t) {
            (0, i.default)(this, p);
            var e = (0, n.default)(this, f.call(this, t));
            return e.template = (0, u.default)(d.default), e.showTimeout = null, e.listenTo(e.container, l.default.CONTAINER_STATE_BUFFERING, e.onBuffering), e.listenTo(e.container, l.default.CONTAINER_STATE_BUFFERFULL, e.onBufferFull), e.listenTo(e.container, l.default.CONTAINER_STOP, e.onStop), e.listenTo(e.container, l.default.CONTAINER_ENDED, e.onStop), e.listenTo(e.container, l.default.CONTAINER_ERROR, e.onStop), e.render(), e
        }
        e.default = h, t.exports = e.default
    }, function (t, e) {
        t.exports = "<div data-bounce1></div><div data-bounce2></div><div data-bounce3></div>\n"
    }, function (t, e, r) {
        var i = r(212);
        "string" == typeof i && (i = [
            [t.i, i, ""]
        ]);
        var n = {
            singleton: !0,
            hmr: !0,
            transform: void 0,
            insertInto: void 0
        };
        r(10)(i, n);
        i.locals && (t.exports = i.locals)
    }, function (t, e, r) {
        (t.exports = r(8)(!1)).push([t.i, ".spinner-three-bounce[data-spinner]{position:absolute;margin:0 auto;width:70px;text-align:center;z-index:999;left:0;right:0;margin-left:auto;margin-right:auto;top:50%;-webkit-transform:translateY(-50%);transform:translateY(-50%)}.spinner-three-bounce[data-spinner]>div{width:18px;height:18px;background-color:#fff;border-radius:100%;display:inline-block;-webkit-animation:bouncedelay 1.4s infinite ease-in-out;animation:bouncedelay 1.4s infinite ease-in-out;-webkit-animation-fill-mode:both;animation-fill-mode:both}.spinner-three-bounce[data-spinner] [data-bounce1]{-webkit-animation-delay:-.32s;animation-delay:-.32s}.spinner-three-bounce[data-spinner] [data-bounce2]{-webkit-animation-delay:-.16s;animation-delay:-.16s}@-webkit-keyframes bouncedelay{0%,80%,to{-webkit-transform:scale(0);transform:scale(0)}40%{-webkit-transform:scale(1);transform:scale(1)}}@keyframes bouncedelay{0%,80%,to{-webkit-transform:scale(0);transform:scale(0)}40%{-webkit-transform:scale(1);transform:scale(1)}}", ""])
    }, function (t, e, r) {
        "use strict";
        Object.defineProperty(e, "__esModule", {
            value: !0
        });
        var i, n = r(214),
            a = (i = n) && i.__esModule ? i : {
                default: i
            };
        e.default = a.default, t.exports = e.default
    }, function (t, e, r) {
        "use strict";
        Object.defineProperty(e, "__esModule", {
            value: !0
        });
        var i = d(r(0)),
            n = d(r(1)),
            a = d(r(3)),
            o = d(r(2)),
            s = d(r(43)),
            l = d(r(4)),
            u = d(r(6));

        function d(t) {
            return t && t.__esModule ? t : {
                default: t
            }
        }
        var c, f = (c = s.default, (0, o.default)(h, c), (0, a.default)(h, [{
            key: "name",
            get: function () {
                return "stats"
            }
        }]), h.prototype.bindEvents = function () {
            this.listenTo(this.container.playback, l.default.PLAYBACK_PLAY, this.onPlay), this.listenTo(this.container, l.default.CONTAINER_STOP, this.onStop), this.listenTo(this.container, l.default.CONTAINER_ENDED, this.onStop), this.listenTo(this.container, l.default.CONTAINER_DESTROYED, this.onStop), this.listenTo(this.container, l.default.CONTAINER_STATE_BUFFERING, this.onBuffering), this.listenTo(this.container, l.default.CONTAINER_STATE_BUFFERFULL, this.onBufferFull), this.listenTo(this.container, l.default.CONTAINER_STATS_ADD, this.onStatsAdd), this.listenTo(this.container, l.default.CONTAINER_BITRATE, this.onStatsAdd), this.listenTo(this.container.playback, l.default.PLAYBACK_STATS_ADD, this.onStatsAdd)
        }, h.prototype.setInitialAttrs = function () {
            this.firstPlay = !0, this.startupTime = 0, this.rebufferingTime = 0, this.watchingTime = 0, this.rebuffers = 0, this.externalMetrics = {}
        }, h.prototype.onPlay = function () {
            this.state = "PLAYING", this.watchingTimeInit = Date.now(), this.intervalId || (this.intervalId = setInterval(this.report.bind(this), this.reportInterval))
        }, h.prototype.onStop = function () {
            clearInterval(this.intervalId), this.report(), this.intervalId = void 0, this.state = "STOPPED"
        }, h.prototype.onBuffering = function () {
            this.firstPlay ? this.startupTimeInit = Date.now() : this.rebufferingTimeInit = Date.now(), this.state = "BUFFERING", this.rebuffers++
        }, h.prototype.onBufferFull = function () {
            this.firstPlay && this.startupTimeInit ? (this.firstPlay = !1, this.startupTime = Date.now() - this.startupTimeInit, this.watchingTimeInit = Date.now()) : this.rebufferingTimeInit && (this.rebufferingTime += this.getRebufferingTime()), this.rebufferingTimeInit = void 0, this.state = "PLAYING"
        }, h.prototype.getRebufferingTime = function () {
            return Date.now() - this.rebufferingTimeInit
        }, h.prototype.getWatchingTime = function () {
            return Date.now() - this.watchingTimeInit - this.rebufferingTime
        }, h.prototype.isRebuffering = function () {
            return !!this.rebufferingTimeInit
        }, h.prototype.onStatsAdd = function (t) {
            u.default.extend(this.externalMetrics, t)
        }, h.prototype.getStats = function () {
            var t = {
                startupTime: this.startupTime,
                rebuffers: this.rebuffers,
                rebufferingTime: this.isRebuffering() ? this.rebufferingTime + this.getRebufferingTime() : this.rebufferingTime,
                watchingTime: this.isRebuffering() ? this.getWatchingTime() - this.getRebufferingTime() : this.getWatchingTime()
            };
            return u.default.extend(t, this.externalMetrics), t
        }, h.prototype.report = function () {
            this.container.statsReport(this.getStats())
        }, h);

        function h(t) {
            (0, i.default)(this, h);
            var e = (0, n.default)(this, c.call(this, t));
            return e.setInitialAttrs(), e.reportInterval = e.options.reportInterval || 5e3, e.state = "IDLE", e
        }
        e.default = f, t.exports = e.default
    }, function (t, e, r) {
        "use strict";
        Object.defineProperty(e, "__esModule", {
            value: !0
        });
        var i = c(r(0)),
            n = c(r(1)),
            a = c(r(3)),
            o = c(r(2)),
            s = c(r(42)),
            l = c(r(4)),
            u = c(r(7)),
            d = c(r(216));

        function c(t) {
            return t && t.__esModule ? t : {
                default: t
            }
        }
        r(217);
        var f, h = (f = s.default, (0, o.default)(p, f), (0, a.default)(p, [{
            key: "name",
            get: function () {
                return "watermark"
            }
        }, {
            key: "template",
            get: function () {
                return (0, u.default)(d.default)
            }
        }]), p.prototype.bindEvents = function () {
            this.listenTo(this.container, l.default.CONTAINER_PLAY, this.onPlay), this.listenTo(this.container, l.default.CONTAINER_STOP, this.onStop), this.listenTo(this.container, l.default.CONTAINER_OPTIONS_CHANGE, this.configure)
        }, p.prototype.configure = function () {
            this.position = this.options.position || "bottom-right", this.options.watermark ? (this.imageUrl = this.options.watermark, this.imageLink = this.options.watermarkLink, this.render()) : this.$el.remove()
        }, p.prototype.onPlay = function () {
            this.hidden || this.$el.show()
        }, p.prototype.onStop = function () {
            this.$el.hide()
        }, p.prototype.render = function () {
            this.$el.hide();
            var t = {
                position: this.position,
                imageUrl: this.imageUrl,
                imageLink: this.imageLink
            };
            return this.$el.html(this.template(t)), this.container.$el.append(this.$el), this
        }, p);

        function p(t) {
            (0, i.default)(this, p);
            var e = (0, n.default)(this, f.call(this, t));
            return e.configure(), e
        }
        e.default = h, t.exports = e.default
    }, function (t, e) {
        t.exports = '<div class="clappr-watermark" data-watermark data-watermark-<%=position %>>\n<% if(typeof imageLink !== \'undefined\') { %>\n<a target=_blank href="<%= imageLink %>">\n<% } %>\n<img src="<%= imageUrl %>">\n<% if(typeof imageLink !== \'undefined\') { %>\n</a>\n<% } %>\n</div>\n'
    }, function (t, e, r) {
        var i = r(218);
        "string" == typeof i && (i = [
            [t.i, i, ""]
        ]);
        var n = {
            singleton: !0,
            hmr: !0,
            transform: void 0,
            insertInto: void 0
        };
        r(10)(i, n);
        i.locals && (t.exports = i.locals)
    }, function (t, e, r) {
        (t.exports = r(8)(!1)).push([t.i, ".clappr-watermark[data-watermark]{position:absolute;min-width:70px;max-width:200px;width:12%;text-align:center;z-index:10}.clappr-watermark[data-watermark] a{outline:none;cursor:pointer}.clappr-watermark[data-watermark] img{max-width:100%}.clappr-watermark[data-watermark-bottom-left]{bottom:10px;left:10px}.clappr-watermark[data-watermark-bottom-right]{bottom:10px;right:42px}.clappr-watermark[data-watermark-top-left]{top:10px;left:10px}.clappr-watermark[data-watermark-top-right]{top:10px;right:37px}", ""])
    }, function (m, v, y) {
        "use strict";
        (function (r) {
            Object.defineProperty(v, "__esModule", {
                value: !0
            });
            var i = f(y(0)),
                n = f(y(1)),
                t = f(y(3)),
                e = f(y(2)),
                a = f(y(42)),
                o = f(y(4)),
                s = f(y(7)),
                l = f(y(11)),
                u = f(y(80)),
                d = f(y(220)),
                c = y(5);

            function f(t) {
                return t && t.__esModule ? t : {
                    default: t
                }
            }
            y(221);
            var h, p = (h = a.default, (0, e.default)(g, h), (0, t.default)(g, [{
                key: "name",
                get: function () {
                    return "poster"
                }
            }, {
                key: "template",
                get: function () {
                    return (0, s.default)(d.default)
                }
            }, {
                key: "shouldRender",
                get: function () {
                    var t = !(!this.options.poster || !this.options.poster.showForNoOp);
                    return "html_img" !== this.container.playback.name && (this.container.playback.getPlaybackType() !== l.default.NO_OP || t)
                }
            }, {
                key: "attributes",
                get: function () {
                    return {
                        class: "player-poster",
                        "data-poster": ""
                    }
                }
            }, {
                key: "events",
                get: function () {
                    return {
                        click: "clicked"
                    }
                }
            }, {
                key: "showOnVideoEnd",
                get: function () {
                    return !this.options.poster || this.options.poster.showOnVideoEnd || void 0 === this.options.poster.showOnVideoEnd
                }
            }]), g.prototype.bindEvents = function () {
                this.listenTo(this.container, o.default.CONTAINER_STOP, this.onStop), this.listenTo(this.container, o.default.CONTAINER_PLAY, this.onPlay), this.listenTo(this.container, o.default.CONTAINER_STATE_BUFFERING, this.update), this.listenTo(this.container, o.default.CONTAINER_STATE_BUFFERFULL, this.update), this.listenTo(this.container, o.default.CONTAINER_OPTIONS_CHANGE, this.render), this.listenTo(this.container, o.default.CONTAINER_ERROR, this.onError), this.showOnVideoEnd && this.listenTo(this.container, o.default.CONTAINER_ENDED, this.onStop)
            }, g.prototype.onError = function (t) {
                this.hasFatalError = t.level === u.default.Levels.FATAL, this.hasFatalError && (this.hasStartedPlaying = !1, this.playRequested = !1, this.showPlayButton())
            }, g.prototype.onPlay = function () {
                this.hasStartedPlaying = !0, this.update()
            }, g.prototype.onStop = function () {
                this.hasStartedPlaying = !1, this.playRequested = !1, this.update()
            }, g.prototype.updatePlayButton = function (t) {
                !t || this.options.chromeless && !this.options.allowUserInteraction ? this.hidePlayButton() : this.showPlayButton()
            }, g.prototype.showPlayButton = function () {
                this.hasFatalError && !this.options.disableErrorScreen || (this.$playButton.show(), this.$el.addClass("clickable"))
            }, g.prototype.hidePlayButton = function () {
                this.$playButton.hide(), this.$el.removeClass("clickable")
            }, g.prototype.clicked = function () {
                if (!this.hasStartedPlaying) return this.options.chromeless && !this.options.allowUserInteraction || (this.playRequested = !0, this.update(), this.container.play()), !1
            }, g.prototype.shouldHideOnPlay = function () {
                return !this.container.playback.isAudioOnly
            }, g.prototype.update = function () {
                if (this.shouldRender) {
                    var t = !this.playRequested && !this.hasStartedPlaying && !this.container.buffering;
                    this.updatePlayButton(t), this.updatePoster()
                }
            }, g.prototype.updatePoster = function () {
                this.hasStartedPlaying ? this.hidePoster() : this.showPoster()
            }, g.prototype.showPoster = function () {
                this.container.disableMediaControl(), this.$el.show()
            }, g.prototype.hidePoster = function () {
                this.container.enableMediaControl(), this.shouldHideOnPlay() && this.$el.hide()
            }, g.prototype.render = function () {
                if (this.shouldRender) {
                    if (this.$el.html(this.template()), this.options.poster && void 0 === this.options.poster.custom) {
                        var t = this.options.poster.url || this.options.poster;
                        this.$el.css({
                            "background-image": "url(" + t + ")"
                        })
                    } else this.options.poster && this.$el.css({
                        background: this.options.poster.custom
                    });
                    this.container.$el.append(this.el), this.$playWrapper = this.$el.find(".play-wrapper"), this.$playWrapper.append(c.SvgIcons.play), this.$playButton = this.$playWrapper.find("svg"), this.$playButton.addClass("poster-icon"), this.$playButton.attr("data-poster", "");
                    var e = this.options.mediacontrol && this.options.mediacontrol.buttons;
                    return e && this.$el.find("svg path").css("fill", e), this.options.mediacontrol && this.options.mediacontrol.buttons && (e = this.options.mediacontrol.buttons, this.$playButton.css("color", e)), this.update(), this
                }
            }, g);

            function g(t) {
                (0, i.default)(this, g);
                var e = (0, n.default)(this, h.call(this, t));
                return e.hasStartedPlaying = !1, e.playRequested = !1, e.render(), r.nextTick(function () {
                    return e.update()
                }), e
            }
            v.default = p, m.exports = v.default
        }).call(this, y(63))
    }, function (t, e) {
        t.exports = '<div class="play-wrapper" data-poster></div>\n'
    }, function (t, e, r) {
        var i = r(222);
        "string" == typeof i && (i = [
            [t.i, i, ""]
        ]);
        var n = {
            singleton: !0,
            hmr: !0,
            transform: void 0,
            insertInto: void 0
        };
        r(10)(i, n);
        i.locals && (t.exports = i.locals)
    }, function (t, e, r) {
        (t.exports = r(8)(!1)).push([t.i, ".player-poster[data-poster]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;position:absolute;height:100%;width:100%;z-index:998;top:0;left:0;background-color:#000;background-size:cover;background-repeat:no-repeat;background-position:50% 50%}.player-poster[data-poster].clickable{cursor:pointer}.player-poster[data-poster]:hover .play-wrapper[data-poster]{opacity:1}.player-poster[data-poster] .play-wrapper[data-poster]{width:100%;height:25%;margin:0 auto;opacity:.75;transition:opacity .1s ease}.player-poster[data-poster] .play-wrapper[data-poster] svg{height:100%}.player-poster[data-poster] .play-wrapper[data-poster] svg path{fill:#fff}", ""])
    }, function (t, e, r) {
        "use strict";
        Object.defineProperty(e, "__esModule", {
            value: !0
        });
        var i, n = r(224),
            a = (i = n) && i.__esModule ? i : {
                default: i
            };
        e.default = a.default, t.exports = e.default
    }, function (t, e, r) {
        "use strict";
        Object.defineProperty(e, "__esModule", {
            value: !0
        });
        var i = u(r(0)),
            n = u(r(1)),
            a = u(r(3)),
            o = u(r(2)),
            s = u(r(43)),
            l = u(r(4));

        function u(t) {
            return t && t.__esModule ? t : {
                default: t
            }
        }
        var d, c = (d = s.default, (0, o.default)(f, d), (0, a.default)(f, [{
            key: "name",
            get: function () {
                return "google_analytics"
            }
        }]), f.prototype.embedScript = function () {
            var t = this;
            if (window._gat) this.addEventListeners();
            else {
                var e = document.createElement("script");
                e.setAttribute("type", "text/javascript"), e.setAttribute("async", "async"), e.setAttribute("src", "//www.google-analytics.com/ga.js"), e.onload = function () {
                    return t.addEventListeners()
                }, document.body.appendChild(e)
            }
        }, f.prototype.addEventListeners = function () {
            var e = this;
            this.container && (this.listenTo(this.container, l.default.CONTAINER_READY, this.onReady), this.listenTo(this.container, l.default.CONTAINER_PLAY, this.onPlay), this.listenTo(this.container, l.default.CONTAINER_STOP, this.onStop), this.listenTo(this.container, l.default.CONTAINER_PAUSE, this.onPause), this.listenTo(this.container, l.default.CONTAINER_ENDED, this.onEnded), this.listenTo(this.container, l.default.CONTAINER_STATE_BUFFERING, this.onBuffering), this.listenTo(this.container, l.default.CONTAINER_STATE_BUFFERFULL, this.onBufferFull), this.listenTo(this.container, l.default.CONTAINER_ERROR, this.onError), this.listenTo(this.container, l.default.CONTAINER_PLAYBACKSTATE, this.onPlaybackChanged), this.listenTo(this.container, l.default.CONTAINER_VOLUME, function (t) {
                return e.onVolumeChanged(t)
            }), this.listenTo(this.container, l.default.CONTAINER_SEEK, function (t) {
                return e.onSeek(t)
            }), this.listenTo(this.container, l.default.CONTAINER_FULL_SCREEN, this.onFullscreen), this.listenTo(this.container, l.default.CONTAINER_HIGHDEFINITIONUPDATE, this.onHD), this.listenTo(this.container, l.default.CONTAINER_PLAYBACKDVRSTATECHANGED, this.onDVR)), _gaq.push([this.trackerName + "_setAccount", this.account]), this.domainName && _gaq.push([this.trackerName + "_setDomainName", this.domainName])
        }, f.prototype.onReady = function () {
            this.push(["Video", "Playback", this.container.playback.name])
        }, f.prototype.onPlay = function () {
            this.push(["Video", "Play", this.container.playback.src])
        }, f.prototype.onStop = function () {
            this.push(["Video", "Stop", this.container.playback.src])
        }, f.prototype.onEnded = function () {
            this.push(["Video", "Ended", this.container.playback.src])
        }, f.prototype.onBuffering = function () {
            this.push(["Video", "Buffering", this.container.playback.src])
        }, f.prototype.onBufferFull = function () {
            this.push(["Video", "Bufferfull", this.container.playback.src])
        }, f.prototype.onError = function () {
            this.push(["Video", "Error", this.container.playback.src])
        }, f.prototype.onHD = function (t) {
            var e = t ? "ON" : "OFF";
            e !== this.currentHDState && (this.currentHDState = e, this.push(["Video", "HD - " + e, this.container.playback.src]))
        }, f.prototype.onPlaybackChanged = function (t) {
            null !== t.type && this.push(["Video", "Playback Type - " + t.type, this.container.playback.src])
        }, f.prototype.onDVR = function (t) {
            var e = t ? "ON" : "OFF";
            this.push(["Interaction", "DVR - " + e, this.container.playback.src])
        }, f.prototype.onPause = function () {
            this.push(["Video", "Pause", this.container.playback.src])
        }, f.prototype.onSeek = function () {
            this.push(["Video", "Seek", this.container.playback.src])
        }, f.prototype.onVolumeChanged = function () {
            this.push(["Interaction", "Volume", this.container.playback.src])
        }, f.prototype.onFullscreen = function () {
            this.push(["Interaction", "Fullscreen", this.container.playback.src])
        }, f.prototype.push = function (t) {
            var e = [this.trackerName + "_trackEvent"].concat(t);
            _gaq.push(e)
        }, f);

        function f(t) {
            (0, i.default)(this, f);
            var e = (0, n.default)(this, d.call(this, t));
            return e.container.options.gaAccount && (e.account = e.container.options.gaAccount, e.trackerName = e.container.options.gaTrackerName ? e.container.options.gaTrackerName + "." : "Clappr.", e.domainName = e.container.options.gaDomainName, e.currentHDState = void 0, e.embedScript()), e
        }
        e.default = c, t.exports = e.default
    }, function (t, e, r) {
        "use strict";
        Object.defineProperty(e, "__esModule", {
            value: !0
        });
        var i = d(r(0)),
            n = d(r(1)),
            a = d(r(3)),
            o = d(r(2)),
            s = d(r(43)),
            l = d(r(4)),
            u = d(r(11));

        function d(t) {
            return t && t.__esModule ? t : {
                default: t
            }
        }
        var c, f = (c = s.default, (0, o.default)(h, c), (0, a.default)(h, [{
            key: "name",
            get: function () {
                return "click_to_pause"
            }
        }]), h.prototype.bindEvents = function () {
            this.listenTo(this.container, l.default.CONTAINER_CLICK, this.click), this.listenTo(this.container, l.default.CONTAINER_SETTINGSUPDATE, this.settingsUpdate)
        }, h.prototype.click = function () {
            this.container.getPlaybackType() === u.default.LIVE && !this.container.isDvrEnabled() || (this.container.isPlaying() ? this.container.pause() : this.container.play())
        }, h.prototype.settingsUpdate = function () {
            var t = this.container.getPlaybackType() !== u.default.LIVE || this.container.isDvrEnabled();
            if (t !== this.pointerEnabled) {
                var e = t ? "addClass" : "removeClass";
                this.container.$el[e]("pointer-enabled"), this.pointerEnabled = t
            }
        }, h);

        function h(t) {
            return (0, i.default)(this, h), (0, n.default)(this, c.call(this, t))
        }
        e.default = f, t.exports = e.default
    }, function (_, b, E) {
        "use strict";
        (function (i) {
            Object.defineProperty(b, "__esModule", {
                value: !0
            });
            var e = m(E(89)),
                r = m(E(0)),
                n = m(E(1)),
                t = m(E(3)),
                a = m(E(2)),
                o = E(5),
                s = E(61),
                l = m(E(4)),
                u = m(E(24)),
                d = m(E(14)),
                c = m(E(31)),
                f = m(E(7)),
                h = m(E(11)),
                p = m(E(6));
            E(227);
            var g = m(E(229));

            function m(t) {
                return t && t.__esModule ? t : {
                    default: t
                }
            }
            var v, y = (v = u.default, (0, a.default)(A, v), (0, t.default)(A, [{
                key: "name",
                get: function () {
                    return "media_control"
                }
            }, {
                key: "disabled",
                get: function () {
                    var t = this.container && this.container.getPlaybackType() === h.default.NO_OP;
                    return this.userDisabled || t
                }
            }, {
                key: "container",
                get: function () {
                    return this.core && this.core.activeContainer
                }
            }, {
                key: "playback",
                get: function () {
                    return this.core && this.core.activePlayback
                }
            }, {
                key: "attributes",
                get: function () {
                    return {
                        class: "media-control",
                        "data-media-control": ""
                    }
                }
            }, {
                key: "events",
                get: function () {
                    return {
                        "click [data-play]": "play",
                        "click [data-pause]": "pause",
                        "click [data-playpause]": "togglePlayPause",
                        "click [data-stop]": "stop",
                        "click [data-playstop]": "togglePlayStop",
                        "click [data-fullscreen]": "toggleFullscreen",
                        "click .bar-container[data-seekbar]": "seek",
                        "click .bar-container[data-volume]": "onVolumeClick",
                        "click .drawer-icon[data-volume]": "toggleMute",
                        "mouseenter .drawer-container[data-volume]": "showVolumeBar",
                        "mouseleave .drawer-container[data-volume]": "hideVolumeBar",
                        "mousedown .bar-container[data-volume]": "startVolumeDrag",
                        "mousemove .bar-container[data-volume]": "mousemoveOnVolumeBar",
                        "mousedown .bar-scrubber[data-seekbar]": "startSeekDrag",
                        "mousemove .bar-container[data-seekbar]": "mousemoveOnSeekBar",
                        "mouseleave .bar-container[data-seekbar]": "mouseleaveOnSeekBar",
                        "mouseenter .media-control-layer[data-controls]": "setUserKeepVisible",
                        "mouseleave .media-control-layer[data-controls]": "resetUserKeepVisible"
                    }
                }
            }, {
                key: "template",
                get: function () {
                    return (0, f.default)(g.default)
                }
            }, {
                key: "volume",
                get: function () {
                    return this.container && this.container.isReady ? this.container.volume : this.intendedVolume
                }
            }, {
                key: "muted",
                get: function () {
                    return 0 === this.volume
                }
            }]), A.prototype.getExternalInterface = function () {
                var t = this;
                return {
                    setVolume: this.setVolume,
                    getVolume: function () {
                        return t.volume
                    }
                }
            }, A.prototype.bindEvents = function () {
                var t = this;
                this.stopListening(), this.listenTo(this.core, l.default.CORE_ACTIVE_CONTAINER_CHANGED, this.onActiveContainerChanged), this.listenTo(this.core, l.default.CORE_MOUSE_MOVE, this.show), this.listenTo(this.core, l.default.CORE_MOUSE_LEAVE, function () {
                    return t.hide(t.options.hideMediaControlDelay)
                }), this.listenTo(this.core, l.default.CORE_FULLSCREEN, this.show), this.listenTo(this.core, l.default.CORE_OPTIONS_CHANGE, this.configure), c.default.on(this.options.playerId + ":" + l.default.PLAYER_RESIZE, this.playerResize, this), this.bindContainerEvents()
            }, A.prototype.bindContainerEvents = function () {
                this.container && (this.listenTo(this.container, l.default.CONTAINER_PLAY, this.changeTogglePlay), this.listenTo(this.container, l.default.CONTAINER_PAUSE, this.changeTogglePlay), this.listenTo(this.container, l.default.CONTAINER_STOP, this.changeTogglePlay), this.listenTo(this.container, l.default.CONTAINER_DBLCLICK, this.toggleFullscreen), this.listenTo(this.container, l.default.CONTAINER_TIMEUPDATE, this.onTimeUpdate), this.listenTo(this.container, l.default.CONTAINER_PROGRESS, this.updateProgressBar), this.listenTo(this.container, l.default.CONTAINER_SETTINGSUPDATE, this.settingsUpdate), this.listenTo(this.container, l.default.CONTAINER_PLAYBACKDVRSTATECHANGED, this.settingsUpdate), this.listenTo(this.container, l.default.CONTAINER_HIGHDEFINITIONUPDATE, this.highDefinitionUpdate), this.listenTo(this.container, l.default.CONTAINER_MEDIACONTROL_DISABLE, this.disable), this.listenTo(this.container, l.default.CONTAINER_MEDIACONTROL_ENABLE, this.enable), this.listenTo(this.container, l.default.CONTAINER_ENDED, this.ended), this.listenTo(this.container, l.default.CONTAINER_VOLUME, this.onVolumeChanged), this.listenTo(this.container, l.default.CONTAINER_OPTIONS_CHANGE, this.setInitialVolume), "video" === this.container.playback.el.nodeName.toLowerCase() && this.listenToOnce(this.container, l.default.CONTAINER_LOADEDMETADATA, this.onLoadedMetadataOnVideoTag))
            }, A.prototype.disable = function () {
                this.userDisabled = !0, this.hide(), this.unbindKeyEvents(), this.$el.hide()
            }, A.prototype.enable = function () {
                this.options.chromeless || (this.userDisabled = !1, this.bindKeyEvents(), this.show())
            }, A.prototype.play = function () {
                this.container && this.container.play()
            }, A.prototype.pause = function () {
                this.container && this.container.pause()
            }, A.prototype.stop = function () {
                this.container && this.container.stop()
            }, A.prototype.setInitialVolume = function () {
                var t = this.persistConfig ? o.Config.restore("volume") : 100,
                    e = this.container && this.container.options || this.options;
                this.setVolume(e.mute ? 0 : t, !0)
            }, A.prototype.onVolumeChanged = function () {
                this.updateVolumeUI()
            }, A.prototype.onLoadedMetadataOnVideoTag = function () {
                var t = this.playback && this.playback.el;
                !o.Fullscreen.fullscreenEnabled() && t.webkitSupportsFullscreen && (this.fullScreenOnVideoTagSupported = !0, this.settingsUpdate())
            }, A.prototype.updateVolumeUI = function () {
                if (this.rendered) {
                    this.$volumeBarContainer.find(".bar-fill-2").css({});
                    var t = this.$volumeBarContainer.width(),
                        e = this.$volumeBarBackground.width(),
                        r = (t - e) / 2,
                        i = e * this.volume / 100 + r;
                    this.$volumeBarFill.css({
                        width: this.volume + "%"
                    }), this.$volumeBarScrubber.css({
                        left: i
                    }), this.$volumeBarContainer.find(".segmented-bar-element").removeClass("fill");
                    var n = Math.ceil(this.volume / 10);
                    this.$volumeBarContainer.find(".segmented-bar-element").slice(0, n).addClass("fill"), this.$volumeIcon.html(""), this.$volumeIcon.removeClass("muted"), this.muted ? (this.$volumeIcon.append(o.SvgIcons.volumeMute), this.$volumeIcon.addClass("muted")) : this.$volumeIcon.append(o.SvgIcons.volume), this.applyButtonStyle(this.$volumeIcon)
                }
            }, A.prototype.changeTogglePlay = function () {
                this.$playPauseToggle.html(""), this.$playStopToggle.html(""), this.container && this.container.isPlaying() ? (this.$playPauseToggle.append(o.SvgIcons.pause), this.$playStopToggle.append(o.SvgIcons.stop), this.trigger(l.default.MEDIACONTROL_PLAYING)) : (this.$playPauseToggle.append(o.SvgIcons.play), this.$playStopToggle.append(o.SvgIcons.play), this.trigger(l.default.MEDIACONTROL_NOTPLAYING), d.default.isMobile && this.show()), this.applyButtonStyle(this.$playPauseToggle), this.applyButtonStyle(this.$playStopToggle)
            }, A.prototype.mousemoveOnSeekBar = function (t) {
                if (this.settings.seekEnabled) {
                    var e = t.pageX - this.$seekBarContainer.offset().left - this.$seekBarHover.width() / 2;
                    this.$seekBarHover.css({
                        left: e
                    })
                }
                this.trigger(l.default.MEDIACONTROL_MOUSEMOVE_SEEKBAR, t)
            }, A.prototype.mouseleaveOnSeekBar = function (t) {
                this.trigger(l.default.MEDIACONTROL_MOUSELEAVE_SEEKBAR, t)
            }, A.prototype.onVolumeClick = function (t) {
                this.setVolume(this.getVolumeFromUIEvent(t))
            }, A.prototype.mousemoveOnVolumeBar = function (t) {
                this.draggingVolumeBar && this.setVolume(this.getVolumeFromUIEvent(t))
            }, A.prototype.playerResize = function (t) {
                this.$fullscreenToggle.html("");
                var e = this.core.isFullscreen() ? o.SvgIcons.exitFullscreen : o.SvgIcons.fullscreen;
                this.$fullscreenToggle.append(e), this.applyButtonStyle(this.$fullscreenToggle), 0 !== this.$el.find(".media-control").length && this.$el.removeClass("w320"), (t.width <= 320 || this.options.hideVolumeBar) && this.$el.addClass("w320")
            }, A.prototype.togglePlayPause = function () {
                return this.container.isPlaying() ? this.container.pause() : this.container.play(), !1
            }, A.prototype.togglePlayStop = function () {
                this.container.isPlaying() ? this.container.stop() : this.container.play()
            }, A.prototype.startSeekDrag = function (t) {
                this.settings.seekEnabled && (this.draggingSeekBar = !0, this.$el.addClass("dragging"), this.$seekBarLoaded.addClass("media-control-notransition"), this.$seekBarPosition.addClass("media-control-notransition"), this.$seekBarScrubber.addClass("media-control-notransition"), t && t.preventDefault())
            }, A.prototype.startVolumeDrag = function (t) {
                this.draggingVolumeBar = !0, this.$el.addClass("dragging"), t && t.preventDefault()
            }, A.prototype.stopDrag = function (t) {
                this.draggingSeekBar && this.seek(t), this.$el.removeClass("dragging"), this.$seekBarLoaded.removeClass("media-control-notransition"), this.$seekBarPosition.removeClass("media-control-notransition"), this.$seekBarScrubber.removeClass("media-control-notransition dragging"), this.draggingSeekBar = !1, this.draggingVolumeBar = !1
            }, A.prototype.updateDrag = function (t) {
                if (this.draggingSeekBar) {
                    t.preventDefault();
                    var e = (t.pageX - this.$seekBarContainer.offset().left) / this.$seekBarContainer.width() * 100;
                    e = Math.min(100, Math.max(e, 0)), this.setSeekPercentage(e)
                } else this.draggingVolumeBar && (t.preventDefault(), this.setVolume(this.getVolumeFromUIEvent(t)))
            }, A.prototype.getVolumeFromUIEvent = function (t) {
                return (t.pageX - this.$volumeBarContainer.offset().left) / this.$volumeBarContainer.width() * 100
            }, A.prototype.toggleMute = function () {
                if (this.muted) return this.setVolume(this._mutedVolume || 100), void (this._mutedVolume = null);
                this._mutedVolume = this.volume, this.setVolume(0)
            }, A.prototype.setVolume = function (t, e) {
                var r = this,
                    i = 1 < arguments.length && void 0 !== e && e;

                function n() {
                    r.container && r.container.isReady ? r.container.setVolume(t) : r.listenToOnce(r.container, l.default.CONTAINER_READY, function () {
                        r.container.setVolume(t)
                    })
                }
                t = Math.min(100, Math.max(t, 0)), this.intendedVolume = t, this.persistConfig && !i && o.Config.persist("volume", t), this.container ? n() : this.listenToOnce(this, l.default.MEDIACONTROL_CONTAINERCHANGED, function () {
                    return n()
                })
            }, A.prototype.toggleFullscreen = function () {
                this.trigger(l.default.MEDIACONTROL_FULLSCREEN, this.name), this.container.fullscreen(), this.core.toggleFullscreen(), this.resetUserKeepVisible()
            }, A.prototype.onActiveContainerChanged = function () {
                this.fullScreenOnVideoTagSupported = null, c.default.off(this.options.playerId + ":" + l.default.PLAYER_RESIZE, this.playerResize, this), this.bindEvents(), this.setInitialVolume(), this.changeTogglePlay(), this.bindContainerEvents(), this.settingsUpdate(), this.container && this.container.trigger(l.default.CONTAINER_PLAYBACKDVRSTATECHANGED, this.container.isDvrInUse()), this.container && this.container.mediaControlDisabled && this.disable(), this.trigger(l.default.MEDIACONTROL_CONTAINERCHANGED)
            }, A.prototype.showVolumeBar = function () {
                this.hideVolumeId && clearTimeout(this.hideVolumeId), this.$volumeBarContainer.removeClass("volume-bar-hide")
            }, A.prototype.hideVolumeBar = function (t) {
                var e = this,
                    r = 0 < arguments.length && void 0 !== t ? t : 400;
                this.$volumeBarContainer && (this.draggingVolumeBar ? this.hideVolumeId = setTimeout(function () {
                    return e.hideVolumeBar()
                }, r) : (this.hideVolumeId && clearTimeout(this.hideVolumeId), this.hideVolumeId = setTimeout(function () {
                    return e.$volumeBarContainer.addClass("volume-bar-hide")
                }, r)))
            }, A.prototype.ended = function () {
                this.changeTogglePlay()
            }, A.prototype.updateProgressBar = function (t) {
                var e = t.start / t.total * 100,
                    r = t.current / t.total * 100;
                this.$seekBarLoaded.css({
                    left: e + "%",
                    width: r - e + "%"
                })
            }, A.prototype.onTimeUpdate = function (t) {
                if (!this.draggingSeekBar) {
                    var e = t.current < 0 ? t.total : t.current;
                    this.currentPositionValue = e, this.currentDurationValue = t.total, this.renderSeekBar()
                }
            }, A.prototype.renderSeekBar = function () {
                if (null !== this.currentPositionValue && null !== this.currentDurationValue) {
                    this.currentSeekBarPercentage = 100, this.container && (this.container.getPlaybackType() !== h.default.LIVE || this.container.isDvrInUse()) && (this.currentSeekBarPercentage = this.currentPositionValue / this.currentDurationValue * 100), this.setSeekPercentage(this.currentSeekBarPercentage);
                    var t = (0, o.formatTime)(this.currentPositionValue),
                        e = (0, o.formatTime)(this.currentDurationValue);
                    t !== this.displayedPosition && (this.$position.text(t), this.displayedPosition = t), e !== this.displayedDuration && (this.$duration.text(e), this.displayedDuration = e)
                }
            }, A.prototype.seek = function (t) {
                if (this.settings.seekEnabled) {
                    var e = (t.pageX - this.$seekBarContainer.offset().left) / this.$seekBarContainer.width() * 100;
                    return e = Math.min(100, Math.max(e, 0)), this.container && this.container.seekPercentage(e), this.setSeekPercentage(e), !1
                }
            }, A.prototype.setKeepVisible = function () {
                this.keepVisible = !0
            }, A.prototype.resetKeepVisible = function () {
                this.keepVisible = !1
            }, A.prototype.setUserKeepVisible = function () {
                this.userKeepVisible = !0
            }, A.prototype.resetUserKeepVisible = function () {
                this.userKeepVisible = !1
            }, A.prototype.isVisible = function () {
                return !this.$el.hasClass("media-control-hide")
            }, A.prototype.show = function (t) {
                var e = this;
                if (!this.disabled) {
                    var r = t && t.clientX !== this.lastMouseX && t.clientY !== this.lastMouseY;
                    t && !r && !navigator.userAgent.match(/firefox/i) || (clearTimeout(this.hideId), this.$el.show(), this.trigger(l.default.MEDIACONTROL_SHOW, this.name), this.container && this.container.trigger(l.default.CONTAINER_MEDIACONTROL_SHOW, this.name), this.$el.removeClass("media-control-hide"), this.hideId = setTimeout(function () {
                        return e.hide()
                    }, 2e3), t && (this.lastMouseX = t.clientX, this.lastMouseY = t.clientY)), this.updateCursorStyle(!0)
                }
            }, A.prototype.hide = function (t) {
                var e = this,
                    r = 0 < arguments.length && void 0 !== t ? t : 0;
                if (this.isVisible()) {
                    var i = r || 2e3;
                    if (clearTimeout(this.hideId), this.disabled || !1 !== this.options.hideMediaControl) {
                        var n = this.userKeepVisible || this.keepVisible,
                            a = this.draggingSeekBar || this.draggingVolumeBar;
                        !this.disabled && (r || n || a) ? this.hideId = setTimeout(function () {
                            return e.hide()
                        }, i) : (this.trigger(l.default.MEDIACONTROL_HIDE, this.name), this.container && this.container.trigger(l.default.CONTAINER_MEDIACONTROL_HIDE, this.name), this.$el.addClass("media-control-hide"), this.hideVolumeBar(0), this.updateCursorStyle(!1))
                    }
                }
            }, A.prototype.updateCursorStyle = function (t) {
                t ? this.core.$el.removeClass("nocursor") : this.core.isFullscreen() && this.core.$el.addClass("nocursor")
            }, A.prototype.settingsUpdate = function () {
                var t = this.getSettings();
                !t || this.fullScreenOnVideoTagSupported || o.Fullscreen.fullscreenEnabled() || (t.default && (0, o.removeArrayItem)(t.default, "fullscreen"), t.left && (0, o.removeArrayItem)(t.left, "fullscreen"), t.right && (0, o.removeArrayItem)(t.right, "fullscreen")), (0, e.default)(this.settings) !== (0, e.default)(t) && (this.settings = t, this.render())
            }, A.prototype.getSettings = function () {
                return p.default.extend(!0, {}, this.container && this.container.settings)
            }, A.prototype.highDefinitionUpdate = function (t) {
                var e = (this.isHD = t) ? "addClass" : "removeClass";
                this.$hdIndicator[e]("enabled")
            }, A.prototype.createCachedElements = function () {
                var t = this.$el.find(".media-control-layer");
                this.$duration = t.find(".media-control-indicator[data-duration]"), this.$fullscreenToggle = t.find("button.media-control-button[data-fullscreen]"), this.$playPauseToggle = t.find("button.media-control-button[data-playpause]"), this.$playStopToggle = t.find("button.media-control-button[data-playstop]"), this.$position = t.find(".media-control-indicator[data-position]"), this.$seekBarContainer = t.find(".bar-container[data-seekbar]"), this.$seekBarHover = t.find(".bar-hover[data-seekbar]"), this.$seekBarLoaded = t.find(".bar-fill-1[data-seekbar]"), this.$seekBarPosition = t.find(".bar-fill-2[data-seekbar]"), this.$seekBarScrubber = t.find(".bar-scrubber[data-seekbar]"), this.$volumeBarContainer = t.find(".bar-container[data-volume]"), this.$volumeContainer = t.find(".drawer-container[data-volume]"), this.$volumeIcon = t.find(".drawer-icon[data-volume]"), this.$volumeBarBackground = this.$el.find(".bar-background[data-volume]"), this.$volumeBarFill = this.$el.find(".bar-fill-1[data-volume]"), this.$volumeBarScrubber = this.$el.find(".bar-scrubber[data-volume]"), this.$hdIndicator = this.$el.find("button.media-control-button[data-hd-indicator]"), this.resetIndicators(), this.initializeIcons()
            }, A.prototype.resetIndicators = function () {
                this.displayedPosition = this.$position.text(), this.displayedDuration = this.$duration.text()
            }, A.prototype.initializeIcons = function () {
                var t = this.$el.find(".media-control-layer");
                t.find("button.media-control-button[data-play]").append(o.SvgIcons.play), t.find("button.media-control-button[data-pause]").append(o.SvgIcons.pause), t.find("button.media-control-button[data-stop]").append(o.SvgIcons.stop), this.$playPauseToggle.append(o.SvgIcons.play), this.$playStopToggle.append(o.SvgIcons.play), this.$volumeIcon.append(o.SvgIcons.volume), this.$fullscreenToggle.append(o.SvgIcons.fullscreen), this.$hdIndicator.append(o.SvgIcons.hd)
            }, A.prototype.setSeekPercentage = function (t) {
                t = Math.max(Math.min(t, 100), 0), this.displayedSeekBarPercentage !== t && (this.displayedSeekBarPercentage = t, this.$seekBarPosition.removeClass("media-control-notransition"), this.$seekBarScrubber.removeClass("media-control-notransition"), this.$seekBarPosition.css({
                    width: t + "%"
                }), this.$seekBarScrubber.css({
                    left: t + "%"
                }))
            }, A.prototype.seekRelative = function (t) {
                if (this.settings.seekEnabled) {
                    var e = this.container.getCurrentTime(),
                        r = this.container.getDuration(),
                        i = Math.min(Math.max(e + t, 0), r);
                    i = Math.min(100 * i / r, 100), this.container.seekPercentage(i)
                }
            }, A.prototype.bindKeyAndShow = function (t, e) {
                var r = this;
                this.kibo.down(t, function () {
                    return r.show(), e()
                })
            }, A.prototype.bindKeyEvents = function () {
                var e = this;
                d.default.isMobile || this.options.disableKeyboardShortcuts || (this.unbindKeyEvents(), this.kibo = new s.Kibo(this.options.focusElement || this.options.parentElement), this.bindKeyAndShow("space", function () {
                    return e.togglePlayPause()
                }), this.bindKeyAndShow("left", function () {
                    return e.seekRelative(-5)
                }), this.bindKeyAndShow("right", function () {
                    return e.seekRelative(5)
                }), this.bindKeyAndShow("shift left", function () {
                    return e.seekRelative(-10)
                }), this.bindKeyAndShow("shift right", function () {
                    return e.seekRelative(10)
                }), this.bindKeyAndShow("shift ctrl left", function () {
                    return e.seekRelative(-15)
                }), this.bindKeyAndShow("shift ctrl right", function () {
                    return e.seekRelative(15)
                }), ["1", "2", "3", "4", "5", "6", "7", "8", "9", "0"].forEach(function (t) {
                    e.bindKeyAndShow(t, function () {
                        e.settings.seekEnabled && e.container && e.container.seekPercentage(10 * t)
                    })
                }))
            }, A.prototype.unbindKeyEvents = function () {
                this.kibo && (this.kibo.off("space"), this.kibo.off("left"), this.kibo.off("right"), this.kibo.off("shift left"), this.kibo.off("shift right"), this.kibo.off("shift ctrl left"), this.kibo.off("shift ctrl right"), this.kibo.off(["1", "2", "3", "4", "5", "6", "7", "8", "9", "0"]))
            }, A.prototype.parseColors = function () {
                if (this.options.mediacontrol) {
                    this.buttonsColor = this.options.mediacontrol.buttons;
                    var t = this.options.mediacontrol.seekbar;
                    this.$el.find(".bar-fill-2[data-seekbar]").css("background-color", t), this.$el.find(".media-control-icon svg path").css("fill", this.buttonsColor), this.$el.find(".segmented-bar-element[data-volume]").css("boxShadow", "inset 2px 0 0 " + this.buttonsColor)
                }
            }, A.prototype.applyButtonStyle = function (t) {
                this.buttonsColor && t && (0, p.default)(t).find("svg path").css("fill", this.buttonsColor)
            }, A.prototype.destroy = function () {
                (0, p.default)(document).unbind("mouseup", this.stopDragHandler), (0, p.default)(document).unbind("mousemove", this.updateDragHandler), this.unbindKeyEvents(), this.stopListening(), v.prototype.destroy.call(this)
            }, A.prototype.configure = function (t) {
                this.options.chromeless || t.source || t.sources ? this.disable() : this.enable(), this.trigger(l.default.MEDIACONTROL_OPTIONS_CHANGE)
            }, A.prototype.render = function () {
                var t = this,
                    e = this.options.hideMediaControlDelay || 2e3;
                this.settings && this.$el.html(this.template({
                    settings: this.settings
                })), this.createCachedElements(), this.$playPauseToggle.addClass("paused"), this.$playStopToggle.addClass("stopped"), this.changeTogglePlay(), this.container && (this.hideId = setTimeout(function () {
                    return t.hide()
                }, e), this.disabled && this.hide()), d.default.isSafari && d.default.isMobile && (d.default.version < 10 ? this.$volumeContainer.css("display", "none") : this.$volumeBarContainer.css("display", "none")), this.$seekBarPosition.addClass("media-control-notransition"), this.$seekBarScrubber.addClass("media-control-notransition");
                var r = 0;
                return this.displayedSeekBarPercentage && (r = this.displayedSeekBarPercentage), this.displayedSeekBarPercentage = null, this.setSeekPercentage(r), i.nextTick(function () {
                    t.settings.seekEnabled || t.$seekBarContainer.addClass("seek-disabled"), d.default.isMobile || t.options.disableKeyboardShortcuts || t.bindKeyEvents(), t.playerResize({
                        width: t.options.width,
                        height: t.options.height
                    }), t.hideVolumeBar(0)
                }), this.parseColors(), this.highDefinitionUpdate(this.isHD), this.core.$el.append(this.el), this.rendered = !0, this.updateVolumeUI(), this.trigger(l.default.MEDIACONTROL_RENDERED), this
            }, A);

            function A(t) {
                (0, r.default)(this, A);
                var e = (0, n.default)(this, v.call(this, t));
                return e.persistConfig = e.options.persistConfig, e.currentPositionValue = null, e.currentDurationValue = null, e.keepVisible = !1, e.fullScreenOnVideoTagSupported = null, e.setInitialVolume(), e.settings = {
                    left: ["play", "stop", "pause"],
                    right: ["volume"],
                    default: ["position", "seekbar", "duration"]
                }, e.kibo = new s.Kibo(e.options.focusElement), e.bindKeyEvents(), e.container ? p.default.isEmptyObject(e.container.settings) || (e.settings = p.default.extend({}, e.container.settings)) : e.settings = {}, e.userDisabled = !1, (e.container && e.container.mediaControlDisabled || e.options.chromeless) && e.disable(), e.stopDragHandler = function (t) {
                    return e.stopDrag(t)
                }, e.updateDragHandler = function (t) {
                    return e.updateDrag(t)
                }, (0, p.default)(document).bind("mouseup", e.stopDragHandler), (0, p.default)(document).bind("mousemove", e.updateDragHandler), e
            } (b.default = y).extend = function (t) {
                return (0, o.extend)(y, t)
            }, _.exports = b.default
        }).call(this, E(63))
    }, function (t, e, r) {
        var i = r(228);
        "string" == typeof i && (i = [
            [t.i, i, ""]
        ]);
        var n = {
            singleton: !0,
            hmr: !0,
            transform: void 0,
            insertInto: void 0
        };
        r(10)(i, n);
        i.locals && (t.exports = i.locals)
    }, function (t, e, r) {
        var i = r(82);
        (t.exports = r(8)(!1)).push([t.i, ".media-control-notransition{transition:none!important}.media-control[data-media-control]{position:absolute;width:100%;height:100%;z-index:9999;pointer-events:none}.media-control[data-media-control].dragging{pointer-events:auto;cursor:-webkit-grabbing!important;cursor:grabbing!important;cursor:url(" + i(r(97)) + "),move}.media-control[data-media-control].dragging *{cursor:-webkit-grabbing!important;cursor:grabbing!important;cursor:url(" + i(r(97)) + '),move}.media-control[data-media-control] .media-control-background[data-background]{position:absolute;height:40%;width:100%;bottom:0;background:linear-gradient(transparent,rgba(0,0,0,.9));transition:opacity .6s ease-out}.media-control[data-media-control] .media-control-icon{line-height:0;letter-spacing:0;speak:none;color:#fff;opacity:.5;vertical-align:middle;text-align:left;transition:all .1s ease}.media-control[data-media-control] .media-control-icon:hover{color:#fff;opacity:.75;text-shadow:hsla(0,0%,100%,.8) 0 0 5px}.media-control[data-media-control].media-control-hide .media-control-background[data-background]{opacity:0}.media-control[data-media-control].media-control-hide .media-control-layer[data-controls]{bottom:-50px}.media-control[data-media-control].media-control-hide .media-control-layer[data-controls] .bar-container[data-seekbar] .bar-scrubber[data-seekbar]{opacity:0}.media-control[data-media-control] .media-control-layer[data-controls]{position:absolute;bottom:7px;width:100%;height:32px;font-size:0;vertical-align:middle;pointer-events:auto;transition:bottom .4s ease-out}.media-control[data-media-control] .media-control-layer[data-controls] .media-control-left-panel[data-media-control]{position:absolute;top:0;left:4px;height:100%}.media-control[data-media-control] .media-control-layer[data-controls] .media-control-center-panel[data-media-control]{height:100%;text-align:center;line-height:32px}.media-control[data-media-control] .media-control-layer[data-controls] .media-control-right-panel[data-media-control]{position:absolute;top:0;right:4px;height:100%}.media-control[data-media-control] .media-control-layer[data-controls] button.media-control-button{background-color:transparent;border:0;margin:0 6px;padding:0;cursor:pointer;display:inline-block;width:32px;height:100%}.media-control[data-media-control] .media-control-layer[data-controls] button.media-control-button svg{width:100%;height:22px}.media-control[data-media-control] .media-control-layer[data-controls] button.media-control-button svg path{fill:#fff}.media-control[data-media-control] .media-control-layer[data-controls] button.media-control-button:focus{outline:none}.media-control[data-media-control] .media-control-layer[data-controls] button.media-control-button[data-pause],.media-control[data-media-control] .media-control-layer[data-controls] button.media-control-button[data-play],.media-control[data-media-control] .media-control-layer[data-controls] button.media-control-button[data-stop]{float:left;height:100%}.media-control[data-media-control] .media-control-layer[data-controls] button.media-control-button[data-fullscreen]{float:right;background-color:transparent;border:0;height:100%}.media-control[data-media-control] .media-control-layer[data-controls] button.media-control-button[data-hd-indicator]{background-color:transparent;border:0;cursor:default;display:none;float:right;height:100%}.media-control[data-media-control] .media-control-layer[data-controls] button.media-control-button[data-hd-indicator].enabled{display:block;opacity:1}.media-control[data-media-control] .media-control-layer[data-controls] button.media-control-button[data-hd-indicator].enabled:hover{opacity:1;text-shadow:none}.media-control[data-media-control] .media-control-layer[data-controls] button.media-control-button[data-playpause],.media-control[data-media-control] .media-control-layer[data-controls] button.media-control-button[data-playstop]{float:left}.media-control[data-media-control] .media-control-layer[data-controls] .media-control-indicator[data-duration],.media-control[data-media-control] .media-control-layer[data-controls] .media-control-indicator[data-position]{display:inline-block;font-size:10px;color:#fff;cursor:default;line-height:32px;position:relative}.media-control[data-media-control] .media-control-layer[data-controls] .media-control-indicator[data-position]{margin:0 6px 0 7px}.media-control[data-media-control] .media-control-layer[data-controls] .media-control-indicator[data-duration]{color:hsla(0,0%,100%,.5);margin-right:6px}.media-control[data-media-control] .media-control-layer[data-controls] .media-control-indicator[data-duration]:before{content:"|";margin-right:7px}.media-control[data-media-control] .media-control-layer[data-controls] .bar-container[data-seekbar]{position:absolute;top:-20px;left:0;display:inline-block;vertical-align:middle;width:100%;height:25px;cursor:pointer}.media-control[data-media-control] .media-control-layer[data-controls] .bar-container[data-seekbar] .bar-background[data-seekbar]{width:100%;height:1px;position:relative;top:12px;background-color:#666}.media-control[data-media-control] .media-control-layer[data-controls] .bar-container[data-seekbar] .bar-background[data-seekbar] .bar-fill-1[data-seekbar]{position:absolute;top:0;left:0;width:0;height:100%;background-color:#c2c2c2;transition:all .1s ease-out}.media-control[data-media-control] .media-control-layer[data-controls] .bar-container[data-seekbar] .bar-background[data-seekbar] .bar-fill-2[data-seekbar]{position:absolute;top:0;left:0;width:0;height:100%;background-color:#005aff;transition:all .1s ease-out}.media-control[data-media-control] .media-control-layer[data-controls] .bar-container[data-seekbar] .bar-background[data-seekbar] .bar-hover[data-seekbar]{opacity:0;position:absolute;top:-3px;width:5px;height:7px;background-color:hsla(0,0%,100%,.5);transition:opacity .1s ease}.media-control[data-media-control] .media-control-layer[data-controls] .bar-container[data-seekbar]:hover .bar-background[data-seekbar] .bar-hover[data-seekbar]{opacity:1}.media-control[data-media-control] .media-control-layer[data-controls] .bar-container[data-seekbar].seek-disabled{cursor:default}.media-control[data-media-control] .media-control-layer[data-controls] .bar-container[data-seekbar].seek-disabled:hover .bar-background[data-seekbar] .bar-hover[data-seekbar]{opacity:0}.media-control[data-media-control] .media-control-layer[data-controls] .bar-container[data-seekbar] .bar-scrubber[data-seekbar]{position:absolute;-webkit-transform:translateX(-50%);transform:translateX(-50%);top:2px;left:0;width:20px;height:20px;opacity:1;transition:all .1s ease-out}.media-control[data-media-control] .media-control-layer[data-controls] .bar-container[data-seekbar] .bar-scrubber[data-seekbar] .bar-scrubber-icon[data-seekbar]{position:absolute;left:6px;top:6px;width:8px;height:8px;border-radius:10px;box-shadow:0 0 0 6px hsla(0,0%,100%,.2);background-color:#fff}.media-control[data-media-control] .media-control-layer[data-controls] .drawer-container[data-volume]{float:right;display:inline-block;height:32px;cursor:pointer;margin:0 6px;box-sizing:border-box}.media-control[data-media-control] .media-control-layer[data-controls] .drawer-container[data-volume] .drawer-icon-container[data-volume]{float:left;bottom:0}.media-control[data-media-control] .media-control-layer[data-controls] .drawer-container[data-volume] .drawer-icon-container[data-volume] .drawer-icon[data-volume]{background-color:transparent;border:0;box-sizing:content-box;width:32px;height:32px;opacity:.5}.media-control[data-media-control] .media-control-layer[data-controls] .drawer-container[data-volume] .drawer-icon-container[data-volume] .drawer-icon[data-volume]:hover{opacity:.75}.media-control[data-media-control] .media-control-layer[data-controls] .drawer-container[data-volume] .drawer-icon-container[data-volume] .drawer-icon[data-volume] svg{height:24px;position:relative;top:3px}.media-control[data-media-control] .media-control-layer[data-controls] .drawer-container[data-volume] .drawer-icon-container[data-volume] .drawer-icon[data-volume] svg path{fill:#fff}.media-control[data-media-control] .media-control-layer[data-controls] .drawer-container[data-volume] .drawer-icon-container[data-volume] .drawer-icon[data-volume].muted svg{margin-left:2px}.media-control[data-media-control] .media-control-layer[data-controls] .drawer-container[data-volume] .bar-container[data-volume]{float:left;position:relative;overflow:hidden;top:6px;width:42px;height:18px;padding:3px 0;transition:width .2s ease-out}.media-control[data-media-control] .media-control-layer[data-controls] .drawer-container[data-volume] .bar-container[data-volume] .bar-background[data-volume]{height:1px;position:relative;top:7px;margin:0 3px;background-color:#666}.media-control[data-media-control] .media-control-layer[data-controls] .drawer-container[data-volume] .bar-container[data-volume] .bar-background[data-volume] .bar-fill-1[data-volume]{position:absolute;top:0;left:0;width:0;height:100%;background-color:#c2c2c2;transition:all .1s ease-out}.media-control[data-media-control] .media-control-layer[data-controls] .drawer-container[data-volume] .bar-container[data-volume] .bar-background[data-volume] .bar-fill-2[data-volume]{position:absolute;top:0;left:0;width:0;height:100%;background-color:#005aff;transition:all .1s ease-out}.media-control[data-media-control] .media-control-layer[data-controls] .drawer-container[data-volume] .bar-container[data-volume] .bar-background[data-volume] .bar-hover[data-volume]{opacity:0;position:absolute;top:-3px;width:5px;height:7px;background-color:hsla(0,0%,100%,.5);transition:opacity .1s ease}.media-control[data-media-control] .media-control-layer[data-controls] .drawer-container[data-volume] .bar-container[data-volume] .bar-scrubber[data-volume]{position:absolute;-webkit-transform:translateX(-50%);transform:translateX(-50%);top:0;left:0;width:20px;height:20px;opacity:1;transition:all .1s ease-out}.media-control[data-media-control] .media-control-layer[data-controls] .drawer-container[data-volume] .bar-container[data-volume] .bar-scrubber[data-volume] .bar-scrubber-icon[data-volume]{position:absolute;left:6px;top:6px;width:8px;height:8px;border-radius:10px;box-shadow:0 0 0 6px hsla(0,0%,100%,.2);background-color:#fff}.media-control[data-media-control] .media-control-layer[data-controls] .drawer-container[data-volume] .bar-container[data-volume] .segmented-bar-element[data-volume]{float:left;width:4px;padding-left:2px;height:12px;opacity:.5;box-shadow:inset 2px 0 0 #fff;transition:-webkit-transform .2s ease-out;transition:transform .2s ease-out;transition:transform .2s ease-out,-webkit-transform .2s ease-out}.media-control[data-media-control] .media-control-layer[data-controls] .drawer-container[data-volume] .bar-container[data-volume] .segmented-bar-element[data-volume].fill{box-shadow:inset 2px 0 0 #fff;opacity:1}.media-control[data-media-control] .media-control-layer[data-controls] .drawer-container[data-volume] .bar-container[data-volume] .segmented-bar-element[data-volume]:first-of-type{padding-left:0}.media-control[data-media-control] .media-control-layer[data-controls] .drawer-container[data-volume] .bar-container[data-volume] .segmented-bar-element[data-volume]:hover{-webkit-transform:scaleY(1.5);transform:scaleY(1.5)}.media-control[data-media-control].w320 .media-control-layer[data-controls] .drawer-container[data-volume] .bar-container[data-volume].volume-bar-hide{width:0;height:12px;top:9px;padding:0}', ""])
    }, function (t, e) {
        t.exports = '<div class="media-control-background" data-background></div>\n<div class="media-control-layer" data-controls>\n  <%  var renderBar = function(name) { %>\n      <div class="bar-container" data-<%= name %>>\n        <div class="bar-background" data-<%= name %>>\n          <div class="bar-fill-1" data-<%= name %>></div>\n          <div class="bar-fill-2" data-<%= name %>></div>\n          <div class="bar-hover" data-<%= name %>></div>\n        </div>\n        <div class="bar-scrubber" data-<%= name %>>\n          <div class="bar-scrubber-icon" data-<%= name %>></div>\n        </div>\n      </div>\n  <%  }; %>\n  <%  var renderSegmentedBar = function(name, segments) {\n      segments = segments || 10; %>\n    <div class="bar-container" data-<%= name %>>\n    <% for (var i = 0; i < segments; i++) { %>\n      <div class="segmented-bar-element" data-<%= name %>></div>\n    <% } %>\n    </div>\n  <% }; %>\n  <% var renderDrawer = function(name, renderContent) { %>\n      <div class="drawer-container" data-<%= name %>>\n        <div class="drawer-icon-container" data-<%= name %>>\n          <div class="drawer-icon media-control-icon" data-<%= name %>></div>\n          <span class="drawer-text" data-<%= name %>></span>\n        </div>\n        <% renderContent(name); %>\n      </div>\n  <% }; %>\n  <% var renderIndicator = function(name) { %>\n      <div class="media-control-indicator" data-<%= name %>></div>\n  <% }; %>\n  <% var renderButton = function(name) { %>\n    <button type="button" class="media-control-button media-control-icon" data-<%= name %> aria-label="<%= name %>"></button>\n  <% }; %>\n  <%  var templates = {\n        bar: renderBar,\n        segmentedBar: renderSegmentedBar,\n      };\n      var render = function(settingsList) {\n        settingsList.forEach(function(setting) {\n          if(setting === "seekbar") {\n            renderBar(setting);\n          } else if (setting === "volume") {\n            renderDrawer(setting, settings.volumeBarTemplate ? templates[settings.volumeBarTemplate] : function(name) { return renderSegmentedBar(name); });\n          } else if (setting === "duration" || setting === "position") {\n            renderIndicator(setting);\n          } else {\n            renderButton(setting);\n          }\n        });\n      }; %>\n  <% if (settings.default && settings.default.length) { %>\n  <div class="media-control-center-panel" data-media-control>\n    <% render(settings.default); %>\n  </div>\n  <% } %>\n  <% if (settings.left && settings.left.length) { %>\n  <div class="media-control-left-panel" data-media-control>\n    <% render(settings.left); %>\n  </div>\n  <% } %>\n  <% if (settings.right && settings.right.length) { %>\n  <div class="media-control-right-panel" data-media-control>\n    <% render(settings.right); %>\n  </div>\n  <% } %>\n</div>\n'
    }, function (t, e, r) {
        "use strict";
        Object.defineProperty(e, "__esModule", {
            value: !0
        });
        var i = f(r(0)),
            n = f(r(1)),
            a = f(r(3)),
            o = f(r(2)),
            s = f(r(24)),
            l = f(r(7)),
            u = f(r(11)),
            d = f(r(4)),
            c = f(r(231));

        function f(t) {
            return t && t.__esModule ? t : {
                default: t
            }
        }
        r(232);
        var h, p = (h = s.default, (0, o.default)(g, h), (0, a.default)(g, [{
            key: "template",
            get: function () {
                return (0, l.default)(c.default)
            }
        }, {
            key: "name",
            get: function () {
                return "dvr_controls"
            }
        }, {
            key: "events",
            get: function () {
                return {
                    "click .live-button": "click"
                }
            }
        }, {
            key: "attributes",
            get: function () {
                return {
                    class: "dvr-controls",
                    "data-dvr-controls": ""
                }
            }
        }]), g.prototype.bindEvents = function () {
            this.listenTo(this.core.mediaControl, d.default.MEDIACONTROL_CONTAINERCHANGED, this.containerChanged), this.listenTo(this.core.mediaControl, d.default.MEDIACONTROL_RENDERED, this.settingsUpdate), this.listenTo(this.core, d.default.CORE_OPTIONS_CHANGE, this.render), this.core.getCurrentContainer() && (this.listenToOnce(this.core.getCurrentContainer(), d.default.CONTAINER_TIMEUPDATE, this.render), this.listenTo(this.core.getCurrentContainer(), d.default.CONTAINER_PLAYBACKDVRSTATECHANGED, this.dvrChanged))
        }, g.prototype.containerChanged = function () {
            this.stopListening(), this.bindEvents()
        }, g.prototype.dvrChanged = function (t) {
            this.core.getPlaybackType() === u.default.LIVE && (this.settingsUpdate(), this.core.mediaControl.$el.addClass("live"), t ? (this.core.mediaControl.$el.addClass("dvr"), this.core.mediaControl.$el.find(".media-control-indicator[data-position], .media-control-indicator[data-duration]").hide()) : this.core.mediaControl.$el.removeClass("dvr"))
        }, g.prototype.click = function () {
            var t = this.core.mediaControl,
                e = t.container;
            e.isPlaying() || e.play(), t.$el.hasClass("dvr") && e.seek(e.getDuration())
        }, g.prototype.settingsUpdate = function () {
            var t = this;
            this.stopListening(), this.core.mediaControl.$el.removeClass("live"), this.shouldRender() && (this.render(), this.$el.click(function () {
                return t.click()
            })), this.bindEvents()
        }, g.prototype.shouldRender = function () {
            return (void 0 === this.core.options.useDvrControls || !!this.core.options.useDvrControls) && this.core.getPlaybackType() === u.default.LIVE
        }, g.prototype.render = function () {
            return this.$el.html(this.template({
                live: this.core.i18n.t("live"),
                backToLive: this.core.i18n.t("back_to_live")
            })), this.shouldRender() && (this.core.mediaControl.$el.addClass("live"), this.core.mediaControl.$(".media-control-left-panel[data-media-control]").append(this.$el)), this
        }, g);

        function g(t) {
            (0, i.default)(this, g);
            var e = (0, n.default)(this, h.call(this, t));
            return e.settingsUpdate(), e
        }
        e.default = p, t.exports = e.default
    }, function (t, e) {
        t.exports = '<div class="live-info"><%= live %></div>\n<button type="button" class="live-button" aria-label="<%= backToLive %>"><%= backToLive %></button>\n'
    }, function (t, e, r) {
        var i = r(233);
        "string" == typeof i && (i = [
            [t.i, i, ""]
        ]);
        var n = {
            singleton: !0,
            hmr: !0,
            transform: void 0,
            insertInto: void 0
        };
        r(10)(i, n);
        i.locals && (t.exports = i.locals)
    }, function (t, e, r) {
        (t.exports = r(8)(!1)).push([t.i, '.dvr-controls[data-dvr-controls]{display:inline-block;float:left;color:#fff;line-height:32px;font-size:10px;font-weight:700;margin-left:6px}.dvr-controls[data-dvr-controls] .live-info{cursor:default;font-family:Roboto,Open Sans,Arial,sans-serif;text-transform:uppercase}.dvr-controls[data-dvr-controls] .live-info:before{content:"";display:inline-block;position:relative;width:7px;height:7px;border-radius:3.5px;margin-right:3.5px;background-color:#ff0101}.dvr-controls[data-dvr-controls] .live-info.disabled{opacity:.3}.dvr-controls[data-dvr-controls] .live-info.disabled:before{background-color:#fff}.dvr-controls[data-dvr-controls] .live-button{cursor:pointer;outline:none;display:none;border:0;color:#fff;background-color:transparent;height:32px;padding:0;opacity:.7;font-family:Roboto,Open Sans,Arial,sans-serif;text-transform:uppercase;transition:all .1s ease}.dvr-controls[data-dvr-controls] .live-button:before{content:"";display:inline-block;position:relative;width:7px;height:7px;border-radius:3.5px;margin-right:3.5px;background-color:#fff}.dvr-controls[data-dvr-controls] .live-button:hover{opacity:1;text-shadow:hsla(0,0%,100%,.75) 0 0 5px}.dvr .dvr-controls[data-dvr-controls] .live-info{display:none}.dvr .dvr-controls[data-dvr-controls] .live-button{display:block}.dvr.media-control.live[data-media-control] .media-control-layer[data-controls] .bar-container[data-seekbar] .bar-background[data-seekbar] .bar-fill-2[data-seekbar]{background-color:#005aff}.media-control.live[data-media-control] .media-control-layer[data-controls] .bar-container[data-seekbar] .bar-background[data-seekbar] .bar-fill-2[data-seekbar]{background-color:#ff0101}', ""])
    }, function (t, e, r) {
        "use strict";
        Object.defineProperty(e, "__esModule", {
            value: !0
        });
        var i, n = r(235),
            a = (i = n) && i.__esModule ? i : {
                default: i
            };
        e.default = a.default, t.exports = e.default
    }, function (t, e, r) {
        "use strict";
        Object.defineProperty(e, "__esModule", {
            value: !0
        });
        var i = f(r(0)),
            n = f(r(1)),
            a = f(r(3)),
            o = f(r(2)),
            s = f(r(24)),
            l = f(r(7)),
            u = f(r(4)),
            d = r(5),
            c = f(r(236));

        function f(t) {
            return t && t.__esModule ? t : {
                default: t
            }
        }
        r(237);
        var h, p = (h = s.default, (0, o.default)(g, h), (0, a.default)(g, [{
            key: "name",
            get: function () {
                return "closed_captions"
            }
        }, {
            key: "template",
            get: function () {
                return (0, l.default)(c.default)
            }
        }, {
            key: "events",
            get: function () {
                return {
                    "click [data-cc-button]": "toggleContextMenu",
                    "click [data-cc-select]": "onTrackSelect"
                }
            }
        }, {
            key: "attributes",
            get: function () {
                return {
                    class: "cc-controls",
                    "data-cc-controls": ""
                }
            }
        }]), g.prototype.bindEvents = function () {
            this.listenTo(this.core, u.default.CORE_ACTIVE_CONTAINER_CHANGED, this.containerChanged), this.listenTo(this.core.mediaControl, u.default.MEDIACONTROL_RENDERED, this.render), this.listenTo(this.core.mediaControl, u.default.MEDIACONTROL_HIDE, this.hideContextMenu), this.container = this.core.getCurrentContainer(), this.container && (this.listenTo(this.container, u.default.CONTAINER_SUBTITLE_AVAILABLE, this.onSubtitleAvailable), this.listenTo(this.container, u.default.CONTAINER_SUBTITLE_CHANGED, this.onSubtitleChanged), this.listenTo(this.container, u.default.CONTAINER_STOP, this.onContainerStop))
        }, g.prototype.onContainerStop = function () {
            this.ccAvailable(!1)
        }, g.prototype.containerChanged = function () {
            this.ccAvailable(!1), this.stopListening(), this.bindEvents()
        }, g.prototype.onSubtitleAvailable = function () {
            this.renderCcButton(), this.ccAvailable(!0)
        }, g.prototype.onSubtitleChanged = function (t) {
            this.setCurrentContextMenuElement(t.id)
        }, g.prototype.onTrackSelect = function (t) {
            var e = parseInt(t.target.dataset.ccSelect, 10);
            return this.container.closedCaptionsTrackId = e, this.hideContextMenu(), t.stopPropagation(), !1
        }, g.prototype.ccAvailable = function (t) {
            var e = t ? "addClass" : "removeClass";
            this.$el[e]("available")
        }, g.prototype.toggleContextMenu = function () {
            this.$el.find("ul").toggle()
        }, g.prototype.hideContextMenu = function () {
            this.$el.find("ul").hide()
        }, g.prototype.contextMenuElement = function (t) {
            return this.$el.find("ul a" + (isNaN(t) ? "" : '[data-cc-select="' + t + '"]')).parent()
        }, g.prototype.setCurrentContextMenuElement = function (t) {
            if (this._trackId !== t) {
                this.contextMenuElement().removeClass("current"), this.contextMenuElement(t).addClass("current");
                var e = -1 < t ? "addClass" : "removeClass";
                this.$ccButton[e]("enabled"), this._trackId = t
            }
        }, g.prototype.renderCcButton = function () {
            for (var t = this.container ? this.container.closedCaptionsTracks : [], e = 0; e < t.length; e++) t[e].label = this._labelCb(t[e]);
            this.$el.html(this.template({
                ariaLabel: this._ariaLabel,
                disabledLabel: this.core.i18n.t("disabled"),
                title: this._title,
                tracks: t
            })), this.$ccButton = this.$el.find("button.cc-button[data-cc-button]"), this.$ccButton.append(d.SvgIcons.cc), this.$el.append(this.style)
        }, g.prototype.render = function () {
            this.renderCcButton();
            var t = this.core.mediaControl.$el.find("button[data-fullscreen]");
            return t[0] ? this.$el.insertAfter(t) : this.core.mediaControl.$el.find(".media-control-right-panel[data-media-control]").prepend(this.$el), this
        }, g);

        function g(t) {
            (0, i.default)(this, g);
            var e = (0, n.default)(this, h.call(this, t)),
                r = t.options.closedCaptionsConfig;
            return e._title = r && r.title ? r.title : null, e._ariaLabel = r && r.ariaLabel ? r.ariaLabel : "cc-button", e._labelCb = r && r.labelCallback && "function" == typeof r.labelCallback ? r.labelCallback : function (t) {
                return t.name
            }, e
        }
        e.default = p, t.exports = e.default
    }, function (t, e) {
        t.exports = '<button type="button" class="cc-button media-control-button media-control-icon" data-cc-button aria-label="<%= ariaLabel %>"></button>\n<ul>\n  <% if (title) { %>\n  <li data-title><%= title %></li>\n  <% }; %>\n  <li><a href="#" data-cc-select="-1"><%= disabledLabel %></a></li>\n  <% for (var i = 0; i < tracks.length; i++) { %>\n    <li><a href="#" data-cc-select="<%= tracks[i].id %>"><%= tracks[i].label %></a></li>\n  <% }; %>\n</ul>\n'
    }, function (t, e, r) {
        var i = r(238);
        "string" == typeof i && (i = [
            [t.i, i, ""]
        ]);
        var n = {
            singleton: !0,
            hmr: !0,
            transform: void 0,
            insertInto: void 0
        };
        r(10)(i, n);
        i.locals && (t.exports = i.locals)
    }, function (t, e, r) {
        (t.exports = r(8)(!1)).push([t.i, ".cc-controls[data-cc-controls]{float:right;position:relative;display:none}.cc-controls[data-cc-controls].available{display:block}.cc-controls[data-cc-controls] .cc-button{padding:6px!important}.cc-controls[data-cc-controls] .cc-button.enabled{display:block;opacity:1}.cc-controls[data-cc-controls] .cc-button.enabled:hover{opacity:1;text-shadow:none}.cc-controls[data-cc-controls]>ul{list-style-type:none;position:absolute;bottom:25px;border:1px solid #000;display:none;background-color:#e6e6e6}.cc-controls[data-cc-controls] li{font-size:10px}.cc-controls[data-cc-controls] li[data-title]{background-color:#c3c2c2;padding:5px}.cc-controls[data-cc-controls] li a{color:#444;padding:2px 10px;display:block;text-decoration:none}.cc-controls[data-cc-controls] li a:hover{background-color:#555;color:#fff}.cc-controls[data-cc-controls] li a:hover a{color:#fff;text-decoration:none}.cc-controls[data-cc-controls] li.current a{color:red}", ""])
    }, function (t, e, r) {
        "use strict";
        Object.defineProperty(e, "__esModule", {
            value: !0
        });
        var i = c(r(0)),
            n = c(r(1)),
            a = c(r(3)),
            o = c(r(2)),
            s = c(r(35)),
            l = c(r(4)),
            u = c(r(6)),
            d = r(5);

        function c(t) {
            return t && t.__esModule ? t : {
                default: t
            }
        }
        var f, h = (0, u.default)('link[rel="shortcut icon"]'),
            p = (f = s.default, (0, o.default)(g, f), (0, a.default)(g, [{
                key: "name",
                get: function () {
                    return "favicon"
                }
            }, {
                key: "oldIcon",
                get: function () {
                    return h
                }
            }]), g.prototype.configure = function () {
                this.core.options.changeFavicon ? this.enabled || (this.stopListening(this.core, l.default.CORE_OPTIONS_CHANGE), this.enable()) : this.enabled && (this.disable(), this.listenTo(this.core, l.default.CORE_OPTIONS_CHANGE, this.configure))
            }, g.prototype.bindEvents = function () {
                this.listenTo(this.core, l.default.CORE_OPTIONS_CHANGE, this.configure), this.listenTo(this.core, l.default.CORE_ACTIVE_CONTAINER_CHANGED, this.containerChanged), this.core.activeContainer && this.containerChanged()
            }, g.prototype.containerChanged = function () {
                this._container && this.stopListening(this._container), this._container = this.core.activeContainer, this.listenTo(this._container, l.default.CONTAINER_PLAY, this.setPlayIcon), this.listenTo(this._container, l.default.CONTAINER_PAUSE, this.setPauseIcon), this.listenTo(this._container, l.default.CONTAINER_STOP, this.resetIcon), this.listenTo(this._container, l.default.CONTAINER_ENDED, this.resetIcon), this.listenTo(this._container, l.default.CONTAINER_ERROR, this.resetIcon), this.resetIcon()
            }, g.prototype.disable = function () {
                f.prototype.disable.call(this), this.resetIcon()
            }, g.prototype.destroy = function () {
                f.prototype.destroy.call(this), this.resetIcon()
            }, g.prototype.createIcon = function (t) {
                var e = (0, u.default)("<canvas/>");
                e[0].width = 16, e[0].height = 16;
                var r = e[0].getContext("2d");
                r.fillStyle = "#000";
                var i = (0, u.default)(t).find("path").attr("d"),
                    n = new Path2D(i);
                r.fill(n);
                var a = (0, u.default)('<link rel="shortcut icon" type="image/png"/>');
                return a.attr("href", e[0].toDataURL("image/png")), a
            }, g.prototype.setPlayIcon = function () {
                this.playIcon || (this.playIcon = this.createIcon(d.SvgIcons.play)), this.changeIcon(this.playIcon)
            }, g.prototype.setPauseIcon = function () {
                this.pauseIcon || (this.pauseIcon = this.createIcon(d.SvgIcons.pause)), this.changeIcon(this.pauseIcon)
            }, g.prototype.resetIcon = function () {
                (0, u.default)('link[rel="shortcut icon"]').remove(), (0, u.default)("head").append(this.oldIcon)
            }, g.prototype.changeIcon = function (t) {
                t && ((0, u.default)('link[rel="shortcut icon"]').remove(), (0, u.default)("head").append(t))
            }, g);

        function g(t) {
            (0, i.default)(this, g);
            var e = (0, n.default)(this, f.call(this, t));
            return e._container = null, e.configure(), e
        }
        e.default = p, t.exports = e.default
    }, function (t, e, r) {
        "use strict";
        Object.defineProperty(e, "__esModule", {
            value: !0
        });
        var i, n = r(241),
            a = (i = n) && i.__esModule ? i : {
                default: i
            };
        e.default = a.default, t.exports = e.default
    }, function (t, e, r) {
        "use strict";
        Object.defineProperty(e, "__esModule", {
            value: !0
        });
        var i = h(r(0)),
            n = h(r(1)),
            a = h(r(3)),
            o = h(r(2)),
            s = r(5),
            l = h(r(24)),
            u = h(r(7)),
            d = h(r(4)),
            c = h(r(11)),
            f = h(r(242));

        function h(t) {
            return t && t.__esModule ? t : {
                default: t
            }
        }
        r(243);
        var p, g = (p = l.default, (0, o.default)(m, p), (0, a.default)(m, [{
            key: "name",
            get: function () {
                return "seek_time"
            }
        }, {
            key: "template",
            get: function () {
                return (0, u.default)(f.default)
            }
        }, {
            key: "attributes",
            get: function () {
                return {
                    class: "seek-time",
                    "data-seek-time": ""
                }
            }
        }, {
            key: "mediaControl",
            get: function () {
                return this.core.mediaControl
            }
        }, {
            key: "mediaControlContainer",
            get: function () {
                return this.mediaControl.container
            }
        }, {
            key: "isLiveStreamWithDvr",
            get: function () {
                return this.mediaControlContainer && this.mediaControlContainer.getPlaybackType() === c.default.LIVE && this.mediaControlContainer.isDvrEnabled()
            }
        }, {
            key: "durationShown",
            get: function () {
                return this.isLiveStreamWithDvr && !this.actualLiveTime
            }
        }, {
            key: "useActualLiveTime",
            get: function () {
                return this.actualLiveTime && this.isLiveStreamWithDvr
            }
        }]), m.prototype.bindEvents = function () {
            this.listenTo(this.mediaControl, d.default.MEDIACONTROL_RENDERED, this.render), this.listenTo(this.mediaControl, d.default.MEDIACONTROL_MOUSEMOVE_SEEKBAR, this.showTime), this.listenTo(this.mediaControl, d.default.MEDIACONTROL_MOUSELEAVE_SEEKBAR, this.hideTime), this.listenTo(this.mediaControl, d.default.MEDIACONTROL_CONTAINERCHANGED, this.onContainerChanged), this.mediaControlContainer && (this.listenTo(this.mediaControlContainer, d.default.CONTAINER_PLAYBACKDVRSTATECHANGED, this.update), this.listenTo(this.mediaControlContainer, d.default.CONTAINER_TIMEUPDATE, this.updateDuration))
        }, m.prototype.onContainerChanged = function () {
            this.stopListening(), this.bindEvents()
        }, m.prototype.updateDuration = function (t) {
            this.duration = t.total, this.firstFragDateTime = t.firstFragDateTime, this.update()
        }, m.prototype.showTime = function (t) {
            this.hoveringOverSeekBar = !0, this.calculateHoverPosition(t), this.update()
        }, m.prototype.hideTime = function () {
            this.hoveringOverSeekBar = !1, this.update()
        }, m.prototype.calculateHoverPosition = function (t) {
            var e = t.pageX - this.mediaControl.$seekBarContainer.offset().left;
            this.hoverPosition = Math.min(1, Math.max(e / this.mediaControl.$seekBarContainer.width(), 0))
        }, m.prototype.getSeekTime = function () {
            var t = void 0,
                e = void 0,
                r = void 0,
                i = void 0;
            return this.useActualLiveTime ? (t = (e = this.firstFragDateTime ? (i = new Date(this.firstFragDateTime), (r = new Date(this.firstFragDateTime)).setHours(0, 0, 0, 0), (i.getTime() - r.getTime()) / 1e3 + this.duration) : (r = new Date((new Date).getTime() - this.actualLiveServerTimeDiff), ((i = new Date(r)) - r.setHours(0, 0, 0, 0)) / 1e3)) - this.duration + this.hoverPosition * this.duration) < 0 && (t += 86400) : t = this.hoverPosition * this.duration, {
                seekTime: t,
                secondsSinceMidnight: e
            }
        }, m.prototype.update = function () {
            if (this.rendered)
                if (this.shouldBeVisible()) {
                    var t = this.getSeekTime(),
                        e = (0, s.formatTime)(t.seekTime, this.useActualLiveTime);
                    if (e !== this.displayedSeekTime && (this.$seekTimeEl.text(e), this.displayedSeekTime = e), this.durationShown) {
                        this.$durationEl.show();
                        var r = (0, s.formatTime)(this.actualLiveTime ? t.secondsSinceMidnight : this.duration, this.actualLiveTime);
                        r !== this.displayedDuration && (this.$durationEl.text(r), this.displayedDuration = r)
                    } else this.$durationEl.hide();
                    this.$el.show();
                    var i = this.mediaControl.$seekBarContainer.width(),
                        n = this.$el.width(),
                        a = this.hoverPosition * i;
                    a -= n / 2, a = Math.max(0, Math.min(a, i - n)), this.$el.css("left", a)
                } else this.$el.hide(), this.$el.css("left", "-100%")
        }, m.prototype.shouldBeVisible = function () {
            return this.mediaControlContainer && this.mediaControlContainer.settings.seekEnabled && this.hoveringOverSeekBar && null !== this.hoverPosition && null !== this.duration
        }, m.prototype.render = function () {
            this.rendered = !0, this.displayedDuration = null, this.displayedSeekTime = null, this.$el.html(this.template()), this.$el.hide(), this.mediaControl.$el.append(this.el), this.$seekTimeEl = this.$el.find("[data-seek-time]"), this.$durationEl = this.$el.find("[data-duration]"), this.$durationEl.hide(), this.update()
        }, m);

        function m(t) {
            (0, i.default)(this, m);
            var e = (0, n.default)(this, p.call(this, t));
            return e.hoveringOverSeekBar = !1, e.hoverPosition = null, e.duration = null, e.firstFragDateTime = null, e.actualLiveTime = !!e.mediaControl.options.actualLiveTime, e.actualLiveTime && (e.mediaControl.options.actualLiveServerTime ? e.actualLiveServerTimeDiff = (new Date).getTime() - new Date(e.mediaControl.options.actualLiveServerTime).getTime() : e.actualLiveServerTimeDiff = 0), e
        }
        e.default = g, t.exports = e.default
    }, function (t, e) {
        t.exports = "<span data-seek-time></span>\n<span data-duration></span>\n"
    }, function (t, e, r) {
        var i = r(244);
        "string" == typeof i && (i = [
            [t.i, i, ""]
        ]);
        var n = {
            singleton: !0,
            hmr: !0,
            transform: void 0,
            insertInto: void 0
        };
        r(10)(i, n);
        i.locals && (t.exports = i.locals)
    }, function (t, e, r) {
        (t.exports = r(8)(!1)).push([t.i, '.seek-time[data-seek-time]{position:absolute;white-space:nowrap;height:20px;line-height:20px;font-size:0;left:-100%;bottom:55px;background-color:rgba(2,2,2,.5);z-index:9999;transition:opacity .1s ease}.seek-time[data-seek-time].hidden[data-seek-time]{opacity:0}.seek-time[data-seek-time] [data-seek-time]{display:inline-block;color:#fff;font-size:10px;padding-left:7px;padding-right:7px;vertical-align:top}.seek-time[data-seek-time] [data-duration]{display:inline-block;color:hsla(0,0%,100%,.5);font-size:10px;padding-right:7px;vertical-align:top}.seek-time[data-seek-time] [data-duration]:before{content:"|";margin-right:7px}', ""])
    }, function (t, e, r) {
        "use strict";
        Object.defineProperty(e, "__esModule", {
            value: !0
        });
        var i = u(r(0)),
            n = u(r(3)),
            a = u(r(1)),
            o = u(r(2)),
            s = u(r(35)),
            l = u(r(4));

        function u(t) {
            return t && t.__esModule ? t : {
                default: t
            }
        }
        var d, c = (d = s.default, (0, o.default)(f, d), f.prototype.bindEvents = function () {
            this.listenTo(this.core, l.default.CORE_CONTAINERS_CREATED, this.onContainersCreated)
        }, f.prototype.onContainersCreated = function () {
            var e = this.core.containers.filter(function (t) {
                return "no_op" !== t.playback.name
            })[0] || this.core.containers[0];
            e && this.core.containers.forEach(function (t) {
                t !== e && t.destroy()
            })
        }, (0, n.default)(f, [{
            key: "name",
            get: function () {
                return "sources"
            }
        }]), f);

        function f() {
            return (0, i.default)(this, f), (0, a.default)(this, d.apply(this, arguments))
        }
        e.default = c, t.exports = e.default
    }, function (t, e, r) {
        "use strict";
        Object.defineProperty(e, "__esModule", {
            value: !0
        });
        var i = u(r(0)),
            n = u(r(3)),
            a = u(r(1)),
            o = u(r(2)),
            s = u(r(4)),
            l = u(r(35));

        function u(t) {
            return t && t.__esModule ? t : {
                default: t
            }
        }
        var d, c = (d = l.default, (0, o.default)(f, d), f.prototype.bindEvents = function () {
            this.listenTo(this.core, s.default.CORE_ACTIVE_CONTAINER_CHANGED, this.containerChanged);
            var t = this.core.activeContainer;
            t && (this.listenTo(t, s.default.CONTAINER_ENDED, this.ended), this.listenTo(t, s.default.CONTAINER_STOP, this.ended))
        }, f.prototype.containerChanged = function () {
            this.stopListening(), this.bindEvents()
        }, f.prototype.ended = function () {
            (void 0 === this.core.options.exitFullscreenOnEnd || this.core.options.exitFullscreenOnEnd) && this.core.isFullscreen() && this.core.toggleFullscreen()
        }, (0, n.default)(f, [{
            key: "name",
            get: function () {
                return "end_video"
            }
        }]), f);

        function f() {
            return (0, i.default)(this, f), (0, a.default)(this, d.apply(this, arguments))
        }
        e.default = c, t.exports = e.default
    }, function (t, e, r) {
        "use strict";
        Object.defineProperty(e, "__esModule", {
            value: !0
        });
        var i = d(r(0)),
            n = d(r(1)),
            a = d(r(3)),
            o = d(r(2)),
            s = r(5),
            l = d(r(6)),
            u = d(r(35));

        function d(t) {
            return t && t.__esModule ? t : {
                default: t
            }
        }
        var c, f = (c = u.default, (0, o.default)(h, c), (0, a.default)(h, [{
            key: "name",
            get: function () {
                return "strings"
            }
        }]), h.prototype.t = function (t) {
            var e = this._language(),
                r = this._messages.en;
            return (e && this._messages[e] || r)[t] || r[t] || t
        }, h.prototype._language = function () {
            return this.core.options.language || (0, s.getBrowserLanguage)()
        }, h.prototype._initializeMessages = function () {
            this._messages = l.default.extend(!0, {
                en: {
                    live: "live",
                    back_to_live: "back to live",
                    disabled: "Disabled",
                    playback_not_supported: "Your browser does not support the playback of this video. Please try using a different browser.",
                    default_error_title: "Could not play video.",
                    default_error_message: "There was a problem trying to load the video."
                },
                pt: {
                    live: "ao vivo",
                    back_to_live: "voltar para o ao vivo",
                    disabled: "Desativado",
                    playback_not_supported: "Seu navegador não supporta a reprodução deste video. Por favor, tente usar um navegador diferente.",
                    default_error_title: "Não foi possível reproduzir o vídeo.",
                    default_error_message: "Ocorreu um problema ao tentar carregar o vídeo."
                },
                es: {
                    live: "vivo",
                    back_to_live: "volver en vivo",
                    disabled: "Discapacitado",
                    playback_not_supported: "Su navegador no soporta la reproducción de un video. Por favor, trate de usar un navegador diferente."
                },
                ru: {
                    live: "прямой эфир",
                    back_to_live: "к прямому эфиру",
                    disabled: "Отключено",
                    playback_not_supported: "Ваш браузер не поддерживает воспроизведение этого видео. Пожалуйста, попробуйте другой браузер."
                },
                fr: {
                    live: "en direct",
                    back_to_live: "retour au direct",
                    disabled: "Désactivé",
                    playback_not_supported: "Votre navigateur ne supporte pas la lecture de cette vidéo. Merci de tenter sur un autre navigateur.",
                    default_error_title: "Impossible de lire la vidéo.",
                    default_error_message: "Un problème est survenu lors du chargement de la vidéo."
                },
                tr: {
                    live: "canlı",
                    back_to_live: "canlı yayına dön",
                    disabled: "Engelli",
                    playback_not_supported: "Tarayıcınız bu videoyu oynatma desteğine sahip değil. Lütfen farklı bir tarayıcı ile deneyin."
                },
                et: {
                    live: "Otseülekanne",
                    back_to_live: "Tagasi otseülekande juurde",
                    disabled: "Keelatud",
                    playback_not_supported: "Teie brauser ei toeta selle video taasesitust. Proovige kasutada muud brauserit."
                },
                ar: {
                    live: "مباشر",
                    back_to_live: "الرجوع إلى المباشر",
                    disabled: "معطّل",
                    playback_not_supported: "المتصفح الذي تستخدمه لا يدعم تشغيل هذا الفيديو. الرجاء إستخدام متصفح آخر.",
                    default_error_title: "غير قادر الى التشغيل.",
                    default_error_message: "حدثت مشكلة أثناء تحميل الفيديو."
                }
            }, this.core.options.strings || {}), this._messages["pt-BR"] = this._messages.pt, this._messages["en-US"] = this._messages.en, this._messages["es-419"] = this._messages.es, this._messages["fr-FR"] = this._messages.fr, this._messages["tr-TR"] = this._messages.tr, this._messages["et-EE"] = this._messages.et, this._messages["ar-IQ"] = this._messages.ar
        }, h);

        function h(t) {
            (0, i.default)(this, h);
            var e = (0, n.default)(this, c.call(this, t));
            return e._initializeMessages(), e
        }
        e.default = f, t.exports = e.default
    }, function (t, e, r) {
        "use strict";
        Object.defineProperty(e, "__esModule", {
            value: !0
        });
        var i, n = r(249),
            a = (i = n) && i.__esModule ? i : {
                default: i
            };
        e.default = a.default, t.exports = e.default
    }, function (t, e, r) {
        "use strict";
        Object.defineProperty(e, "__esModule", {
            value: !0
        });
        var i = h(r(0)),
            n = h(r(1)),
            a = h(r(3)),
            o = h(r(2)),
            s = h(r(4)),
            l = h(r(24)),
            u = h(r(7)),
            d = h(r(25)),
            c = r(5),
            f = h(r(250));

        function h(t) {
            return t && t.__esModule ? t : {
                default: t
            }
        }
        r(251);
        var p, g = (p = l.default, (0, o.default)(m, p), (0, a.default)(m, [{
            key: "name",
            get: function () {
                return "error_screen"
            }
        }, {
            key: "template",
            get: function () {
                return (0, u.default)(f.default)
            }
        }, {
            key: "container",
            get: function () {
                return this.core.getCurrentContainer()
            }
        }, {
            key: "attributes",
            get: function () {
                return {
                    class: "player-error-screen",
                    "data-error-screen": ""
                }
            }
        }]), m.prototype.bindEvents = function () {
            this.listenTo(this.core, s.default.ERROR, this.onError), this.listenTo(this.core, s.default.CORE_ACTIVE_CONTAINER_CHANGED, this.onContainerChanged)
        }, m.prototype.bindReload = function () {
            this.reloadButton = this.$el.find(".player-error-screen__reload"), this.reloadButton && this.reloadButton.on("click", this.reload.bind(this))
        }, m.prototype.reload = function () {
            var t = this;
            this.listenToOnce(this.core, s.default.CORE_READY, function () {
                return t.container.play()
            }), this.core.load(this.options.sources, this.options.mimeType), this.unbindReload()
        }, m.prototype.unbindReload = function () {
            this.reloadButton && this.reloadButton.off("click")
        }, m.prototype.onContainerChanged = function () {
            this.err = null, this.unbindReload(), this.hide()
        }, m.prototype.onError = function (t) {
            var e = 0 < arguments.length && void 0 !== t ? t : {};
            e.level === d.default.Levels.FATAL && (this.err = e, this.container.disableMediaControl(), this.container.stop(), this.show())
        }, m.prototype.show = function () {
            this.render(), this.$el.show()
        }, m.prototype.hide = function () {
            this.$el.hide()
        }, m.prototype.render = function () {
            if (this.err) return this.$el.html(this.template({
                title: this.err.UI.title,
                message: this.err.UI.message,
                code: this.err.code,
                icon: this.err.UI.icon || "",
                reloadIcon: c.SvgIcons.reload
            })), this.core.$el.append(this.el), this.bindReload(), this
        }, m);

        function m(t) {
            var e;
            (0, i.default)(this, m);
            var r = (0, n.default)(this, p.call(this, t));
            return r.options.disableErrorScreen ? (e = r.disable(), (0, n.default)(r, e)) : r
        }
        e.default = g, t.exports = e.default
    }, function (t, e) {
        t.exports = '<div class="player-error-screen__content" data-error-screen>\n  <% if (icon) { %>\n  <div class="player-error-screen__icon" data-error-screen><%= icon %></div>\n  <% } %>\n  <div class="player-error-screen__title" data-error-screen><%= title %></div>\n  <div class="player-error-screen__message" data-error-screen><%= message %></div>\n  <div class="player-error-screen__code" data-error-screen>Error code: <%= code %></div>\n  <div class="player-error-screen__reload" data-error-screen><%= reloadIcon %></div>\n</div>\n'
    }, function (t, e, r) {
        var i = r(252);
        "string" == typeof i && (i = [
            [t.i, i, ""]
        ]);
        var n = {
            singleton: !0,
            hmr: !0,
            transform: void 0,
            insertInto: void 0
        };
        r(10)(i, n);
        i.locals && (t.exports = i.locals)
    }, function (t, e, r) {
        (t.exports = r(8)(!1)).push([t.i, "div.player-error-screen{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;color:#cccaca;position:absolute;top:0;height:100%;width:100%;background-color:rgba(0,0,0,.7);z-index:2000;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center}div.player-error-screen__content[data-error-screen]{font-size:14px;color:#cccaca;margin-top:45px}div.player-error-screen__title[data-error-screen]{font-weight:700;line-height:30px;font-size:18px}div.player-error-screen__message[data-error-screen]{width:90%;margin:0 auto}div.player-error-screen__code[data-error-screen]{font-size:13px;margin-top:15px}div.player-error-screen__reload{cursor:pointer;width:30px;margin:15px auto 0}", ""])
    }], f.c = e, f.d = function (t, e, r) {
        f.o(t, e) || Object.defineProperty(t, e, {
            enumerable: !0,
            get: r
        })
    }, f.r = function (t) {
        "undefined" != typeof Symbol && Symbol.toStringTag && Object.defineProperty(t, Symbol.toStringTag, {
            value: "Module"
        }), Object.defineProperty(t, "__esModule", {
            value: !0
        })
    }, f.t = function (e, t) {
        if (1 & t && (e = f(e)), 8 & t) return e;
        if (4 & t && "object" == typeof e && e && e.__esModule) return e;
        var r = Object.create(null);
        if (f.r(r), Object.defineProperty(r, "default", {
            enumerable: !0,
            value: e
        }), 2 & t && "string" != typeof e)
            for (var i in e) f.d(r, i, function (t) {
                return e[t]
            }.bind(null, i));
        return r
    }, f.n = function (t) {
        var e = t && t.__esModule ? function () {
            return t.default
        } : function () {
            return t
        };
        return f.d(e, "a", e), e
    }, f.o = function (t, e) {
        return Object.prototype.hasOwnProperty.call(t, e)
    }, f.p = "dist/", f(f.s = 100);

    function f(t) {
        if (e[t]) return e[t].exports;
        var r = e[t] = {
            i: t,
            l: !1,
            exports: {}
        };
        return d[t].call(r.exports, r, r.exports, f), r.l = !0, r.exports
    }
    var d, e
});
